{"id":"holomush-02y","title":"Fix incorrect test comment in ConcurrentClose test","description":"## Problem\nTest comment at extism_host_test.go:274-275 says 'expect ErrPluginNotFound' but after Close() the error is ErrHostClosed.\n\n## Acceptance Criteria\n- [ ] Fix comment to say 'expect ErrHostClosed'\n- [ ] Verify test logic matches comment\n- [ ] Independent code review before closing","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T16:09:59Z","created_by":"seanb4t","updated_at":"2026-01-18T16:31:33Z","closed_at":"2026-01-18T16:31:33Z","work_type":"mutex"}
{"id":"holomush-03z","title":"Add GitHub Actions workflow for docs","description":"## Summary\nCreate GitHub Actions workflow for building and deploying docs to Cloudflare Pages.\n\n## Files\n- Create: .github/workflows/docs.yml\n\n## Steps\n1. Create .github/workflows/docs.yml with:\n   - Trigger on push to main with site/** changes\n   - Trigger on PRs with site/** changes\n   - Use actions/checkout@v6\n   - Use astral-sh/setup-uv@v7 with version 0.9.26\n   - Build with uv run zensical build\n   - Deploy with cloudflare/wrangler-action@v3\n2. Add SPDX license header\n3. Run: task lint:yaml - verify YAML syntax\n4. Commit: ci(docs): add GitHub Actions workflow for Cloudflare Pages\n\n## Acceptance Criteria\n- [ ] Workflow triggers on main push with site/** changes\n- [ ] Workflow triggers on PRs with site/** changes\n- [ ] Uses verified action versions (checkout@v6, setup-uv@v7, wrangler-action@v3)\n- [ ] uv version pinned to 0.9.26\n- [ ] SPDX license header present\n- [ ] YAML linting passes\n\n## Reference\nSee docs/plans/2026-01-23-zensical-docs-design.md for workflow spec","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T14:05:27Z","created_by":"seanb4t","updated_at":"2026-01-24T16:52:38Z","closed_at":"2026-01-24T16:52:38Z","dependencies":[{"issue_id":"holomush-03z","depends_on_id":"holomush-1zx","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-077","title":"Make exit visibility check atomic","description":"MEDIUM: IsVisibleTo requires caller to pass locationOwnerID which could be spoofed. Add repository method IsVisibleToCharacter that fetches owner atomically in query.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T00:26:11Z","created_by":"seanb4t","updated_at":"2026-01-24T00:59:02Z","closed_at":"2026-01-24T00:59:02Z","dependencies":[{"issue_id":"holomush-077","depends_on_id":"holomush-72r","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-0d30","title":"Decisions: Separate namespace enforcement from duplicate plugin detection in #33","description":"**Review Finding: I3 (Important)**\n\nDecision #33 conflates two distinct checks: (1) namespace enforcement (plugin tokens must use plugin ID prefix), and (2) duplicate plugin ID detection (two plugins with same ID). The namespace rule prevents cross-plugin conflicts but doesn't solve the duplicate plugin ID problem.\n\n**Location:** Decisions doc, Decision #33\n\n**Acceptance Criteria:**\n- Decision explicitly separates the two checks\n- Namespace enforcement: engine rejects tokens not matching registering plugin's ID\n- Duplicate plugin detection: second plugin registration fails with clear error before token registration\n- Each check has its own description and error message","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T14:04:48Z","created_by":"seanb4t","updated_at":"2026-02-06T14:25:48Z","closed_at":"2026-02-06T14:25:48Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-0d30","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-0ef9x","title":"[E6.fix] Validate and log malformed event entries in parseEmitEvents","description":"## Problem\nWhen iterating over returned events in `parseEmitEvents`, any entry that is not a table is silently skipped. Missing/nil required fields (`stream`, `type`) become empty strings without warning.\n\n**Location:** `internal/plugin/lua/host.go:255-264`\n\n## Impact\n- Plugins returning wrong types (`{1, 2, 3}` instead of `{{stream=\"...\", ...}}`) fail silently\n- Events created with empty stream/type cause downstream routing failures hard to trace\n\n## Acceptance Criteria\n- [ ] Log warning when event entry is not a table (include index and actual type)\n- [ ] Validate required fields (`stream`, `type`) are non-empty\n- [ ] Log warning when required fields are missing (include index and field values)\n- [ ] Add tests verifying warnings are logged for:\n  - Non-table entries\n  - Missing `stream` field\n  - Missing `type` field","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T03:04:51Z","created_by":"seanb4t","updated_at":"2026-02-04T03:16:16Z","closed_at":"2026-02-04T03:16:16Z","dependencies":[{"issue_id":"holomush-0ef9x","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-0iw","title":"Check context cancellation before emit loop","description":"## Problem\nextism_subscriber.go:123-137 proceeds to emit all plugin-generated events without checking if context was cancelled. If shutdown occurs after delivery but before/during emission, each emit fails with context.Canceled, generating N error log entries instead of one clear message.\n\n## Source\nPR Review Round 7 - silent-failure-hunter agent (MEDIUM severity)\n\n## Acceptance Criteria\n- [ ] Test proves issue exists (shutdown during emit causes multiple error logs)\n- [ ] Add parentCtx.Err() check before emit loop\n- [ ] Log single WARN about skipping emits due to shutdown\n- [ ] Include pending emit count in log\n- [ ] Independent subagent review before closing","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T18:36:43Z","created_by":"seanb4t","updated_at":"2026-01-18T20:30:20Z","closed_at":"2026-01-18T20:30:20Z","dependencies":[{"issue_id":"holomush-0iw","depends_on_id":"holomush-vq5","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-0iym","title":"Decisions: Downplay parsing performance claim in Decision #22","description":"**Review Finding: S5 (Suggestion)**\n\nDecision #22 claims parsing overhead is negligible (~1μs per parse) but this is unsupported. The real benefits of flat strings are serialization simplicity for audit logs and admin-friendly CLI. The performance claim distracts from the actual rationale.\n\n**Location:** Decisions doc, Decision #22\n\n**Acceptance Criteria:**\n- Remove or downplay the parsing performance claim\n- Emphasize real benefits: simpler serialization for audit, admin-friendly policy test command, consistent with external API boundaries","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T14:05:47Z","created_by":"seanb4t","updated_at":"2026-02-06T14:34:19Z","closed_at":"2026-02-06T14:34:19Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-0iym","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-0k5m","title":"[E4-Post] Consider builder pattern for ObjectGivePayload constructor","description":"**Source:** PR Review - Type Design Analyzer\n\n**Problem:**\nThe NewObjectGivePayload constructor puts both character IDs adjacent, making it easy to accidentally swap from/to:\n\n```go\nNewObjectGivePayload(objectID, objectName, fromCharacterID, toCharacterID)\n```\n\n**Options:**\n1. Named parameter struct: `GiveParams{From, To, Object, Name}`\n2. Builder pattern with semantic methods\n3. Reorder parameters to separate IDs with name string\n\n**Acceptance Criteria:**\n- [ ] Evaluate options and document decision\n- [ ] If changing: update constructor and all call sites\n- [ ] If not changing: add godoc explaining parameter order and swap risk\n\n**Files:**\n- Modify: `internal/world/payloads.go`","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T19:50:28Z","created_by":"seanb4t","updated_at":"2026-01-25T21:28:09Z","closed_at":"2026-01-25T21:28:09Z","work_type":"mutex"}
{"id":"holomush-0n2l","title":"Make migrations idempotent for concurrent execution","description":"**Source:** Discovered during holomush-5viy concurrent seed test\n\n**Problem:**\nWhen multiple processes run `seed` concurrently, each tries to run migrations. The migration system fails with:\n```\nERROR: constraint \"chk_exactly_one_containment\" for relation \"objects\" already exists (SQLSTATE 42710)\n```\n\nThe migration system is not idempotent - it doesn't use CREATE CONSTRAINT IF NOT EXISTS or equivalent.\n\n**Impact:**\n- Concurrent seed commands may fail due to migration races\n- Any scenario where multiple processes run migrations simultaneously\n\n**Acceptance Criteria:**\n- [ ] Migrations use idempotent operations (IF NOT EXISTS patterns)\n- [ ] Concurrent migration execution doesn't fail\n- [ ] Test verifies concurrent seed commands all succeed","status":"open","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T22:12:47Z","created_by":"seanb4t","updated_at":"2026-01-25T22:12:47Z","work_type":"mutex"}
{"id":"holomush-0n5d","title":"Fix operator docs: remove incorrect bare migrate command claim","description":"## Problem\n\nThe operator documentation incorrectly claims that running `holomush migrate` applies migrations with \"(default: up)\" behavior.\n\n**File:** `site/docs/operators/database.md:123`\n\n## Actual Behavior\n\nThe `NewMigrateCmd()` function creates a parent command without a default `RunE`. Running `holomush migrate` shows help, not migrations.\n\n## Acceptance Criteria\n\n- [ ] Update documentation to show `holomush migrate up` as the correct command\n- [ ] Remove claim that bare `migrate` command applies migrations\n- [ ] Verify all examples use explicit subcommands","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T19:00:21Z","created_by":"seanb4t","updated_at":"2026-01-25T19:23:03Z","closed_at":"2026-01-25T19:23:03Z","work_type":"mutex"}
{"id":"holomush-0pe","title":"Remove unused finished channel from slowEmitter test helper","description":"## Summary\nThe slowEmitter test helper has a finished channel that is only partially used.\n\n## Location\n`internal/wasm/extism_subscriber_test.go:214-249`\n\n## Acceptance Criteria\n- [ ] Verify finished channel is actually unused\n- [ ] Remove the unused channel\n- [ ] All tests still pass\n- [ ] Independent review by subagent confirms removal","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T17:13:47Z","created_by":"seanb4t","updated_at":"2026-01-18T17:32:14Z","closed_at":"2026-01-18T17:32:14Z","work_type":"mutex"}
{"id":"holomush-0sc","title":"Epic 10: Channels","description":"In-game communication channels with membership and moderation.\n\n**Goal:** Flexible channel system for community communication.\n\n**Channel Types:**\n- Public: Open to all\n- Private: Invite only\n- Admin: Staff only\n\n**Phases:**\n- 10.1: Channel schema\n- 10.2: Channel commands\n- 10.3: Channel types\n- 10.4: Moderation\n- 10.5: Channel history\n\n**Acceptance Criteria:**\n- [ ] Channel name, type, membership stored\n- [ ] channel join/leave/list/say commands work\n- [ ] Public, private, admin channel types work\n- [ ] Mute, ban, ops moderation works\n- [ ] Logging and replay on join works","status":"open","priority":2,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:27:44Z","created_by":"seanb4t","updated_at":"2026-01-19T01:27:44Z","dependencies":[{"issue_id":"holomush-0sc","depends_on_id":"holomush-wr9","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-0sc.1","title":"[E10] Design: Channels Architecture","description":"Design the channels system architecture for HoloMUSH.\n\n## Scope\n- Channel data model (name, type, membership, permissions)\n- Event types for channel operations\n- Integration with existing event system\n- ABAC policies for channel access\n\n## Acceptance Criteria\n- [ ] Channel entity design documented\n- [ ] Channel event types defined (join, leave, message, etc.)\n- [ ] Membership model specified (owner, ops, members, banned)\n- [ ] Channel types enumerated (public, private, admin)\n- [ ] ABAC policies for channel operations defined\n- [ ] Database schema designed\n- [ ] API endpoints/commands specified","status":"open","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:32:14Z","created_by":"seanb4t","updated_at":"2026-01-19T01:32:14Z","dependencies":[{"issue_id":"holomush-0sc.1","depends_on_id":"holomush-0sc","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-0sc.2","title":"[E10] Implementation Plan: Channels","description":"Create detailed implementation plan for the channels system.\n\n## Scope\n- Break down design into implementable tasks\n- Define test strategy for each component\n- Estimate effort and identify risks\n- Plan migration/rollout strategy\n\n## Acceptance Criteria\n- [ ] Implementation phases documented with clear deliverables\n- [ ] Test plan covering unit, integration, and E2E tests\n- [ ] Dependencies on other epics identified\n- [ ] File/package structure planned\n- [ ] API versioning strategy if needed","status":"open","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:32:19Z","created_by":"seanb4t","updated_at":"2026-01-19T01:32:19Z","dependencies":[{"issue_id":"holomush-0sc.2","depends_on_id":"holomush-0sc","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-0sc.2","depends_on_id":"holomush-0sc.1","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-0sc.3","title":"[E10.1] Channel Schema - Name, Type, Membership","description":"Implement channel database schema and core data types.\n\n## Scope\n- Channel table with name, type, description, owner\n- ChannelMembership table with role (owner, op, member, banned)\n- Channel types enum (public, private, admin)\n- Go types in internal/core/channel.go\n\n## Acceptance Criteria\n- [ ] Database migration for channels and channel_memberships tables\n- [ ] Channel struct with all required fields\n- [ ] ChannelMembership struct with role enum\n- [ ] ChannelType enum (Public, Private, Admin)\n- [ ] ChannelStore interface defined\n- [ ] PostgreSQL ChannelStore implementation\n- [ ] Unit tests for channel types and validation\n- [ ] Integration tests for ChannelStore CRUD operations\n- [ ] \u003e80% test coverage","status":"open","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:32:25Z","created_by":"seanb4t","updated_at":"2026-01-19T01:32:25Z","dependencies":[{"issue_id":"holomush-0sc.3","depends_on_id":"holomush-0sc","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-0sc.3","depends_on_id":"holomush-0sc.1","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-0sc.3","depends_on_id":"holomush-0sc.2","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-0sc.4","title":"[E10.2] Channel Commands - join/leave/list/say","description":"Implement basic channel commands for player interaction.\n\n## Scope\n- @channel command with subcommands\n- Join/leave channel functionality\n- List available channels\n- Say to channel (message broadcast)\n\n## Commands\n- @channel list - Show available channels\n- @channel join \u003cname\u003e - Join a channel\n- @channel leave \u003cname\u003e - Leave a channel\n- @channel \u003cname\u003e=\u003cmessage\u003e - Send message to channel\n\n## Acceptance Criteria\n- [ ] @channel list shows public channels and joined channels\n- [ ] @channel join adds membership with proper permissions\n- [ ] @channel leave removes membership (unless owner)\n- [ ] Channel messages broadcast to all members\n- [ ] Channel events emitted (ChannelJoin, ChannelLeave, ChannelMessage)\n- [ ] Error handling for invalid channels, permissions\n- [ ] Unit tests for each command\n- [ ] Integration tests for command flow\n- [ ] \u003e80% test coverage","status":"open","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:32:30Z","created_by":"seanb4t","updated_at":"2026-01-19T01:32:30Z","dependencies":[{"issue_id":"holomush-0sc.4","depends_on_id":"holomush-0sc","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-0sc.4","depends_on_id":"holomush-0sc.3","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-0sc.5","title":"[E10.3] Channel Types - Public, Private, Admin","description":"Implement channel type-specific behavior and access control.\n\n## Scope\n- Public channels: visible to all, joinable by all\n- Private channels: invite-only, hidden from list\n- Admin channels: staff-only, hidden from players\n\n## Acceptance Criteria\n- [ ] Public channels appear in @channel list for all players\n- [ ] Private channels only visible to members\n- [ ] Private channels require invite to join\n- [ ] Admin channels only visible/joinable by staff\n- [ ] ABAC policies enforce channel type restrictions\n- [ ] @channel invite \u003cplayer\u003e \u003cchannel\u003e for private channels\n- [ ] Channel creation respects type permissions\n- [ ] Unit tests for each channel type\n- [ ] Integration tests for access control\n- [ ] \u003e80% test coverage","status":"open","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:32:36Z","created_by":"seanb4t","updated_at":"2026-01-19T01:32:36Z","dependencies":[{"issue_id":"holomush-0sc.5","depends_on_id":"holomush-0sc","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-0sc.5","depends_on_id":"holomush-0sc.4","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-0sc.6","title":"[E10.4] Moderation - Mute, Ban, Ops","description":"Implement channel moderation tools for operators.\n\n## Scope\n- Channel operator (op) role with moderation powers\n- Mute: temporarily silence a member\n- Ban: remove and prevent rejoining\n- Op management: grant/revoke op status\n\n## Commands\n- @channel op \u003cplayer\u003e \u003cchannel\u003e - Grant op status\n- @channel deop \u003cplayer\u003e \u003cchannel\u003e - Revoke op status\n- @channel mute \u003cplayer\u003e \u003cchannel\u003e [duration] - Mute player\n- @channel unmute \u003cplayer\u003e \u003cchannel\u003e - Unmute player\n- @channel ban \u003cplayer\u003e \u003cchannel\u003e - Ban from channel\n- @channel unban \u003cplayer\u003e \u003cchannel\u003e - Remove ban\n\n## Acceptance Criteria\n- [ ] Ops can mute, ban, unmute, unban members\n- [ ] Owner can grant/revoke op status\n- [ ] Muted players cannot send messages\n- [ ] Banned players cannot rejoin\n- [ ] Moderation events emitted (Mute, Ban, Op changes)\n- [ ] Staff can override moderation as needed\n- [ ] Mute duration with auto-expire (optional)\n- [ ] Unit tests for each moderation action\n- [ ] Integration tests for permission boundaries\n- [ ] \u003e80% test coverage","status":"open","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:32:43Z","created_by":"seanb4t","updated_at":"2026-01-19T01:32:43Z","dependencies":[{"issue_id":"holomush-0sc.6","depends_on_id":"holomush-0sc","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-0sc.6","depends_on_id":"holomush-0sc.5","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-0sc.7","title":"[E10.5] Channel History - Logging, Replay on Join","description":"Implement channel message history and replay functionality.\n\n## Scope\n- Persist channel messages to event store\n- Replay recent messages on channel join\n- Channel history command for scrollback\n- Configurable history retention\n\n## Acceptance Criteria\n- [ ] Channel messages stored in event store\n- [ ] New joiners see last N messages (configurable, default 20)\n- [ ] @channel history \u003cname\u003e [count] shows recent messages\n- [ ] History respects join timestamp (no messages before join)\n- [ ] Admin channels may have extended/unlimited history\n- [ ] History pruning for old messages (configurable retention)\n- [ ] Unit tests for history storage/retrieval\n- [ ] Integration tests for replay on join\n- [ ] Performance tests for large history\n- [ ] \u003e80% test coverage","status":"open","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:32:49Z","created_by":"seanb4t","updated_at":"2026-01-19T01:32:49Z","dependencies":[{"issue_id":"holomush-0sc.7","depends_on_id":"holomush-0sc","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-0sc.7","depends_on_id":"holomush-0sc.6","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-0v6c","title":"ADR 0016: Surface fire-and-forget LISTEN/NOTIFY limitation in Context section","description":"**Review Finding: C4 (Critical)**\n\nADR 0016's most critical operational constraint — PostgreSQL LISTEN/NOTIFY is fire-and-forget with zero buffering, meaning notifications are permanently lost during disconnection — is buried after the Decision section. This should appear prominently in the Context section.\n\n**Location:** ADR 0016 (LISTEN/NOTIFY Policy Cache Invalidation)\n\n**Acceptance Criteria:**\n- Context section includes prominent paragraph about fire-and-forget constraint\n- Clearly states: notifications sent while listener is disconnected are permanently lost\n- States: no replay mechanism, no delivery guarantee\n- States: any invalidation strategy must handle reconnection via full cache reload\n- Decision section references the Context constraint","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T14:04:26Z","created_by":"seanb4t","updated_at":"2026-02-06T14:20:52Z","closed_at":"2026-02-06T14:20:52Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-0v6c","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-0w1j","title":"Use WARN level for connection close errors during cleanup","description":"File: internal/store/postgres.go:241-246 and 254-257\n\nConnection close errors during cleanup are logged at DEBUG level. In production where DEBUG logging is often disabled, operators won't see repeated connection close failures.\n\n## Problem\nConnection close errors during cleanup are logged at DEBUG level. In production where DEBUG logging is often disabled, operators won't see repeated connection close failures.\n\n## Impact\n- Connection leaks could go unnoticed in production\n- Resource exhaustion builds up silently\n\n## Acceptance Criteria\n- [ ] Change slog.Debug to slog.Warn for cleanup close failures\n- [ ] Update message to indicate potential leak\n- [ ] Verify logging is visible in default production config\n\n## Suggested Fix\nReplace DEBUG with WARN level and update message to indicate potential connection leak.","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T18:09:07Z","created_by":"seanb4t","updated_at":"2026-01-25T18:34:07Z","closed_at":"2026-01-25T18:34:07Z","work_type":"mutex"}
{"id":"holomush-0zoc","title":"[E4-Post] Add postgres repo test for UpdateLocation with nil","description":"**Source:** PR review - test coverage analysis\n\n**Problem:**\n`TestCharacterRepository_UpdateLocation` in `internal/world/postgres/character_repo_test.go` covers setting a location to a valid ULID, but does not test updating a location back to `nil` (removing a character from the world).\n\nWhile `Character.SetLocationID` is tested with nil at the domain level (`character_test.go:244-291`), the postgres repository test should verify the SQL handles `NULL` values correctly.\n\n**What it would catch:**\nSQL driver issues where `*ulid.ULID(nil)` is not correctly converted to `NULL`, potentially causing database errors or unexpected behavior when characters are removed from the world.\n\n**Acceptance Criteria:**\n- [ ] Test case in `character_repo_test.go` for `UpdateLocation(ctx, id, nil)`\n- [ ] Verifies character can be removed from world (location_id becomes NULL)\n- [ ] Verifies character can be retrieved with nil LocationID after update\n- [ ] Uses testcontainers PostgreSQL","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T21:44:13Z","created_by":"seanb4t","updated_at":"2026-01-25T22:14:17Z","closed_at":"2026-01-25T22:14:17Z","work_type":"mutex"}
{"id":"holomush-1332","title":"Add error context to PendingMigrations/AppliedMigrations","description":"File: internal/store/migrate.go:158-167 and 180-193\n\nThese methods call Version() and allMigrationVersions() and return their errors directly without adding context.\n\nProblem:\nWhen Version() returns MIGRATION_VERSION_FAILED, the caller doesn't know whether this was during PendingMigrations() or AppliedMigrations() without stack traces.\n\nAcceptance Criteria:\n- [ ] Wrap errors with operation context in PendingMigrations\n- [ ] Wrap errors with operation context in AppliedMigrations\n- [ ] Update tests to verify wrapped errors preserve original code\n\nSuggested Fix:\nWrap errors with operation context using oops.With() as shown in the error handling patterns.","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T18:09:09Z","created_by":"seanb4t","updated_at":"2026-01-25T18:35:43Z","closed_at":"2026-01-25T18:35:43Z","work_type":"mutex"}
{"id":"holomush-146c","title":"loadMigrationVersions() silently skips malformed filenames","description":"## Problem\n`loadMigrationVersions()` in `internal/store/migrate.go:178-193` logs a warning and skips migration files that don't match the expected format. This could cause migrations to be missed without the operator noticing.\n\n## Current Behavior\n```go\nif _, err := fmt.Sscanf(name, \"%06d\", \u0026version); err \\!= nil {\n    slog.Warn(\"migration file name doesn't match expected format, skipping\",\n        \"filename\", name,\n        \"expected_format\", \"NNNNNN_name.up.sql\",\n        \"error\", err)\n    continue  // Silently skips, migration won't run\n}\n```\n\n## Risk\nIf a developer accidentally names a file `0003_foo.up.sql` (4 digits instead of 6), it will be silently skipped and CI would pass.\n\n## Acceptance Criteria\n- [ ] Consider adding a `migrate validate` command that returns error if any files don't match expected pattern\n- [ ] OR add startup validation mode\n- [ ] Document that the current behavior is intentional (don't fail on unexpected files)\n\n## Dependencies\nNone - this is a future enhancement\n\n## Notes\nCurrent behavior is reasonable for not failing on unexpected files. The warning exists but this is a 'log and continue' pattern.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T21:20:33Z","created_by":"seanb4t","updated_at":"2026-01-25T21:27:10Z","closed_at":"2026-01-25T21:27:10Z","work_type":"mutex"}
{"id":"holomush-18ig","title":"Expand migrateIface comment to explain why abstraction is needed","description":"File: internal/store/migrate.go:23\n\nCurrent comment states what the interface is for but does not explain why this abstraction is needed or the constraints that make testing difficult without it.\n\nAcceptance Criteria:\n- Expand comment to explain testability rationale\n- Mention that real golang-migrate requires database connection\n\nSuggested Fix:\n```\n// migrateIface abstracts golang-migrate for testing. The real golang-migrate\n// library requires a database connection, making unit tests slow and brittle.\n// This interface allows mocking migration operations without a database.\n```","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T18:09:07Z","created_by":"seanb4t","updated_at":"2026-01-25T18:36:37Z","closed_at":"2026-01-25T18:36:37Z","work_type":"mutex"}
{"id":"holomush-18ng","title":"ABAC Review S14: Add glob pattern length limit","description":"Issue: Glob patterns in like operator have no length or complexity limit. AC: (1) max_glob_pattern_length (100 chars) (2) max_glob_wildcards (5) (3) Parse-time rejection. Ref: docs/specs/2026-02-05-full-abac-design.md:772-798.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:13Z","created_by":"seanb4t","updated_at":"2026-02-06T17:41:21Z","closed_at":"2026-02-06T17:41:21Z","dependencies":[{"issue_id":"holomush-18ng","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-18we","title":"Update URL conversion comment to mention both postgres:// and postgresql:// schemes","description":"File: internal/store/migrate.go:48-49\n\n## Current\n```go\n// Convert postgres:// to pgx5:// for golang-migrate pgx/v5 driver.\n// The pgx/v5 driver expects the pgx5:// scheme.\n```\n\n## Problem\nThe code on lines 53-55 also handles `postgresql://` which the comment does not mention.\n\n## Acceptance Criteria\n- Update comment to mention both schemes\n- Verify code handles both schemes correctly\n\n## Suggested Fix\n```go\n// Convert postgres:// or postgresql:// to pgx5:// for golang-migrate pgx/v5 driver.\n// The pgx/v5 driver expects the pgx5:// scheme.\n```","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T18:09:07Z","created_by":"seanb4t","updated_at":"2026-01-25T18:36:37Z","closed_at":"2026-01-25T18:36:37Z","work_type":"mutex"}
{"id":"holomush-19lz","title":"[E4-Post] Consider builder pattern for ExaminePayload constructor","description":"**Source:** PR Review - Type Design Analyzer\n\n**Problem:**\nThe NewExaminePayload constructor has 4 ULIDs in a row (characterID, targetID, locationID, targetType). This makes call sites error-prone as it's easy to swap arguments.\n\n**Current:**\n```go\nNewExaminePayload(characterID, targetID, locationID, targetType, targetName)\n```\n\n**Options:**\n1. Named parameter struct: `NewExaminePayload(ExamineParams{...})`\n2. Builder pattern: `ExaminePayload{}.WithCharacter(id).WithTarget(id, type).Build()`\n3. Document parameter order clearly (minimal change)\n\n**Acceptance Criteria:**\n- [ ] Evaluate options and document decision\n- [ ] If changing: update constructor and all call sites\n- [ ] If not changing: add godoc explaining parameter order\n\n**Files:**\n- Modify: `internal/world/payloads.go`","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T19:50:28Z","created_by":"seanb4t","updated_at":"2026-01-25T21:27:35Z","closed_at":"2026-01-25T21:27:35Z","work_type":"mutex"}
{"id":"holomush-19z","title":"Remove unused slowEmitter.Events() method","description":"## Problem\nextism_subscriber_test.go:364-368 slowEmitter.Events() is defined but never called.\n\n## Acceptance Criteria\n- [ ] Delete unused Events() method\n- [ ] Verify tests still compile and pass\n- [ ] Independent code review before closing","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T16:10:29Z","created_by":"seanb4t","updated_at":"2026-01-18T16:46:09Z","closed_at":"2026-01-18T16:46:09Z","work_type":"mutex"}
{"id":"holomush-1dp","title":"Consider shared interface for ExtismHost and PluginHost","description":"## Problem\nExtismHost and PluginHost have nearly identical APIs but no shared interface:\n- LoadPlugin(ctx, name, []byte) error\n- HasPlugin(name) bool\n- Close(ctx) error\n- DeliverEvent(ctx, pluginName, event) ([]plugin.EmitEvent, error)\n\nThis is a missed opportunity for polymorphism if the system needs to switch between WASM runtimes.\n\n## Source\nPR Review Round 7 - type-design-analyzer agent\n\n## Acceptance Criteria\n- [ ] Evaluate if shared interface is beneficial\n- [ ] If yes: extract PluginHost interface\n- [ ] If no: document why duplication is acceptable\n- [ ] Independent subagent review before closing","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T18:37:05Z","created_by":"seanb4t","updated_at":"2026-01-18T20:43:25Z","closed_at":"2026-01-18T20:43:25Z","dependencies":[{"issue_id":"holomush-1dp","depends_on_id":"holomush-nw5","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1g8","title":"Add test for Steps(0) edge case in Migrator","acceptance_criteria":"Add unit test documenting Steps(0) behavior (either no-op or error). Test must verify the documented behavior is correct. Update migrate_test.go with test case.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T16:40:21Z","created_by":"seanb4t","updated_at":"2026-01-25T17:21:51Z","closed_at":"2026-01-25T17:21:51Z","work_type":"mutex"}
{"id":"holomush-1hq","title":"Epic 2: Plugin System","description":"Establish the extension model everything else builds on.\n\n**Goal:** Two-tier plugin system with Lua for simplicity and go-plugin for power.\n\n**Key Decisions:**\n- Lua sandbox: no file/network access by default\n- Capability grants stored in config, not code\n- go-plugin uses same event/capability model as Lua\n- State pooling for Lua instances\n\n**Phases:**\n- 2.1: Lua runtime integration (gopher-lua)\n- 2.2: Plugin discovery \u0026 lifecycle\n- 2.3: Event subscription \u0026 delivery\n- 2.4: Host functions\n- 2.5: Capability model\n- 2.6: go-plugin integration\n- 2.7: Echo bot in Lua\n\n**Acceptance Criteria:**\n- [ ] Lua scripts can be loaded and executed\n- [ ] Scripts in plugins/*/ are auto-discovered\n- [ ] Lua scripts receive and emit events\n- [ ] Host functions available: emit_event, query_*, log, kv_*\n- [ ] Capabilities declared and enforced\n- [ ] go-plugin subprocess works via gRPC\n- [ ] Echo bot demonstrates end-to-end functionality","status":"closed","priority":0,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:27:14Z","created_by":"seanb4t","updated_at":"2026-01-22T00:55:18Z","closed_at":"2026-01-22T00:55:18Z","work_type":"mutex"}
{"id":"holomush-1hq.1","title":"[E2] Design: Plugin System Architecture","description":"Create detailed design document for Epic 2: Plugin System.\n\n**Must Cover:**\n- Lua runtime integration strategy (gopher-lua)\n- Plugin discovery and lifecycle management\n- Event subscription and delivery mechanism\n- Host function API design\n- Capability model and enforcement\n- go-plugin integration architecture\n- State pooling strategy\n\n**Deliverable:** docs/specs/YYYY-MM-DD-plugin-system-design.md\n\n**Acceptance Criteria:**\n- [ ] Design document covers all phases 2.1-2.7\n- [ ] Host function API fully specified\n- [ ] Capability model documented\n- [ ] go-plugin integration approach defined\n- [ ] Security model for sandboxing documented\n- [ ] Design reviewed and approved","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:28:57Z","created_by":"seanb4t","updated_at":"2026-01-19T02:21:13Z","closed_at":"2026-01-19T02:21:13Z","dependencies":[{"issue_id":"holomush-1hq.1","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"comments":[{"id":1,"issue_id":"holomush-1hq.1","author":"seanb4t","text":"Design document: docs/specs/2026-01-18-plugin-system-design.md (PR #16)","created_at":"2026-01-19T03:03:46Z"}],"work_type":"mutex"}
{"id":"holomush-1hq.10","title":"[E2] Task 1: Capability Enforcer","description":"**Phase:** 2.5 - Foundation\n**Rationale:** Build capability enforcement first because it's a dependency for host functions and has no dependencies itself.\n\n**Files:**\n- Create: `internal/plugin/capability/enforcer.go`\n- Create: `internal/plugin/capability/enforcer_test.go`\n\n**Plan Reference:** [docs/plans/2026-01-18-plugin-system-implementation.md](../plans/2026-01-18-plugin-system-implementation.md#task-1-capability-enforcer-phase-25---foundation)\n\n## Acceptance Criteria\n\n- [ ] Tests fail initially with compilation error (package doesn't exist)\n- [ ] Tests pass after implementation\n- [ ] Capability matching supports exact match and wildcard suffix patterns\n- [ ] Unknown plugins return false for any capability check\n- [ ] Code reviewed by independent review agent","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T04:06:58Z","created_by":"seanb4t","updated_at":"2026-01-19T16:53:23Z","closed_at":"2026-01-19T16:53:23Z","dependencies":[{"issue_id":"holomush-1hq.10","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.11","title":"[E2] Task 2: Plugin Manifest Parsing","description":"**Phase:** 2.2 - Plugin Discovery \u0026 Lifecycle\n**Rationale:** Manifest parsing is needed before plugin discovery can work.\n\n**Files:**\n- Create: `internal/plugin/manifest.go`\n- Create: `internal/plugin/manifest_test.go`\n- Create: `schemas/plugin.schema.json`\n\n**Plan Reference:** [docs/plans/2026-01-18-plugin-system-implementation.md](../plans/2026-01-18-plugin-system-implementation.md#task-2-plugin-manifest-parsing-phase-22)\n\n## Acceptance Criteria\n\n- [ ] Tests fail initially with compilation error\n- [ ] Tests pass after implementation\n- [ ] Can parse Lua plugin manifests with all required fields\n- [ ] Can parse binary plugin manifests with executable path\n- [ ] Validates name pattern (^[a-z][a-z0-9-]*$)\n- [ ] Returns error for missing required fields (type-specific)\n- [ ] Code reviewed by independent review agent","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T04:06:58Z","created_by":"seanb4t","updated_at":"2026-01-19T18:58:41Z","closed_at":"2026-01-19T18:58:41Z","dependencies":[{"issue_id":"holomush-1hq.11","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.12","title":"[E2] Task 3: Lua StateFactory","description":"**Phase:** 2.1 - Lua Runtime Integration\n**Rationale:** StateFactory creates sandboxed Lua states, foundation for LuaHost.\n\n**Files:**\n- Create: `internal/plugin/lua/state.go`\n- Create: `internal/plugin/lua/state_test.go`\n\n**Plan Reference:** [docs/plans/2026-01-18-plugin-system-implementation.md](../plans/2026-01-18-plugin-system-implementation.md#task-3-lua-statefactory-phase-21)\n\n## Acceptance Criteria\n\n- [ ] Tests fail initially with compilation error\n- [ ] Tests pass after implementation\n- [ ] Loads safe libraries: base, table, string, math\n- [ ] Blocks unsafe libraries: os, io, debug, package\n- [ ] Created states can execute basic Lua code\n- [ ] Code reviewed by independent review agent","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T04:06:58Z","created_by":"seanb4t","updated_at":"2026-01-19T18:58:41Z","closed_at":"2026-01-19T18:58:41Z","dependencies":[{"issue_id":"holomush-1hq.12","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.13","title":"[E2] Task 4: LuaHost Implementation","description":"**Phase:** 2.1 - Lua Runtime Integration\n**Rationale:** LuaHost loads plugins and delivers events using StateFactory.\n\n**Files:**\n- Create: `internal/plugin/lua/host.go`\n- Create: `internal/plugin/lua/host_test.go`\n- Create: `internal/plugin/host.go` (PluginHost interface)\n\n**Plan Reference:** [docs/plans/2026-01-18-plugin-system-implementation.md](../plans/2026-01-18-plugin-system-implementation.md#task-4-luahost-implementation-phase-21)\n\n## Acceptance Criteria\n\n- [ ] Tests fail initially with compilation error\n- [ ] Tests pass after implementation\n- [ ] Can load Lua plugins from manifest and directory\n- [ ] Delivers events to plugin's on_event function\n- [ ] Returns emit events from plugin response\n- [ ] Handles plugins without on_event gracefully (no error)\n- [ ] Code reviewed by independent review agent","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T04:06:58Z","created_by":"seanb4t","updated_at":"2026-01-19T20:22:31Z","closed_at":"2026-01-19T20:22:31Z","dependencies":[{"issue_id":"holomush-1hq.13","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.13","depends_on_id":"holomush-1hq.12","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.14","title":"[E2] Task 5: Host Functions","description":"**Phase:** 2.4 - Host Functions\n**Rationale:** Host functions provide the API available to plugins (emit_event, query_*, kv_*, log).\n\n**Files:**\n- Create: `internal/plugin/hostfunc/functions.go`\n- Create: `internal/plugin/hostfunc/functions_test.go`\n\n**Plan Reference:** [docs/plans/2026-01-18-plugin-system-implementation.md](../plans/2026-01-18-plugin-system-implementation.md#task-5-host-functions-phase-24)\n\n## Acceptance Criteria\n\n- [ ] Tests fail initially with compilation error\n- [ ] Tests pass after implementation\n- [ ] log() function works without capability check\n- [ ] new_request_id() generates valid ULIDs\n- [ ] kv_* functions require kv.read/kv.write capabilities\n- [ ] kv_get returns (value, nil) on success, (nil, err) on error (2 values always)\n- [ ] kv_set and kv_delete return nil on success, error string on failure\n- [ ] Capability denied raises Lua error\n- [ ] Code reviewed by independent review agent","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T04:07:23Z","created_by":"seanb4t","updated_at":"2026-01-19T20:22:31Z","closed_at":"2026-01-19T20:22:31Z","dependencies":[{"issue_id":"holomush-1hq.14","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.14","depends_on_id":"holomush-1hq.10","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.15","title":"[E2] Task 6: Plugin Manager","description":"**Phase:** 2.2 - Plugin Discovery \u0026 Lifecycle\n**Rationale:** Plugin Manager discovers and loads plugins from the plugins/ directory.\n\n**Files:**\n- Create: `internal/plugin/manager.go`\n- Create: `internal/plugin/manager_test.go`\n- Create: `internal/plugin/testdata/` (test fixtures)\n\n**Plan Reference:** [docs/plans/2026-01-18-plugin-system-implementation.md](../plans/2026-01-18-plugin-system-implementation.md#task-6-plugin-manager-phase-22)\n\n## Acceptance Criteria\n\n- [ ] Tests fail initially with compilation error\n- [ ] Tests pass after implementation\n- [ ] Discovers plugins in specified directory\n- [ ] Parses manifests and creates appropriate host (Lua or binary)\n- [ ] Returns loaded plugin names via ListPlugins()\n- [ ] Handles empty directories gracefully\n- [ ] Handles directories with invalid manifests (skip with warning)\n- [ ] Code reviewed by independent review agent","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T04:07:23Z","created_by":"seanb4t","updated_at":"2026-01-19T21:04:08Z","closed_at":"2026-01-19T21:04:08Z","dependencies":[{"issue_id":"holomush-1hq.15","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.15","depends_on_id":"holomush-1hq.11","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.15","depends_on_id":"holomush-1hq.13","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.16","title":"[E2] Task 7: Plugin Subscriber","description":"**Phase:** 2.3 - Event Subscription \u0026 Delivery\n**Rationale:** Plugin Subscriber bridges the event bus to plugins, delivering events to subscribed plugins.\n\n**Files:**\n- Create: `internal/plugin/subscriber.go`\n- Create: `internal/plugin/subscriber_test.go`\n\n**Plan Reference:** [docs/plans/2026-01-18-plugin-system-implementation.md](../plans/2026-01-18-plugin-system-implementation.md#task-7-plugin-subscriber-phase-23)\n\n## Acceptance Criteria\n\n- [ ] Tests fail initially with compilation error\n- [ ] Tests pass after implementation\n- [ ] Registers subscriptions based on plugin manifests\n- [ ] Routes events to plugins that subscribe to event type\n- [ ] Returns emit events from plugins for processing\n- [ ] Handles plugin errors gracefully (log and continue)\n- [ ] Code reviewed by independent review agent","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T04:07:24Z","created_by":"seanb4t","updated_at":"2026-01-19T21:30:39Z","closed_at":"2026-01-19T21:30:39Z","dependencies":[{"issue_id":"holomush-1hq.16","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.16","depends_on_id":"holomush-1hq.13","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.16","depends_on_id":"holomush-1hq.15","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.17","title":"[E2] Task 8: Integration with Host Functions","description":"**Phase:** 2.4 - Host Functions\n**Rationale:** Integrate host functions with LuaHost so plugins can call emit_event, query_*, etc.\n\n**Files:**\n- Modify: `internal/plugin/lua/host.go`\n- Modify: `internal/plugin/lua/host_test.go`\n\n**Plan Reference:** [docs/plans/2026-01-18-plugin-system-implementation.md](../plans/2026-01-18-plugin-system-implementation.md#task-8-integration-with-host-functions-phase-24)\n\n## Acceptance Criteria\n\n- [ ] Tests pass after integration\n- [ ] LuaHost passes host functions to StateFactory\n- [ ] Plugins can call holomush.emit_event(), holomush.query_*(), holomush.log()\n- [ ] Capability enforcement works end-to-end\n- [ ] Code reviewed by independent review agent","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T04:07:24Z","created_by":"seanb4t","updated_at":"2026-01-19T22:10:12Z","closed_at":"2026-01-19T22:10:12Z","dependencies":[{"issue_id":"holomush-1hq.17","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.17","depends_on_id":"holomush-1hq.13","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.17","depends_on_id":"holomush-1hq.14","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"comments":[{"id":2,"issue_id":"holomush-1hq.17","author":"seanb4t","text":"PR opened: https://github.com/holomush/holomush/pull/25","created_at":"2026-01-19T21:48:24Z"}],"work_type":"mutex"}
{"id":"holomush-1hq.18","title":"[E2] Task 9: Echo Bot Plugin","description":"**Phase:** 2.7 - Echo Bot in Lua\n**Rationale:** Echo bot demonstrates end-to-end plugin functionality and serves as a test fixture.\n\n**Files:**\n- Create: `plugins/echo-bot/plugin.yaml`\n- Create: `plugins/echo-bot/main.lua`\n- Create: `internal/plugin/integration_test.go`\n\n**Plan Reference:** [docs/plans/2026-01-18-plugin-system-implementation.md](../plans/2026-01-18-plugin-system-implementation.md#task-9-echo-bot-plugin-phase-27)\n\n## Acceptance Criteria\n\n- [ ] Integration tests pass\n- [ ] Echo bot receives say events and emits response\n- [ ] Plugin manifest validates correctly\n- [ ] Demonstrates capability enforcement (events.emit.location)\n- [ ] End-to-end event flow works: EventBus → Subscriber → Plugin → EmitEvents\n- [ ] Code reviewed by independent review agent","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T04:07:48Z","created_by":"seanb4t","updated_at":"2026-01-19T22:46:32Z","closed_at":"2026-01-19T22:46:32Z","dependencies":[{"issue_id":"holomush-1hq.18","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.18","depends_on_id":"holomush-1hq.16","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.18","depends_on_id":"holomush-1hq.17","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.19","title":"[E2] Task 10: go-plugin Proto Definitions","description":"**Phase:** 2.6 - go-plugin Integration\n**Rationale:** Define gRPC service protocols for go-plugin communication before implementing the host.\n\n**Files:**\n- Create: `api/proto/holomush/plugin/v1/plugin.proto`\n- Create: `api/proto/holomush/plugin/v1/hostfunc.proto`\n- Generate: `internal/proto/holomush/plugin/v1/*.go`\n\n**Plan Reference:** [docs/plans/2026-01-18-plugin-system-implementation.md](../plans/2026-01-18-plugin-system-implementation.md#task-10-go-plugin-proto-definitions-phase-26)\n\n## Acceptance Criteria\n\n- [ ] Proto files compile with buf generate\n- [ ] Plugin service defines HandleEvent RPC\n- [ ] HostFunctions service defines EmitEvent, Query*, KV*, Log RPCs\n- [ ] Event message uses string actor_kind (not enum)\n- [ ] Generated Go code compiles\n- [ ] Code reviewed by independent review agent","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T04:07:48Z","created_by":"seanb4t","updated_at":"2026-01-20T00:17:40Z","closed_at":"2026-01-20T00:17:40Z","dependencies":[{"issue_id":"holomush-1hq.19","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.2","title":"[E2] Implementation Plan: Plugin System","description":"Create detailed implementation plan for Epic 2: Plugin System.\n\n**Depends On:** [E2] Design: Plugin System Architecture\n\n**Must Include:**\n- Task breakdown for each phase\n- File paths and code locations\n- Test coverage requirements\n- Integration points with existing code\n- Migration strategy from Extism spike\n- Estimated effort per phase\n\n**Deliverable:** docs/plans/YYYY-MM-DD-plugin-system-implementation.md\n\n**Acceptance Criteria:**\n- [ ] All phases have concrete task lists\n- [ ] File paths specified for new code\n- [ ] Test requirements defined per phase\n- [ ] Integration with event system documented\n- [ ] Plan reviewed and approved","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:28:58Z","created_by":"seanb4t","updated_at":"2026-01-19T04:12:46Z","closed_at":"2026-01-19T04:12:46Z","dependencies":[{"issue_id":"holomush-1hq.2","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.2","depends_on_id":"holomush-1hq.1","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.20","title":"[E2] Task 11: GoPluginHost Implementation","description":"**Phase:** 2.6 - go-plugin Integration\n**Rationale:** GoPluginHost runs plugins as gRPC subprocesses using HashiCorp go-plugin.\n\n**Files:**\n- Create: `internal/plugin/goplugin/host.go`\n- Create: `internal/plugin/goplugin/host_test.go`\n- Create: `pkg/pluginsdk/sdk.go` (SDK for plugin authors)\n\n**Plan Reference:** [docs/plans/2026-01-18-plugin-system-implementation.md](../plans/2026-01-18-plugin-system-implementation.md#task-11-gopluginhost-implementation-phase-26)\n\n## Acceptance Criteria\n\n- [ ] Tests pass\n- [ ] Can load binary plugins via go-plugin\n- [ ] Delivers events via gRPC HandleEvent\n- [ ] Host functions available via gRPC callbacks\n- [ ] Subprocess lifecycle managed correctly (start, health, kill)\n- [ ] Plugin SDK provides types matching proto definitions\n- [ ] Code reviewed by independent review agent","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T04:07:48Z","created_by":"seanb4t","updated_at":"2026-01-20T00:56:56Z","closed_at":"2026-01-20T00:56:56Z","dependencies":[{"issue_id":"holomush-1hq.20","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.20","depends_on_id":"holomush-1hq.10","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.20","depends_on_id":"holomush-1hq.19","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.21","title":"[E2] Task 12: Delete WASM Spike Code","description":"**Phase:** Cleanup\n**Rationale:** Remove the Phase 1.6 Extism spike code now that the new plugin system is complete.\n\n**Files:**\n- Delete: `internal/wasm/` (entire directory)\n- Modify: Any files importing internal/wasm (remove imports)\n\n**Plan Reference:** [docs/plans/2026-01-18-plugin-system-implementation.md](../plans/2026-01-18-plugin-system-implementation.md#task-12-delete-wasm-spike-code)\n\n## Acceptance Criteria\n\n- [ ] grep for internal/wasm returns no matches (except migration notes)\n- [ ] internal/wasm/ directory deleted\n- [ ] All tests pass after deletion\n- [ ] Code reviewed by independent review agent","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T04:07:49Z","created_by":"seanb4t","updated_at":"2026-01-20T03:08:07Z","closed_at":"2026-01-20T03:08:07Z","dependencies":[{"issue_id":"holomush-1hq.21","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.21","depends_on_id":"holomush-1hq.18","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.21","depends_on_id":"holomush-1hq.20","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.22","title":"Investigate adopting oops and errgroup for error handling","description":"Investigate adopting:\n- **oops** (github.com/samber/oops) - structured error handling with context\n- **errgroup** (golang.org/x/sync/errgroup) - concurrent error handling where needed\n\nGoals:\n- Improve developer experience with clearer error context\n- Better stack traces and error attribution\n- Cleaner concurrent error handling patterns\n\nDeliverables:\n- Evaluation of both libraries against current error handling\n- Recommendation on adoption scope\n- If adopting: migration strategy for existing code","notes":"Design document created: docs/plans/2026-01-20-error-handling-modernization.md (PR #30). Ready for implementation after PR merges.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-20T02:45:54Z","created_by":"seanb4t","updated_at":"2026-01-21T01:08:39Z","closed_at":"2026-01-21T01:08:39Z","dependencies":[{"issue_id":"holomush-1hq.22","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.23","title":"Remove WASM plugin remnants (plugins/echo, plugins/echo-python)","description":"Clean up leftover WASM/Extism plugin directories that should have been removed with PR #28. Delete plugins/echo (Go binary plugin example, but depends on old proto location) and plugins/echo-python (Python WASM plugin).","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-20T03:51:45Z","created_by":"seanb4t","updated_at":"2026-01-20T03:57:32Z","closed_at":"2026-01-20T03:57:32Z","dependencies":[{"issue_id":"holomush-1hq.23","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.24","title":"Investigate adopting testify for unit tests and ginkgo/gomega for integration/e2e","description":"Investigate adopting:\n- **testify** (github.com/stretchr/testify) - assertions and mocking for unit tests\n- **ginkgo/gomega** (github.com/onsi/ginkgo, github.com/onsi/gomega) - BDD-style testing for integration and e2e\n\nGoals:\n- Improve test readability and expressiveness\n- Better structured integration test suites\n- Consistent patterns across test types\n\nDeliverables:\n- Evaluation of both libraries against current testing approach\n- Recommendation on adoption scope (unit vs integration vs e2e)\n- If adopting: migration strategy for existing tests","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-20T04:04:41Z","created_by":"seanb4t","updated_at":"2026-01-21T01:08:39Z","closed_at":"2026-01-21T01:08:39Z","dependencies":[{"issue_id":"holomush-1hq.24","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.25","title":"Implement error handling modernization (oops + errgroup)","description":"Implement the error handling modernization design from docs/plans/2026-01-20-error-handling-modernization.md. Migrate ~316 error sites to use oops for structured errors and errgroup for concurrent operations.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:09:04Z","created_by":"seanb4t","updated_at":"2026-01-22T00:49:35Z","closed_at":"2026-01-22T00:49:35Z","dependencies":[{"issue_id":"holomush-1hq.25","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.25.1","title":"Add oops dependency","description":"Add github.com/samber/oops@latest to go.mod and verify build passes.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:19:13Z","created_by":"seanb4t","updated_at":"2026-01-21T01:39:06Z","closed_at":"2026-01-21T01:39:06Z","dependencies":[{"issue_id":"holomush-1hq.25.1","depends_on_id":"holomush-1hq.25","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.25.10","title":"Migrate internal/plugin/lua/host.go to oops","description":"Replace 9 fmt.Errorf calls with oops in internal/plugin/lua/host.go.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:19:36Z","created_by":"seanb4t","updated_at":"2026-01-21T02:48:05Z","closed_at":"2026-01-21T02:48:05Z","dependencies":[{"issue_id":"holomush-1hq.25.10","depends_on_id":"holomush-1hq.25","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.25.10","depends_on_id":"holomush-1hq.25.2","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.25.11","title":"Migrate internal/plugin/schema.go to oops","description":"Replace 8 fmt.Errorf calls with oops in internal/plugin/schema.go.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:19:36Z","created_by":"seanb4t","updated_at":"2026-01-21T02:48:05Z","closed_at":"2026-01-21T02:48:05Z","dependencies":[{"issue_id":"holomush-1hq.25.11","depends_on_id":"holomush-1hq.25","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.25.11","depends_on_id":"holomush-1hq.25.2","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.25.12","title":"Migrate internal/plugin remaining files to oops","description":"Replace fmt.Errorf calls with oops in: manager.go (3), capability/enforcer.go (2), lua/state.go (1).","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:19:36Z","created_by":"seanb4t","updated_at":"2026-01-21T02:48:05Z","closed_at":"2026-01-21T02:48:05Z","dependencies":[{"issue_id":"holomush-1hq.25.12","depends_on_id":"holomush-1hq.25","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.25.12","depends_on_id":"holomush-1hq.25.2","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.25.13","title":"Migrate internal/store/postgres.go to oops","description":"Replace 13 fmt.Errorf calls with oops in internal/store/postgres.go. Add stream context.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:19:37Z","created_by":"seanb4t","updated_at":"2026-01-21T02:48:05Z","closed_at":"2026-01-21T02:48:05Z","dependencies":[{"issue_id":"holomush-1hq.25.13","depends_on_id":"holomush-1hq.25","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.25.13","depends_on_id":"holomush-1hq.25.2","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.25.14","title":"Migrate internal/grpc to oops","description":"Replace 14 fmt.Errorf calls with oops in server.go (7) and client.go (7). Add .Code() for gRPC boundary errors.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:19:37Z","created_by":"seanb4t","updated_at":"2026-01-21T02:48:05Z","closed_at":"2026-01-21T02:48:05Z","dependencies":[{"issue_id":"holomush-1hq.25.14","depends_on_id":"holomush-1hq.25","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.25.14","depends_on_id":"holomush-1hq.25.2","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.25.15","title":"Migrate internal/control/grpc_server.go to oops","description":"Replace 13 fmt.Errorf calls with oops in internal/control/grpc_server.go. Add .Code() for control API errors.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:19:37Z","created_by":"seanb4t","updated_at":"2026-01-21T02:48:05Z","closed_at":"2026-01-21T02:48:05Z","dependencies":[{"issue_id":"holomush-1hq.25.15","depends_on_id":"holomush-1hq.25","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.25.15","depends_on_id":"holomush-1hq.25.2","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.25.16","title":"Migrate remaining packages to oops","description":"Replace fmt.Errorf calls in: core/engine.go (5), core/ulid.go (1), observability/server.go (3), xdg/xdg.go (2), telnet/server.go (1), pkg/plugin/sdk.go (1).","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:19:37Z","created_by":"seanb4t","updated_at":"2026-01-21T02:48:05Z","closed_at":"2026-01-21T02:48:05Z","dependencies":[{"issue_id":"holomush-1hq.25.16","depends_on_id":"holomush-1hq.25","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.25.16","depends_on_id":"holomush-1hq.25.2","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.25.17","title":"Update CLAUDE.md error handling patterns","description":"Add oops patterns to CLAUDE.md Error Handling section with examples for Wrap, Errorf, With, and Code.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:19:37Z","created_by":"seanb4t","updated_at":"2026-01-21T03:01:16Z","closed_at":"2026-01-21T03:01:16Z","dependencies":[{"issue_id":"holomush-1hq.25.17","depends_on_id":"holomush-1hq.25","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.25.17","depends_on_id":"holomush-1hq.25.10","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.25.17","depends_on_id":"holomush-1hq.25.11","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.25.17","depends_on_id":"holomush-1hq.25.12","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.25.17","depends_on_id":"holomush-1hq.25.13","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.25.17","depends_on_id":"holomush-1hq.25.14","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.25.17","depends_on_id":"holomush-1hq.25.15","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.25.17","depends_on_id":"holomush-1hq.25.16","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.25.17","depends_on_id":"holomush-1hq.25.3","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.25.17","depends_on_id":"holomush-1hq.25.4","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.25.17","depends_on_id":"holomush-1hq.25.5","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.25.17","depends_on_id":"holomush-1hq.25.6","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.25.17","depends_on_id":"holomush-1hq.25.7","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.25.17","depends_on_id":"holomush-1hq.25.8","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.25.17","depends_on_id":"holomush-1hq.25.9","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.25.18","title":"Error handling final validation","description":"Run task test, task lint. Verify no fmt.Errorf remains in non-test files: grep -r 'fmt\\.Errorf' --include='*.go' | grep -v '_test.go' | wc -l should be 0.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:19:38Z","created_by":"seanb4t","updated_at":"2026-01-21T03:01:16Z","closed_at":"2026-01-21T03:01:16Z","dependencies":[{"issue_id":"holomush-1hq.25.18","depends_on_id":"holomush-1hq.25","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.25.18","depends_on_id":"holomush-1hq.25.17","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.25.2","title":"Create pkg/errutil helper package","description":"Create pkg/errutil with LogError and AssertErrorCode helpers. Depends on testify being available.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:19:13Z","created_by":"seanb4t","updated_at":"2026-01-21T01:42:35Z","closed_at":"2026-01-21T01:42:35Z","dependencies":[{"issue_id":"holomush-1hq.25.2","depends_on_id":"holomush-1hq.25","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.25.2","depends_on_id":"holomush-1hq.25.1","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.25.2","depends_on_id":"holomush-1hq.49","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.25.3","title":"Migrate internal/tls/certs.go to oops","description":"Replace 50 fmt.Errorf calls with oops.Wrap in internal/tls/certs.go.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:19:14Z","created_by":"seanb4t","updated_at":"2026-01-21T02:48:05Z","closed_at":"2026-01-21T02:48:05Z","dependencies":[{"issue_id":"holomush-1hq.25.3","depends_on_id":"holomush-1hq.25","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.25.3","depends_on_id":"holomush-1hq.25.2","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.25.4","title":"Migrate cmd/holomush/core.go to oops","description":"Replace 25 fmt.Errorf calls with oops in cmd/holomush/core.go. Add .Code() for CLI-level errors.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:19:14Z","created_by":"seanb4t","updated_at":"2026-01-21T02:48:05Z","closed_at":"2026-01-21T02:48:05Z","dependencies":[{"issue_id":"holomush-1hq.25.4","depends_on_id":"holomush-1hq.25","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.25.4","depends_on_id":"holomush-1hq.25.2","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.25.5","title":"Migrate cmd/holomush/gateway.go to oops","description":"Replace 15 fmt.Errorf calls with oops in cmd/holomush/gateway.go.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:19:14Z","created_by":"seanb4t","updated_at":"2026-01-21T02:48:05Z","closed_at":"2026-01-21T02:48:05Z","dependencies":[{"issue_id":"holomush-1hq.25.5","depends_on_id":"holomush-1hq.25","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.25.5","depends_on_id":"holomush-1hq.25.2","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.25.6","title":"Migrate cmd/holomush/status.go to oops","description":"Replace 10 fmt.Errorf calls with oops in cmd/holomush/status.go.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:19:14Z","created_by":"seanb4t","updated_at":"2026-01-21T02:48:05Z","closed_at":"2026-01-21T02:48:05Z","dependencies":[{"issue_id":"holomush-1hq.25.6","depends_on_id":"holomush-1hq.25","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.25.6","depends_on_id":"holomush-1hq.25.2","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.25.7","title":"Migrate cmd/holomush/migrate.go to oops","description":"Replace 3 fmt.Errorf calls with oops in cmd/holomush/migrate.go.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:19:14Z","created_by":"seanb4t","updated_at":"2026-01-21T02:48:05Z","closed_at":"2026-01-21T02:48:05Z","dependencies":[{"issue_id":"holomush-1hq.25.7","depends_on_id":"holomush-1hq.25","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.25.7","depends_on_id":"holomush-1hq.25.2","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.25.8","title":"Migrate internal/plugin/goplugin/host.go to oops","description":"Replace 16 fmt.Errorf calls with oops in internal/plugin/goplugin/host.go.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:19:15Z","created_by":"seanb4t","updated_at":"2026-01-21T02:48:05Z","closed_at":"2026-01-21T02:48:05Z","dependencies":[{"issue_id":"holomush-1hq.25.8","depends_on_id":"holomush-1hq.25","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.25.8","depends_on_id":"holomush-1hq.25.2","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.25.9","title":"Migrate internal/plugin/manifest.go to oops","description":"Replace 13 fmt.Errorf calls with oops in internal/plugin/manifest.go.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:19:36Z","created_by":"seanb4t","updated_at":"2026-01-21T02:48:05Z","closed_at":"2026-01-21T02:48:05Z","dependencies":[{"issue_id":"holomush-1hq.25.9","depends_on_id":"holomush-1hq.25","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.25.9","depends_on_id":"holomush-1hq.25.2","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.26","title":"Implement testing libraries adoption (testify + ginkgo)","description":"Implement the testing libraries adoption design from docs/plans/2026-01-20-testing-libraries-design.md. Migrate 41 test files (~22k lines) to use testify for unit tests and ginkgo/gomega for integration tests.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:09:14Z","created_by":"seanb4t","updated_at":"2026-01-22T00:49:35Z","closed_at":"2026-01-22T00:49:35Z","dependencies":[{"issue_id":"holomush-1hq.26","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.27","title":"Add oops and errgroup dependencies","description":"Add github.com/samber/oops v1.16+ and golang.org/x/sync/errgroup to go.mod.\n\nAcceptance criteria:\n- [ ] go get github.com/samber/oops\n- [ ] go get golang.org/x/sync/errgroup\n- [ ] go mod tidy passes\n- [ ] task build passes","status":"tombstone","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:09:41Z","created_by":"seanb4t","updated_at":"2026-01-21T01:12:10Z","work_type":"mutex"}
{"id":"holomush-1hq.28","title":"Create pkg/errutil helper package","description":"Create pkg/errutil with LogError and test utilities per design doc.\n\nFiles to create:\n- pkg/errutil/log.go - LogError function for slog integration\n- pkg/errutil/testing.go - AssertErrorCode test helper\n- pkg/errutil/doc.go - Package documentation\n\nAcceptance criteria:\n- [ ] LogError correctly extracts oops context for structured logging\n- [ ] AssertErrorCode verifies error codes in tests\n- [ ] 100% test coverage for new package\n- [ ] task lint passes","status":"tombstone","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:09:41Z","created_by":"seanb4t","updated_at":"2026-01-21T01:12:10Z","work_type":"mutex"}
{"id":"holomush-1hq.29","title":"Migrate internal/plugin errors to oops (~80 sites)","description":"Migrate error handling in internal/plugin/* packages to use oops.\n\nPackages: goplugin, lua, wasm, integration\nPattern: fmt.Errorf → oops.Errorf or oops.Wrap with .With() context\n\nAcceptance criteria:\n- [ ] All fmt.Errorf calls in internal/plugin/* migrated\n- [ ] Plugin names, operations added via .With()\n- [ ] Existing tests pass unchanged\n- [ ] No new linter warnings","status":"tombstone","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:09:42Z","created_by":"seanb4t","updated_at":"2026-01-21T01:12:10Z","work_type":"mutex"}
{"id":"holomush-1hq.3","title":"[E2] Phase Gate 2.1: Lua Runtime Integration","description":"Phase gate for Lua runtime integration using gopher-lua.\n\n**Gate Criteria:** Can load and execute a Lua script\n\n**Deliverables:**\n- gopher-lua integrated into Go codebase\n- Basic Lua VM wrapper with load/execute\n- Unit tests for script loading\n- Documentation for Lua environment\n\n**Acceptance Criteria:**\n- [ ] Lua scripts can be loaded from disk\n- [ ] Scripts execute within Go process\n- [ ] Basic error handling for script errors\n- [ ] Tests demonstrate load/execute cycle\n- [ ] No external network/file access from scripts","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:28:58Z","created_by":"seanb4t","updated_at":"2026-01-19T22:51:08Z","closed_at":"2026-01-19T22:51:08Z","dependencies":[{"issue_id":"holomush-1hq.3","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.3","depends_on_id":"holomush-1hq.1","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.3","depends_on_id":"holomush-1hq.12","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.3","depends_on_id":"holomush-1hq.13","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.3","depends_on_id":"holomush-1hq.2","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.3","depends_on_id":"holomush-nzu","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.30","title":"Migrate internal/grpc errors + WaitGroup→errgroup (~60 sites)","description":"Migrate internal/grpc package to use oops for errors and errgroup for concurrency.\n\nKey changes:\n- All fmt.Errorf → oops.Errorf/Wrap with context\n- sync.WaitGroup → errgroup.WithContext in server.go\n- Add .Code() at gRPC handler boundaries\n\nAcceptance criteria:\n- [ ] All fmt.Errorf calls migrated\n- [ ] WaitGroup replaced with errgroup\n- [ ] Error codes added to handler returns\n- [ ] Existing tests pass unchanged\n- [ ] No new linter warnings","status":"tombstone","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:09:42Z","created_by":"seanb4t","updated_at":"2026-01-21T01:12:10Z","work_type":"mutex"}
{"id":"holomush-1hq.31","title":"Migrate internal/store errors to oops (~40 sites)","description":"Migrate error handling in internal/store package to use oops.\n\nPattern: fmt.Errorf → oops.Errorf or oops.Wrap with .With() context\nAdd context: stream IDs, query details, connection info\n\nAcceptance criteria:\n- [ ] All fmt.Errorf calls migrated\n- [ ] Database context added via .With()\n- [ ] Existing tests pass unchanged\n- [ ] No new linter warnings","status":"tombstone","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:09:42Z","created_by":"seanb4t","updated_at":"2026-01-21T01:12:10Z","work_type":"mutex"}
{"id":"holomush-1hq.32","title":"Migrate internal/core errors to oops (~30 sites)","description":"Migrate error handling in internal/core package to use oops.\n\nPattern: fmt.Errorf → oops.Errorf or oops.Wrap with .With() context\nAdd context: event types, session IDs, actor info\n\nAcceptance criteria:\n- [ ] All fmt.Errorf calls migrated  \n- [ ] Core domain context added via .With()\n- [ ] Existing tests pass unchanged\n- [ ] No new linter warnings","status":"tombstone","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:09:43Z","created_by":"seanb4t","updated_at":"2026-01-21T01:12:10Z","work_type":"mutex"}
{"id":"holomush-1hq.33","title":"Migrate pkg/plugin errors to oops (~20 sites)","description":"Migrate error handling in pkg/plugin (SDK types) to use oops.\n\nPattern: fmt.Errorf → oops.Errorf or oops.Wrap with .With() context\n\nAcceptance criteria:\n- [ ] All fmt.Errorf calls migrated\n- [ ] SDK context added via .With()\n- [ ] Existing tests pass unchanged\n- [ ] No new linter warnings","status":"tombstone","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:09:56Z","created_by":"seanb4t","updated_at":"2026-01-21T01:12:10Z","work_type":"mutex"}
{"id":"holomush-1hq.34","title":"Migrate cmd/ errors to oops with error codes (~15 sites)","description":"Migrate error handling in cmd/ (CLI commands) to use oops with error codes.\n\nPattern: fmt.Errorf → oops.Errorf with .Code() at CLI boundaries\nCodes: Use SCREAMING_SNAKE convention (CONFIG_ERROR, SERVER_START_FAILED, etc.)\n\nAcceptance criteria:\n- [ ] All fmt.Errorf calls migrated\n- [ ] Error codes added for CLI-level errors\n- [ ] Existing tests pass unchanged\n- [ ] No new linter warnings","status":"tombstone","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:09:56Z","created_by":"seanb4t","updated_at":"2026-01-21T01:12:10Z","work_type":"mutex"}
{"id":"holomush-1hq.35","title":"Migrate remaining packages to oops (~70 sites)","description":"Migrate error handling in remaining packages to use oops.\n\nPackages: internal/telnet, internal/tls, internal/control, internal/logging, internal/observability, internal/xdg\n\nPattern: fmt.Errorf → oops.Errorf or oops.Wrap with .With() context\n\nAcceptance criteria:\n- [ ] All fmt.Errorf calls in listed packages migrated\n- [ ] Appropriate context added via .With()\n- [ ] Existing tests pass unchanged\n- [ ] No new linter warnings","status":"tombstone","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:09:57Z","created_by":"seanb4t","updated_at":"2026-01-21T01:12:10Z","work_type":"mutex"}
{"id":"holomush-1hq.36","title":"Update CLAUDE.md with oops error handling patterns","description":"Update CLAUDE.md Error Handling section with new oops patterns.\n\nChanges:\n- Add oops.Errorf and oops.Wrap examples\n- Document .With() context patterns\n- Document .Code() usage at boundaries\n- Document errgroup patterns\n\nAcceptance criteria:\n- [ ] Error Handling section updated\n- [ ] Examples match actual codebase usage\n- [ ] task lint:markdown passes","status":"tombstone","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:09:57Z","created_by":"seanb4t","updated_at":"2026-01-21T01:12:10Z","work_type":"mutex"}
{"id":"holomush-1hq.37","title":"Add testify, ginkgo, gomega, and mockery dependencies","description":"Add testing library dependencies to go.mod.\n\nDependencies:\n- github.com/stretchr/testify v1.9.0\n- github.com/onsi/ginkgo/v2 v2.22.0\n- github.com/onsi/gomega v1.36.0\n- github.com/vektra/mockery/v2 (tool)\n\nAcceptance criteria:\n- [ ] go get all dependencies\n- [ ] Install mockery CLI tool\n- [ ] go mod tidy passes\n- [ ] task build passes","status":"tombstone","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:10:35Z","created_by":"seanb4t","updated_at":"2026-01-21T01:12:10Z","work_type":"mutex"}
{"id":"holomush-1hq.38","title":"Configure mockery and update Taskfile","description":"Configure mockery for mock generation and update Taskfile.\n\nChanges:\n- Create .mockery.yaml with project-wide config\n- Add task test:ginkgo for parallel ginkgo specs\n- Ensure task test runs both standard and ginkgo tests\n- Add task mocks:generate for mockery\n\nAcceptance criteria:\n- [ ] .mockery.yaml configured\n- [ ] task test:ginkgo works\n- [ ] task mocks:generate works\n- [ ] task test runs all test types","status":"tombstone","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:10:35Z","created_by":"seanb4t","updated_at":"2026-01-21T01:12:10Z","work_type":"mutex"}
{"id":"holomush-1hq.39","title":"Migrate internal/core unit tests to testify","description":"Migrate internal/core/*_test.go files to use testify assertions.\n\nPattern: if got \\!= expected { t.Errorf(...) } → assert.Equal(t, expected, got)\nKeep table-driven structure, just update assertions.\n\nFiles: engine_test.go, event_test.go, session_test.go, etc.\n\nAcceptance criteria:\n- [ ] All assertions use testify assert/require\n- [ ] Table-driven patterns preserved\n- [ ] All tests pass\n- [ ] Coverage maintained \u003e80%","status":"tombstone","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:10:35Z","created_by":"seanb4t","updated_at":"2026-01-21T01:12:10Z","work_type":"mutex"}
{"id":"holomush-1hq.4","title":"[E2] Phase Gate 2.2: Plugin Discovery \u0026 Lifecycle","description":"Phase gate for plugin discovery and lifecycle management.\n\n**Gate Criteria:** Scripts in plugins/*/ auto-discovered\n\n**Deliverables:**\n- Plugin directory scanning on startup\n- Plugin manifest parsing (plugin.lua metadata)\n- Plugin lifecycle: load → init → running → unload\n- Hot reload infrastructure (if feasible)\n\n**Acceptance Criteria:**\n- [ ] plugins/*/plugin.lua files auto-discovered\n- [ ] Plugin metadata (name, version, events) parsed\n- [ ] Plugins initialized on server start\n- [ ] Graceful unload on server shutdown\n- [ ] Tests for discovery and lifecycle","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:28:58Z","created_by":"seanb4t","updated_at":"2026-01-19T22:51:09Z","closed_at":"2026-01-19T22:51:09Z","dependencies":[{"issue_id":"holomush-1hq.4","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.4","depends_on_id":"holomush-1hq.11","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.4","depends_on_id":"holomush-1hq.15","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.4","depends_on_id":"holomush-1hq.3","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.40","title":"Migrate internal/store unit tests to testify","description":"Migrate internal/store/*_test.go files to use testify assertions.\n\nPattern: if got \\!= expected { t.Errorf(...) } → assert.Equal(t, expected, got)\n\nAcceptance criteria:\n- [ ] All assertions use testify assert/require\n- [ ] All tests pass\n- [ ] Coverage maintained \u003e80%","status":"tombstone","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:10:36Z","created_by":"seanb4t","updated_at":"2026-01-21T01:12:10Z","work_type":"mutex"}
{"id":"holomush-1hq.41","title":"Migrate internal/grpc unit tests to testify","description":"Migrate internal/grpc/*_test.go files to use testify assertions.\n\nPattern: if got \\!= expected { t.Errorf(...) } → assert.Equal(t, expected, got)\n\nAcceptance criteria:\n- [ ] All assertions use testify assert/require\n- [ ] All tests pass\n- [ ] Coverage maintained \u003e80%","status":"tombstone","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:10:36Z","created_by":"seanb4t","updated_at":"2026-01-21T01:12:10Z","work_type":"mutex"}
{"id":"holomush-1hq.42","title":"Migrate internal/plugin unit tests to testify","description":"Migrate internal/plugin/*_test.go files to use testify assertions.\n\nPackages: goplugin, lua, wasm\nPattern: if got \\!= expected { t.Errorf(...) } → assert.Equal(t, expected, got)\n\nAcceptance criteria:\n- [ ] All assertions use testify assert/require\n- [ ] All tests pass\n- [ ] Coverage maintained \u003e80%","status":"tombstone","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:10:36Z","created_by":"seanb4t","updated_at":"2026-01-21T01:12:10Z","work_type":"mutex"}
{"id":"holomush-1hq.43","title":"Migrate cmd/ unit tests to testify","description":"Migrate cmd/holomush/*_test.go files to use testify assertions.\n\nPattern: if got \\!= expected { t.Errorf(...) } → assert.Equal(t, expected, got)\n\nAcceptance criteria:\n- [ ] All assertions use testify assert/require\n- [ ] All tests pass\n- [ ] Coverage maintained \u003e80%","status":"tombstone","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:10:57Z","created_by":"seanb4t","updated_at":"2026-01-21T01:12:10Z","work_type":"mutex"}
{"id":"holomush-1hq.44","title":"Migrate remaining unit tests to testify","description":"Migrate remaining *_test.go files to use testify assertions.\n\nPackages: internal/telnet, internal/tls, internal/control, internal/logging, internal/observability, internal/xdg, pkg/\n\nPattern: if got \\!= expected { t.Errorf(...) } → assert.Equal(t, expected, got)\n\nAcceptance criteria:\n- [ ] All assertions use testify assert/require\n- [ ] All tests pass\n- [ ] Coverage maintained \u003e80%","status":"tombstone","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:10:58Z","created_by":"seanb4t","updated_at":"2026-01-21T01:12:10Z","work_type":"mutex"}
{"id":"holomush-1hq.45","title":"Replace hand-rolled mocks with testify/mock","description":"Replace hand-written function-field mocks with testify/mock.\n\nCurrent mocks to replace:\n- mockEventStore (internal/grpc)\n- mockAuthenticator (internal/grpc)\n- mockSessionStore (internal/grpc)\n- mockSubscribeStream (internal/grpc)\n- mockPluginServer (pkg/proto)\n- mockHostFunctionsServer (pkg/proto)\n\nUse mockery to generate new mocks, then update test files to use .On()/.Return() pattern.\n\nAcceptance criteria:\n- [ ] All hand-rolled mocks replaced\n- [ ] Mocks generated via mockery\n- [ ] All tests pass\n- [ ] Old mock code removed","status":"tombstone","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:10:58Z","created_by":"seanb4t","updated_at":"2026-01-21T01:12:10Z","work_type":"mutex"}
{"id":"holomush-1hq.46","title":"Migrate integration tests to ginkgo","description":"Migrate integration tests to ginkgo/gomega BDD structure.\n\nFiles to migrate:\n- test/integration/phase1_5_test.go\n- internal/store/postgres_integration_test.go\n- internal/plugin/integration_test.go\n- internal/control/grpc_server_test.go (if integration)\n\nChanges:\n- Create *_suite_test.go bootstrap files\n- Convert to Describe/Context/It structure\n- Use Eventually for async assertions\n- Use BeforeEach/AfterEach for setup/teardown\n\nAcceptance criteria:\n- [ ] All integration tests use ginkgo structure\n- [ ] Eventually used for async operations\n- [ ] All tests pass\n- [ ] task test:ginkgo runs successfully","status":"tombstone","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:10:58Z","created_by":"seanb4t","updated_at":"2026-01-21T01:12:10Z","work_type":"mutex"}
{"id":"holomush-1hq.47","title":"Update CLAUDE.md with testify/ginkgo testing patterns","description":"Update CLAUDE.md Testing section with new patterns.\n\nChanges:\n- Add testify assert/require examples\n- Add ginkgo Describe/Context/It examples\n- Document when to use each library\n- Update mock examples to testify/mock\n- Reference mockery for mock generation\n\nAcceptance criteria:\n- [ ] Testing section updated with new patterns\n- [ ] Examples match actual codebase usage\n- [ ] task lint:markdown passes","status":"tombstone","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:10:58Z","created_by":"seanb4t","updated_at":"2026-01-21T01:12:10Z","work_type":"mutex"}
{"id":"holomush-1hq.48","title":"Create docs/reference/testing-guide.md","description":"Create new testing guide documentation.\n\nContents:\n- When to use testify vs ginkgo\n- Assertion patterns (assert vs require)\n- Mock generation with mockery\n- Table-driven test patterns with testify\n- Ginkgo integration test structure\n- Eventually/Consistently for async tests\n- Running tests (task test, task test:ginkgo)\n\nAcceptance criteria:\n- [ ] Comprehensive testing guide created\n- [ ] Examples are runnable\n- [ ] Linked from main docs\n- [ ] task lint:markdown passes","status":"tombstone","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:10:59Z","created_by":"seanb4t","updated_at":"2026-01-21T01:12:10Z","work_type":"mutex"}
{"id":"holomush-1hq.49","title":"Add testify, ginkgo, gomega, and mockery dependencies","description":"Add testing library dependencies to go.mod per docs/plans/2026-01-20-testing-libraries-implementation.md Task 1.\n\nAcceptance criteria:\n- go get github.com/stretchr/testify@latest\n- go get github.com/onsi/ginkgo/v2@latest\n- go get github.com/onsi/gomega@latest\n- go install github.com/vektra/mockery/v2@latest\n- go install github.com/onsi/ginkgo/v2/ginkgo@latest\n- go mod tidy passes\n- task build passes","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:16:40Z","created_by":"seanb4t","updated_at":"2026-01-21T01:39:06Z","closed_at":"2026-01-21T01:39:06Z","dependencies":[{"issue_id":"holomush-1hq.49","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.5","title":"[E2] Phase Gate 2.3: Event Subscription \u0026 Delivery","description":"Phase gate for event subscription and delivery to Lua plugins.\n\n**Gate Criteria:** Lua scripts receive events, can emit events\n\n**Deliverables:**\n- Plugin subscription to event types\n- Event delivery to on_event() callback\n- emit_event() host function\n- Event payload serialization to Lua tables\n\n**Acceptance Criteria:**\n- [ ] Plugins declare event subscriptions in metadata\n- [ ] Events delivered to matching plugins\n- [ ] on_event(event) callback receives event data\n- [ ] emit_event(stream, type, payload) works\n- [ ] Tests for subscription and delivery","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:28:58Z","created_by":"seanb4t","updated_at":"2026-01-19T22:51:09Z","closed_at":"2026-01-19T22:51:09Z","dependencies":[{"issue_id":"holomush-1hq.5","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.5","depends_on_id":"holomush-1hq.16","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.5","depends_on_id":"holomush-1hq.4","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.50","title":"Configure mockery and update Taskfile","description":"Configure mockery and add Taskfile targets per docs/plans/2026-01-20-testing-libraries-implementation.md Task 2.\n\nFiles:\n- Create: .mockery.yaml\n- Modify: Taskfile.yaml\n\nAcceptance criteria:\n- .mockery.yaml configured with project interfaces\n- task test:ginkgo target added\n- task mocks:generate target added\n- mockery generates mocks successfully","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:16:40Z","created_by":"seanb4t","updated_at":"2026-01-21T01:42:35Z","closed_at":"2026-01-21T01:42:35Z","dependencies":[{"issue_id":"holomush-1hq.50","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.50","depends_on_id":"holomush-1hq.49","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.51","title":"Migrate internal/core unit tests to testify","description":"Migrate internal/core/*_test.go to testify per docs/plans/2026-01-20-testing-libraries-implementation.md Task 3.\n\nFiles (65 assertion sites):\n- internal/core/event_test.go (2)\n- internal/core/session_test.go (14)\n- internal/core/engine_test.go (25)\n- internal/core/broadcaster_test.go (3)\n- internal/core/command_test.go (2)\n- internal/core/ulid_test.go (2)\n- internal/core/store_test.go (17)\n\nAcceptance criteria:\n- All assertions use testify assert/require\n- Table-driven patterns preserved\n- All tests pass\n- Coverage maintained \u003e80%","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:17:00Z","created_by":"seanb4t","updated_at":"2026-01-21T02:02:27Z","closed_at":"2026-01-21T02:02:27Z","dependencies":[{"issue_id":"holomush-1hq.51","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.51","depends_on_id":"holomush-1hq.50","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.52","title":"Migrate internal/store unit tests to testify","description":"Migrate internal/store/postgres_test.go to testify per plan Task 4.\n\nFiles (37 assertion sites):\n- internal/store/postgres_test.go\n\nAcceptance criteria:\n- All assertions use testify assert/require\n- All tests pass\n- Coverage maintained \u003e80%","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:17:00Z","created_by":"seanb4t","updated_at":"2026-01-21T02:02:27Z","closed_at":"2026-01-21T02:02:27Z","dependencies":[{"issue_id":"holomush-1hq.52","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.52","depends_on_id":"holomush-1hq.50","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.53","title":"Migrate internal/grpc unit tests to testify","description":"Migrate internal/grpc/*_test.go to testify per plan Task 5.\n\nFiles (112 assertion sites):\n- internal/grpc/server_test.go (64)\n- internal/grpc/client_test.go (48)\n\nAcceptance criteria:\n- All assertions use testify assert/require\n- All tests pass\n- Coverage maintained \u003e80%","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:17:01Z","created_by":"seanb4t","updated_at":"2026-01-21T02:02:27Z","closed_at":"2026-01-21T02:02:27Z","dependencies":[{"issue_id":"holomush-1hq.53","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.53","depends_on_id":"holomush-1hq.50","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.54","title":"Migrate internal/plugin unit tests to testify","description":"Migrate internal/plugin/*_test.go to testify per plan Task 6.\n\nFiles (~328 assertion sites):\n- internal/plugin/manifest_test.go (21)\n- internal/plugin/schema_test.go (10)\n- internal/plugin/manager_test.go (43)\n- internal/plugin/subscriber_test.go (12)\n- internal/plugin/capability/enforcer_test.go (47)\n- internal/plugin/lua/host_test.go (41)\n- internal/plugin/lua/state_test.go (22)\n- internal/plugin/lua/state_internal_test.go (1)\n- internal/plugin/hostfunc/functions_test.go (75)\n- internal/plugin/goplugin/host_test.go (56)\n\nAcceptance criteria:\n- All assertions use testify assert/require\n- All tests pass\n- Coverage maintained \u003e80%","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:17:01Z","created_by":"seanb4t","updated_at":"2026-01-21T02:02:27Z","closed_at":"2026-01-21T02:02:27Z","dependencies":[{"issue_id":"holomush-1hq.54","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.54","depends_on_id":"holomush-1hq.50","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.55","title":"Migrate internal/control unit tests to testify","description":"Migrate internal/control/grpc_server_test.go to testify per plan Task 7.\n\nFiles (147 assertion sites):\n- internal/control/grpc_server_test.go\n\nAcceptance criteria:\n- All assertions use testify assert/require\n- All tests pass\n- Coverage maintained \u003e80%","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:17:01Z","created_by":"seanb4t","updated_at":"2026-01-21T02:22:01Z","closed_at":"2026-01-21T02:22:01Z","dependencies":[{"issue_id":"holomush-1hq.55","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.55","depends_on_id":"holomush-1hq.50","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.56","title":"Migrate cmd unit tests to testify","description":"Migrate cmd/holomush/*_test.go to testify per plan Task 8.\n\nFiles (166 assertion sites):\n- cmd/holomush/core_test.go (50)\n- cmd/holomush/status_test.go (49)\n- cmd/holomush/gateway_test.go (41)\n- cmd/holomush/deps_test.go (15)\n- cmd/holomush/main_test.go (11)\n\nAcceptance criteria:\n- All assertions use testify assert/require\n- All tests pass\n- Coverage maintained \u003e80%","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:17:02Z","created_by":"seanb4t","updated_at":"2026-01-21T02:22:01Z","closed_at":"2026-01-21T02:22:01Z","dependencies":[{"issue_id":"holomush-1hq.56","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.56","depends_on_id":"holomush-1hq.50","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.57","title":"Migrate remaining unit tests to testify","description":"Migrate remaining *_test.go files to testify per plan Task 9.\n\nFiles (~273 assertion sites):\n- internal/tls/certs_test.go (141)\n- internal/telnet/server_test.go (3)\n- internal/telnet/handler_test.go (13)\n- internal/observability/server_test.go (47)\n- internal/xdg/xdg_test.go (28)\n- internal/logging/handler_test.go (11)\n- pkg/plugin/sdk_test.go (3)\n- pkg/plugin/event_test.go (1)\n- pkg/plugin/adapter_test.go (25)\n- pkg/proto/holomush/plugin/v1/*.go (6)\n\nAcceptance criteria:\n- All assertions use testify assert/require\n- All tests pass\n- Coverage maintained \u003e80%","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:17:02Z","created_by":"seanb4t","updated_at":"2026-01-21T02:22:01Z","closed_at":"2026-01-21T02:22:01Z","dependencies":[{"issue_id":"holomush-1hq.57","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.57","depends_on_id":"holomush-1hq.50","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.58","title":"Replace hand-rolled mocks with mockery-generated mocks","description":"Replace hand-written mocks with mockery per plan Task 10.\n\nMock structs to replace (24 total):\n- internal/grpc/server_test.go: mockEventStore, mockAuthenticator, mockSubscribeStream, mockSessionStore\n- internal/grpc/client_test.go: mockCoreServer, mockCoreServerWithSubscribe\n- cmd/holomush/deps_test.go: mockEventStore, mockControlServer, mockObservabilityServer\n- cmd/holomush/gateway_test.go: mockNetConn\n- internal/plugin/manager_test.go: mockHost\n- internal/plugin/goplugin/host_test.go: 4 mocks\n- internal/plugin/hostfunc/functions_test.go: mockKVStore\n- internal/plugin/integration_test.go: mockEmitter\n- pkg/proto/holomush/plugin/v1/grpc_test.go: 2 mocks\n\nAcceptance criteria:\n- Update .mockery.yaml with all interfaces\n- Generate mocks with mockery\n- Update test files to use .On()/.Return() pattern\n- Remove old mock definitions\n- All tests pass","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:17:27Z","created_by":"seanb4t","updated_at":"2026-01-21T02:59:54Z","closed_at":"2026-01-21T02:59:54Z","dependencies":[{"issue_id":"holomush-1hq.58","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.58","depends_on_id":"holomush-1hq.51","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.58","depends_on_id":"holomush-1hq.52","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.58","depends_on_id":"holomush-1hq.53","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.58","depends_on_id":"holomush-1hq.54","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.58","depends_on_id":"holomush-1hq.55","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.58","depends_on_id":"holomush-1hq.56","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.58","depends_on_id":"holomush-1hq.57","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.59","title":"Migrate test/integration to ginkgo","description":"Migrate test/integration to ginkgo per plan Task 11.\n\nFiles:\n- Create: test/integration/integration_suite_test.go\n- Modify: test/integration/phase1_5_test.go (92 sites)\n\nAcceptance criteria:\n- ginkgo bootstrap file created\n- Tests converted to Describe/Context/It structure\n- Eventually used for async assertions\n- task test:ginkgo passes","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:17:28Z","created_by":"seanb4t","updated_at":"2026-01-21T02:59:54Z","closed_at":"2026-01-21T02:59:54Z","dependencies":[{"issue_id":"holomush-1hq.59","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.59","depends_on_id":"holomush-1hq.58","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.6","title":"[E2] Phase Gate 2.4: Host Functions","description":"Phase gate for host functions available to Lua plugins.\n\n**Gate Criteria:** log(), new_request_id(), kv_get/set/delete() work\n\n**Host Functions (implemented):**\n- log(level, message) - Structured logging\n- new_request_id() - Generate unique request IDs\n- kv_get(key) - Plugin key-value storage\n- kv_set(key, value) - Plugin key-value storage\n- kv_delete(key) - Plugin key-value storage\n\n**Deferred to World Model Epic:**\n- query_location(id) - Read location data\n- query_character(id) - Read character data\n- query_object(id) - Read object data\n- emit_event(stream, type, payload) - Already works via on_event return values\n\n**Acceptance Criteria:**\n- [x] All host functions registered with Lua VM\n- [x] Functions callable from Lua scripts\n- [x] Proper error handling for invalid inputs\n- [x] Tests for each host function\n- [ ] Documentation for host function API (godoc only, standalone docs deferred)","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:29:16Z","created_by":"seanb4t","updated_at":"2026-01-20T03:54:38Z","closed_at":"2026-01-20T03:54:38Z","dependencies":[{"issue_id":"holomush-1hq.6","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.6","depends_on_id":"holomush-1hq.14","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.6","depends_on_id":"holomush-1hq.17","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.6","depends_on_id":"holomush-1hq.5","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.60","title":"Migrate internal/store postgres_integration_test.go to ginkgo","description":"Migrate internal/store/postgres_integration_test.go to ginkgo per plan Task 12.\n\nFiles:\n- Create: internal/store/store_suite_test.go\n- Modify: internal/store/postgres_integration_test.go (45 sites)\n\nAcceptance criteria:\n- ginkgo suite file created\n- Tests converted to BDD structure\n- All integration tests pass","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:17:28Z","created_by":"seanb4t","updated_at":"2026-01-21T02:59:54Z","closed_at":"2026-01-21T02:59:54Z","dependencies":[{"issue_id":"holomush-1hq.60","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.60","depends_on_id":"holomush-1hq.58","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.61","title":"Migrate internal/plugin integration_test.go to ginkgo","description":"Migrate internal/plugin/integration_test.go to ginkgo per plan Task 13.\n\nFiles:\n- Create: internal/plugin/plugin_suite_test.go\n- Modify: internal/plugin/integration_test.go (26 sites)\n\nAcceptance criteria:\n- ginkgo suite file created\n- Tests converted to BDD structure\n- All integration tests pass","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:17:28Z","created_by":"seanb4t","updated_at":"2026-01-21T02:59:54Z","closed_at":"2026-01-21T02:59:54Z","dependencies":[{"issue_id":"holomush-1hq.61","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.61","depends_on_id":"holomush-1hq.58","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.62","title":"Update CLAUDE.md with testify/ginkgo testing patterns","description":"Update CLAUDE.md Testing section per plan Task 14.\n\nChanges:\n- Add testify assert/require examples\n- Add mockery usage examples\n- Add ginkgo Describe/Context/It examples\n- Add Eventually/Consistently examples\n\nAcceptance criteria:\n- Testing section updated with new patterns\n- Examples match actual codebase usage\n- task lint:markdown passes","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:17:29Z","created_by":"seanb4t","updated_at":"2026-01-21T03:01:16Z","closed_at":"2026-01-21T03:01:16Z","dependencies":[{"issue_id":"holomush-1hq.62","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.62","depends_on_id":"holomush-1hq.59","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.62","depends_on_id":"holomush-1hq.60","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.62","depends_on_id":"holomush-1hq.61","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.63","title":"Create docs/reference/testing-guide.md","description":"Create comprehensive testing guide per plan Task 15.\n\nContents:\n- When to use testify vs ginkgo\n- Assertion patterns (assert vs require)\n- Mock generation with mockery\n- Table-driven test patterns with testify\n- Ginkgo integration test structure\n- Eventually/Consistently for async\n- Running tests (task test, task test:ginkgo)\n\nAcceptance criteria:\n- Comprehensive testing guide created\n- Examples are runnable\n- task lint:markdown passes","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:17:29Z","created_by":"seanb4t","updated_at":"2026-01-21T03:01:16Z","closed_at":"2026-01-21T03:01:16Z","dependencies":[{"issue_id":"holomush-1hq.63","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.63","depends_on_id":"holomush-1hq.59","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.63","depends_on_id":"holomush-1hq.60","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.63","depends_on_id":"holomush-1hq.61","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.64","title":"Testing libraries final validation","description":"Final validation for testing libraries migration per plan Task 16.\n\nSteps:\n- task test passes\n- task test:ginkgo passes\n- task test:coverage shows \u003e80% coverage\n- task lint passes\n\nAcceptance criteria:\n- All tests pass\n- Coverage maintained \u003e80%\n- No linter warnings","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-21T01:17:29Z","created_by":"seanb4t","updated_at":"2026-01-21T03:01:36Z","closed_at":"2026-01-21T03:01:36Z","dependencies":[{"issue_id":"holomush-1hq.64","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.64","depends_on_id":"holomush-1hq.62","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.64","depends_on_id":"holomush-1hq.63","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.7","title":"[E2] Phase Gate 2.5: Capability Model","description":"Phase gate for capability model and enforcement.\n\n**Gate Criteria:** Scripts declare capabilities, host enforces\n\n**Deliverables:**\n- Capability declaration in plugin metadata\n- Capability enforcement before host function calls\n- Admin config for capability grants\n- Audit logging for capability usage\n\n**Capabilities:**\n- events.subscribe.\u003ctype\u003e\n- events.emit.\u003ctype\u003e\n- world.read\n- world.write.\u003centity\u003e\n- net.http (go-plugin only)\n\n**Acceptance Criteria:**\n- [ ] Plugins declare required capabilities\n- [ ] Host checks capabilities before function calls\n- [ ] Denied capabilities produce clear errors\n- [ ] Admin can grant/revoke capabilities via config\n- [ ] Tests for enforcement scenarios","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:29:16Z","created_by":"seanb4t","updated_at":"2026-01-19T22:51:09Z","closed_at":"2026-01-19T22:51:09Z","dependencies":[{"issue_id":"holomush-1hq.7","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.7","depends_on_id":"holomush-1hq.10","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.7","depends_on_id":"holomush-1hq.6","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.8","title":"[E2] Phase Gate 2.6: go-plugin Integration","description":"Phase gate for go-plugin integration for heavy plugins.\n\n**Gate Criteria:** Heavy plugins work via gRPC subprocess\n\n**Deliverables:**\n- go-plugin host setup\n- Plugin manifest with binary paths\n- gRPC interface for event delivery\n- Same capability model as Lua\n- Process lifecycle management\n\n**Acceptance Criteria:**\n- [ ] go-plugin subprocess starts correctly\n- [ ] Events delivered via gRPC\n- [ ] Plugin can emit events back\n- [ ] Capability enforcement works\n- [ ] Graceful shutdown of subprocesses\n- [ ] Tests for go-plugin lifecycle","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:29:16Z","created_by":"seanb4t","updated_at":"2026-01-20T03:52:18Z","closed_at":"2026-01-20T03:52:18Z","dependencies":[{"issue_id":"holomush-1hq.8","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.8","depends_on_id":"holomush-1hq.19","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.8","depends_on_id":"holomush-1hq.20","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.8","depends_on_id":"holomush-1hq.7","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1hq.9","title":"[E2] Phase Gate 2.7: Echo Bot in Lua","description":"Phase gate for proving the plugin model end-to-end with echo bot.\n\n**Gate Criteria:** Echo bot demonstrates end-to-end functionality\n\n**Deliverables:**\n- plugins/echo-bot/plugin.lua implementation\n- Subscribes to 'say' events\n- Emits 'Echo: \u003cmessage\u003e' responses\n- Documentation for plugin creation\n\n**Acceptance Criteria:**\n- [ ] Echo bot auto-discovered on startup\n- [ ] Receives say events from players\n- [ ] Emits echo responses visible to players\n- [ ] No infinite loops (ignores own messages)\n- [ ] Integration test proves full cycle\n- [ ] Plugin authoring guide updated","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:29:16Z","created_by":"seanb4t","updated_at":"2026-01-19T22:51:09Z","closed_at":"2026-01-19T22:51:09Z","dependencies":[{"issue_id":"holomush-1hq.9","depends_on_id":"holomush-1hq","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.9","depends_on_id":"holomush-1hq.18","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.9","depends_on_id":"holomush-1hq.21","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-1hq.9","depends_on_id":"holomush-1hq.6","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1iyr","title":"ABAC Review S10: Define CI benchmark pass/fail threshold","description":"Issue: Matching performance targets is ambiguous for CI enforcement. AC: (1) 110% headroom rule specified (2) CI failure behavior documented. Ref: docs/specs/2026-02-05-full-abac-design.md:1372-1405.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:12Z","created_by":"seanb4t","updated_at":"2026-02-06T17:41:21Z","closed_at":"2026-02-06T17:41:21Z","dependencies":[{"issue_id":"holomush-1iyr","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1nwfz","title":"Test issue","status":"tombstone","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T17:27:59Z","created_by":"seanb4t","updated_at":"2026-02-02T17:28:03Z","work_type":"mutex"}
{"id":"holomush-1pj","title":"Log migrator Close() errors instead of discarding","description":"## Problem\nClose errors are silently discarded in CLI commands:\n\n```go\ndefer func() { _ = migrator.Close() }()  // Silent discard\n```\n\nIf `Close()` fails, users get no indication of cleanup problems.\n\n## Source\nPR Review: silent-failure-hunter agent\n\n## Locations\n`cmd/holomush/migrate.go` lines 55, 89, 130, 163, 196\n\n## Suggested Fix\n```go\ndefer func() {\n    if err := migrator.Close(); err \\!= nil {\n        cmd.PrintErrf(\"Warning: failed to close migrator: %v\\n\", err)\n    }\n}()\n```\n\n## Acceptance Criteria\n- [ ] All 5 defer locations log warnings on close failure\n- [ ] Lint passes (remove nolint directive or update it)\n- [ ] Users see warning messages if close fails","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T04:13:50Z","created_by":"seanb4t","updated_at":"2026-01-25T13:39:01Z","closed_at":"2026-01-25T13:39:01Z","work_type":"mutex"}
{"id":"holomush-1t80","title":"[E4-Post] Add SetLocationID method to Character type","description":"**Source:** PR Review - Type Design Analyzer (Encapsulation 3/5)\n\n**Problem:**\nCharacter type has public LocationID field that can be mutated directly, bypassing validation. Adding a setter method would enable re-validation on mutation.\n\n**Acceptance Criteria:**\n- [ ] Add SetLocationID(id *ulid.ULID) method to Character\n- [ ] Method validates the new location (if non-nil, must be valid ULID)\n- [ ] Consider if any callers need the method to return error\n- [ ] Update existing code to use setter where appropriate\n- [ ] Document that direct field access is for read-only or repository use\n\n**Files:**\n- Modify: `internal/world/character.go`\n- Modify: `internal/world/character_test.go`","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T19:50:28Z","created_by":"seanb4t","updated_at":"2026-01-25T21:32:00Z","closed_at":"2026-01-25T21:32:00Z","work_type":"mutex"}
{"id":"holomush-1xk","title":"Inline pluginEvent variable into json.Marshal call","description":"## Summary\nThe pluginEvent variable is constructed and immediately used only for json.Marshal. Can be inlined.\n\n## Location\n`internal/wasm/extism_host.go:139-148`\n\n## Current\n```go\npluginEvent := plugin.Event{\n    ID:        event.ID.String(),\n    // ...\n}\neventJSON, err := json.Marshal(pluginEvent)\n```\n\n## Proposed\n```go\neventJSON, err := json.Marshal(plugin.Event{\n    ID:        event.ID.String(),\n    // ...\n})\n```\n\n## Acceptance Criteria\n- [ ] All tests pass before change\n- [ ] Inline the variable\n- [ ] All tests still pass\n- [ ] Independent review by subagent confirms simplification","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T17:13:48Z","created_by":"seanb4t","updated_at":"2026-01-18T17:32:01Z","closed_at":"2026-01-18T17:32:01Z","dependencies":[{"issue_id":"holomush-1xk","depends_on_id":"holomush-d1w","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-1xw","title":"Add debug logging for empty plugin output","description":"## Problem\nextism_host.go:164-167 returns nil, nil for empty output without logging. Cannot distinguish between \"plugin has no handle_event\" vs \"plugin returned empty response\" in logs.\n\n## Source\nPR Review Round 7 - silent-failure-hunter agent (LOW severity)\n\n## Acceptance Criteria\n- [ ] Test proves visibility issue exists\n- [ ] Add slog.Debug logging for empty output case\n- [ ] Include plugin name and event type in log\n- [ ] Helps operators distinguish empty response from missing function\n- [ ] Independent subagent review before closing","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T18:36:44Z","created_by":"seanb4t","updated_at":"2026-01-18T20:30:19Z","closed_at":"2026-01-18T20:30:19Z","work_type":"mutex"}
{"id":"holomush-1zx","title":"Initialize Zensical project structure","description":"## Summary\nSet up the foundational Zensical project structure in the site/ folder.\n\n## Files to Create/Modify\n- Create: site/pyproject.toml\n- Create: site/zensical.toml  \n- Create: site/.python-version\n- Modify: .gitignore\n\n## Steps\n1. Create directories: mkdir -p site/docs site/assets\n2. Create site/.python-version with content: 3.12\n3. Create site/pyproject.toml per design doc (holomush-docs project with zensical dependency)\n4. Create site/zensical.toml per design doc (dark slate theme, deep-orange accent)\n5. Add to .gitignore: site/build/ and site/.venv/\n6. Run: cd site \u0026\u0026 uv sync - verify venv created\n7. Commit: feat(docs): initialize Zensical project structure\n\n## Acceptance Criteria\n- [ ] site/ directory structure exists\n- [ ] pyproject.toml defines holomush-docs with zensical dependency\n- [ ] zensical.toml configured with slate/deep-orange theme\n- [ ] uv sync creates .venv successfully\n- [ ] Build artifacts ignored in .gitignore\n\n## Reference\nSee docs/plans/2026-01-23-zensical-docs-design.md for configuration specs.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T14:04:10Z","created_by":"seanb4t","updated_at":"2026-01-24T16:49:34Z","closed_at":"2026-01-24T16:49:34Z","work_type":"mutex"}
{"id":"holomush-24f","title":"Fix TOCTOU in Object.Move with SELECT FOR UPDATE","description":"MEDIUM: Validation and update aren't atomic. Target container could be deleted between validation and update. Use SELECT FOR UPDATE to lock container row.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T00:26:12Z","created_by":"seanb4t","updated_at":"2026-01-24T01:05:11Z","closed_at":"2026-01-24T01:05:11Z","work_type":"mutex"}
{"id":"holomush-255","title":"Gateway \u003c-\u003e Core ping/pong health checking","description":"Implement health check ping/pong mechanism between gateway and core processes.\n\n**Requirements:**\n- Gateway periodically pings core over gRPC\n- Core responds with pong including health status\n- Gateway tracks connection health and can report unhealthy state\n- Metrics exposed for monitoring\n\n**Acceptance Criteria:**\n- [ ] gRPC health check service implemented in core\n- [ ] Gateway sends periodic pings (configurable interval)\n- [ ] Gateway exposes health status reflecting core connectivity\n- [ ] Metrics for ping latency and failure counts","status":"open","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T02:03:45Z","created_by":"seanb4t","updated_at":"2026-01-19T01:45:17Z","work_type":"mutex"}
{"id":"holomush-26l","title":"Replace slog logging with structured errors in exit_repo","description":"HIGH: exit_repo.go logs directly (lines 194-215) instead of returning structured errors. Create BidirectionalCleanupError type and let service layer handle logging.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T00:26:10Z","created_by":"seanb4t","updated_at":"2026-01-24T00:42:17Z","closed_at":"2026-01-24T00:42:17Z","dependencies":[{"issue_id":"holomush-26l","depends_on_id":"holomush-72r","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-29rua","title":"[E6.fix] Log error when getEmitter creates fallback emitter","description":"## Problem\nIn `getEmitter`, if the emitter is not found in the Lua state registry, a new one is silently created. This fallback masks what would be a critical initialization bug.\n\n**Location:** `internal/plugin/hostfunc/stdlib.go:261-277`\n\nThe comment says \"shouldn't happen if RegisterStdlib was called\" but no error is logged.\n\n## Impact\nIf RegisterStdlib isn't called before emit functions are used, events will accumulate in a new emitter that may never be flushed, or flushed to the wrong destination.\n\n## Acceptance Criteria\n- [ ] Log ERROR when fallback path is taken\n- [ ] Include registry key in log message\n- [ ] Add test that captures and verifies error log when emitter is missing","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T03:05:28Z","created_by":"seanb4t","updated_at":"2026-02-04T03:21:15Z","closed_at":"2026-02-04T03:21:15Z","dependencies":[{"issue_id":"holomush-29rua","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-2dff","title":"ABAC Review S6: Add grammar_version to compiled policy JSON example","description":"Issue: Example compiled policy JSON missing grammar_version field despite spec requiring it. AC: (1) grammar_version: 1 added to example. Ref: docs/specs/2026-02-05-full-abac-design.md:218-241.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:12Z","created_by":"seanb4t","updated_at":"2026-02-06T17:41:21Z","closed_at":"2026-02-06T17:41:21Z","dependencies":[{"issue_id":"holomush-2dff","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-2i6c","title":"ABAC Review S12: Add attribute cache size limit","description":"Issue: Per-request AttributeCache has no size limit; batch operations could cause unbounded growth. AC: (1) max_cache_entries (default 100) (2) LRU eviction. Ref: docs/specs/2026-02-05-full-abac-design.md:1483-1549.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:13Z","created_by":"seanb4t","updated_at":"2026-02-06T17:41:21Z","closed_at":"2026-02-06T17:41:21Z","dependencies":[{"issue_id":"holomush-2i6c","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-2jpm","title":"Improve AccessRequest type encapsulation","description":"Review finding: AccessRequest type rated 3/10 for encapsulation. Security-critical format requirements (type:id subjects, known actions) are bare exported strings with no constructor. 29+ call sites construct requests with raw strings; validation only happens inside the concrete engine. Improvements: (1) Define action constants (ActionRead, ActionWrite, etc.), (2) Add NewAccessRequest() constructor with format validation, (3) Define error code constants for hand-typed strings in world/service.go. Discovered from PR #88 comprehensive review.","notes":"external-ref: https://github.com/holomush/holomush/pull/88","status":"open","priority":3,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-15T16:15:06Z","created_by":"seanb4t","updated_at":"2026-02-15T16:33:45Z","labels":["deferred-work","review-finding"],"dependencies":[{"issue_id":"holomush-2jpm","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-15T14:48:42Z","created_by":"seanb4t","metadata":"{}"}]}
{"id":"holomush-2ncv","title":"Specify attribute schema registry validation and evolution behavior","description":"The schema registry is described as mandatory but behavior is underspecified for edge cases:\n1. What if a plugin fails to register schema but returns attributes?\n2. Can schemas be updated at runtime (plugin reload)?\n3. What if two plugins register overlapping schemas?\n\n**Acceptance Criteria:**\n- [ ] Registration-time validation rules specified (reject if missing/invalid)\n- [ ] Runtime behavior for unregistered attributes specified (log warning)\n- [ ] Schema evolution on plugin reload documented (compare old vs new, warn on removals)\n\n**Files:** docs/specs/2026-02-05-full-abac-design.md","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T22:37:55Z","created_by":"seanb4t","updated_at":"2026-02-07T00:22:10Z","closed_at":"2026-02-07T00:22:10Z","labels":["review-finding"],"work_type":"mutex"}
{"id":"holomush-2uu","title":"fix(store): log NOTIFY failures as errors instead of warnings","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T16:40:09Z","created_by":"seanb4t","updated_at":"2026-01-25T17:15:12Z","closed_at":"2026-01-25T17:15:12Z","work_type":"mutex"}
{"id":"holomush-30o","title":"Epic 1: Foundation","description":"Core infrastructure for HoloMUSH. Includes event system with ULID ordering, session management with reconnection, telnet adapter, gRPC control plane, observability (OpenTelemetry), and PostgreSQL event store.\n\n**Status:** Complete\n\n**Deliverables:**\n- Event system with ULID ordering\n- Session management with reconnection\n- Telnet adapter\n- gRPC control plane\n- Observability (OpenTelemetry tracing)\n- PostgreSQL event store\n\n**Note:** Phase 1.6 (Extism plugin framework) produced working code that validates OTel tracing patterns, event delivery model, and plugin manifest concepts. This work becomes a spike/reference for Epic 2.","status":"closed","priority":0,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:27:14Z","created_by":"seanb4t","updated_at":"2026-01-19T01:28:14Z","closed_at":"2026-01-19T01:28:14Z","work_type":"mutex"}
{"id":"holomush-365","title":"Release 0.1","description":"First public release of HoloMUSH with core functionality:\n- Two-process architecture (Core + Gateway)\n- Telnet protocol support\n- Event sourcing with PostgreSQL\n- mTLS authentication between processes\n- Basic WASM plugin support","status":"tombstone","priority":1,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T00:51:11Z","created_by":"seanb4t","updated_at":"2026-01-19T01:45:24Z","dependencies":[{"issue_id":"holomush-365","depends_on_id":"holomush-255","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-365","depends_on_id":"holomush-6me","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-365","depends_on_id":"holomush-9yw","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-365","depends_on_id":"holomush-cyi","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-365","depends_on_id":"holomush-dn7","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-365","depends_on_id":"holomush-n1o","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-365","depends_on_id":"holomush-qmt","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-36rd","title":"Improve AccessRequest field encapsulation","description":"PR #88 review noted AccessRequest has exported fields that bypass the NewAccessRequest() constructor validation. Consider unexporting fields and adding accessor methods, similar to the Decision type pattern.","notes":"External ref: https://github.com/holomush/holomush/pull/88#issuecomment-3904727321","status":"open","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-15T23:10:33Z","created_by":"seanb4t","updated_at":"2026-02-15T23:19:29Z","labels":["deferred-work","review-finding"],"dependencies":[{"issue_id":"holomush-36rd","depends_on_id":"holomush-5k1.8","type":"parent-child","created_at":"2026-02-15T18:19:21Z","created_by":"seanb4t","metadata":"{}"}]}
{"id":"holomush-38p","title":"Make post-migration version query failures warnings instead of errors","description":"## Problem\nAfter successfully running migrations, if the version query fails, the error is returned even though the migration succeeded. This confuses users.\n\n## Source\nPR Review: silent-failure-hunter agent\n\n## Locations\n- \\`cmd/holomush/migrate.go:66-70\\` (migrate up)\n- \\`cmd/holomush/migrate.go:111-115\\` (migrate down)\n\n## Current Code\n```go\nif err := migrator.Up(); err \\!= nil {\n    return oops.With(\"command\", \"migrate up\").Wrap(err)\n}\n\nversion, _, versionErr := migrator.Version()\nif versionErr \\!= nil {\n    return oops.With(\"command\", \"migrate up\").Wrap(versionErr)  // Misleading error\n}\n```\n\n## Suggested Fix\n```go\nif err := migrator.Up(); err \\!= nil {\n    return oops.With(\"command\", \"migrate up\").Wrap(err)\n}\n\nversion, _, versionErr := migrator.Version()\nif versionErr \\!= nil {\n    cmd.PrintErrf(\"Warning: migrations applied but failed to get version: %v\\\\n\", versionErr)\n    cmd.Println(\"Migrations complete. Check status with 'holomush migrate status'\")\n    return nil\n}\n```\n\n## User Impact\nUser sees error and thinks migration failed when it actually succeeded.\n\n## Acceptance Criteria\n- [ ] Convert version query errors to warnings in migrate up\n- [ ] Convert version query errors to warnings in migrate down\n- [ ] Add helpful message directing user to status command\n- [ ] Tests pass: `task test`","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T13:52:18Z","created_by":"seanb4t","updated_at":"2026-01-25T14:26:41Z","closed_at":"2026-01-25T14:26:41Z","work_type":"mutex"}
{"id":"holomush-39vv","title":"EventStore dual-prefix backward compatibility tests","description":"Add end-to-end tests verifying that EventStore operations work correctly with both char: (legacy) and character: (new) subject prefixes in event streams. The ADR (holomush-yc4d) decided to only support character: going forward, but the StaticAccessControl adapter accepts both. Tests should verify no data is lost during the transition. Tracked from PR #88 review finding #10.","notes":"External ref: https://github.com/holomush/holomush/pull/88#issuecomment-3905220710 (round 12 comprehensive review, finding #10)","status":"open","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-15T21:43:10Z","created_by":"seanb4t","updated_at":"2026-02-15T22:46:45Z","labels":["deferred-work","review-finding"],"dependencies":[{"issue_id":"holomush-39vv","depends_on_id":"holomush-5k1.8","type":"parent-child","created_at":"2026-02-15T17:46:47Z","created_by":"seanb4t","metadata":"{}"}]}
{"id":"holomush-3c61","title":"ABAC Review I12: Add seed policy versioning for security patches","description":"Issue: Immutable seeds prevent automatic security patches on upgrade. Decision: seed_version integer field; auto-migrate on upgrade; opt-out via --skip-seed-migrations. AC: (1) seed_version field documented (2) policy seed status command (3) CRITICAL log for version mismatch. Ref: docs/specs/2026-02-05-full-abac-design.md:2395-2400.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:11Z","created_by":"seanb4t","updated_at":"2026-02-06T17:33:09Z","closed_at":"2026-02-06T17:33:09Z","dependencies":[{"issue_id":"holomush-3c61","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-3c61","depends_on_id":"holomush-qnr3","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-3epww","title":"[E6.1] Command error types","description":"Implement error constructors and PlayerMessage extractor.\n\nAcceptance Criteria:\n- ErrUnknownCommand, ErrPermissionDenied, ErrInvalidArgs, WorldError, ErrRateLimited\n- All errors use oops with appropriate codes\n- PlayerMessage extracts user-friendly message based on error code\n- Tests verify error codes and messages\n\nFiles: internal/command/errors.go, internal/command/errors_test.go","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T18:07:28Z","created_by":"seanb4t","updated_at":"2026-02-02T18:56:11Z","closed_at":"2026-02-02T18:56:11Z","dependencies":[{"issue_id":"holomush-3epww","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-3h6","title":"Create landing page and navigation structure","description":"## Summary\nCreate the main landing page and section index pages for the three audience types.\n\n## Files to Create\n- site/docs/index.md - Landing page with audience cards\n- site/docs/developers/index.md - Plugin development overview\n- site/docs/operators/index.md - Operations overview\n- site/docs/contributors/index.md - Contributing overview\n\n## Steps\n1. Create site/docs/index.md with audience cards (Developers, Operators, Contributors)\n2. Create site/docs/developers/index.md - plugin development overview\n3. Create site/docs/operators/index.md - operations overview\n4. Create site/docs/contributors/index.md - contributing overview\n5. Run: cd site \u0026\u0026 uv run zensical build - verify build succeeds\n6. Verify navigation tabs work\n7. Commit: feat(docs): add landing page and section indexes\n\n## Acceptance Criteria\n- [ ] Landing page renders with three audience cards\n- [ ] Navigation tabs show Developers | Operators | Contributors\n- [ ] Each section index provides overview of that audience's content\n- [ ] zensical build succeeds without errors\n\n## Reference\nSee docs/plans/2026-01-23-zensical-docs-design.md","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T14:05:25Z","created_by":"seanb4t","updated_at":"2026-01-24T16:52:02Z","closed_at":"2026-01-24T16:52:02Z","dependencies":[{"issue_id":"holomush-3h6","depends_on_id":"holomush-1zx","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-3hdt","title":"Fix audit log WAL contradictory MUST/degradation requirements","description":"The spec says denial audit logs 'MUST be written synchronously' with a WAL fallback, but if both DB and WAL fail, it increments a counter and drops. This is contradictory — you cannot guarantee MUST-audit AND gracefully degrade.\n\n**Decision:** Change to SHOULD (pragmatic). Best-effort during catastrophic failure. Log to stderr + increment counter if both DB and WAL fail.\n\nAlso fix:\n- WAL path inconsistency: 'audit-wal.jsonl' vs 'audit_wal.jsonl' (standardize to audit-wal.jsonl)\n- XDG directory: 'XDG_DATA_HOME' vs 'XDG_STATE_HOME' (use XDG_STATE_HOME for transient WAL)\n- Consolidate duplicate WAL descriptions (~lines 2063-2078 and 2080-2095)\n\n**Acceptance Criteria:**\n- [ ] MUST changed to SHOULD for denial audit writes\n- [ ] WAL path standardized to one canonical path (XDG_STATE_HOME/holomush/audit-wal.jsonl)\n- [ ] Duplicate WAL descriptions consolidated into single section\n- [ ] Degradation behavior clearly documented without contradicting SHOULD\n\n**Files:** docs/specs/2026-02-05-full-abac-design.md","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T22:36:16Z","created_by":"seanb4t","updated_at":"2026-02-06T23:07:54Z","closed_at":"2026-02-06T23:07:54Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-3hdt","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-3hj","title":"Document timeout consequence in plugin-authoring.md","description":"## Problem\nplugin-authoring.md:186 states 5-second timeout but doesn't explain what happens when exceeded.\n\n## Acceptance Criteria\n- [ ] Add explanation: call cancelled, error logged, no notification to plugin\n- [ ] Independent code review before closing","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T16:10:31Z","created_by":"seanb4t","updated_at":"2026-01-18T16:49:28Z","closed_at":"2026-01-18T16:49:28Z","work_type":"mutex"}
{"id":"holomush-3i5","title":"Use cmd.Println instead of fmt.Println in migrate version","description":"## Problem\nThe `migrate version` command uses `fmt.Println(version)` instead of `cmd.Println(version)`, inconsistent with all other migrate commands.\n\n## Source\nPR Review: code-reviewer agent\n\n## Location\n`cmd/holomush/migrate.go:186`\n\n## Current Code\n```go\nfmt.Println(version)\n```\n\n## Fix\n```go\ncmd.Println(version)\n```\n\n## Impact\nUsing `fmt.Println` bypasses Cobra's output writer, breaking:\n- Test output capture\n- Script redirection\n- Consistency with other commands\n\n## Acceptance Criteria\n- [ ] Change `fmt.Println(version)` to `cmd.Println(version)`\n- [ ] Verify all migrate commands use `cmd.Println`/`cmd.Printf`\n- [ ] Lint passes: `task lint`","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T13:52:17Z","created_by":"seanb4t","updated_at":"2026-01-25T13:53:58Z","closed_at":"2026-01-25T13:53:58Z","work_type":"mutex"}
{"id":"holomush-3kdz","title":"[C6] Remove session circuit breaker auto-invalidation","description":"PR #65 review finding (Architecture + Security). Session circuit breaker auto-invalidates after 3 errors in 60s. Creates DoS attack surface (stolen tokens permanently kill sessions) and is over-engineered for should-never-happen error. Decision: remove auto-invalidation. Log every occurrence at CRITICAL, increment Prometheus counter, but do not kill the session. Acceptance Criteria: (1) Auto-invalidation behavior removed (2) CRITICAL logging kept for every occurrence (3) Prometheus counter kept (4) ErrCodeSessionInvalidatedByCircuitBreaker removed (5) Section simplified to logging-only. Dependencies: related to I11.","status":"closed","priority":0,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T20:22:18Z","created_by":"seanb4t","updated_at":"2026-02-06T20:46:53Z","closed_at":"2026-02-06T20:46:53Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-3kdz","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-3vf","title":"Add oops.Code() error codes to service layer","description":"## Context\n\nPer CLAUDE.md, error codes should be added at API boundaries using `oops.Code()`. The service layer in `internal/world/service.go` is the boundary between application logic and repositories, but none of the service methods add error codes.\n\n## Problem\n\nCurrent code wraps errors without codes:\n```go\nloc, err := s.locationRepo.Get(ctx, id)\nif err \\!= nil {\n    return nil, oops.Wrapf(err, \"get location %s\", id)\n}\n```\n\nAPI consumers cannot programmatically distinguish between different error conditions.\n\n## Acceptance Criteria\n\n- [ ] All service methods in `internal/world/service.go` add `oops.Code()` to returned errors\n- [ ] Error codes distinguish between:\n  - Not found errors (e.g., `LOCATION_NOT_FOUND`)\n  - Permission denied errors (e.g., `LOCATION_ACCESS_DENIED`)\n  - Validation errors (e.g., `LOCATION_INVALID`)\n  - Operation failures (e.g., `LOCATION_CREATE_FAILED`)\n- [ ] Error code naming follows pattern: `\u003cENTITY\u003e_\u003cCONDITION\u003e` (e.g., `EXIT_NOT_FOUND`, `OBJECT_MOVE_FAILED`)\n- [ ] Tests verify error codes can be extracted using `oops.Code(err)`\n- [ ] All existing tests pass\n\n## Implementation Notes\n\nExample fix:\n```go\nloc, err := s.locationRepo.Get(ctx, id)\nif err \\!= nil {\n    if errors.Is(err, ErrNotFound) {\n        return nil, oops.Code(\"LOCATION_NOT_FOUND\").Wrapf(err, \"get location %s\", id)\n    }\n    return nil, oops.Code(\"LOCATION_GET_FAILED\").Wrapf(err, \"get location %s\", id)\n}\n```\n\nApply this pattern consistently to:\n- CreateLocation, GetLocation, UpdateLocation, DeleteLocation\n- CreateExit, GetExit, UpdateExit, DeleteExit  \n- CreateObject, GetObject, UpdateObject, DeleteObject, MoveObject\n- Scene participant methods","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T19:27:50Z","created_by":"seanb4t","updated_at":"2026-01-24T19:39:06Z","closed_at":"2026-01-24T19:39:06Z","work_type":"mutex"}
{"id":"holomush-3wy","title":"Fix Python comment naming inconsistency (ActorKindPlugin vs ActorPlugin)","description":"## Problem\nplugins/echo-python/plugin.py:18 uses ActorKindPlugin in comment, but Go constant is ActorPlugin. Minor naming inconsistency could confuse developers.\n\n## Source\nPR Review Round 7 - comment-analyzer agent (Critical severity on naming)\n\n## Acceptance Criteria\n- [ ] Update Python comment to use numeric value with clearer comment\n- [ ] Or update to match Go constant name ActorPlugin\n- [ ] Ensure consistency across all plugin examples\n- [ ] Independent subagent review before closing","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T18:37:04Z","created_by":"seanb4t","updated_at":"2026-01-18T20:43:25Z","closed_at":"2026-01-18T20:43:25Z","work_type":"mutex"}
{"id":"holomush-3ykk","title":"Fix bare boolean restriction contradiction in ABAC spec","description":"Main spec has contradictory statements about bare boolean attributes in when clauses:\n- Line ~788: 'The compiler MUST reject bare boolean attribute references in when clauses'\n- Line ~894: 'Bare boolean attributes (e.g., resource.restricted) are equivalent to resource.restricted == true — both forms are valid'\n\nThe restriction at line 788 is the intended behavior (consistent with the compile error example). Lines 894-898 are a leftover from an earlier draft.\n\n**Decision:** Remove/rewrite lines 894-898 to reference the restriction section.\n\n**Acceptance Criteria:**\n- [ ] Lines 894-898 removed or rewritten to reference the bare boolean restriction\n- [ ] No other locations in the spec claim bare booleans are valid\n- [ ] Grammar notes section is consistent with the restriction\n\n**Files:** docs/specs/2026-02-05-full-abac-design.md","status":"closed","priority":0,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T22:36:01Z","created_by":"seanb4t","updated_at":"2026-02-06T22:52:55Z","closed_at":"2026-02-06T22:52:55Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-3ykk","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-402i","title":"Spec: Document provider timeout behavior under context cancellation","description":"**Review Finding: C5 (Critical)**\n\nThe fair-share timeout calculation (remaining_budget / remaining_providers) doesn't account for parent context cancellation (e.g., client disconnect). All remaining providers would see cancelled contexts immediately, not fair-share timeouts. The actual behavior is correct (respect cancellation) but undocumented.\n\n**Location:** Main spec, Performance Targets (~line 1401)\n\n**Acceptance Criteria:**\n- Spec documents: if parent context is cancelled during evaluation, all remaining providers receive the cancelled context immediately\n- Evaluation terminates with EffectDefaultDeny on context cancellation\n- Fair-share applies only when parent context is NOT cancelled\n- This is explicitly noted as correct behavior, not a bug","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T14:04:32Z","created_by":"seanb4t","updated_at":"2026-02-06T14:20:52Z","closed_at":"2026-02-06T14:20:52Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-402i","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-40ym","title":"Fix design doc: remove incorrect default migrate behavior claim","description":"## Summary\n\nThe design document at `docs/plans/2026-01-24-database-migrations-design.md:123` claims that running `holomush migrate` without a subcommand applies migrations by default:\n\n```\nholomush migrate              # Apply all pending migrations (default: up)\n```\n\nHowever, the actual implementation at `cmd/holomush/migrate.go:234-248` shows `NewMigrateCmd()` does NOT set a `RunE` function. Running `holomush migrate` without a subcommand will simply print help text, not run migrations.\n\n## Acceptance Criteria\n\n- [ ] Update design doc line 123 to remove claim about default behavior\n- [ ] Change example to: `holomush migrate up           # Apply all pending migrations`\n- [ ] OR implement default-up behavior if that is the desired UX\n- [ ] Verify Taskfile uses explicit `migrate up` (it does)\n\n## References\n\n- Design doc: `docs/plans/2026-01-24-database-migrations-design.md:123`\n- Implementation: `cmd/holomush/migrate.go:234-248`\n- PR review finding: comment-analyzer agent","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T19:14:44Z","created_by":"seanb4t","updated_at":"2026-01-25T19:25:44Z","closed_at":"2026-01-25T19:25:44Z","work_type":"mutex"}
{"id":"holomush-42he5","title":"[BACKLOG] Command state management for multi-turn operations","description":"## Context\n\nThe current command architecture uses ephemeral Lua state per command execution. This is intentional for v1 (simplicity, isolation, 50μs startup), but blocks future multi-turn command patterns:\n\n- @dig wizard: Dig which direction? → north → Name the room? → Library → creates room\n- @create with confirmation: Create object sword? (y/n) → y → creates\n- Combat sequences: attack → target selection → resolution\n\n## Problem Statement\n\nHow should commands maintain state across multiple player inputs without:\n1. Breaking Lua state isolation (security concern)\n2. Adding significant latency\n3. Creating memory pressure from long-lived state\n4. Blocking concurrent command execution\n\n## Proposed Approaches (Draft ADR)\n\n### Option 1: Continuation Tokens\nPass opaque state token in command payload, decode on next invocation.\n- Pros: Stateless server, horizontally scalable\n- Cons: Token size limits, requires serialization\n\n### Option 2: Session-Scoped State Store\nHost function API for get/set state keyed by (session, command).\n- Pros: Simple API, automatic cleanup on session end\n- Cons: State not visible to other commands\n\n### Option 3: Go State Machines\nMulti-turn commands implemented in Go with explicit state machine.\n- Pros: Full control, testable, no Lua complexity\n- Cons: Lua plugins can't implement multi-turn commands\n\n### Option 4: Lua State Pool (Deferred)\nReuse Lua VMs with state preservation per session.\n- Pros: Natural Lua patterns, efficient\n- Cons: Isolation complexity, memory management\n\n## Decision\n\nDeferred to post-v1. For v1:\n- Document limitation explicitly\n- Provide workaround patterns (confirmation flags, host function KV store)\n- Avoid blocking architectural choices\n\n## Blocking Considerations\n\nWhen implementing v1 commands, MUST NOT:\n- Assume Lua state persists between invocations\n- Store command state in global variables\n- Design commands that require server-side conversation state\n\nSHOULD:\n- Use confirmation flags (--confirm, --yes)\n- Store user preferences in player metadata via host functions\n- Design commands as single-invocation where possible\n\n## Acceptance Criteria (When Activated)\n\n- [ ] ADR finalized with chosen approach\n- [ ] State management API designed\n- [ ] Implementation plan created\n- [ ] Migration path documented for existing commands\n- [ ] Security review completed for chosen approach\n- [ ] Performance benchmarks established","status":"closed","priority":4,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T17:29:07Z","created_by":"seanb4t","updated_at":"2026-02-02T17:34:13Z","closed_at":"2026-02-02T17:34:13Z","dependencies":[{"issue_id":"holomush-42he5","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-49j6","title":"E5.7.6 Add nil logger test for NewAuthServiceWithLogger","description":"TestNewAuthService_NilDependencies tests nil players/sessions/hasher but not nil logger for NewAuthServiceWithLogger (auth_service.go:56-57).","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T02:41:33Z","created_by":"seanb4t","updated_at":"2026-02-02T02:52:21Z","closed_at":"2026-02-02T02:52:21Z","dependencies":[{"issue_id":"holomush-49j6","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-4ga","title":"Add closed-state check to HasPlugin for defensive consistency","description":"## Summary\nHasPlugin does not check closed state, unlike other ExtismHost methods.\n\n## Problem\nAfter Close() is called, h.plugins is set to nil. HasPlugin returns false (correct behavior) but doesn't explicitly check h.closed like LoadPlugin and DeliverEvent do.\n\n## Solution\nAdd closed-state check to HasPlugin for defensive consistency:\n```go\nfunc (h *ExtismHost) HasPlugin(name string) bool {\n    h.mu.RLock()\n    defer h.mu.RUnlock()\n    if h.closed {\n        return false\n    }\n    _, ok := h.plugins[name]\n    return ok\n}\n```\n\n## Files\n- Modify: internal/wasm/extism_host.go\n\n## Acceptance Criteria\n- [ ] HasPlugin checks h.closed before accessing plugins map\n- [ ] Test: `TestExtismHost_HasPlugin_AfterClose` verifies behavior\n- [ ] Consistent with LoadPlugin and DeliverEvent patterns","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T15:13:19Z","created_by":"seanb4t","updated_at":"2026-01-18T15:22:35Z","closed_at":"2026-01-18T15:22:35Z","dependencies":[{"issue_id":"holomush-4ga","depends_on_id":"holomush-xpu","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-4hws","title":"ABAC Review S2: Add missing code fence language specifiers","description":"Issue: ~15 Go code blocks missing language identifier. Project standards require fences specify language. AC: (1) All code fences have language (2) markdownlint passes. Ref: main-spec:78-121, 511-521.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:11Z","created_by":"seanb4t","updated_at":"2026-02-06T17:41:21Z","closed_at":"2026-02-06T17:41:21Z","dependencies":[{"issue_id":"holomush-4hws","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-4hws","depends_on_id":"holomush-dymd","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-4m1","title":"Add closed-state check to DeliverEvent","description":"## Problem\nHasPlugin checks h.closed before returning, but DeliverEvent does not check closed state consistently.\n\n## Acceptance Criteria\n- [ ] Add test proving DeliverEvent on closed host has inconsistent behavior\n- [ ] Add closed-state check to DeliverEvent matching HasPlugin pattern\n- [ ] Test must pass after fix\n- [ ] Independent code review before closing","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T15:36:21Z","created_by":"seanb4t","updated_at":"2026-01-18T15:58:28Z","closed_at":"2026-01-18T15:58:28Z","work_type":"mutex"}
{"id":"holomush-4r4","title":"Simplify failingEmitter test helper - remove call counting","description":"## Summary\nThe failingEmitter test helper in extism_subscriber_test.go has mutex-protected call counting that is only used once. Can be simplified.\n\n## Location\n`internal/wasm/extism_subscriber_test.go:160-177`\n\n## Current\n```go\ntype failingEmitter struct {\n    mu        sync.Mutex\n    callCount int\n}\n```\n\n## Proposed\n```go\ntype failingEmitter struct{}\nfunc (f *failingEmitter) Emit(...) error { return context.DeadlineExceeded }\n```\n\n## Acceptance Criteria\n- [ ] All tests pass before change\n- [ ] Simplify failingEmitter to remove unused complexity\n- [ ] All tests still pass after change\n- [ ] Independent review by subagent confirms simplification","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T17:13:46Z","created_by":"seanb4t","updated_at":"2026-01-18T17:42:14Z","closed_at":"2026-01-18T17:42:14Z","work_type":"mutex"}
{"id":"holomush-4s5m","title":"Spec: Re-entrance detection has cross-goroutine gap","description":"**Review Finding: C2 (Critical)**\n\nThe re-entrance guard uses a context sentinel to prevent providers from calling Evaluate() during attribute resolution. However, Go contexts are values, not goroutine-local storage. A provider that spawns a goroutine with a fresh context can bypass the guard entirely, causing the deadlock this mechanism prevents.\n\n**Location:** Main spec, Attribute Providers re-entrance prohibition (~line 471)\n\n**Acceptance Criteria:**\n- Spec acknowledges sentinel prevents synchronous re-entrance on the same call stack only\n- Add MUST NOT requirement: Providers MUST NOT spawn goroutines during attribute resolution\n- Document that cross-goroutine re-entrance is prevented by convention and code review, not runtime enforcement\n- Consider documenting that integration tests should verify no provider spawns goroutines","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T14:04:16Z","created_by":"seanb4t","updated_at":"2026-02-06T14:20:52Z","closed_at":"2026-02-06T14:20:52Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-4s5m","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-4vm","title":"Add LocationType validation","description":"MEDIUM: LocationType accepts arbitrary strings. Add Validate method checking against valid types (persistent/scene/instance).","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T00:26:12Z","created_by":"seanb4t","updated_at":"2026-01-24T01:07:26Z","closed_at":"2026-01-24T01:07:26Z","work_type":"mutex"}
{"id":"holomush-4vpj","title":"Decisions: #32 contradicts #44 on SQL pattern for parent_location","description":"**Review Finding: C3 (Critical)**\n\nDecision #32 states PropertyRepository resolves parent_location via simple SQL JOIN against objects.location_id. Decision #44 explains nested containers require a recursive CTE because location_id may be NULL for objects inside other objects. The simple JOIN will produce NULL parent_location for nested containers.\n\n**Location:** Decisions doc, Decision #32\n\n**Acceptance Criteria:**\n- Decision #32 updated to reference the recursive CTE from Decision #44\n- Description clarified: 'resolves via recursive CTE that walks the containment chain (see Decision #44). For top-level objects, this is equivalent to a simple JOIN.'\n- No contradiction between #32 and #44","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T14:04:21Z","created_by":"seanb4t","updated_at":"2026-02-06T14:20:52Z","closed_at":"2026-02-06T14:20:52Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-4vpj","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-4w0","title":"Document stream pattern edge cases in plugin-authoring.md","description":"## Problem\ndocs/reference/plugin-authoring.md:172-181 shows basic glob patterns but does not document edge cases:\n- Single * matches everything\n- Empty pattern only matches empty stream\n- Pattern without * requires exact match\n\n## Source\nPR Review Round 7 - comment-analyzer agent\n\n## Acceptance Criteria\n- [ ] Add edge case documentation to pattern section\n- [ ] Include examples for each edge case\n- [ ] Verify documentation matches implementation\n- [ ] Independent subagent review before closing","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T18:37:04Z","created_by":"seanb4t","updated_at":"2026-01-18T20:43:25Z","closed_at":"2026-01-18T20:43:25Z","work_type":"mutex"}
{"id":"holomush-51d","title":"Add oops.Code() to repository layer for consistency","description":"## Problem\n\nRepository layer wraps errors with `oops.With().Wrap()` but doesn't include error codes. Only the service layer adds codes. This inconsistency means:\n- Direct repository usage (bypassing service) produces errors without codes\n- Error chain has context but no code at repository level\n\n**Location:** Multiple files in `internal/world/postgres/`\n\n## Acceptance Criteria\n\n- [ ] All repository methods returning `ErrNotFound` include `oops.Code(\"*_NOT_FOUND\")`\n- [ ] All repository methods returning `ErrInvalidContainment` include appropriate code\n- [ ] Pattern is consistent across all repository files\n- [ ] Service layer still adds its own codes (double-coding is acceptable)\n- [ ] Tests verify repository-level error codes\n\n## Implementation Notes\n\nChange from:\n```go\nreturn nil, oops.With(\"id\", id.String()).Wrap(world.ErrNotFound)\n```\n\nTo:\n```go\nreturn nil, oops.Code(\"OBJECT_NOT_FOUND\").With(\"id\", id.String()).Wrap(world.ErrNotFound)\n```\n\nThis is a lower priority \"consistency\" improvement, not a bug fix.","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T19:52:26Z","created_by":"seanb4t","updated_at":"2026-01-24T20:05:56Z","closed_at":"2026-01-24T20:05:56Z","dependencies":[{"issue_id":"holomush-51d","depends_on_id":"holomush-66g","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-52s","title":"Add event ID/stream to delivery failure error logs","description":"## Problem\nError log at extism_subscriber.go:119-123 omits event.ID, event.Stream, event.Timestamp making debugging difficult.\n\n## Acceptance Criteria\n- [ ] Add test verifying log fields are present\n- [ ] Add event_id, event_stream, event_timestamp to slog.Error call\n- [ ] Test must pass\n- [ ] Independent code review before closing","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T16:10:00Z","created_by":"seanb4t","updated_at":"2026-01-18T16:31:33Z","closed_at":"2026-01-18T16:31:33Z","work_type":"mutex"}
{"id":"holomush-54r","title":"Fix hardcoded version in integration test","description":"## Problem\nIntegration test hardcodes expected migration version:\n\n```go\nassert.Equal(t, uint(7), version)  // Breaks when new migrations added\n```\n\n## Source\nPR Review: pr-test-analyzer agent\n\n## Location\n`internal/store/migrate_integration_test.go:57`\n\n## Suggested Fixes\n1. Assert `version \u003e 0` for 'migrations applied'\n2. Compute expected version dynamically from migrations directory\n3. Test rollback relative to current version\n\n## Acceptance Criteria\n- [ ] Test doesn't break when new migrations are added\n- [ ] Test still validates migrations are applied correctly\n- [ ] All tests pass: `task test`","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T04:13:51Z","created_by":"seanb4t","updated_at":"2026-01-25T13:39:59Z","closed_at":"2026-01-25T13:39:59Z","work_type":"mutex"}
{"id":"holomush-55sh","title":"ABAC Review I1: Standardize decision cross-reference format","description":"Issue: Decision cross-references use inconsistent formats: [decision #8], [Decision #8], plain text. AC: (1) All cross-references use consistent [decision #N](slug) format (2) Links verified to resolve. Ref: docs/specs/2026-02-05-full-abac-design.md throughout.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:09Z","created_by":"seanb4t","updated_at":"2026-02-06T17:26:00Z","closed_at":"2026-02-06T17:26:00Z","dependencies":[{"issue_id":"holomush-55sh","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5f3k","title":"ADR 0011: Present narrowing forbids pattern as comparison table","description":"**Review Finding: S12 (Suggestion)**\n\nADR 0011's example of narrowing a forbid (instead of adding a higher-priority permit) is critical for operators from firewall-style systems. A before/after comparison table would be more scannable than the current code block with comments.\n\n**Location:** ADR 0011 (Deny-Overrides Without Priority), lines 91-104\n\n**Acceptance Criteria:**\n- Present the narrowing pattern as a comparison table: wrong approach (priority thinking) vs correct approach (narrow the deny)\n- Include before/after policy examples\n- Make the pattern maximally clear for operators coming from priority-based systems","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T14:06:22Z","created_by":"seanb4t","updated_at":"2026-02-06T14:34:19Z","closed_at":"2026-02-06T14:34:19Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5f3k","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5f4","title":"Document BidirectionalCleanupResult implements error","description":"## Context\n\nIn `internal/world/repository.go` (lines 45-50), the `ExitRepository.Delete` method documentation says it \"Returns *BidirectionalCleanupResult when cleanup encounters issues\" but the return type is `error`.\n\n## Problem\n\nThe comment is technically accurate (BidirectionalCleanupResult implements error), but this could confuse consumers who might not realize they can type-assert the error to get additional cleanup details.\n\n## Acceptance Criteria\n\n- [ ] Update the `ExitRepository.Delete` comment to clarify that:\n  - The return type is `error`\n  - `*BidirectionalCleanupResult` implements `error` interface\n  - Callers can type-assert to access cleanup details\n- [ ] Add example in comment showing how to detect and handle cleanup issues:\n  ```go\n  // var cleanupErr *world.BidirectionalCleanupResult\n  // if errors.As(err, \u0026cleanupErr) { ... }\n  ```\n- [ ] Ensure godoc renders clearly\n\n## Implementation Notes\n\nThis is documentation only - no code changes required beyond comments.\n\nExample improved comment:\n```go\n// Delete removes an exit by ID.\n// If bidirectional, deletes the return exit atomically in a single transaction.\n// \n// When the primary exit deletion succeeds but return exit cleanup has issues,\n// returns a *BidirectionalCleanupResult (which implements error). Callers can\n// type-assert to access cleanup details:\n//\n//     var cleanupErr *world.BidirectionalCleanupResult\n//     if errors.As(err, \u0026cleanupErr) \u0026\u0026 \\!cleanupErr.IsSevere() {\n//         // Non-severe: return exit already deleted, operation succeeded\n//     }\n```","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T19:27:50Z","created_by":"seanb4t","updated_at":"2026-01-24T19:39:06Z","closed_at":"2026-01-24T19:39:06Z","work_type":"mutex"}
{"id":"holomush-5g6","title":"Epic 13: iOS Client (Stretch)","description":"Native iOS app for mobile play.\n\n**Status:** Stretch goal - PWA (Epic 8) may suffice for mobile needs.\n\n**Goal:** First-class iOS experience if PWA insufficient.\n\n**Phases:**\n- 13.1: SwiftUI scaffold\n- 13.2: WebSocket transport\n- 13.3: Terminal UI\n- 13.4: Push notifications\n- 13.5: App Store submission\n\n**Acceptance Criteria:**\n- [ ] SwiftUI app structure works\n- [ ] WebSocket connects to server\n- [ ] Terminal with input and scrollback works\n- [ ] Push notification event alerts work\n- [ ] App Store published","status":"open","priority":4,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:27:57Z","created_by":"seanb4t","updated_at":"2026-01-19T01:27:57Z","dependencies":[{"issue_id":"holomush-5g6","depends_on_id":"holomush-qve","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5g6.1","title":"[E13] Design: iOS Client Architecture","description":"Design the native iOS client architecture for HoloMUSH.\n\n**Note:** This is a stretch goal. The PWA (Epic 8) may suffice for mobile needs.\n\n## Acceptance Criteria\n\n- [ ] Document SwiftUI app architecture (MVVM or similar)\n- [ ] Define WebSocket client layer design\n- [ ] Specify offline capability requirements\n- [ ] Design push notification integration approach\n- [ ] Document state management strategy\n- [ ] Define accessibility requirements (VoiceOver, Dynamic Type)\n- [ ] Specify App Store requirements and constraints\n- [ ] Compare native iOS vs PWA trade-offs\n- [ ] Define minimum iOS version target\n- [ ] Document keyboard and input handling strategy","status":"open","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:34:13Z","created_by":"seanb4t","updated_at":"2026-01-19T01:34:13Z","dependencies":[{"issue_id":"holomush-5g6.1","depends_on_id":"holomush-5g6","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5g6.2","title":"[E13] Implementation Plan: iOS Client","description":"Create detailed implementation plan for the iOS client based on architecture design.\n\n**Note:** This is a stretch goal. The PWA (Epic 8) may suffice for mobile needs.\n\n## Acceptance Criteria\n\n- [ ] Break down each phase into specific tasks\n- [ ] Define file/module structure for Swift project\n- [ ] Specify third-party dependencies (if any)\n- [ ] Estimate effort for each phase\n- [ ] Identify risks and mitigations\n- [ ] Define testing strategy (unit, UI, snapshot tests)\n- [ ] Document CI/CD pipeline for iOS builds\n- [ ] Specify code signing and provisioning approach\n- [ ] Plan for TestFlight beta distribution\n- [ ] Define performance benchmarks","status":"open","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:34:18Z","created_by":"seanb4t","updated_at":"2026-01-19T01:34:18Z","dependencies":[{"issue_id":"holomush-5g6.2","depends_on_id":"holomush-5g6","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5g6.2","depends_on_id":"holomush-5g6.1","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5g6.3","title":"[E13] Phase 13.1: SwiftUI Scaffold - App Structure","description":"Build the foundational SwiftUI app structure for the iOS client.\n\n**Note:** This is a stretch goal. The PWA (Epic 8) may suffice for mobile needs.\n\n## Scope\n- SwiftUI application scaffold\n- Navigation structure\n- Core views and view models\n- App lifecycle management\n\n## Acceptance Criteria\n\n- [ ] Xcode project created with SwiftUI lifecycle\n- [ ] Main navigation structure implemented (tab bar or similar)\n- [ ] Login/authentication view scaffolded\n- [ ] Main game view container created\n- [ ] Settings view scaffolded\n- [ ] MVVM architecture established\n- [ ] Dependency injection pattern set up\n- [ ] Unit test target configured\n- [ ] UI test target configured\n- [ ] App builds and runs on simulator\n- [ ] Dark mode support implemented\n- [ ] Dynamic Type support for accessibility","status":"open","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:34:24Z","created_by":"seanb4t","updated_at":"2026-01-19T01:34:24Z","dependencies":[{"issue_id":"holomush-5g6.3","depends_on_id":"holomush-5g6","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5g6.3","depends_on_id":"holomush-5g6.1","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5g6.3","depends_on_id":"holomush-5g6.2","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5g6.4","title":"[E13] Phase 13.2: WebSocket Transport - Connect to Server","description":"Implement WebSocket transport layer for real-time server communication.\n\n**Note:** This is a stretch goal. The PWA (Epic 8) may suffice for mobile needs.\n\n## Scope\n- WebSocket client implementation\n- Connection management\n- Message serialization/deserialization\n- Reconnection handling\n\n## Acceptance Criteria\n\n- [ ] WebSocket client using URLSessionWebSocketTask or similar\n- [ ] Connection state management (connecting, connected, disconnected)\n- [ ] Automatic reconnection with exponential backoff\n- [ ] Message encoding/decoding (JSON or protobuf)\n- [ ] Connection status indicator in UI\n- [ ] Background connection handling\n- [ ] Network reachability monitoring\n- [ ] TLS certificate validation\n- [ ] Unit tests for transport layer\n- [ ] Integration test with local server\n- [ ] Error handling and user feedback\n- [ ] Logging for debugging","status":"open","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:34:30Z","created_by":"seanb4t","updated_at":"2026-01-19T01:34:30Z","dependencies":[{"issue_id":"holomush-5g6.4","depends_on_id":"holomush-5g6","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5g6.4","depends_on_id":"holomush-5g6.3","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5g6.5","title":"[E13] Phase 13.3: Terminal UI - Input and Scrollback","description":"Build the terminal-style UI for game interaction with input and scrollback.\n\n**Note:** This is a stretch goal. The PWA (Epic 8) may suffice for mobile needs.\n\n## Scope\n- Scrollback view with game output\n- Command input field\n- Text formatting (ANSI colors, etc.)\n- Keyboard handling\n\n## Acceptance Criteria\n\n- [ ] Scrollback view with attributed text support\n- [ ] ANSI color code parsing and rendering\n- [ ] Auto-scroll to bottom on new content\n- [ ] Manual scroll with \"new messages\" indicator\n- [ ] Command input field with return-to-send\n- [ ] Command history (up/down arrow or swipe)\n- [ ] Hardware keyboard support\n- [ ] Copy/paste support for text selection\n- [ ] VoiceOver accessibility for output\n- [ ] Font size adjustment (settings)\n- [ ] Performance with large scrollback buffers\n- [ ] Unit tests for text parsing\n- [ ] UI tests for input handling","status":"open","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:34:37Z","created_by":"seanb4t","updated_at":"2026-01-19T01:34:37Z","dependencies":[{"issue_id":"holomush-5g6.5","depends_on_id":"holomush-5g6","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5g6.5","depends_on_id":"holomush-5g6.4","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5g6.6","title":"[E13] Phase 13.4: Push Notifications - Event Alerts","description":"Implement push notifications for game event alerts when app is backgrounded.\n\n**Note:** This is a stretch goal. The PWA (Epic 8) may suffice for mobile needs.\n\n## Scope\n- APNs integration\n- Server-side push delivery\n- Notification preferences\n- Rich notifications\n\n## Acceptance Criteria\n\n- [ ] APNs registration and token management\n- [ ] Server integration for push delivery\n- [ ] Notification permission request flow\n- [ ] Notification categories (page, broadcast, etc.)\n- [ ] Rich notifications with preview text\n- [ ] Notification settings in app\n- [ ] Badge count management\n- [ ] Sound customization options\n- [ ] Tap-to-open navigation to relevant content\n- [ ] Background refresh for critical updates\n- [ ] Unit tests for notification handling\n- [ ] Manual test plan for APNs flow\n- [ ] Privacy-conscious notification content","status":"open","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:34:44Z","created_by":"seanb4t","updated_at":"2026-01-19T01:34:44Z","dependencies":[{"issue_id":"holomush-5g6.6","depends_on_id":"holomush-5g6","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5g6.6","depends_on_id":"holomush-5g6.5","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5g6.7","title":"[E13] Phase 13.5: App Store Submission - Published","description":"Complete App Store submission process and achieve publication.\n\n**Note:** This is a stretch goal. The PWA (Epic 8) may suffice for mobile needs.\n\n## Scope\n- App Store assets and metadata\n- Review preparation\n- Submission and approval\n- Launch coordination\n\n## Acceptance Criteria\n\n- [ ] App icon at all required sizes\n- [ ] Launch screen/splash screen\n- [ ] App Store screenshots for all device sizes\n- [ ] App Store description and keywords\n- [ ] Privacy policy URL\n- [ ] Support URL\n- [ ] App Store review notes prepared\n- [ ] TestFlight beta testing completed\n- [ ] Crash reporting integrated (Crashlytics or similar)\n- [ ] Analytics integration (privacy-respecting)\n- [ ] App submitted to App Store review\n- [ ] Review feedback addressed (if any)\n- [ ] App approved and published\n- [ ] Version 1.0 release notes","status":"open","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:34:50Z","created_by":"seanb4t","updated_at":"2026-01-19T01:34:50Z","dependencies":[{"issue_id":"holomush-5g6.7","depends_on_id":"holomush-5g6","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5g6.7","depends_on_id":"holomush-5g6.6","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5g6.7","depends_on_id":"holomush-dwk","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5h89","title":"Consider attribute bag schema versioning in plugin manifests","description":"If a plugin changes from reputation.score (number) to reputation.tier (string), existing policies silently break. Consider adding optional schema_version field to plugin manifests. When engine loads attributes, tag them with provider's schema version. Policies can then specify minimum schema versions.\n\n**Acceptance Criteria:**\n- [ ] Evaluate whether schema versioning is needed for MVP or deferred to future iteration\n\n**Files:** docs/specs/2026-02-05-full-abac-design.md","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T22:37:09Z","created_by":"seanb4t","updated_at":"2026-02-07T00:26:44Z","closed_at":"2026-02-07T00:26:44Z","labels":["review-finding"],"work_type":"mutex"}
{"id":"holomush-5j6pq","title":"[E6.2] Look command handler","description":"Implement look command to examine current location or target.\n\n**Acceptance Criteria:**\n- Look handler fetches room via Services.World\n- Outputs room name and description\n- Returns WorldError on failure\n- Tests with mock world service\n\n**Files:** internal/command/handlers/look.go, internal/command/handlers/look_test.go\n**Depends on:** Phase 1 dispatcher\n**Blocks:** holomush-wr9.5","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T18:08:35Z","created_by":"seanb4t","updated_at":"2026-02-02T20:41:16Z","closed_at":"2026-02-02T20:41:16Z","dependencies":[{"issue_id":"holomush-5j6pq","depends_on_id":"holomush-rgihb","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5j6pq","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1","title":"Epic 7: Full ABAC","description":"Evolve Core Access Control into full Attribute-Based Access Control.\n\n**Goal:** Dynamic policy-based access control with audit logging.\n\n**Evaluation Order:**\n1. Collect attributes (subject, resource, action, environment)\n2. Find matching policies\n3. Any deny → deny\n4. Any allow → allow\n5. Default → deny\n\n**Phases:**\n- 7.1: Policy schema\n- 7.2: Attribute evaluation\n- 7.3: Policy engine\n- 7.4: Runtime policy editing\n- 7.5: Audit logging\n- 7.6: Plugin attribute contributions\n\n**Acceptance Criteria:**\n- [ ] Policies stored in DB, versioned\n- [ ] Subject/resource/environment attributes resolved\n- [ ] Policies evaluated against attributes\n- [ ] Admin UI/commands manage policies\n- [ ] All access decisions logged\n- [ ] Plugins can add attributes","notes":"## Known Issues to Address\n\n### AccessControl.Check() Returns Bool Instead of Error (from PR #35 review)\n\n**Current interface:**\n```go\ntype AccessControl interface {\n    Check(ctx context.Context, subject, action, resource string) bool\n}\n```\n\n**Problem:**\n- Cannot distinguish between \"denied\" and \"error during check\"\n- If ABAC system has internal error, it appears as denial\n- Users receive \"permission denied\" instead of \"internal error\" for infrastructure issues\n\n**Recommended fix (Phase 7.3 Policy Engine):**\n```go\ntype AccessControl interface {\n    Check(ctx context.Context, subject, action, resource string) (bool, error)\n}\n```\n\nThis change should:\n1. Update AccessControl interface to return (bool, error)\n2. Update all implementations\n3. Update all service layer callers to handle check errors\n4. Add appropriate oops.Code() for access check failures\n\nReference: holomush-zy6 (closed - deferred to this epic)","status":"open","priority":2,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:27:44Z","created_by":"seanb4t","updated_at":"2026-01-24T20:14:16Z","dependencies":[{"issue_id":"holomush-5k1","depends_on_id":"holomush-wr9","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.1","title":"[E7] Design: Full ABAC Architecture","description":"Design the full Attribute-Based Access Control (ABAC) system for HoloMUSH.\n\n## Acceptance Criteria\n\n- [ ] Document ABAC policy data model (subjects, resources, actions, conditions)\n- [ ] Define attribute schema for subjects (players, plugins, connections)\n- [ ] Define attribute schema for resources (objects, rooms, commands)\n- [ ] Define environment attributes (time, location, game state)\n- [ ] Design policy storage format (JSON/YAML schema)\n- [ ] Design policy versioning strategy\n- [ ] Document policy evaluation algorithm (deny-by-default, conflict resolution)\n- [ ] Define audit event schema for access decisions\n- [ ] Design plugin attribute contribution interface\n- [ ] Document admin API for policy management\n- [ ] Create sequence diagrams for policy evaluation flow\n- [ ] Document migration path from simple permission checks to full ABAC","notes":"PR: https://github.com/holomush/holomush/pull/65","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:32:14Z","created_by":"seanb4t","updated_at":"2026-02-07T14:39:28Z","closed_at":"2026-02-07T14:39:28Z","dependencies":[{"issue_id":"holomush-5k1.1","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.10","title":"[M1] Fix decision #40 grammar: expr to attribute_root","description":"PR #65 review finding (Documentation). Decision #40 (line 952) uses expr has identifier but main spec grammar (line 727) correctly uses attribute_root. Acceptance Criteria: decision #40 grammar matches main spec. Dependencies: decisions document.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T20:21:08Z","created_by":"seanb4t","updated_at":"2026-02-06T20:59:23Z","closed_at":"2026-02-06T20:59:23Z","dependencies":[{"issue_id":"holomush-5k1.10","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.100","title":"I3: Move AttributeSchema from Task 13 to Task 5 (core types)","description":"PR #69 review finding (Important). Task 12 PolicyCompiler constructor takes *AttributeSchema but it is defined in Task 13. No T13→T12 dependency edge exists in the diagram. Decision: Move AttributeSchema type definition to Task 5 (core types) so it is available to both the compiler (Phase 7.2) and resolver (Phase 7.3) without cross-phase coupling. Fix: Add AttributeSchema definition to Task 5, remove from Task 13 initial definition, update Task 13 to reference Task 5's type.","acceptance_criteria":"- [ ] Task 5 defines AttributeSchema type\n- [ ] Task 12 can reference AttributeSchema without depending on Task 13\n- [ ] Task 13 references AttributeSchema from Task 5\n- [ ] No cross-phase dependency needed for AttributeSchema","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T18:39:19Z","created_by":"seanb4t","updated_at":"2026-02-07T19:18:44Z","closed_at":"2026-02-07T19:18:44Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.100","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.101","title":"I4: Task 34 references wrong file path for AttributeResolver","description":"PR #69 review finding (Important). Task 34 (General provider circuit breaker) lists files as internal/access/policy/resolver.go but the AttributeResolver is defined in Task 14 at internal/access/policy/attribute/resolver.go (note the attribute/ subdirectory). This is consistent with the spec package structure and Task 14 file listing. Fix: Change file paths to include attribute/ subdirectory.","acceptance_criteria":"- [ ] Task 34 file path is internal/access/policy/attribute/resolver.go\n- [ ] Task 34 test path is internal/access/policy/attribute/resolver_test.go","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T18:39:23Z","created_by":"seanb4t","updated_at":"2026-02-07T19:18:44Z","closed_at":"2026-02-07T19:18:44Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.101","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.102","title":"I5: StoredPolicy struct missing CreatedAt/UpdatedAt timestamps","description":"PR #69 review finding (Important). Task 7 StoredPolicy struct is missing CreatedAt and UpdatedAt fields, though the access_policies table schema (Task 1) includes created_at and updated_at TIMESTAMPTZ columns. These timestamps are needed for admin command display (policy show, policy list) and audit correlation. Fix: Add CreatedAt time.Time and UpdatedAt time.Time fields to StoredPolicy struct.","acceptance_criteria":"- [ ] StoredPolicy struct includes CreatedAt time.Time\n- [ ] StoredPolicy struct includes UpdatedAt time.Time","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T18:39:27Z","created_by":"seanb4t","updated_at":"2026-02-07T19:18:44Z","closed_at":"2026-02-07T19:18:44Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.102","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.103","title":"I6: policy test missing --json flag and builder attribute redaction","description":"PR #69 review finding (Important). Task 27 includes policy test but does not mention the --json flag or builder attribute redaction. Spec lines 2764, 2769-2810 specify both --json structured output and detailed attribute redaction rules for builders (subject attributes redacted when testing characters they don't own, resource attributes redacted for objects/locations they don't own). These are significant security features preventing information disclosure through the testing interface. Fix: Add acceptance criteria to Task 27 for --json flag support and builder attribute redaction rules.","acceptance_criteria":"- [ ] Task 27 includes --json flag for policy test\n- [ ] Task 27 includes builder attribute redaction rules\n- [ ] Redaction covers subject attributes for non-owned characters\n- [ ] Redaction covers resource attributes for non-owned objects/locations","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T18:39:33Z","created_by":"seanb4t","updated_at":"2026-02-07T19:18:44Z","closed_at":"2026-02-07T19:18:44Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.103","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.104","title":"I7: policy test --suite scenario file support missing","description":"PR #69 review finding (Important). Task 27 does not mention policy test --suite \u003cfile\u003e for batch scenario testing. Spec lines 2851-2870 define a SHOULD-level --suite mode that reads test scenarios from YAML. Important for spec requirement of '100% of seed policies tested before Phase 7.3 cutover' (line 3120). Fix: Add policy test --suite as acceptance criterion in Task 27 or create a separate task.","acceptance_criteria":"- [ ] Plan includes --suite \u003cfile\u003e batch scenario testing capability\n- [ ] YAML scenario file format documented\n- [ ] Supports comprehensive seed policy verification","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T18:39:37Z","created_by":"seanb4t","updated_at":"2026-02-07T19:18:44Z","closed_at":"2026-02-07T19:18:44Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.104","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.105","title":"I8: No task for lock/unlock in-game command handlers","description":"PR #69 review finding (Important). Task 25 covers lock expression parser and compiler. Tasks 26a-27 cover policy admin commands. But no task implements the actual lock \u003cresource\u003e/\u003caction\u003e = \u003cexpression\u003e and unlock \u003cresource\u003e/\u003caction\u003e in-game commands that players use. Spec lines 2393-2679 extensively describe these commands including resource target resolution, ownership verification via Evaluate(), rate limiting (50 per character), unlock semantics (action-specific and resource-wide), and the full command flow. Fix: Add a new task in Phase 7.5 for implementing lock and unlock command handlers.","acceptance_criteria":"- [ ] New task exists in Phase 7.5 for lock/unlock commands\n- [ ] Task covers resource target resolution\n- [ ] Task covers ownership verification via Evaluate()\n- [ ] Task covers rate limiting (50 locks per character)\n- [ ] Task covers unlock semantics (action-specific and resource-wide)\n- [ ] Mermaid dependency diagram updated to include new task","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T18:39:42Z","created_by":"seanb4t","updated_at":"2026-02-07T19:18:44Z","closed_at":"2026-02-07T19:18:44Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.105","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.106","title":"I11: Audit retention mixes partition-drop and row-delete semantics","description":"PR #69 review finding (Important). Task 19b says 'Detach partitions older than RetainDenials (90 days for denials, 7 days for allows)' but monthly partitions contain mixed effects. Cannot selectively drop allows from partitions also containing denials. Decision: Use 90-day retention for partition drops (the longer period). Run row-level DELETE for allow rows older than 7 days within still-attached partitions. Fix: Clarify retention strategy in Task 19b with this two-tier approach.","acceptance_criteria":"- [ ] Task 19b documents two-tier retention strategy\n- [ ] Partition drops use 90-day threshold (longer retention)\n- [ ] Row-level DELETE removes allow rows older than 7 days within active partitions\n- [ ] Spec tension between per-effect retention and monthly partitioning is documented","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T18:39:45Z","created_by":"seanb4t","updated_at":"2026-02-07T19:18:44Z","closed_at":"2026-02-07T19:18:44Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.106","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.107","title":"I9: AuditMode type mismatch - int iota vs string","description":"PR #69 review finding (Important). Task 19 defines AuditMode as int iota enum (AuditModeOff, AuditModeDenialsOnly, AuditModeAll). Spec lines 2198-2204 define AuditMode as string type with values 'off', 'denials_only', 'all'. The spec string type enables direct use in YAML configuration files without a custom marshaler. Fix: Change AuditMode to string type with string constants matching spec.","acceptance_criteria":"- [ ] AuditMode is type string, not int\n- [ ] Constants use string values: off, denials_only, all\n- [ ] Constant names match spec: AuditOff, AuditDenialsOnly, AuditAll","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T18:39:47Z","created_by":"seanb4t","updated_at":"2026-02-07T19:18:44Z","closed_at":"2026-02-07T19:18:44Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.107","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.108","title":"I12: lock tokens --verbose flag missing","description":"PR #69 review finding (Important). Task 33 covers lock tokens command but does not include the --verbose flag. Spec lines 2628-2638 specify a --verbose flag that shows the underlying DSL attribute path for debugging. Fix: Add --verbose flag to Task 33 acceptance criteria.","acceptance_criteria":"- [ ] Task 33 includes --verbose flag in acceptance criteria\n- [ ] --verbose shows underlying DSL attribute path per spec","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T18:39:49Z","created_by":"seanb4t","updated_at":"2026-02-07T19:18:45Z","closed_at":"2026-02-07T19:18:45Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.108","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.109","title":"I13: policy create should reject reserved prefixes seed: and lock:","description":"PR #69 review finding (Important). Task 26a does not explicitly mention that policy create MUST reject names starting with seed: and lock:. Spec lines 2537-2540 and 3043-3045 require policy create to reject reserved prefixes. Fix: Add acceptance criterion to Task 26a for reserved prefix rejection.","acceptance_criteria":"- [ ] Task 26a rejects policy names starting with seed:\n- [ ] Task 26a rejects policy names starting with lock:\n- [ ] Error message explains reserved prefix restriction","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T18:39:52Z","created_by":"seanb4t","updated_at":"2026-02-07T19:18:45Z","closed_at":"2026-02-07T19:18:45Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.109","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.11","title":"[I8] Limit admin privileges during degraded mode","description":"PR #65 review finding (Security). seed:admin-full-access grants unrestricted access. During degraded mode, admin bypass means zero constraints on compromised admin. Decision: merged with C5 - admin bypass removed entirely. Future consideration: split admin into scoped roles. Acceptance Criteria: (1) Degraded mode updated per C5 (2) Spec notes future scoped admin roles (3) All degraded-mode actions audited. Dependencies: blocked by C5.","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T20:21:09Z","created_by":"seanb4t","updated_at":"2026-02-06T20:55:46Z","closed_at":"2026-02-06T20:55:46Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.11","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.11","depends_on_id":"holomush-k5c3","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.110","title":"I10: LockTokenDef struct diverges from spec","description":"PR #69 review finding (Important). Task 13 defines LockTokenDef with fields Token, Description, AttrPath. Spec lines 2488-2498 defines it with Name, AttributePath, Type (LockTokenType enum: equality, membership, numeric). The plan is missing the Type field which is critical — it determines how the lock compiler generates DSL conditions (equality check vs membership check vs numeric comparison). Fix: Match spec struct including Type field and LockTokenType enum.","acceptance_criteria":"- [ ] LockTokenDef uses field names: Name, AttributePath, Type\n- [ ] LockTokenType enum defined with equality, membership, numeric values\n- [ ] Type field determines condition generation in lock compiler","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T18:39:54Z","created_by":"seanb4t","updated_at":"2026-02-07T19:18:45Z","closed_at":"2026-02-07T19:18:45Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.110","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.111","title":"S1: grammar_version ambiguity in Task 27","description":"PR #69 review finding (Suggestion). Task 27 says 'updates grammar_version field' and 'filter to grammar_version \u003c current_version'. Per spec line 967, grammar_version lives inside compiled_ast JSONB, not as a top-level column. Could mislead implementers. Fix: Clarify that grammar_version is within compiled_ast JSONB and use compiled_ast-\u003e\u003e'grammar_version' notation.","acceptance_criteria":"- [ ] Task 27 uses compiled_ast-\u003e\u003e'grammar_version' notation\n- [ ] Language clarifies grammar_version is inside JSONB, not a column","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T18:40:04Z","created_by":"seanb4t","updated_at":"2026-02-07T19:18:45Z","closed_at":"2026-02-07T19:18:45Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.111","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.112","title":"S2: Task 23b references Task 10 instead of Task 12","description":"PR #69 review finding (Suggestion). Task 23b says 'Use the DSL compiler from Task 10.' Task 10 is fuzz tests. The DSL parser is Task 9 and PolicyCompiler is Task 12. The --validate-seeds flag uses PolicyCompiler (Task 12). Fix: Change 'Task 10' to 'Task 12' in Task 23b.","acceptance_criteria":"- [ ] Task 23b references Task 12 (PolicyCompiler), not Task 10 (fuzz tests)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T18:40:08Z","created_by":"seanb4t","updated_at":"2026-02-07T19:18:45Z","closed_at":"2026-02-07T19:18:45Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.112","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.113","title":"S3: T23→T24 dependency over-constrained, relax to T17→T24","description":"PR #69 review finding (Suggestion). Lock token registry (Task 24) depends on bootstrap (Task 23) in diagram but lock tokens don't need seed policies. Decision: Relax to T17→T24 — lock tokens need the engine (T17) but not bootstrap (T23). This allows lock work to start earlier in parallel. Fix: Change Mermaid diagram edge from T23→T24 to T17→T24.","acceptance_criteria":"- [ ] Mermaid diagram shows T17 --\u003e T24 instead of T23 --\u003e T24\n- [ ] Task 24 description does not reference bootstrap dependency","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T18:40:12Z","created_by":"seanb4t","updated_at":"2026-02-07T19:18:45Z","closed_at":"2026-02-07T19:18:45Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.113","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.114","title":"S4: PartitionManager Stop/ctx.Done redundancy in Task 19b","description":"PR #69 review finding (Suggestion). Task 19b PartitionManager.Start() select-blocks on both pm.stopCh and ctx.Done(). Having both a stop channel and context cancellation is redundant. Standard Go pattern uses only context cancellation. Fix: Remove stopCh, use only ctx.Done() for shutdown signaling.","acceptance_criteria":"- [ ] PartitionManager.Start() uses only ctx.Done() for shutdown\n- [ ] No separate stopCh in PartitionManager code skeleton","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T18:40:16Z","created_by":"seanb4t","updated_at":"2026-02-07T19:18:45Z","closed_at":"2026-02-07T19:18:45Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.114","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.115","title":"S6: policy lint deferred but not documented as deferred","description":"PR #69 review finding (Suggestion). Task 9 tests for bare boolean attribute compile errors. Spec mentions policy lint --fix (line 848) as a migration tool. policy lint is listed under 'Future Commands (Deferred)' in the spec (line 3442). No plan task covers this, and the deferral is not explicitly acknowledged. Fix: Acknowledge policy lint is deferred per spec and note as future enhancement.","acceptance_criteria":"- [ ] Plan explicitly acknowledges policy lint as deferred per spec\n- [ ] Referenced in Deferred Features section if one exists","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T18:40:16Z","created_by":"seanb4t","updated_at":"2026-02-07T19:18:45Z","closed_at":"2026-02-07T19:18:45Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.115","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.116","title":"S5: ADR 0009 and ADR 0010 not mapped in traceability table","description":"PR #69 review finding (Suggestion). ADR traceability table maps ADRs 0011-0016 to tasks but omits ADR 0009 (Custom Go-Native ABAC Engine) and ADR 0010 (Cedar-Aligned Fail-Safe Type Semantics). ADR 0010 is particularly relevant to Task 11 (DSL evaluator). Fix: Add ADR 0009 → Task 17 and ADR 0010 → Task 11 to traceability table.","acceptance_criteria":"- [ ] Traceability table includes ADR 0009 → Task 17\n- [ ] Traceability table includes ADR 0010 → Task 11","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T18:40:20Z","created_by":"seanb4t","updated_at":"2026-02-07T19:18:45Z","closed_at":"2026-02-07T19:18:45Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.116","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.117","title":"S7: --force-seed-version=N noted but not tracked as deferred","description":"PR #69 review finding (Suggestion). Plan notes --force-seed-version=N as 'future enhancement' (diff line 2619). Spec (lines 3066-3074) describes this as MAY-level with emergency recovery SQL as alternative. Appropriately deferred but should be tracked. Fix: Include in a Deferred Features section.","acceptance_criteria":"- [ ] --force-seed-version=N tracked in Deferred Features section","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T18:40:20Z","created_by":"seanb4t","updated_at":"2026-02-07T19:18:46Z","closed_at":"2026-02-07T19:18:46Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.117","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.118","title":"S8: AuditConfig struct missing Mode field","description":"PR #69 review finding (Suggestion). Task 19b AuditConfig struct only has retention/purge fields. Spec AuditConfig (lines 2206-2211) also includes Mode AuditMode as a field. Fix: Either include Mode in AuditConfig or explicitly document that mode is configured separately in the Logger.","acceptance_criteria":"- [ ] AuditConfig includes Mode AuditMode field, OR\n- [ ] Plan explicitly documents Mode is configured separately in Logger","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T18:40:24Z","created_by":"seanb4t","updated_at":"2026-02-07T19:18:46Z","closed_at":"2026-02-07T19:18:46Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.118","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.119","title":"S9: Add Deferred Features section to plan","description":"PR #69 review finding (Suggestion). Plan has no section tracking deferred items. Several features are appropriately deferred (policy lint, --force-seed-version=N, web editor) but scattered across notes. A consolidated section improves discoverability. Fix: Add a 'Deferred Features' section listing all deferred items with spec references.","acceptance_criteria":"- [ ] Plan includes Deferred Features section\n- [ ] Lists policy lint with spec reference\n- [ ] Lists --force-seed-version=N with spec reference\n- [ ] Lists web-based policy editor as deferred","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T18:40:31Z","created_by":"seanb4t","updated_at":"2026-02-07T19:18:46Z","closed_at":"2026-02-07T19:18:46Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.119","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.120","title":"Fix circular dependency between policy and attribute packages","description":"Task 5 defines AttributeSchema stub in internal/access/policy/types.go. Task 13 redefines it with implementation in internal/access/policy/attribute/schema.go, which imports policy.AttrType. Task 12's PolicyCompiler in policy/compiler.go needs *AttributeSchema. This creates a Go circular import: policy -\u003e attribute -\u003e policy.\n\nResolution (decided): Extract AttributeSchema and AttrType into a shared types package at internal/access/policy/types/. Both policy and attribute packages import from this shared package, breaking the cycle.\n\nAffected tasks: Task 5, Task 12, Task 13, S1 (stub confusion)\nAffected files: internal/access/policy/types.go, internal/access/policy/attribute/schema.go, internal/access/policy/compiler.go","acceptance_criteria":"- [ ] AttributeSchema and AttrType moved to internal/access/policy/types/ package\n- [ ] Task 5 updated to define types in new package location\n- [ ] Task 13 updated to import from types package, not redefine struct\n- [ ] Task 12 updated to import AttributeSchema from types package\n- [ ] No circular import possible between policy and attribute packages\n- [ ] S1 (AttributeSchema stub confusion) resolved by this change","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T21:50:11Z","created_by":"seanb4t","updated_at":"2026-02-07T22:00:47Z","closed_at":"2026-02-07T22:00:47Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.120","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.121","title":"Fix structurally incomplete recursive CTE in Task 16b","description":"The recursive CTE for parent_location resolution in Task 16b only handles parent_type='object' (joining against objects table). Missing branches:\n1. parent_type='location' should return immediately as base case\n2. parent_type='character' needs join against characters table to get current location\n3. Current CTE only works for object-\u003eobject-\u003elocation chains, not character or direct location parents\n\nThe CTE anchor query gets parent_type/parent_id from entity_properties, which can be 'character', 'location', or 'object'. Only the object path has recursive branches.\n\nAffected files: docs/plans/2026-02-06-full-abac-implementation.md (Task 16b CTE SQL)","acceptance_criteria":"- [ ] CTE adds branch for parent_type='location' as immediate base case (return parent_id directly)\n- [ ] CTE adds branch for parent_type='character' joining characters table to resolve location\n- [ ] All three parent type paths tested: direct location, character-held, object containment chain\n- [ ] CTE marked as corrected (not just a sketch) in the plan","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T21:50:18Z","created_by":"seanb4t","updated_at":"2026-02-07T22:01:28Z","closed_at":"2026-02-07T22:01:28Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.121","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.122","title":"Fix wrong import path in Task 23 bootstrap code","description":"Task 23 bootstrap code imports 'github.com/holomush/holomush/internal/store' and references store.PolicyStore, store.StoredPolicy, store.IsNotFound. However, Task 7 defines PolicyStore and StoredPolicy in internal/access/policy/store/store.go. The internal/store package is the existing event store, not the policy store.\n\nAdditionally, store.IsNotFound() is referenced but never defined in Task 7's acceptance criteria or interface.\n\nAffected files: docs/plans/2026-02-06-full-abac-implementation.md (Task 23 bootstrap code, Task 7 acceptance criteria)","acceptance_criteria":"- [ ] Task 23 import changed to policystore 'github.com/holomush/holomush/internal/access/policy/store'\n- [ ] All store.* references in bootstrap code changed to policystore.*\n- [ ] IsNotFound helper added to Task 7 acceptance criteria\n- [ ] IsNotFound function defined in Task 7 policy store package","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T21:50:23Z","created_by":"seanb4t","updated_at":"2026-02-07T22:05:45Z","closed_at":"2026-02-07T22:05:45Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.122","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.123","title":"Add system bypass audit logging acceptance criterion to Task 17","description":"Task 17's engine short-circuits at step 1 for system bypass subjects, returning Decision{Allowed: true, Effect: SystemBypass} before reaching step 7 (audit logging). The spec (line 1686) requires system bypasses be logged in ALL audit modes (off, denials_only, all). No acceptance criterion ensures audit logging happens for early-return system bypasses.\n\nRisk: System bypass decisions would go unaudited, creating a blind spot in the audit trail for the most privileged operations.\n\nAffected files: docs/plans/2026-02-06-full-abac-implementation.md (Task 17 acceptance criteria)","acceptance_criteria":"- [ ] Task 17 acceptance criteria includes: System bypass decisions MUST be audited in ALL modes (including off), even though Evaluate() short-circuits at step 1\n- [ ] Task 17 engine implementation calls audit logger before returning from step 1\n- [ ] Test case added: system bypass subject with audit mode=off still produces audit entry","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T21:50:28Z","created_by":"seanb4t","updated_at":"2026-02-07T22:05:45Z","closed_at":"2026-02-07T22:05:45Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.123","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.124","title":"Fix incorrect Mermaid diagram dependency T7-\u003eT12","description":"The Mermaid dependency diagram shows T7 --\u003e T12, indicating PolicyCompiler (Task 12) depends on PolicyStore (Task 7). PolicyCompiler actually depends on parser (T9), evaluator (T11), and AttributeSchema (T5/T13). It does not need PolicyStore to compile.\n\nThe text compounds this at line 186: 'Phase 7.2 (Tasks 8-12) can start after Task 7 completes' -- but Tasks 8-11 have zero Phase 7.1 dependencies and can start immediately.\n\nAffected files: docs/plans/2026-02-06-full-abac-implementation.md (Mermaid diagram, parallel work text)","acceptance_criteria":"- [ ] T7 --\u003e T12 edge removed from Mermaid diagram\n- [ ] Parallel work text corrected to: Tasks 8-11 can start immediately (no Phase 7.1 dependency). Task 12 starts after Tasks 11 and 5 complete.\n- [ ] If T12 actually needs T7 for JSONB round-trip tests, document that explicitly in Task 12","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T21:50:59Z","created_by":"seanb4t","updated_at":"2026-02-07T22:07:06Z","closed_at":"2026-02-07T22:07:06Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.124","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.125","title":"Fix duplicate file creation in Tasks 25b and 33","description":"Task 25b lists 'Create: internal/command/handlers/lock.go' for lock/unlock command handlers. Task 33 also lists 'Create: internal/command/handlers/lock.go' for the lock tokens discovery command. Since Task 25b creates the file first, Task 33 should say Modify.\n\nAffected files: docs/plans/2026-02-06-full-abac-implementation.md (Task 33 Files section)","acceptance_criteria":"- [ ] Task 33 file list changed from Create to Modify for internal/command/handlers/lock.go\n- [ ] Task 33 test file similarly changed if applicable","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T21:51:04Z","created_by":"seanb4t","updated_at":"2026-02-07T22:16:34Z","closed_at":"2026-02-07T22:16:34Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.125","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.126","title":"Fix partition count inconsistency between Task 2 and Task 19b","description":"Task 2 SQL migration creates 3 partitions (current month + 2 future months). Task 19b createFuturePartitions loop runs 4 iterations (current month + 3 future months). Spec says 'Ensure at least 2 months of future partitions' (line 2306). These numbers are internally inconsistent.\n\nAffected files: docs/plans/2026-02-06-full-abac-implementation.md (Task 2 SQL, Task 19b code)","acceptance_criteria":"- [ ] Task 2 and Task 19b aligned to same partition count\n- [ ] Both use current month + 2 future months (matching spec minimum)\n- [ ] Task 19b loop changed from i \u003c 4 to i \u003c 3, OR Task 2 updated to create 4 partitions with updated acceptance criteria","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T21:51:09Z","created_by":"seanb4t","updated_at":"2026-02-07T22:07:38Z","closed_at":"2026-02-07T22:07:38Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.126","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.127","title":"Fix LockTokenDef vs TokenDef naming and field inconsistency","description":"Task 13 defines LockTokenDef in attribute/provider.go with fields: Name, Description, AttributePath, Type. Task 24 defines TokenDef in lock/registry.go with fields: Name, Namespace, Description, AttributePath, Type, ValueType. These are overlapping types with different names and different field sets. AttributeProvider.LockTokens() returns []LockTokenDef but LockTokenRegistry stores TokenDef. No documented mapping between them.\n\nAffected files: docs/plans/2026-02-06-full-abac-implementation.md (Task 13, Task 24)","acceptance_criteria":"- [ ] Either unified to one type throughout, or mapping clearly documented\n- [ ] If two types kept, TokenDef embeds or wraps LockTokenDef with additional fields (Namespace, ValueType)\n- [ ] Conversion path from LockTokenDef to TokenDef documented in Task 24","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T21:51:15Z","created_by":"seanb4t","updated_at":"2026-02-07T22:16:34Z","closed_at":"2026-02-07T22:16:34Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.127","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.128","title":"Remove confusing AttributeSchema stub from Task 5","description":"Task 5 defines AttributeSchema as an empty struct with comment 'Implementation details in Task 13'. This stub compiles but provides no functionality. Since C1 (circular dependency) is being resolved by extracting to a shared types package, the stub in Task 5 serves no purpose and may confuse implementers.\n\nRelated to: circular dependency fix (C1) which moves AttributeSchema to internal/access/policy/types/.\n\nAffected files: docs/plans/2026-02-06-full-abac-implementation.md (Task 5)","acceptance_criteria":"- [ ] AttributeSchema stub removed from Task 5 OR replaced with import from types package\n- [ ] Task 5 acceptance criteria updated to reflect types package location\n- [ ] Cross-reference to C1 resolution noted","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T21:51:20Z","created_by":"seanb4t","updated_at":"2026-02-07T22:21:35Z","closed_at":"2026-02-07T22:21:35Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.128","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.128","depends_on_id":"holomush-5k1.120","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.129","title":"Resolve EntityProperty ULID vs StoredPolicy string ID inconsistency","description":"Task 4 EntityProperty.ID uses ulid.ULID type, while Task 7 StoredPolicy.ID uses string type. Both map to TEXT PRIMARY KEY in SQL. The PropertyRepository interface uses ulid.ULID for Get/Delete parameters. This inconsistency will confuse implementers about the project convention for TEXT PK columns.\n\nNeed to check existing codebase pattern (e.g., location_repo.go) for precedent and standardize.\n\nAffected files: docs/plans/2026-02-06-full-abac-implementation.md (Task 4 EntityProperty struct, Task 7 StoredPolicy struct)","acceptance_criteria":"- [ ] Consistent ID type chosen (either ulid.ULID or string) with documented rationale\n- [ ] Existing repo pattern (location_repo.go) checked for precedent\n- [ ] Both Task 4 and Task 7 use the same pattern\n- [ ] If ulid.ULID chosen, ULID-to-TEXT conversion helpers documented","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T21:51:21Z","created_by":"seanb4t","updated_at":"2026-02-07T22:16:34Z","closed_at":"2026-02-07T22:16:34Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.129","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.13","title":"[I9] Add synchronous audit writes for denial events","description":"PR #65 review finding (Security). Async audit channel drops entries when full. Attacker can flood evaluations to erase evidence. Decision: denials MUST be written synchronously (blocking Evaluate return). Allows remain async. Acceptance Criteria: (1) Spec distinguishes sync denials vs async allows (2) Documents latency impact (3) WAL fallback for sync failures specified (4) Backpressure mechanism documented. Dependencies: audit logging section.","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T20:21:15Z","created_by":"seanb4t","updated_at":"2026-02-06T20:56:33Z","closed_at":"2026-02-06T20:56:33Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.13","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.13","depends_on_id":"holomush-o4lt","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.130","title":"Fix incorrect spec line references in plan (4 locations)","description":"Four spec line references in the plan point to wrong locations:\n\n1. Task 2 (line ~315): Claims PK deviation at 'line 2167' -- actual id TEXT PRIMARY KEY definition is at spec line 2015. Line 2167 is about Effect enum serialization.\n2. Task 17 (line ~1797): Test list references 'spec lines 148-160' -- should be lines 1642-1690 (detailed Evaluation Algorithm section, not high-level overview).\n3. Task 23 (line ~2485): Says 'Bootstrap Sequence (lines 2916-2992)' -- actual Bootstrap Sequence heading is at line 3007. Lines 2916-2928 are the Replacing Static Roles introduction.\n4. Task 31 (line ~3290): Says 'already added to Task 19' for abac_degraded_mode metric -- actually defined in Task 20 (Prometheus metrics).\n\nAffected files: docs/plans/2026-02-06-full-abac-implementation.md (Tasks 2, 17, 23, 31)","acceptance_criteria":"- [ ] Task 2: line 2167 changed to line 2015 (both occurrences)\n- [ ] Task 17: spec lines 148-160 changed to spec Evaluation Algorithm, lines 1642-1690\n- [ ] Task 23: Bootstrap Sequence lines 2916-2992 changed to lines 3007-3074\n- [ ] Task 31: already added to Task 19 changed to already added to Task 20","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T21:51:27Z","created_by":"seanb4t","updated_at":"2026-02-07T22:16:34Z","closed_at":"2026-02-07T22:16:34Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.130","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.131","title":"Consider splitting oversized Task 27 into sub-tasks","description":"Task 27 combines 11+ distinct admin commands: policy test (with --verbose, --json, --suite variants), policy validate, policy reload, policy attributes, policy audit, policy seed verify, policy seed status, policy clear-degraded-mode, policy recompile-all, policy recompile, policy repair, policy list --old-grammar. This is significantly larger than other tasks and will produce a very large commit.\n\nRecommendation: Split into 2-3 sub-tasks for manageable review and incremental delivery:\n- 27a: test/validate/reload (core debugging commands)\n- 27b: attributes/audit (observability commands)\n- 27c: seed/recompile/repair (maintenance commands)\n\nAffected files: docs/plans/2026-02-06-full-abac-implementation.md (Task 27)","acceptance_criteria":"- [ ] Task 27 split into 2-3 sub-tasks OR explicit justification for keeping as single task\n- [ ] If split, dependencies between sub-tasks documented\n- [ ] Each sub-task has its own acceptance criteria","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T21:51:30Z","created_by":"seanb4t","updated_at":"2026-02-07T22:21:35Z","closed_at":"2026-02-07T22:21:35Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.131","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.132","title":"Add restricted visibility implementation task to plan","description":"No task covers restricted visibility (Layer 1 metadata check with visible_to/excluded_from lists) or system visibility. The spec defines 5 visibility levels: public, private, restricted, system, admin. Seed policies cover public, private, and admin. The restricted visibility uses Layer 1 metadata checks (spec lines 1191-1223) that happen before ABAC policy evaluation. System visibility is accessible only via system bypass.\n\nResolution (decided): Add a new task to the plan implementing Layer 1 restricted visibility metadata checks. This should be placed in Phase 7.3 (after PropertyProvider Task 16b which resolves property attributes).\n\nAffected files: docs/plans/2026-02-06-full-abac-implementation.md (new task needed)","acceptance_criteria":"- [ ] New task added to plan for Layer 1 restricted visibility metadata check implementation\n- [ ] Task placed in Phase 7.3 with dependency on Task 16b (PropertyProvider)\n- [ ] Acceptance criteria include: restricted checks visible_to and excluded_from lists before ABAC evaluation\n- [ ] System visibility documented as accessible only via system bypass (note in Task 22)\n- [ ] Mermaid diagram updated with new task dependency","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T21:51:32Z","created_by":"seanb4t","updated_at":"2026-02-07T22:16:35Z","closed_at":"2026-02-07T22:16:35Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.132","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.133","title":"Add note about hardcoded partition dates in Task 2 migration","description":"Task 2 SQL migration creates partitions with hardcoded dates (2026_02, 2026_03, 2026_04). If the migration runs at a different time than planned, these partitions may already be in the past. The plan notes migration number collisions (line 196) but not partition date staleness.\n\nAffected files: docs/plans/2026-02-06-full-abac-implementation.md (Task 2 SQL migration)","acceptance_criteria":"- [ ] Note added to Task 2 that partition dates must be updated to match actual deployment timeframe\n- [ ] OR migration changed to create partitions dynamically in Go code rather than static SQL","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T21:51:35Z","created_by":"seanb4t","updated_at":"2026-02-07T22:21:35Z","closed_at":"2026-02-07T22:21:35Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.133","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.134","title":"Clarify forbid test case is not a seed policy in Task 9","description":"Task 9 parser test list includes a catch-all 'forbid(principal, action, resource);' alongside the 14 seed policies. The heading says '14 seed policies plus catch-all forbid test case' which is adequate but could be more explicit. Since the plan elsewhere correctly states default deny is handled by EffectDefaultDeny (not an explicit forbid policy), the forbid in the test list could confuse implementers into thinking it should be a seed policy.\n\nAffected files: docs/plans/2026-02-06-full-abac-implementation.md (Task 9 parser test list)","acceptance_criteria":"- [ ] Comment or separator added in Task 9 test list clearly marking the forbid as parser-test-only, not a seed policy\n- [ ] Cross-reference to Task 22 note about EffectDefaultDeny providing default deny behavior","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T21:51:40Z","created_by":"seanb4t","updated_at":"2026-02-07T22:21:35Z","closed_at":"2026-02-07T22:21:35Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.134","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.135","title":"Add missing restricted/system visibility explanation note to Task 22","description":"Task 22 defines 14 seed policies but does not explain why restricted and system visibility levels have no seed policies. This could confuse implementers into thinking they were forgotten.\n\nRestricted visibility uses visible_to/excluded_from metadata checks at Layer 1 (pre-ABAC). System visibility is accessible only via the system subject bypass. Neither needs a seed policy.\n\nAffected files: docs/plans/2026-02-06-full-abac-implementation.md (Task 22)","acceptance_criteria":"- [ ] Note added to Task 22 explaining: restricted uses visible_to/excluded_from metadata checks (Layer 1, pre-ABAC) and does not need a seed policy\n- [ ] Note added explaining: system visibility is accessible only via system bypass and does not need a seed policy\n- [ ] Note references the new restricted visibility task (from sibling bead)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T21:51:41Z","created_by":"seanb4t","updated_at":"2026-02-07T22:21:35Z","closed_at":"2026-02-07T22:21:35Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.135","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.135","depends_on_id":"holomush-5k1.132","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.136","title":"Add elevation note for sync denial audit requirement","description":"Task 19 treats synchronous denial audit writes as a hard requirement: 'Sync write for denials: deny and default_deny events written synchronously to PostgreSQL before Evaluate() returns'. However, the spec (line 2238) uses SHOULD: 'Denial events (deny and default_deny) SHOULD be written synchronously.' This is a deliberate strengthening that adds ~1-2ms latency to every denial but should be documented as intentional.\n\nAffected files: docs/plans/2026-02-06-full-abac-implementation.md (Task 19)","acceptance_criteria":"- [ ] Note added to Task 19: Elevated from SHOULD (spec line 2238) to MUST because denial audit integrity is critical for security forensics\n- [ ] Latency impact (~1-2ms per denial) acknowledged in the note","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T21:51:46Z","created_by":"seanb4t","updated_at":"2026-02-07T22:21:36Z","closed_at":"2026-02-07T22:21:36Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.136","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.137","title":"Fix duplicate Task 16b naming collision in ABAC plan","description":"Two different tasks share the identifier 'Task 16b' in the ABAC implementation plan:\n- ~line 1772: 'PropertyProvider with recursive CTE'\n- ~line 1946: 'Layer 1 restricted visibility metadata checks'\n\nThe second Task 16b is missing from the Mermaid dependency diagram entirely.\n\n**Fix:** Rename the visibility task (e.g., Task 16c or Task 17b). Add to Mermaid diagram with correct dependency edges.\n\n**File:** docs/plans/2026-02-06-full-abac-implementation.md (branch: feat/epic7-abac-plan)\n**Spec:** docs/specs/2026-02-05-full-abac-design.md","acceptance_criteria":"- [ ] No duplicate task identifiers in plan\n- [ ] Renamed task appears in Mermaid dependency diagram\n- [ ] All cross-references to Task 16b updated to disambiguate\n- [ ] ADR 0015 reference updated (see related finding)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T23:00:49Z","created_by":"seanb4t","updated_at":"2026-02-07T23:17:02Z","closed_at":"2026-02-07T23:17:02Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.137","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.138","title":"Fix StoredPolicy.Effect type mismatch in Task 7","description":"Task 7 acceptance criteria state StoredPolicy.Effect uses PolicyEffect (permit/forbid), but the code sample uses policy.Effect (allow/deny/default_deny/system_bypass — the engine decision type, not the policy declaration type).\n\nPolicyEffect represents what a policy declares (permit or forbid). The engine Decision type represents the outcome after evaluation. These are distinct concepts and must not be conflated.\n\n**Fix:** Change code sample to 'Effect PolicyEffect' matching the acceptance criteria.\n\n**File:** docs/plans/2026-02-06-full-abac-implementation.md (branch: feat/epic7-abac-plan)\n**Section:** Task 7 code sample","acceptance_criteria":"- [ ] Code sample in Task 7 uses PolicyEffect (not engine Decision type)\n- [ ] PolicyEffect type clearly distinguishes permit/forbid from engine allow/deny\n- [ ] Acceptance criteria and code sample are consistent","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T23:00:57Z","created_by":"seanb4t","updated_at":"2026-02-07T23:18:17Z","closed_at":"2026-02-07T23:18:17Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.138","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.139","title":"Fix illegal method definition on external type in Task 13","description":"Task 13 code sample defines methods on a type from another package:\n\n```go\nfunc (s *types.AttributeSchema) Register(...) error {\n```\n\nGo does not allow defining methods on types from external packages — this will not compile.\n\n**Fix:** Either:\n1. Define the Register method in the types package (Task 5/6), or\n2. Wrap types.AttributeSchema in a local struct in the provider package\n\n**File:** docs/plans/2026-02-06-full-abac-implementation.md (branch: feat/epic7-abac-plan)\n**Section:** Task 13 code sample","acceptance_criteria":"- [ ] No methods defined on types from external packages in code samples\n- [ ] Code sample compiles (method receiver is local type)\n- [ ] Approach documented: wrap in local struct OR move method to types package","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T23:01:05Z","created_by":"seanb4t","updated_at":"2026-02-07T23:18:17Z","closed_at":"2026-02-07T23:18:17Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.139","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.14","title":"[M2] Add missing session error code constants","description":"PR #65 review finding (Documentation). Error code constants list (lines 357-364) missing ErrCodeSessionStoreError and ErrCodeSessionNoCharacter referenced in session resolution (lines 314-329). Acceptance Criteria: all session error codes listed in constants section. Dependencies: session resolution section.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T20:21:22Z","created_by":"seanb4t","updated_at":"2026-02-06T21:00:31Z","closed_at":"2026-02-06T21:00:31Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.14","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.140","title":"Align lock policy naming with spec or document deviation","description":"Spec (line 92, 2413) defines lock token format as lock:\u003cresource_ulid\u003e:\u003caction\u003e. Plan (Task 25b) uses lock:\u003ccharacter_id\u003e:\u003cresource_id\u003e:\u003caction\u003e — adding character_id to make tokens character-specific.\n\nThe plan's format may be intentionally different (character-scoped locks prevent one character's lock from affecting another), but this deviation is undocumented.\n\n**Decision:** Align with spec format. Investigate why the plan deviated — if the character-scoped format has merit, update the spec instead.\n\n**File:** docs/plans/2026-02-06-full-abac-implementation.md (branch: feat/epic7-abac-plan)\n**Spec:** docs/specs/2026-02-05-full-abac-design.md (lines 92, 2413)","acceptance_criteria":"- [ ] Lock token format in plan matches spec, OR\n- [ ] Deviation is documented in Spec Deviations section with rationale\n- [ ] Rationale explains why character-scoped format was chosen (if kept)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T23:01:17Z","created_by":"seanb4t","updated_at":"2026-02-07T23:22:17Z","closed_at":"2026-02-07T23:22:17Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.140","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.141","title":"Consolidate Task 5/6 — create types in final package from start","description":"Task 5 creates AttributeSchema/AttrType in policy/types.go, then Task 6 immediately moves them to policy/types/types.go (a subpackage). This is wasted effort.\n\n**Fix:** Create types directly in policy/types/ subpackage from the start in Task 5. Update Task 6 to skip the extraction step.\n\n**File:** docs/plans/2026-02-06-full-abac-implementation.md (branch: feat/epic7-abac-plan)\n**Sections:** Task 5, Task 6","acceptance_criteria":"- [ ] Task 5 creates types directly in policy/types/ subpackage\n- [ ] Task 6 does not include a move/extract step for types already in correct location\n- [ ] No wasted intermediate file creation","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T23:01:25Z","created_by":"seanb4t","updated_at":"2026-02-07T23:22:17Z","closed_at":"2026-02-07T23:22:17Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.141","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.142","title":"Relax parallel work restrictions — Tasks 8-11 independent of Task 7","description":"Plan states 'Phase 7.2 (Tasks 8-12) can start after Task 7' but only Task 12 actually depends on Task 7. Tasks 8-11 can start independently, even in parallel with Phase 7.1.\n\n**Fix:** Update parallel work guidance to reflect true dependencies. Tasks 8-11 can start immediately or in parallel with 7.1 tasks.\n\n**File:** docs/plans/2026-02-06-full-abac-implementation.md (branch: feat/epic7-abac-plan)\n**Section:** Parallel work / Phase 7.2 introduction","acceptance_criteria":"- [ ] Parallel work guidance reflects actual dependency graph\n- [ ] Tasks 8-11 not blocked by Task 7 in prose or diagram\n- [ ] Only Task 12 depends on Task 7","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T23:01:33Z","created_by":"seanb4t","updated_at":"2026-02-07T23:22:17Z","closed_at":"2026-02-07T23:22:17Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.142","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.143","title":"Add missing T23→T28 dependency edge in Mermaid diagram","description":"Bootstrap (T23) must complete before migration (T28) can run, but the Mermaid diagram only shows T17→T28. The T23→T28 edge is missing from the critical path.\n\n**Fix:** Add T23→T28 edge to the Mermaid dependency diagram.\n\n**File:** docs/plans/2026-02-06-full-abac-implementation.md (branch: feat/epic7-abac-plan)\n**Section:** Mermaid dependency diagram, critical path analysis","acceptance_criteria":"- [ ] T23→T28 edge present in Mermaid diagram\n- [ ] Critical path analysis updated to reflect this dependency","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T23:01:40Z","created_by":"seanb4t","updated_at":"2026-02-07T23:23:48Z","closed_at":"2026-02-07T23:23:48Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.143","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.144","title":"Fix Task 33 file operation: 'Create' should be 'Modify' for lock.go","description":"Both Task 33 and Task 25b list 'Create: internal/command/handlers/lock.go'. Task 25b creates it first; Task 33 modifies it.\n\n**Fix:** Change Task 33's file operation from 'Create' to 'Modify' for internal/command/handlers/lock.go.\n\n**File:** docs/plans/2026-02-06-full-abac-implementation.md (branch: feat/epic7-abac-plan)\n**Section:** Task 33 file list","acceptance_criteria":"- [ ] Task 33 lists lock.go as 'Modify' not 'Create'\n- [ ] No duplicate 'Create' operations for the same file across tasks","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T23:01:42Z","created_by":"seanb4t","updated_at":"2026-02-07T23:22:17Z","closed_at":"2026-02-07T23:22:17Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.144","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.145","title":"Track metric label deviation: source vs name in Spec Deviations","description":"Spec line 1877 uses metric labels {name, effect}. Plan uses {source, effect} — a good cardinality fix (name could have high cardinality). However, this intentional deviation is not tracked in the Spec Deviations section.\n\n**Fix:** Add entry to Spec Deviations section documenting the label rename from 'name' to 'source' with cardinality rationale.\n\n**File:** docs/plans/2026-02-06-full-abac-implementation.md (branch: feat/epic7-abac-plan)\n**Section:** Spec Deviations","acceptance_criteria":"- [ ] Spec Deviations section includes metric label rename\n- [ ] Rationale explains cardinality improvement\n- [ ] Both spec and plan label names documented","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T23:01:45Z","created_by":"seanb4t","updated_at":"2026-02-07T23:27:36Z","closed_at":"2026-02-07T23:27:36Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.145","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.146","title":"Acknowledge both circuit breaker parameter sets from spec","description":"Task 34 follows the MUST-level budget-utilization circuit breaker params (spec lines 1830-1846) but does not acknowledge the SHOULD-level simpler version (spec lines 1544-1548).\n\n**Fix:** Add clarifying note in Task 34 acknowledging both parameter sets and explaining why the MUST-level version was chosen.\n\n**File:** docs/plans/2026-02-06-full-abac-implementation.md (branch: feat/epic7-abac-plan)\n**Section:** Task 34","acceptance_criteria":"- [ ] Task 34 references both spec parameter sets (MUST and SHOULD level)\n- [ ] Clarifying note explains which was chosen and why\n- [ ] No spec coverage gap","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T23:01:50Z","created_by":"seanb4t","updated_at":"2026-02-07T23:27:36Z","closed_at":"2026-02-07T23:27:36Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.146","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.147","title":"Fix Task 24 cross-reference: LockTokenDef is from Task 13, not Task 12","description":"Task 24 references LockTokenDef as 'from Task 12', but LockTokenDef is defined in Task 13 (attribute/provider.go).\n\n**Fix:** Update the cross-reference in Task 24 to point to Task 13.\n\n**File:** docs/plans/2026-02-06-full-abac-implementation.md (branch: feat/epic7-abac-plan)\n**Section:** Task 24","acceptance_criteria":"- [ ] Task 24 correctly references Task 13 for LockTokenDef\n- [ ] No other incorrect cross-references to Task 12 for this type","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T23:01:51Z","created_by":"seanb4t","updated_at":"2026-02-07T23:22:18Z","closed_at":"2026-02-07T23:22:18Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.147","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.148","title":"Add missing abac_property_provider_circuit_breaker_trips_total metric","description":"Spec line 1283 requires a PropertyProvider-specific circuit breaker metric (abac_property_provider_circuit_breaker_trips_total). Task 20 only lists the general circuit breaker metric.\n\n**Fix:** Add the PropertyProvider-specific circuit breaker metric to Task 20's metric list.\n\n**File:** docs/plans/2026-02-06-full-abac-implementation.md (branch: feat/epic7-abac-plan)\n**Section:** Task 20 metrics","acceptance_criteria":"- [ ] abac_property_provider_circuit_breaker_trips_total metric listed in Task 20\n- [ ] Metric matches spec definition (line 1283)\n- [ ] Metric included in acceptance criteria for Task 20","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T23:01:54Z","created_by":"seanb4t","updated_at":"2026-02-07T23:27:37Z","closed_at":"2026-02-07T23:27:37Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.148","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.149","title":"Make policy test --suite a hard requirement (resolve RFC2119 ambiguity)","description":"The policy test --suite feature mixes SHOULD-level RFC2119 qualifiers into acceptance criteria, creating ambiguity about whether the task is complete without it.\n\n**Decision:** Make --suite a hard MUST-level requirement. Remove SHOULD qualifiers from acceptance criteria items.\n\n**File:** docs/plans/2026-02-06-full-abac-implementation.md (branch: feat/epic7-abac-plan)\n**Section:** policy test task acceptance criteria","acceptance_criteria":"- [ ] All acceptance criteria for policy test --suite use MUST (not SHOULD)\n- [ ] No RFC2119 ambiguity in task completion criteria\n- [ ] --suite is a required feature, not optional","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T23:01:59Z","created_by":"seanb4t","updated_at":"2026-02-07T23:27:37Z","closed_at":"2026-02-07T23:27:37Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.149","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.15","title":"[I10] Specify migration testing requirements for direct replacement","description":"PR #65 review finding (Security). Direct replacement of ~29 call sites with no shadow mode risks platform-wide auth failure from seed policy bugs. Acceptance Criteria: (1) Spec requires integration test suite for all seed policies (2) Each seed policy has 3 test scenarios: allowed, denied, edge case (3) Migration acceptance criteria include coverage requirements. Dependencies: ADR 0014, seed policies section.","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T20:21:23Z","created_by":"seanb4t","updated_at":"2026-02-06T20:57:25Z","closed_at":"2026-02-06T20:57:25Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.15","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.150","title":"Add missing Mermaid dependency edges for T26b, T25b, T31-T34","description":"Several tasks have missing dependency edges in the Mermaid diagram:\n\n- T26b has no edges (should depend on T26a and T7)\n- T25b missing cross-phase edge to T17 (ownership verification)\n- T31, T32, T33, T34 are disconnected nodes:\n  - T31 should depend on T17\n  - T34 should depend on T14\n  - T33 should depend on T24\n\n**Note:** Depends on finding 1 (duplicate Task 16b rename) being resolved first, since the renamed task also needs diagram edges.\n\n**File:** docs/plans/2026-02-06-full-abac-implementation.md (branch: feat/epic7-abac-plan)\n**Section:** Mermaid dependency diagram","acceptance_criteria":"- [ ] T26b has edges to T26a and T7\n- [ ] T25b has cross-phase edge to T17\n- [ ] T31 depends on T17\n- [ ] T34 depends on T14\n- [ ] T33 depends on T24\n- [ ] No disconnected nodes in diagram","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T23:01:59Z","created_by":"seanb4t","updated_at":"2026-02-07T23:23:48Z","closed_at":"2026-02-07T23:23:48Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.150","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.150","depends_on_id":"holomush-5k1.137","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.151","title":"Track SHOULD→MUST elevation for sync denial audit in Spec Deviations","description":"The plan elevates sync denial auditing from SHOULD-level (in spec) to MUST-level. This is well-justified but should be tracked in the Spec Deviations section alongside Task 2's PK deviation.\n\n**Fix:** Add entry to Spec Deviations section documenting the elevation with justification.\n\n**File:** docs/plans/2026-02-06-full-abac-implementation.md (branch: feat/epic7-abac-plan)\n**Section:** Spec Deviations","acceptance_criteria":"- [ ] Spec Deviations section includes SHOULD→MUST elevation for sync denial audit\n- [ ] Justification documented\n- [ ] Consistent with other deviation tracking (e.g., Task 2 PK deviation)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T23:02:03Z","created_by":"seanb4t","updated_at":"2026-02-07T23:27:37Z","closed_at":"2026-02-07T23:27:37Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.151","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.152","title":"Add re-entrance guard integration tests to Task 30","description":"Spec lines 3328-3331 explicitly require integration tests for the re-entrance guard. Task 30's test skeleton omits these tests.\n\n**Fix:** Add re-entrance guard integration test cases to Task 30's test skeleton.\n\n**File:** docs/plans/2026-02-06-full-abac-implementation.md (branch: feat/epic7-abac-plan)\n**Section:** Task 30 test skeleton","acceptance_criteria":"- [ ] Re-entrance guard integration tests included in Task 30\n- [ ] Tests cover spec lines 3328-3331 requirements\n- [ ] Test skeleton includes re-entrance scenarios","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T23:02:04Z","created_by":"seanb4t","updated_at":"2026-02-07T23:27:37Z","closed_at":"2026-02-07T23:27:37Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.152","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.153","title":"Add policy import command to Deferred Features table","description":"Spec line 3438 describes 'policy import \u003cfile\u003e' as a future command. This is not listed in the plan's Deferred Features table.\n\n**Fix:** Add 'policy import \u003cfile\u003e' to the Deferred Features table with spec reference.\n\n**File:** docs/plans/2026-02-06-full-abac-implementation.md (branch: feat/epic7-abac-plan)\n**Section:** Deferred Features table","acceptance_criteria":"- [ ] policy import \u003cfile\u003e listed in Deferred Features table\n- [ ] Spec line 3438 referenced\n- [ ] Description matches spec's intent","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T23:02:13Z","created_by":"seanb4t","updated_at":"2026-02-07T23:27:37Z","closed_at":"2026-02-07T23:27:37Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.153","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.154","title":"Update ADR 0015 reference to disambiguate Task 16a/16b/16c","description":"ADR 0015 references 'Tasks 4, 16' but Task 16 is split into 16a/16b (and 16b is duplicated — see duplicate Task 16b finding). After the rename, the ADR reference needs updating.\n\n**Depends on:** Duplicate Task 16b rename being resolved first.\n\n**File:** docs/plans/2026-02-06-full-abac-implementation.md (branch: feat/epic7-abac-plan)\n**Section:** ADR traceability table","acceptance_criteria":"- [ ] ADR 0015 references specific task IDs (16a, 16b, 16c etc.) not ambiguous '16'\n- [ ] References match renamed tasks from duplicate 16b fix","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T23:02:21Z","created_by":"seanb4t","updated_at":"2026-02-07T23:23:49Z","closed_at":"2026-02-07T23:23:49Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.154","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.154","depends_on_id":"holomush-5k1.137","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.155","title":"Add AccessRequest spec reference to Task 6","description":"Task 6's spec reference should include the AccessRequest section (spec lines 283-325), not just Session Subject Resolution. The AccessRequest struct is central to Task 6's work.\n\n**Fix:** Add spec lines 283-325 (AccessRequest section) to Task 6's spec reference.\n\n**File:** docs/plans/2026-02-06-full-abac-implementation.md (branch: feat/epic7-abac-plan)\n**Section:** Task 6 spec reference","acceptance_criteria":"- [ ] Task 6 references AccessRequest section (lines 283-325)\n- [ ] Spec references are complete for Task 6 scope","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T23:02:27Z","created_by":"seanb4t","updated_at":"2026-02-07T23:29:07Z","closed_at":"2026-02-07T23:29:07Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.155","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.156","title":"Fix misleading test name: skips allows in off mode","description":"Integration test 'It(\"skips allows in off mode\")' is misleading — off mode skips denials too (only system bypasses are logged). The test name suggests only allows are skipped.\n\n**Fix:** Rename to something like 'It(\"only logs system bypasses in off mode\")' or similar that reflects actual behavior.\n\n**File:** docs/plans/2026-02-06-full-abac-implementation.md (branch: feat/epic7-abac-plan)\n**Section:** Integration test skeleton","acceptance_criteria":"- [ ] Test name accurately reflects off-mode behavior\n- [ ] Name conveys that both allows and denials are skipped, only system bypasses logged","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T23:02:35Z","created_by":"seanb4t","updated_at":"2026-02-07T23:29:07Z","closed_at":"2026-02-07T23:29:07Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.156","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.157","title":"Use dynamic partition date generation in Task 2 migration","description":"Task 2 migration uses hardcoded partition dates (2026_02/03/04). These will be wrong if deployment timing changes.\n\n**Decision:** Use dynamic Go migration that generates partition dates programmatically based on current date.\n\n**File:** docs/plans/2026-02-06-full-abac-implementation.md (branch: feat/epic7-abac-plan)\n**Section:** Task 2 migration code","acceptance_criteria":"- [ ] Migration generates partition dates dynamically in Go\n- [ ] No hardcoded year/month values in partition creation\n- [ ] Migration is deployment-time-independent","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T23:02:43Z","created_by":"seanb4t","updated_at":"2026-02-07T23:29:07Z","closed_at":"2026-02-07T23:29:07Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.157","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.158","title":"Fix type mismatch in Task 14 bootstrap code (StoredPolicy.Effect vs CompiledPolicy.Effect)","description":"## Issue\nTask 14 seed policy bootstrap code uses StoredPolicy.Effect (type PolicyEffect) but CompiledPolicy.Effect expects policy.Effect. These are different types and the code sketch won't compile as written.\n\n## Decision\nAlign the bootstrap code to use policy.Effect consistently. No backwards compatibility concerns.\n\n## Acceptance Criteria\n- [ ] Bootstrap code in Task 14 uses correct type (policy.Effect) for CompiledPolicy.Effect\n- [ ] All type references in seed policy code sketches are internally consistent\n- [ ] Code sketch compiles without type errors\n\n## Dependencies\n- File overlap: docs/plans/2026-02-06-full-abac-implementation.md (Task 14 section)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T01:13:09Z","created_by":"seanb4t","updated_at":"2026-02-08T01:26:49Z","closed_at":"2026-02-08T01:26:49Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.158","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.159","title":"Fix wrong spec line reference for audit log PK deviation","description":"## Issue\nSpec Deviations table cites line 2167 for the access_audit_log PK change, but the audit log schema is around line 2015 in the design spec. Incorrect line references will mislead implementers.\n\n## Decision\nCorrect the spec line reference to ~2015 (actual location of audit log schema in docs/specs/2026-02-05-full-abac-design.md).\n\n## Acceptance Criteria\n- [ ] Spec Deviations table row for \"Primary key uses composite PK\" references correct spec line (~2015)\n- [ ] First column (Spec Reference) contains \"Spec line 2015\" not \"Task 2\"\n\n## Dependencies\n- File overlap: docs/plans/2026-02-06-full-abac-implementation.md (Spec Deviations table)\n- Conceptual overlap: finding-14 (same table row has duplicate Task 2 column)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T01:13:17Z","created_by":"seanb4t","updated_at":"2026-02-08T01:39:22Z","closed_at":"2026-02-08T01:39:22Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.159","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.159","depends_on_id":"holomush-5k1.171","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.16","title":"[I1] Standardize call site count to ~29 across all documents","description":"PR #65 review finding (Documentation). Three different numbers for same value: ADR 0014 says ~24, decisions log says ~29, grep confirms ~29 total (24 in service.go + 5 elsewhere). Acceptance Criteria: (1) ADR 0014 lines 16, 61, 67, 142 updated to ~29 (2) All documents use consistent count. Dependencies: ADR 0014 file overlap with I2.","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T20:21:25Z","created_by":"seanb4t","updated_at":"2026-02-06T20:49:04Z","closed_at":"2026-02-06T20:49:04Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.16","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.160","title":"Fix Spec Deviations table: denial audit references Task 13, should be Task 19","description":"## Issue\nSpec Deviations table lists Task 13 for \"Denial audit sync writes elevated from SHOULD to MUST\", but denial auditing is Task 19 (Audit Logger). Task 13 is the attribute provider interface/schema registry.\n\n## Decision\nChange Task 13 to Task 19 in the Spec Deviations table.\n\n## Acceptance Criteria\n- [ ] Spec Deviations row for denial audit elevation references Task 19\n- [ ] No other task misattributions in the table\n\n## Dependencies\n- File overlap: docs/plans/2026-02-06-full-abac-implementation.md (Spec Deviations table)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T01:13:24Z","created_by":"seanb4t","updated_at":"2026-02-08T01:27:50Z","closed_at":"2026-02-08T01:27:50Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.160","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.161","title":"Add access.WithSystemSubject()/IsSystemContext() to Task 6","description":"## Issue\nTask 23 (system daemon migration) references access.WithSystemSubject() and access.IsSystemContext() helpers but no prior task defines them. Implementers will hit undefined references.\n\n## Decision\nAdd these context helper functions to Task 6 (prefix constants and access control types). Task 6 already defines access control constants/types, making it the natural home for system context helpers. No backwards compatibility concerns.\n\n## Acceptance Criteria\n- [ ] Task 6 includes creation of access.WithSystemSubject(ctx) and access.IsSystemContext(ctx) functions\n- [ ] Task 6 acceptance criteria updated to include tests for these helpers\n- [ ] Task 23 dependency on Task 6 is documented\n\n## Dependencies\n- File overlap: docs/plans/2026-02-06-full-abac-implementation.md (Task 6 and Task 23 sections)\n- Conceptual overlap: Task 23 bootstrap code depends on these helpers","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T01:13:32Z","created_by":"seanb4t","updated_at":"2026-02-08T01:31:17Z","closed_at":"2026-02-08T01:31:17Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.161","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.162","title":"Move @-prefix removal before Phase 7.4 (no backwards compat)","description":"## Issue\nTask 29 assigns @-prefix removal from lock expressions to Phase 7.6, but Phase 7.4 seed policies (Tasks 20-22) reference command names WITHOUT the @ prefix. This creates a timing conflict.\n\n## Decision\nMove @-prefix removal to BEFORE Phase 7.4 so seed policies work as-written. There is NO backwards compatibility concern here — the @ prefix can be removed outright without any transition period, dual-format support, or migration strategy.\n\nIMPORTANT: Do NOT add any backwards compatibility handling (no dual-format acceptance, no transition period, no EventStore compatibility). Just remove the prefix.\n\n## Acceptance Criteria\n- [ ] @-prefix removal is moved to a task before Phase 7.4 (before Task 20)\n- [ ] No backwards compatibility shims, dual-format support, or transition period mentioned\n- [ ] Seed policies in Tasks 20-22 reference command names without @ prefix (already correct)\n- [ ] Task 29 updated to remove the @-prefix removal responsibility (or Task 29 itself moved earlier)\n\n## Dependencies\n- File overlap: docs/plans/2026-02-06-full-abac-implementation.md (Task 29, Tasks 20-22)\n- Conceptual overlap: Seed policy command references depend on prefix removal being done first","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T01:13:45Z","created_by":"seanb4t","updated_at":"2026-02-08T01:34:58Z","closed_at":"2026-02-08T01:34:58Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.162","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.163","title":"Fix Task 5 test imports referencing wrong package","description":"## Issue\nTask 5 test file internal/access/policy/types_test.go imports from the policy package, but the implementation creates types in a types sub-package (internal/access/policy/types/types.go). Import paths won't resolve.\n\n## Decision\nUpdate the test imports in Task 5 to reference the types sub-package, or move types into the policy package directly. The test code references policy.Effect and policy.NewDecision but these live in the types sub-package.\n\n## Acceptance Criteria\n- [ ] Task 5 test code imports match the actual package location of the types\n- [ ] Import paths are consistent between Task 5 implementation and test files\n\n## Dependencies\n- File overlap: docs/plans/2026-02-06-full-abac-implementation.md (Task 5 section)\n- Conceptual overlap: finding-7 (Task 6 duplicate types.go)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T01:14:29Z","created_by":"seanb4t","updated_at":"2026-02-08T01:38:02Z","closed_at":"2026-02-08T01:38:02Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.163","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.163","depends_on_id":"holomush-5k1.164","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.164","title":"Fix Task 6 duplicating Task 5 types.go file creation","description":"## Issue\nBoth Task 5 and Task 6 list creating internal/access/policy/types.go. The second creation would overwrite the first.\n\n## Decision\nClarify ownership: Task 5 creates the types sub-package (internal/access/policy/types/types.go) with core types (Effect, Decision, AccessRequest, AttributeSchema). Task 6 should extend or import from this package, not recreate the file.\n\n## Acceptance Criteria\n- [ ] Only one task creates types.go (or they create files in different paths)\n- [ ] Task 6 file list does not duplicate Task 5 file creation\n- [ ] Cross-task file ownership is unambiguous\n\n## Dependencies\n- File overlap: docs/plans/2026-02-06-full-abac-implementation.md (Task 5 and Task 6 sections)\n- Conceptual overlap: finding-6 (Task 5 test imports)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T01:14:39Z","created_by":"seanb4t","updated_at":"2026-02-08T01:37:11Z","closed_at":"2026-02-08T01:37:11Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.164","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.165","title":"Fix Task 16c dependency direction in Mermaid diagram","description":"## Issue\nThe Phase 7.3 Mermaid dependency diagram shows T16c --\u003e T17, implying Task 16c must complete before Task 17. But Task 16c modifies engine.go which is created by Task 17. The dependency direction is backwards.\n\n## Decision\nReverse the arrow: T17 --\u003e T16c (Task 17 creates the engine, then Task 16c modifies it to add Layer 1 property checks).\n\n## Acceptance Criteria\n- [ ] Mermaid diagram shows T17 --\u003e T16c (not T16c --\u003e T17)\n- [ ] Task 16c dependencies list includes Task 17\n- [ ] Critical path documentation updated if affected\n\n## Dependencies\n- File overlap: docs/plans/2026-02-06-full-abac-implementation.md (Phase 7.3 Mermaid diagram)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T01:14:48Z","created_by":"seanb4t","updated_at":"2026-02-08T01:41:07Z","closed_at":"2026-02-08T01:41:07Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.165","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.166","title":"Add WAL monitoring metric (abac_audit_wal_entries) to task acceptance criteria","description":"## Issue\nThe design spec requires WAL size monitoring with a configurable threshold (default 10MB or 10,000 entries) and a Prometheus gauge abac_audit_wal_entries. No task includes this metric in its acceptance criteria.\n\n## Decision\nAdd the WAL monitoring metric to Task 19 (Audit Logger) or Task 20 (Metrics) acceptance criteria.\n\n## Acceptance Criteria\n- [ ] abac_audit_wal_entries Prometheus gauge added to a task's acceptance criteria\n- [ ] Configurable WAL size threshold documented in the relevant task\n\n## Dependencies\n- File overlap: docs/plans/2026-02-06-full-abac-implementation.md (Task 19 or Task 20 section)\n- Conceptual overlap: spec requirement for WAL monitoring","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T01:14:53Z","created_by":"seanb4t","updated_at":"2026-02-08T01:41:55Z","closed_at":"2026-02-08T01:41:55Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.166","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.167","title":"Fix 19 markdownlint errors (MD010 hard tabs, MD032 blank lines)","description":"## Issue\nmarkdownlint-cli2 reports 19 errors:\n- 14x MD010 (hard tabs) at lines 762-792 in Task 6 Go code block\n- 5x MD032 (blanks around lists) at lines 196, 2441, 3108, 3122, 3285\n\nPR description claims task lint:markdown passes with 0 errors, which contradicts actual results.\n\n## Decision\nReplace hard tab characters on lines 762-792 with 4-space indentation (matching all other Go code examples in the file). Add blank lines before lists at the 5 affected locations.\n\n## Acceptance Criteria\n- [ ] No MD010 violations (hard tabs replaced with spaces in code blocks)\n- [ ] No MD032 violations (blank lines added before all lists)\n- [ ] task lint:markdown passes with 0 errors\n\n## Dependencies\n- File overlap: docs/plans/2026-02-06-full-abac-implementation.md","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T01:14:57Z","created_by":"seanb4t","updated_at":"2026-02-08T01:44:45Z","closed_at":"2026-02-08T01:44:45Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.167","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.168","title":"Assign SessionResolver implementation to a task","description":"## Issue\nThe design spec defines a SessionResolver interface for resolving session attributes (ResolveSession method, SESSION_INVALID and SESSION_STORE_ERROR error codes, character deletion handling). Task 17 lists session resolution in acceptance criteria but no task explicitly covers the PostgreSQL implementation of SessionResolver.\n\n## Decision\nExpand Task 17 to explicitly include SessionResolver implementation, or create a new Task 17a. The implementation queries the session store for the associated character ID.\n\n## Acceptance Criteria\n- [ ] SessionResolver implementation assigned to a specific task\n- [ ] PostgreSQL session store query for character ID resolution is covered\n- [ ] Error codes (SESSION_INVALID, SESSION_STORE_ERROR) included in acceptance criteria\n- [ ] Character deletion handling behavior documented\n\n## Dependencies\n- File overlap: docs/plans/2026-02-06-full-abac-implementation.md (Task 17 section)\n- Conceptual overlap: session store integration","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T01:15:00Z","created_by":"seanb4t","updated_at":"2026-02-08T01:46:00Z","closed_at":"2026-02-08T01:46:00Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.168","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.169","title":"Fix Task 5 step numbering skip (jumps from 3 to 5)","description":"## Issue\nTask 5 implementation steps go 1 -\u003e 2 -\u003e 3 -\u003e 5 -\u003e 6, skipping Step 4. Either a step was omitted or the numbering is wrong.\n\n## Decision\nRenumber Step 5 to Step 4 and Step 6 to Step 5, or add the missing Step 4 (likely \"Run tests to verify they fail\" per TDD workflow).\n\n## Acceptance Criteria\n- [ ] Task 5 steps are numbered sequentially without gaps\n- [ ] If a step was missing, it is added with appropriate content\n\n## Dependencies\n- File overlap: docs/plans/2026-02-06-full-abac-implementation.md (Task 5 section, lines 708-713)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T01:15:07Z","created_by":"seanb4t","updated_at":"2026-02-08T01:46:56Z","closed_at":"2026-02-08T01:46:56Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.169","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.17","title":"[I2] Align provider_errors JSONB schema key names","description":"PR #65 review finding (Documentation). Prose (line 1301) uses namespace key, DDL comment (line 1763) uses provider key. DDL comment also missing timestamp and duration_us fields. Acceptance Criteria: (1) Consistent key name used (namespace) (2) DDL comment includes all 4 fields from prose schema. Dependencies: DDL section overlaps with C2, C3.","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T20:21:25Z","created_by":"seanb4t","updated_at":"2026-02-06T20:49:52Z","closed_at":"2026-02-06T20:49:52Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.17","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.170","title":"Consider splitting Task 27 (11 admin commands) into smaller tasks","description":"## Issue\nTask 27 covers 11 admin commands (policy test, policy validate, policy reload, policy attributes, policy audit, policy seed verify, policy seed status, policy clear-degraded-mode, policy recompile-all, policy recompile, policy repair). This is too large for a single reviewable task. In particular, policy test has complex behavior (verbose mode, JSON mode, suite mode, builder redaction, audit logging).\n\n## Decision\nSplit Task 27 into at minimum:\n- 27a: policy test (with builder redaction, JSON mode, suite mode)\n- 27b: remaining operational/admin commands\n\n## Acceptance Criteria\n- [ ] Task 27 split into 2+ sub-tasks with clear boundaries\n- [ ] policy test is in its own task given its complexity\n- [ ] Dependencies between sub-tasks documented\n- [ ] Total coverage of all 11 commands preserved across sub-tasks\n\n## Dependencies\n- File overlap: docs/plans/2026-02-06-full-abac-implementation.md (Task 27 section)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T01:15:09Z","created_by":"seanb4t","updated_at":"2026-02-08T01:50:12Z","closed_at":"2026-02-08T01:50:12Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.170","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.171","title":"Fix Spec Deviations table: first row has Task 2 in both columns","description":"## Issue\nThe first row of the Spec Deviations table has \"Task 2\" in both the Spec Reference column and the Task column. The Spec Reference column should contain the actual spec location, not a task reference.\n\n## Decision\nReplace the first \"Task 2\" with the actual spec reference. Based on the Task 2 description referencing \"Policy Storage \u003e Schema (lines 1973-2114)\", this should be \"Spec line ~2015\" (the audit log schema location).\n\n## Acceptance Criteria\n- [ ] Spec Deviations table first row Spec Reference column contains actual spec line reference\n- [ ] No duplicate column values in any Spec Deviations row\n\n## Dependencies\n- File overlap: docs/plans/2026-02-06-full-abac-implementation.md (Spec Deviations table)\n- Conceptual overlap: finding-2 (same row, wrong spec line number)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T01:15:14Z","created_by":"seanb4t","updated_at":"2026-02-08T01:38:48Z","closed_at":"2026-02-08T01:38:48Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.171","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.172","title":"Document that Task 7 Create() does not call Compile() internally","description":"## Issue\nThe design spec says the policy store calls Compile() on every Create and Edit operation. However, Task 7 (PolicyStore) depends on Tasks 1-6 but NOT on Task 12 (PolicyCompiler). The plan's approach has Create() accepting pre-compiled data with compilation happening in the caller, but this isn't explicitly documented and contradicts the spec wording.\n\n## Decision\nAdd a note to Task 7 clarifying that Create() persists raw policy text and pre-compiled AST bytes; compilation happens in the caller (the engine or a higher-level service). This avoids the T7/T12 circular dependency.\n\n## Acceptance Criteria\n- [ ] Task 7 explicitly documents that Create() does NOT call Compile() internally\n- [ ] The caller-compiles-first pattern is noted as a deliberate deviation from spec wording\n\n## Dependencies\n- File overlap: docs/plans/2026-02-06-full-abac-implementation.md (Task 7 section)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T01:15:22Z","created_by":"seanb4t","updated_at":"2026-02-08T01:51:06Z","closed_at":"2026-02-08T01:51:06Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.172","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.173","title":"Add lock parser fuzz tests to a task","description":"## Issue\nThe design spec says fuzz targets SHOULD cover the lock expression parser (spec line 3294). No task explicitly includes lock parser fuzz tests. Task 10 only covers the DSL parser fuzz tests.\n\n## Decision\nAdd lock parser fuzz tests to Task 25 (lock compiler) acceptance criteria, or create a Task 25c for lock parser fuzz testing.\n\n## Acceptance Criteria\n- [ ] Lock parser fuzz tests assigned to a specific task's acceptance criteria\n- [ ] Fuzz targets cover lock expression parsing edge cases\n\n## Dependencies\n- File overlap: docs/plans/2026-02-06-full-abac-implementation.md (Task 25 section)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T01:15:25Z","created_by":"seanb4t","updated_at":"2026-02-08T01:51:53Z","closed_at":"2026-02-08T01:51:53Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.173","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.174","title":"Verify and correct call site count (~28 stated vs ~19 actual)","description":"## Issue\nThe plan references ~28 production call sites for AccessControl.Check(), but actual grep of the codebase shows ~19 production call sites (725 total references including tests across 30 files). The discrepancy could mislead migration effort estimation.\n\n## Decision\nVerify the actual count by grepping the current codebase and update the plan to reflect the accurate number. Note that test files (especially internal/world/service_test.go with ~389 references) represent significant migration effort beyond production call sites.\n\n## Acceptance Criteria\n- [ ] Production call site count verified against current codebase\n- [ ] Plan updated with accurate count\n- [ ] Test file migration effort noted separately if significant\n\n## Dependencies\n- File overlap: docs/plans/2026-02-06-full-abac-implementation.md (Task 28 section, migration overview)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T01:15:30Z","created_by":"seanb4t","updated_at":"2026-02-08T01:54:52Z","closed_at":"2026-02-08T01:54:52Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.174","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.175","title":"Add microbenchmark acceptance criteria to Task 21","description":"## Issue\nThe design spec defines microbenchmark targets: single-policy \u003c10us, 50-policy set \u003c100us, attribute resolution \u003c50us. Task 21 covers integration benchmarks but does not explicitly include these pure (no I/O) microbenchmark targets in its acceptance criteria.\n\n## Decision\nAdd the spec's microbenchmark targets to Task 21 acceptance criteria.\n\n## Acceptance Criteria\n- [ ] Task 21 acceptance criteria include: single-policy evaluation \u003c10us\n- [ ] Task 21 acceptance criteria include: 50-policy set evaluation \u003c100us\n- [ ] Task 21 acceptance criteria include: attribute resolution \u003c50us\n- [ ] Benchmarks specified as pure/no-IO microbenchmarks\n\n## Dependencies\n- File overlap: docs/plans/2026-02-06-full-abac-implementation.md (Task 21 section)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T01:15:41Z","created_by":"seanb4t","updated_at":"2026-02-08T01:55:37Z","closed_at":"2026-02-08T01:55:37Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.175","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.176","title":"Consider splitting Task 4 (EntityProperty + WorldService cascade)","description":"## Issue\nTask 4 covers both the EntityProperty type/PropertyRepository interface/PostgreSQL implementation AND WorldService cascade deletion modifications (DeleteCharacter, DeleteObject, DeleteLocation) plus an orphan cleanup goroutine and startup integrity check. This is a large scope mixing new type creation with existing service modification.\n\n## Decision\nConsider splitting into:\n- 4a: EntityProperty type + PropertyRepository interface + PostgreSQL implementation\n- 4b: WorldService cascade deletion + orphan cleanup goroutine + startup integrity check\n\nThis is a suggestion-level finding. The plan author may choose to keep as one task if they prefer.\n\n## Acceptance Criteria\n- [ ] Evaluate whether Task 4 should be split based on implementation complexity\n- [ ] If split, ensure dependencies between sub-tasks are documented\n- [ ] If kept as-is, add a note acknowledging the broad scope\n\n## Dependencies\n- File overlap: docs/plans/2026-02-06-full-abac-implementation.md (Task 4 section)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T01:15:49Z","created_by":"seanb4t","updated_at":"2026-02-08T01:56:35Z","closed_at":"2026-02-08T01:56:35Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.176","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.177","title":"Document participle AST JSON serialization risks in Task 12","description":"## Issue\nTask 12 defines CompiledPolicy with Conditions *dsl.ConditionBlock containing participle-generated AST nodes. The plan says compiled_ast JSONB serialization round-trips correctly but doesn't address how participle's AST nodes serialize to/from JSON. Participle ASTs may contain unexported fields or types that don't serialize cleanly.\n\n## Decision\nAdd a note to Task 12 acknowledging this integration risk and recommending early validation of AST serialization round-tripping as part of the TDD approach (write the serialization test first).\n\n## Acceptance Criteria\n- [ ] Task 12 notes the participle AST serialization risk\n- [ ] Serialization round-trip testing is explicitly called out in acceptance criteria\n- [ ] Alternative approaches noted if participle ASTs don't serialize cleanly (e.g., custom MarshalJSON)\n\n## Dependencies\n- File overlap: docs/plans/2026-02-06-full-abac-implementation.md (Task 12 section)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T01:15:56Z","created_by":"seanb4t","updated_at":"2026-02-08T01:57:38Z","closed_at":"2026-02-08T01:57:38Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.177","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.178","title":"Fix Mermaid diagram: T27 phantom node reference","description":"**PR #69 Review Finding #1 (Critical)**\n\nTask 27 was split into T27a and T27b, but the cross-phase dependency diagram still references `T23 --\u003e T27`. Mermaid renders a phantom disconnected `T27` box.\n\n**File:** `docs/plans/2026-02-06-full-abac-implementation.md` (line ~172)\n\n**Fix:** Change `T23 --\u003e T27` to `T23 --\u003e T27a`.\n\n**File overlap:** Mermaid diagram section — also touched by findings for T21a missing node and Task 16c parallel claim.\n","acceptance_criteria":"- [ ] T23 --\u003e T27 changed to T23 --\u003e T27a in Mermaid diagram (line ~172)\n- [ ] No phantom T27 node renders in diagram\n- [ ] Diagram accurately reflects T27a/T27b split","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T02:11:47Z","created_by":"seanb4t","updated_at":"2026-02-08T02:20:53Z","closed_at":"2026-02-08T02:20:53Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.178","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.179","title":"Fix Mermaid diagram: add missing T21a node and edge","description":"**PR #69 Review Finding #2 (Critical)**\n\nTask 21a (\"Remove @-prefix from command names\") is defined at line ~2693 but absent from the Mermaid dependency diagram. Since seed policies (Task 22) reference bare command names like `\"say\"`, `\"dig\"`, Task 21a should block Task 22 or Task 28.\n\n**File:** `docs/plans/2026-02-06-full-abac-implementation.md`\n\n**Fix:** Add `T21a` node to diagram with edge `T21a --\u003e T22`.\n\n**File overlap:** Mermaid diagram section — also touched by T27 phantom node fix and Task 16c parallel claim fix.\n","acceptance_criteria":"- [ ] T21a node added to Mermaid dependency diagram\n- [ ] Edge T21a --\u003e T22 added (seed policies depend on bare command names)\n- [ ] Diagram renders correctly with new node","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T02:11:52Z","created_by":"seanb4t","updated_at":"2026-02-08T02:24:33Z","closed_at":"2026-02-08T02:24:33Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.179","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.179","depends_on_id":"holomush-5k1.189","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.18","title":"[I3] Add strikethrough to superseded decision #13 text","description":"PR #65 review finding (Documentation). Decision #13 references adapter removed by decision #36 but original text lacks strikethrough. Other superseded decisions (#5, #20, #21) consistently use strikethrough. Acceptance Criteria: (1) Decision #13 adapter text has strikethrough (2) Consistent with supersession style used elsewhere. Dependencies: decisions document only.","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T20:21:26Z","created_by":"seanb4t","updated_at":"2026-02-06T20:50:44Z","closed_at":"2026-02-06T20:50:44Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.18","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.180","title":"Fix Go version claim: 1.23+ should be 1.24+","description":"**PR #69 Review Finding #3 (Important)**\n\nPlan says \"Go 1.23+\" but `go.mod` specifies `go 1.24.0`.\n\n**File:** `docs/plans/2026-02-06-full-abac-implementation.md` (line ~8)\n\n**Fix:** Change to \"Go 1.24+\".\n","acceptance_criteria":"- [ ] Go version reference updated from \"Go 1.23+\" to \"Go 1.24+\"\n- [ ] Matches go.mod specification of go 1.24.0","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T02:11:55Z","created_by":"seanb4t","updated_at":"2026-02-08T02:25:10Z","closed_at":"2026-02-08T02:25:10Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.180","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.181","title":"Add SPDX license header reminder to plan","description":"**PR #69 Review Finding #4 (Important)**\n\nCLAUDE.md requires all `.go` and `.sql` files include SPDX license headers. The plan creates dozens of new files but doesn't remind implementers.\n\n**File:** `docs/plans/2026-02-06-full-abac-implementation.md` — Task Execution Protocol section\n\n**Fix:** Add note referencing `task license:add` to the Task Execution Protocol section.\n","acceptance_criteria":"- [ ] Note added to Task Execution Protocol section referencing task license:add\n- [ ] Implementers reminded that all new .go and .sql files need SPDX headers","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T02:11:59Z","created_by":"seanb4t","updated_at":"2026-02-08T02:25:46Z","closed_at":"2026-02-08T02:25:46Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.181","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.182","title":"Move functions.go from Task 28 to Task 29 file list","description":"**PR #69 Review Finding #5 (Important)**\n\n`internal/plugin/hostfunc/functions.go` is listed under Task 28's files but uses `capability.Enforcer`, not `AccessControl`. The plan body correctly notes this distinction but the file list placement is confusing.\n\n**File:** `docs/plans/2026-02-06-full-abac-implementation.md` — Task 28 and Task 29 sections\n\n**Fix:** Move `functions.go` from Task 28 to Task 29 (where `capability.Enforcer` is removed).\n\n**Conceptual overlap:** Related to Task 4 Delete methods finding (both about task file list accuracy).\n","acceptance_criteria":"- [ ] internal/plugin/hostfunc/functions.go removed from Task 28 file list\n- [ ] internal/plugin/hostfunc/functions.go added to Task 29 file list\n- [ ] Plan body notes remain accurate (functions.go uses capability.Enforcer, not AccessControl)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T02:12:04Z","created_by":"seanb4t","updated_at":"2026-02-08T02:26:27Z","closed_at":"2026-02-08T02:26:27Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.182","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.183","title":"Fix misleading parallel work claim for Task 16c","description":"**PR #69 Review Finding #6 (Important)**\n\n\"Parallel Work Opportunities\" says Task 16c \"can proceed in parallel with Task 16a.\" This is incorrect — 16c depends on 16b which depends on 16a. They are strictly sequential.\n\n**File:** `docs/plans/2026-02-06-full-abac-implementation.md` (line ~201, Parallel Work Opportunities section)\n\n**Fix:** Remove or correct the \"can proceed in parallel with Task 16a\" claim.\n\n**File overlap:** Mermaid diagram section / parallel work section — related to other diagram fixes.\n","acceptance_criteria":"- [ ] \"Can proceed in parallel with Task 16a\" claim removed or corrected\n- [ ] Task 16c correctly shown as sequential: 16a → 16b → 16c\n- [ ] Parallel Work Opportunities section accurate","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T02:12:09Z","created_by":"seanb4t","updated_at":"2026-02-08T02:26:59Z","closed_at":"2026-02-08T02:26:59Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.183","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.184","title":"Fix spec line reference for PK deviation in Task 2","description":"**PR #69 Review Finding #7 (Important)**\n\nThe plan references \"Spec line 2167\" for the `id TEXT PRIMARY KEY` deviation, but the actual PK definition is at line ~2015.\n\n**File:** `docs/plans/2026-02-06-full-abac-implementation.md` — Task 2 section\n\n**Fix:** Change \"line 2167\" to \"line ~2015\" in the SQL comment and NOTE block.\n","acceptance_criteria":"- [ ] \"Spec line 2167\" changed to \"line ~2015\" in SQL comment and NOTE block\n- [ ] Reference accurately points to PK definition in spec","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T02:12:13Z","created_by":"seanb4t","updated_at":"2026-02-08T02:35:43Z","closed_at":"2026-02-08T02:35:43Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.184","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.185","title":"Renumber Task 16c visibility check to Step 3b","description":"**PR #69 Review Finding #8 (Important)**\n\nLayer 1 visibility checks are placed at \"Step 2b\" (between session resolution and attribute resolution), but the code sample calls `e.resolver.ResolveResource()` — which IS attribute resolution. At Step 2b, attributes haven't been resolved yet.\n\n**File:** `docs/plans/2026-02-06-full-abac-implementation.md` — Task 16c section\n\n**Decision:** Renumber to \"Step 3b\" (after eager resolution, before policy evaluation). Keep using the full resolver — no lightweight query needed.\n\n**Fix:** Renumber visibility check placement from Step 2b to Step 3b and ensure surrounding step numbering is consistent.\n","acceptance_criteria":"- [ ] Layer 1 visibility check renumbered from Step 2b to Step 3b\n- [ ] Check placed after eager attribute resolution, before policy evaluation\n- [ ] Code sample using e.resolver.ResolveResource() consistent with step placement\n- [ ] Step numbering throughout Task 16c section is consistent","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T02:12:18Z","created_by":"seanb4t","updated_at":"2026-02-08T02:28:12Z","closed_at":"2026-02-08T02:28:12Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.185","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.186","title":"Update test call site count to include capability/enforcer_test.go","description":"**PR #69 Review Finding #9 (Suggestion)**\n\nHeader claims \"57 test call sites\" but there are also ~20 `.Check()` calls in `internal/plugin/capability/enforcer_test.go` handled by Task 29.\n\n**File:** `docs/plans/2026-02-06-full-abac-implementation.md` — header/overview section\n\n**Fix:** Update header to note \"+ ~20 test call sites in capability/enforcer_test.go (addressed in Task 29)\".\n","acceptance_criteria":"- [ ] Header updated to note \"+ ~20 test call sites in capability/enforcer_test.go (addressed in Task 29)\"\n- [ ] Total migration scope accurately represented","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T02:12:22Z","created_by":"seanb4t","updated_at":"2026-02-08T02:36:23Z","closed_at":"2026-02-08T02:36:23Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.186","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.187","title":"Make Task 4 split into 4a/4b mandatory","description":"**PR #69 Review Finding #10 (Suggestion)**\n\nTask 4 has 18 acceptance criteria covering 6 distinct work units. The plan currently says \"consider splitting into 4a/4b\" — this should be mandatory to reduce critical-path risk.\n\n**File:** `docs/plans/2026-02-06-full-abac-implementation.md` — Task 4 section and Mermaid diagram\n\n**Decision:** Make the split mandatory. Define 4a and 4b as separate tasks with acceptance criteria distributed between them.\n\n**Fix:** Split Task 4 into 4a/4b, distribute acceptance criteria, update Mermaid diagram edges.\n\n**Conceptual overlap:** Related to Task 4 Delete methods finding (both modify Task 4 section).\n","acceptance_criteria":"- [ ] Task 4 split into 4a and 4b as separate defined tasks\n- [ ] 18 acceptance criteria distributed across 4a/4b appropriately\n- [ ] 6 work units logically grouped between the two sub-tasks\n- [ ] Dependencies updated in Mermaid diagram for 4a/4b\n- [ ] \"Consider splitting\" language replaced with definitive split","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T02:12:27Z","created_by":"seanb4t","updated_at":"2026-02-08T02:34:27Z","closed_at":"2026-02-08T02:34:27Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.187","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.188","title":"Add note that Task 4 Delete methods must be created","description":"**PR #69 Review Finding #11 (Suggestion)**\n\n`WorldService.DeleteCharacter()`, `DeleteObject()`, `DeleteLocation()` don't currently exist in `service.go`. The plan references them but doesn't note they must be created.\n\n**File:** `docs/plans/2026-02-06-full-abac-implementation.md` — Task 4 section\n\n**Fix:** Add a note clarifying these methods must be created as part of Task 4's scope.\n\n**Conceptual overlap:** Related to Task 4 split finding (both modify Task 4 section) and functions.go finding (both about task file list accuracy).\n","acceptance_criteria":"- [ ] Note added to Task 4 clarifying DeleteCharacter(), DeleteObject(), DeleteLocation() do not exist yet\n- [ ] Scope explicitly includes creating these methods on WorldService\n- [ ] service.go referenced as file requiring new methods","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T02:12:32Z","created_by":"seanb4t","updated_at":"2026-02-08T02:35:02Z","closed_at":"2026-02-08T02:35:02Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.188","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.188","depends_on_id":"holomush-5k1.187","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.189","title":"Verify Task 21a @-prefix removal is necessary","description":"**PR #69 Review Finding #12 (Suggestion)**\n\nNo concrete evidence that `@`-prefixed command names exist in the codebase. Task 21a may be unnecessary.\n\n**File:** `docs/plans/2026-02-06-full-abac-implementation.md` — Task 21a section and Mermaid diagram\n\n**Fix:** Verify before implementation. Search codebase for @-prefixed command names. Remove Task 21a if not needed, or document evidence if they exist.\n\n**Conceptual overlap:** Related to T21a diagram finding — if 21a is removed, the diagram fix (adding T21a node) becomes moot.\n","acceptance_criteria":"- [ ] Codebase searched for @-prefixed command names\n- [ ] If @-prefixes found: Task 21a retained with evidence documented\n- [ ] If no @-prefixes found: Task 21a removed from plan and diagram\n- [ ] Diagram updated accordingly (T21a node/edges added or confirmed absent)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T02:12:37Z","created_by":"seanb4t","updated_at":"2026-02-08T02:23:36Z","closed_at":"2026-02-08T02:23:36Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.189","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.19","title":"[I4] Document PropertyProvider N+1 query concern","description":"PR #65 review finding (Architecture). parent_location resolution requires recursive CTE per property. A look command checking 10 properties triggers 10 separate CTE executions. Per-request cache helps within request but not across. Recommendation: add batch resolution mode note to spec. Acceptance Criteria: (1) Spec acknowledges N+1 pattern (2) Recommends batch resolution for multiple properties (3) Implementation notes updated. Dependencies: conceptually related to C4 (CTE depth).","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T20:21:26Z","created_by":"seanb4t","updated_at":"2026-02-06T20:51:39Z","closed_at":"2026-02-06T20:51:39Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.19","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.190","title":"Fix Task 4b: DeleteLocation/DeleteObject exist, only DeleteCharacter is missing","description":"PR #69 review finding #1 (Critical). Task 4b incorrectly claims DeleteLocation() and DeleteObject() don't exist. Verified: DeleteLocation exists at internal/world/service.go:139, DeleteObject at line 366. Only DeleteCharacter is genuinely missing. Fix: state that only DeleteCharacter() needs creation; DeleteLocation() and DeleteObject() need modification to add property cascade deletion calls.","acceptance_criteria":"- [ ] Task 4b wording updated: only DeleteCharacter() listed as needing creation\\n- [ ] DeleteLocation() and DeleteObject() listed as needing modification for property cascade\\n- [ ] No other tasks reference these as needing creation","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T03:01:49Z","created_by":"seanb4t","updated_at":"2026-02-08T15:04:18Z","closed_at":"2026-02-08T15:04:18Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.190","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.191","title":"Remove Task 16c: visibility MUST use seed policies, not pre-engine Go code","description":"PR #69 review finding #2 (Critical). Task 16c implements visibility as pre-engine Go code that short-circuits before policy evaluation. The spec (lines 1191-1217, 2380-2384) describes restricted visibility as seed policies evaluated through normal ABAC evaluation. This creates dual enforcement paths and undermines the 'everything is a policy' design principle. Additionally, Task 16c pseudocode accesses req.Resource.Type but AccessRequest.Resource is a string, not a struct — compile error.\\n\\n**Decision:** Remove Task 16c entirely. Handle restricted visibility purely through seed policies in Task 22. This aligns with the spec's policy-based design.","acceptance_criteria":"- [ ] Task 16c removed from implementation plan\\n- [ ] Task 22 updated to include restricted visibility seed policies\\n- [ ] Dependency graph updated (remove 16c node and edges)\\n- [ ] Mermaid diagram regenerated\\n- [ ] No references to pre-engine visibility filtering remain in plan","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T03:01:55Z","created_by":"seanb4t","updated_at":"2026-02-08T15:00:28Z","closed_at":"2026-02-08T15:00:28Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.191","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.192","title":"Add missing restricted visibility seed policies to Task 22","description":"PR #69 review finding #3 (Critical). The spec's Example Policies (lines 1078-1090) define two policies for restricted visibility not present in Task 22's seed list:\\n\\n1. visible_to permit: permit(principal is character, action in [\"read\"], resource is property) when { resource has visible_to \u0026\u0026 principal.id in resource.visible_to }\\n2. excluded_from forbid: forbid(principal is character, action in [\"read\"], resource is property) when { resource has excluded_from \u0026\u0026 principal.id in resource.excluded_from }\\n\\nThe excluded_from forbid policy is especially important given deny-overrides conflict resolution.\\n\\n**Depends on:** Resolution of finding #2 (decision: remove Task 16c, use seed policies). These two policies become the primary enforcement mechanism for restricted visibility.","acceptance_criteria":"- [ ] visible_to permit policy added to Task 22 seed list\\n- [ ] excluded_from forbid policy added to Task 22 seed list\\n- [ ] Seed policy count updated (14 → 16)\\n- [ ] Task 22 acceptance criteria updated to include visibility policies\\n- [ ] Coordination with Task 16c removal verified","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T03:02:02Z","created_by":"seanb4t","updated_at":"2026-02-08T15:00:28Z","closed_at":"2026-02-08T15:00:28Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.192","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.192","depends_on_id":"holomush-5k1.191","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.193","title":"Document lock policy naming deviation from spec in Spec Deviations table","description":"PR #69 review finding #4 (Critical). Task 25b uses lock:\u003ctype\u003e:\u003cresource_id\u003e:\u003caction\u003e (e.g., lock:object:01ABC:read). The spec (lines 2412-2417) uses lock:\u003cresource_ulid\u003e:\u003caction\u003e without the \u003ctype\u003e segment.\\n\\n**Decision:** Keep the plan's extended format (lock:\u003ctype\u003e:\u003cresource_id\u003e:\u003caction\u003e). The extra type segment aids debugging and admin operations by making the resource type immediately visible without a ULID lookup. Add to Spec Deviations table with this rationale.","acceptance_criteria":"- [ ] Entry added to Spec Deviations table documenting the format difference\\n- [ ] Rationale explains debugging/admin benefit of type segment\\n- [ ] Spec line references included (lines 2412-2417)\\n- [ ] All Task 25b examples consistent with chosen format","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T03:02:07Z","created_by":"seanb4t","updated_at":"2026-02-08T14:58:34Z","closed_at":"2026-02-08T14:58:34Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.193","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.194","title":"Document spec deviation: compilation moved from PolicyStore to caller in Task 7","description":"PR #69 review finding #5 (Important). Task 7 moves compilation out of the store to the caller, contradicting spec lines 278-281: 'The policy store calls Compile() on every Create and Edit operation.' This is not tracked in the Spec Deviations table.\\n\\nFix: Add to Spec Deviations table. Consider whether a PolicyService wrapper would preserve the spec's invariant while maintaining the current approach.","acceptance_criteria":"- [ ] Entry added to Spec Deviations table\\n- [ ] Spec line reference (278-281) included\\n- [ ] Rationale for moving compilation to caller documented\\n- [ ] PolicyService wrapper considered and decision noted","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T03:02:13Z","created_by":"seanb4t","updated_at":"2026-02-08T15:35:01Z","closed_at":"2026-02-08T15:35:01Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.194","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.195","title":"Fix critical path: include attribute provider chain (Tasks 13→14→15)","description":"PR #69 review finding #6 (Important). The stated critical path jumps from Task 12 to Task 17, but Task 17 depends on Task 15 → Task 14 → Task 13. These must also complete before Task 17 can start.\\n\\nFix: Update critical path to include Tasks 13→14→15, or clarify that the DSL chain (8-12) and provider chain (13-15) run in parallel, both completing before Task 17.","acceptance_criteria":"- [ ] Critical path section updated\\n- [ ] Tasks 13, 14, 15 either added to critical path or parallel execution clarified\\n- [ ] Mermaid diagram consistent with updated critical path\\n- [ ] No dependency gaps between provider chain and integration task","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T03:02:18Z","created_by":"seanb4t","updated_at":"2026-02-08T15:36:11Z","closed_at":"2026-02-08T15:36:11Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.195","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.196","title":"Fix Task 23 bootstrap sequence spec line reference","description":"PR #69 review finding #7 (Important). Task 23 references 'lines 2916-2992' but the actual 'Bootstrap Sequence' heading is at line 3007.\\n\\nFix: Update to 'Bootstrap Sequence (lines 3007-3028)'.","acceptance_criteria":"- [ ] Line reference in Task 23 updated to lines 3007-3028\\n- [ ] Reference points to correct Bootstrap Sequence section","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T03:02:21Z","created_by":"seanb4t","updated_at":"2026-02-08T15:00:18Z","closed_at":"2026-02-08T15:00:18Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.196","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.197","title":"Add cycle detection to Task 16b recursive CTE per spec requirement","description":"PR #69 review finding #8 (Important). Task 16b's recursive CTE omits the spec-required cycle detection via a visited_ids path column (spec lines 1257-1264).\\n\\nFix: Add cycle detection to the CTE example, or note that the SQL is illustrative with a MUST reference to spec lines 1257-1264 for the full implementation.","acceptance_criteria":"- [ ] Task 16b CTE includes visited_ids path column for cycle detection, OR\\n- [ ] Task 16b CTE marked as illustrative with MUST reference to spec lines 1257-1264\\n- [ ] Acceptance criteria for Task 16b include cycle detection verification","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T03:02:25Z","created_by":"seanb4t","updated_at":"2026-02-08T14:58:34Z","closed_at":"2026-02-08T14:58:34Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.197","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.198","title":"Task 19 WAL path should use internal/xdg package, not raw env var","description":"PR #69 review finding #9 (Important). Task 19 references raw $XDG_STATE_HOME instead of the project's existing XDG support package at internal/xdg/.\\n\\nFix: Update Task 19 to reference internal/xdg/ for path resolution.","acceptance_criteria":"- [ ] Task 19 references internal/xdg/ package for WAL path resolution\\n- [ ] No raw $XDG_STATE_HOME references remain in Task 19","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T03:02:31Z","created_by":"seanb4t","updated_at":"2026-02-08T15:42:14Z","closed_at":"2026-02-08T15:42:14Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.198","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.199","title":"Clarify Task 21a scope: static_test.go occurrences handled by Task 29 deletion","description":"PR #69 review finding #10 (Important). Task 21a lists 9 @-prefixed name occurrences, but 4 of them are in static_test.go which is deleted by Task 29. Task 21a should clarify that only 5 occurrences need modification and the remaining 4 are addressed by Task 29.\\n\\nFix: Add clarification note to Task 21a scope.","acceptance_criteria":"- [ ] Task 21a notes that 4 of 9 occurrences are in static_test.go\\n- [ ] Task 21a clarifies those 4 are handled by Task 29 deletion\\n- [ ] Remaining 5 modification targets explicitly listed","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T03:02:34Z","created_by":"seanb4t","updated_at":"2026-02-08T15:42:14Z","closed_at":"2026-02-08T15:42:14Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.199","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.2","title":"[E7] Implementation Plan: Full ABAC","description":"Create detailed implementation plan for the Full ABAC system.\n\n## Acceptance Criteria\n\n- [ ] Break down each phase into implementable tasks\n- [ ] Define file structure for ABAC packages\n- [ ] Specify interfaces for PolicyStore, AttributeResolver, PolicyEngine\n- [ ] Define test strategy (unit, integration, policy evaluation tests)\n- [ ] Document database schema for policies table\n- [ ] Specify protobuf messages for ABAC admin API\n- [ ] Define plugin SDK types for attribute contributions\n- [ ] Create task dependency graph within phases\n- [ ] Estimate complexity and identify risks\n- [ ] Document integration points with existing event system","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:32:20Z","created_by":"seanb4t","updated_at":"2026-02-12T22:51:18Z","closed_at":"2026-02-12T22:51:18Z","close_reason":"Implementation plan completed: docs/plans/2026-02-06-full-abac-implementation.md","dependencies":[{"issue_id":"holomush-5k1.2","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.2","depends_on_id":"holomush-5k1.1","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.20","title":"[I5] Add seed policy rollback mechanism","description":"PR #65 review finding (Architecture). Seed policy auto-upgrade on restart has no rollback. Buggy seed policy can lock out admins since policy edit requires execute permission depending on seed policy. Acceptance Criteria: (1) Spec documents --force-seed-version=N startup flag (2) Includes emergency recovery SQL procedure (3) Recommends staging environment testing. Dependencies: seed policy section.","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T20:21:26Z","created_by":"seanb4t","updated_at":"2026-02-06T20:52:16Z","closed_at":"2026-02-06T20:52:16Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.20","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.20","depends_on_id":"holomush-kh41","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.200","title":"Add missing policy diff and policy export to Deferred Features table","description":"PR #69 review finding #11 (Important). The Deferred Features table is missing 'policy diff' and 'policy export' from the spec's Future Commands section (lines 3429-3448).\\n\\nFix: Add both entries to the Deferred Features table.","acceptance_criteria":"- [ ] 'policy diff' added to Deferred Features table with spec reference\\n- [ ] 'policy export' added to Deferred Features table with spec reference\\n- [ ] Spec lines 3429-3448 referenced","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T03:02:37Z","created_by":"seanb4t","updated_at":"2026-02-08T14:58:34Z","closed_at":"2026-02-08T14:58:34Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.200","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.201","title":"ADR #60 not applied — Task 16c still present, seed policies missing","description":"PR #69 review finding C1 (Critical). ADR #60 explicitly says 'Remove Task 16c entirely' but:\n- Task 16c remains fully defined (lines 2163-2325) with implementation details and Go code examples\n- T16c node and edges (T16b --\u003e T16c, T17 --\u003e T16c) remain in the Mermaid dependency diagram\n- Task 16c referenced in parallel work opportunities (line 209) and Task 23 note (line 3021)\n- Code example at line 2288 accesses req.Resource.Type but AccessRequest.Resource is a string — the exact bug ADR #60 identified\n- Task 22 defines only 14 seed policies; ADR #60 says 16 (adding seed:property-visible-to and seed:property-excluded-from)\n- Line 3021 note directly contradicts ADR #60\n\nFiles: docs/plans/2026-02-06-full-abac-implementation.md","acceptance_criteria":"- [ ] Task 16c entirely removed from plan (lines 2163-2325)\n- [ ] T16c node and all edges removed from Mermaid diagram\n- [ ] Task 16c reference removed from parallel work opportunities (line 209)\n- [ ] Contradictory note at line 3021 removed\n- [ ] 2 visibility seed policies added to Task 22 (seed:property-visible-to, seed:property-excluded-from) matching spec lines 1078-1090\n- [ ] Seed policy count updated 14→16 everywhere in plan\n- [ ] ADR 0015 Applies To updated from 'Tasks 4a, 4b, 16a-c' to 'Tasks 4a, 4b, 16a-b'","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T14:49:40Z","created_by":"seanb4t","updated_at":"2026-02-08T15:10:10Z","closed_at":"2026-02-08T15:10:10Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.201","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.202","title":"CompiledPolicy.Effect type contradicts ADR #62","description":"PR #69 review finding C2 (Critical). ADR #62 states: 'Define a separate PolicyEffect type... used exclusively for StoredPolicy.Effect and CompiledPolicy.Effect.' But the plan defines CompiledPolicy.Effect as Effect (the decision enum with DefaultDeny/Allow/Deny/SystemBypass) at line 1634. Bootstrap code (lines 3107-3113, 3145-3151) then has awkward conversion switching on compiled.Effect comparing against policy.EffectAllow/policy.EffectDeny — these are decision-level values that should never appear on a compiled policy.\n\nDecision: Apply ADR #62 fully — change CompiledPolicy.Effect to PolicyEffect. Eliminates the awkward bootstrap conversion code. ADR #62 text remains as-is.\n\nFiles: docs/plans/2026-02-06-full-abac-implementation.md","acceptance_criteria":"- [ ] CompiledPolicy.Effect changed from Effect to PolicyEffect in plan\n- [ ] Bootstrap conversion code eliminated (lines 3107-3113, 3145-3151)\n- [ ] All references to compiled.Effect updated to use PolicyEffect values (PolicyEffectPermit/PolicyEffectForbid)\n- [ ] Decision documented in design decisions document","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T14:49:42Z","created_by":"seanb4t","updated_at":"2026-02-08T15:13:07Z","closed_at":"2026-02-08T15:13:07Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.202","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.203","title":"Lock naming deviation missing from Spec Deviations table (ADR #61)","description":"PR #69 review finding C3 (Critical). ADR #61 explicitly states: 'Spec Deviations table in the implementation plan MUST include this entry.' The table (line 4048) has 3 entries but omits the lock naming format change (lock:\u003ctype\u003e:\u003cresource_id\u003e:\u003caction\u003e vs spec lock:\u003cresource_ulid\u003e:\u003caction\u003e).\n\nAdditionally, the spec itself has an internal inconsistency — lines 2412-2413 use the old format but lines 2656-2662 use the new format. The spec needs updating at lines 2412-2417 to match.\n\nFiles: docs/plans/2026-02-06-full-abac-implementation.md, docs/specs/2026-02-05-full-abac-design.md","acceptance_criteria":"- [ ] Fourth row added to Spec Deviations table for lock naming format\n- [ ] Spec lines 2412-2417 updated to use new lock naming format (lock:\u003ctype\u003e:\u003cresource_id\u003e:\u003caction\u003e)\n- [ ] Both plan and spec internally consistent on lock naming","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T14:49:45Z","created_by":"seanb4t","updated_at":"2026-02-08T15:15:33Z","closed_at":"2026-02-08T15:15:33Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.203","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.204","title":"AST serialization risk — no validation spike","description":"PR #69 review finding I1 (Important). Task 8 defines the AST using participle struct tags and Task 7 stores serialized AST as JSONB. participle ASTs may use unexported fields and interface types that don't survive json.Marshal/Unmarshal round-trips. If this fails, the entire policy storage model breaks. This would only be discovered at Task 12 implementation, by which time 11 tasks are complete.\n\nFiles: docs/plans/2026-02-06-full-abac-implementation.md\nConceptual overlap: Task 7 (policy storage), Task 8 (AST/parser), Task 12 (integration)","acceptance_criteria":"- [ ] New Task 0 (AST Serialization Spike) added to plan before Task 1\n- [ ] Task 0 validates participle AST → JSON → AST round-trips\n- [ ] Task 0 added to Mermaid dependency diagram as prerequisite for Tasks 7 and 8\n- [ ] Task 0 includes specific test: parse policy string → AST → JSON → unmarshal → compare","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T14:50:00Z","created_by":"seanb4t","updated_at":"2026-02-08T15:38:18Z","closed_at":"2026-02-08T15:38:18Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.204","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.205","title":"Task 4b scope creep — missing deletion methods","description":"PR #69 review finding I2 (Important). Task 4b requires DeleteCharacter, DeleteObject, DeleteLocation but notes they 'do not currently exist' and 'MUST be created as part of this task scope.' This significantly increases task complexity and mixes concerns (deletion methods + property cascade deletion).\n\nFiles: docs/plans/2026-02-06-full-abac-implementation.md\nConceptual overlap: I6 (also touches Task 4b acceptance criteria)","acceptance_criteria":"- [ ] Task 4b split into Task 4b (create deletion methods with tests) and Task 4c (add property cascade deletion)\n- [ ] Dependency edge added: Task 4c depends on Task 4b\n- [ ] Mermaid diagram updated with new Task 4c node\n- [ ] Both tasks have clear, focused acceptance criteria","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T14:50:02Z","created_by":"seanb4t","updated_at":"2026-02-08T15:20:36Z","closed_at":"2026-02-08T15:20:36Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.205","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.205","depends_on_id":"holomush-5k1.209","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.206","title":"No rollback path for direct-replacement migration (Task 28)","description":"PR #69 review finding I3 (Important). Task 28 replaces all 28 AccessControl.Check() call sites with no rollback path. Task 29 deletes old code. ADR #36 chose direct replacement (no adapter) and ADR #37 removed shadow mode.\n\nDecision: Document git revert of the migration commit as the rollback strategy. No feature flag needed — consistent with ADR #36 (no adapter) and ADR #37 (no shadow mode). The comprehensive test coverage required by Task 28 acceptance criteria provides the safety net.\n\nFiles: docs/plans/2026-02-06-full-abac-implementation.md\nConceptual overlap: I8 (also touches Task 28/29 migration)","acceptance_criteria":"- [ ] Acceptance criterion added to Task 28: document git revert as rollback strategy\n- [ ] Rollback procedure documented: which commits to revert, in what order\n- [ ] Decision documented in design decisions document","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T14:50:05Z","created_by":"seanb4t","updated_at":"2026-02-08T15:28:41Z","closed_at":"2026-02-08T15:28:41Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.206","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.206","depends_on_id":"holomush-5k1.211","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.207","title":"Recursive CTE in Task 16b missing cycle detection","description":"PR #69 review finding I4 (Important). Task 16b acceptance criteria require 'Cycle detection → error before depth limit' but the SQL example only has WHERE c.depth \u003c 20 — no path TEXT[] column for cycle detection. The spec (lines 1256-1264) requires both depth limit AND cycle detection via array path column.\n\nFiles: docs/plans/2026-02-06-full-abac-implementation.md","acceptance_criteria":"- [ ] CTE updated to include ARRAY[parent_id] AS path column\n- [ ] Cycle detection condition added: AND o.id::text != ALL(c.path)\n- [ ] Both depth limit (WHERE c.depth \u003c 20) and cycle detection present\n- [ ] Matches spec requirements at lines 1256-1264","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T14:50:09Z","created_by":"seanb4t","updated_at":"2026-02-08T15:30:13Z","closed_at":"2026-02-08T15:30:13Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.207","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.208","title":"Audit logger async/sync contradiction for system bypasses","description":"PR #69 review finding I5 (Important). Plan specifies sync writes for denials, async for allows. But system bypasses (which are allows) need guaranteed audit trails per Task 17 line 2069. Async channel could drop entries under load. Design decision #56 says 'Audit Off Mode Includes System Bypasses' but doesn't specify sync vs async for bypass entries.\n\nDecision: System bypasses use the sync audit path (like denials). Guarantees audit trail for privileged operations at slight performance cost. This is consistent with the security principle that all privilege escalation must be auditable.\n\nFiles: docs/plans/2026-02-06-full-abac-implementation.md","acceptance_criteria":"- [ ] Plan updated: system bypasses explicitly use sync audit path\n- [ ] Task 17 acceptance criteria updated to specify sync writes for bypasses\n- [ ] Decision documented in design decisions document\n- [ ] Audit path table updated: denials=sync, regular allows=async, system bypasses=sync","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T14:50:18Z","created_by":"seanb4t","updated_at":"2026-02-08T15:32:38Z","closed_at":"2026-02-08T15:32:38Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.208","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.209","title":"Task 4b orphan cleanup acceptance criteria underspecified","description":"PR #69 review finding I6 (Important). Plan says 'periodic check' and 'log at WARN' for orphan property cleanup. Spec (lines 2089-2106) requires: configurable timer (default daily), configurable grace period (default 24h), two-consecutive-run persistence before deletion, and log at ERROR (not WARN) when threshold exceeded.\n\nFiles: docs/plans/2026-02-06-full-abac-implementation.md\nConceptual overlap: I2 (also touches Task 4b)","acceptance_criteria":"- [ ] Task 4b acceptance criteria updated with configurable timer (default daily)\n- [ ] Configurable grace period (default 24h) added\n- [ ] Two-consecutive-run persistence requirement before deletion added\n- [ ] Log level changed from WARN to ERROR when threshold exceeded\n- [ ] All acceptance criteria match spec lines 2089-2106","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T14:50:20Z","created_by":"seanb4t","updated_at":"2026-02-08T15:17:15Z","closed_at":"2026-02-08T15:17:15Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.209","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.21","title":"[I6] Strengthen bare boolean handling in DSL compiler","description":"PR #65 review finding (Architecture). Grammar allows bare booleans (principal.admin) which become fragile when attribute types evolve. If admin changes from bool to string, policies silently break via fail-safe false. Acceptance Criteria: (1) Spec states bare boolean in when clause MUST produce compile error (2) Defensive pattern docs updated with explicit examples (3) Policy lint --fix migration tool mentioned. Dependencies: DSL grammar section.","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T20:21:26Z","created_by":"seanb4t","updated_at":"2026-02-06T20:53:34Z","closed_at":"2026-02-06T20:53:34Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.21","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.210","title":"Task 23 Bootstrap Sequence spec reference wrong","description":"PR #69 review finding I7 (Important). Line 3001 cites 'Bootstrap Sequence (lines 2916-2992)' but the heading is at spec line 3007. Lines 2916-2992 cover the wrong section entirely.\n\nFiles: docs/plans/2026-02-06-full-abac-implementation.md","acceptance_criteria":"- [ ] Spec reference at line 3001 changed from 'lines 2916-2992' to 'lines 3007-3173'\n- [ ] Verify no other incorrect spec line references in Task 23","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T14:50:22Z","created_by":"seanb4t","updated_at":"2026-02-08T15:34:16Z","closed_at":"2026-02-08T15:34:16Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.210","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.211","title":"Task 28 excludes functions.go without justification","description":"PR #69 review finding I8 (Important). Plan says 'functions.go has capability enforcer calls, not AccessControl' but the spec call site inventory (line 3223) lists it. Task 29 removes capability enforcer, so functions.go needs handling in one of the migration tasks.\n\nFiles: docs/plans/2026-02-06-full-abac-implementation.md\nConceptual overlap: I3 (also touches Task 28/29 migration)","acceptance_criteria":"- [ ] Either: acceptance criterion added to Task 29 for functions.go handling, OR Task 28 exclusion clarified with justification\n- [ ] All call sites from spec inventory (line 3223) accounted for across Tasks 28-29\n- [ ] No call sites fall through the cracks between Task 28 and Task 29","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T14:50:25Z","created_by":"seanb4t","updated_at":"2026-02-08T15:23:34Z","closed_at":"2026-02-08T15:23:34Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.211","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.212","title":"EntityProperty.ParentID should use ulid.ULID not string","description":"PR #69 review finding S1 (Suggestion). Line 518 defines ParentID as string while ID uses ulid.ULID. Spec line 1140 says 'ULID' type. All existing world model entities use ulid.ULID for ID fields.\n\nFiles: docs/plans/2026-02-06-full-abac-implementation.md","acceptance_criteria":"- [ ] EntityProperty.ParentID type changed from string to ulid.ULID in plan\n- [ ] Consistent with all other world model entity ID fields","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T14:50:33Z","created_by":"seanb4t","updated_at":"2026-02-08T15:42:14Z","closed_at":"2026-02-08T15:42:14Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.212","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.213","title":"Sequential provider timeout starvation — document known limitation","description":"PR #69 review finding S2 (Suggestion). One slow provider can starve all subsequent providers in the sequential resolution model. Acceptable for MVP (~200 users) but should be documented as a known limitation.\n\nFiles: docs/plans/2026-02-06-full-abac-implementation.md","acceptance_criteria":"- [ ] Known limitation documented in plan: sequential provider model allows one slow provider to starve others\n- [ ] Documented as acceptable for MVP scale (~200 users)\n- [ ] Future optimization noted: parallel provider execution if profiling shows latency bottleneck","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T14:50:36Z","created_by":"seanb4t","updated_at":"2026-02-08T15:42:14Z","closed_at":"2026-02-08T15:42:14Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.213","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.214","title":"Degraded mode triggers incomplete (Task 31)","description":"PR #69 review finding S3 (Suggestion). Task 31 does not fully specify triggers for degraded mode (compile-time corruption vs runtime errors vs transient errors). Should add a triggers table with expected behavior for each error category.\n\nFiles: docs/plans/2026-02-06-full-abac-implementation.md","acceptance_criteria":"- [ ] Triggers table added to Task 31 covering: compile-time corruption, runtime evaluation errors, transient DB errors\n- [ ] Expected behavior specified for each trigger type\n- [ ] Recovery path documented for each trigger type","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T14:50:37Z","created_by":"seanb4t","updated_at":"2026-02-08T15:42:14Z","closed_at":"2026-02-08T15:42:14Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.214","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.215","title":"Deferred Features table missing policy diff and policy export","description":"PR #69 review finding S4 (Suggestion). Spec lists 4 deferred commands (lines 3429-3447). Plan includes policy lint and policy import but omits policy diff and policy export.\n\nFiles: docs/plans/2026-02-06-full-abac-implementation.md","acceptance_criteria":"- [ ] policy diff added to Deferred Features table\n- [ ] policy export added to Deferred Features table\n- [ ] All 4 deferred commands from spec lines 3429-3447 present in plan","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T14:50:38Z","created_by":"seanb4t","updated_at":"2026-02-08T15:42:14Z","closed_at":"2026-02-08T15:42:14Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.215","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.216","title":"Task 21a could be an independent pre-ABAC PR","description":"PR #69 review finding S5 (Suggestion). Task 21a only modifies existing code in internal/access/permissions.go — no ABAC dependency. Could be submitted as an independent PR to unblock seed policy definitions earlier in the implementation timeline.\n\nFiles: docs/plans/2026-02-06-full-abac-implementation.md","acceptance_criteria":"- [ ] Task 21a annotated in plan as potentially independent/pre-ABAC\n- [ ] Dependency analysis confirms no ABAC-specific code required\n- [ ] If split out: separate bead created for pre-ABAC PR","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T14:50:40Z","created_by":"seanb4t","updated_at":"2026-02-08T15:42:14Z","closed_at":"2026-02-08T15:42:14Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.216","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.217","title":"C1: Fix duplicate Task 17 heading — rename to Task 18","description":"Plan line 2344 is titled 'Task 17: Build AccessPolicyEngine' but content describes Policy Cache with LISTEN/NOTIFY. Mermaid diagram (line 119), ADR table (line 49), and critical path (line 214) all correctly reference Task 18. An implementer looking for Task 18 will not find it. Fix: rename line 2344 to 'Task 18: Policy cache with LISTEN/NOTIFY invalidation'. File: docs/plans/2026-02-06-full-abac-implementation.md. Overlap: C2, I1, I2, T2 (same file sections).","acceptance_criteria":"- [ ] Heading at plan line 2344 renamed to 'Task 18: Policy cache with LISTEN/NOTIFY invalidation'\n- [ ] All Task 17/18 references consistent throughout plan\n- [ ] Mermaid diagram labels match section headings","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T17:22:42Z","created_by":"seanb4t","updated_at":"2026-02-08T18:12:23Z","closed_at":"2026-02-08T18:12:23Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.217","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.218","title":"C2: Fix Mermaid arrow T6→T5 — should be T5→T6","description":"Diagram has T6--\u003eT5 (Task 6 blocks Task 5), but Task 6 text (line 1039) explicitly says 'Requires Task 5 completion.' Task 6 extends AttributeSchema defined in Task 5 — the arrow is backwards. Fix: change T6--\u003eT5 to T5--\u003eT6. File: docs/plans/2026-02-06-full-abac-implementation.md (Mermaid diagram). Overlap: C1, I1 (same diagram section).","acceptance_criteria":"- [ ] Mermaid arrow changed from T6--\u003eT5 to T5--\u003eT6\n- [ ] Dependency direction matches Task 6 text ('Requires Task 5 completion')","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T17:22:42Z","created_by":"seanb4t","updated_at":"2026-02-08T18:14:28Z","closed_at":"2026-02-08T18:14:28Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.218","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.218","depends_on_id":"holomush-5k1.217","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.219","title":"C3: Fix seed policy count and add missing visibility policies to Task 9","description":"Line 1496 claims '16 seed policies plus catch-all forbid test case' but list contains only 14 permit policies + 1 catch-all forbid = 15 total. Missing: seed:property-visible-to and seed:property-excluded-from (present in Task 22 SeedPolicies()). Also seed:property-excluded-from is a forbid policy, so '14 permit, 2 with visibility' (line 2890) should be '15 permit, 1 forbid'. File: docs/plans/2026-02-06-full-abac-implementation.md. Overlap: I10 (seed policies).","acceptance_criteria":"- [ ] 2 missing visibility policies added to Task 9 parser test corpus\n- [ ] Seed policy count description corrected to match actual count\n- [ ] Line 2890 description corrected: '15 permit, 1 forbid' (not '14 permit, 2 with visibility')","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T17:22:42Z","created_by":"seanb4t","updated_at":"2026-02-08T18:12:23Z","closed_at":"2026-02-08T18:12:23Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.219","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.22","title":"[I11] Document rationale for three distinct circuit breaker designs","description":"PR #65 review finding (Documentation). Three circuit breaker designs with different parameters: general provider (10 errors/30s), PropertyProvider (3 timeouts/60s), session (logging-only per C6). Acceptance Criteria: (1) Brief note explaining why parameters differ (2) Parameters consolidated into reference table (3) Session CB updated per C6. Dependencies: blocked by C6.","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T20:21:30Z","created_by":"seanb4t","updated_at":"2026-02-06T20:59:09Z","closed_at":"2026-02-06T20:59:09Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.22","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.220","title":"I1: Remove spurious T4a→T7 dependency and update critical path","description":"T4a--\u003eT7 makes PolicyStore wait for EntityProperty/PropertyRepository. PolicyStore operates on access_policies and has no relation to EntityProperty. The legitimate dependency is T4a--\u003eT16b (PropertyProvider needs PropertyRepository, line 179). This edge artificially lengthens the critical path. File: docs/plans/2026-02-06-full-abac-implementation.md (Mermaid diagram + critical path). Overlap: C1, C2 (same diagram).","acceptance_criteria":"- [ ] T4a--\u003eT7 arrow removed from Mermaid dependency diagram\n- [ ] Critical path description (line 214) updated to reflect correct dependencies\n- [ ] No other dependency arrows reference this spurious relationship","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T17:22:43Z","created_by":"seanb4t","updated_at":"2026-02-08T18:38:07Z","closed_at":"2026-02-08T18:38:07Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.220","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.220","depends_on_id":"holomush-5k1.217","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.221","title":"I2: Add no-short-circuit MUST requirement to Task 17 acceptance criteria","description":"Spec lines 1697-1703 state: 'Full evaluation MUST be used when policy test is active or audit mode is all.' Task 17 acceptance criteria don't mention this requirement. File: docs/plans/2026-02-06-full-abac-implementation.md (Task 17 section). Overlap: C1 (Task 17/18 area), T2 (staleness behavior).","acceptance_criteria":"- [ ] Acceptance criterion added to Task 17: 'Full policy evaluation (no short-circuit) when policy test active or audit mode is all'\n- [ ] Spec reference (lines 1697-1703) cited in criterion","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T17:22:43Z","created_by":"seanb4t","updated_at":"2026-02-08T18:38:07Z","closed_at":"2026-02-08T18:38:07Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.221","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.221","depends_on_id":"holomush-5k1.217","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.222","title":"I3: Standardize import paths to use types.X in all code snippets","description":"Task 5 defines types in internal/access/policy/types/types.go, but: Task 11 imports from internal/access/policy and uses policy.AttributeBags; Task 14 resolver imports both internal/access/policy and types inconsistently; Task 17 Engine in package policy uses AccessRequest/Decision as if in same package. Decision (from design review): all snippets use types.AccessRequest, types.Decision, etc. directly — no re-export aliases. File: docs/plans/2026-02-06-full-abac-implementation.md (multiple task sections). Overlap: I4 (PolicyEffect location), affects Tasks 5, 7, 11, 12, 14, 17.","design":"Decision: All snippets standardized to use types.X imports directly. No re-export type aliases from policy package.","acceptance_criteria":"- [ ] All code snippets import from internal/access/policy/types\n- [ ] No snippets use policy.AccessRequest or policy.Decision\n- [ ] Import consistency verified across all 35 tasks","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T17:22:43Z","created_by":"seanb4t","updated_at":"2026-02-08T18:26:33Z","closed_at":"2026-02-08T18:26:33Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.222","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.223","title":"I4: Add PolicyEffect to Task 5 shared types package","description":"Per Decision #62, PolicyEffect (Permit/Forbid) is separate from Effect (Allow/Deny/DefaultDeny/SystemBypass). Task 7 references it in the store package, but CompiledPolicy (Task 12, policy package) also uses it. If PolicyEffect lives in store, circular import results. Decision: PolicyEffect belongs in internal/access/policy/types/ alongside other shared types. File: docs/plans/2026-02-06-full-abac-implementation.md (Tasks 5, 7, 12). Overlap: I3 (import paths), TD1 (PolicyEffect type).","design":"Decision: PolicyEffect moved to shared types package (internal/access/policy/types/) to avoid circular imports between store and policy packages.","acceptance_criteria":"- [ ] PolicyEffect type added to Task 5 in types package\n- [ ] Task 7 snippets updated to import PolicyEffect from types\n- [ ] Task 12 CompiledPolicy snippets import from types\n- [ ] No circular import possible","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T17:22:43Z","created_by":"seanb4t","updated_at":"2026-02-08T18:38:07Z","closed_at":"2026-02-08T18:38:07Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.223","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.223","depends_on_id":"holomush-5k1.222","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.224","title":"I5: Fix spec deviations table — lock naming is Task 25b, not Task 26","description":"Lock naming lock:\u003ctype\u003e:\u003cid\u003e:\u003caction\u003e is implemented in Task 25b (lock/unlock commands), not Task 26 (admin CRUD). File: docs/plans/2026-02-06-full-abac-implementation.md (Spec Deviations table, line 4108). Overlap: I8 (same table).","acceptance_criteria":"- [ ] Spec deviations table entry updated from Task 26 to Task 25b","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T17:22:43Z","created_by":"seanb4t","updated_at":"2026-02-08T18:26:33Z","closed_at":"2026-02-08T18:26:33Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.224","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.225","title":"I6: Fix Task 4b — change Create to Modify for existing service.go","description":"internal/world/service.go already exists; Task 4b adds a DeleteCharacter method to it, not creating a new file. File: docs/plans/2026-02-06-full-abac-implementation.md (Task 4b files section, line 676). No overlap with other findings.","acceptance_criteria":"- [ ] Task 4b files section says 'Modify' instead of 'Create' for service.go","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T17:22:43Z","created_by":"seanb4t","updated_at":"2026-02-08T18:26:33Z","closed_at":"2026-02-08T18:26:33Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.225","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.226","title":"I7: Fix pg_notify payload — use policyID to match spec","description":"Plan (line 1309) uses pg_notify('policy_changed', name) but spec (line 2117) uses pg_notify('policy_changed', policyID). Decision (from design review): use policyID to match spec. No spec deviation needed. File: docs/plans/2026-02-06-full-abac-implementation.md (Task 7 PolicyStore section). Overlap: I5, I8 (if spec deviations involved).","design":"Decision: Align plan with spec by using policyID in pg_notify payload. No intentional deviation.","acceptance_criteria":"- [ ] All pg_notify references in plan updated from name to policyID\n- [ ] Matches spec line 2117: pg_notify('policy_changed', policyID)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T17:22:43Z","created_by":"seanb4t","updated_at":"2026-02-08T18:26:33Z","closed_at":"2026-02-08T18:26:33Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.226","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.227","title":"I8: Fix spec deviations table — serial PK should be single-column PK","description":"The deviation is composite vs single-column PK, not serial vs text. Current wording 'serial PK' is inaccurate. File: docs/plans/2026-02-06-full-abac-implementation.md (Spec Deviations table, line 4105). Overlap: I5 (same table).","acceptance_criteria":"- [ ] Deviations table entry updated from 'serial PK' to 'single-column PK'","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T17:22:43Z","created_by":"seanb4t","updated_at":"2026-02-08T18:38:07Z","closed_at":"2026-02-08T18:38:07Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.227","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.227","depends_on_id":"holomush-5k1.224","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.228","title":"I9: Add missing spec reference to Task 11 for Evaluation Algorithm Key Behaviors","description":"Task 11 references 'Error Handling (lines 1503-1640)' but the primary evaluator semantics (missing attributes, fail-safe) are at Evaluation Algorithm \u003e Key Behaviors (lines 1692-1714). File: docs/plans/2026-02-06-full-abac-implementation.md (Task 11 spec references, line 1646). Overlap: I2 (evaluation semantics).","acceptance_criteria":"- [ ] Spec reference 'Evaluation Algorithm \u003e Key Behaviors (lines 1692-1714)' added to Task 11","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T17:22:43Z","created_by":"seanb4t","updated_at":"2026-02-08T18:26:33Z","closed_at":"2026-02-08T18:26:33Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.228","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.229","title":"I10: Verify Task 14 LRU cache matches spec — reviewer incorrectly flagged","description":"Reviewer said spec (lines 1891-1970) describes per-request caching 'without specifying LRU or a size limit.' However, spec lines 1944-1951 DO specify 'Default maxEntries=100' with LRU eviction semantics. The plan matches the spec. May close as not-applicable after verification. File: docs/plans/2026-02-06-full-abac-implementation.md (Task 14). Overlap: C3 (seed policies).","acceptance_criteria":"- [ ] Verify spec lines 1944-1951 specify maxEntries=100 with LRU\n- [ ] If confirmed matching, close as not-applicable with note\n- [ ] If discrepancy found, add clarifying comment to plan","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T17:22:43Z","created_by":"seanb4t","updated_at":"2026-02-08T18:46:20Z","closed_at":"2026-02-08T18:46:20Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.229","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.23","title":"[M3] Add property seed policies to decision #48 list","description":"PR #65 review finding (Documentation). Decision #48 lists 11 seed policies but omits 3 property visibility policies from main spec (seed:property-public-read, seed:property-private-read, seed:property-admin-read). Acceptance Criteria: decision #48 lists all 14 seed policies or references main spec. Dependencies: decisions document, seed policies section.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T20:21:31Z","created_by":"seanb4t","updated_at":"2026-02-06T21:01:19Z","closed_at":"2026-02-06T21:01:19Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.23","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.230","title":"T1: Add per-package error-path test requirement to Task 28","description":"Task 28 migrates 28 call sites but has no acceptance criterion requiring error-path test per migration package. A missed return after logging could silently grant access. Each migrated call site test MUST verify: (1) correct AccessRequest construction, (2) Decision.Allowed=false handling, (3) Evaluate() error!=nil handling (fail-closed). Criticality: 10/10 (security). File: docs/plans/2026-02-06-full-abac-implementation.md (Task 28). Overlap: T3, T8 (error handling).","acceptance_criteria":"- [ ] Task 28 acceptance criteria include per-package error-path test requirement\n- [ ] Test template provided for: AccessRequest construction, deny handling, error fail-closed\n- [ ] Each migrated call site has explicit error-path coverage","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T17:22:43Z","created_by":"seanb4t","updated_at":"2026-02-08T18:12:23Z","closed_at":"2026-02-08T18:12:23Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.230","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.231","title":"T2: Add cache staleness fail-closed test to Task 17 TDD list","description":"Task 17 acceptance criteria mention staleness→fail-closed (line 2360), but TDD test list (lines 2372-2376) has no corresponding test case. Criticality: 9/10. File: docs/plans/2026-02-06-full-abac-implementation.md (Task 17 TDD list). Overlap: C1 (Task 17/18 area), I2 (evaluation behavior).","acceptance_criteria":"- [ ] Test case added: 'cache staleness exceeds threshold → Evaluate() returns EffectDefaultDeny for all requests'","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T17:22:44Z","created_by":"seanb4t","updated_at":"2026-02-08T18:38:07Z","closed_at":"2026-02-08T18:38:07Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.231","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.231","depends_on_id":"holomush-5k1.217","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.232","title":"T3: Add session resolution error path tests to Task 30","description":"Task 30 integration tests have no Describe block for session resolution error paths (SESSION_INVALID, SESSION_STORE_ERROR). Criticality: 9/10. File: docs/plans/2026-02-06-full-abac-implementation.md (Task 30 integration tests). Overlap: T1 (error handling), T8 (Task 30).","acceptance_criteria":"- [ ] Describe('Session resolution') block added to Task 30\n- [ ] Test scenarios: expired session, deleted character, database failure\n- [ ] Each scenario verifies fail-closed behavior","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T17:22:44Z","created_by":"seanb4t","updated_at":"2026-02-08T18:26:33Z","closed_at":"2026-02-08T18:26:33Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.232","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.233","title":"T4: Add degraded mode audit trail test to Task 31 TDD list","description":"Spec requires audit entries with reason=degraded_mode, but Task 31 TDD list only tests logging, not audit table writes. Criticality: 9/10. File: docs/plans/2026-02-06-full-abac-implementation.md (Task 31). Overlap: T5 (audit logging).","acceptance_criteria":"- [ ] Test case added verifying audit entry exists with reason='degraded_mode' and effect default_deny","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T17:22:44Z","created_by":"seanb4t","updated_at":"2026-02-08T18:26:33Z","closed_at":"2026-02-08T18:26:33Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.233","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.234","title":"T5: Add system bypass audit in off mode tests to Task 19","description":"Task 17 acceptance criteria require system bypass audit in all modes including 'off', but Task 19 TDD list doesn't test this explicitly. Criticality: 8/10. File: docs/plans/2026-02-06-full-abac-implementation.md (Task 19). Overlap: T4 (audit logging).","acceptance_criteria":"- [ ] Test cases added: (1) off mode + system_bypass → written, (2) off mode + allow → dropped, (3) off mode + deny → dropped","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T17:22:44Z","created_by":"seanb4t","updated_at":"2026-02-08T18:38:07Z","closed_at":"2026-02-08T18:38:07Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.234","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.234","depends_on_id":"holomush-5k1.233","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.235","title":"T6: Add FuzzEvaluateConditions to Task 11","description":"Task 10 creates FuzzParse for the parser; spec (lines 3293-3297) also recommends evaluator fuzzing. No FuzzEvaluateConditions exists. Criticality: 7/10. File: docs/plans/2026-02-06-full-abac-implementation.md (Task 11). Overlap: Task 10 (fuzzing).","acceptance_criteria":"- [ ] FuzzEvaluateConditions added to Task 11 TDD list\n- [ ] Fuzz target uses random ASTs against random attribute bags\n- [ ] CI integration noted (30s per build, extended nightly)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T17:22:44Z","created_by":"seanb4t","updated_at":"2026-02-08T18:46:20Z","closed_at":"2026-02-08T18:46:20Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.235","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.236","title":"T7: Add BenchmarkProviderStarvation to Task 21 benchmark list","description":"Spec (line 1743) requires provider starvation testing. Task 21 benchmark list has no BenchmarkProviderStarvation. Criticality: 7/10. File: docs/plans/2026-02-06-full-abac-implementation.md (Task 21). No overlap.","acceptance_criteria":"- [ ] BenchmarkProviderStarvation added to Task 21 benchmark list\n- [ ] Simulates slow first provider consuming ~80ms of 100ms budget\n- [ ] Verifies subsequent providers receive cancelled contexts","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T17:22:44Z","created_by":"seanb4t","updated_at":"2026-02-08T18:46:20Z","closed_at":"2026-02-08T18:46:20Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.236","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.237","title":"T8: Fix Task 30 goroutine re-entry — NOT detected per spec","description":"Spec lines 559-576 explicitly state cross-goroutine re-entrance is NOT detected at runtime — prevented by convention and code review only. Task 30 integration test says it 'detects goroutine-based re-entry attempts', contradicting the spec. Decision (from design review): match spec — test should verify goroutine-based re-entry is NOT detected, documenting the limitation. File: docs/plans/2026-02-06-full-abac-implementation.md (Task 30). Overlap: T1, T3 (error handling).","design":"Decision: Match spec — goroutine-based re-entry is NOT detected at runtime. Integration test documents this as a known limitation, matching spec convention-only approach.","acceptance_criteria":"- [ ] Task 30 integration test updated: goroutine-based re-entry test documents guard does NOT detect cross-goroutine re-entrance\n- [ ] Test verifies synchronous re-entry still panics (this IS detected)\n- [ ] Comment references spec lines 559-576 for rationale","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T17:22:44Z","created_by":"seanb4t","updated_at":"2026-02-08T18:38:07Z","closed_at":"2026-02-08T18:38:07Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.237","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.237","depends_on_id":"holomush-5k1.232","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.238","title":"TD1: Mandate string-based PolicyEffect in spec to prevent iota confusion","description":"If both PolicyEffect and Effect use iota starting from 0, PolicyEffectPermit==0 maps to EffectDefaultDeny==0 under numeric conversion — silent security bug. Decision (from design review): update spec to mandate type PolicyEffect string with const PolicyEffectPermit PolicyEffect = \"permit\". Provide sanctioned conversion function with explicit mapping (Permit→EffectAllow, Forbid→EffectDeny). Requires spec change. File: docs/specs/2026-02-05-full-abac-design.md (types section) AND docs/plans/2026-02-06-full-abac-implementation.md (Task 5). Overlap: TD2 (type safety), I3, I4 (types package).","design":"Decision: PolicyEffect uses type PolicyEffect string (not iota) to prevent numeric confusion with Effect type. Sanctioned conversion function maps Permit→EffectAllow, Forbid→EffectDeny.","acceptance_criteria":"- [ ] Spec updated: PolicyEffect uses string type, not iota\n- [ ] Conversion function documented: Permit→EffectAllow, Forbid→EffectDeny\n- [ ] Plan Task 5 updated to reflect string-based PolicyEffect\n- [ ] Design decision recorded","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T17:22:44Z","created_by":"seanb4t","updated_at":"2026-02-08T18:26:33Z","closed_at":"2026-02-08T18:26:33Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.238","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.239","title":"TD2: Mandate unexported Decision.allowed in spec to prevent invariant bypass","description":"Exported Allowed field can be set directly, violating the Allowed/Effect invariant. Decision{Allowed: true, Effect: EffectDeny} compiles and grants unauthorized access — critical security vulnerability. Decision (from design review): update spec to mandate unexported allowed field with IsAllowed() accessor, plus Validate() at engine return boundary. Constructor functions enforce invariant. Requires spec change. File: docs/specs/2026-02-05-full-abac-design.md (Decision type section) AND docs/plans/2026-02-06-full-abac-implementation.md (Task 5). Overlap: TD1 (type safety), I3, I4 (types package).","design":"Decision: Decision.allowed unexported with IsAllowed() accessor. Validate() at engine boundary. Constructor functions NewAllowDecision()/NewDenyDecision() enforce invariant.","acceptance_criteria":"- [ ] Spec updated: Decision.allowed is unexported\n- [ ] IsAllowed() accessor documented\n- [ ] Validate() method at engine return boundary documented\n- [ ] Constructor functions enforce Allowed/Effect invariant\n- [ ] Plan Task 5 updated to reflect unexported field\n- [ ] Design decision recorded","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T17:22:44Z","created_by":"seanb4t","updated_at":"2026-02-08T18:38:07Z","closed_at":"2026-02-08T18:38:07Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.239","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.239","depends_on_id":"holomush-5k1.238","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.24","title":"[M4] Fix audit query reason column to error_message","description":"PR #65 review finding (Documentation). Provider timeout rate query (line 2077) uses reason column which does not exist in DDL. Should use error_message. Acceptance Criteria: query uses error_message LIKE instead of reason LIKE. Dependencies: same section as C3 (audit queries).","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T20:21:35Z","created_by":"seanb4t","updated_at":"2026-02-06T21:02:22Z","closed_at":"2026-02-06T21:02:22Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.24","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.24","depends_on_id":"holomush-o4lt","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.240","title":"TD3: Add type assertion guidance for AttributeBags in plan","description":"map[string]any means a provider returning int instead of float64 silently breaks numeric comparisons. Implementation-phase guidance: add type assertions in evaluator or type-checked SetAttribute helper. File: docs/plans/2026-02-06-full-abac-implementation.md (Task 11 evaluator). Overlap: TD4 (type safety).","acceptance_criteria":"- [ ] Implementation note added to Task 11 about type assertion requirements for numeric comparisons\n- [ ] SetAttribute helper or evaluator type coercion documented","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T17:22:44Z","created_by":"seanb4t","updated_at":"2026-02-08T18:46:21Z","closed_at":"2026-02-08T18:46:21Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.240","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.241","title":"TD4: Add typed string constant guidance for bare string enums in plan","description":"StoredPolicy.Source, EntityProperty.Visibility, EntityProperty.ParentType are bare strings where typed constants (type PolicySource string) add compile-time safety at zero cost. Implementation-phase guidance. File: docs/plans/2026-02-06-full-abac-implementation.md (Task 5). Overlap: TD3 (type safety).","acceptance_criteria":"- [ ] Implementation note added to Task 5 about using typed string constants\n- [ ] Fields: Source, Visibility, ParentType identified for typed constants","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T17:22:45Z","created_by":"seanb4t","updated_at":"2026-02-08T18:46:21Z","closed_at":"2026-02-08T18:46:21Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.241","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.242","title":"C1: Decision struct code examples use exported Allowed field","description":"PR #69 review finding C1. Plan code snippets use exported `Allowed` field in Decision struct, contradicting the spec and ADR 68 which identify exported Allowed as a critical security vulnerability. Affected lines in plan: 946, 957, 2341, 2375, 2377-2383, 3876, 3899, 3951. Task 5 acceptance criteria (line 836) correctly states `Decision.allowed` is unexported. All code examples must use `decision.IsAllowed()` for reads and `types.NewDecision(...)` for construction. File: docs/plans/2026-02-06-full-abac-implementation.md","acceptance_criteria":"All `Decision{Allowed:` struct literals replaced with `types.NewDecision(...)` constructor calls. All `decision.Allowed` field accesses replaced with `decision.IsAllowed()`. Grep for `Allowed` in Decision context returns zero matches in plan.","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T19:10:58Z","created_by":"seanb4t","updated_at":"2026-02-08T19:41:07Z","closed_at":"2026-02-08T19:41:07Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.242","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.242","depends_on_id":"holomush-5k1.259","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.243","title":"C2: NewDecision() parameter order swapped vs spec","description":"PR #69 review finding C2. Plan line 955 has `NewDecision(effect Effect, policyID, reason string)` but spec defines `NewDecision(effect Effect, reason string, policyID string)`. The policyID and reason parameters are reversed. All test code calling NewDecision (e.g. line 894) must be updated. File: docs/plans/2026-02-06-full-abac-implementation.md. Conceptual overlap with C1 (both modify Decision type usage).","acceptance_criteria":"All NewDecision() calls in plan match spec parameter order: (effect, reason, policyID). Function signature in plan matches spec.","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T19:10:58Z","created_by":"seanb4t","updated_at":"2026-02-08T19:42:04Z","closed_at":"2026-02-08T19:42:04Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.243","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.243","depends_on_id":"holomush-5k1.242","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.243","depends_on_id":"holomush-5k1.259","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.244","title":"C3: Spec Deviations table inverts PK deviation description","description":"PR #69 review finding C3. Plan line 4314 reads 'Primary key uses single-column PK instead of spec composite PK' but the reality is inverted: the spec has single-column PK (`id TEXT PRIMARY KEY`), the plan uses composite PK (`PRIMARY KEY (id, timestamp)`). File: docs/plans/2026-02-06-full-abac-implementation.md","acceptance_criteria":"Description reads 'Primary key uses composite PK (id, timestamp) instead of spec single-column PK (id)' with rationale 'PostgreSQL partitioned tables MUST include partition key in PK.'","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T19:10:59Z","created_by":"seanb4t","updated_at":"2026-02-08T19:41:07Z","closed_at":"2026-02-08T19:41:07Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.244","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.244","depends_on_id":"holomush-5k1.259","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.245","title":"I1: Systematic ~54-line offset in all spec line references","description":"PR #69 review finding I1. Every task's Spec References section is off by ~54 lines due to the +63/-9 spec modifications in this same PR. Since the spec was modified in this PR, the references should be updated. Consistent offset makes it a mechanical fix. File: docs/plans/2026-02-06-full-abac-implementation.md. Should be done AFTER other plan changes that might further shift line numbers.","acceptance_criteria":"All spec line references in plan verified against current spec file. Spot-check 5 random references confirms accuracy within +/-2 lines.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T19:10:59Z","created_by":"seanb4t","updated_at":"2026-02-08T20:10:11Z","closed_at":"2026-02-08T20:10:11Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.245","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.245","depends_on_id":"holomush-5k1.242","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.245","depends_on_id":"holomush-5k1.243","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.245","depends_on_id":"holomush-5k1.244","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.245","depends_on_id":"holomush-5k1.246","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.245","depends_on_id":"holomush-5k1.247","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.245","depends_on_id":"holomush-5k1.248","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.245","depends_on_id":"holomush-5k1.249","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.245","depends_on_id":"holomush-5k1.250","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.245","depends_on_id":"holomush-5k1.251","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.245","depends_on_id":"holomush-5k1.254","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.245","depends_on_id":"holomush-5k1.255","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.245","depends_on_id":"holomush-5k1.256","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.245","depends_on_id":"holomush-5k1.257","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.245","depends_on_id":"holomush-5k1.258","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.246","title":"I2: Task 4b DeleteCharacter signature differs from WorldService conventions","description":"PR #69 review finding I2. Plan line 666 proposes `DeleteCharacter(ctx context.Context, id string) error`. Existing WorldService methods (DeleteLocation, DeleteObject) use `(ctx context.Context, subjectID string, id ulid.ULID) error`. Missing subjectID parameter and uses string instead of ulid.ULID. Decision: match existing conventions for consistency. File: docs/plans/2026-02-06-full-abac-implementation.md","acceptance_criteria":"DeleteCharacter signature matches existing WorldService pattern: (ctx context.Context, subjectID string, id ulid.ULID) error","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T19:10:59Z","created_by":"seanb4t","updated_at":"2026-02-08T19:43:21Z","closed_at":"2026-02-08T19:43:21Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.246","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.246","depends_on_id":"holomush-5k1.259","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.247","title":"I3: Task 7 acceptance criteria duplicates Task 5 type definition","description":"PR #69 review finding I3. Lines 1337-1338 say '`PolicyEffect` type defined' but Task 5 already defines it at lines 991-998. Task 7 should reference `types.PolicyEffect` from Task 5, not redefine it. File: docs/plans/2026-02-06-full-abac-implementation.md","acceptance_criteria":"Task 7 acceptance criteria references Task 5's PolicyEffect type instead of claiming to define it.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T19:10:59Z","created_by":"seanb4t","updated_at":"2026-02-08T19:43:54Z","closed_at":"2026-02-08T19:43:54Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.247","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.247","depends_on_id":"holomush-5k1.259","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.248","title":"I4: Task 2 dynamic partition creation uses *sql.Tx instead of pgx","description":"PR #69 review finding I4. Lines 462-478 use `*sql.Tx` but the project uses pgx/pgxpool throughout. Should use `pgx.Tx` or explicitly mark code as pseudocode. File: docs/plans/2026-02-06-full-abac-implementation.md","acceptance_criteria":"Task 2 code examples use pgx.Tx consistently with the rest of the project, OR are explicitly labeled as pseudocode.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T19:10:59Z","created_by":"seanb4t","updated_at":"2026-02-08T19:44:32Z","closed_at":"2026-02-08T19:44:32Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.248","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.248","depends_on_id":"holomush-5k1.259","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.249","title":"I5: PropertyRepository.ListByParent type mismatch","description":"PR #69 review finding I5. `EntityProperty.ParentID` is `ulid.ULID` (line 619) but `PropertyRepository.ListByParent(parentID string)` accepts string (line 635). Type mismatch will confuse implementers. Conceptual overlap with I2 (type/signature consistency). File: docs/plans/2026-02-06-full-abac-implementation.md","acceptance_criteria":"ListByParent parameter type matches EntityProperty.ParentID type (ulid.ULID).","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T19:10:59Z","created_by":"seanb4t","updated_at":"2026-02-08T19:59:10Z","closed_at":"2026-02-08T19:59:10Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.249","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.249","depends_on_id":"holomush-5k1.246","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.249","depends_on_id":"holomush-5k1.259","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.25","title":"[M5] Add fragment anchors to ADR 0015 references","description":"PR #65 review finding (Documentation). ADR 0015 references main spec sections without fragment anchors for deep-linking. Acceptance Criteria: references include #section-name fragment anchors. Dependencies: ADR 0015.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T20:21:38Z","created_by":"seanb4t","updated_at":"2026-02-06T21:02:57Z","closed_at":"2026-02-06T21:02:57Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.25","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.250","title":"I6: Recursive CTE ORDER BY depth DESC returns deepest, not shallowest","description":"PR #69 review finding I6. Line 2320: `ORDER BY depth DESC LIMIT 1` returns the deepest location ancestor. For finding the containing room (nearest location), this should be `ORDER BY depth ASC LIMIT 1`. File: docs/plans/2026-02-06-full-abac-implementation.md","acceptance_criteria":"SQL uses ORDER BY depth ASC LIMIT 1 to return nearest (shallowest) location ancestor.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T19:10:59Z","created_by":"seanb4t","updated_at":"2026-02-08T19:45:07Z","closed_at":"2026-02-08T19:45:07Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.250","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.250","depends_on_id":"holomush-5k1.259","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.251","title":"I7: Spec Deviations table lock naming line reference is wrong","description":"PR #69 review finding I7. Line 4317 references 'Spec line 2656' for lock naming section but the actual section is around lines 2462-2477. File: docs/plans/2026-02-06-full-abac-implementation.md. Conceptual overlap with I1 and S4 (line reference corrections).","acceptance_criteria":"Lock naming line reference points to correct spec line (~2462-2477 range).","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T19:10:59Z","created_by":"seanb4t","updated_at":"2026-02-08T19:45:43Z","closed_at":"2026-02-08T19:45:43Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.251","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.251","depends_on_id":"holomush-5k1.259","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.252","title":"A1: Shadow mode recommendation — dismissed per ADRs #36/#37/#65","description":"PR #69 review finding A1. Review recommended splitting Task 28 into Phase A (shadow mode: run both engines, log mismatches) and Phase B (switch to new engine). DECISION: Dismissed. ADR #36 (Direct Replacement, No Adapter), ADR #37 (No Shadow Mode), and ADR #65 (Git Revert as Rollback) explicitly reject this approach. Rationale: HoloMUSH has no production releases or deployed users; shadow mode adds complexity for a system that has never been released. Rollback via git revert of Task 28 commit provides adequate safety net combined with comprehensive test coverage.","acceptance_criteria":"Dismissal rationale documented in design decisions file referencing ADRs #36, #37, #65. No plan changes needed.","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T19:11:00Z","created_by":"seanb4t","updated_at":"2026-02-08T19:52:04Z","closed_at":"2026-02-08T19:52:04Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.252","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.252","depends_on_id":"holomush-5k1.259","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.253","title":"A2: Split performance target — cached \u003c5ms, cold \u003c10ms","description":"PR #69 review finding A2. Review noted p99 \u003c5ms (ADR #23) may be unrealistic with eager PostgreSQL resolution: PropertyProvider recursive CTE (20-level containers) + sequential provider execution could consume 10-15ms on cache miss. DECISION: Split the target. Keep \u003c5ms for cached/warm requests (majority case), add \u003c10ms target for cold (cache-miss) requests. Move circuit breaker consideration to Task 16b. Requires new ADR in decisions file and updates to spec/plan performance tables. Files: docs/specs/2026-02-05-full-abac-design-decisions.md, docs/specs/2026-02-05-full-abac-design.md, docs/plans/2026-02-06-full-abac-implementation.md","acceptance_criteria":"New ADR documenting split target added to decisions file. ADR #23 updated with split targets. Spec performance table shows cached \u003c5ms and cold \u003c10ms. Plan performance references updated.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T19:11:00Z","created_by":"seanb4t","updated_at":"2026-02-08T19:49:27Z","closed_at":"2026-02-08T19:49:27Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.253","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.253","depends_on_id":"holomush-5k1.259","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.254","title":"A3: LISTEN/NOTIFY goroutine lifecycle underspecified","description":"PR #69 review finding A3. Task 18 creates a `go listenForNotifications()` goroutine but doesn't specify: graceful shutdown via context cancellation, reconnect detection on connection loss, goroutine ownership (who starts/stops it). Additionally, reload holds exclusive lock during DB fetch (~50ms), blocking all Evaluate() calls. File: docs/plans/2026-02-06-full-abac-implementation.md (Task 18 section)","acceptance_criteria":"Task 18 specifies: (1) context-based graceful shutdown, (2) reconnect with exponential backoff, (3) goroutine started by PolicyStore.Start() and stopped via context cancellation, (4) reload uses RWMutex read lock for evaluation during reload.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T19:11:00Z","created_by":"seanb4t","updated_at":"2026-02-08T19:51:27Z","closed_at":"2026-02-08T19:51:27Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.254","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.254","depends_on_id":"holomush-5k1.259","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.255","title":"S1: Add panic recovery to Task 14 AttributeResolver for plugin providers","description":"PR #69 review finding S1. Plugin attribute providers run user-supplied code that could panic. Task 14 (AttributeResolver) should include panic recovery to prevent a single bad provider from crashing the entire evaluation pipeline. File: docs/plans/2026-02-06-full-abac-implementation.md (Task 14 section)","acceptance_criteria":"Task 14 includes recover() wrapper around plugin provider calls with error logging and graceful degradation.","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T19:11:00Z","created_by":"seanb4t","updated_at":"2026-02-08T19:53:00Z","closed_at":"2026-02-08T19:53:00Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.255","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.255","depends_on_id":"holomush-5k1.259","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.256","title":"S2: Add transactional pg_notify semantics to Task 25","description":"PR #69 review finding S2. Task 25 (lock compilation) should use transactional pg_notify to prevent cache race conditions where notification fires before the transaction commits. File: docs/plans/2026-02-06-full-abac-implementation.md (Task 25 section)","acceptance_criteria":"Task 25 specifies pg_notify inside the same transaction as the policy write, ensuring notification fires only after commit.","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T19:11:00Z","created_by":"seanb4t","updated_at":"2026-02-08T19:53:47Z","closed_at":"2026-02-08T19:53:47Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.256","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.256","depends_on_id":"holomush-5k1.259","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.257","title":"S3: Task 21a commit step uses git add . instead of explicit file paths","description":"PR #69 review finding S3. Line 2994 uses `git add .` which could stage unintended files. Should use explicit file paths. File: docs/plans/2026-02-06-full-abac-implementation.md (Task 21a section)","acceptance_criteria":"Commit step uses explicit file paths instead of `git add .`","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T19:11:00Z","created_by":"seanb4t","updated_at":"2026-02-08T19:54:14Z","closed_at":"2026-02-08T19:54:14Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.257","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.257","depends_on_id":"holomush-5k1.259","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.258","title":"S4: ADR 60 spec line references point to wrong sections","description":"PR #69 review finding S4. ADR 60 references at lines 1491, 1500, 1518 point to wrong spec sections. Conceptual overlap with I1 and I7 (line reference corrections). File: docs/plans/2026-02-06-full-abac-implementation.md","acceptance_criteria":"ADR 60 spec line references verified against current spec and corrected.","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T19:11:01Z","created_by":"seanb4t","updated_at":"2026-02-08T19:58:05Z","closed_at":"2026-02-08T19:58:05Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.258","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.258","depends_on_id":"holomush-5k1.259","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.259","title":"Split ABAC plan into per-phase files","description":"Split docs/plans/2026-02-06-full-abac-implementation.md (4,331 lines) into per-phase files for context efficiency. Structure: overview file (intro, dependency diagram, cross-cutting concerns) plus one file per phase (7.1-7.7). Must preserve all content, internal cross-references (update to new file paths), and task numbering. This MUST be done before the 16 review finding fixes since those fixes benefit from smaller files.","acceptance_criteria":"Original plan file replaced by 8 files: overview + 7 phases. All content preserved (diff of concatenated split files vs original shows only cross-reference updates). Internal links between tasks updated to reference correct files. Beads descriptions referencing plan lines updated if needed.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T19:15:41Z","created_by":"seanb4t","updated_at":"2026-02-08T19:35:07Z","closed_at":"2026-02-08T19:35:07Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.259","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.26","title":"[M6] Always log system subject actions regardless of audit mode","description":"PR #65 review finding (Security). System subject bypasses policy evaluation and is only logged in all audit mode. Bugs or compromised system contexts could act without audit trail. Acceptance Criteria: (1) Spec requires system bypass logging in all audit modes (2) System actions include effect=system_bypass in audit log. Dependencies: audit logging section, related to I9.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T20:21:42Z","created_by":"seanb4t","updated_at":"2026-02-06T21:03:44Z","closed_at":"2026-02-06T21:03:44Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.26","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.26","depends_on_id":"holomush-5k1.13","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.260","title":"C1: Decision struct uses exported Allowed field instead of unexported","description":"phase-7.1.md line 721 shows `Allowed bool` (exported) but the spec (line 424) and NewDecision() constructor on line 733 use `allowed` (unexported). Won't compile as written.\n\n**Fix:** Change `Allowed bool` to `allowed bool` and add `IsAllowed()` method.\n\n**Acceptance Criteria:**\n- [ ] Decision struct field is `allowed bool` (unexported)\n- [ ] `IsAllowed() bool` accessor method is shown\n- [ ] Consistent with spec line 424 and NewDecision() on line 731-734\n- [ ] No other references to `Allowed` (exported) exist in plan files\n\n**Files:** docs/plans/2026-02-06-full-abac-phase-7.1.md","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T21:56:41Z","created_by":"seanb4t","updated_at":"2026-02-08T21:59:16Z","closed_at":"2026-02-08T21:59:16Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.260","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.261","title":"TEST-DELETE","description":"test","status":"tombstone","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T21:56:45Z","created_by":"seanb4t","updated_at":"2026-02-08T21:56:48Z","work_type":"mutex"}
{"id":"holomush-5k1.262","title":"C2: Wrong effect constant names in phase-7.6 test examples","description":"phase-7.6.md lines 158,169 use `types.EffectForbid` and `types.DefaultDeny` which don't exist. Per Task 5 type definitions: correct names are `EffectDeny` and `EffectDefaultDeny`.\n\n**Fix:** Replace `EffectForbid` → `EffectDeny` and `DefaultDeny` → `EffectDefaultDeny`\n\n**Acceptance Criteria:**\n- [ ] All references to `EffectForbid` replaced with `EffectDeny`\n- [ ] All references to `DefaultDeny` replaced with `EffectDefaultDeny`\n- [ ] Consistent with Task 5 type definitions in phase-7.1.md\n- [ ] No other incorrect constant names in plan files\n\n**Files:** docs/plans/2026-02-06-full-abac-phase-7.6.md\n**Depends on (conceptual):** C1 (same types package)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T21:57:14Z","created_by":"seanb4t","updated_at":"2026-02-08T21:59:16Z","closed_at":"2026-02-08T21:59:16Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.262","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.263","title":"C3: NOTIFY channel name inconsistency in phase-7.5","description":"phase-7.5.md line 133 uses pg_notify('access_policy_changed', ...) but the spec (lines 1759, 2172) and all other plan files use 'policy_changed'.\n\n**Fix:** Change 'access_policy_changed' to 'policy_changed'\n\n**Acceptance Criteria:**\n- [ ] phase-7.5.md line 133 uses 'policy_changed'\n- [ ] No other files use 'access_policy_changed'\n- [ ] Consistent with spec and design-decisions.md (Decision #11)\n\n**Files:** docs/plans/2026-02-06-full-abac-phase-7.5.md","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T21:57:50Z","created_by":"seanb4t","updated_at":"2026-02-08T21:59:16Z","closed_at":"2026-02-08T21:59:16Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.263","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.264","title":"C4: Missing SPDX license header on design-decisions.md","description":"design-decisions.md is missing the required SPDX license header that all other spec/plan files have.\n\n**Fix:** Add \u003c!-- SPDX-License-Identifier: Apache-2.0 --\u003e and copyright header.\n\n**Acceptance Criteria:**\n- [ ] File starts with SPDX header\n- [ ] Copyright line present\n- [ ] Matches format used in other spec files\n\n**Files:** docs/specs/2026-02-05-full-abac-design-decisions.md","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T21:57:51Z","created_by":"seanb4t","updated_at":"2026-02-08T21:59:16Z","closed_at":"2026-02-08T21:59:16Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.264","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.265","title":"I1: Conflicting spec line references in Task 22","description":"phase-7.4.md Task 22 has conflicting spec line references: acceptance criteria (line 19) says 'lines 2990-3054' but implementation notes (line 34) says 'lines 2935-2999'. Only one can be correct.\n\n**Fix:** Verify against current spec and use consistent reference.\n\n**Acceptance Criteria:**\n- [ ] Both references in Task 22 point to the same correct spec line range\n- [ ] Verified against current spec content\n\n**Files:** docs/plans/2026-02-06-full-abac-phase-7.4.md","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T21:57:51Z","created_by":"seanb4t","updated_at":"2026-02-08T21:59:40Z","closed_at":"2026-02-08T21:59:40Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.265","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.266","title":"I2: Circuit breaker relationship between Task 16b and Task 34 unclear","description":"Task 16b (phase-7.3) defines a PropertyProvider-specific circuit breaker ('3 timeouts in 60s') and Task 34 (phase-7.7) defines a general provider circuit breaker (budget-utilization algorithm). No stated relationship between them.\n\n**Decision:** Task 34's budget-utilization circuit breaker replaces Task 16b's simpler mechanism. Task 16b should defer its circuit breaker to Task 34.\n\n**Fix:** Add cross-references in both tasks. Remove circuit breaker implementation from Task 16b scope, add note that Task 34 provides this. Document as a new design decision.\n\n**Acceptance Criteria:**\n- [ ] Task 16b notes that circuit breaker is deferred to Task 34\n- [ ] Task 34 notes it covers PropertyProvider circuit breaker (formerly in Task 16b)\n- [ ] New design decision documented\n- [ ] Circuit breaker metric in Task 16b acceptance criteria updated or removed\n\n**Files:** docs/plans/2026-02-06-full-abac-phase-7.3.md, docs/plans/2026-02-06-full-abac-phase-7.7.md, design-decisions","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T21:57:51Z","created_by":"seanb4t","updated_at":"2026-02-08T22:03:04Z","closed_at":"2026-02-08T22:03:04Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.266","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.267","title":"I3: Critical path text contradicts Mermaid diagram","description":"implementation.md line 216 critical path text claims T0→T3→T4a→T4b→T4c→T16b chain, but the Mermaid diagram has no edges T0→T3 or T4c→T16b. Diagram shows T4a→T16b (line 181). T3, T4b, T4c are a side chain off T3/T4a for property cascade, not on the critical path.\n\n**Fix:** Correct the critical path text to match the diagram. Remove T3, T4b, T4c from critical path styling since they're not on the longest path.\n\n**Acceptance Criteria:**\n- [ ] Critical path text matches Mermaid diagram edges\n- [ ] Only nodes actually on the longest dependency chain are styled as critical\n- [ ] T4a remains highlighted (T4a→T16b is real)\n- [ ] T3, T4b, T4c styling removed from critical path\n\n**Files:** docs/plans/2026-02-06-full-abac-implementation.md","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T21:57:51Z","created_by":"seanb4t","updated_at":"2026-02-08T22:00:11Z","closed_at":"2026-02-08T22:00:11Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.267","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.268","title":"I4: SQL uses singular access_policy instead of plural access_policies","description":"phase-7.5.md line 128 uses 'INSERT INTO access_policy (...)' but the spec (line 2033) defines the table as 'access_policies' (plural).\n\n**Fix:** Change 'access_policy' to 'access_policies' in the SQL example.\n\n**Acceptance Criteria:**\n- [ ] SQL example uses 'access_policies' (plural)\n- [ ] Consistent with spec CREATE TABLE statement\n- [ ] No other singular table name references in plan files\n\n**Files:** docs/plans/2026-02-06-full-abac-phase-7.5.md\n**Depends on (file):** C3 (same file)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T21:57:51Z","created_by":"seanb4t","updated_at":"2026-02-08T21:59:16Z","closed_at":"2026-02-08T21:59:16Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.268","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.268","depends_on_id":"holomush-5k1.263","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.269","title":"I5: Decision #65 reference hard to find, repeatedly flagged","description":"Phase-7.6.md references 'Decision #65' for rollback strategy. Reviewers keep flagging this as missing because the heading in design-decisions.md is '## 65. Git Revert as Migration Rollback Strategy' (no '#' prefix in the number). The reference style doesn't match the heading style.\n\n**Fix:** Improve discoverability by ensuring references and headings use consistent format. Will be addressed by doc splitting (individual decision files).\n\n**Acceptance Criteria:**\n- [ ] Decision #65 references in phase-7.6.md use clear, findable format\n- [ ] Decision heading is easily searchable\n- [ ] Will be fully resolved by doc splitting into individual files\n\n**Files:** docs/plans/2026-02-06-full-abac-phase-7.6.md, docs/specs/2026-02-05-full-abac-design-decisions.md","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T21:58:25Z","created_by":"seanb4t","updated_at":"2026-02-08T22:17:19Z","closed_at":"2026-02-08T22:17:19Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.269","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.269","depends_on_id":"holomush-5k1.273","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.27","title":"Add Decision #59: Fair-Share Provider Timeout Scheduling","description":"Document a definitive decision that fair-share scheduling is the chosen approach for provider timeout allocation. Acknowledge potential concerns but commit to the approach.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T00:30:49Z","created_by":"seanb4t","updated_at":"2026-02-07T00:32:50Z","closed_at":"2026-02-07T00:32:50Z","dependencies":[{"issue_id":"holomush-5k1.27","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.270","title":"I6: ADRs 0009, 0010, 0015 not referenced in phase plans","description":"ADRs 0009 (Custom Go-Native ABAC Engine), 0010 (Cedar-Aligned Fail-Safe Type Semantics), and 0015 (Three-Layer Player Access Control) are mapped to tasks in the master plan (implementation.md lines 45-51) but never referenced in their respective phase plan files.\n\n**Fix:** Add ADR references to the relevant phase plan task descriptions.\n\n**Acceptance Criteria:**\n- [ ] ADR 0009 referenced in phase-7.3.md Task 17\n- [ ] ADR 0010 referenced in phase-7.2.md Task 11\n- [ ] ADR 0015 referenced in relevant phase plan tasks (4a, 4b, 4c, 16a-b)\n\n**Files:** docs/plans/2026-02-06-full-abac-phase-7.2.md, docs/plans/2026-02-06-full-abac-phase-7.3.md, docs/plans/2026-02-06-full-abac-phase-7.1.md","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T21:58:25Z","created_by":"seanb4t","updated_at":"2026-02-08T22:02:49Z","closed_at":"2026-02-08T22:02:49Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.270","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.271","title":"I7: Spec ADR links point to non-existent docs/adr/ directory","description":"Spec file (lines 3518-3525) has 8 links to ../adr/0009-*.md through ../adr/0016-*.md, but no docs/adr/ directory exists. These are broken links.\n\n**Fix:** Create docs/adr/ directory with stub ADR files, or redirect links to the design-decisions document sections. Since decisions are being split into individual files, the ADR links should point to the new decision file locations.\n\n**Acceptance Criteria:**\n- [ ] All 8 ADR links in the spec resolve to existing files\n- [ ] ADR content matches the corresponding design decisions\n- [ ] Links use relative paths that work from docs/specs/\n\n**Files:** docs/specs/2026-02-05-full-abac-design.md","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T21:58:25Z","created_by":"seanb4t","updated_at":"2026-02-08T22:16:42Z","closed_at":"2026-02-08T22:16:42Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.271","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.271","depends_on_id":"holomush-5k1.273","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.272","title":"Broken spec line references (8 instances across plan files)","description":"8 spec line references are significantly wrong (offsets of 10-600 lines):\n\n1. phase-7.3.md:124 (LRU/maxEntries) claims 2031-2060, actual ~1977-2005 (~54 off)\n2. phase-7.3.md:986 (PropertyProvider CB) claims line 1283, actual 1886 (~600 off)\n3. implementation.md:272 (metric labels) claims 1833, actual 1932 (~100 off)\n4. implementation.md:41 (ADR list) claims 3461+, actual 3518-3525 (~57 off)\n5. implementation.md:283 (policy lint) claims 848/3496, actual 3497\n6. implementation.md:285 (web editor) claims 3502, actual 38 (completely wrong)\n7. phase-7.4.md:34 (seed DSL) claims 2935-2999, actual 2990-3054 (~55 off)\n8. phase-7.5.md:403 (GrammarVersion) claims 1013, actual 1003-1004 (~10 off)\n\nNote: ~40 other references verified as accurate.\n\n**Fix:** Update all 8 references to correct spec line numbers.\n\n**Acceptance Criteria:**\n- [ ] All 8 listed references corrected\n- [ ] Each corrected reference verified against current spec content\n- [ ] Add 'approximate' disclaimer if keeping line numbers\n\n**Files:** Multiple plan files (phase-7.3.md, phase-7.4.md, phase-7.5.md, implementation.md)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T21:58:25Z","created_by":"seanb4t","updated_at":"2026-02-08T22:04:07Z","closed_at":"2026-02-08T22:04:07Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.272","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.273","title":"Split design-decisions.md into individual files by phase","description":"The design-decisions.md file is 1,893 lines with 70+ decisions. Reading it wastes context and reviewers can't find decisions easily.\n\n**Fix:** Split into individual files organized as docs/specs/decisions/epic7/phase-7.X/NNN-title.md. Create an index file. Update all cross-references in plan files to point to new locations.\n\n**Acceptance Criteria:**\n- [ ] Each decision is in its own file: docs/specs/decisions/epic7/phase-7.X/NNN-title.md\n- [ ] Decisions mapped to correct phases\n- [ ] Cross-cutting decisions in a 'general' subdirectory\n- [ ] Index file listing all decisions with links\n- [ ] All plan file references updated to new paths\n- [ ] Old monolithic file removed or replaced with redirect\n\n**Files:** docs/specs/2026-02-05-full-abac-design-decisions.md → docs/specs/decisions/epic7/**/*.md","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T21:58:26Z","created_by":"seanb4t","updated_at":"2026-02-08T22:12:55Z","closed_at":"2026-02-08T22:12:55Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.273","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.274","title":"C1: Add missing exit:, scene:, character: resource prefixes to spec","description":"The Reserved Prefixes table (spec lines 80-94) and DSL prefix mapping (lines 319-329) are missing three resource types used in production code: exit: (4 call sites in service.go), scene: (scene CRUD operations), and character: as resource (3 call sites where characters are the resource, not subject). The seed:player-self-access policy references 'resource is character', confirming the DSL handles it, but the prefix tables are incomplete. The engine will reject these resource strings at runtime.\n\nDecision: Add all three to Resource Strings section of the Reserved Prefixes table. character: is dual-use (subject AND resource) — the engine distinguishes by AccessRequest field. Existing world providers resolve these resource types; no new AttributeProvider is needed.\n\nFiles affected: docs/specs/2026-02-05-full-abac-design.md (prefix tables)","acceptance_criteria":"- [ ] Reserved Prefixes table includes exit:, scene:, character: in Resource Strings section\n- [ ] DSL prefix mapping table includes all three with correct DSL types\n- [ ] character: documented as dual-use (subject AND resource)\n- [ ] No new provider needed — documented that existing world providers resolve these","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T22:56:05Z","created_by":"seanb4t","updated_at":"2026-02-08T23:22:23Z","closed_at":"2026-02-08T23:22:23Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.274","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.274","depends_on_id":"holomush-5k1.294","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.275","title":"C2: Document compound resource format handling during migration","description":"The codebase uses fmt.Sprintf('location:%s:characters', locationID.String()) in service.go:470. The engine's prefix parser splits on the first ':', producing type=location, id=01ABC:characters — which is incorrect. This compound format will break the ABAC engine at runtime.\n\nDecision: Decompose compound resources during migration. The call site location:\u003cid\u003e:characters becomes resource=location:\u003cid\u003e with action=list_characters. This avoids parser complexity and aligns with the ABAC model where the action captures the intent. Document this decomposition strategy in the migration plan.\n\nFiles affected: docs/specs/2026-02-05-full-abac-design.md, docs/plans/2026-02-06-full-abac-phase-7.6.md","acceptance_criteria":"- [ ] Migration plan documents compound resource decomposition strategy\n- [ ] service.go:470 call site documented in migration call site inventory\n- [ ] New action list_characters documented in spec action set\n- [ ] Decomposition rationale documented (action captures intent)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T22:56:05Z","created_by":"seanb4t","updated_at":"2026-02-08T23:28:08Z","closed_at":"2026-02-08T23:28:08Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.275","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.275","depends_on_id":"holomush-5k1.274","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.275","depends_on_id":"holomush-5k1.294","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.276","title":"C4: Add corrupted permit policy auto-disable to Task 31","description":"Spec lines 1641-1658 define a two-step corruption response: (1) corrupted permit policies get enabled=false in DB and evaluation continues, (2) corrupted forbid policies trigger degraded mode. Task 31 (Phase 7.7) only implements step 2. Without step 1, corrupted permit policies would be reloaded on every cache refresh without self-healing — a correctness bug in the resilience path.\n\nFiles affected: docs/plans/2026-02-06-full-abac-phase-7.7.md (Task 31)","acceptance_criteria":"- [ ] Task 31 acceptance criteria include auto-disable step for corrupted permit policies\n- [ ] Implementation steps describe the DB update (set enabled=false) for permit policy corruption\n- [ ] Test cases cover permit vs forbid corruption paths separately\n- [ ] Self-healing behavior documented: permit corruption auto-disables, forbid corruption triggers degraded mode","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T22:56:06Z","created_by":"seanb4t","updated_at":"2026-02-08T23:22:23Z","closed_at":"2026-02-08T23:22:23Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.276","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.276","depends_on_id":"holomush-5k1.294","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.277","title":"C3: Add --effect filter to policy list ListOptions and Task 26a","description":"Spec line 2755 defines 'policy list --effect=permit|forbid'. Task 26a's acceptance criteria (Phase 7.5) and Task 7's ListOptions struct (Phase 7.1) both omit the Effect field. The field Effect *types.PolicyEffect needs to be added to ListOptions.\n\nFiles affected: docs/plans/2026-02-06-full-abac-phase-7.1.md (Task 7 ListOptions), docs/plans/2026-02-06-full-abac-phase-7.5.md (Task 26a)","acceptance_criteria":"- [ ] Task 7 (Phase 7.1) ListOptions struct includes Effect *types.PolicyEffect field\n- [ ] Task 26a (Phase 7.5) acceptance criteria includes --effect=permit|forbid filter\n- [ ] Filter implementation documented in both tasks","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T22:56:06Z","created_by":"seanb4t","updated_at":"2026-02-08T23:28:08Z","closed_at":"2026-02-08T23:28:08Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.277","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.277","depends_on_id":"holomush-5k1.294","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.278","title":"C5: Rewrite ADR #57 (Format Evolution) — internally inconsistent","description":"ADR #57 references nonexistent docs/adr/README.md (should be docs/specs/decisions/epic7/README.md), uses 4-digit numbering (0009-0016) while all other ADRs use 3-digit, and describes a format (Context/Options/Decision/Consequences) that none of the 59 ADRs actually use. The ADR needs rewriting to fix path references, numbering convention, and format description.\n\nFiles affected: docs/specs/decisions/epic7/general/057-adr-format-evolution.md","acceptance_criteria":"- [ ] ADR #57 references correct path (docs/specs/decisions/epic7/README.md)\n- [ ] Numbering matches 3-digit convention used by all other ADRs\n- [ ] Format description matches what ADRs actually use\n- [ ] No references to nonexistent files","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T22:56:22Z","created_by":"seanb4t","updated_at":"2026-02-08T23:28:08Z","closed_at":"2026-02-08T23:28:08Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.278","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.278","depends_on_id":"holomush-5k1.294","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.279","title":"C6: Fix ADR #36 supersession conflict with #21","description":"ADR #36 claims 'Supersedes: Decision #5, Decision #21', but #21 says 'Superseded by Decision #37' and the README confirms #21 is superseded by #37. Both #36 and #37 cannot supersede #21. Per the README, #37 (no shadow mode) is the correct superseder for #21 (shadow mode criteria). Remove #21 from #36's Supersedes list.\n\nFiles affected: docs/specs/decisions/epic7/phase-7.6/036-direct-replacement-no-adapter.md","acceptance_criteria":"- [ ] ADR #36 Supersedes list contains only #5 (not #21)\n- [ ] Cross-reference chain consistent: #21 superseded by #37, #5 superseded by #36","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T22:56:22Z","created_by":"seanb4t","updated_at":"2026-02-08T23:29:49Z","closed_at":"2026-02-08T23:29:49Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.279","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.279","depends_on_id":"holomush-5k1.278","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.279","depends_on_id":"holomush-5k1.294","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.28","title":"Plan: ADR 0015 title is fabricated","description":"## Issue\nThe plan's Task Execution Protocol (line 44) references ADR 0015 as \"Fuzz testing for DSL parser\" mapped to Task 9. The actual ADR 0015 in the spec (line 3469) is \"Three-Layer Player Access Control.\" No ADR about fuzz testing exists in the spec.\n\n## Decision\nFix the ADR title to match spec. Task 9 should reference the spec's Testing Strategy section (lines 3272-3314) directly, not a non-existent ADR.\n\n## Files\n- Modify: `docs/plans/2026-02-06-full-abac-implementation.md` (line 44, Task 9 Spec References)","acceptance_criteria":"- [ ] ADR 0015 title corrected to \"Three-Layer Player Access Control\" in ADR table\n- [ ] ADR 0015 \"Applies To\" column updated appropriately\n- [ ] Task 9 Spec References updated to reference spec Testing Strategy section instead of ADR\n- [ ] No other references to fabricated ADR title remain","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T02:03:18Z","created_by":"seanb4t","updated_at":"2026-02-07T02:19:31Z","closed_at":"2026-02-07T02:19:31Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.28","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.280","title":"C7: Add lock: prefix rejection to policy create in Task 26a","description":"Task 26a (Phase 7.5) rejects seed: prefix in policy create but not lock:. Spec lines 2769-2770 reserve the lock: prefix for lock-generated policies. Admin policy create must reject both reserved policy name prefixes.\n\nFiles affected: docs/plans/2026-02-06-full-abac-phase-7.5.md (Task 26a)","acceptance_criteria":"- [ ] Task 26a acceptance criteria explicitly list both seed: and lock: prefix rejection\n- [ ] Implementation steps include validation for both prefixes","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T22:56:22Z","created_by":"seanb4t","updated_at":"2026-02-08T23:29:49Z","closed_at":"2026-02-08T23:29:49Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.280","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.280","depends_on_id":"holomush-5k1.277","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.280","depends_on_id":"holomush-5k1.294","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.281","title":"I1: Clarify re-entrance guard in Task 17 acceptance criteria","description":"Task 17 (Phase 7.3) has 'Re-entrance detection' in acceptance criteria but the review notes the description is insufficient — it should describe the guard mechanism (prevention), not just detection. ADR #31 (Provider Re-Entrance Prohibition) defines the policy. The acceptance criteria and implementation steps should explicitly describe the guard.\n\nFiles affected: docs/plans/2026-02-06-full-abac-phase-7.3.md (Task 17)","acceptance_criteria":"- [ ] Task 17 acceptance criteria describe re-entrance guard mechanism (prevention, not just detection)\n- [ ] Implementation steps include guard implementation details\n- [ ] ADR #31 (Provider Re-Entrance Prohibition) cross-referenced","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T22:56:22Z","created_by":"seanb4t","updated_at":"2026-02-08T23:28:08Z","closed_at":"2026-02-08T23:28:08Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.281","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.281","depends_on_id":"holomush-5k1.294","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.282","title":"I2: Add Spec Deviation entry for UpdateSeed 5-param signature","description":"Task 23 (Phase 7.4) uses UpdateSeed(ctx, name, oldDSL, newDSL, changeNote) — 5 params. The spec shows only 3 params. The 5-param version is richer: oldDSL enables CAS (compare-and-swap) semantics for safe concurrent updates, changeNote provides audit trail context. This is an undocumented spec deviation.\n\nFiles affected: docs/plans/2026-02-06-full-abac-phase-7.4.md (Spec Deviations section)","acceptance_criteria":"- [ ] Spec Deviation entry added documenting the 5-param UpdateSeed signature\n- [ ] Rationale includes CAS semantics (oldDSL) and audit trail (changeNote)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T22:56:22Z","created_by":"seanb4t","updated_at":"2026-02-08T23:28:08Z","closed_at":"2026-02-08T23:28:08Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.282","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.282","depends_on_id":"holomush-5k1.294","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.283","title":"I3: Add Spec Deviation entry for policy test --suite SHOULD to MUST","description":"Task 27a (Phase 7.5) treats 'policy test --suite' as MUST, but the spec says SHOULD. This elevation is not tracked in the Spec Deviations section. Need to add a Spec Deviation entry with rationale for the elevation.\n\nFiles affected: docs/plans/2026-02-06-full-abac-phase-7.5.md (Spec Deviations section)","acceptance_criteria":"- [ ] Spec Deviation entry added for policy test --suite SHOULD-to-MUST elevation\n- [ ] Rationale for elevation documented","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T22:56:33Z","created_by":"seanb4t","updated_at":"2026-02-08T23:28:08Z","closed_at":"2026-02-08T23:28:08Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.283","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.283","depends_on_id":"holomush-5k1.294","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.284","title":"I4: Add Spec Deviation entry for policy rollback SHOULD to MUST","description":"Task 26b (Phase 7.5) treats 'policy rollback' as MUST, but the spec says SHOULD. This elevation is not tracked in the Spec Deviations section. Need to add a Spec Deviation entry with rationale for the elevation.\n\nFiles affected: docs/plans/2026-02-06-full-abac-phase-7.5.md (Spec Deviations section)","acceptance_criteria":"- [ ] Spec Deviation entry added for policy rollback SHOULD-to-MUST elevation\n- [ ] Rationale for elevation documented","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T22:56:33Z","created_by":"seanb4t","updated_at":"2026-02-08T23:29:49Z","closed_at":"2026-02-08T23:29:49Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.284","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.284","depends_on_id":"holomush-5k1.283","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.284","depends_on_id":"holomush-5k1.294","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.285","title":"I5: Add missing dependency graph edge T6 to T23","description":"Task 6 (PolicyStore interface) feeds into Task 23 (bootstrap sequence) but the mermaid diagram doesn't show this edge. The textual dependency exists in Phase 7.4 plan text. The diagram should be explicit about all dependencies.\n\nFiles affected: docs/plans/2026-02-06-full-abac-implementation.md (mermaid diagram)","acceptance_criteria":"- [ ] Mermaid diagram includes T6--\u003eT23 edge\n- [ ] Edge is consistent with textual dependency in Phase 7.4","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T22:56:33Z","created_by":"seanb4t","updated_at":"2026-02-08T23:32:12Z","closed_at":"2026-02-08T23:32:12Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.285","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.285","depends_on_id":"holomush-5k1.294","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.286","title":"I6: Add missing dependency graph edge T12 to T23","description":"T12 (compiler) to T23 (bootstrap) dependency is transitively satisfied via T22 but not directly shown. Adding the direct edge makes the dependency explicit and less fragile if T22 were ever removed or restructured.\n\nFiles affected: docs/plans/2026-02-06-full-abac-implementation.md (mermaid diagram)","acceptance_criteria":"- [ ] Mermaid diagram includes T12--\u003eT23 edge (or documents why transitive via T22 is sufficient)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T22:56:33Z","created_by":"seanb4t","updated_at":"2026-02-08T23:33:29Z","closed_at":"2026-02-08T23:33:29Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.286","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.286","depends_on_id":"holomush-5k1.285","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.286","depends_on_id":"holomush-5k1.294","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.287","title":"I7: Add missing dependency graph edge T14 to T17","description":"T14 (AttributeResolver) is directly used by T17 (engine core). This dependency should be explicit in the diagram rather than implied through the provider chain.\n\nFiles affected: docs/plans/2026-02-06-full-abac-implementation.md (mermaid diagram)","acceptance_criteria":"- [ ] Mermaid diagram includes T14--\u003eT17 edge","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T22:56:33Z","created_by":"seanb4t","updated_at":"2026-02-08T23:33:29Z","closed_at":"2026-02-08T23:33:29Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.287","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.287","depends_on_id":"holomush-5k1.285","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.287","depends_on_id":"holomush-5k1.294","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.288","title":"I8: Add cross-phase dependency notes to Tasks 26b and 27b","description":"Tasks 26b and 27b (Phase 7.5) depend on tasks in earlier phases but lack explicit cross-phase dependency notes in their task descriptions. Adding these notes makes the build order clear when reading the Phase 7.5 plan in isolation.\n\nFiles affected: docs/plans/2026-02-06-full-abac-phase-7.5.md (Tasks 26b, 27b)","acceptance_criteria":"- [ ] Task 26b includes cross-phase dependency notes listing dependencies from earlier phases\n- [ ] Task 27b includes cross-phase dependency notes listing dependencies from earlier phases","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T22:56:34Z","created_by":"seanb4t","updated_at":"2026-02-08T23:33:29Z","closed_at":"2026-02-08T23:33:29Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.288","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.288","depends_on_id":"holomush-5k1.283","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.288","depends_on_id":"holomush-5k1.294","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.289","title":"I9: Fix ADR #38 off mode table to match ADR #56","description":"ADR #38 table says off mode logs 'Nothing' but ADR #56 updates this to 'System bypasses only'. The main spec (line 2271) correctly says 'System bypasses only'. ADR #38's table needs updating and a cross-reference to #56.\n\nFiles affected: docs/specs/decisions/epic7/phase-7.1/038-audit-log-configuration-modes.md","acceptance_criteria":"- [ ] ADR #38 table updated: off mode -\u003e 'System bypasses only'\n- [ ] Cross-reference to ADR #56 added","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T22:56:47Z","created_by":"seanb4t","updated_at":"2026-02-08T23:32:12Z","closed_at":"2026-02-08T23:32:12Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.289","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.289","depends_on_id":"holomush-5k1.294","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.29","title":"Plan: Seed policy count inconsistency (14 vs 15)","description":"## Issue\nThe plan contradicts itself on seed policy count across multiple locations:\n- Task 8 (line 783): \"all 15 seed policies\" — lists 14 permits + 1 forbid catch-all\n- Task 21 acceptance criteria (line 835): \"All 14 seed policies\"\n- Task 21 code (line 1869): \"returns the complete set of 15 seed policies\"\n- Task 21 comment (line 1946): \"14 seed policies listed above\"\n\nThe spec (lines 2935-2999) defines exactly 14 named seed policies, all permit. The forbid(principal, action, resource); appears in the spec's Example Policies section as a maintenance lockout example, NOT as a named seed. Default-deny comes from the engine's evaluation algorithm (step 6, line 1683), not from a forbid seed policy.\n\n## Decision\nStandardize on 14 seed policies per spec. Remove forbid catch-all from seed list. Keep it as a parser test case in Task 8 but relabel it.\n\n## Files\n- Modify: `docs/plans/2026-02-06-full-abac-implementation.md` (lines 783, 835, 850, 1869, 1946)","acceptance_criteria":"- [ ] All references use consistent count of 14 seed policies\n- [ ] forbid catch-all removed from SeedPolicies() function in Task 21\n- [ ] Task 8 test corpus relabeled: \"14 seed policies plus catch-all forbid test case\"\n- [ ] Task 21 acceptance criteria says 14 consistently","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T02:03:29Z","created_by":"seanb4t","updated_at":"2026-02-07T02:22:33Z","closed_at":"2026-02-07T02:22:33Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.29","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.290","title":"I10: Remove superseded concept references from ADR #35","description":"ADR #35 (Audit Log Source Column) may reference 'static adapter' or 'shadow mode' — both concepts superseded by ADRs #36 and #37. Verify and update any stale references to use current terminology.\n\nFiles affected: docs/specs/decisions/epic7/phase-7.1/035-audit-log-source-column.md","acceptance_criteria":"- [ ] ADR #35 contains no references to superseded concepts (static adapter, shadow mode)\n- [ ] If found, replaced with current terminology referencing ADRs #36, #37","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T22:56:47Z","created_by":"seanb4t","updated_at":"2026-02-08T23:32:12Z","closed_at":"2026-02-08T23:32:12Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.290","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.290","depends_on_id":"holomush-5k1.294","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.291","title":"I11: Update ADR #24 cross-reference from superseded #5 to #36","description":"ADR #24 (Bootstrap Sequence) says 'Updates Decision #5' but #5 is superseded by #36 (Direct Replacement). The reference should be updated to reflect the current decision chain.\n\nFiles affected: docs/specs/decisions/epic7/phase-7.4/024-bootstrap-sequence.md","acceptance_criteria":"- [ ] ADR #24 references ADR #36 instead of superseded #5\n- [ ] Cross-reference link is accurate","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T22:56:47Z","created_by":"seanb4t","updated_at":"2026-02-08T23:32:12Z","closed_at":"2026-02-08T23:32:12Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.291","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.291","depends_on_id":"holomush-5k1.294","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.292","title":"I12: Document ADR numbering gaps in README","description":"The ADR README shows numbering gaps (59-\u003e65-\u003e74) without explanation. These gaps should be documented to avoid confusion about whether ADRs were deleted or the gaps are intentional.\n\nFiles affected: docs/specs/decisions/epic7/README.md","acceptance_criteria":"- [ ] ADR README includes note explaining the numbering gaps (59-\u003e65-\u003e74)\n- [ ] Explanation clarifies whether gaps are intentional numbering or deleted decisions","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T22:56:47Z","created_by":"seanb4t","updated_at":"2026-02-08T23:32:12Z","closed_at":"2026-02-08T23:32:12Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.292","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.292","depends_on_id":"holomush-5k1.294","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.293","title":"I13: Add value semantics comment to Decision type for invariant clarity","description":"The Decision struct (spec lines 419-436) has allowed (unexported) and Effect (exported). This appears inconsistent for invariant protection, but is safe because Decision is passed by value (not pointer), so callers cannot break the invariant on the canonical instance.\n\nDecision: Keep current design. Add a clarifying comment about Go value semantics making the mixed visibility safe. The constructor NewDecision() enforces the invariant at creation time, and value semantics prevent mutation of the original.\n\nFiles affected: docs/specs/2026-02-05-full-abac-design.md (Decision struct section)","acceptance_criteria":"- [ ] Decision struct comment includes note about Go value semantics safety\n- [ ] Comment explains why mixed visibility (allowed unexported, Effect exported) is intentional\n- [ ] No API change needed — value semantics provide the protection","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T22:56:47Z","created_by":"seanb4t","updated_at":"2026-02-08T23:29:49Z","closed_at":"2026-02-08T23:29:49Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.293","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.293","depends_on_id":"holomush-5k1.274","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.293","depends_on_id":"holomush-5k1.294","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.294","title":"Split design spec into per-section files for context efficiency","description":"The Full ABAC design spec (docs/specs/2026-02-05-full-abac-design.md) is 3,525 lines. Reading the full file to find a 50-line section wastes context. Split into ~9 section files under a new directory docs/specs/abac/ with a top-level index.\n\nProposed split:\n1. 00-overview.md — Overview, Architecture, Package Structure (~200 lines)\n2. 01-core-types.md — Core interfaces: AccessPolicyEngine, PolicyCompiler, AccessRequest, Session Resolution, Decision, AttributeBags, Attribute Providers, Core Schema (~590 lines)\n3. 02-policy-dsl.md — Grammar, Versioning, Type System, Operators, Examples (~365 lines)\n4. 03-property-model.md — Property Model, Attributes, Visibility, Seed Policies (~200 lines)\n5. 04-resolution-evaluation.md — Resolution Flow, Providers, Schema Registry, Error Handling, Evaluation Algorithm, Performance, Caching (~680 lines)\n6. 05-storage-audit.md — Policy Storage, Schema, Cache Invalidation, Audit Log, Retention (~400 lines)\n7. 06-layers-commands.md — Access Control Layers, Admin Commands (~540 lines)\n8. 07-migration-seeds.md — Replacing Static Roles, Seed Policies, Bootstrap, Implementation Sequence (~320 lines)\n9. 08-testing-appendices.md — Testing Strategy, Known Limitations, Acceptance Criteria, References (~235 lines)\n\nThe original file becomes an index with section links. All internal cross-references updated. All plan file spec line references must be updated to reference the new files.\n\nFiles affected: docs/specs/2026-02-05-full-abac-design.md (becomes index), new docs/specs/abac/*.md files","acceptance_criteria":"- [ ] Design spec split into 9 section files under docs/specs/abac/\n- [ ] Original file converted to index with section links\n- [ ] All internal cross-references between sections updated\n- [ ] All plan file references to spec lines updated to reference section files\n- [ ] No content lost during split\n- [ ] ADR cross-references to spec updated","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T23:01:29Z","created_by":"seanb4t","updated_at":"2026-02-08T23:12:03Z","closed_at":"2026-02-08T23:12:03Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.294","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.295","title":"Missing seed policies: seed:property-system-forbid and seed:property-owner-write","description":"PR #69 Review Finding P1-1: The spec (07-migration-seeds.md lines 87-95) defines 18 seed policies, but Task 22 in the plan (phase-7.4.md) only has 16. Missing: seed:property-system-forbid (forbid for system-visibility properties, providing audit attribution) and seed:property-owner-write (permit owner to write/delete their own properties). The count in Task 22 acceptance criteria ('All 16 seed policies') and the SeedPolicies() function must be updated to 18.","acceptance_criteria":"- [ ] seed:property-system-forbid added to Task 22 SeedPolicies() with DSL: forbid(principal is character, action, resource is property) when { resource.visibility == \"system\" }\n- [ ] seed:property-owner-write added to Task 22 SeedPolicies() with DSL: permit(principal is character, action in [\"write\", \"delete\"], resource is property) when { resource.owner == principal.id }\n- [ ] Task 22 acceptance criteria updated from 16 to 18 seed policies (17 permit, 1 forbid -\u003e 16 permit, 2 forbid)\n- [ ] All seed policy names match spec exactly","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:37:19Z","created_by":"seanb4t","updated_at":"2026-02-09T00:57:37Z","closed_at":"2026-02-09T00:57:37Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.295","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.296","title":"Decision.Validate() enforcement missing from Task 17 acceptance criteria","description":"PR #69 Review Finding P1-5: Spec (01-core-types.md lines 272-281) states 'The engine MUST call Validate() before returning any Decision.' Task 17 (engine implementation) acceptance criteria does not include this requirement. Without this, the Decision invariant (Allowed/Effect consistency) could be violated silently.","acceptance_criteria":"- [ ] Task 17 acceptance criteria includes: engine MUST call Decision.Validate() before returning\n- [ ] Test step verifies Validate() is called on every engine return path\n- [ ] Test for Decision invariant violation (allowed=true but effect=deny)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:37:35Z","created_by":"seanb4t","updated_at":"2026-02-09T01:02:29Z","closed_at":"2026-02-09T01:02:29Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.296","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.297","title":"Missing visibility guard on property-visible-to and property-excluded-from seeds","description":"PR #69 Review Finding P1-2: Task 22 seed policies seed:property-visible-to and seed:property-excluded-from are missing the resource.visibility == \"restricted\" condition required by spec (07-migration-seeds.md lines 97-109). Without this guard, these policies would grant/deny access to ALL properties with visible_to/excluded_from lists, not just restricted-visibility ones. Security-critical. Also, names must include 'restricted-' prefix: seed:property-restricted-visible-to and seed:property-restricted-excluded.","acceptance_criteria":"- [ ] seed:property-visible-to renamed to seed:property-restricted-visible-to\n- [ ] seed:property-excluded-from renamed to seed:property-restricted-excluded  \n- [ ] resource.visibility == \"restricted\" condition added to both DSL expressions\n- [ ] DSL text matches spec exactly (lines 97-109)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:37:35Z","created_by":"seanb4t","updated_at":"2026-02-09T01:06:21Z","closed_at":"2026-02-09T01:06:21Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.297","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.297","depends_on_id":"holomush-5k1.295","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.298","title":"Missing exit: and scene: resource prefix constants in Task 6","description":"PR #69 Review Finding P1-3: Task 6 (phase-7.1.md) defines resource prefix constants but omits ResourceExit and ResourceScene. Spec (01-core-types.md prefix mapping table) defines exit: and scene: prefixes. Existing exit/scene resources would fail authorization without these constants.","acceptance_criteria":"- [ ] ResourceExit = \"exit:\" added to resource prefix constants in Task 6\n- [ ] ResourceScene = \"scene:\" added to resource prefix constants in Task 6\n- [ ] Prefix parser updated to handle exit: and scene: prefixes\n- [ ] Tests added for exit: and scene: prefix parsing","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:37:39Z","created_by":"seanb4t","updated_at":"2026-02-09T01:02:29Z","closed_at":"2026-02-09T01:02:29Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.298","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.299","title":"Glob pattern validation limits missing from Task 9/12 acceptance criteria","description":"PR #69 Review Finding P1-4: Spec (02-policy-dsl.md lines 146-150) requires MUST-level limits on glob patterns: 100 chars max, 5 wildcards max, reject [, {, **. These validation requirements are not in Task 9 or Task 12 acceptance criteria.","acceptance_criteria":"- [ ] Task 9 or Task 12 acceptance criteria includes: glob patterns MUST be limited to 100 characters\n- [ ] Acceptance criteria includes: MUST NOT contain more than 5 wildcard characters (* or ? combined)\n- [ ] Acceptance criteria includes: compiler MUST reject patterns containing [, {, or **\n- [ ] Test steps include validation tests for each limit","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:37:43Z","created_by":"seanb4t","updated_at":"2026-02-09T01:02:29Z","closed_at":"2026-02-09T01:02:29Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.299","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.3","title":"[E7] Phase 7.1: Policy Schema (Database Tables + Policy Store)","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.1.md`.\n\n\u003c!-- SPDX-License-Identifier: Apache-2.0 --\u003e\n\u003c!-- Copyright 2026 HoloMUSH Contributors --\u003e\n\n# Phase 7.1: Policy Schema (Database Tables + Policy Store)\n\n\u003e **[Back to Overview](./2026-02-06-full-abac-implementation.md)** | **[Next: Phase 7.2](./2026-02-06-full-abac-phase-7.2.md)**\n\u003e\n\u003e **Note:** Migration numbers in this phase (000015, 000016, 000017) are relative to the current latest migration `000014_aliases`. If other migrations merge before this work, these numbers MUST be updated to avoid collisions.\n\u003e\n\u003e **Note:** All tasks use file.md#anchor format pointing to split spec files in `docs/specs/abac/`. Legacy monolithic spec line numbers are preserved in parenthetical notes for traceability.\n\nTask Inventory:\n- T0: AST Serialization Spike\n- T0.5: Dependency Audit\n- T1: Create access\\_policies migration\n- T2: Create access\\_audit\\_log migration\n- T3: Create entity\\_properties migration\n- T4a: EntityProperty type and PropertyRepository\n- T4b: WorldService deletion methods\n- T4c: Property cascade deletion and lifecycle\n- T5: Define core types (AccessRequest, Decision, Effect, PolicyMatch, AttributeBags)\n- T6: Define subject/resource prefix constants and parser\n- T7: Policy store interface and PostgreSQL implementation\n- T7b: AccessPolicyEngine contract tests (post-engine verification)\n\nThis epic tracks phase-scoped execution of the ABAC implementation plan. Child tasks preserve plan-level dependencies and carry explicit TDD and independent-review gates.","acceptance_criteria":"- [ ] All planned Phase 7.1 tasks are represented as child beads under this epic.\n- [ ] Each child task is executed with the plan's mandatory TDD protocol (fail test first, then pass with `task test`; SQL migration exception applies with required integration coverage).\n- [ ] Each child task receives a passing independent reviewer-agent review confirming acceptance criteria, spec alignment, design/ADR alignment, and resolution of findings.\n- [ ] Inter-task and cross-phase dependencies are linked in beads and respected before this epic is closed.\n- [ ] M1 gate achieved at T7 (PolicyStore + migration operational).","notes":"## Includes: AccessControl Interface Improvement\n\nFrom PR #35 review (holomush-zy6): The AccessControl.Check() method currently returns bool instead of (bool, error). This should be addressed when implementing the policy engine:\n\n- Change interface to return (bool, error)\n- Allows distinguishing \"denied\" from \"system error\"\n- Prevents masking infrastructure failures as permission denials","status":"closed","priority":1,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:32:25Z","created_by":"seanb4t","updated_at":"2026-02-12T22:51:21Z","closed_at":"2026-02-12T22:51:21Z","close_reason":"All 7.1 tasks complete. T7b reparented to 7.3 epic.","dependencies":[{"issue_id":"holomush-5k1.3","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.3","depends_on_id":"holomush-5k1.1","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.3","depends_on_id":"holomush-5k1.2","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.3.1","title":"[ABAC Plan 7.1] T0: AST Serialization Spike","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.1.md` task section at line 12.\n\n**Purpose:** Validate that participle-generated AST nodes can survive JSON serialization round-trips BEFORE implementing the policy storage and compiler. This spike prevents discovering storage model failures at Task 12 ([Phase 7.2](./2026-02-06-full-abac-phase-7.2.md)) after 11 tasks are complete.\n\n**Spec References:** [02-policy-dsl.md#grammar](../specs/abac/02-policy-dsl.md#grammar), [05-storage-audit.md#schema](../specs/abac/05-storage-audit.md#schema)\n\n**Dependencies:** None (first task in the plan)\n\n**Acceptance Criteria:**\n\n- [ ] Parse sample policy DSL string into participle AST\n- [ ] Marshal AST to JSON using `json.Marshal`\n- [ ] Unmarshal JSON back to AST using `json.Unmarshal`\n- [ ] Compare original AST to round-tripped AST (deep equality check)\n- [ ] If round-trip fails, document alternative serialization approach (custom MarshalJSON/UnmarshalJSON or switch to protobuf)\n- [ ] Spike findings documented in commit message or inline comments\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Create: `internal/access/policy/dsl/ast_spike_test.go` (temporary spike test file)\n\n**Implementation Steps:**\n\n**Step 1: Write spike test**\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Step 2: Define minimal AST types for spike**\n\nCreate just enough AST structure to represent a simple policy. Use participle struct tags if available, or plain structs if not. Focus on proving the round-trip works.\n\n**Step 3: Run test and verify**\n\n[Code snippet omitted; see source plan section for full example.]\n\nExpected: Test PASSES — AST round-trips correctly through JSON.\n\nIf test FAILS: Document the failure mode (unexported fields, interface types, pointer semantics) and propose fix (custom MarshalJSON, protobuf, etc).\n\n**Step 4: Commit spike findings**\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Step 5: Clean up or keep**\n\n- If spike PASSES: Keep test file as regression test, proceed to Task 1\n- If spike FAILS: Document findings, update Task 7 and Task 8 ([Phase 7.2](./2026-02-06-full-abac-phase-7.2.md)) to use alternative serialization\n\n**Notes:**\n\n- This spike is intentionally minimal — just enough to prove/disprove the storage model\n- If participle ASTs use unexported fields or interface types that break JSON, we discover it NOW instead of at Task 12 ([Phase 7.2](./2026-02-06-full-abac-phase-7.2.md))\n- Alternative serialization approaches: custom `MarshalJSON`/`UnmarshalJSON`, protobuf, gob encoding\n\n**Contingency Plan: If Participle Spike Fails**\n\nIf the participle parser proves insufficient for our AST serialization needs, we have the following alternative approaches:\n\n**Alternative 1: Protobuf Serialization**\n\n- Define AST schema in `.proto` files\n- Use protobuf's native serialization (battle-tested, efficient, schema-versioned)\n- Trade-off: Adds protoc dependency to build pipeline\n- Estimated effort: 2-3 days to define schemas + migrate\n\n**Alternative 2: Custom JSON Marshaling**\n\n- Implement custom `MarshalJSON`/`UnmarshalJSON` for each AST node type\n- Maintain full control over serialization format\n- Trade-off: More boilerplate code, manual maintenance\n- Estimated effort: 1-2 days for core AST types\n\n**Alternative 3: Simplified AST**\n\n- Reduce AST complexity by flattening nested structures\n- Store minimal representation, reconstruct details on demand\n- Trade-off: May lose fidelity for complex policies\n- Estimated effort: 3-4 days to redesign + implement\n\n**Decision Criteria for Abandoning Participle:**\n\nAbandon participle if the spike shows:\n\n- More than 2x development time vs. custom marshaling (\u003e4 days to resolve serialization issues)\n- Fundamental incompatibility requiring AST redesign\n- Performance issues that cannot be resolved (\u003e100ms per policy parse)\n- Maintenance burden that exceeds benefits of structured parsing\n\nIf abandoning participle, the recommended fallback is **Alternative 2 (Custom JSON Marshaling)** due to lowest migration cost and alignment with existing Go patterns in the codebase.\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] Expected: Test PASSES — AST round-trips correctly through JSON.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Sonnet 4.5\n**Complexity:** Moderate — focused spike validating JSON round-trips for participle AST nodes\n**Scope:** Single concern (serialization), 1-2 new files, clear pass/fail outcome\n**Criticality:** High — gates all downstream storage work, but scope is narrow and well-defined\n**Reasoning:** Clear investigation scope with defined acceptance criteria. No architectural decisions needed — just validate serialization works. Sonnet handles focused implementation tasks well.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:44Z","created_by":"seanb4t","updated_at":"2026-02-11T23:27:24Z","closed_at":"2026-02-11T23:27:24Z","close_reason":"AST serialization spike passed - participle AST round-trips through JSON. Key findings: custom lexer needed, parser tag required for Pos fields, JSON comparison via assert.JSONEq","labels":["abac","phase-7-1","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.3.1","depends_on_id":"holomush-5k1.3","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.3.10","title":"[ABAC Plan 7.1] T6: Define subject/resource prefix constants and parser","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.1.md` task section at line 919.\n\n**Spec References:** [01-core-types.md#accessrequest](../specs/abac/01-core-types.md#accessrequest), [01-core-types.md#session-subject-resolution](../specs/abac/01-core-types.md#session-subject-resolution)\n\n**Acceptance Criteria:**\n\n- [ ] Subject prefixes defined: `character:`, `plugin:`, `system`, `session:`\n- [ ] Resource prefixes defined: `location:`, `object:`, `command:`, `property:`, `stream:`\n- [ ] `ParseEntityRef()` correctly parses all prefix types (table-driven tests)\n- [ ] `system` parses to type `\"system\"` with empty ID\n- [ ] `stream:location:01XYZ` parses to type `\"stream\"`, ID `\"location:01XYZ\"`\n- [ ] Unknown prefix returns `INVALID_ENTITY_REF` error code (oops)\n- [ ] Empty string returns `INVALID_ENTITY_REF` error code\n- [ ] Legacy `char:01ABC` prefix returns `INVALID_ENTITY_REF` error code\n- [ ] Session error code constants defined: `infra:session-invalid`, `infra:session-store-error`\n- [ ] `access.WithSystemSubject(ctx)` stores system subject marker in context\n- [ ] `access.IsSystemContext(ctx)` retrieves system subject marker from context\n- [ ] System context helpers tested with table-driven tests\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Extend: `internal/access/policy/types/types.go` (add NamespaceSchema and extend AttributeSchema implementation)\n- Create: `internal/access/policy/prefix.go`\n- Test: `internal/access/policy/prefix_test.go`\n- Create: `internal/access/context.go` (system context helpers)\n- Test: `internal/access/context_test.go`\n\n**Dependencies:**\n\n- Task 5 (Phase 7.1) — core types must exist before extending\n\n**Step 1: Extend shared types (NamespaceSchema, AttributeSchema methods)**\n\n\u003e **Design note:** Task 5 created the base `AttributeSchema` and `AttrType` types. This task extends those types with `NamespaceSchema` and adds stub methods to `AttributeSchema` for use by the policy compiler (Task 12 ([Phase 7.2](./2026-02-06-full-abac-phase-7.2.md))) and attribute resolver (Task 14 ([Phase 7.3](./2026-02-06-full-abac-phase-7.3.md))).\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Step 2: Write failing tests for prefix parsing**\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Step 3: Run tests to verify they fail**\n\nRun: `task test`\nExpected: FAIL\n\n**Step 4: Implement prefix parsing**\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Step 5: Add system context helpers**\n\nThese helpers allow bootstrap and system operations to bypass ABAC by marking context as system-level.\n\n**Security requirement (S1):** These helpers MUST be restricted to internal-only\ncallers. API ingress layers MUST validate that external requests cannot use\nthe system subject or system context marker. Tests MUST verify rejection at\nAPI boundaries.\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Step 6: Write tests for system context helpers**\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Step 7: Run tests to verify they pass**\n\nRun: `task test`\nExpected: PASS\n\n**Step 8: Commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] Expected: FAIL\n- [ ] Expected: PASS\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Sonnet 4.5\n**Complexity:** Low-moderate — constants + simple parser for subject/resource prefixes\n**Scope:** 1-2 files, prefix constants and ParseSubject/ParseResource functions\n**Criticality:** Medium — used by engine and providers but straightforward\n**Reasoning:** Simple string parsing with well-defined prefix set. No complex logic. Sonnet handles this comfortably.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:45Z","created_by":"seanb4t","updated_at":"2026-02-11T23:33:35Z","closed_at":"2026-02-11T23:33:35Z","close_reason":"Prefix parser implemented with all subject/resource constants, ParseEntityRef with table-driven tests, system context helpers WithSystemSubject/IsSystemContext, AttributeSchema Register/IsRegistered stubs","labels":["abac","phase-7-1","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.3.10","depends_on_id":"holomush-5k1.3","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.3.10","depends_on_id":"holomush-5k1.3.9","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.3.11","title":"[ABAC Plan 7.1] T7: Policy store interface and PostgreSQL implementation","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.1.md` task section at line 1220.\n\n**Spec References:** [05-storage-audit.md#schema](../specs/abac/05-storage-audit.md#schema), [05-storage-audit.md#cache-invalidation](../specs/abac/05-storage-audit.md#cache-invalidation)\n\n**ADR References:** [035-audit-log-source-column.md](../specs/decisions/epic7/phase-7.1/035-audit-log-source-column.md)\n\n**Dependencies:**\n\n- Task 0 (Phase 7.1) — AST serialization spike validates storage model\n- Task 1 (Phase 7.1) — access_policies migration creates table\n- Task 2 (Phase 7.1) — audit log migration for cross-table consistency\n- Task 5 (Phase 7.1) — core types define PolicyEffect and other required types\n\n**Acceptance Criteria:**\n\n- [ ] `PolicyStore` interface defines: `Create`, `Get`, `GetByID`, `Update`, `Delete`, `ListEnabled`, `List`\n- [ ] `StoredPolicy` struct includes all `access_policies` table columns\n- [ ] `StoredPolicy.ID` uses `string` for ID because policy identifiers may be UUIDs generated by PostgreSQL or other string formats. This differs from the world model's ulid.ULID convention because policies are not world entities.\n- [ ] `StoredPolicy` includes CreatedAt and UpdatedAt fields populated from DB\n- [ ] `StoredPolicy.Effect` uses `types.PolicyEffect` from Task 5 (not `policy.Effect`)\n- [ ] PolicyEffect constants `PolicyEffectPermit`/`PolicyEffectForbid` referenced from Task 5\n- [ ] `PolicyEffect.String()` serializes to DB TEXT values (\"permit\"/\"forbid\")\n- [ ] Documentation clearly distinguishes `PolicyEffect` (what a policy declares) from `policy.Effect` (what the engine decides)\n- [ ] `Create()` generates ULID, inserts row, and calls `pg_notify('policy_changed', policyID)`\n- [ ] pg_notify MUST be in same transaction as CRUD operation. Test verifies NOTIFY is sent within same DB transaction as policy write.\n- [ ] `Update()` increments version, inserts into `access_policy_versions`, calls `pg_notify`\n- [ ] `Delete()` removes row (CASCADE), calls `pg_notify`\n- [ ] `ListEnabled()` returns only `enabled = true` rows\n- [ ] `ListOptions` supports filtering by `Source` and `Enabled`\n- [ ] **Source column naming constraint (ADR 35):** Policies named `seed:*` MUST have `source='seed'`; policies named `lock:*` MUST have `source='lock'`. Validation enforced at creation time.\n- [ ] Constructor accepts `*pgxpool.Pool`; errors use `oops` with context\n- [ ] Integration tests (with `//go:build integration`) cover all CRUD operations\n- [ ] All tests pass via `task test`\n\n**Design Note:** `Create()` and `Update()` accept pre-compiled AST bytes in `StoredPolicy.CompiledAST`. Compilation happens in the caller (typically the engine or a higher-level service that uses `PolicyCompiler` from Task 12 ([Phase 7.2](./2026-02-06-full-abac-phase-7.2.md))). This approach avoids a circular dependency between Task 7 (PolicyStore) and Task 12 ([Phase 7.2](./2026-02-06-full-abac-phase-7.2.md)) (PolicyCompiler), and differs from the spec wording which suggests the store calls `Compile()` internally.\n\n**Files:**\n\n- Create: `internal/access/policy/store/store.go` (interface)\n- Create: `internal/access/policy/store/postgres.go` (implementation)\n- Test: `internal/access/policy/store/postgres_test.go`\n\n**Step 1: Write the store interface**\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Step 2: Write failing tests for PostgreSQL store**\n\nWrite table-driven tests covering:\n\n- Create a policy, verify it round-trips\n- Get by name, get by ID\n- Update a policy (version increments, version history created)\n- Delete a policy\n- ListEnabled returns only enabled policies\n- NOTIFY is sent on create/update/delete\n\nTest file: `internal/access/policy/store/postgres_test.go`\n\nUse `//go:build integration` tag and testcontainers pattern from existing integration tests in `test/integration/world/world_suite_test.go`.\n\n**Step 3: Implement PostgreSQL store**\n\nKey behaviors:\n\n- `Create()`: generates ULID, inserts row, calls `pg_notify('policy_changed', policyID)`\n- `Update()`: increments version, inserts into `access_policy_versions`, calls `pg_notify`\n- `Delete()`: deletes row (CASCADE removes versions), calls `pg_notify`\n- `ListEnabled()`: returns all rows where `enabled = true`\n\nFollow existing repository patterns from `internal/world/postgres/location_repo.go`:\n\n- Accept `*pgxpool.Pool` in constructor\n- Use `oops` for error wrapping with context\n- Use helper functions for ULID conversion\n\n**Step 4: Run tests**\n\nRun: `task test`\nExpected: Unit tests PASS (integration tests require DB)\n\n**Step 5: Commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] Expected: Unit tests PASS (integration tests require DB)\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Opus 4.6\n**Complexity:** High — PolicyStore interface design + full PostgreSQL implementation with LISTEN/NOTIFY, versioning, compilation triggers\n**Scope:** 4-6 files (interface, implementation, tests, integration), multiple database operations\n**Criticality:** Very high — central storage layer for all policies, LISTEN/NOTIFY cache invalidation\n**Reasoning:** Complex interface design spanning storage, versioning, cache invalidation via PostgreSQL LISTEN/NOTIFY, and AST serialization. Multiple concerns must be coordinated correctly. Security-critical persistence layer. Opus needed for multi-concern coordination.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:45Z","created_by":"seanb4t","updated_at":"2026-02-11T23:45:18Z","closed_at":"2026-02-11T23:45:18Z","close_reason":"PolicyStore interface, PostgresStore implementation, unit tests (12 passing), integration tests (14 specs covering CRUD, version history, ListEnabled/List filtering, pg_notify, ADR-35 source validation)","labels":["abac","phase-7-1","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.3.11","depends_on_id":"holomush-5k1.3","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.3.11","depends_on_id":"holomush-5k1.3.3","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.3.11","depends_on_id":"holomush-5k1.3.4","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.3.11","depends_on_id":"holomush-5k1.3.9","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.3.12","title":"[ABAC Plan 7.1] T7b: AccessPolicyEngine contract tests (post-engine verification)","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.1.md` task section at line 1356.\n\n**Spec References:** [01-core-types.md#accesspolicyengine](../specs/abac/01-core-types.md#accesspolicyengine)\n\n**ADR References:** [099-access-policy-engine-contract-tests.md](../specs/decisions/epic7/phase-7.1/099-access-policy-engine-contract-tests.md)\n\n**Dependencies:**\n\n- Task 7 (Phase 7.1) — PolicyStore and persisted policy contracts must exist\n- Task 17.4 (Phase 7.3) — full `Evaluate()` flow (steps 1-7) must be implemented\n- Task 18 (Phase 7.3) — policy cache behavior must exist for empty-cache boundary assertions\n\n**Execution Timing:** Task ID remains `7b` for traceability with Phase 7.1 review findings, but this verification task executes after Phase 7.3 completes (`T17.4` + `T18`).\n\n**Acceptance Criteria:**\n\n- [ ] Contract test suite covers edge cases not exercised by integration tests\n- [ ] `AccessPolicyEngine` contract uses value semantics: `Evaluate(ctx, AccessRequest)`\n- [ ] Malformed subject prefixes return `INVALID_ENTITY_REF` error code\n- [ ] Empty subject, action, or resource strings return appropriate error codes\n- [ ] Zero-value `AccessRequest{}` is rejected with clear `INVALID_REQUEST` error\n- [ ] Context cancellation mid-evaluation returns `context.Canceled` error\n- [ ] Empty policy cache (no policies loaded) returns `EffectDefaultDeny`\n- [ ] Error wrapping preserves error code through the call stack\n- [ ] All tests pass via `task test`\n\n**Purpose:** Contract tests validate API-boundary edge cases and error handling on the canonical engine contract (`internal/access/policy`). These checks intentionally run after engine implementation tasks to prevent out-of-sequence churn.\n\n**Files:**\n\n- Create: `internal/access/policy/engine_contract_test.go`\n\n**Step 1: Write failing contract tests**\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Step 2: Run tests to verify they fail**\n\nRun: `task test`\nExpected: FAIL — contract boundary assertions missing or incomplete\n\n**Step 3: Implement missing contract guards in engine**\n\nAdd request validation and boundary-condition handling in `internal/access/policy/engine.go`:\n\n- Reject zero-value request (`INVALID_REQUEST`)\n- Reject malformed subject prefix (`INVALID_ENTITY_REF`)\n- Return `context.Canceled` when context is already canceled\n- Return `EffectDefaultDeny` when cache snapshot is empty\n\n**Step 4: Run tests to verify they pass**\n\nRun: `task test`\nExpected: PASS\n\n**Step 5: Commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Note:** This task is NOT on the critical path and should run as a post-engine validation pass after `T17.4` and `T18`.\n\n---\n\n---\n\n\u003e **[Back to Overview](./2026-02-06-full-abac-implementation.md)** | **[Next: Phase 7.2](./2026-02-06-full-abac-phase-7.2.md)**\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] Expected: FAIL — contract boundary assertions missing or incomplete\n- [ ] Expected: PASS\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Sonnet 4.5\n**Complexity:** Moderate-high — contract tests validating full engine behavior against PolicyStore\n**Scope:** Test file(s) verifying AccessPolicyEngine contract\n**Criticality:** High — validates engine correctness, but test patterns are well-defined\n**Reasoning:** Contract testing follows established patterns. Tests are derived from spec acceptance criteria. Sonnet handles test implementation from clear specifications.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:45Z","created_by":"seanb4t","updated_at":"2026-02-13T15:53:16Z","closed_at":"2026-02-13T15:53:16Z","close_reason":"Implemented and committed on feat/abac-phase-7.3","labels":["abac","phase-7-1","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.3.12","depends_on_id":"holomush-5k1.3.11","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.3.12","depends_on_id":"holomush-5k1.5","type":"parent-child","created_at":"2026-02-12T17:50:55Z","created_by":"seanb4t","metadata":"{}"},{"issue_id":"holomush-5k1.3.12","depends_on_id":"holomush-5k1.5.10","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.3.12","depends_on_id":"holomush-5k1.5.9","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.3.2","title":"[ABAC Plan 7.1] T0.5: Dependency Audit","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.1.md` task section at line 144.\n\n**Purpose:** Verify compatibility of Go module dependencies (pgx, ULID, oops, participle, gopher-lua, prometheus) BEFORE implementation begins. Version conflicts discovered at Task 12 or later would force rework.\n\n**Spec References:** N/A (implementation infrastructure validation)\n\n**Dependencies:**\n\n- Task 0 (Phase 7.1) — AST serialization spike validates storage model\n\n**Acceptance Criteria:**\n\n- [ ] pgx/pgxpool version compatible with existing codebase\n- [ ] ULID library compatible with existing usage in world/store\n- [ ] oops library compatible with existing error patterns\n- [ ] participle v2 available and supports struct-tag parsing\n- [ ] gopher-lua compatible with existing plugin system (for future plugin attribute providers)\n- [ ] prometheus/client_golang compatible with existing observability\n- [ ] All dependencies documented in commit message with versions\n- [ ] No version conflicts reported by `go mod tidy`\n\n**Files:**\n\n- No new files created (verification task only)\n- Document findings in commit message or add to `docs/plans/2026-02-06-full-abac-phase-7.1.md` as a note\n\n**Implementation Steps:**\n\n**Step 1: Check current dependency versions**\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Step 2: Verify participle availability**\n\n[Code snippet omitted; see source plan section for full example.]\n\nCheck that participle v2 is available and supports the struct-tag parsing needed for DSL grammar.\n\n**Step 3: Check pgx compatibility**\n\nVerify current pgx version is v5.x (required for context-based API and improved connection pooling).\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Step 4: Check ULID compatibility**\n\nVerify ULID library matches what's already used in `internal/world` and `internal/store`.\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Step 5: Verify no conflicts**\n\n[Code snippet omitted; see source plan section for full example.]\n\nExpected: No version conflicts, all tests pass.\n\n**Step 6: Document findings**\n\nCreate a commit documenting verified versions:\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Notes:**\n\n- This task gates Task 1 (database migrations) to ensure we can proceed confidently\n- If conflicts are found, resolve them BEFORE starting Task 1\n- Dependency audit is a one-time validation; no runtime artifacts created\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] Expected: No version conflicts, all tests pass.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Haiku 4.5\n**Complexity:** Low — checking go.mod compatibility, running go vet/build\n**Scope:** No code changes, purely validation of existing dependency versions\n**Criticality:** Medium — blocks implementation start but is routine verification\n**Reasoning:** Straightforward dependency compatibility checking. No code generation or design decisions. Haiku is sufficient for validation-only tasks.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:44Z","created_by":"seanb4t","updated_at":"2026-02-11T23:33:35Z","closed_at":"2026-02-11T23:33:35Z","close_reason":"Dependency audit passed: pgx v5.8.0, ulid v2.1.1, oops v1.21.0, participle v2.1.4, gopher-lua v1.1.1, prometheus v1.23.2. No conflicts.","labels":["abac","phase-7-1","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.3.2","depends_on_id":"holomush-5k1.3","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.3.2","depends_on_id":"holomush-5k1.3.1","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.3.3","title":"[ABAC Plan 7.1] T1: Create access\\_policies migration","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.1.md` task section at line 240.\n\n**Spec References:** [05-storage-audit.md#schema](../specs/abac/05-storage-audit.md#schema)\n\n**Dependencies:**\n\n- Task 0.5 (Phase 7.1) — dependency audit validates all required libraries\n\n**Acceptance Criteria:**\n\n- [ ] `access_policies` table matches spec schema exactly (columns, types, constraints, CHECK values)\n- [ ] `access_policy_versions` table created with foreign key to `access_policies`\n- [ ] Partial index `idx_policies_enabled` on `enabled = true`\n- [ ] Up migration applies cleanly; down migration reverses it\n- [ ] Column `source` CHECK constraint includes all four values: `seed`, `lock`, `admin`, `plugin`\n\n**Files:**\n\n- Create: `internal/store/migrations/000015_access_policies.up.sql`\n- Create: `internal/store/migrations/000015_access_policies.down.sql`\n\n**Step 1: Write the up migration**\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Step 2: Write the down migration**\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Step 3: Verify migration applies**\n\nRun: `task test` (migrations are tested via integration tests)\n\n**Step 4: Commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Sonnet 4.5\n**Complexity:** Moderate — SQL migration matching spec schema with constraints, indexes, CHECK values\n**Scope:** 1-2 migration files, must match spec exactly (columns, types, constraints)\n**Criticality:** High — foundational schema, all policy storage depends on this\n**Reasoning:** Schema translation from spec to SQL is well-defined but requires precision. Sonnet handles spec-to-implementation translation reliably.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:44Z","created_by":"seanb4t","updated_at":"2026-02-11T23:36:33Z","closed_at":"2026-02-11T23:36:33Z","close_reason":"access_policies and access_policy_versions migration created (000015), migrate_test updated to include all 17 migrations","labels":["abac","phase-7-1","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.3.3","depends_on_id":"holomush-5k1.3","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.3.3","depends_on_id":"holomush-5k1.3.2","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.3.4","title":"[ABAC Plan 7.1] T2: Create access\\_audit\\_log migration","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.1.md` task section at line 317.\n\n**Spec References:** [05-storage-audit.md#schema](../specs/abac/05-storage-audit.md#schema), [05-storage-audit.md#audit-log-serialization](../specs/abac/05-storage-audit.md#audit-log-serialization)\n\n**Dependencies:**\n\n- Task 0.5 (Phase 7.1) — dependency audit validates all required libraries\n\n**Acceptance Criteria:**\n\n- [ ] `access_audit_log` table uses `PARTITION BY RANGE (timestamp)` from day one\n- [ ] `original_subject` TEXT field added to preserve session subject before resolution (nullable)\n- [ ] Composite PRIMARY KEY (id, timestamp) includes partition key per PostgreSQL requirement\n- [ ] SQL comment documents PK deviation from spec and rationale\n- [ ] Initial partition creation deferred to bootstrap (T23, Phase 7.4) per ADR #91\n- [ ] Partition naming follows spec convention: `access_audit_log_YYYY_MM` (enforced at bootstrap)\n- [ ] BRIN index on `timestamp` with `pages_per_range = 128`\n- [ ] Subject + timestamp DESC index for per-subject queries\n- [ ] Denied-only partial index for denial analysis queries\n- [ ] `effect` CHECK constraint includes: `allow`, `deny`, `default_deny`, `system_bypass`\n- [ ] Up migration applies cleanly; down migration reverses it\n- [ ] Note added flagging spec update needed for PK inconsistency\n\n**ADR References:** [091-bootstrap-creates-initial-partitions.md](../specs/decisions/epic7/phase-7.4/091-bootstrap-creates-initial-partitions.md)\n\n**Files:**\n\n- Create: `internal/store/migrations/000016_access_audit_log.up.sql` (table schema, indexes)\n- Create: `internal/store/migrations/000016_access_audit_log.down.sql` (rollback)\n\n**Step 1: Write the SQL migration (schema + indexes only)**\n\nThe spec requires monthly range partitioning from day one (retrofitting is impractical at 10M rows/day). Use BRIN index on timestamp for efficient time-range scans.\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Step 2: Write the down migration**\n\n[Code snippet omitted; see source plan section for full example.]\n\nThe down migration drops the parent table, which automatically drops all partitions due to PostgreSQL CASCADE behavior. No Go code needed for rollback.\n\n**Step 3: Commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n**NOTE:** The spec ([05-storage-audit.md#schema](../specs/abac/05-storage-audit.md#schema) (was monolithic spec line 2070)) defines `id TEXT PRIMARY KEY`, but PostgreSQL partitioned tables require the partition key (`timestamp`) to be included in the primary key. The implementation correctly uses `PRIMARY KEY (id, timestamp)`. **Action required:** Update spec to reflect this PostgreSQL constraint.\n\n**NOTE:** Initial partition creation is handled by the bootstrap sequence (T23, Phase 7.4) rather than a Go migration file. `golang-migrate` only executes `.up.sql`/`.down.sql` files, so a standalone Go file would not run automatically. See ADR #91 for rationale.\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Sonnet 4.5\n**Complexity:** Moderate — SQL migration with PARTITION BY RANGE, custom serialization format\n**Scope:** 1-2 migration files, partitioned table design\n**Criticality:** High — audit log is security-critical, but schema is fully specified\n**Reasoning:** Partitioned table design adds moderate complexity beyond standard migrations, but spec provides exact schema. Sonnet handles this well.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:44Z","created_by":"seanb4t","updated_at":"2026-02-11T23:27:24Z","closed_at":"2026-02-11T23:27:24Z","close_reason":"access_audit_log migration created with PARTITION BY RANGE, composite PK, BRIN index, subject+denied indexes","labels":["abac","phase-7-1","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.3.4","depends_on_id":"holomush-5k1.3","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.3.5","title":"[ABAC Plan 7.1] T3: Create entity\\_properties migration","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.1.md` task section at line 407.\n\n**Spec References:** [05-storage-audit.md#schema](../specs/abac/05-storage-audit.md#schema), ADR 0013 (Properties as first-class entities)\n\n**Dependencies:**\n\n- Task 0.5 (Phase 7.1) — dependency audit validates all required libraries\n\n**Acceptance Criteria:**\n\n- [ ] `entity_properties` table matches spec schema (all columns, types, constraints)\n- [ ] `visibility` CHECK includes all five levels: `public`, `private`, `restricted`, `system`, `admin`\n- [ ] Unique constraint on `(parent_type, parent_id, name)`\n- [ ] Parent index on `(parent_type, parent_id)` for efficient lookups\n- [ ] `visibility_restricted_requires_lists` CHECK constraint ensures restricted visibility has non-NULL visible_to and excluded_from\n- [ ] `visibility_non_restricted_nulls_lists` CHECK constraint ensures non-restricted visibility has NULL lists\n- [ ] `idx_properties_owner` partial index on owner column where owner IS NOT NULL\n- [ ] Up migration applies cleanly; down migration reverses it\n\n**Files:**\n\n- Create: `internal/store/migrations/000017_entity_properties.up.sql`\n- Create: `internal/store/migrations/000017_entity_properties.down.sql`\n\n**Step 1: Write the up migration**\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Step 2: Write the down migration**\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Step 3: Commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Sonnet 4.5\n**Complexity:** Moderate — SQL migration with visibility CHECK, composite indexes\n**Scope:** 1-2 migration files matching spec\n**Criticality:** Medium — property storage is important but schema is straightforward\n**Reasoning:** Standard migration work following spec. Sonnet handles schema translation reliably.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:44Z","created_by":"seanb4t","updated_at":"2026-02-11T23:27:25Z","closed_at":"2026-02-11T23:27:25Z","close_reason":"entity_properties migration created with 5-level visibility, restricted list constraints, parent uniqueness","labels":["abac","phase-7-1","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.3.5","depends_on_id":"holomush-5k1.3","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.3.6","title":"[ABAC Plan 7.1] T4a: EntityProperty type and PropertyRepository","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.1.md` task section at line 478.\n\n\u003e **Note:** This task was originally Task 25 ([Phase 7.5](./2026-02-06-full-abac-phase-7.5.md)) in Phase 7.5, but moved to Phase 7.1 because PropertyProvider (Task 16b ([Phase 7.3](./2026-02-06-full-abac-phase-7.3.md))) depends on PropertyRepository existing. The entity_properties migration (Task 3) creates the table, and this task creates the Go types and repository interface/implementation.\n\u003e\n\u003e **Scope:** This task creates the new types (EntityProperty + PropertyRepository interface + PostgreSQL implementation) with full CRUD operations and validation logic. Tasks 4b and 4c handle integrating property lifecycle with WorldService.\n\n**Spec References:** [03-property-model.md](../specs/abac/03-property-model.md), ADR 0013 (Properties as first-class entities), ADR 0015 (Three-Layer Player Access Control)\n\n**Dependencies:**\n\n- Task 3 (Phase 7.1) — entity_properties migration must exist before repository implementation\n\n**Acceptance Criteria:**\n\n- [ ] `EntityProperty` struct: ID, ParentType, ParentID, Name, Value, Owner, Visibility, Flags, VisibleTo, ExcludedFrom, timestamps\n- [ ] `EntityProperty.ID` uses `ulid.ULID` to match existing world model convention (Location, Character, Object all use ulid.ULID)\n- [ ] `PropertyRepository` interface: `Create`, `Get`, `ListByParent`, `Update`, `Delete`, `DeleteByParent`\n- [ ] CRUD operations round-trip all fields correctly\n- [ ] Visibility defaults: `restricted` → auto-set `visible_to=[owner]`, `excluded_from=[]`\n- [ ] `visible_to` max 100 entries; `excluded_from` max 100 entries → error if exceeded\n- [ ] No overlap between `visible_to` and `excluded_from` → error\n- [ ] Parent name uniqueness → error on duplicate `(parent_type, parent_id, name)`\n- [ ] `DeleteByParent(ctx, parentType, parentID)` deletes all properties for the given parent entity (for cascade deletion when parent entities are deleted)\n- [ ] Follows existing repository pattern from `internal/world/postgres/location_repo.go`\n- [ ] `go vet` confirms no import cycles between `internal/access/` and `PropertyProvider` (or any provider packages that import from `internal/world/` or `internal/store/`)\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Create: `internal/world/property.go` (EntityProperty type + PropertyRepository interface)\n- Create: `internal/world/postgres/property_repo.go` (PostgreSQL implementation)\n- Test: `internal/world/postgres/property_repo_test.go`\n\n**Step 1: Write failing tests (Task 4a)**\n\n- Create property → round-trips all fields\n- Get by ID\n- List by parent (type + ID)\n- Update property (value, visibility, flags)\n- Delete property\n- Delete by parent (type + ID) → deletes all properties for that parent\n- Visibility defaults: `restricted` → auto-set `visible_to=[owner]`, `excluded_from=[]`\n- Constraints: `visible_to` max 100 entries, `excluded_from` max 100 entries\n- No overlap between `visible_to` and `excluded_from` → error\n- Parent name uniqueness → error on duplicate\n\n**Step 2: Implement**\n\n[Code snippet omitted; see source plan section for full example.]\n\nFollow existing repository patterns from `internal/world/postgres/location_repo.go`.\n\n**Step 3: Run tests, commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Sonnet 4.5\n**Complexity:** Moderate-high — Go types + repository interface + PostgreSQL implementation\n**Scope:** 3-4 new files (types, interface, implementation, tests), follows existing repository patterns\n**Criticality:** High — PropertyProvider (T16b) depends on this existing\n**Reasoning:** Follows established repository patterns in the codebase (WorldRepository, etc). Multi-file but pattern-driven. Sonnet handles pattern replication well.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:44Z","created_by":"seanb4t","updated_at":"2026-02-11T23:33:35Z","closed_at":"2026-02-11T23:33:35Z","close_reason":"EntityProperty type and PropertyRepository interface created. PostgreSQL implementation with full CRUD, visibility validation (restricted defaults, max 100 lists, no overlap), integration tests","labels":["abac","phase-7-1","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.3.6","depends_on_id":"holomush-5k1.3","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.3.6","depends_on_id":"holomush-5k1.3.5","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.3.7","title":"[ABAC Plan 7.1] T4b: WorldService deletion methods","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.1.md` task section at line 569.\n\n\u003e **Note:** This task creates the missing `DeleteCharacter()` method and ensures all three deletion methods exist in WorldService before Task 4c adds property cascade logic to them.\n\u003e\n\u003e **Implementation Note:** `WorldService.DeleteCharacter()` does not currently exist in `internal/world/service.go` and MUST be created as part of this task's scope. `DeleteObject()` and `DeleteLocation()` already exist and are not modified in this task.\n\u003e\n\u003e **Scope:** This task creates the missing deletion method with proper transaction handling and tests. Task 4c will add property cascade deletion to all three methods.\n\n**Spec References:** [05-storage-audit.md#schema](../specs/abac/05-storage-audit.md#schema) — entity_properties section discussing lifecycle\n\n**Dependencies:**\n\n- Task 4a (Phase 7.1) — PropertyRepository must exist for cascade deletion integration in Task 4c\n\n**Acceptance Criteria:**\n\n- [ ] `WorldService.DeleteCharacter(ctx context.Context, subjectID string, id ulid.ULID) error` method created\n- [ ] DeleteCharacter uses transaction handling (via `s.tx.WithTransaction`)\n- [ ] DeleteCharacter calls `s.characterRepo.Delete(ctx, id)` to remove the character\n- [ ] DeleteCharacter includes proper error wrapping with oops\n- [ ] Tests cover: successful deletion, transaction rollback on error, character not found error\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Modify: `internal/world/service.go` (DeleteCharacter method)\n- Test: `internal/world/service_test.go` (DeleteCharacter tests)\n\n**Step 1: Write failing tests (Task 4b)**\n\n- `WorldService.DeleteCharacter()` deletes a character by ID\n- DeleteCharacter handles character not found error\n- DeleteCharacter uses transaction (rollback on error)\n\n**Step 2: Implement DeleteCharacter**\n\nAdd to `internal/world/service.go`:\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Step 3: Run tests, commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Sonnet 4.5\n**Complexity:** Moderate — adding DeleteCharacter method, ensuring consistency with existing Delete methods\n**Scope:** 1-2 files in internal/world, follows existing patterns\n**Criticality:** Medium — enables cascade deletion but is straightforward\n**Reasoning:** Follows existing DeleteObject/DeleteLocation patterns. Clear implementation path. Sonnet handles consistent pattern extension.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:44Z","created_by":"seanb4t","updated_at":"2026-02-11T23:36:33Z","closed_at":"2026-02-11T23:36:33Z","close_reason":"WorldService.DeleteCharacter added following existing DeleteLocation/DeleteObject pattern. 5 table-driven tests: success, access denied, not found, repo error, nil repo","labels":["abac","phase-7-1","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.3.7","depends_on_id":"holomush-5k1.3","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.3.7","depends_on_id":"holomush-5k1.3.6","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.3.8","title":"[ABAC Plan 7.1] T4c: Property cascade deletion and lifecycle","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.1.md` task section at line 628.\n\n\u003e **Note:** This task integrates the PropertyRepository (from Task 4a) with WorldService deletion methods (from Task 4b) to ensure properties are cleaned up when parent entities are deleted.\n\u003e\n\u003e **Implementation Note:** This task modifies all three deletion methods (`DeleteCharacter`, `DeleteObject`, `DeleteLocation`) to add property cascade deletion calls via `PropertyRepository.DeleteByParent()`.\n\u003e\n\u003e **Scope:** This task adds property cascade deletion to existing deletion methods. The orphan cleanup goroutine and startup integrity checks have been moved to Phase 7.7 as resilience features.\n\n**Spec References:** [05-storage-audit.md#schema](../specs/abac/05-storage-audit.md#schema) — entity_properties section discussing lifecycle\n\n**Dependencies:**\n\n- Task 4b (Phase 7.1) — WorldService deletion methods must exist before adding property cascade logic\n\n**Acceptance Criteria:**\n\n- [ ] Property lifecycle on parent deletion: cascade delete in same transaction as parent entity deletion\n- [ ] `WorldService.DeleteCharacter()` → `PropertyRepository.DeleteByParent(\"character\", charID)` in same transaction (called before character deletion)\n- [ ] `WorldService.DeleteObject()` → `PropertyRepository.DeleteByParent(\"object\", objID)` in same transaction (called before object deletion)\n- [ ] `WorldService.DeleteLocation()` → `PropertyRepository.DeleteByParent(\"location\", locID)` in same transaction (called before location deletion)\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Modify: `internal/world/service.go` (add property cascade deletion to DeleteCharacter, DeleteObject, DeleteLocation)\n- Test: `internal/world/service_test.go` (cascade deletion tests)\n\n**Step 1: Write failing tests (Task 4c)**\n\n- `WorldService.DeleteCharacter()` deletes all properties for that character\n- `WorldService.DeleteObject()` deletes all properties for that object\n- `WorldService.DeleteLocation()` deletes all properties for that location\n- Cascade deletion happens in same transaction (rollback on error)\n\n**Step 2: Add property cascade deletion**\n\nModify `internal/world/service.go`:\n\n[Code snippet omitted; see source plan section for full example.]\n\nAdd similar property cascade deletion logic to existing `DeleteObject()` and `DeleteLocation()` methods.\n\n**Step 3: Run tests, commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n\u003e **Note:** Orphan cleanup goroutine and startup integrity checks have been moved to Phase 7.7 (new task after Task 34) as they are resilience features, not core schema concerns.\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Sonnet 4.5\n**Complexity:** Moderate — integrating PropertyRepository.DeleteByParent() into three deletion methods\n**Scope:** Modifies 3 existing methods, adds cascade calls\n**Criticality:** Medium — data integrity concern but clear integration points\n**Reasoning:** Well-defined integration task with existing code. No architectural decisions — just wiring PropertyRepository into deletion paths. Sonnet is appropriate.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:44Z","created_by":"seanb4t","updated_at":"2026-02-11T23:40:53Z","closed_at":"2026-02-11T23:40:53Z","close_reason":"Property cascade deletion implemented for all 3 entity types with 6 tests","labels":["abac","phase-7-1","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.3.8","depends_on_id":"holomush-5k1.3","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.3.8","depends_on_id":"holomush-5k1.3.7","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.3.9","title":"[ABAC Plan 7.1] T5: Define core types (AccessRequest, Decision, Effect, PolicyMatch, AttributeBags)","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.1.md` task section at line 696.\n\n**Spec References:** [01-core-types.md](../specs/abac/01-core-types.md) — AccessRequest, Decision, Effect, PolicyMatch, AttributeBags\n\n**Dependencies:** None (can start immediately)\n\n**Acceptance Criteria:**\n\n- [ ] `Effect` enum has exactly 4 values: `DefaultDeny`, `Allow`, `Deny`, `SystemBypass`\n- [ ] `Effect.String()` returns spec-mandated strings: `default_deny`, `allow`, `deny`, `system_bypass`\n- [ ] `PolicyEffect` type defined with `PolicyEffectPermit`/`PolicyEffectForbid` constants\n- [ ] `NewDecision()` enforces Allowed invariant: `Allow` and `SystemBypass` → true, all others → false\n- [ ] `Decision.allowed` field is unexported to prevent invariant bypass (security: prevents `Decision{Allowed: true, Effect: EffectDeny}`)\n- [ ] `Decision.IsAllowed()` accessor method returns the authorization result\n- [ ] `Decision.Validate()` method checks invariant at engine return boundary\n- [ ] `AccessRequest` has `Subject`, `Action`, `Resource` string fields\n- [ ] `Decision` includes `allowed` (unexported), `Effect`, `Reason`, `PolicyID`, `Policies`, `Attributes`\n- [ ] `AttributeBags` has `Subject`, `Resource`, `Action`, `Environment` maps\n- [ ] `AttributeSchema` type defined for use by compiler and resolver\n- [ ] `AttrType` enum defined: `String`, `Int`, `Float`, `Bool`, `StringList`\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Create: `internal/access/policy/types/types.go`\n- Test: `internal/access/policy/types/types_test.go`\n\n**Step 1: Write failing tests for Effect.String() and Decision invariants**\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Step 2: Run tests to verify they fail**\n\nRun: `task test`\nExpected: FAIL — package and types don't exist\n\n**Step 3: Implement types**\n\n[Code snippet omitted; see source plan section for full example.]\n\n\u003e **Implementation Note (Bug TD4):** Use typed string constants for enum-like string fields to add compile-time safety at zero cost. Specifically:\n\u003e\n\u003e - `StoredPolicy.Source` → define `type PolicySource string` with constants `PolicySourceSeed`, `PolicySourceLock`, `PolicySourceAdmin`, `PolicySourcePlugin`\n\u003e - `EntityProperty.Visibility` → define `type PropertyVisibility string` with constants `PropertyVisibilityPublic`, `PropertyVisibilityPrivate`, `PropertyVisibilityRestricted`, `PropertyVisibilitySystem`, `PropertyVisibilityAdmin`\n\u003e - `EntityProperty.ParentType` → define `type EntityType string` with constants `EntityTypeCharacter`, `EntityTypeLocation`, `EntityTypeObject`\n\u003e\n\u003e This prevents typos like `\"publc\"` or `\"seed \"` (trailing space) from compiling, while maintaining string serialization compatibility with JSON/database fields.\n\n**Step 4: Run tests to verify they pass**\n\nRun: `task test`\nExpected: PASS\n\n**Step 5: Commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] Expected: FAIL — package and types don't exist\n- [ ] Expected: PASS\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Sonnet 4.5\n**Complexity:** Moderate — foundational type definitions must match spec exactly\n**Scope:** 1-2 files defining Effect enum, AccessRequest, Decision, PolicyMatch, AttributeBags\n**Criticality:** Very high — every other ABAC component depends on these types\n**Reasoning:** Types are fully specified in 01-core-types.md. No design decisions needed — just faithful implementation of spec types with proper Go idioms. Sonnet handles spec-driven type definition well.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:44Z","created_by":"seanb4t","updated_at":"2026-02-11T23:27:25Z","closed_at":"2026-02-11T23:27:25Z","close_reason":"Core ABAC types defined: Effect(4 values), Decision(unexported allowed), AccessRequest, PolicyMatch, AttributeBags, AttrType, typed string constants for PolicySource/PropertyVisibility/EntityType","labels":["abac","phase-7-1","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.3.9","depends_on_id":"holomush-5k1.3","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.30","title":"Plan: entity_properties migration missing CHECK constraints and index","description":"## Issue\nTask 3 migration SQL (lines 226-246) is missing three elements from the spec (lines 2039-2063):\n\n1. Missing CHECK: visibility_restricted_requires_lists — ensures restricted visibility has non-NULL visible_to and excluded_from\n2. Missing CHECK: visibility_non_restricted_nulls_lists — ensures non-restricted visibility has NULL lists\n3. Missing INDEX: idx_properties_owner ON entity_properties(owner) WHERE owner IS NOT NULL\n\nWithout these, the database accepts invalid visibility configurations and per-owner lookups require full scans.\n\n## Decision\nAdd all three elements to the Task 3 migration SQL per spec.\n\n## Files\n- Modify: `docs/plans/2026-02-06-full-abac-implementation.md` (Task 3 SQL and acceptance criteria)\n\n## Dependencies\n- Conceptual overlap with Task 25 (PropertyRepository) acceptance criteria about visibility defaults","acceptance_criteria":"- [ ] visibility_restricted_requires_lists CHECK constraint added to migration SQL\n- [ ] visibility_non_restricted_nulls_lists CHECK constraint added to migration SQL\n- [ ] idx_properties_owner partial index added to migration SQL\n- [ ] Task 3 acceptance criteria updated to verify these constraints","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T02:03:35Z","created_by":"seanb4t","updated_at":"2026-02-07T02:25:09Z","closed_at":"2026-02-07T02:25:09Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.30","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.300","title":"Broken ADR #24 link: references phase-7.1 but file is in phase-7.6","description":"PR #69 Review Finding P1-9: ADR #24 (024-bootstrap-sequence.md line 22) references '../phase-7.1/036-direct-replacement.md' but the file is at '../phase-7.6/036-direct-replacement-no-adapter.md'. The path has wrong phase directory and missing '-no-adapter' suffix.","acceptance_criteria":"- [ ] ADR #24 link updated from '../phase-7.1/036-direct-replacement.md' to '../phase-7.6/036-direct-replacement-no-adapter.md'\n- [ ] Link verified as resolving correctly","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:37:51Z","created_by":"seanb4t","updated_at":"2026-02-09T01:02:29Z","closed_at":"2026-02-09T01:02:29Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.300","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.301","title":"Create ADR 066: sync audit writes for system bypass operations","description":"PR #69 Review Finding P1-6: Task 17 (phase-7.3.md) references 'ADR 66' twice for the decision that system bypass audit writes use sync path (same as denials) for guaranteed audit trails. No ADR 066 file exists. Decision: Create docs/specs/decisions/epic7/phase-7.5/066-sync-audit-system-bypass.md documenting this decision. Rationale: privileged operations require guaranteed audit trails; system bypasses are rare so sync write cost is negligible.","acceptance_criteria":"- [ ] ADR 066 created at docs/specs/decisions/epic7/phase-7.5/066-sync-audit-system-bypass.md\n- [ ] ADR documents: system bypass audits use sync write path (same as denials)\n- [ ] ADR rationale: privileged operations need guaranteed audit trails; sync cost negligible for rare operations\n- [ ] ADR README index updated to include ADR 066\n- [ ] Plan references 'ADR 66' updated to link to the new file","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:37:53Z","created_by":"seanb4t","updated_at":"2026-02-09T00:57:37Z","closed_at":"2026-02-09T00:57:37Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.301","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.302","title":"Task 4a cross-reference: says Task 15 but means Task 16b (PropertyProvider)","description":"PR #69 Review Finding P1-7: Task 4a (phase-7.1.md line 346) says 'PropertyProvider (Task 15)' but PropertyProvider is Task 16b (phase-7.3.md line 362). Task 15 is 'Core attribute providers (character, location, object)'. Simple cross-reference fix.","acceptance_criteria":"- [ ] Task 4a note updated: 'Task 15' changed to 'Task 16b'\n- [ ] Link target updated to correct phase file and section","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:37:57Z","created_by":"seanb4t","updated_at":"2026-02-09T01:02:29Z","closed_at":"2026-02-09T01:02:29Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.302","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.303","title":"Task 23 cross-reference: says Task 6 (policy store) but means Task 7","description":"PR #69 Review Finding P1-8: Task 23 acceptance criteria (phase-7.4.md line 184) references 'Task 6 (policy store)' but the policy store is Task 7 (phase-7.1.md line 1107). Task 6 is 'prefix constants and parser'. Simple cross-reference fix.","acceptance_criteria":"- [ ] Task 23 reference updated: 'Task 6' changed to 'Task 7'\n- [ ] Link target verified as correct","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:38:02Z","created_by":"seanb4t","updated_at":"2026-02-09T00:57:37Z","closed_at":"2026-02-09T00:57:37Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.303","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.304","title":"Missing T21a to T22 dependency in Task 22 text (Mermaid has it)","description":"PR #69 Review Finding P1-10: The Mermaid dependency diagram (implementation.md line 184) correctly shows T21a --\u003e T22, but Task 22's text section in phase-7.4.md does not explicitly list Task 21a (@-prefix removal) as a dependency. Task 21a removes @ from command names; Task 22 seed policies reference bare command names (dig, create, etc). The dependency should be documented in Task 22's text.","acceptance_criteria":"- [ ] Task 22 section in phase-7.4.md explicitly notes dependency on Task 21a\n- [ ] Rationale documented: seed policies reference bare command names that require @-prefix removal to complete first","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:38:06Z","created_by":"seanb4t","updated_at":"2026-02-09T01:06:21Z","closed_at":"2026-02-09T01:06:21Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.304","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.304","depends_on_id":"holomush-5k1.295","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.305","title":"Task 23 acceptance criteria missing PolicyCompiler integration verification","description":"PR #69 Review Finding P1-11: Task 23 (bootstrap sequence) acceptance criteria should explicitly verify PolicyCompiler integration and compilation error handling. Bootstrap calls compiler.Compile() but acceptance criteria doesn't test compilation failure paths.","acceptance_criteria":"- [ ] Task 23 acceptance criteria includes: bootstrap handles PolicyCompiler compilation errors gracefully\n- [ ] Test step for compilation error during bootstrap (malformed seed DSL)\n- [ ] Test step for partial bootstrap failure (some seeds compile, some don't)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:38:10Z","created_by":"seanb4t","updated_at":"2026-02-09T01:06:21Z","closed_at":"2026-02-09T01:06:21Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.305","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.305","depends_on_id":"holomush-5k1.303","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.306","title":"Incorrect T16a to T16b dependency edge in Mermaid diagram","description":"PR #69 Review Finding P2-1: The Mermaid dependency diagram (implementation.md line 130) shows T16a --\u003e T16b but the plan text says they are independent tasks. Task 16a (simple providers) and Task 16b (PropertyProvider) have no dependency between them. Remove the edge.","acceptance_criteria":"- [ ] T16a --\u003e T16b edge removed from Mermaid diagram in implementation.md\n- [ ] Text confirmed as stating independence between T16a and T16b","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:38:10Z","created_by":"seanb4t","updated_at":"2026-02-09T01:09:15Z","closed_at":"2026-02-09T01:09:15Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.306","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.307","title":"Dual ADR numbering scheme: no mapping between spec ADR 0009-0016 and decision files 001-077","description":"PR #69 Review Finding P1-12: Spec (08-testing-appendices.md) uses ADR 0009-0016 numbering while decision files use 001-077 numbering. The ADR README has no mapping table. Implementers cannot find referenced ADRs without manually searching. Example: ADR 0009 maps to 001-policy-engine-approach.md.","acceptance_criteria":"- [ ] ADR README (docs/specs/decisions/epic7/README.md) includes mapping table from ADR 0009-0016 to decision file numbers\n- [ ] Each ADR 0009-0016 entry shows: spec number, decision file number, title, and file link\n- [ ] Mapping is bidirectional (can look up either way)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:38:14Z","created_by":"seanb4t","updated_at":"2026-02-09T01:06:22Z","closed_at":"2026-02-09T01:06:22Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.307","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.307","depends_on_id":"holomush-5k1.301","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.308","title":"Task 16b circuit breaker contradiction: acceptance criteria vs deferred to Task 34","description":"PR #69 Review Finding P2-2: Task 16b acceptance criteria mentions circuit breaker but test steps say 'deferred to Task 34' and Decision #74 (074-unified-circuit-breaker-task-34.md) explicitly unifies circuit breaker into Task 34. Remove circuit breaker from Task 16b acceptance criteria to resolve contradiction.","acceptance_criteria":"- [ ] Circuit breaker requirement removed from Task 16b acceptance criteria\n- [ ] Task 16b only references circuit breaker as 'deferred to Task 34, see Decision #74'\n- [ ] No contradiction between acceptance criteria and test steps","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:38:23Z","created_by":"seanb4t","updated_at":"2026-02-09T01:09:15Z","closed_at":"2026-02-09T01:09:15Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.308","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.308","depends_on_id":"holomush-5k1.306","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.309","title":"Decision count '59' should be '64' in design-decisions.md","description":"PR #69 Review Finding P2-3: docs/specs/2026-02-05-full-abac-design-decisions.md line 10 says 'The 59 design decisions' but there are 64 ADR files in docs/specs/decisions/epic7/ (verified by file count). Count was not updated after adding later decisions.","acceptance_criteria":"- [ ] Decision count updated from 59 to 64 in design-decisions.md\n- [ ] Count verified against actual file count in decisions/epic7/","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:38:27Z","created_by":"seanb4t","updated_at":"2026-02-09T01:09:15Z","closed_at":"2026-02-09T01:09:15Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.309","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.309","depends_on_id":"holomush-5k1.301","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.31","title":"Plan: Core lock tokens wrong — locked not in spec, flag missing","description":"## Issue\nTasks 23-24 list core lock tokens as locked, faction, level. The spec (lines 2542-2553) defines core tokens as faction, flag, level. There is no locked token in the spec. The plan also omits flag (membership type, maps to principal.flags).\n\nThe plan defines locked behavior (lines 2102-2106) as generating a forbid with owner exception — this semantic is not in the spec.\n\n## Decision\nReplace locked with flag per spec. Remove locked examples. Add flag with correct semantics: flag:storyteller compiles to checking \"storyteller\" in principal.flags.\n\n## Files\n- Modify: `docs/plans/2026-02-06-full-abac-implementation.md` (Task 23 + Task 24 descriptions, examples, acceptance criteria)","acceptance_criteria":"- [ ] Core lock tokens: faction, flag, level (not locked)\n- [ ] locked token examples removed from Task 23 and Task 24\n- [ ] flag token added with correct semantics (membership type)\n- [ ] Task 24 lock expression examples use spec-correct tokens\n- [ ] Lock compound operator uses \u0026 (AND) and | (OR) per spec, not +","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T02:03:44Z","created_by":"seanb4t","updated_at":"2026-02-07T02:31:24Z","closed_at":"2026-02-07T02:31:24Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.31","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.310","title":"Critical path description understated: says 'DSL chain: Task 12' but actual chain is T8-T9-T11-T12","description":"PR #69 Review Finding P2-6: The critical path description in the implementation overview understates the DSL chain complexity. It says 'DSL chain: Task 12' but the actual critical path through DSL tasks is T8-\u003eT9-\u003eT11-\u003eT12 (4 sequential tasks). This matters for scheduling.","acceptance_criteria":"- [ ] Critical path description updated to show full DSL chain: T8-\u003eT9-\u003eT11-\u003eT12\n- [ ] Sequential nature of DSL tasks clearly documented","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:38:32Z","created_by":"seanb4t","updated_at":"2026-02-09T01:15:40Z","closed_at":"2026-02-09T01:15:40Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.310","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.311","title":"Missing SPDX header on spec index file 2026-02-05-full-abac-design.md","description":"PR #69 Review Finding P2-4: docs/specs/2026-02-05-full-abac-design.md starts with '# Full ABAC Architecture Design' without the required SPDX license header. All spec files should have SPDX headers per project conventions.","acceptance_criteria":"- [ ] SPDX-License-Identifier: Apache-2.0 header added to top of file\n- [ ] Copyright 2026 HoloMUSH Contributors line added\n- [ ] task license:check passes for this file","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:38:34Z","created_by":"seanb4t","updated_at":"2026-02-09T01:15:40Z","closed_at":"2026-02-09T01:15:40Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.311","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.312","title":"Spec reference format inconsistent between early and late tasks","description":"PR #69 Review Finding P2-5: Tasks 0-12 use bare line numbers for spec references (e.g., 'lines 305-347') while Tasks 14+ use the improved format 'file.md#anchor (was lines N-M)'. The newer format is better for maintainability. Standardize all tasks to use the anchor+line format.","acceptance_criteria":"- [ ] All task spec references use consistent format: file.md#anchor (was lines N-M)\n- [ ] Tasks 0-12 updated from bare line numbers to anchor+line format\n- [ ] OR document the inconsistency with a note about when the format changed","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:38:37Z","created_by":"seanb4t","updated_at":"2026-02-09T01:15:40Z","closed_at":"2026-02-09T01:15:40Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.312","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.313","title":"Document cross-phase gate: Task 18 (Phase 7.3) gates Phase 7.4 start","description":"PR #69 Review Finding P2-7: Task 18 (Policy cache with LISTEN/NOTIFY invalidation) is in Phase 7.3 but gates Phase 7.4 start via T18-\u003eT23 dependency. Decision: Document this as an explicit cross-phase gate rather than moving Task 18. T18 logically belongs in Phase 7.3 (engine infrastructure) even though it blocks Phase 7.4.","design":"Decision: Keep Task 18 in Phase 7.3 and document the cross-phase gate explicitly. Rationale: T18 is engine infrastructure (cache invalidation) that logically belongs with the other engine tasks in Phase 7.3, even though it blocks Phase 7.4 bootstrap.","acceptance_criteria":"- [ ] Phase 7.3 footer documents that T18 gates Phase 7.4\n- [ ] Phase 7.4 header documents dependency on T18 from Phase 7.3\n- [ ] Rationale noted: T18 is engine infrastructure that logically belongs in Phase 7.3","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:38:46Z","created_by":"seanb4t","updated_at":"2026-02-09T01:15:40Z","closed_at":"2026-02-09T01:15:40Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.313","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.314","title":"Task 14 missing multi-provider list attribute merge test","description":"PR #69 Review Finding P2-11: Spec MUST requirement for multi-provider list attribute merge (e.g., Provider A returns factions:[rebels], Provider B returns factions:[traders], merged result is factions:[rebels,traders]) is not explicitly tested in Task 14 acceptance criteria.","acceptance_criteria":"- [ ] Task 14 acceptance criteria includes: multi-provider list concatenation test\n- [ ] Test case: two providers contributing to same list attribute are merged\n- [ ] Verify order determinism of concatenated lists","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:38:48Z","created_by":"seanb4t","updated_at":"2026-02-09T01:15:40Z","closed_at":"2026-02-09T01:15:40Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.314","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.315","title":"Task 30 cache invalidation tests missing UPDATE NOTIFY","description":"PR #69 Review Finding P2-8: Task 30 tests CREATE/DELETE pg_notify events but not UPDATE. Policy updates (e.g., changing DSL text) should also trigger cache invalidation via NOTIFY. Missing test coverage for UPDATE operations.","acceptance_criteria":"- [ ] Task 30 acceptance criteria includes: UPDATE pg_notify triggers cache invalidation\n- [ ] Test step for policy UPDATE triggering NOTIFY and cache refresh\n- [ ] All three CRUD operations (CREATE, UPDATE, DELETE) trigger NOTIFY","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:38:50Z","created_by":"seanb4t","updated_at":"2026-02-09T01:15:40Z","closed_at":"2026-02-09T01:15:40Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.315","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.316","title":"Lock ownership exception: plan over-applies owner check to locations","description":"PR #69 Review Finding P2-9: The plan over-applies resource.owner == principal.id to all lock operations, but the spec (06-layers-commands.md) explicitly exempts locations: 'For locations (which have no owner attribute), the ownership check is omitted — locations use role-based write access authorization instead.' Plan lock handling must implement this exemption.","acceptance_criteria":"- [ ] Lock policy generation for locations omits ownership check\n- [ ] Location locks use write-access authorization instead of ownership\n- [ ] Test for location lock creation by builder without ownership check\n- [ ] Test that object/property locks still require ownership","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:38:57Z","created_by":"seanb4t","updated_at":"2026-02-09T01:15:40Z","closed_at":"2026-02-09T01:15:40Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.316","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.317","title":"Task 11 missing like operator : separator behavior tests","description":"PR #69 Review Finding P2-10: Spec MUST requirement for : separator behavior testing in the like operator is not in Task 11 acceptance criteria. The like operator uses : as a separator (e.g., 'location:*') and the spec requires testing this behavior.","acceptance_criteria":"- [ ] Task 11 acceptance criteria includes: like operator : separator tested\n- [ ] Test cases for patterns with : separator (e.g., 'location:*', 'stream:chat:*')\n- [ ] Edge cases for : in patterns vs : in values","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:39:01Z","created_by":"seanb4t","updated_at":"2026-02-09T01:15:40Z","closed_at":"2026-02-09T01:15:40Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.317","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.318","title":"Task 7 should require pg_notify in same transaction as CRUD","description":"PR #69 Review Finding P2-12: The spec (05-storage-audit.md line 2117) explicitly states 'The Go policy store sends pg_notify in the same transaction as any policy CRUD operation.' Task 7 (policy store) should explicitly require this transactional guarantee in acceptance criteria.","acceptance_criteria":"- [ ] Task 7 acceptance criteria includes: pg_notify MUST be in same transaction as CRUD\n- [ ] Test verifies pg_notify is sent within the same DB transaction as policy write\n- [ ] No race condition between CRUD commit and NOTIFY","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:39:02Z","created_by":"seanb4t","updated_at":"2026-02-09T01:15:40Z","closed_at":"2026-02-09T01:15:40Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.318","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.319","title":"ADR #57 claims numbering range 001-083 but highest is 077","description":"PR #69 Review Finding P2-13: ADR #57 (057-adr-format-evolution.md line 16) states 'ADR numbering follows a 3-digit convention (001-083)' but the highest numbered ADR is 077. The range 078-083 do not exist. Should be updated to reflect actual range 001-077.","acceptance_criteria":"- [ ] ADR #57 range updated from '001-083' to '001-077'\n- [ ] OR range updated to reflect actual highest number if new ADRs were added","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:39:09Z","created_by":"seanb4t","updated_at":"2026-02-09T01:09:15Z","closed_at":"2026-02-09T01:09:15Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.319","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.319","depends_on_id":"holomush-5k1.301","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.32","title":"Plan: audit_log composite PK deviation undocumented","description":"## Issue\nPlan uses PRIMARY KEY (id, timestamp) for access_audit_log (lines 165, 177). Spec defines id TEXT PRIMARY KEY (line 2015). The plan is technically correct — PostgreSQL partitioned tables require the partition column in the PK — but this deviation is undocumented.\n\nAlso: partition naming differs (plan: _y2026m02, spec: _2026_02) and plan creates 1 initial partition vs spec's 3 (at least 2 months future, line 2306).\n\n## Decision\nDocument the composite PK rationale. Match spec partition naming convention. Create 3 initial partitions per spec.\n\n## Files\n- Modify: `docs/plans/2026-02-06-full-abac-implementation.md` (Task 2 SQL, acceptance criteria)","acceptance_criteria":"- [ ] Comment in plan explaining composite PK deviation rationale\n- [ ] Partition naming matches spec convention (_2026_02 not _y2026m02)\n- [ ] At least 3 initial partitions created (current + 2 future months)\n- [ ] Task 2 acceptance criteria updated\n- [ ] Note added to flag spec update needed for PK inconsistency","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T02:03:51Z","created_by":"seanb4t","updated_at":"2026-02-07T02:34:41Z","closed_at":"2026-02-07T02:34:41Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.32","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.320","title":"ADR #31 referenced without hyperlink in plan","description":"PR #69 Review Finding P3-1: ADR #31 is referenced in the plan text without a hyperlink, while other ADR references use link format consistently.","acceptance_criteria":"- [ ] ADR #31 reference converted to hyperlink format matching other ADR references","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:39:11Z","created_by":"seanb4t","updated_at":"2026-02-09T01:25:00Z","closed_at":"2026-02-09T01:25:00Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.320","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.321","title":"ADR #4 (conflict-resolution) missing cross-reference to ADR #39 (EffectSystemBypass)","description":"PR #69 Review Finding P2-14: ADR #4 (004-conflict-resolution.md) documents deny-overrides conflict resolution but does not cross-reference ADR #39 (039-effect-system-bypass.md) which defines EffectSystemBypass — a special effect that bypasses the conflict resolution algorithm entirely. These are related decisions that should reference each other.","acceptance_criteria":"- [ ] ADR #4 adds cross-reference to ADR #39 (EffectSystemBypass)\n- [ ] Cross-reference explains the relationship: SystemBypass short-circuits before conflict resolution\n- [ ] ADR #39 optionally adds back-reference to ADR #4","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:39:13Z","created_by":"seanb4t","updated_at":"2026-02-09T01:15:40Z","closed_at":"2026-02-09T01:15:40Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.321","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.322","title":"MD057 (relative link validation) disabled with TODO comment","description":"PR #69 Review Finding P3-2: Markdownlint rule MD057 (relative link validation) is disabled with a TODO comment. Should be re-enabled once relative links are verified, or the TODO should be addressed.","acceptance_criteria":"- [ ] MD057 either re-enabled or TODO comment updated with timeline/rationale","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:39:28Z","created_by":"seanb4t","updated_at":"2026-02-09T01:25:00Z","closed_at":"2026-02-09T01:25:00Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.322","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.323","title":"CI hardcodes rumdl v0.1.15 while local uses brew latest","description":"PR #69 Review Finding P3-3: CI workflow hardcodes rumdl v0.1.15 while local development uses brew-installed latest version. Version drift could cause CI/local lint differences.","acceptance_criteria":"- [ ] CI rumdl version documented or synced with local version\n- [ ] OR version pinning strategy documented","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:39:33Z","created_by":"seanb4t","updated_at":"2026-02-09T01:25:00Z","closed_at":"2026-02-09T01:25:00Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.323","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.324","title":"PropertyProvider parallel chain (Tasks 4b, 4c) not highlighted in Mermaid diagram","description":"PR #69 Review Finding P3-4: The Mermaid dependency diagram uses orange highlighting for PropertyProvider parallel chain but Tasks 4b and 4c are not styled orange despite being part of this chain.","acceptance_criteria":"- [ ] Tasks 4b and 4c styled orange in Mermaid diagram to match PropertyProvider chain convention","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:39:37Z","created_by":"seanb4t","updated_at":"2026-02-09T01:25:00Z","closed_at":"2026-02-09T01:25:00Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.324","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.325","title":"Task 28 missing partial rollback guidance for per-package migration","description":"PR #69 Review Finding P3-5: Task 28 implements per-package atomic migration but lacks guidance for partial rollback scenarios (e.g., 3 of 5 packages migrated, then failure). Should document how to handle partial migration state.","acceptance_criteria":"- [ ] Task 28 includes rollback guidance for partial migration failures\n- [ ] Documented how to identify which packages are migrated vs not\n- [ ] Recovery procedure for resuming after partial failure","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:39:41Z","created_by":"seanb4t","updated_at":"2026-02-09T01:25:00Z","closed_at":"2026-02-09T01:25:00Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.325","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.326","title":"Document intentional spec deviation: policy version records on enable/disable","description":"PR #69 Review Finding P3-6: The plan creates policy version records on enable/disable, but spec (05-storage-audit.md line 215) says version records are only for DSL text changes. Decision: Keep as intentional deviation — versioning enable/disable provides better audit trail for policy lifecycle. Document as spec deviation.","design":"Decision: Intentional spec deviation. Policy version records will be created on enable/disable (not just DSL changes) because enable/disable affects authorization behavior and should be tracked in the audit trail. The spec's narrower scope (DSL changes only) leaves a gap in lifecycle auditing.","acceptance_criteria":"- [ ] Spec deviation documented in plan or design decisions\n- [ ] Rationale: enable/disable affects authorization behavior and should be tracked\n- [ ] Design decisions document updated with this deviation","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:39:46Z","created_by":"seanb4t","updated_at":"2026-02-09T01:25:00Z","closed_at":"2026-02-09T01:25:00Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.326","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.327","title":"Three superseded ADRs (#5, #20, #21) have no filesystem-level distinction","description":"PR #69 Review Finding P3-7: ADRs #5 (005-migration-strategy.md), #20 (020-enter-action-as-new-abac-only-path.md), and #21 (021-shadow-mode-cutover-criteria.md) are superseded but their filenames don't indicate this. Consider adding a prefix or moving to a superseded/ subdirectory.","acceptance_criteria":"- [ ] Superseded ADRs distinguishable at filesystem level\n- [ ] Options: filename prefix (e.g., SUPERSEDED-005-...), subdirectory, or documented convention\n- [ ] ADR README documents the convention used","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T00:39:50Z","created_by":"seanb4t","updated_at":"2026-02-09T01:25:00Z","closed_at":"2026-02-09T01:25:00Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.327","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.328","title":"C1: Seed policy count mismatch — Task 9 tests 16 but Task 22 defines 18","description":"**Issue:** Task 9 acceptance criteria (Phase 7.2, line 64) say \"All 16 seed policy DSL strings parse successfully\" but Task 22 (Phase 7.4, line 16) defines 18 seed policies (16 permit, 2 forbid). Two policies (seed:property-system-forbid, seed:property-owner-write) won't be parser-tested.\n\n**Fix:** Update Task 9 to list all 18 seed policies in its test corpus.\n\n**Acceptance Criteria:**\n- Task 9 acceptance criteria updated to reference 18 seed policies\n- All 18 seed policies listed in Task 9 test corpus\n- Count matches between Task 9 and Task 22\n\n**Files:** docs/plans/2026-02-06-full-abac-phase-7.2.md, docs/plans/2026-02-06-full-abac-phase-7.4.md\n**Dependencies:** Conceptual overlap with C3 (seed policy references in Phase 7.4)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T01:58:19Z","created_by":"seanb4t","updated_at":"2026-02-09T02:13:15Z","closed_at":"2026-02-09T02:13:15Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.328","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.329","title":"C2: Wrong phase reference for Task 21a in Phase 7.4","description":"**Issue:** Phase 7.4 plan (line 27) says \"Task 21a ([Phase 7.5])\" but Task 21a is in Phase 7.3. Link goes to wrong file entirely; reader lands in Phase 7.5 and finds no Task 21a.\n\n**Fix:** Change to Task 21a ([Phase 7.3](./2026-02-06-full-abac-phase-7.3.md))\n\n**Acceptance Criteria:**\n- Task 21a reference in Phase 7.4 points to Phase 7.3\n- Link URL is correct and resolves\n\n**Files:** docs/plans/2026-02-06-full-abac-phase-7.4.md\n**Dependencies:** File overlap with C3 (same file)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T01:59:08Z","created_by":"seanb4t","updated_at":"2026-02-09T02:13:15Z","closed_at":"2026-02-09T02:13:15Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.329","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.33","title":"Plan: Missing ~15 spec requirements — add tasks to plan","description":"## Issue\nThe spec-accuracy review found ~15 spec requirements with no corresponding plan task. User decision: add all to the current plan.\n\nMissing features:\n1. Degraded mode (spec lines 1606-1629): engine MUST enter degraded mode on corrupted forbid, policy clear-degraded-mode cmd, abac_degraded_mode gauge\n2. Synchronous denial auditing with WAL fallback (spec lines 2238-2269): denials written synchronously, WAL at XDG_STATE_HOME, ReplayWAL()\n3. Cache staleness threshold (spec lines 2136-2159): configurable 30s threshold, fail-closed when exceeded\n4. Property lifecycle on parent deletion (spec lines 2070-2113): cascade delete in transaction, orphan cleanup goroutine, startup integrity check\n5. Seed policy upgrades/versioning (spec lines 3047-3074): seed_version comparison, auto-upgrade, --skip-seed-migrations, --force-seed-version=N, policy seed status\n6. UpdateSeed() method (spec lines 3127-3173): migration-delivered seed fixes\n7. policy enable/disable/history/rollback admin commands (spec lines 2705-2711)\n8. --validate-seeds startup flag (spec lines 3099-3103)\n9. policy seed verify and policy seed status commands (spec lines 3076-3109)\n10. Schema evolution on plugin reload (spec lines 1443-1498): detect attr changes, scan policies, reject if referenced\n11. Lock rate limiting (spec lines 2663-2669): max 50 lock policies per character\n12. Lock ownership check requirement (spec lines 2592-2596): all lock policies MUST include resource.owner == principal.id\n13. lock tokens discovery command (spec lines 2615-2638)\n14. General provider circuit breaker (spec lines 1540-1568): 10 consecutive errors, 30s open, half-open probe\n\n## Decision\nAdd new tasks to the current implementation plan covering all missing requirements. Some may be grouped into existing tasks where appropriate (e.g., audit sync into Task 18, lock rate limiting into Task 24).\n\n## Files\n- Modify: `docs/plans/2026-02-06-full-abac-implementation.md` (add new tasks or expand existing ones)","acceptance_criteria":"- [ ] Every listed missing requirement has a corresponding plan task (new or expanded)\n- [ ] Each new task has Spec References, Acceptance Criteria, TDD steps\n- [ ] Task dependencies updated for new tasks\n- [ ] Phase structure updated if new phases needed","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T02:04:14Z","created_by":"seanb4t","updated_at":"2026-02-07T03:19:28Z","closed_at":"2026-02-07T03:19:28Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.33","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.330","title":"C3: Seed policy name mismatch in Phase 7.4 explanatory note","description":"**Issue:** Phase 7.4 plan (line 172) says seed:property-excluded-from but actual policy at line 163 is seed:property-restricted-excluded.\n\n**Fix:** Correct the name in the note to match the actual policy definition.\n\n**Acceptance Criteria:**\n- Policy name in explanatory note matches actual policy definition\n- No other mismatched policy names in Phase 7.4\n\n**Files:** docs/plans/2026-02-06-full-abac-phase-7.4.md\n**Dependencies:** File overlap with C2 (same file)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T01:59:17Z","created_by":"seanb4t","updated_at":"2026-02-09T02:22:12Z","closed_at":"2026-02-09T02:22:12Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.330","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.330","depends_on_id":"holomush-5k1.329","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.331","title":"C4: Stale .markdownlint.yaml and .markdownlint-cli2.yaml not removed","description":"**Issue:** PR migrates all markdown tooling to rumdl but leaves old markdownlint config files in repo. rumdl can fall back to reading .markdownlint.yaml if .rumdl.toml is deleted. The .markdownlint.yaml even gets a new MD057 rule despite nothing reading it.\n\n**Fix:** Delete both .markdownlint.yaml and .markdownlint-cli2.yaml.\n\n**Acceptance Criteria:**\n- .markdownlint.yaml deleted from repo\n- .markdownlint-cli2.yaml deleted from repo\n- rumdl still works correctly with .rumdl.toml only\n\n**Files:** .markdownlint.yaml, .markdownlint-cli2.yaml\n**Dependencies:** None","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T01:59:24Z","created_by":"seanb4t","updated_at":"2026-02-09T02:13:15Z","closed_at":"2026-02-09T02:13:15Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.331","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.332","title":"C5: Lefthook hooks apply root rumdl config to site/ files","description":"**Issue:** When lefthook passes site/docs/foo.md to rumdl check {staged_files}, it uses root .rumdl.toml not site/.rumdl.toml. Root config enables MD030 (disabled for MkDocs grid cards) and MD046 fenced-only (site allows indented), no mkdocs flavor.\n\n**Fix:** Split hooks: exclude site/** from root lint-markdown/fmt-markdown hooks, add separate lint-markdown-site/fmt-markdown-site hooks with --config site/.rumdl.toml.\n\n**Acceptance Criteria:**\n- Root lefthook hooks exclude site/** files\n- New lint-markdown-site hook uses site/.rumdl.toml\n- New fmt-markdown-site hook uses site/.rumdl.toml\n- site/ markdown files lint correctly with MkDocs-specific rules\n\n**Files:** lefthook.yml\n**Dependencies:** Conceptual overlap with C4 (markdown tooling)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T01:59:32Z","created_by":"seanb4t","updated_at":"2026-02-09T02:22:12Z","closed_at":"2026-02-09T02:22:12Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.332","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.332","depends_on_id":"holomush-5k1.331","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.333","title":"I1: Task 18 sketch uses pool.Acquire() but criteria require dedicated connection","description":"**Issue:** Phase 7.3 plan (line 668) implementation sketch uses pool connection via pool.Acquire(). Line 573 acceptance criteria correctly say dedicated (non-pooled) connection. PostgreSQL LISTEN requires a persistent connection; pool connections get recycled.\n\n**Fix:** Update sketch to use pgx.Connect() instead of pool.Acquire().\n\n**Acceptance Criteria:**\n- Implementation sketch uses pgx.Connect() for LISTEN connection\n- Sketch comments explain why dedicated connection is needed\n\n**Files:** docs/plans/2026-02-06-full-abac-phase-7.3.md\n**Dependencies:** None","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T01:59:38Z","created_by":"seanb4t","updated_at":"2026-02-09T02:23:48Z","closed_at":"2026-02-09T02:23:48Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.333","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.334","title":"C6: Diagram dependency T15→T16a unnecessarily serializes work","description":"**Issue:** Task 16a (environment/command/stream providers) is independent of Task 15 (character/location/object providers). Both only need Task 14 (resolver). Diagram shows T15→T16a but should show T14→T16a.\n\n**Fix:** Update Mermaid diagram edge from T15→T16a to T14→T16a.\n\n**Acceptance Criteria:**\n- Mermaid diagram shows T14→T16a instead of T15→T16a\n- No other incorrect dependency edges\n- Critical path text updated if affected\n\n**Files:** docs/plans/2026-02-06-full-abac-implementation.md\n**Dependencies:** File overlap with I6 (same file)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T01:59:39Z","created_by":"seanb4t","updated_at":"2026-02-09T02:13:15Z","closed_at":"2026-02-09T02:13:15Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.334","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.335","title":"I2: No ExitProvider or SceneProvider despite valid resource prefixes","description":"**Issue:** Spec defines exit: and scene: as valid resource prefixes; parser handles them. No attribute providers exist for these types anywhere in the plan. No current seed policies reference them, so not a functional gap today.\n\n**Fix:** Add a note to Deferred Features documenting that exit/scene attribute providers are deferred.\n\n**Acceptance Criteria:**\n- Deferred Features section includes exit/scene attribute providers\n- Note references the spec sections defining exit: and scene: prefixes\n\n**Files:** docs/plans/2026-02-06-full-abac-implementation.md\n**Dependencies:** File overlap with C6 and I6 (same file)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T01:59:46Z","created_by":"seanb4t","updated_at":"2026-02-09T02:23:48Z","closed_at":"2026-02-09T02:23:48Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.335","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.335","depends_on_id":"holomush-5k1.334","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.336","title":"I3: Task 27b mega-task spans 11 features — split into 3 sub-tasks","description":"**Issue:** Task 27b covers policy validate, policy reload, policy attributes, policy audit, policy seed verify/status, policy clear-degraded-mode, policy recompile-all/recompile/repair, policy list --old-grammar. This violates the plan own atomic commit principle.\n\n**Decision:** Split into 3 sub-tasks: (a) Core admin commands (validate, reload, attributes, list --old-grammar), (b) Audit/seed inspection (audit, seed verify, seed status), (c) Recompilation/repair (recompile-all, recompile, repair, clear-degraded-mode).\n\n**Acceptance Criteria:**\n- Task 27b replaced by 3 sub-tasks with clear scope\n- Each sub-task has acceptance criteria\n- Dependencies between sub-tasks documented\n- Mermaid diagram updated\n\n**Files:** docs/plans/2026-02-06-full-abac-phase-7.4.md, docs/plans/2026-02-06-full-abac-implementation.md\n**Dependencies:** File overlap with C2, C3 (Phase 7.4), C6 (implementation.md)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T01:59:59Z","created_by":"seanb4t","updated_at":"2026-02-09T02:38:34Z","closed_at":"2026-02-09T02:38:34Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.336","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.336","depends_on_id":"holomush-5k1.330","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.337","title":"I4: ADR title inconsistencies across three locations — standardize","description":"**Issue:** Decision Index in README uses canonical titles (e.g. Conflict Resolution). Spec ADR Reference Mapping uses descriptive titles (e.g. Deny-Overrides Without Priority). Plan overview uses yet another set with inconsistent capitalization.\n\n**Decision:** Standardize all titles to use the canonical form from the Decision Index README across all three locations.\n\n**Acceptance Criteria:**\n- All ADR titles match across Decision Index, Spec ADR Reference Mapping, and Plan overview\n- Consistent capitalization throughout\n- All links still work correctly\n\n**Files:** docs/specs/decisions/epic7/README.md, docs/specs/2026-02-05-full-abac-design.md, docs/plans/2026-02-06-full-abac-implementation.md\n**Dependencies:** File overlap with C6, I6 (implementation.md)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T02:00:08Z","created_by":"seanb4t","updated_at":"2026-02-09T02:26:49Z","closed_at":"2026-02-09T02:26:49Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.337","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.338","title":"S1: Dual system bypass mechanisms may allow unauthorized privilege escalation","description":"**Issue:** Design has two bypass mechanisms: system subject string and WithSystemSubject(ctx). If either is accessible to external callers, it could bypass all ABAC checks.\n\n**Recommendation:** Restrict to internal-only callers; validate at API ingress that neither mechanism is used by external requests.\n\n**Acceptance Criteria:**\n- Implementation restricts system subject to internal-only callers\n- API ingress validates no external system bypass\n- Tests verify bypass rejection at boundaries\n\n**Classification:** Security design note — track for implementation phase\n**Conceptual Overlap:** S2 (re-entrance), S8 (migration call sites)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T02:00:10Z","created_by":"seanb4t","updated_at":"2026-02-09T02:18:21Z","closed_at":"2026-02-09T02:18:21Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.338","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.339","title":"I5: CI rumdl binary download has no SHA256 verification","description":"**Issue:** CI workflow (.github/workflows/ci.yaml, line 41) downloads pre-built rumdl binary without checksum validation. Release provides .sha256 sidecar files that are not checked.\n\n**Fix:** Add SHA256 verification step, or at minimum document the x86_64 assumption.\n\n**Acceptance Criteria:**\n- CI downloads .sha256 sidecar file\n- SHA256 checksum verified before using binary\n- x86_64 architecture assumption documented\n\n**Files:** .github/workflows/ci.yaml\n**Dependencies:** None","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T02:00:15Z","created_by":"seanb4t","updated_at":"2026-02-09T02:29:26Z","closed_at":"2026-02-09T02:29:26Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.339","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.34","title":"Plan: Audit logger async-only — spec requires sync for denials","description":"## Issue\nTask 18 acceptance criteria (lines 1617, 1634) describe async-only audit writes via buffered channel. The spec (lines 2238-2242) requires denial events (deny and default_deny) to be written synchronously to prevent evidence erasure, with WAL fallback at XDG_STATE_HOME/holomush/audit-wal.jsonl and a ReplayWAL() method.\n\n## Decision\nUpdate Task 18 to distinguish sync writes for denials from async writes for allows/system bypasses. Add WAL fallback and ReplayWAL() to the task.\n\n## Dependencies\n- Overlaps with missing requirements bead (item 2 in the list)\n\n## Files\n- Modify: `docs/plans/2026-02-06-full-abac-implementation.md` (Task 18 description and acceptance criteria)","acceptance_criteria":"- [ ] Task 18 distinguishes sync (denials) from async (allows) writes\n- [ ] WAL fallback path documented\n- [ ] ReplayWAL() method included in task\n- [ ] Acceptance criteria updated to verify sync behavior for denials","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T02:04:25Z","created_by":"seanb4t","updated_at":"2026-02-07T02:39:40Z","closed_at":"2026-02-07T02:39:40Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.34","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.340","title":"S2: Re-entrance guard bypassed by goroutines","description":"**Issue:** Re-entrance guard on Evaluate() can be bypassed if attribute providers spawn goroutines that call Evaluate() with different goroutine IDs.\n\n**Recommendation:** Restrict Evaluate() visibility to providers; use request-scoped guard instead of goroutine-scoped.\n\n**Acceptance Criteria:**\n- Re-entrance guard is request-scoped, not goroutine-scoped\n- Goroutine-spawned evaluations correctly detected\n- Tests verify re-entrance detection across goroutines\n\n**Classification:** Security design note — track for implementation phase\n**Conceptual Overlap:** S1 (bypass mechanisms)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T02:00:19Z","created_by":"seanb4t","updated_at":"2026-02-09T02:34:17Z","closed_at":"2026-02-09T02:34:17Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.340","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.340","depends_on_id":"holomush-5k1.338","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.341","title":"I6: Phase 7.0 vs 7.1 numbering inconsistency for Task 0","description":"**Issue:** Mermaid diagram has subgraph Phase 7.0: Validation Spike for Task 0. Critical path text says Task 0 ([Phase 7.1]). Task 0 is physically in the Phase 7.1 file, but diagram labels it Phase 7.0.\n\n**Fix:** Either rename subgraph to Phase 7.1 or add clarifying note.\n\n**Acceptance Criteria:**\n- Phase numbering consistent between diagram and text\n- Task 0 location unambiguous\n\n**Files:** docs/plans/2026-02-06-full-abac-implementation.md\n**Dependencies:** File overlap with C6 (same file)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T02:00:23Z","created_by":"seanb4t","updated_at":"2026-02-09T02:23:48Z","closed_at":"2026-02-09T02:23:48Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.341","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.341","depends_on_id":"holomush-5k1.334","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.342","title":"S3: Audit mode off drops denial records","description":"**Issue:** When audit mode is set to off, denial records are not logged. This creates a security blind spot where access denials are silently dropped.\n\n**Recommendation:** Always log denials, or rename mode to bypass_only with warnings.\n\n**Acceptance Criteria:**\n- Denial records always logged regardless of audit mode, OR\n- Audit mode renamed with clear documentation of behavior\n- Tests verify denial logging in all audit modes\n\n**Classification:** Security design note — track for implementation phase\n**Conceptual Overlap:** S7 (WAL fallback for audit)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T02:00:26Z","created_by":"seanb4t","updated_at":"2026-02-09T02:18:21Z","closed_at":"2026-02-09T02:18:21Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.342","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.343","title":"SG1: Add spec section coverage matrix mapping spec to tasks","description":"**Issue:** No explicit matrix mapping each spec section and anchor to the implementing tasks. Makes it difficult to verify complete spec coverage.\n\n**Fix:** Add a coverage matrix to the implementation plan.\n\n**Acceptance Criteria:**\n- Coverage matrix added to implementation plan\n- Every spec section mapped to implementing task(s)\n- Gaps (if any) identified and documented\n\n**Files:** docs/plans/2026-02-06-full-abac-implementation.md\n**Dependencies:** File overlap with C6, I6, I2, I4 (same file)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T02:00:27Z","created_by":"seanb4t","updated_at":"2026-02-09T02:48:05Z","closed_at":"2026-02-09T02:48:05Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.343","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.343","depends_on_id":"holomush-5k1.341","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.344","title":"S4: Location locks lack ongoing ownership verification (TOCTOU)","description":"**Issue:** Lock ownership is checked at creation time but not re-verified during ongoing lock operations. Time-of-check-to-time-of-use gap could allow unauthorized lock manipulation.\n\n**Recommendation:** Add creator tracking and periodic reconciliation.\n\n**Acceptance Criteria:**\n- Lock operations re-verify ownership\n- Creator tracking persisted\n- Periodic reconciliation detects orphaned or transferred locks\n\n**Classification:** Security design note — track for implementation phase","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T02:00:33Z","created_by":"seanb4t","updated_at":"2026-02-09T02:34:17Z","closed_at":"2026-02-09T02:34:17Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.344","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.345","title":"SG2: Add Task 0.5 — dependency audit before implementation","description":"**Issue:** No task verifies Go module compatibility (pgx, ULID, etc.) before implementation starts. Version conflicts could block progress.\n\n**Decision:** Accepted — add Task 0.5 to Phase 7.1 for dependency audit.\n\n**Acceptance Criteria:**\n- Task 0.5 defined in Phase 7.1 with clear scope\n- Dependency audit covers all imported modules\n- Task added to Mermaid diagram\n- Acceptance criteria defined for the new task\n\n**Files:** docs/plans/2026-02-06-full-abac-phase-7.1.md, docs/plans/2026-02-06-full-abac-implementation.md\n**Dependencies:** File overlap with I6, C6 (implementation.md)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T02:00:34Z","created_by":"seanb4t","updated_at":"2026-02-09T02:48:05Z","closed_at":"2026-02-09T02:48:05Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.345","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.345","depends_on_id":"holomush-5k1.334","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.346","title":"S5: Cache staleness deadlock — policy reload requires auth denied by stale cache","description":"**Issue:** policy reload command requires ABAC authorization, but if the cache is stale, the authorization check itself may fail, creating a deadlock where you cannot reload because reload requires valid auth.\n\n**Recommendation:** Provide out-of-band cache reload that bypasses ABAC.\n\n**Acceptance Criteria:**\n- Out-of-band cache reload mechanism exists\n- Bypass is secure (restricted to local/system callers)\n- Tests verify recovery from stale cache state\n\n**Classification:** Security design note — track for implementation phase\n**Conceptual Overlap:** S1 (system bypass)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T02:00:40Z","created_by":"seanb4t","updated_at":"2026-02-09T02:34:17Z","closed_at":"2026-02-09T02:34:17Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.346","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.347","title":"SG3: Clarify Task 32 schema evolution behavior for attribute removal","description":"**Issue:** Phase 7.7 Task 32 schema evolution does not specify behavior when individual attributes are removed. Should the system reject reload or log and continue?\n\n**Fix:** Add explicit behavior specification for attribute removal in Task 32.\n\n**Acceptance Criteria:**\n- Task 32 specifies behavior for individual attribute removal\n- Decision documented (reject vs log-and-continue)\n- Edge cases addressed\n\n**Files:** docs/plans/2026-02-06-full-abac-phase-7.7.md\n**Dependencies:** Conceptual overlap with SG10 (Phase 7.7 changes)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T02:00:42Z","created_by":"seanb4t","updated_at":"2026-02-09T02:43:03Z","closed_at":"2026-02-09T02:43:03Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.347","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.348","title":"SG6: Add canary seed policy integration test for full ABAC flow","description":"**Issue:** No canary seed policy integration test exercising the complete ABAC flow post-migration. An end-to-end test would catch integration issues.\n\n**Fix:** Add a canary test covering the full ABAC evaluation path.\n\n**Acceptance Criteria:**\n- Canary test defined covering full ABAC evaluation path\n- Test exercises seed policy through entire pipeline\n- Added to appropriate phase plan\n\n**Files:** Relevant phase plan files\n**Dependencies:** Conceptual overlap with SG2 (pre-implementation validation)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T02:00:47Z","created_by":"seanb4t","updated_at":"2026-02-09T02:43:03Z","closed_at":"2026-02-09T02:43:03Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.348","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.349","title":"S6: Plugin providers can inject arbitrary attributes at runtime","description":"**Issue:** Only namespace registration validates plugin providers. At runtime, providers can return attribute keys outside their registered namespace, potentially injecting trusted attributes.\n\n**Recommendation:** Runtime validation of plugin provider return keys against registered namespace.\n\n**Acceptance Criteria:**\n- Runtime validation checks provider return keys against registered namespace\n- Invalid keys rejected with error logging\n- Tests verify namespace enforcement at runtime\n\n**Classification:** Security design note — track for implementation phase","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T02:00:48Z","created_by":"seanb4t","updated_at":"2026-02-09T02:18:21Z","closed_at":"2026-02-09T02:18:21Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.349","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.35","title":"Plan: Bootstrap logic gap — blanket no-op vs per-seed checks","description":"## Issue\nTask 22 bootstrap (lines 1988-2023) checks len(existing) \u003e 0 and returns early if ANY enabled policies exist. This means:\n1. No per-seed idempotent insertion (spec requires per-seed name-based checks)\n2. No seed version upgrade support (spec lines 3047-3074)\n3. Missing WithSystemSubject context marker (spec lines 3021-3035)\n\nThe acceptance criteria mention \"seed version tracking\" but the implementation doesn't handle upgrades.\n\n## Decision\nRewrite Task 22 to follow spec: per-seed name-based checks, WithSystemSubject context, seed_version comparison for upgrades.\n\n## Dependencies\n- Overlaps with missing requirements bead (item 5 — seed upgrades)\n\n## Files\n- Modify: `docs/plans/2026-02-06-full-abac-implementation.md` (Task 22 implementation and acceptance criteria)","acceptance_criteria":"- [ ] Bootstrap uses per-seed name check (not blanket existing count)\n- [ ] WithSystemSubject context marker used\n- [ ] seed_version comparison enables version-based upgrades\n- [ ] Acceptance criteria consistent with implementation","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T02:04:27Z","created_by":"seanb4t","updated_at":"2026-02-07T02:47:14Z","closed_at":"2026-02-07T02:47:14Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.35","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.350","title":"SG4: Benchmark targets should distinguish DB vs pure computation","description":"**Issue:** Benchmark targets do not distinguish between with DB and pure computation scenarios. CI configuration needs this distinction to set appropriate thresholds.\n\n**Fix:** Split benchmark targets into DB-inclusive and pure-computation categories.\n\n**Acceptance Criteria:**\n- Benchmark targets split into DB-inclusive and pure-computation categories\n- CI thresholds appropriate for each category\n- Documentation updated\n\n**Files:** Relevant phase plan files with benchmark targets\n**Dependencies:** None","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T02:00:48Z","created_by":"seanb4t","updated_at":"2026-02-09T02:43:03Z","closed_at":"2026-02-09T02:43:03Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.350","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.351","title":"SG7: Add Taskfile comment explaining double-invocation pattern","description":"**Issue:** The Taskfile uses a double-invocation pattern (rumdl check . + rumdl check site/) that is not self-documenting. New contributors may not understand why two invocations are needed.\n\n**Fix:** Add Taskfile comment explaining the pattern references different config files.\n\n**Acceptance Criteria:**\n- Taskfile comment explains why two rumdl invocations are needed\n- Comment references different config files (root vs site)\n\n**Files:** Taskfile.yml\n**Dependencies:** Conceptual overlap with C5 (lefthook/rumdl config)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T02:00:54Z","created_by":"seanb4t","updated_at":"2026-02-09T02:43:03Z","closed_at":"2026-02-09T02:43:03Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.351","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.351","depends_on_id":"holomush-5k1.332","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.352","title":"SG5: Lock expression | (OR) operator not covered in Task 25 parser tests","description":"**Issue:** Only the ampersand (AND) operator is tested in Task 25 parser tests. The pipe (OR) operator for lock expressions is missing from test coverage.\n\n**Fix:** Add pipe operator test cases to Task 25 acceptance criteria.\n\n**Acceptance Criteria:**\n- Task 25 acceptance criteria include pipe operator test cases\n- Both ampersand and pipe operators covered in parser tests\n\n**Files:** docs/plans/2026-02-06-full-abac-phase-7.5.md\n**Dependencies:** None","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T02:00:55Z","created_by":"seanb4t","updated_at":"2026-02-09T02:43:03Z","closed_at":"2026-02-09T02:43:03Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.352","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.353","title":"S7: WAL fallback for denial audit is SHOULD, not MUST","description":"**Issue:** WAL (Write-Ahead Log) fallback for denial and system_bypass audit events is specified as SHOULD. If the primary audit destination fails and WAL is not used, denial events are lost.\n\n**Recommendation:** Elevate to MUST for denial/system_bypass events.\n\n**Acceptance Criteria:**\n- Spec updated: WAL fallback MUST for denial/system_bypass events\n- Implementation ensures WAL fallback for these event types\n- Tests verify WAL activation on primary audit failure\n\n**Classification:** Security design note — track for implementation phase\n**Conceptual Overlap:** S3 (denial audit)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T02:00:59Z","created_by":"seanb4t","updated_at":"2026-02-09T02:34:17Z","closed_at":"2026-02-09T02:34:17Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.353","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.353","depends_on_id":"holomush-5k1.342","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.354","title":"SG8: Verify rumdl availability as Homebrew formula","description":"**Issue:** CI installs rumdl via GitHub release binary. Should verify it is available as a Homebrew formula for local developer experience.\n\n**Fix:** Verify Homebrew formula availability and document installation method.\n\n**Acceptance Criteria:**\n- Verify Homebrew formula availability for rumdl\n- Document installation method in contributing guide\n- If not available, note as a future improvement\n\n**Files:** Contributing documentation\n**Dependencies:** Conceptual overlap with I5 (CI rumdl installation)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T02:01:01Z","created_by":"seanb4t","updated_at":"2026-02-09T02:43:04Z","closed_at":"2026-02-09T02:43:04Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.354","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.354","depends_on_id":"holomush-5k1.339","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.355","title":"S8: 28-site migration — single incorrect call site equals privilege escalation","description":"**Issue:** Approximately 28 production call sites use AccessControl.Check(). During migration, a single incorrect call site could lead to privilege escalation if the old interface is used without the new engine backing.\n\n**Recommendation:** Add static analysis check that all call sites use IsAllowed() post-migration.\n\n**Acceptance Criteria:**\n- Static analysis rule or linter check for AccessControl.Check() usage\n- CI enforces no remaining old-style call sites post-migration\n- Migration checklist includes per-site verification\n\n**Classification:** Security design note — track for implementation phase\n**Conceptual Overlap:** S1 (bypass), migration tasks","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T02:01:06Z","created_by":"seanb4t","updated_at":"2026-02-09T02:34:17Z","closed_at":"2026-02-09T02:34:17Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.355","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.355","depends_on_id":"holomush-5k1.338","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.356","title":"SG9: Migrate Tasks 1-12 spec references from bare line numbers to anchors","description":"**Issue:** Tasks 1-12 use bare line numbers for spec references. These are fragile and break when the spec is edited. Should use file.md#anchor format.\n\n**Fix:** Convert all bare line number references to file.md#anchor format.\n\n**Acceptance Criteria:**\n- All spec references in Tasks 1-12 use file.md#anchor format\n- Anchors exist in spec files\n- No bare line number references remain\n\n**Files:** docs/plans/2026-02-06-full-abac-phase-7.1.md, docs/plans/2026-02-06-full-abac-phase-7.2.md\n**Dependencies:** File overlap with SG2 (Phase 7.1 changes)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T02:01:10Z","created_by":"seanb4t","updated_at":"2026-02-09T02:55:07Z","closed_at":"2026-02-09T02:55:07Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.356","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.356","depends_on_id":"holomush-5k1.345","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.357","title":"SG10: Move Task 4c orphan cleanup goroutine to Phase 7.7","description":"**Issue:** Task 4c orphan cleanup goroutine is currently in Phase 7.1. The cleanup goroutine is a resilience concern, not a core schema concern.\n\n**Decision:** Accepted — move orphan cleanup goroutine to Phase 7.7 (Resilience). Keep cascade deletion in Phase 7.1.\n\n**Acceptance Criteria:**\n- Orphan cleanup goroutine moved from Phase 7.1 to Phase 7.7\n- Cascade deletion remains in Phase 7.1\n- Dependencies updated in Mermaid diagram\n- Phase 7.7 task list updated\n\n**Files:** docs/plans/2026-02-06-full-abac-phase-7.1.md, docs/plans/2026-02-06-full-abac-phase-7.7.md, docs/plans/2026-02-06-full-abac-implementation.md\n**Dependencies:** File overlap with SG2, SG9 (Phase 7.1), SG3 (Phase 7.7), C6/I6 (implementation.md)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T02:01:19Z","created_by":"seanb4t","updated_at":"2026-02-09T02:55:07Z","closed_at":"2026-02-09T02:55:07Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.357","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.357","depends_on_id":"holomush-5k1.345","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.357","depends_on_id":"holomush-5k1.347","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.358","title":"C1: Fix Task 23b 'Task 35' reference to 'Task 36'","description":"**Review Finding C1 (Critical)**\n\nTask 23b note in Phase 7.4 plan says \"moved from Phase 7.7 (Task 35)\" but the actual validate-seeds stub in Phase 7.7 is Task 36 (line 349). Task 35 is \"Property orphan cleanup goroutine\" (line 251).\n\n**File:** docs/plans/2026-02-06-full-abac-phase-7.4.md line 361\n\n**Acceptance Criteria:**\n- [ ] Task 23b note references \"Task 36\" instead of \"Task 35\"\n- [ ] Cross-reference verified against Phase 7.7 plan\n\n**Dependencies:** None","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T03:19:14Z","created_by":"seanb4t","updated_at":"2026-02-09T03:29:52Z","closed_at":"2026-02-09T03:29:52Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.358","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.359","title":"C2: Fix spec goroutine re-entrance contradiction","description":"**Review Finding C2 (Critical)**\n\nSpec says sentinel \"does NOT detect cross-goroutine re-entrance\" (01-core-types.md line 448) then says tests \"MUST verify that goroutine-based re-entry attempts are detected\" (line 454). This is a self-contradiction.\n\nThe plan correctly tests only same-goroutine re-entry detection. The spec needs clarification.\n\n**Decision:** Line 454 should say \"same-goroutine re-entry\" not \"goroutine-based re-entry\" to remove ambiguity. The sentinel only detects synchronous re-entrance on the same call stack.\n\n**File:** docs/specs/abac/01-core-types.md lines 447-455\n\n**Acceptance Criteria:**\n- [ ] Line 454 clarified to reference \"same-goroutine re-entry attempts\"\n- [ ] No ambiguity between cross-goroutine prohibition (convention-enforced) and same-goroutine detection (sentinel-enforced)\n- [ ] Test spec in 08-testing-appendices.md updated to match\n\n**Dependencies:** None","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T03:19:19Z","created_by":"seanb4t","updated_at":"2026-02-09T03:29:52Z","closed_at":"2026-02-09T03:29:52Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.359","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.36","title":"Plan: Call site count underestimate and incomplete file list","description":"## Issue\nThe plan says \"~28 call sites\" (lines 7, 2354) and Task 29 lists 7 key files (lines 2365-2372). Actual grep shows 30 files with 725 occurrences of AccessControl. Missing from the list:\n- internal/command/types.go (3 refs)\n- internal/command/errors.go (2 refs)\n- internal/world/service_test.go (389 refs)\n- internal/world/worldtest/mock_AccessControl.go (17 refs)\n- internal/access/accesstest/mock.go (13 refs)\n- Plus additional test files\n\n## Decision\nQualify the count as \"~28 production call sites (plus test files and generated mocks)\" and mark the file list as non-exhaustive, relying on the grep command for the authoritative list.\n\n## Files\n- Modify: `docs/plans/2026-02-06-full-abac-implementation.md` (header line 7, Task 29 lines 2354-2372)","acceptance_criteria":"- [ ] Call site count qualified with \"(plus test files and generated mocks)\"\n- [ ] Task 29 file list marked as \"Key files include (non-exhaustive):\"\n- [ ] Grep command retained as authoritative source for full list","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T02:04:34Z","created_by":"seanb4t","updated_at":"2026-02-07T02:48:43Z","closed_at":"2026-02-07T02:48:43Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.36","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.360","title":"C3: Add Task 21b for CI benchmark enforcement","description":"**Review Finding C3 (Critical)**\n\nSpec says \"CI MUST fail if any benchmark exceeds 110% of its documented target value\" (04-resolution-evaluation.md lines 579-580) but Task 21 only creates benchmarks. No task configures CI to enforce regression limits.\n\n**File:** docs/plans/2026-02-06-full-abac-phase-7.3.md (after Task 21)\n\n**Acceptance Criteria:**\n- [ ] New Task 21b added to Phase 7.3 plan for CI benchmark enforcement\n- [ ] Task 21b depends on Task 21 (benchmarks exist)\n- [ ] Task 21b acceptance criteria includes: CI pipeline fails on \u003e110% regression\n- [ ] Benchmark baseline storage strategy documented\n- [ ] Dependency graph in main plan updated\n\n**Dependencies:** Conceptual overlap with Task 21 (benchmarks), Task 20 (metrics)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T03:19:24Z","created_by":"seanb4t","updated_at":"2026-02-09T03:33:00Z","closed_at":"2026-02-09T03:33:00Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.360","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.360","depends_on_id":"holomush-5k1.358","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.361","title":"I1: Add 2 missing seed policies to Task 9 parser corpus","description":"**Review Finding I1 (Important)**\n\nTask 9 acceptance criteria claims \"18 seed policies\" but only lists 16 in the parser test corpus. Missing: seed:property-system-forbid and seed:property-owner-write (defined in Task 22, Phase 7.4 plan lines 145, 151).\n\n**File:** docs/plans/2026-02-06-full-abac-phase-7.2.md (Task 9 valid policies section)\n\n**Acceptance Criteria:**\n- [ ] All 18 seed policy DSL strings listed in Task 9 parser test corpus\n- [ ] seed:property-system-forbid added (forbid policy)\n- [ ] seed:property-owner-write added (permit policy)\n- [ ] Count in acceptance criteria matches actual listed policies\n\n**Dependencies:** Conceptual overlap with Task 22 (Phase 7.4) seed policy definitions","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T03:19:31Z","created_by":"seanb4t","updated_at":"2026-02-09T03:39:00Z","closed_at":"2026-02-09T03:39:00Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.361","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.362","title":"I2: Document DB rollback procedure for ABAC migrations","description":"**Review Finding I2 (Important)**\n\ngit revert handles code rollback, but 5 DB migrations across Phases 7.1-7.5 need manual down-migration procedure documented. Without this, a failed migration could leave the database in an inconsistent state.\n\nADR 065 covers git revert as rollback strategy but doesn't address DB migration specifics.\n\n**Files:** docs/plans/2026-02-06-full-abac-phase-7.6.md, docs/specs/decisions/epic7/phase-7.6/065-git-revert-migration-rollback.md\n\n**Acceptance Criteria:**\n- [ ] Rollback procedure documented covering all 5 ABAC migration files\n- [ ] Each migration's down-migration steps listed\n- [ ] Order of rollback operations specified\n- [ ] Documentation added before Phase 7.6 implementation begins\n\n**Dependencies:** Must complete before Phase 7.6 tasks","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T03:19:37Z","created_by":"seanb4t","updated_at":"2026-02-09T03:39:00Z","closed_at":"2026-02-09T03:39:00Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.362","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.363","title":"I5: Move ADR 78 from phase-7.4/ to phase-7.5/","description":"**Review Finding I5 (Important)**\n\nADR #78 \"Task 27b Split into 3 Sub-Tasks\" is filed under phase-7.4/ but Task 27b and its sub-tasks (27b-1, 27b-2, 27b-3) are all in Phase 7.5 (Admin Commands).\n\n**Files:** \n- Move: docs/specs/decisions/epic7/phase-7.4/078-task-27b-split-into-sub-tasks.md → docs/specs/decisions/epic7/phase-7.5/\n- Update: docs/specs/decisions/epic7/README.md (index entry)\n\n**Acceptance Criteria:**\n- [ ] ADR 78 moved to phase-7.5/ directory\n- [ ] README.md index updated with correct path\n- [ ] Any cross-references to ADR 78 updated\n\n**Dependencies:** None","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T03:19:41Z","created_by":"seanb4t","updated_at":"2026-02-09T03:55:58Z","closed_at":"2026-02-09T03:55:58Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.363","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.364","title":"I3: Add degraded mode alerting configuration","description":"**Review Finding I3 (Important)**\n\nWhen engine enters degraded mode (system-wide deny on corrupted forbid/deny policy), silent denial risks operational impact. The abac_degraded_mode Prometheus gauge exists (Task 20) but no alerting task or checklist item configures alerts for prolonged degraded state.\n\n**Files:** docs/plans/2026-02-06-full-abac-phase-7.3.md (Task 20 or new task/checklist item)\n\n**Acceptance Criteria:**\n- [ ] Alert rule or checklist item added for degraded mode activation\n- [ ] Alert fires when abac_degraded_mode gauge = 1 for \u003e configured threshold\n- [ ] Documentation references recovery procedure (policy clear-degraded-mode command)\n\n**Dependencies:** Task 20 (metrics), Task 33 (degraded mode implementation, Phase 7.7)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T03:19:45Z","created_by":"seanb4t","updated_at":"2026-02-09T03:49:50Z","closed_at":"2026-02-09T03:49:50Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.364","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.364","depends_on_id":"holomush-5k1.367","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.365","title":"I6: Migrate bare line numbers to anchor format in Phase 7.3 Tasks 13-16b","description":"**Review Finding I6 (Important)**\n\nPhase 7.3 Tasks 13-16b use bare line numbers (e.g., \"spec Core Interfaces \u003e Core Attribute Schema, lines 659-785\") instead of file.md#anchor format. This contradicts the Phase 7.1 note about format migration and the convention established in the main plan.\n\n**File:** docs/plans/2026-02-06-full-abac-phase-7.3.md (Tasks 13-16b spec references)\n\n**Acceptance Criteria:**\n- [ ] All spec references in Tasks 13-16b use file.md#anchor format\n- [ ] Legacy line numbers preserved in parentheses for traceability\n- [ ] Format matches convention: [section-name.md#anchor](path) (was lines N-M)\n\n**Dependencies:** None","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T03:19:46Z","created_by":"seanb4t","updated_at":"2026-02-09T03:45:31Z","closed_at":"2026-02-09T03:45:31Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.365","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.366","title":"I4: Fix call site count inconsistency in spec (~30 vs ~28)","description":"**Review Finding I4 (Important)**\n\n07-migration-seeds.md uses both \"~30\" (line 228) and \"~28\" (line 234) for the same call site count. Plan consistently uses precise \"28\".\n\n**Decision:** Standardize to \"~28\" to match plan's precise count.\n\n**File:** docs/specs/abac/07-migration-seeds.md lines 228, 234\n\n**Acceptance Criteria:**\n- [ ] Both occurrences use \"~28\" consistently\n- [ ] Matches plan's count\n\n**Dependencies:** None","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T03:19:50Z","created_by":"seanb4t","updated_at":"2026-02-09T03:48:12Z","closed_at":"2026-02-09T03:48:12Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.366","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.366","depends_on_id":"holomush-5k1.361","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.367","title":"H1: Add LISTEN/NOTIFY staleness monitoring gauge and alerting","description":"**Review Finding H1 (Architectural Recommendation)**\n\nAdd policy_cache_last_update Prometheus gauge to monitor LISTEN/NOTIFY freshness. Alert on prolonged disconnection to prevent silent cache staleness. Should be implemented before Phase 7.6.\n\n**Files:** docs/plans/2026-02-06-full-abac-phase-7.3.md (Task 20 metrics or new sub-task)\n\n**Acceptance Criteria:**\n- [ ] policy_cache_last_update gauge added to Task 20 or new sub-task\n- [ ] Alert threshold for prolonged disconnection documented\n- [ ] Recovery procedure referenced (cache reload on reconnect)\n\n**Dependencies:** Task 20 (Prometheus metrics), Task 17 (LISTEN/NOTIFY cache invalidation)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T03:19:52Z","created_by":"seanb4t","updated_at":"2026-02-09T03:48:12Z","closed_at":"2026-02-09T03:48:12Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.367","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.367","depends_on_id":"holomush-5k1.370","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.368","title":"I7: Expand ADR traceability table to include all spec-referenced ADRs","description":"**Review Finding I7 (Important)**\n\nSpec ADR Reference Mapping table in README.md maps only 8 ADRs (0009-0016) from the main spec. Additional relevant ADRs referenced from modular spec sections (e.g., decisions 35, 38, 39, 48, 56) are not included. Total ADR count is 65+.\n\n**File:** docs/specs/decisions/epic7/README.md (Spec ADR Reference Mapping section)\n\n**Acceptance Criteria:**\n- [ ] All ADRs referenced from spec sections included in mapping table\n- [ ] Table distinguishes between main-spec ADRs and section-spec ADRs\n- [ ] At least ADRs 35, 38, 39, 48, 56 added\n\n**Dependencies:** None","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T03:19:53Z","created_by":"seanb4t","updated_at":"2026-02-09T03:55:58Z","closed_at":"2026-02-09T03:55:58Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.368","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.369","title":"H2: Add cache invalidation integration test for multi-step commands","description":"**Review Finding H2 (Architectural Recommendation)**\n\nSpec uses SHOULD for cache invalidation in multi-step commands. Need integration test to verify stale cache doesn't persist between command steps within the same request.\n\n**Files:** docs/plans/2026-02-06-full-abac-phase-7.7.md (resilience phase)\n\n**Acceptance Criteria:**\n- [ ] Integration test added that executes multi-step command sequence\n- [ ] Test verifies cache is invalidated between steps\n- [ ] Test detects stale data from previous evaluation\n\n**Dependencies:** Phase 7.7 (resilience), Phase 7.3 (cache implementation)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T03:19:57Z","created_by":"seanb4t","updated_at":"2026-02-09T03:45:31Z","closed_at":"2026-02-09T03:45:31Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.369","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.37","title":"Plan: Task 30 missing mock file deletions","description":"## Issue\nTask 30 (lines 2430-2439) lists files to delete but omits generated mock files that reference AccessControl:\n- internal/world/worldtest/mock_AccessControl.go (17 references)\n- internal/access/accesstest/mock.go (13 references)\n\nThese will fail to compile after AccessControl interface is removed.\n\n## Decision\nAdd both mock files to Task 30 deletion list.\n\n## Files\n- Modify: `docs/plans/2026-02-06-full-abac-implementation.md` (Task 30 file list)\n\n## Dependencies\n- File overlap with Task 29 (call site migration)","acceptance_criteria":"- [ ] mock_AccessControl.go added to Task 30 deletion list\n- [ ] accesstest/mock.go added to Task 30 deletion list\n- [ ] Note about mockery regeneration for new AccessPolicyEngine interface","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T02:04:43Z","created_by":"seanb4t","updated_at":"2026-02-07T02:49:48Z","closed_at":"2026-02-07T02:49:48Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.37","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.370","title":"H3: Enforce core-first provider registration order","description":"**Review Finding H3 (Architectural Recommendation)**\n\nPrevent plugin providers from starving core providers by enforcing core-first registration order. Current fair-share scheduling (ADR 059) doesn't mandate ordering.\n\n**Decision:** New ADR mandating core providers register before plugin providers. Spec change required.\n\n**Files:**\n- New ADR in docs/specs/decisions/epic7/phase-7.3/\n- Update docs/specs/abac/03-property-model.md or 04-resolution-evaluation.md\n- Update docs/plans/2026-02-06-full-abac-phase-7.3.md\n\n**Acceptance Criteria:**\n- [ ] New ADR filed documenting core-first registration order decision\n- [ ] Spec updated with registration order constraint\n- [ ] Plan task(s) updated with implementation requirement\n- [ ] Provider registry enforces ordering at registration time\n\n**Dependencies:** Phase 7.3 provider implementation, ADR 059 (fair-share scheduling)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T03:20:02Z","created_by":"seanb4t","updated_at":"2026-02-09T03:45:31Z","closed_at":"2026-02-09T03:45:31Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.370","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.371","title":"H4: Change circuit breaker threshold from 3 to 5 timeouts","description":"**Review Finding H4 (Architectural Recommendation)**\n\nCurrent spec sets PropertyProvider circuit breaker at 3 timeouts. 3 may be too aggressive for transient DB load during normal operation.\n\n**Decision:** Change threshold from 3 to 5 timeouts. More tolerant of transient load while still providing protection.\n\n**Files:**\n- docs/specs/abac/03-property-model.md or 04-resolution-evaluation.md (wherever threshold is defined)\n- docs/plans/2026-02-06-full-abac-phase-7.3.md (Task references)\n\n**Acceptance Criteria:**\n- [ ] Spec parameter updated from 3 to 5\n- [ ] Plan references updated to match\n- [ ] Decision documented in design decisions\n\n**Dependencies:** None","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T03:20:03Z","created_by":"seanb4t","updated_at":"2026-02-09T03:45:31Z","closed_at":"2026-02-09T03:45:31Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.371","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.372","title":"H5: Add migration equivalence testing for old vs new engine","description":"**Review Finding H5 (Architectural Recommendation)**\n\nNo test validates identical authorization decisions between old StaticAccessControl and new ABAC engine. Need equivalence test covering all ~28 call sites.\n\n**Files:** docs/plans/2026-02-06-full-abac-phase-7.6.md\n\n**Acceptance Criteria:**\n- [ ] Test suite or task added to Phase 7.6 plan\n- [ ] Tests validate identical decisions for all ~28 call sites\n- [ ] Both engines evaluated against same request set\n- [ ] Any behavioral differences documented and justified\n\n**Dependencies:** Phase 7.6 (migration), requires both engines functional","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T03:20:07Z","created_by":"seanb4t","updated_at":"2026-02-09T03:48:12Z","closed_at":"2026-02-09T03:48:12Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.372","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.372","depends_on_id":"holomush-5k1.371","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.373","title":"S3: Add source column naming constraint from ADR 35 to Task 7","description":"**Review Finding S3 (Suggestion)**\n\nADR 35 defines audit log source column naming constraint. Task 7 acceptance criteria should reference this constraint explicitly.\n\n**Files:** docs/plans/2026-02-06-full-abac-phase-7.1.md (Task 7)\n\n**Acceptance Criteria:**\n- [ ] Task 7 acceptance criteria includes source column naming constraint from ADR 35\n- [ ] Reference to ADR 35 added to Task 7\n\n**Dependencies:** None","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T03:20:08Z","created_by":"seanb4t","updated_at":"2026-02-09T03:55:58Z","closed_at":"2026-02-09T03:55:58Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.373","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.374","title":"S1: Add Grammar Versioning row to Spec Coverage Matrix","description":"**Review Finding S1 (Suggestion)**\n\nGrammar versioning (Tasks 12, 27b-1, 27b-3) not represented in the Spec Coverage Matrix in the main plan index.\n\n**File:** docs/plans/2026-02-06-full-abac-implementation.md (Spec Coverage Matrix)\n\n**Acceptance Criteria:**\n- [ ] Grammar Versioning row added to Spec Coverage Matrix\n- [ ] References Tasks 12, 27b-1, 27b-3\n\n**Dependencies:** None","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T03:20:12Z","created_by":"seanb4t","updated_at":"2026-02-09T03:55:58Z","closed_at":"2026-02-09T03:55:58Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.374","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.375","title":"S4: Increase fuzz test duration from 30s to 60s for CI","description":"**Review Finding S4 (Suggestion)**\n\nReviewer recommends increasing fuzz test duration for CI from 30s to 60s for better parser coverage.\n\n**File:** docs/plans/2026-02-06-full-abac-phase-7.2.md (fuzz testing section)\n\n**Acceptance Criteria:**\n- [ ] Fuzz test duration updated to 60s in plan\n\n**Dependencies:** None","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T03:20:12Z","created_by":"seanb4t","updated_at":"2026-02-09T03:55:58Z","closed_at":"2026-02-09T03:55:58Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.375","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.376","title":"S2: Clarify WAL metric ownership between Task 19 and Task 20","description":"**Review Finding S2 (Suggestion)**\n\nWAL-related metrics could belong to either Task 19 (audit logger) or Task 20 (Prometheus metrics). Ownership is ambiguous.\n\n**Files:** docs/plans/2026-02-06-full-abac-phase-7.3.md (Task 19, Task 20)\n\n**Acceptance Criteria:**\n- [ ] Each WAL metric assigned to exactly one task\n- [ ] Ownership boundary clearly documented\n\n**Dependencies:** None (conceptual overlap between Task 19 and Task 20)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T03:20:16Z","created_by":"seanb4t","updated_at":"2026-02-09T03:55:58Z","closed_at":"2026-02-09T03:55:58Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.376","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.377","title":"S5: Document total ADR count (65+) in plan index","description":"**Review Finding S5 (Suggestion)**\n\nPlan index does not mention the total number of ADRs (65+). Adding this helps implementer discoverability.\n\n**File:** docs/plans/2026-02-06-full-abac-implementation.md\n\n**Acceptance Criteria:**\n- [ ] Total ADR count documented in plan index\n- [ ] Reference to ADR directory included\n\n**Dependencies:** None","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T03:20:17Z","created_by":"seanb4t","updated_at":"2026-02-09T03:55:58Z","closed_at":"2026-02-09T03:55:58Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.377","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.378","title":"[C1] Fix task count mismatch (36→43) in main plan","description":"**Review Finding C1 (Critical)**\n\nThe main plan overview says '36-task' but the actual count is 43 tasks. Subtasks added during refinement (T0.5, T21a, T21b, T23b, T25b, T27b1-3, T4a/b/c, T16a/b) were not reflected in the summary count.\n\n**Location:** docs/plans/2026-02-06-full-abac-implementation.md (overview section)\n\n**Fix:** Count all tasks across all phase files and update the summary count.\n\n**Acceptance Criteria:**\n- [ ] Task count in main plan overview matches actual task count across all phase files\n- [ ] All task references in the overview are consistent with phase files\n\n**Files:** docs/plans/2026-02-06-full-abac-implementation.md\n\n**Conceptual Overlap:** Related to C4 (Task 28.5 may affect count)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T04:17:15Z","created_by":"seanb4t","updated_at":"2026-02-09T04:33:05Z","closed_at":"2026-02-09T04:33:05Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.378","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.378","depends_on_id":"holomush-5k1.382","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.379","title":"[C2] Add --config flag to Taskfile rumdl commands","description":"**Review Finding C2 (Critical)**\n\nThree rumdl commands in Taskfile.yml run without --config site/.rumdl.toml, making them no-ops since the root config excludes site/. Lefthook correctly uses the flag but the Taskfile does not.\n\n**Location:** Taskfile.yml (3 locations: rumdl check site/, rumdl fmt site/, rumdl fmt --check site/)\n\n**Fix:** Add --config site/.rumdl.toml to all three rumdl commands in Taskfile.yml, matching lefthook.yaml behavior.\n\n**Acceptance Criteria:**\n- [ ] All rumdl commands targeting site/ include --config site/.rumdl.toml\n- [ ] Lefthook and Taskfile rumdl invocations are consistent\n- [ ] task lint:markdown (or equivalent) actually checks site/ files\n\n**Files:** Taskfile.yml (root, not in sparse checkout — may need to expand sparse checkout or edit from main worktree)\n\n**Note:** Taskfile is NOT in the PR's sparse checkout. This fix may need to be done from the main worktree or the sparse checkout expanded.","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T04:17:25Z","created_by":"seanb4t","updated_at":"2026-02-09T04:25:31Z","closed_at":"2026-02-09T04:25:31Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.379","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.38","title":"Plan: Migration number fragility","description":"## Issue\nPlan hardcodes migration numbers 000015, 000016, 000017 (lines 80-81, 155-156, 221-222) based on current latest migration 000014_aliases. If another PR merges before this work begins, numbers will collide.\n\n## Decision\nAdd a note at the top of Phase 7.1 stating migration numbers are relative to current latest and should be updated if other migrations merge first.\n\n## Files\n- Modify: `docs/plans/2026-02-06-full-abac-implementation.md` (Phase 7.1 header)","acceptance_criteria":"- [ ] Note added to Phase 7.1 about migration number relativity\n- [ ] Note specifies current baseline: 000014_aliases","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T02:04:48Z","created_by":"seanb4t","updated_at":"2026-02-07T02:57:58Z","closed_at":"2026-02-07T02:57:58Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.38","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.380","title":"[C3] Fix broken docs/specs/adr/ path reference","description":"**Review Finding C3 (Critical/Cross-Ref)**\n\nMain plan line 54 references non-existent directory docs/specs/adr/. The actual path is docs/specs/decisions/epic7/.\n\n**Location:** docs/plans/2026-02-06-full-abac-implementation.md:54\n\n**Fix:** Change docs/specs/adr/ to docs/specs/decisions/epic7/ in the referenced line.\n\n**Acceptance Criteria:**\n- [ ] All references to docs/specs/adr/ are updated to docs/specs/decisions/epic7/\n- [ ] No broken path references remain in plan files\n- [ ] task lint passes\n\n**Files:** docs/plans/2026-02-06-full-abac-implementation.md\n\n**Conceptual Overlap:** Same file location as S7 (ADR count)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T04:17:35Z","created_by":"seanb4t","updated_at":"2026-02-09T04:26:32Z","closed_at":"2026-02-09T04:26:32Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.380","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.381","title":"[I2] Add cross-phase gate summary table","description":"**Review Finding I2 (Important/Architecture)**\n\nThe T18→T23 cross-phase gate is buried in prose. Inter-phase blocking relationships need a prominent table format for easy reference.\n\n**Location:** docs/plans/2026-02-06-full-abac-implementation.md (after dependency graph section)\n\n**Fix:** Add a table listing all cross-phase blocking gates (e.g., T18→T23, T12→T22, T21a→T22, T6→T23, etc.) with source phase, target phase, and rationale.\n\n**Acceptance Criteria:**\n- [ ] Cross-phase gate table added to main plan\n- [ ] All inter-phase dependencies from Mermaid diagram represented in table\n- [ ] Each gate has source task, target task, source phase, target phase, and brief rationale\n- [ ] Table is positioned prominently (not buried in prose)\n\n**Files:** docs/plans/2026-02-06-full-abac-implementation.md\n\n**Conceptual Overlap:** I3 (dependency rationale), shares main plan file with C1, C3, C4","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T04:17:44Z","created_by":"seanb4t","updated_at":"2026-02-09T04:35:21Z","closed_at":"2026-02-09T04:35:21Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.381","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.382","title":"[C4] Add Task 28.5 to dependency graph and coverage matrix","description":"**Review Finding C4 (Critical/Cross-Ref)**\n\nTask 28.5 (Migration Equivalence Testing) exists in Phase 7.6 (line 258) but is absent from: (1) the Mermaid dependency diagram in the main plan, (2) the coverage matrix, and (3) the Phase 7.6 subgraph.\n\n**Location:** docs/plans/2026-02-06-full-abac-implementation.md (Mermaid diagram + coverage matrix), docs/plans/2026-02-06-full-abac-phase-7.6.md:258\n\n**Fix:** Add T28_5 node to Phase 7.6 subgraph in Mermaid diagram, add appropriate dependency edges (T28→T28_5→T29), and add row to coverage matrix.\n\n**Acceptance Criteria:**\n- [ ] T28_5 node appears in Phase 7.6 subgraph of Mermaid diagram\n- [ ] T28_5 has correct dependency edges (depends on T28, blocks T29 or runs parallel)\n- [ ] T28_5 appears in coverage matrix with correct component mapping\n- [ ] Task count is consistent (related to C1)\n\n**Files:** docs/plans/2026-02-06-full-abac-implementation.md, docs/plans/2026-02-06-full-abac-phase-7.6.md\n\n**Conceptual Overlap:** C1 (affects task count), shares dependency graph with I1","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T04:17:45Z","created_by":"seanb4t","updated_at":"2026-02-09T04:28:56Z","closed_at":"2026-02-09T04:28:56Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.382","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.383","title":"[I3] Add rationale for T21a→T22 dependency","description":"**Review Finding I3 (Important/Architecture)**\n\nThe dependency T21a→T22 (@-prefix removal gates seed policy constants) is in the graph but the rationale is not explained near the dependency. The explanation exists in Phase 7.4 prerequisites but is not visible in the main plan's dependency graph context.\n\n**Location:** docs/plans/2026-02-06-full-abac-implementation.md (dependency annotations section)\n\n**Fix:** Add annotation near the T21a→T22 edge in the dependency graph notes explaining: seed policies reference bare command names (e.g., 'say', 'dig'), so @-prefix must be removed first to avoid mismatches.\n\n**Acceptance Criteria:**\n- [ ] Rationale for T21a→T22 dependency is documented near the dependency graph\n- [ ] Annotation explains that seed policies use bare command names requiring @-prefix removal\n- [ ] Cross-reference to Phase 7.4 prerequisites section included\n\n**Files:** docs/plans/2026-02-06-full-abac-implementation.md\n\n**Conceptual Overlap:** I2 (cross-phase gates), I1 (dependency graph)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T04:17:52Z","created_by":"seanb4t","updated_at":"2026-02-09T04:36:34Z","closed_at":"2026-02-09T04:36:34Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.383","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.384","title":"[I1] Document PropertyProvider intentional exclusion from critical path","description":"**Review Finding I1 (Important/Architecture)**\n\nThe dependency graph shows no edge between T16b (PropertyProvider) and T17 (AccessPolicyEngine). The reviewer notes PropertyProvider should either explicitly depend on T17 or the plan should document the engine works without it.\n\n**Decision:** Document that PropertyProvider is intentionally NOT on the critical path. The engine functions with core providers (T15) and simple providers (T16a); PropertyProvider adds optional property-specific attributes. This is consistent with the existing parallel-chain design (orange highlighting in Mermaid diagram). New Decision #85 to be created.\n\n**Location:** docs/plans/2026-02-06-full-abac-implementation.md (dependency graph notes section)\n\n**Fix:** Add explicit note after the Mermaid diagram explaining why T16b is not connected to T17. Create Decision #85 documenting this architectural choice.\n\n**Acceptance Criteria:**\n- [ ] Note added to main plan explaining T16b intentional exclusion from T17 dependencies\n- [ ] Decision #85 created in docs/specs/decisions/epic7/phase-7.3/\n- [ ] Decision #85 added to README.md decision index\n- [ ] Existing parallel-chain documentation remains consistent\n\n**Files:** docs/plans/2026-02-06-full-abac-implementation.md, docs/specs/decisions/epic7/phase-7.3/085-property-provider-not-on-critical-path.md, docs/specs/decisions/epic7/README.md\n\n**Conceptual Overlap:** C4 (dependency graph), shares graph file with C1, C3","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T04:17:58Z","created_by":"seanb4t","updated_at":"2026-02-09T04:39:34Z","closed_at":"2026-02-09T04:39:34Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.384","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.385","title":"[I4] Add bootstrap seed policy verification acceptance criteria","description":"**Review Finding I4 (Important/Architecture)**\n\nNo acceptance criteria verify that seed policies are actually inserted into the database. The bootstrap sequence (Task 23) needs verification like 'SELECT COUNT(*) FROM access_policies WHERE source=seed returns expected count'.\n\n**Location:** docs/plans/2026-02-06-full-abac-phase-7.4.md (Task 23 acceptance criteria)\n\n**Fix:** Add acceptance criteria to Task 23 (bootstrap sequence) verifying seed policy insertion count and correct content.\n\n**Acceptance Criteria:**\n- [ ] Task 23 has acceptance criterion for verifying seed policy count in DB\n- [ ] Expected count matches the number of seed policies defined in Task 22\n- [ ] Verification query documented (SELECT COUNT from access_policies WHERE source=seed)\n- [ ] At least one spot-check criterion for policy content correctness\n\n**Files:** docs/plans/2026-02-06-full-abac-phase-7.4.md\n\n**Conceptual Overlap:** I5 (acceptance criteria gaps)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T04:17:59Z","created_by":"seanb4t","updated_at":"2026-02-09T04:40:24Z","closed_at":"2026-02-09T04:40:24Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.385","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.386","title":"[I7] Remove stale rumdl Homebrew availability comment from lefthook","description":"**Review Finding I7 (Important/Code Quality)**\n\nLefthook config contains a comment saying to verify rumdl Homebrew availability, but rumdl is already confirmed available via brew info rumdl. The comment is stale.\n\n**Location:** lefthook.yaml\n\n**Fix:** Remove or update the stale comment about verifying rumdl Homebrew availability.\n\n**Acceptance Criteria:**\n- [ ] Stale rumdl availability comment removed or updated\n- [ ] lefthook.yaml lints cleanly\n\n**Files:** lefthook.yaml","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T04:18:02Z","created_by":"seanb4t","updated_at":"2026-02-09T04:40:46Z","closed_at":"2026-02-09T04:40:46Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.386","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.387","title":"[I5] Add rollback test requirements for migration strategy","description":"**Review Finding I5 (Important/Architecture)**\n\nADR #65 documents git-revert as the migration rollback strategy, but no tests verify rollback actually works. The migration tasks in Phase 7.6 should include acceptance criteria for rollback testing.\n\n**Location:** docs/plans/2026-02-06-full-abac-phase-7.6.md (Task 28 or Task 29 acceptance criteria)\n\n**Fix:** Add rollback test acceptance criteria to Phase 7.6 migration tasks. Tests should verify that git-revert of migration commits leaves the system in a working state.\n\n**Acceptance Criteria:**\n- [ ] Rollback test requirement added to Phase 7.6 migration tasks\n- [ ] Test verifies git-revert of migration produces compilable code\n- [ ] Test verifies existing tests pass after rollback\n- [ ] Cross-reference to ADR #65 included in acceptance criteria\n\n**Files:** docs/plans/2026-02-06-full-abac-phase-7.6.md\n\n**Conceptual Overlap:** I4 (acceptance criteria gaps), references ADR 65 (Decision #65)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T04:18:06Z","created_by":"seanb4t","updated_at":"2026-02-09T04:41:31Z","closed_at":"2026-02-09T04:41:31Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.387","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.388","title":"[S1] Add milestone markers (M1-M6) at integration checkpoints","description":"**Review Finding S1 (Suggestion/Architecture)**\n\nAdd milestone markers (M1-M6) at major integration checkpoints in the plan for easier progress tracking and sprint planning.\n\n**Location:** docs/plans/2026-02-06-full-abac-implementation.md\n\n**Fix:** Define milestone markers at key integration points (e.g., M1: Schema complete, M2: DSL functional, M3: Engine operational, M4: Policies seeded, M5: Admin tools ready, M6: Migration complete) and annotate them in the dependency graph and phase summaries.\n\n**Acceptance Criteria:**\n- [ ] Milestone markers M1-M6 defined with clear completion criteria\n- [ ] Milestones annotated in dependency graph or phase summaries\n- [ ] Each milestone maps to a verifiable integration checkpoint\n\n**Files:** docs/plans/2026-02-06-full-abac-implementation.md\n\n**Conceptual Overlap:** S2 (critical-path diagram), S3 (complexity estimates)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T04:18:09Z","created_by":"seanb4t","updated_at":"2026-02-09T04:47:24Z","closed_at":"2026-02-09T04:47:24Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.388","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.389","title":"[I6] Convert bare line references to anchor format in Phase 7.4-7.6","description":"**Review Finding I6 (Important/Code Quality)**\n\nPhase 7.4, 7.5, and 7.6 still use bare line references (e.g., 'line 1234') instead of the file.md#anchor format used consistently in Phase 7.3+. This inconsistency makes references fragile.\n\n**Location:** docs/plans/2026-02-06-full-abac-phase-7.4.md, docs/plans/2026-02-06-full-abac-phase-7.5.md, docs/plans/2026-02-06-full-abac-phase-7.6.md\n\n**Fix:** Find all bare line references in Phase 7.4, 7.5, and 7.6 plan files and convert them to file.md#anchor format, matching the style established in Phase 7.3.\n\n**Acceptance Criteria:**\n- [ ] No bare line references remain in Phase 7.4 plan file\n- [ ] No bare line references remain in Phase 7.5 plan file\n- [ ] No bare line references remain in Phase 7.6 plan file\n- [ ] All converted references use file.md#anchor format\n- [ ] Anchors reference valid section headings in spec files\n\n**Files:** docs/plans/2026-02-06-full-abac-phase-7.4.md, docs/plans/2026-02-06-full-abac-phase-7.5.md, docs/plans/2026-02-06-full-abac-phase-7.6.md\n\n**Conceptual Overlap:** S9 (legacy line numbers)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T04:18:16Z","created_by":"seanb4t","updated_at":"2026-02-09T04:46:30Z","closed_at":"2026-02-09T04:46:30Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.389","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.39","title":"Plan: Missing audit step in Task 16 acceptance criteria","description":"## Issue\nTask 16 (AccessPolicyEngine) acceptance criteria cover steps 1-6 of the 7-step evaluation algorithm but omit step 7 (Audit). There is no acceptance criterion verifying that audit logging occurs per configured mode.\n\nAlso: step numbering uses 2b/2c for session errors which doesn't match spec's single step 2.\n\n## Decision\nAdd audit logging acceptance criterion. Align step numbering with spec.\n\n## Files\n- Modify: `docs/plans/2026-02-06-full-abac-implementation.md` (Task 16 acceptance criteria)","acceptance_criteria":"- [ ] Acceptance criterion added: \"Step 7: Audit entry logged per configured mode\"\n- [ ] Step numbering aligned with spec (session errors under step 2, not 2b/2c)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T02:04:54Z","created_by":"seanb4t","updated_at":"2026-02-07T02:52:38Z","closed_at":"2026-02-07T02:52:38Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.39","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.390","title":"[S2] Add simplified critical-path-only Mermaid diagram","description":"**Review Finding S2 (Suggestion/Architecture)**\n\nAdd a second, simplified Mermaid diagram showing only the critical path. The full 43-task diagram is comprehensive but hard to parse quickly for critical-path identification.\n\n**Location:** docs/plans/2026-02-06-full-abac-implementation.md\n\n**Fix:** Create a simplified Mermaid diagram showing only critical-path tasks (the red-highlighted path: T0→T0.5→T1→T7→T12→T17→T18→T23→T28→T29) and milestone markers.\n\n**Acceptance Criteria:**\n- [ ] Simplified critical-path Mermaid diagram added\n- [ ] Only critical-path tasks and key parallel branches shown\n- [ ] Milestone markers (from S1, if implemented) annotated\n- [ ] Diagram renders correctly in GitHub markdown\n\n**Files:** docs/plans/2026-02-06-full-abac-implementation.md\n\n**Conceptual Overlap:** S1 (milestones), S3 (complexity)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T04:18:17Z","created_by":"seanb4t","updated_at":"2026-02-09T04:48:15Z","closed_at":"2026-02-09T04:48:15Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.390","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.391","title":"[S5] Add Quick Start section for experienced implementers","description":"**Review Finding S5 (Suggestion/Architecture)**\n\nAdd a Quick Start section for experienced implementers who want to jump directly to implementation without reading the full plan.\n\n**Location:** docs/plans/2026-02-06-full-abac-implementation.md\n\n**Fix:** Add a brief Quick Start section near the top with: critical path summary, first 3 tasks to start, key files to create, and essential ADRs to read.\n\n**Acceptance Criteria:**\n- [ ] Quick Start section added near top of main plan\n- [ ] Lists critical path tasks in order\n- [ ] References essential ADRs and spec sections\n- [ ] Identifies first actionable tasks\n\n**Files:** docs/plans/2026-02-06-full-abac-implementation.md","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T04:18:23Z","created_by":"seanb4t","updated_at":"2026-02-09T04:49:00Z","closed_at":"2026-02-09T04:49:00Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.391","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.392","title":"[S3] Add task complexity estimates for sprint planning","description":"**Review Finding S3 (Suggestion/Architecture)**\n\nAdd complexity/effort estimates (T-shirt sizes or story points) to tasks for sprint planning purposes.\n\n**Location:** docs/plans/2026-02-06-full-abac-implementation.md (task summary table or individual tasks)\n\n**Fix:** Add a complexity column to the task summary or coverage matrix with T-shirt size estimates (XS/S/M/L/XL) based on: scope of code changes, number of files touched, test complexity, and dependency complexity.\n\n**Acceptance Criteria:**\n- [ ] All tasks have complexity estimates\n- [ ] Estimates use consistent scale (XS/S/M/L/XL or similar)\n- [ ] Critical-path tasks have rationale for their estimates\n- [ ] Total estimated effort summarized\n\n**Files:** docs/plans/2026-02-06-full-abac-implementation.md\n\n**Conceptual Overlap:** S1 (milestones), S2 (critical path)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T04:18:24Z","created_by":"seanb4t","updated_at":"2026-02-09T04:50:38Z","closed_at":"2026-02-09T04:50:38Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.392","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.393","title":"[S6] Surface performance targets prominently in Task 17/21","description":"**Review Finding S6 (Suggestion/Architecture)**\n\nPerformance targets from Decision #23 should be surfaced prominently in Task 17 (AccessPolicyEngine) and Task 21 (Performance benchmarks) rather than requiring cross-reference to the ADR.\n\n**Location:** docs/plans/2026-02-06-full-abac-phase-7.3.md (Tasks 17 and 21)\n\n**Fix:** Add performance target callout boxes in Task 17 and Task 21 with key metrics from Decision #23 (e.g., p95 latency, throughput targets).\n\n**Acceptance Criteria:**\n- [ ] Performance targets visible in Task 17 acceptance criteria\n- [ ] Performance targets visible in Task 21 acceptance criteria\n- [ ] Cross-reference to Decision #23 maintained\n- [ ] Specific numeric targets stated (not just 'see ADR')\n\n**Files:** docs/plans/2026-02-06-full-abac-phase-7.3.md","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T04:18:30Z","created_by":"seanb4t","updated_at":"2026-02-09T04:51:31Z","closed_at":"2026-02-09T04:51:31Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.393","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.394","title":"[S4] Add negative coverage section (deferred features)","description":"**Review Finding S4 (Suggestion/Architecture)**\n\nAdd a section documenting what is intentionally NOT covered by this plan (deferred features) to set clear scope boundaries.\n\n**Location:** docs/plans/2026-02-06-full-abac-implementation.md\n\n**Fix:** Add a 'Not In Scope / Deferred' section listing features explicitly deferred: entity references, cross-resource policies, UI admin panel, RBAC compatibility layer, etc.\n\n**Acceptance Criteria:**\n- [ ] Deferred features section added to main plan\n- [ ] Each deferred item includes brief rationale for deferral\n- [ ] Cross-references to relevant ADRs where applicable (e.g., entity references → Decision #16)\n\n**Files:** docs/plans/2026-02-06-full-abac-implementation.md","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T04:18:30Z","created_by":"seanb4t","updated_at":"2026-02-09T04:52:38Z","closed_at":"2026-02-09T04:52:38Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.394","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.395","title":"[S7] Update stale ADR count (65+ → actual count)","description":"**Review Finding S7 (Suggestion/Code Quality)**\n\nMain plan states '65+ decisions' but actual count is higher (72+ files based on decision index). The count should be updated to reflect the actual number.\n\n**Location:** docs/plans/2026-02-06-full-abac-implementation.md:54\n\n**Fix:** Count actual decision files in docs/specs/decisions/epic7/ and update the reference. Also verify the count matches the README index.\n\n**Acceptance Criteria:**\n- [ ] ADR count updated to match actual file count\n- [ ] Count verified against README decision index\n\n**Files:** docs/plans/2026-02-06-full-abac-implementation.md\n\n**Conceptual Overlap:** C3 (same line 54 area)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T04:18:37Z","created_by":"seanb4t","updated_at":"2026-02-09T04:53:32Z","closed_at":"2026-02-09T04:53:32Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.395","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.396","title":"[S8] Add rumdl version pin update procedure to CI comment","description":"**Review Finding S8 (Suggestion/Code Quality)**\n\nCI workflow has a rumdl version pin comment but lacks an update procedure. Should include steps for updating when a new version is released.\n\n**Location:** .github/workflows/ci.yaml\n\n**Fix:** Add a comment near the rumdl version pin with the update procedure (check releases, update version + SHA256 hash, verify).\n\n**Acceptance Criteria:**\n- [ ] Update procedure comment added near rumdl version pin\n- [ ] Procedure includes: check for new release, update version string, update SHA256 hash, verify installation\n\n**Files:** .github/workflows/ci.yaml","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T04:18:43Z","created_by":"seanb4t","updated_at":"2026-02-09T04:53:58Z","closed_at":"2026-02-09T04:53:58Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.396","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.397","title":"[S9] Evaluate removal of legacy line numbers from plan","description":"**Review Finding S9 (Suggestion/Cross-Ref)**\n\nLegacy line numbers from the monolithic spec are preserved in parentheses throughout the plan for traceability, but they serve no verification purpose since the spec was split into modular sections with anchors.\n\n**Location:** Multiple plan files (all phase files)\n\n**Fix:** Evaluate whether legacy line numbers can be safely removed. If removed, ensure anchor-based references are sufficient. If kept, add a note explaining their purpose for historical traceability.\n\n**Acceptance Criteria:**\n- [ ] Decision made on whether to keep or remove legacy line numbers\n- [ ] If removed: all spec references use anchor-based format only\n- [ ] If kept: explanatory note added about their purpose\n- [ ] No broken references after changes\n\n**Files:** All docs/plans/2026-02-06-full-abac-*.md files\n\n**Conceptual Overlap:** I6 (line reference formatting)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T04:18:51Z","created_by":"seanb4t","updated_at":"2026-02-09T04:54:52Z","closed_at":"2026-02-09T04:54:52Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.397","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.398","title":"PLAN-C1: Fix incorrect task count in master plan","description":"## Issue\nMaster plan claims '6 XS, 12 S, 19 M, 8 L, 2 XL = 43 tasks' but:\n1. The complexity table lists 50 rows (tasks)\n2. The arithmetic 6+12+19+8+2 = 47, not 43\n3. The '43 tasks' label appears in 3 places (summary line, critical path overview, phase files section)\n\n## Decision\nRecount all tasks from the complexity table and fix the summary. Update all 3 locations where the incorrect count appears.\n\n## Acceptance Criteria\n- [ ] Complexity summary line matches actual table row counts\n- [ ] Arithmetic is correct (sum matches total)\n- [ ] All 3 locations referencing task count are consistent\n- [ ] Mermaid diagram header text updated if it references count\n- [ ] `task fmt` passes\n\n## Dependencies\n- File: docs/plans/2026-02-06-full-abac-implementation.md","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T13:51:13Z","created_by":"seanb4t","updated_at":"2026-02-09T14:20:19Z","closed_at":"2026-02-09T14:20:19Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.398","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.399","title":"SPEC-C1: Fix inaccurate call site inventory entries","description":"## Issue\nTwo entries in the call site inventory table (07-migration-seeds.md) are wrong:\n1. `internal/plugin/hostfunc/functions` uses `enforcer.Check()` (CapabilityChecker interface), NOT `AccessControl.Check()` — different interface entirely. This is a plugin capability check, not an access control check.\n2. `internal/access/static.go` is the IMPLEMENTATION of StaticAccessControl, not a call site — it should be listed under 'files to delete' in Phase 7.6, not in the call site inventory.\n\n## Decision\nRemove both entries from the call site inventory table. Add `internal/access/static.go` to Phase 7.6 cleanup list. Update the call site count to reflect the correction.\n\n## Acceptance Criteria\n- [ ] `internal/plugin/hostfunc/functions` removed from call site inventory in 07-migration-seeds.md\n- [ ] `internal/access/static.go` removed from call site inventory, added to Phase 7.6 cleanup\n- [ ] Call site count updated consistently across spec and plan\n- [ ] `task fmt` passes\n\n## Dependencies\n- File: docs/specs/abac/07-migration-seeds.md (shared with SPEC-C2)\n- Conceptual: overlaps with SPEC-I2 (call site count inconsistency)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T13:51:19Z","created_by":"seanb4t","updated_at":"2026-02-09T14:22:04Z","closed_at":"2026-02-09T14:22:04Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.399","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.4","title":"[E7] Phase 7.2: DSL \u0026 Compiler","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.2.md`.\n\n\u003c!-- SPDX-License-Identifier: Apache-2.0 --\u003e\n\u003c!-- Copyright 2026 HoloMUSH Contributors --\u003e\n\n# Phase 7.2: DSL \u0026 Compiler\n\n\u003e **[Back to Overview](./2026-02-06-full-abac-implementation.md)** | **[Previous: Phase 7.1](./2026-02-06-full-abac-phase-7.1.md)** | **[Next: Phase 7.3](./2026-02-06-full-abac-phase-7.3.md)**\n\nTask Inventory:\n- T8: Define AST node types\n- T9: Build DSL parser\n- T10: Add DSL fuzz tests\n- T11: Build DSL condition evaluator\n- T12: Build PolicyCompiler\n\nThis epic tracks phase-scoped execution of the ABAC implementation plan. Child tasks preserve plan-level dependencies and carry explicit TDD and independent-review gates.","acceptance_criteria":"- [ ] All planned Phase 7.2 tasks are represented as child beads under this epic.\n- [ ] Each child task is executed with the plan's mandatory TDD protocol (fail test first, then pass with `task test`; SQL migration exception applies with required integration coverage).\n- [ ] Each child task receives a passing independent reviewer-agent review confirming acceptance criteria, spec alignment, design/ADR alignment, and resolution of findings.\n- [ ] Inter-task and cross-phase dependencies are linked in beads and respected before this epic is closed.\n- [ ] M2 gate achieved at T12 (DSL parser/evaluator/compiler ready).","status":"closed","priority":1,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:32:32Z","created_by":"seanb4t","updated_at":"2026-02-12T23:44:00Z","closed_at":"2026-02-12T23:44:00Z","close_reason":"All Phase 7.2 tasks (T8-T12) complete: AST types, parser, fuzz tests, evaluator, compiler","dependencies":[{"issue_id":"holomush-5k1.4","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.4","depends_on_id":"holomush-5k1.3","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.4.1","title":"[ABAC Plan 7.2] T8: Define AST node types","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.2.md` task section at line 8.\n\n**Spec References:** [02-policy-dsl.md#grammar](../specs/abac/02-policy-dsl.md#grammar)\n\n**Dependencies:**\n\n- Task 0 (Phase 7.1) — AST serialization spike validated storage model\n- Task 5 (Phase 7.1) — core types must exist for AST node definitions\n\n**Acceptance Criteria:**\n\n- [ ] AST nodes defined for: `Policy`, `Target`, `PrincipalClause`, `ActionClause`, `ResourceClause`, `ConditionBlock`, `Disjunction`, `Conjunction`, `Condition`, `Expr`, `AttrRef`, `Literal`, `ListExpr`\n- [ ] All nodes use participle struct tag annotations matching the EBNF grammar\n- [ ] `String()` methods render AST back to readable DSL text\n- [ ] Reserved words enforced: `permit`, `forbid`, `when`, `principal`, `resource`, `action`, `env`, `is`, `in`, `has`, `like`, `true`, `false`, `if`, `then`, `else`, `containsAll`, `containsAny`\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Create: `internal/access/policy/dsl/ast.go`\n- Test: `internal/access/policy/dsl/ast_test.go`\n\nTest that AST nodes render back to readable DSL text (useful for debugging and `policy show`).\n\nMap the EBNF grammar from [02-policy-dsl.md#grammar](../specs/abac/02-policy-dsl.md#grammar) to participle annotations. Key AST nodes:\n\n- `Policy` — top-level: effect + target + optional conditions + semicolon\n- `Target` — principal clause + action clause + resource clause\n- `PrincipalClause` — `\"principal\"` optional `\"is\" type_name`\n- `ActionClause` — `\"action\"` optional `\"in\" list`\n- `ResourceClause` — `\"resource\"` optional `\"is\" type_name` or `\"==\" string_literal`\n- `ConditionBlock` — disjunction (top-level `||` chain)\n- `Disjunction` — conjunction chain with `||`\n- `Conjunction` — condition chain with `\u0026\u0026`\n- `Condition` — comparison, `like`, `in`, `has`, `containsAll`/`containsAny`, negation, parenthesized, `if-then-else`, bare boolean literal\n- `Expr` — attribute reference or literal\n- `AttrRef` — root (`principal`/`resource`/`action`/`env`) + dotted path\n- `Literal` — string, number, or boolean\n- `ListExpr` — `[` comma-separated literals `]`\n\nEnforce reserved word restrictions: `permit`, `forbid`, `when`, `principal`, `resource`, `action`, `env`, `is`, `in`, `has`, `like`, `true`, `false`, `if`, `then`, `else`, `containsAll`, `containsAny` MUST NOT appear as attribute names.\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Sonnet 4.5\n**Complexity:** Moderate — AST node type definitions with participle struct tags\n**Scope:** 1-2 files defining Policy, Target, Condition, Expression AST nodes\n**Criticality:** High — parser and compiler depend on these types\n**Reasoning:** Type definitions follow participle conventions. Grammar is fully specified in 02-policy-dsl.md. Requires attention to struct tag annotations but no architectural decisions. Sonnet handles spec-driven type definition with library conventions.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:45Z","created_by":"seanb4t","updated_at":"2026-02-12T23:08:18Z","closed_at":"2026-02-12T23:08:18Z","close_reason":"AST node types implemented with full grammar coverage, String() methods, reserved words. All tests pass.","labels":["abac","phase-7-2","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.4.1","depends_on_id":"holomush-5k1.3.1","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.4.1","depends_on_id":"holomush-5k1.3.9","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.4.1","depends_on_id":"holomush-5k1.4","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.4.2","title":"[ABAC Plan 7.2] T9: Build DSL parser","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.2.md` task section at line 63.\n\n**Spec References:** [02-policy-dsl.md#grammar](../specs/abac/02-policy-dsl.md#grammar), [02-policy-dsl.md](../specs/abac/02-policy-dsl.md), [07-migration-seeds.md#seed-policies](../specs/abac/07-migration-seeds.md#seed-policies)\n\n**Dependencies:**\n\n- Task 8 (Phase 7.2) — AST node types must exist before parser can produce them\n\n**Acceptance Criteria:**\n\n- [ ] All 18 seed policy DSL strings parse successfully — Note: Count may change after T22b gap analysis\n- [ ] All operators parse correctly: `==`, `!=`, `\u003e`, `\u003e=`, `\u003c`, `\u003c=`, `in`, `like`, `has`, `containsAll`, `containsAny`, `!`, `\u0026\u0026`, `||`, `if-then-else`\n- [ ] `resource == \"location:01XYZ\"` (exact match) parses correctly\n- [ ] Missing semicolon → descriptive error with position info\n- [ ] Unknown effect → descriptive error\n- [ ] Reserved word as attribute name → error\n- [ ] Nesting depth \u003e32 → error\n- [ ] Table-driven tests cover both valid and invalid policies\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Create: `internal/access/policy/dsl/parser.go`\n- Test: `internal/access/policy/dsl/parser_test.go`\n\nTable-driven tests MUST cover:\n\n**Valid policies (18 seed policies, count may change after T22b gap analysis):**\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Operator coverage:**\n\n- `==`, `!=`, `\u003e`, `\u003e=`, `\u003c`, `\u003c=` — comparisons\n- `in` — list membership and attribute list membership\n- `like` — glob pattern matching\n- `has` — attribute existence (simple and dotted paths)\n- `containsAll(list)`, `containsAny(list)` — list methods\n- `!` — negation\n- `\u0026\u0026`, `||` — boolean logic\n- `if-then-else` — conditional expression\n- `resource == \"location:01XYZ\"` — resource exact match\n\n**Invalid policies (expected errors):**\n\n- Missing semicolon\n- Unknown effect (not permit/forbid)\n- Bare boolean attribute (`principal.admin` without `== true`) → compile error\n- Reserved word as attribute name\n- Nesting depth \u003e32 → error\n- Malformed conditions\n- Entity reference using Type::\"value\" syntax ([02-policy-dsl.md#grammar](../specs/abac/02-policy-dsl.md#grammar) (was monolithic spec lines 993-999), requires parser MUST reject this form)\n\n[Code snippet omitted; see source plan section for full example.]\n\nRun: `task test`\nExpected: PASS for all valid policies, descriptive errors for invalid ones\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] Expected: PASS for all valid policies, descriptive errors for invalid ones\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Opus 4.6\n**Complexity:** High — full DSL parser using participle, must handle all grammar productions, 18 seed policies\n**Scope:** 2-3 files (parser, tests), complex grammar with principal/action/resource/condition clauses\n**Criticality:** Very high — all policy compilation depends on parser correctness\n**Reasoning:** Parser implementation requires deep understanding of participle library, careful grammar rule ordering, handling edge cases (string quoting, operator precedence, wildcard patterns). All 18 seed policies must parse correctly. Opus needed for complex parser design and edge case handling.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:45Z","created_by":"seanb4t","updated_at":"2026-02-12T23:20:10Z","closed_at":"2026-02-12T23:20:10Z","close_reason":"Parser implemented with full grammar support, all 18 seed policies parse, round-trip works, lint clean","labels":["abac","phase-7-2","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.4.2","depends_on_id":"holomush-5k1.4","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.4.2","depends_on_id":"holomush-5k1.4.1","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.4.3","title":"[ABAC Plan 7.2] T10: Add DSL fuzz tests","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.2.md` task section at line 182.\n\n**Spec References:** [08-testing-appendices.md#fuzz-testing](../specs/abac/08-testing-appendices.md#fuzz-testing), [02-policy-dsl.md#grammar](../specs/abac/02-policy-dsl.md#grammar)\n\n**Dependencies:**\n\n- Task 9 (Phase 7.2) — parser must exist before fuzz tests can exercise it\n\n**Acceptance Criteria:**\n\n- [ ] `FuzzParse` function defined with seed corpus containing all valid policy forms\n- [ ] Fuzz test runs for 60s without any panics: `go test -fuzz=FuzzParse -fuzztime=60s`\n- [ ] Parser never panics on arbitrary input (returns error instead)\n- [ ] Seed corpus includes at least: permit, forbid, all operator types, if-then-else\n\n**Files:**\n\n- Create: `internal/access/policy/dsl/parser_fuzz_test.go`\n\n[Code snippet omitted; see source plan section for full example.]\n\nRun: `go test -fuzz=FuzzParse -fuzztime=60s ./internal/access/policy/dsl/`\nExpected: No panics\n\n**Note:** Direct `go test` is intentional here — fuzz testing is not covered by `task test` runner.\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] Expected: No panics\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Haiku 4.5\n**Complexity:** Low — fuzz test setup with seed corpus from valid policy forms\n**Scope:** 1 file with FuzzParse function and corpus entries\n**Criticality:** Medium — improves parser robustness but is additive quality measure\n**Reasoning:** Fuzz test structure is boilerplate — define FuzzParse, add seed corpus entries from existing valid policies, verify no panics. No design decisions. Haiku handles straightforward test scaffolding.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:45Z","created_by":"seanb4t","updated_at":"2026-02-12T23:33:40Z","closed_at":"2026-02-12T23:33:40Z","close_reason":"Fuzz tests pass with 57 seed policies, 1M+ inputs, zero panics","labels":["abac","phase-7-2","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.4.3","depends_on_id":"holomush-5k1.4","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.4.3","depends_on_id":"holomush-5k1.4.2","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.4.4","title":"[ABAC Plan 7.2] T11: Build DSL condition evaluator","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.2.md` task section at line 247.\n\n**Spec References:** [02-policy-dsl.md](../specs/abac/02-policy-dsl.md), [04-resolution-evaluation.md#error-handling](../specs/abac/04-resolution-evaluation.md#error-handling), [04-resolution-evaluation.md#key-behaviors](../specs/abac/04-resolution-evaluation.md#key-behaviors), [08-testing-appendices.md#fuzz-testing](../specs/abac/08-testing-appendices.md#fuzz-testing), ADR 0010 (Cedar-Aligned Fail-Safe Type Semantics)\n\n**Dependencies:**\n\n- Task 8 (Phase 7.2) — AST node types required for condition evaluation\n- Task 5 (Phase 7.1) — core types (AttributeBags) required for evaluation context\n\n**Acceptance Criteria:**\n\n- [ ] Every operator from the spec has table-driven tests covering: valid inputs, missing attributes, type mismatches\n- [ ] Missing attribute → evaluates to `false` for ALL comparisons (Cedar-aligned fail-safe)\n- [ ] Type mismatch → evaluates to `false` (fail-safe)\n- [ ] Depth limit enforced at 32 levels; exceeding returns `false`\n- [ ] `like` operator uses glob matching (e.g., `location:*` matches `location:01XYZ`)\n- [ ] `like` operator : separator tested\n- [ ] Test cases for `location:*`, `stream:chat:*`\n- [ ] Edge cases for : in patterns vs : in values\n- [ ] Glob patterns MUST be limited to 100 characters\n- [ ] Glob patterns MUST NOT contain more than 5 wildcard characters (* or ? combined)\n- [ ] Compiler MUST reject patterns containing [, {, or **\n- [ ] Test steps include validation tests for each glob limit\n- [ ] `if-then-else` evaluates correctly when `has` condition is true/false\n- [ ] `containsAll` and `containsAny` work with list attributes\n- [ ] `FuzzEvaluateConditions` fuzz test runs for 60s without panics (per spec Testing Strategy)\n- [ ] Fuzz target uses random ASTs against random attribute bags\n- [ ] CI integration: 30s per build, extended nightly runs\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Create: `internal/access/policy/dsl/evaluator.go`\n- Test: `internal/access/policy/dsl/evaluator_test.go`\n\nTable-driven tests covering EVERY operator (spec requirement). Each operator needs test cases for:\n\n1. Valid inputs (happy path)\n2. Missing attributes → evaluates to `false` (fail-safe)\n3. Type mismatch → evaluates to `false` (fail-safe)\n\nOperators to cover:\n\n| Operator             | Example                                                            |\n| -------------------- | ------------------------------------------------------------------ |\n| `==`                 | `principal.role == \"admin\"`                                        |\n| `!=`                 | `principal.role != \"guest\"`                                        |\n| `\u003e`, `\u003e=`, `\u003c`, `\u003c=` | `principal.level \u003e 5`                                              |\n| `in` (list)          | `resource.name in [\"say\", \"pose\"]`                                 |\n| `in` (attr)          | `principal.role in resource.allowed_roles`                         |\n| `like`               | `resource.name like \"location:*\"`                                  |\n| `has`                | `principal has faction`, `principal has reputation.score`          |\n| `containsAll`        | `principal.flags.containsAll([\"vip\", \"beta\"])`                     |\n| `containsAny`        | `principal.flags.containsAny([\"vip\", \"beta\"])`                     |\n| `!`                  | `!(principal.role == \"banned\")`                                    |\n| `\u0026\u0026`                 | `a \u0026\u0026 b`                                                           |\n| `\\|\\|`               | `a \\|\\| b`                                                         |\n| `if-then-else`       | `if principal has faction then principal.faction == \"x\" else true` |\n\n[Code snippet omitted; see source plan section for full example.]\n\nKey behaviors:\n\n- **Attribute resolution:** `principal.faction` → lookup `\"faction\"` in `ctx.Bags.Subject`\n- **Dotted paths:** `principal.reputation.score` → lookup `\"reputation.score\"` (flat dot-delimited key)\n- **Missing attribute → `false`** for ALL comparisons (Cedar-aligned fail-safe)\n- **Depth limit:** enforce `MaxDepth` (default 32), return `false` if exceeded\n- **Glob matching:** use `github.com/gobwas/glob` for `like` operator, pre-compiled in `GlobCache`\n- **Glob colon separator (CRITICAL):** MUST use `glob.Compile(pattern, ':')` colon separator for namespace isolation. Without it, patterns like `resource:*` could match both `resource:foo` AND `resource_type:bar`, bypassing namespace boundaries. This is a security requirement for attribute isolation.\n- **Type assertions for numeric comparisons (Bug TD3):** `map[string]any` means providers returning `int` instead of `float64` will silently break numeric `\u003e`, `\u003e=`, `\u003c`, `\u003c=` comparisons. Implementation MUST either: (1) perform type coercion in evaluator (e.g., convert `int` → `float64`), or (2) provide a type-checked `SetAttribute` helper that normalizes numeric types at insertion time. Evaluator tests MUST cover mixed numeric types (int/float64) to ensure comparisons work correctly.\n\nRun: `task test`\nExpected: PASS\n\nCreate `internal/access/policy/dsl/evaluator_fuzz_test.go`:\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Note:** The fuzz test requires a `randomAttributeBag()` helper in `evaluator_fuzz_test.go`:\n\n[Code snippet omitted; see source plan section for full example.]\n\nRun: `go test -fuzz=FuzzEvaluateConditions -fuzztime=60s ./internal/access/policy/dsl/`\nExpected: No panics\n\n**Note:** CI runs fuzz tests for 60s per build. Nightly extended runs use `-fuzztime=10m`.\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] Expected: PASS\n- [ ] Expected: No panics\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Opus 4.6\n**Complexity:** High — expression evaluation engine handling boolean logic, comparisons, type coercion, missing attributes\n**Scope:** 2-3 files, evaluator must handle all AST node types with Cedar-aligned fail-safe semantics\n**Criticality:** Very high — security-critical evaluation logic, incorrect evaluation = authorization bypass\n**Reasoning:** Expression evaluation with Cedar-aligned missing attribute semantics (ADR 0010) requires careful handling of undefined/missing values, type mismatches, and boolean short-circuiting. Security-critical path where bugs mean authorization bypass. Opus needed for correctness-critical algorithmic implementation.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:45Z","created_by":"seanb4t","updated_at":"2026-02-12T23:33:40Z","closed_at":"2026-02-12T23:33:40Z","close_reason":"Evaluator implements all 14 operators with Cedar fail-safe semantics, 106 table-driven test cases pass","labels":["abac","phase-7-2","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.4.4","depends_on_id":"holomush-5k1.3.9","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.4.4","depends_on_id":"holomush-5k1.4","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.4.4","depends_on_id":"holomush-5k1.4.1","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.4.5","title":"[ABAC Plan 7.2] T12: Build PolicyCompiler","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.2.md` task section at line 413.\n\n**Spec References:** [02-policy-dsl.md#grammar](../specs/abac/02-policy-dsl.md#grammar) (compilation is part of the grammar section)\n\n**Dependencies:**\n\n- Task 9 (Phase 7.2) — DSL parser must exist for policy compilation\n- Task 11 (Phase 7.2) — condition evaluator must exist for compilation validation\n- Task 6 (Phase 7.1) — AttributeSchema extensions needed for schema validation\n\n**Risk Note:** `CompiledPolicy` embeds `*dsl.ConditionBlock` which contains participle-generated AST nodes. These may include unexported fields or types that don't serialize cleanly to JSON. Early validation of AST serialization round-tripping is required (write the serialization test first). If participle ASTs don't serialize cleanly, implement custom `MarshalJSON`/`UnmarshalJSON` methods or store a different representation in `compiled_ast` JSONB.\n\n**Acceptance Criteria:**\n\n- [ ] `Compile()` parses DSL text, validates against schema, returns `CompiledPolicy`\n- [ ] Valid DSL → `CompiledPolicy` with correct Effect, Target, Conditions\n- [ ] Invalid DSL → error with line/column info\n- [ ] Bare boolean attribute (`when { principal.admin }`) → compile error (not warning)\n- [ ] Unregistered `action.*` attribute → compile error\n- [ ] Unknown attribute → validation warning (not error)\n- [ ] Unreachable condition (`false \u0026\u0026 ...`) → warning\n- [ ] Always-true condition → warning\n- [ ] Glob patterns pre-compiled in `GlobCache`\n- [ ] Glob bracket/brace/globstar rejection: compiler MUST reject patterns containing `[`, `{`, or `**` at compile time (security requirement)\n- [ ] `CompiledPolicy` includes `grammar_version` field for future DSL evolution tracking (per ADR #110)\n- [ ] `compiled_ast` JSONB serialization round-trips correctly (participle AST nodes serialize/deserialize without data loss)\n- [ ] Serialization test written FIRST to validate participle AST JSON compatibility\n- [ ] PolicyCompiler MUST be safe for concurrent use (immutable AttributeSchema ensures safety)\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Create: `internal/access/policy/compiler.go`\n- Test: `internal/access/policy/compiler_test.go`\n\n- Compile valid DSL → returns CompiledPolicy with correct Effect, Target, Conditions\n- Compile invalid DSL → returns error with line/column info\n- Compile bare boolean attribute (`when { principal.admin }`) → returns compile error (not warning)\n- Compile unknown attribute → returns validation warning (not error)\n- Compile unreachable condition (`false \u0026\u0026 ...`) → returns warning\n- Compile always-true condition → returns warning\n- Compile unregistered `action.*` attribute → returns compile error\n- Verify glob patterns are pre-compiled in `GlobCache`\n- Verify `compiled_ast` JSONB serialization round-trips correctly\n\n[Code snippet omitted; see source plan section for full example.]\n\nRun: `task test`\nExpected: PASS\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n\n\u003e **[Back to Overview](./2026-02-06-full-abac-implementation.md)** | **[Previous: Phase 7.1](./2026-02-06-full-abac-phase-7.1.md)** | **[Next: Phase 7.3](./2026-02-06-full-abac-phase-7.3.md)**\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] Expected: PASS\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Opus 4.6\n**Complexity:** High — compiler that validates DSL, resolves schema references, produces CompiledPolicy\n**Scope:** 2-3 files, schema validation + compilation pipeline + error reporting\n**Criticality:** Very high — compilation errors must be caught here, not at evaluation time\n**Reasoning:** PolicyCompiler integrates parser output with AttributeSchema validation, produces optimized CompiledPolicy structures. Must validate attribute references against registered schemas, detect type mismatches at compile time, and produce clear error messages. Multi-step pipeline with security implications. Opus needed.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:45Z","created_by":"seanb4t","updated_at":"2026-02-12T23:42:12Z","closed_at":"2026-02-12T23:42:12Z","close_reason":"Compiler implemented with schema validation, glob pre-compilation, condition warnings, 20 test functions (28 subtests), lint clean","labels":["abac","phase-7-2","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.4.5","depends_on_id":"holomush-5k1.3.10","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.4.5","depends_on_id":"holomush-5k1.4","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.4.5","depends_on_id":"holomush-5k1.4.4","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.40","title":"Plan: Task 5 missing char: prefix rejection criterion","description":"## Issue\nTask 5 (ParseEntityRef) defines character: as the valid prefix but has no acceptance criterion ensuring the legacy char: prefix is explicitly rejected. If old-format strings slip through, they get INVALID_ENTITY_REF errors in production without a clear migration path.\n\n## Decision\nAdd acceptance criterion that char:01ABC input MUST return INVALID_ENTITY_REF error.\n\n## Files\n- Modify: `docs/plans/2026-02-06-full-abac-implementation.md` (Task 5 acceptance criteria)\n\n## Dependencies\n- Conceptual overlap with Task 30 (legacy prefix removal)","acceptance_criteria":"- [ ] Acceptance criterion added: char:01ABC returns INVALID_ENTITY_REF error","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T02:04:59Z","created_by":"seanb4t","updated_at":"2026-02-07T02:58:54Z","closed_at":"2026-02-07T02:58:54Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.40","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.400","title":"SPEC-C2: Document char: to character: prefix migration in T28","description":"## Issue\nExisting code uses `char:` subject prefix. Spec requires `character:`. No migration step explicitly states WHEN call sites switch from `char:` to `character:`. Phase 7.3/T28 migrates call sites to `Evaluate()` (expecting `character:`), but Phase 7.6 removes `char:` — creating a potential window where authorization fails.\n\n## Decision\nPer ADR #13 and #36, there is no adapter — all call sites switch directly to `character:` prefix when migrating to `Evaluate()` in T28. Add explicit acceptance criterion to T28 requiring all call sites to use `character:` prefix constants (`SubjectCharacter`). The engine MUST reject `char:` prefix with a clear error (already specified in ADR #13).\n\n## Acceptance Criteria\n- [ ] T28 acceptance criteria include: 'All migrated call sites MUST use SubjectCharacter constant, not char: prefix'\n- [ ] T28 acceptance criteria include: 'Static analysis check for remaining char: prefix usage'\n- [ ] Migration section in 07-migration-seeds.md references ADR #13 prefix normalization\n- [ ] `task fmt` passes\n\n## Dependencies\n- File: docs/plans/2026-02-06-full-abac-phase-7.6.md (T28)\n- File: docs/specs/abac/07-migration-seeds.md\n- Conceptual: depends on T6 (prefix constants)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T13:51:19Z","created_by":"seanb4t","updated_at":"2026-02-09T14:26:21Z","closed_at":"2026-02-09T14:26:21Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.400","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.401","title":"SPEC-C3: Fix audit mode off to also log denials (S3 compliance)","description":"## Issue\nSecurity requirement S3 says denial records MUST be logged regardless of audit mode. But the audit mode table says `off` logs only system bypasses, and the evaluation algorithm confirms `off` skips denials. These are contradictory.\n\n## Decision\nChange `off` mode to also log denials (deny + default_deny). This makes `off` effectively suppress only allow records. Update:\n1. Audit mode table: `off` logs 'System bypasses + denials'\n2. Evaluation algorithm step 7: log denials in ALL modes\n3. S3 text: confirm compliance\n4. Typical use case for `off`: 'Development, performance (allows not logged)'\n\nThis resolves the contradiction while maintaining the security guarantee. The name `off` is retained since it means 'detailed audit logging off' (no allow records), not 'all audit logging off'.\n\n## Acceptance Criteria\n- [ ] Audit mode table updated: `off` logs system bypasses AND denials\n- [ ] Evaluation algorithm step 7 updated: denials logged in ALL modes (off, denials_only, all)\n- [ ] S3 requirement satisfied without contradiction\n- [ ] PLAN-I1 (audit mode off + deny dropped) also resolved by this change\n- [ ] `task fmt` passes\n\n## Dependencies\n- File: docs/specs/abac/05-storage-audit.md\n- File: docs/specs/abac/04-resolution-evaluation.md\n- Conceptual: also resolves PLAN-I1","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T13:51:19Z","created_by":"seanb4t","updated_at":"2026-02-09T14:27:51Z","closed_at":"2026-02-09T14:27:51Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.401","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.402","title":"PLAN-C2: Add missing T16a dependency edge to T23","description":"## Issue\nSeed policies `seed:player-stream-emit` and `seed:player-basic-commands` reference stream and command attributes (resource.name, resource.location). These attributes are provided by StreamProvider and CommandProvider (T16a). No dependency edge exists from T16a to T23 (bootstrap) or T28 (migration).\n\nWithout this dependency, T23 could start before simple providers exist, causing seed policy evaluation to fail (missing stream/command attributes → conditions evaluate to false → denied).\n\n## Decision\nAdd T16a → T23 dependency edge in the master plan dependency diagram and cross-phase gate table.\n\n## Acceptance Criteria\n- [ ] Mermaid dependency diagram includes T16a → T23 edge\n- [ ] Cross-phase gate summary table includes T16a → T23 entry\n- [ ] Phase 7.4 prerequisites mention T16a\n- [ ] `task fmt` passes\n\n## Dependencies\n- File: docs/plans/2026-02-06-full-abac-implementation.md\n- Conceptual: related to SPEC-I1 (exit/scene providers)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T13:51:21Z","created_by":"seanb4t","updated_at":"2026-02-09T14:30:02Z","closed_at":"2026-02-09T14:30:02Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.402","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.403","title":"SPEC-I6: Remove seed:property-system-forbid to fix admin lockout","description":"## Issue\n`seed:property-system-forbid` is a forbid policy denying ALL characters (including admins) access to system properties. Under deny-overrides conflict resolution, `seed:admin-full-access` (permit) CANNOT override a forbid. This locks admins out of system properties entirely.\n\n## Decision\nRemove the `seed:property-system-forbid` policy. Rely on default-deny instead: since no permit policy grants non-admin access to system properties, they remain inaccessible. Admins get access via `seed:admin-full-access` (permit matches all resources). The forbid comment about 'audit attribution' is unnecessary — default-deny is already audited with `effect=default_deny`.\n\n## Acceptance Criteria\n- [ ] `seed:property-system-forbid` policy removed from seed policy list in 07-migration-seeds.md\n- [ ] Corresponding entry removed from 03-property-model.md if referenced\n- [ ] Comment added explaining why default-deny is sufficient for system properties\n- [ ] No other seed policies have similar admin-blocking forbid patterns\n- [ ] `task fmt` passes\n\n## Dependencies\n- File: docs/specs/abac/07-migration-seeds.md\n- File: docs/specs/abac/03-property-model.md (if referenced)\n- Conceptual: related to seed policy design, deny-overrides resolution","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T13:51:30Z","created_by":"seanb4t","updated_at":"2026-02-09T14:24:00Z","closed_at":"2026-02-09T14:24:00Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.403","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.404","title":"SPEC-I1: Add ExitProvider and SceneProvider stubs to T16a","description":"## Issue\n`exit:` resources are used in 2 production call sites and `scene:` is a defined resource prefix, but no attribute providers exist for them. During T28 migration, call sites checking exit/scene access need providers to resolve attributes for policy evaluation.\n\n## Decision\nAdd simple stub providers (ExitProvider, SceneProvider) in T16a scope. Minimal implementation returning only `{type: 'exit', id: '...'}` / `{type: 'scene', id: '...'}` — enough for target matching (`resource is exit`). Full attribute schemas deferred to backlog. Also add seed policies for exits using target matching only.\n\nBacklog tasks created for:\n- Full ExitProvider with exit attributes (direction, destination, lock status)\n- Full SceneProvider with scene attributes (privacy, participants)\n- TODO comments added in spec package structure section\n\n## Acceptance Criteria\n- [ ] ExitProvider stub added to T16a acceptance criteria and package structure\n- [ ] SceneProvider stub added to T16a acceptance criteria and package structure\n- [ ] Seed policies for exit resources added (e.g., seed:player-exit-use)\n- [ ] Deferred features table updated to reference stubs\n- [ ] TODO comments added in spec for full provider implementations\n- [ ] Backlog beads created for full implementations\n- [ ] `task fmt` passes\n\n## Dependencies\n- File: docs/specs/abac/01-core-types.md (package structure)\n- File: docs/specs/abac/07-migration-seeds.md (seed policies)\n- File: docs/plans/2026-02-06-full-abac-phase-7.3.md (T16a)\n- Conceptual: related to PLAN-C2 (T16a dependencies)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T13:51:40Z","created_by":"seanb4t","updated_at":"2026-02-09T14:35:00Z","closed_at":"2026-02-09T14:35:00Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.404","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.405","title":"SPEC-I2: Normalize call site count to 28 across all docs","description":"## Issue\nCall site count is inconsistent: overview says '~30', migration spec says '~28', ADRs #5/#36/#65 use varying numbers. The master plan has the precise count: 28 production call sites (24 in world/service, 3 in command/, 1 in plugin/hostfunc/commands).\n\n## Decision\nNormalize to '28 production call sites' everywhere, with the detailed breakdown from the master plan. Use '~28' only when the exact count may change during implementation.\n\n## Acceptance Criteria\n- [ ] Overview (00-overview.md) updated from '~30' to '~28'\n- [ ] Migration spec (07-migration-seeds.md) consistent\n- [ ] Referenced ADRs updated if they contain call site counts\n- [ ] `task fmt` passes\n\n## Dependencies\n- File: docs/specs/abac/00-overview.md\n- File: docs/specs/abac/07-migration-seeds.md\n- Conceptual: overlaps with SPEC-C1 (call site inventory)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T13:51:47Z","created_by":"seanb4t","updated_at":"2026-02-09T14:32:04Z","closed_at":"2026-02-09T14:32:04Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.405","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.406","title":"SPEC-I3: Document wildcard resource mapping for ABAC migration","description":"## Issue\nCurrent static roles use wildcard resources (`location:*`, `exit:*`, `object:*`). The ABAC migration doesn't document how these map to the new engine. Wildcards like `location:*` match all locations, which in ABAC maps to `resource is location` (target-level type matching).\n\n## Decision\nAdd a migration mapping section to 07-migration-seeds.md documenting the wildcard-to-ABAC equivalences. No code changes needed — the mapping is purely conceptual.\n\n## Acceptance Criteria\n- [ ] Migration section includes wildcard → ABAC mapping table\n- [ ] Each wildcard pattern has corresponding seed policy reference\n- [ ] `task fmt` passes\n\n## Dependencies\n- File: docs/specs/abac/07-migration-seeds.md","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T13:51:53Z","created_by":"seanb4t","updated_at":"2026-02-09T14:36:02Z","closed_at":"2026-02-09T14:36:02Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.406","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.407","title":"SPEC-I4: Reconcile circuit breaker designs in spec","description":"## Issue\nThe Error Handling section (04-resolution-evaluation.md, ~line 267) describes a simple consecutive-error circuit breaker (threshold: 10, open: 30s). The Circuit Breaker Summary table (~line 552) describes a budget-utilization-based breaker. These appear to be the same component described differently.\n\n## Decision\nThe Circuit Breaker Summary table is the authoritative design. Update the Error Handling section to defer to the summary table instead of providing its own parameters, or remove the duplicate parameters. The Error Handling section should describe the concept; the Summary table provides the specifics.\n\n## Acceptance Criteria\n- [ ] Error Handling section updated to reference Circuit Breaker Summary\n- [ ] No conflicting parameter values between sections\n- [ ] `task fmt` passes\n\n## Dependencies\n- File: docs/specs/abac/04-resolution-evaluation.md","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T13:51:59Z","created_by":"seanb4t","updated_at":"2026-02-09T14:36:44Z","closed_at":"2026-02-09T14:36:44Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.407","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.408","title":"SPEC-I5: Document two-phase Decision construction pattern","description":"## Issue\n`NewDecision()` constructor only sets effect, reason, and policyID. The `Policies` and `Attributes` fields that the evaluator and audit logger depend on are set separately after construction. This two-phase pattern isn't documented and could lead to bugs if callers forget to populate the remaining fields.\n\n## Decision\nDocument the two-phase construction pattern in the Decision type documentation. Add a code comment explaining that the engine MUST set Policies and Attributes after calling NewDecision(). Consider adding a WithPolicies/WithAttributes builder method in implementation.\n\n## Acceptance Criteria\n- [ ] Decision type documentation explains two-phase construction\n- [ ] Code comment added to NewDecision() noting Policies/Attributes must be set separately\n- [ ] `task fmt` passes\n\n## Dependencies\n- File: docs/specs/abac/01-core-types.md (Decision section)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T13:52:01Z","created_by":"seanb4t","updated_at":"2026-02-09T14:37:42Z","closed_at":"2026-02-09T14:37:42Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.408","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.409","title":"PLAN-I2: Fix T18 code sketch to use pgx.Connect for dedicated conn","description":"## Issue\nTask 18 code sketch uses `pool.Acquire()` then `conn.Release()` and `conn.Conn()` — these are `*pgxpool.Conn` methods. But the spec requires a dedicated persistent connection OUTSIDE the pool for LISTEN/NOTIFY. Should use `pgx.Connect()` directly.\n\n## Decision\nFix the T18 code sketch to use `pgx.Connect(ctx, connString)` for the dedicated LISTEN/NOTIFY connection instead of acquiring from the pool.\n\n## Acceptance Criteria\n- [ ] T18 code sketch uses `pgx.Connect()` not `pool.Acquire()`\n- [ ] No references to `conn.Release()` or `conn.Conn()` in LISTEN/NOTIFY code\n- [ ] Comment explains why dedicated connection is required\n- [ ] `task fmt` passes\n\n## Dependencies\n- File: docs/plans/2026-02-06-full-abac-phase-7.3.md (Task 18)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T13:52:09Z","created_by":"seanb4t","updated_at":"2026-02-09T14:38:15Z","closed_at":"2026-02-09T14:38:15Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.409","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.41","title":"Plan: Missing degraded_mode and audit_failures metrics","description":"## Issue\nTask 19 (Prometheus metrics) omits two MUST-have metrics from the spec:\n- abac_degraded_mode gauge (0=normal, 1=degraded) — spec line 1618\n- abac_audit_failures_total{reason} counter — spec line 2261\n\nAlso: acceptance criteria line 1705 says \"counter\" for abac_unregistered_attributes_total but implementation is CounterVec with namespace/key labels.\n\n## Decision\nAdd both missing metrics. Fix unregistered_attributes description to mention labels.\n\n## Files\n- Modify: `docs/plans/2026-02-06-full-abac-implementation.md` (Task 19 code and acceptance criteria)\n\n## Dependencies\n- Conceptual overlap with missing requirements bead (degraded mode feature)","acceptance_criteria":"- [ ] abac_degraded_mode gauge added to Task 19\n- [ ] abac_audit_failures_total counter with reason label added to Task 19\n- [ ] unregistered_attributes acceptance criterion mentions namespace/key labels","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T02:05:09Z","created_by":"seanb4t","updated_at":"2026-02-07T03:00:12Z","closed_at":"2026-02-07T03:00:12Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.41","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.410","title":"PLAN-I4: Fix T28.5 test template @shutdown prefix","description":"## Issue\nT28.5 migration equivalence test template uses `command:@shutdown` but T21a (Remove @-prefix from permissions) runs before T28.5 (T21a → T22 → T23 → T28 → T28.5). By the time T28.5 executes, @-prefixes are already removed.\n\n## Decision\nUpdate the T28.5 test template to use `command:shutdown` (without @-prefix).\n\n## Acceptance Criteria\n- [ ] T28.5 test template uses `command:shutdown` not `command:@shutdown`\n- [ ] No other test templates reference @-prefixed commands\n- [ ] `task fmt` passes\n\n## Dependencies\n- File: docs/plans/2026-02-06-full-abac-phase-7.6.md (Task 28.5)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T13:52:14Z","created_by":"seanb4t","updated_at":"2026-02-09T14:38:57Z","closed_at":"2026-02-09T14:38:57Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.410","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.411","title":"ADR-I1: Standardize audit metric names across spec and ADRs","description":"## Issue\nInconsistent audit metric names appear across documents:\n- `abac_audit_channel_full_total` (one location)\n- `abac_audit_write_failures_total` (another location)\n- `abac_audit_failures_total` (05-storage-audit.md)\n\nThese may refer to different metrics or may be inconsistent naming for the same concept.\n\n## Decision\nAudit and standardize all metric names. Use consistent naming convention: `abac_audit_\u003caspect\u003e_total` for counters. Document the canonical metric names in a single table.\n\n## Acceptance Criteria\n- [ ] All audit metric names consistent across spec sections and ADRs\n- [ ] Canonical metric name table exists (in 05-storage-audit.md or 08-testing-appendices.md)\n- [ ] `task fmt` passes\n\n## Dependencies\n- File: docs/specs/abac/05-storage-audit.md\n- File: docs/specs/decisions/epic7/ (affected ADRs)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T13:52:19Z","created_by":"seanb4t","updated_at":"2026-02-09T14:41:56Z","closed_at":"2026-02-09T14:41:56Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.411","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.412","title":"ADR-I2: Add supersession references from ADR #52 to #53 and #66","description":"## Issue\nADR #52 → #53 → #66 form a refinement chain but #52 doesn't reference the later ADRs as updates. This makes it hard to follow the decision evolution.\n\n## Decision\nAdd supersession notes to ADR #52 referencing #53 and #66. Also covers suggestion ADR-S1.\n\n## Acceptance Criteria\n- [ ] ADR #52 includes 'Superseded by' or 'Updated by' references to #53 and #66\n- [ ] ADR #53 includes reference to #66 if not already present\n- [ ] `task fmt` passes\n\n## Dependencies\n- File: docs/specs/decisions/epic7/ (ADRs #52, #53, #66)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T13:52:24Z","created_by":"seanb4t","updated_at":"2026-02-09T14:43:14Z","closed_at":"2026-02-09T14:43:14Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.412","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.413","title":"SPEC-S1: Document whether action.name is registered as core attribute","description":"## Issue\nThe action bag is constructed by the engine from AccessRequest.Action, but it's not clear if action.name is registered in the AttributeSchema as a core attribute. If not registered, PolicyCompiler would reject policies referencing action.name.\n\n## Decision\nClarify in spec that action.name MUST be registered in the schema as a core attribute (type: string).\n\n## Acceptance Criteria\n- [ ] Spec clarifies action.name registration status\n- [ ] task fmt passes","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T13:52:52Z","created_by":"seanb4t","updated_at":"2026-02-09T14:43:53Z","closed_at":"2026-02-09T14:43:53Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.413","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.414","title":"SPEC-S3: Clarify string literal grammar includes colon characters","description":"## Issue\nDSL string literals need to support colon characters for resource strings like 'location:01XYZ' and stream names like 'location:*'. The grammar section should explicitly state that colons are valid in string literals.\n\n## Decision\nAdd note to grammar section clarifying string literal character set includes colons.\n\n## Acceptance Criteria\n- [ ] Grammar section notes colon support in string literals\n- [ ] task fmt passes\n\n## Dependencies\n- File: docs/specs/abac/02-policy-dsl.md","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T13:52:57Z","created_by":"seanb4t","updated_at":"2026-02-09T14:44:28Z","closed_at":"2026-02-09T14:44:28Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.414","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.415","title":"SPEC-S4: Document admin lockout risk when CharacterProvider fails","description":"## Issue\nIf CharacterProvider fails, admin role attribute is missing, and seed:admin-full-access won't match (condition fails). This locks admins out during provider failures. Should be documented as a known risk with mitigation.\n\n## Decision\nAdd documentation noting this risk. Mitigation: system subject bypass and CLI recovery remain available during provider failures.\n\n## Acceptance Criteria\n- [ ] Known Limitations section documents CharacterProvider failure → admin lockout risk\n- [ ] Mitigation documented (system subject bypass, CLI access)\n- [ ] task fmt passes\n\n## Dependencies\n- File: docs/specs/abac/04-resolution-evaluation.md","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T13:53:02Z","created_by":"seanb4t","updated_at":"2026-02-09T14:45:51Z","closed_at":"2026-02-09T14:45:51Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.415","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.416","title":"SPEC-S5: Clarify provider_errors duration vs top-level duration_us","description":"## Issue\nAudit log has both provider_errors[].duration_us (per-provider) and top-level duration_us (total evaluation). Relationship between these values isn't documented.\n\n## Decision\nAdd clarifying note: duration_us is total Evaluate() wall time; provider_errors[].duration_us is individual provider execution time. Sum of provider durations may be less than total due to overhead.\n\n## Acceptance Criteria\n- [ ] Relationship between duration fields documented in audit log schema section\n- [ ] task fmt passes\n\n## Dependencies\n- File: docs/specs/abac/05-storage-audit.md","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T13:53:06Z","created_by":"seanb4t","updated_at":"2026-02-09T14:45:51Z","closed_at":"2026-02-09T14:45:51Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.416","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.417","title":"PLAN-S1: Consider splitting T17 (XL) into sub-tasks","description":"## Issue\nT17 (AccessPolicyEngine) is XL complexity — the largest task. Consider splitting into sub-tasks for manageability (e.g., system bypass + session resolution, target matching, condition evaluation, deny-overrides combination).\n\n## Decision\nDocument as suggestion for implementer to consider during T17 planning. Not mandatory.\n\n## Acceptance Criteria\n- [ ] T17 description includes note about optional sub-task splitting\n- [ ] task fmt passes\n\n## Dependencies\n- File: docs/plans/2026-02-06-full-abac-phase-7.3.md","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T13:53:06Z","created_by":"seanb4t","updated_at":"2026-02-09T14:45:51Z","closed_at":"2026-02-09T14:45:51Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.417","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.418","title":"PLAN-S2: Add explicit T5 to T13 dependency","description":"## Issue\nT13 (Attribute provider interface) uses types defined in T5 (Core types). While T5 is in Phase 7.1 and likely completes before T13, the dependency edge is not explicit in the diagram.\n\n## Decision\nAdd T5 → T13 dependency edge for completeness.\n\n## Acceptance Criteria\n- [ ] Dependency diagram includes T5 → T13 edge\n- [ ] task fmt passes\n\n## Dependencies\n- File: docs/plans/2026-02-06-full-abac-implementation.md","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T13:53:11Z","created_by":"seanb4t","updated_at":"2026-02-09T14:47:00Z","closed_at":"2026-02-09T14:47:00Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.418","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.419","title":"PLAN-S3: Fix T4a description (ALTER TABLE vs new repository)","description":"## Issue\nT4a description says 'ALTER TABLE' but actually creates a new repository and table (entity_properties). Minor description inaccuracy.\n\n## Decision\nFix the T4a description to accurately describe what it does.\n\n## Acceptance Criteria\n- [ ] T4a description corrected\n- [ ] task fmt passes\n\n## Dependencies\n- File: docs/plans/2026-02-06-full-abac-phase-7.1.md","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T13:53:16Z","created_by":"seanb4t","updated_at":"2026-02-09T14:47:00Z","closed_at":"2026-02-09T14:47:00Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.419","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.42","title":"Plan: PropertyRepository missing DeleteByParent method","description":"## Issue\nTask 25 PropertyRepository interface (lines 2198-2204) defines Create, Get, ListByParent, Update, Delete but omits DeleteByParent(ctx, parentType, parentID) which the spec requires (lines 2075-2081) for cascade deletion when parent entities are deleted.\n\n## Decision\nAdd DeleteByParent to the interface definition in Task 25.\n\n## Files\n- Modify: `docs/plans/2026-02-06-full-abac-implementation.md` (Task 25 interface and acceptance criteria)\n\n## Dependencies\n- Conceptual overlap with missing requirements bead (property lifecycle on parent deletion)","acceptance_criteria":"- [ ] DeleteByParent(ctx, parentType, parentID) added to PropertyRepository interface\n- [ ] Acceptance criterion added for cascade deletion support","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T02:05:13Z","created_by":"seanb4t","updated_at":"2026-02-07T03:01:29Z","closed_at":"2026-02-07T03:01:29Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.42","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.420","title":"CONFIG-SG1: Clarify CI update comment step 3","description":"## Issue\nCI update comment step 3 is slightly misleading — implies manual hash update when the process is automated.\n\n## Decision\nClarify the wording in the CI configuration comment.\n\n## Acceptance Criteria\n- [ ] CI comment clarified\n- [ ] task fmt passes\n\n## Dependencies\n- File: .github/workflows/ (CI config files)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T13:53:18Z","created_by":"seanb4t","updated_at":"2026-02-09T14:49:05Z","closed_at":"2026-02-09T14:49:05Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.420","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.421","title":"PLAN-S4: Consider making T21a an independent pre-ABAC PR","description":"## Issue\nT21a (@-prefix removal from command names) is a codebase-wide rename that could be done independently before ABAC work starts. Making it a separate PR reduces the ABAC changeset.\n\n## Decision\nDocument as suggestion. T21a can be submitted as an independent PR before or during Phase 7.3.\n\n## Acceptance Criteria\n- [ ] T21a description notes it can be an independent PR\n- [ ] task fmt passes\n\n## Dependencies\n- File: docs/plans/2026-02-06-full-abac-phase-7.3.md","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T13:53:22Z","created_by":"seanb4t","updated_at":"2026-02-09T14:49:05Z","closed_at":"2026-02-09T14:49:05Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.421","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.422","title":"Backlog: Full ExitProvider with exit attributes","description":"## Summary\nImplement full ExitProvider with complete exit attribute schema including direction, destination location, lock status, and bidirectionality. Currently only a stub provider exists (returning type and id only).\n\n## Context\nSPEC-I1 review finding identified that exit: resources are used in production but had no provider. A stub was added in T16a scope. This task implements the full provider.\n\n## Acceptance Criteria\n- [ ] ExitProvider resolves: type, id, name, source_location, destination_location, direction, locked, bidirectional\n- [ ] Schema registered in AttributeSchema\n- [ ] Exit attributes documented in core attribute schema table\n- [ ] Seed policies updated to use exit attributes where beneficial\n- [ ] Unit tests with table-driven test cases\n- [ ] Integration test for exit-based access control\n- [ ] task test passes\n\n## Dependencies\n- Depends on: T16a (stub provider), T3/T4a (entity_properties for lock metadata)","notes":"Deferred from current design-phase execution. Keep open and schedule for post-design implementation wave.","status":"open","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T13:53:23Z","created_by":"seanb4t","updated_at":"2026-02-11T01:22:50Z","labels":["deferred"],"dependencies":[{"issue_id":"holomush-5k1.422","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.422","depends_on_id":"holomush-5k1.8","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.423","title":"PLAN-S5: Move pg_notify acceptance criterion from T25 to T7 or T18","description":"## Issue\nT25 (Lock parser/compiler) includes a pg_notify acceptance criterion that logically belongs in T7 (PolicyStore) or T18 (Policy cache). pg_notify is core store/cache infrastructure, not lock-specific.\n\n## Decision\nMove the pg_notify criterion to T7 or T18 where it's more appropriate.\n\n## Acceptance Criteria\n- [ ] pg_notify criterion moved to appropriate task\n- [ ] task fmt passes\n\n## Dependencies\n- File: docs/plans/2026-02-06-full-abac-phase-7.5.md (T25)\n- File: docs/plans/2026-02-06-full-abac-phase-7.1.md or phase-7.3.md","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T13:53:27Z","created_by":"seanb4t","updated_at":"2026-02-09T14:49:05Z","closed_at":"2026-02-09T14:49:05Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.423","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.424","title":"Backlog: Full SceneProvider with scene attributes","description":"## Summary\nImplement full SceneProvider with complete scene attribute schema including privacy level, participant list, creator, and active status. Currently only a stub provider exists (returning type and id only).\n\n## Context\nSPEC-I1 review finding identified that scene: is a defined resource prefix but had no provider. A stub was added in T16a scope. This task implements the full provider.\n\n## Acceptance Criteria\n- [ ] SceneProvider resolves: type, id, name, privacy, creator, participants (list), active, location\n- [ ] Schema registered in AttributeSchema\n- [ ] Scene attributes documented in core attribute schema table\n- [ ] Seed policies for scene access added (e.g., seed:scene-participant-access)\n- [ ] Unit tests with table-driven test cases\n- [ ] Integration test for scene-based access control\n- [ ] task test passes\n\n## Dependencies\n- Depends on: T16a (stub provider), scene model implementation","notes":"Deferred from current design-phase execution. Keep open and schedule for post-design implementation wave.","status":"open","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T13:53:28Z","created_by":"seanb4t","updated_at":"2026-02-11T01:22:50Z","labels":["deferred"],"dependencies":[{"issue_id":"holomush-5k1.424","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.424","depends_on_id":"holomush-5k1.8","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.425","title":"Remove seed:property-system-forbid from Task 22 (contradicts spec)","description":"Task 22 in Phase 7.4 plan includes seed:property-system-forbid which directly contradicts spec 07-migration-seeds.md L87-96. The spec says: rely on default-deny instead of an explicit forbid because under deny-overrides conflict resolution, a forbid would block even seed:admin-full-access (permit), locking admins out permanently. The plan still has this policy in SeedPolicies().","acceptance_criteria":"- [ ] seed:property-system-forbid removed from SeedPolicies() in phase 7.4 plan\n- [ ] Seed policy count updated from '16 permit, 2 forbid' to '17 permit, 1 forbid'\n- [ ] Line 172 note updated to match new count\n- [ ] ADR 087 cross-referenced","notes":"Files: docs/plans/2026-02-06-full-abac-phase-7.4.md","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T17:03:56Z","created_by":"seanb4t","updated_at":"2026-02-09T18:41:19Z","closed_at":"2026-02-09T18:41:19Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.425","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.426","title":"Add missing seed:player-exit-use to Task 22","description":"Spec 07-migration-seeds.md L116-119 defines seed:player-exit-use (permit characters to use exits) but it is missing from Task 22 in the Phase 7.4 plan. Without this policy, character navigation via exits breaks post-migration since default-deny would block all exit usage.","acceptance_criteria":"- [ ] seed:player-exit-use permit policy added to SeedPolicies() in phase 7.4 plan\n- [ ] DSL: permit(principal is character, action in [\"use\"], resource is exit)\n- [ ] Seed policy total count remains 18 (17 permit + 1 forbid after C1 fix)","notes":"Files: docs/plans/2026-02-06-full-abac-phase-7.4.md","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T17:04:01Z","created_by":"seanb4t","updated_at":"2026-02-09T18:41:19Z","closed_at":"2026-02-09T18:41:19Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.426","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.427","title":"Sync Task 9 parser test corpus with corrected Task 22 seed list","description":"Task 9 parser test corpus in Phase 7.2 plan inherits both seed policy errors: includes seed:property-system-forbid (should be removed per C1) and is missing seed:player-exit-use (should be added per C2). The corpus currently has 17 policies but the wrong set. Must sync with the corrected Task 22 seed policy list.","acceptance_criteria":"- [ ] seed:property-system-forbid line removed from parser test corpus\n- [ ] seed:player-exit-use permit policy added to parser test corpus\n- [ ] Total corpus count matches corrected Task 22 (18 seed policies)\n- [ ] Parser test corpus comment updated to reflect correct composition","notes":"Files: docs/plans/2026-02-06-full-abac-phase-7.2.md\nDepends on: C1 (remove forbid) and C2 (add exit-use) completing first","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T17:04:06Z","created_by":"seanb4t","updated_at":"2026-02-09T18:42:46Z","closed_at":"2026-02-09T18:42:46Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.427","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.427","depends_on_id":"holomush-5k1.425","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.427","depends_on_id":"holomush-5k1.426","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.428","title":"Add ADRs 86-88 to Decision Index README","description":"Decision Index in docs/specs/decisions/epic7/README.md ends at ADR 85 but files 086, 087, 088 exist on disk and are actively cross-referenced from spec sections. The three missing entries are: ADR 086 (Audit Off Mode Logs Denials, general), ADR 087 (Remove Seed Property System Forbid, phase-7.4), ADR 088 (Exit Scene Provider Stubs, phase-7.3).","acceptance_criteria":"- [ ] Row added for ADR 086: Audit Off Mode Logs Denials (general/)\n- [ ] Row added for ADR 087: Remove Seed Property System Forbid (phase-7.4/)\n- [ ] Row added for ADR 088: Exit Scene Provider Stubs (phase-7.3/)\n- [ ] Table formatting consistent with existing rows\n- [ ] Total decision count in README header updated","notes":"Files: docs/specs/decisions/epic7/README.md\nFile overlap with I5 (ADR 57 numbering range)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T17:04:14Z","created_by":"seanb4t","updated_at":"2026-02-09T18:41:19Z","closed_at":"2026-02-09T18:41:19Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.428","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.429","title":"Fix broken 4-backtick fence in 02-policy-dsl.md","description":"Line 86 of docs/specs/abac/02-policy-dsl.md uses a 4-backtick fence ('''') which causes approximately 35 lines of grammar spec explanation (lines 88-121) to render as a code block instead of prose. The fence was likely intended to close a previous code block but the extra backtick breaks rendering.","acceptance_criteria":"- [ ] Fence delimiter at line 86 corrected (4 backticks to 3)\n- [ ] Grammar explanation lines 88-121 render as prose, not code\n- [ ] Markdown renders correctly in GitHub preview\n- [ ] No other fence mismatches introduced","notes":"Files: docs/specs/abac/02-policy-dsl.md","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T17:04:19Z","created_by":"seanb4t","updated_at":"2026-02-09T18:41:19Z","closed_at":"2026-02-09T18:41:19Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.429","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.43","title":"Plan: Lock compound operator uses + instead of spec's \u0026 and |","description":"## Issue\nTask 24 examples use locked+faction:rebels with + for compound locks (lines 2105, 2125). The spec (lines 2444-2447) uses \u0026 for AND and | for OR. The + operator does not appear in the spec's lock syntax.\n\n## Decision\nReplace + with \u0026 in lock expression examples per spec.\n\n## Files\n- Modify: `docs/plans/2026-02-06-full-abac-implementation.md` (Task 24 examples)","acceptance_criteria":"- [ ] Lock compound examples use \u0026 (AND) and | (OR) per spec\n- [ ] No + operator in lock expressions","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T02:05:17Z","created_by":"seanb4t","updated_at":"2026-02-07T03:02:30Z","closed_at":"2026-02-07T03:02:30Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.43","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.430","title":"Add T16b-\u003eT23 dependency edge for PropertyProvider","description":"Seed policies in Task 23 (bootstrap) reference property.* attributes (resource.visibility, resource.owner, resource.parent_location) but PropertyProvider (T16b) is not listed as a dependency of T23. Without PropertyProvider, the bootstrap sequence cannot verify property attribute resolution. The Mermaid diagram and Phase 7.4 prerequisites both need updating.","acceptance_criteria":"- [ ] T16b --\u003e T23 edge added to Mermaid dependency diagram in implementation overview\n- [ ] Phase 7.4 prerequisites updated to include T16b-\u003eT23 dependency\n- [ ] Cross-phase gate table entry added showing T16b (Phase 7.3) gates T23 (Phase 7.4)\n- [ ] Diagram renders correctly","notes":"Files: docs/plans/2026-02-06-full-abac-implementation.md, docs/plans/2026-02-06-full-abac-phase-7.4.md\nConceptual overlap with C1/C2 (seed policy corrections)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T17:04:26Z","created_by":"seanb4t","updated_at":"2026-02-09T18:41:19Z","closed_at":"2026-02-09T18:41:19Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.430","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.431","title":"Fix Task 4a reference: 'Task 15' should be 'Task 16b' (PropertyProvider)","description":"Task 4a in Phase 7.1 plan (line 440) says 'PropertyProvider (Task 15)' but Task 15 does not exist as PropertyProvider. PropertyProvider is Task 16b in Phase 7.3. This is a cross-reference error that could mislead implementers.","acceptance_criteria":"- [ ] Replace 'Task 15' with 'Task 16b' in Task 4a description\n- [ ] Add Phase 7.3 link for Task 16b reference\n- [ ] Verify no other stale Task 15 references in Phase 7.1","notes":"Files: docs/plans/2026-02-06-full-abac-phase-7.1.md","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T17:04:33Z","created_by":"seanb4t","updated_at":"2026-02-09T18:44:05Z","closed_at":"2026-02-09T18:44:05Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.431","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.432","title":"Fix Task 23 reference: 'Task 6 (policy store)' should be 'Task 7'","description":"Task 23 in Phase 7.4 plan (line 211) references 'Task 6 (prefix constants and access control types)' in a context where it means the policy store. Task 6 is prefix constants; Task 7 is the actual policy store interface and PostgreSQL implementation, which provides the IsNotFound() helper needed by Task 23.","acceptance_criteria":"- [ ] Replace 'Task 6' with 'Task 7' in Task 23 dependency description\n- [ ] Context description updated to match Task 7 scope (policy store)\n- [ ] Phase link verified correct","notes":"Files: docs/plans/2026-02-06-full-abac-phase-7.4.md\nFile overlap with C1, C2, C6 (all modify phase 7.4)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T17:04:40Z","created_by":"seanb4t","updated_at":"2026-02-09T18:44:05Z","closed_at":"2026-02-09T18:44:05Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.432","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.433","title":"Update ADR 57 numbering range from 001-077 to 001-088","description":"ADR 57 (057-adr-format-evolution.md line 16) states numbering convention range '001-077' but decisions now extend to 088. The range is stale after multiple batches of new ADRs were added during review cycles.","acceptance_criteria":"- [ ] Range updated from '001-077' to '001-088' (or current max)\n- [ ] Any other stale counts in ADR 57 updated","notes":"Files: docs/specs/decisions/epic7/general/057-adr-format-evolution.md\nFile overlap with C4 (both relate to decision index maintenance)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T17:04:43Z","created_by":"seanb4t","updated_at":"2026-02-09T18:44:05Z","closed_at":"2026-02-09T18:44:05Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.433","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.434","title":"Clarify Task 16b circuit breaker deferral in acceptance criteria","description":"Task 16b acceptance criteria mentions 'circuit breaker deferred to Task 34, see Decision #74' but this creates confusion about whether Task 16b is complete without circuit breaker. The timeout requirement (100ms for parent_location resolution) is testable in Task 16b but circuit breaker wrapping is deferred. The acceptance criteria text should clearly separate these concerns.","acceptance_criteria":"- [ ] Reword acceptance criteria to separate timeout testing (in-scope for 16b) from circuit breaker logic (deferred to Task 34 per ADR 74)\n- [ ] Add explicit note: 'Timeout is enforced via context.WithTimeout; circuit breaker wrapping added in Task 34'\n- [ ] ADR 74 cross-reference preserved","notes":"Files: docs/plans/2026-02-06-full-abac-phase-7.3.md","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T17:04:49Z","created_by":"seanb4t","updated_at":"2026-02-09T18:45:57Z","closed_at":"2026-02-09T18:45:57Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.434","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.435","title":"Clarify Task 2 audit migration file structure (SQL vs Go)","description":"Task 2 in Phase 7.1 mixes SQL migration schema and Go partition creation code without clear file structure. The SQL file path is given (000016_access_audit_log.up.sql) but the Go code for dynamic partition creation has no explicit file path. Implementers need to know where the Go migration code lives.","acceptance_criteria":"- [ ] Explicit file path added for Go partition creation code\n- [ ] Clear separation between SQL migration (schema DDL) and Go migration (dynamic partitions)\n- [ ] File list in task header updated to include both SQL and Go files","notes":"Files: docs/plans/2026-02-06-full-abac-phase-7.1.md\nFile overlap with I2 (both modify phase 7.1), S8 (audit schema changes)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T17:04:55Z","created_by":"seanb4t","updated_at":"2026-02-09T18:45:57Z","closed_at":"2026-02-09T18:45:57Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.435","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.436","title":"Complete Task 28.5 equivalence test template (all 28 call sites)","description":"Task 28.5 equivalence test template in Phase 7.6 only shows ~12 of 28 required test cases. The template has a placeholder comment: 'Add remaining world operations... (Full list of 28 call sites should be enumerated here)'. All 28 production call sites must be explicitly listed for implementers.","acceptance_criteria":"- [ ] All 28 production call sites explicitly enumerated in test template\n- [ ] Placeholder comment removed\n- [ ] Each test case maps to a specific call site with file:line reference\n- [ ] Test cases grouped by domain (world, command, plugin, etc.)","notes":"Files: docs/plans/2026-02-06-full-abac-phase-7.6.md\nConceptual overlap with I14/S6 (coverage matrix)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T17:05:00Z","created_by":"seanb4t","updated_at":"2026-02-09T18:50:16Z","closed_at":"2026-02-09T18:50:16Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.436","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.437","title":"Add narrative justification for Task 21a placement in Phase 7.3","description":"Task 21a (@-prefix removal from command names) is placed in Phase 7.3 among benchmark/performance tasks, which is confusing. It is actually a seed policy prerequisite (seed policies reference bare command names). The placement needs narrative justification.","acceptance_criteria":"- [ ] Brief note added explaining why Task 21a belongs in its current phase\n- [ ] Note clarifies: Task 21a is a prerequisite for Task 22 seed policies which reference bare command names\n- [ ] Cross-reference to Phase 7.4 dependency preserved","notes":"Files: docs/plans/2026-02-06-full-abac-phase-7.3.md (or whichever phase contains Task 21a)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T17:05:10Z","created_by":"seanb4t","updated_at":"2026-02-09T18:45:57Z","closed_at":"2026-02-09T18:45:57Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.437","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.438","title":"Document SHA256 verification as integrity checking in CI","description":"SHA256 verification in CI downloads both binary and checksum from the same GitHub origin (rvben/rumdl releases). This provides integrity checking (catches corruption/truncation) but not authenticity verification (cannot detect compromised origin). Per design decision: document this limitation with a comment rather than pinning hashes.","acceptance_criteria":"- [ ] Comment added to CI workflow explaining SHA256 is integrity checking only\n- [ ] Comment clarifies: both binary and checksum from same origin provides corruption detection, not supply-chain protection\n- [ ] No functional change to verification logic","notes":"Files: .github/workflows/ci.yaml\nDesign decision: Document as integrity-only (Option B confirmed by maintainer)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T17:05:18Z","created_by":"seanb4t","updated_at":"2026-02-09T18:45:57Z","closed_at":"2026-02-09T18:45:57Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.438","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.439","title":"Migrate line-number spec refs to anchor format in Tasks 1-12","description":"Tasks 1-12 in Phase 7.1 and 7.2 plans use bare line-number references (e.g., 'lines 1696-1745') pointing to the superseded monolithic spec. Tasks 13+ already use the improved file.md#anchor format pointing to the split spec files. The early tasks should be updated to match for consistency and correctness.","acceptance_criteria":"- [ ] All bare line-number spec references in Tasks 1-12 replaced with file.md#anchor format\n- [ ] References point to correct sections in split spec files (docs/specs/abac/*.md)\n- [ ] All anchor links resolve (verified manually or via linter)\n- [ ] Old line-number references preserved in parenthetical notes where useful for traceability","notes":"Files: docs/plans/2026-02-06-full-abac-phase-7.1.md, docs/plans/2026-02-06-full-abac-phase-7.2.md\nFile overlap with I2, I8 (both modify phase 7.1)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T17:05:27Z","created_by":"seanb4t","updated_at":"2026-02-09T18:50:16Z","closed_at":"2026-02-09T18:50:16Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.439","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.44","title":"Plan: Spec references use fragile line numbers","description":"## Issue\nPer-task Spec References use line number ranges (e.g., \"§4 DSL Grammar, EBNF lines 735-810\") which become stale when the spec is edited. Some references point to approximate regions rather than exact anchors.\n\n## Decision\nConsider using section heading anchors (e.g., \"Policy DSL \u003e Grammar\") instead of or in addition to line numbers for stability across spec revisions.\n\n## Files\n- Modify: `docs/plans/2026-02-06-full-abac-implementation.md` (all task Spec References fields)","acceptance_criteria":"- [ ] Spec references include section heading anchors alongside line numbers\n- [ ] Or: note added that line numbers are approximate and should be verified","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T02:05:23Z","created_by":"seanb4t","updated_at":"2026-02-07T03:03:05Z","closed_at":"2026-02-07T03:03:05Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.44","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.440","title":"Add seed policy coverage matrix mapping 28 call sites to policies","description":"No validation exists that the 18 seed policies cover all 28 production call sites. A coverage matrix is needed to map each call site to applicable seed policies and verify completeness. This overlaps with the incomplete Task 28.5 test template but focuses on the design-time validation in Task 22.","acceptance_criteria":"- [ ] Coverage matrix created: rows = 28 call sites, columns = seed policies\n- [ ] Every call site has at least one applicable seed policy\n- [ ] Matrix added to Task 22 acceptance criteria or as appendix to Phase 7.4 plan\n- [ ] Gaps identified and documented (if any)","notes":"Files: docs/plans/2026-02-06-full-abac-phase-7.4.md\nConceptual overlap with I9 (Task 28.5 test template), C1/C2 (seed policy corrections)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T17:05:30Z","created_by":"seanb4t","updated_at":"2026-02-09T18:53:01Z","closed_at":"2026-02-09T18:53:01Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.440","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.440","depends_on_id":"holomush-5k1.425","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.440","depends_on_id":"holomush-5k1.426","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.441","title":"Track MD057 TODO for relative link validation","description":"MD057 (relative link validation) is currently disabled with no tracking for re-enabling. A TODO or configuration comment should document why it is disabled and when to re-enable.","acceptance_criteria":"- [ ] MD057 configuration added to markdownlint config with tracking comment\n- [ ] Comment explains why disabled and conditions for re-enabling","notes":"Files: .markdownlint.yaml or .markdownlint-cli2.yaml","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T17:05:38Z","created_by":"seanb4t","updated_at":"2026-02-09T19:01:08Z","closed_at":"2026-02-09T19:01:08Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.441","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.442","title":"Split Task 17 (evaluation engine) into 4 actual sub-tasks","description":"Task 17 (XL complexity evaluation engine) has implementation guidance suggesting 4 sub-tasks but no actual split in the plan. Per design decision: create actual sub-tasks. The 4 sub-tasks are: T17.1 system bypass + session resolution (Steps 1-2), T17.2 target matching and policy filtering (Step 4), T17.3 condition evaluation via DSL (Step 5), T17.4 deny-overrides combination logic (Step 6).","acceptance_criteria":"- [ ] Task 17 split into T17.1, T17.2, T17.3, T17.4 in Phase 7.3 plan\n- [ ] Each sub-task has own acceptance criteria, file list, and spec references\n- [ ] Dependencies between sub-tasks documented (T17.1 before T17.2, etc.)\n- [ ] Mermaid diagram updated with sub-task nodes\n- [ ] Original Task 17 replaced with summary pointing to sub-tasks","notes":"Files: docs/plans/2026-02-06-full-abac-phase-7.3.md, docs/plans/2026-02-06-full-abac-implementation.md\nDesign decision: Create actual sub-tasks (Option A confirmed by maintainer)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T17:05:46Z","created_by":"seanb4t","updated_at":"2026-02-09T19:01:08Z","closed_at":"2026-02-09T19:01:08Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.442","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.443","title":"Add milestone integration test gate requirements","description":"Milestones M1-M3 in the implementation overview are defined but lack explicit integration test gate requirements. Each milestone should specify which integration tests must pass before it can be considered complete.","acceptance_criteria":"- [ ] Each milestone (M1, M2, M3) has explicit integration test requirements\n- [ ] Test requirements specify coverage thresholds per milestone\n- [ ] Cross-phase integration test matrix added where applicable","notes":"Files: docs/plans/2026-02-06-full-abac-implementation.md","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T17:05:50Z","created_by":"seanb4t","updated_at":"2026-02-09T19:01:08Z","closed_at":"2026-02-09T19:01:08Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.443","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.444","title":"Cache rumdl binary in CI workflow","description":"rumdl binary is downloaded fresh on every CI run. Adding a GitHub Actions cache step would reduce CI time and external dependency on each run.","acceptance_criteria":"- [ ] actions/cache step added for rumdl binary keyed on version\n- [ ] Cache hit skips download\n- [ ] Cache miss downloads and stores binary\n- [ ] Version change invalidates cache","notes":"Files: .github/workflows/ci.yaml\nFile overlap with I11 (both modify CI workflow)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T17:05:54Z","created_by":"seanb4t","updated_at":"2026-02-09T19:01:08Z","closed_at":"2026-02-09T19:01:08Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.444","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.445","title":"Add original_subject field to audit log schema","description":"Audit log schema should preserve the original session subject before session resolution converts it to a character subject. Add original_subject TEXT field to access_audit_log table. This enables tracing which session initiated an action even after subject resolution. Per design decision: field confirmed for inclusion (ADR 089).","acceptance_criteria":"- [ ] original_subject TEXT field added to access_audit_log schema in 05-storage-audit.md\n- [ ] Phase 7.1 Task 2 migration updated to include the field\n- [ ] Task 17 (or relevant evaluation task) updated to populate field during session resolution\n- [ ] ADR 089 created documenting the decision\n- [ ] Field documented: stores original session:* subject before resolution to character:*","notes":"Files: docs/specs/abac/05-storage-audit.md, docs/plans/2026-02-06-full-abac-phase-7.1.md\nDesign decision: Add field (confirmed by maintainer, ADR 089)\nFile overlap with I8 (both modify phase 7.1 Task 2)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T17:06:00Z","created_by":"seanb4t","updated_at":"2026-02-09T18:50:16Z","closed_at":"2026-02-09T18:50:16Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.445","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.446","title":"Document system bypass precedence over degraded mode in spec","description":"Evaluation algorithm spec (04-resolution-evaluation.md) does not clarify behavior of system subject in degraded mode. Per design decision: system bypass (Step 1) takes precedence over degraded mode -- system always works. This must be explicitly documented in the evaluation algorithm and tested.","acceptance_criteria":"- [ ] Explicit note added to evaluation algorithm: system bypass check (Step 1) occurs before degraded mode check\n- [ ] Test case added: system subject succeeds even in degraded mode\n- [ ] ADR 090 created documenting the decision\n- [ ] Degraded mode section updated to note system bypass exception","notes":"Files: docs/specs/abac/04-resolution-evaluation.md\nDesign decision: System bypass takes precedence (Option B confirmed by maintainer, ADR 090)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T17:06:05Z","created_by":"seanb4t","updated_at":"2026-02-09T18:50:16Z","closed_at":"2026-02-09T18:50:16Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.446","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.447","title":"Add admin policy edit acceptance criterion to Task 23 (bootstrap)","description":"Task 23 (bootstrap sequence) in Phase 7.4 has no acceptance criterion verifying that admin can successfully edit policies after bootstrap completes. This is a key operational requirement -- if bootstrap locks out admin policy mutation, the system is unrecoverable.","acceptance_criteria":"- [ ] Acceptance criterion added to Task 23: after bootstrap, admin can successfully run policy edit\n- [ ] Integration test requirement documented\n- [ ] Cross-reference to Task 27a/27b (admin commands) if policy edit is defined there","notes":"Files: docs/plans/2026-02-06-full-abac-phase-7.4.md\nFile overlap with C1, C2, C6, I3 (all modify phase 7.4)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T17:06:09Z","created_by":"seanb4t","updated_at":"2026-02-09T19:01:08Z","closed_at":"2026-02-09T19:01:08Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.447","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.448","title":"C1: Elevate seed policy gap resolution to dedicated task","description":"**Review Finding C1 (Critical/Architecture)**\n\nThe plan's Appendix A identifies 6 gaps (G1-G6) where call sites lack seed policy coverage. G1 (exit read), G2 (builder exit write), G3 (list_characters), G4 (scene operations) are Medium-High severity. With direct replacement (no adapter/shadow mode), these cause immediate functional regressions at T28 migration. The gap resolution is buried as a T22 checkbox — needs a dedicated task with explicit T28 dependency.\n\n**Decision:** Elevate to a dedicated task T22b \"Resolve seed policy coverage gaps\" in Phase 7.4 with T22→T22b→T28 dependency chain. Create new ADR documenting this decision.\n\n**Acceptance Criteria:**\n- [ ] New task T22b added to Phase 7.4 plan with full description\n- [ ] T22→T22b dependency added to Mermaid diagram\n- [ ] T22b→T28 dependency added (T28 cannot start until gaps resolved)\n- [ ] Cross-phase gate table updated\n- [ ] Acceptance criteria for T22b include: all G1-G4 gaps resolved with seed policies, G5-G6 documented as intentional or addressed\n\n**File Dependencies:** docs/plans/2026-02-06-full-abac-phase-7.4.md, docs/plans/2026-02-06-full-abac-phase-7.6.md, docs/plans/2026-02-06-full-abac-implementation.md (Mermaid diagram + cross-phase gate table)\n**Conceptual Dependencies:** Overlaps with I1 (T28 decomposition) — both affect migration readiness","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T21:27:03Z","created_by":"seanb4t","updated_at":"2026-02-09T21:46:12Z","closed_at":"2026-02-09T21:46:12Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.448","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.449","title":"C2: Move audit partition creation from Go migration to bootstrap","description":"**Review Finding C2 (Critical/Architecture)**\n\nT2 creates 000016_access_audit_log_partitions.go but golang-migrate expects .up.sql/.down.sql files. The standalone Go file won't execute automatically, leaving the partitioned table with zero partitions (PostgreSQL rejects INSERTs into unpartitioned parent).\n\n**Decision:** Move initial partition creation to bootstrap (T23). The SQL migration (.up.sql) creates the partitioned table structure only. Bootstrap sequence creates initial partitions dynamically. This aligns partition management with the runtime system rather than static migrations.\n\n**Acceptance Criteria:**\n- [ ] T2 plan updated: remove 000016_access_audit_log_partitions.go, keep .up.sql/.down.sql for table DDL only\n- [ ] T23 plan updated: add initial partition creation step to bootstrap sequence\n- [ ] T19b (audit retention) partition management unchanged (already in runtime)\n- [ ] New ADR documenting decision to use bootstrap for partition creation\n\n**File Dependencies:** docs/plans/2026-02-06-full-abac-phase-7.1.md (T2), docs/plans/2026-02-06-full-abac-phase-7.4.md (T23)\n**Conceptual Dependencies:** Overlaps with I6 (partition idempotency)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T21:27:11Z","created_by":"seanb4t","updated_at":"2026-02-09T21:46:12Z","closed_at":"2026-02-09T21:46:12Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.449","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.45","title":"Plan: Task 16 evaluation steps don't match spec numbering","description":"## Issue\nTask 16 describes the evaluation algorithm with steps 1, 2, 2b, 2c, 3, 4, 5, 6, 7 — using substeps for session error cases. The spec treats session resolution as a single step 2. The substep labeling may confuse implementers cross-referencing the spec.\n\n## Decision\nAlign step numbering with spec. Session error handling is within step 2, not separate substeps.\n\n## Files\n- Modify: `docs/plans/2026-02-06-full-abac-implementation.md` (Task 16 acceptance criteria)","acceptance_criteria":"- [ ] Step numbering matches spec's 7-step algorithm\n- [ ] Session error cases described within step 2","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T02:05:27Z","created_by":"seanb4t","updated_at":"2026-02-07T02:52:38Z","closed_at":"2026-02-07T02:52:38Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.45","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.450","title":"C3: Missing T5→T8 dependency in plan dependency graph","description":"**Review Finding C3 (Critical/Architecture)**\n\nT5 (core types with PolicyEffect) is not wired as a dependency of T8 (AST types). The reviewer states AST nodes need PolicyEffect for the effect field.\n\n**Analysis:** Likely false positive. T8 AST nodes use participle struct tag annotations that parse \"permit\"/\"forbid\" as string tokens. The PolicyEffect type is used by the compiler (T12), not the parser AST. T12 already depends on T5 transitively via T7 (T12→T7→T5). However, adding the edge is harmless and makes the dependency explicit.\n\n**Acceptance Criteria:**\n- [ ] Add T5→T8 edge to Mermaid dependency diagram in docs/plans/2026-02-06-full-abac-implementation.md\n- [ ] Update parallel work opportunities note if affected\n- [ ] Verify critical path is unchanged (T8 already depends on T0, adding T5 may not change critical path since T5 is in Phase 7.1)\n\n**File Dependencies:** docs/plans/2026-02-06-full-abac-implementation.md (Mermaid diagram)\n**Conceptual Dependencies:** None — isolated graph fix","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T21:27:19Z","created_by":"seanb4t","updated_at":"2026-02-09T21:41:48Z","closed_at":"2026-02-09T21:41:48Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.450","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.451","title":"C4: Broken relative links in ADR #89 and #90","description":"**Review Finding C4 (Critical/Documentation)**\n\nADR #89 and #90 use ../../abac/ to link to spec files, but from phase-7.x/ directories this resolves to docs/specs/decisions/abac/ which doesn't exist. Correct path is ../../../abac/.\n\n**Affected Files:**\n- docs/specs/decisions/epic7/phase-7.1/089-original-subject-audit-field.md (lines 43-44)\n- docs/specs/decisions/epic7/phase-7.3/090-system-bypass-precedence-over-degraded-mode.md (line 50)\n\n**Acceptance Criteria:**\n- [ ] ADR #89 links updated: ../../abac/ → ../../../abac/\n- [ ] ADR #90 links updated: ../../abac/ → ../../../abac/\n- [ ] Links verified to resolve correctly\n\n**File Dependencies:** docs/specs/decisions/epic7/phase-7.1/089-original-subject-audit-field.md, docs/specs/decisions/epic7/phase-7.3/090-system-bypass-precedence-over-degraded-mode.md\n**Conceptual Dependencies:** Overlaps with C5, C6, I7, I8 (documentation fixes)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T21:27:25Z","created_by":"seanb4t","updated_at":"2026-02-09T21:41:48Z","closed_at":"2026-02-09T21:41:48Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.451","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.452","title":"C5: Broken filename link in ADR #38 to Decision #56","description":"**Review Finding C5 (Critical/Documentation)**\n\nADR #38 (line 24) links to 056-system-bypass-logging.md but actual filename is 056-audit-off-mode-includes-system-bypasses.md.\n\n**Affected File:** docs/specs/decisions/epic7/phase-7.1/038-audit-log-configuration-modes.md (line 24)\n\n**Acceptance Criteria:**\n- [ ] Link updated from ./056-system-bypass-logging.md to ./056-audit-off-mode-includes-system-bypasses.md\n- [ ] Link verified to resolve correctly\n\n**File Dependencies:** docs/specs/decisions/epic7/phase-7.1/038-audit-log-configuration-modes.md\n**Conceptual Dependencies:** Overlaps with C4, I8 (ADR #38 fixes)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T21:27:29Z","created_by":"seanb4t","updated_at":"2026-02-09T21:41:48Z","closed_at":"2026-02-09T21:41:48Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.452","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.453","title":"C6: Stale ADR count in implementation plan (85 vs actual 78)","description":"**Review Finding C6 (Critical/Documentation)**\n\ndocs/plans/2026-02-06-full-abac-implementation.md (line 54) says \"85 decisions\" but actual file count is 78.\n\n**Acceptance Criteria:**\n- [ ] Line 54 updated from \"85 decisions\" to \"78 decisions\"\n- [ ] Count verified against actual files in docs/specs/decisions/epic7/\n\n**File Dependencies:** docs/plans/2026-02-06-full-abac-implementation.md\n**Conceptual Dependencies:** None — isolated fix","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T21:27:32Z","created_by":"seanb4t","updated_at":"2026-02-09T21:41:48Z","closed_at":"2026-02-09T21:41:48Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.453","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.454","title":"I1: Decompose T28 into explicit sub-tasks for world service domains","description":"**Review Finding I1 (Important/Architecture)**\n\nT28 (XL) has 24 world service call sites in one commit. While the plan already specifies per-package atomic commits (dispatcher, world, plugin), the world service package needs finer decomposition.\n\n**Decision:** Add explicit sub-task structure for world service domains: T28-pkg1 (command package: dispatcher + rate_limit + boot + plugin), T28-pkg2 (world: locations), T28-pkg3 (world: exits + objects), T28-pkg4 (world: characters + scenes). Each is an atomic commit that compiles and passes task build.\n\n**Acceptance Criteria:**\n- [ ] T28 in Phase 7.6 plan restructured with explicit package sub-sections\n- [ ] Each package section lists specific call sites and expected commit\n- [ ] Per-package error-path test requirements preserved\n- [ ] T28 Mermaid nodes updated if needed (or note sub-commits in description)\n\n**File Dependencies:** docs/plans/2026-02-06-full-abac-phase-7.6.md (T28)\n**Conceptual Dependencies:** Overlaps with C1 (migration readiness — gaps must be resolved before T28 sub-tasks)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T21:27:44Z","created_by":"seanb4t","updated_at":"2026-02-09T21:55:31Z","closed_at":"2026-02-09T21:55:31Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.454","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.454","depends_on_id":"holomush-5k1.448","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.455","title":"I2: Fix PolicyCache Start() signature — needs connStr not pool","description":"**Review Finding I2 (Important/Architecture)**\n\nPolicyCache Start() accepts *pgxpool.Pool but LISTEN/NOTIFY requires a dedicated persistent connection via pgx.Connect(ctx, connStr). The code sample uses connStr variable that isn't available from the pool parameter.\n\n**Fix:** Change Start() signature to accept connStr string parameter, or derive it from pool.Config().ConnString(). The plan code sample at phase-7.3.md:905 needs updating.\n\n**Acceptance Criteria:**\n- [ ] PolicyCache.Start() signature updated in plan code sample\n- [ ] listenForNotifications() parameters consistent with Start()\n- [ ] Usage example in Step 3/commit section updated\n- [ ] T18 acceptance criteria unchanged (behavior is correct, only API surface changes)\n\n**File Dependencies:** docs/plans/2026-02-06-full-abac-phase-7.3.md (T18 code sample)\n**Conceptual Dependencies:** None — isolated API fix","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T21:27:50Z","created_by":"seanb4t","updated_at":"2026-02-09T21:57:04Z","closed_at":"2026-02-09T21:57:04Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.455","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.456","title":"I3: Audit off mode — T19 test contradicts ADR #86 (deny must be logged)","description":"**Review Finding I3 (Important/Architecture)**\n\nMultiple inconsistencies around audit off mode semantics:\n\n1. T19 test case (phase-7.3.md:1066): \"off mode + deny → dropped\" — WRONG per ADR #86\n2. ADR #38 table (line 17): \"off = System bypasses only\" — STALE, pre-ADR #86\n3. Spec 05-storage-audit.md Go comment (line 242): \"// System bypasses only\" — STALE\n4. Spec table (line 257): \"off = System bypasses + denials\" — CORRECT (matches ADR #86)\n\nADR #86 is authoritative: off mode MUST still log denials (deny + default_deny) and system bypasses. Only allows are suppressed.\n\n**Acceptance Criteria:**\n- [ ] T19 test updated: \"off mode + deny → written\" (not dropped)\n- [ ] T19 test description for off mode updated to reflect ADR #86 semantics\n- [ ] ADR #38 table row for off updated to \"System bypasses + denials\"\n- [ ] Spec Go comment updated: AuditOff = \"off\" // System bypasses + denials\n- [ ] Cross-reference to ADR #86 added in ADR #38\n\n**File Dependencies:** docs/plans/2026-02-06-full-abac-phase-7.3.md (T19), docs/specs/decisions/epic7/phase-7.1/038-audit-log-configuration-modes.md, docs/specs/abac/05-storage-audit.md\n**Conceptual Dependencies:** Overlaps with I8 (ADR #38 stale table), I9 (spec Go comment)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T21:28:00Z","created_by":"seanb4t","updated_at":"2026-02-09T21:57:04Z","closed_at":"2026-02-09T21:57:04Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.456","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.456","depends_on_id":"holomush-5k1.461","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.456","depends_on_id":"holomush-5k1.462","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.457","title":"I4: Add T21a to critical path diagram","description":"**Review Finding I4 (Important/Architecture)**\n\nT21a (@-prefix removal) gates T22→T23→T28 via the T21a→T22 dependency, making it on the critical path to T23. However, it's missing from the critical path overview diagram (lines 105-135 of implementation.md). If T21a is delayed, it delays T22 and T23 even if the engine chain (T17.4→T18) completes first.\n\n**Acceptance Criteria:**\n- [ ] T21a added to critical path overview Mermaid diagram\n- [ ] T21a→T22→T23 path shown alongside T18→T23 path\n- [ ] Note added that T21a can be submitted as early independent PR to reduce risk\n\n**File Dependencies:** docs/plans/2026-02-06-full-abac-implementation.md (critical path diagram, lines 105-135)\n**Conceptual Dependencies:** None — isolated diagram fix","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T21:28:05Z","created_by":"seanb4t","updated_at":"2026-02-09T21:57:04Z","closed_at":"2026-02-09T21:57:04Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.457","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.458","title":"I5: Document seed bootstrap failures as fatal — no degraded mode","description":"**Review Finding I5 (Important/Architecture)**\n\nReview raised concern about no recovery for bootstrap compilation failures — single broken seed prevents server startup. Suggested --skip-seed-install flag or degraded startup mode.\n\n**Decision:** Seed failures are fatal. No degraded mode, no --skip-seed-install flag. A broken seed policy is a configuration error that must be fixed before the server can start. This is consistent with how other critical config (database connection, TLS certs) is handled. Create new ADR documenting this decision.\n\n**Acceptance Criteria:**\n- [ ] T23 (bootstrap) plan explicitly states: seed compilation/install failures are fatal, server MUST NOT start\n- [ ] New ADR documenting fatal bootstrap failure decision with rationale\n- [ ] T23 acceptance criteria updated to include: \"Bootstrap failure → server exits with non-zero code and descriptive error\"\n- [ ] No --skip-seed-install flag added\n\n**File Dependencies:** docs/plans/2026-02-06-full-abac-phase-7.4.md (T23)\n**Conceptual Dependencies:** None — design clarification","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T21:28:13Z","created_by":"seanb4t","updated_at":"2026-02-09T21:56:02Z","closed_at":"2026-02-09T21:56:02Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.458","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.459","title":"I6: Add IF NOT EXISTS idempotency for partition creation","description":"**Review Finding I6 (Important/Architecture)**\n\nT2 and T19b create partitions with different strategies (current+2 vs current+3). If both run, partitions may collide. Needs IF NOT EXISTS idempotency to prevent errors.\n\n**Acceptance Criteria:**\n- [ ] T2 (or T23 per C2 decision) partition creation uses CREATE TABLE IF NOT EXISTS for each partition\n- [ ] T19b (audit retention) partition creation uses IF NOT EXISTS\n- [ ] Plan notes that partition creation is idempotent\n\n**File Dependencies:** docs/plans/2026-02-06-full-abac-phase-7.1.md (T2), docs/plans/2026-02-06-full-abac-phase-7.3.md (T19b)\n**Conceptual Dependencies:** Overlaps with C2 (partition creation moving to bootstrap)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T21:28:17Z","created_by":"seanb4t","updated_at":"2026-02-09T21:57:04Z","closed_at":"2026-02-09T21:57:04Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.459","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.459","depends_on_id":"holomush-5k1.449","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.46","title":"Plan: AttrType enum has Int/Float split but spec says all numbers are float64","description":"## Issue\nTask 12 (line 1174) defines AttrTypeInt and AttrTypeFloat separately. The spec (lines 1009-1017) states \"Providers MUST return numeric attributes as float64\" and \"All numeric comparisons operate on float64 values.\" Having both types could confuse implementers.\n\n## Decision\nDocument that providers must return float64 regardless of AttrType. Consider whether AttrTypeInt is meaningful given the \"all numbers are float64\" rule.\n\n## Files\n- Modify: `docs/plans/2026-02-06-full-abac-implementation.md` (Task 12 code and acceptance criteria)","acceptance_criteria":"- [ ] Note added that providers MUST return float64 for all numeric attributes\n- [ ] AttrType enum documented with clarification about float64 requirement","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T02:05:55Z","created_by":"seanb4t","updated_at":"2026-02-07T03:04:01Z","closed_at":"2026-02-07T03:04:01Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.46","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.460","title":"I7: ADR #36 says phase 7.3 — should be phase 7.6","description":"**Review Finding I7 (Important/Documentation)**\n\nADR #36 (036-direct-replacement-no-adapter.md, line 30) says call sites update in \"phase 7.3\" but call site migration (T28) is in Phase 7.6.\n\n**Acceptance Criteria:**\n- [ ] Line 30 updated: \"phase 7.3\" → \"phase 7.6\"\n\n**File Dependencies:** docs/specs/decisions/epic7/phase-7.6/036-direct-replacement-no-adapter.md\n**Conceptual Dependencies:** None — isolated fix","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T21:28:23Z","created_by":"seanb4t","updated_at":"2026-02-09T21:47:34Z","closed_at":"2026-02-09T21:47:34Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.460","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.461","title":"I8: ADR #38 table stale after ADR #86 — off mode includes denials","description":"**Review Finding I8 (Important/Documentation)**\n\nADR #38 table (line 17) shows off mode as \"System bypasses only\" but ADR #86 changed off mode to include denials. No cross-reference to #86 exists.\n\n**Acceptance Criteria:**\n- [ ] ADR #38 table row for off updated: \"System bypasses only\" → \"System bypasses + denials\"\n- [ ] ADR #38 use case for off updated: \"Development, performance\" → \"Development, performance (allows off)\"\n- [ ] Cross-reference to ADR #86 added (e.g., \"Updated by [Decision #86](...)\")\n- [ ] ADR #38 rationale paragraph updated: \"off mode eliminates audit overhead entirely\" → clarify off mode still logs denials + bypasses\n\n**File Dependencies:** docs/specs/decisions/epic7/phase-7.1/038-audit-log-configuration-modes.md\n**Conceptual Dependencies:** Overlaps with I3 (audit off mode consistency), I9 (spec comment)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T21:28:28Z","created_by":"seanb4t","updated_at":"2026-02-09T21:47:34Z","closed_at":"2026-02-09T21:47:34Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.461","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.462","title":"I9: Spec 05-storage-audit.md Go comment contradicts spec table","description":"**Review Finding I9 (Important/Documentation)**\n\nSpec 05-storage-audit.md line 242 Go comment says AuditOff = \"off\" // System bypasses only but the spec table at line 257 correctly shows off mode logs \"System bypasses + denials\" (matching ADR #86).\n\n**Acceptance Criteria:**\n- [ ] Go comment at line 242 updated: \"// System bypasses only\" → \"// System bypasses + denials\"\n\n**File Dependencies:** docs/specs/abac/05-storage-audit.md\n**Conceptual Dependencies:** Overlaps with I3 (T19 test fix), I8 (ADR #38 table)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T21:28:31Z","created_by":"seanb4t","updated_at":"2026-02-09T21:47:34Z","closed_at":"2026-02-09T21:47:34Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.462","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.463","title":"I10: Pin SHA256 hashes as literals in CI config","description":"**Review Finding I10 (Important/CI)**\n\nSHA256 verification is integrity-only — both binary and checksum are fetched from the same GitHub origin. A compromised release could include a matching checksum. Pinning hash as a literal in the workflow file provides supply-chain protection.\n\n**Decision:** Pin SHA256 hashes as literals in CI config files. When updating tool versions, update the pinned hash simultaneously.\n\n**Acceptance Criteria:**\n- [ ] Identify all CI workflows that download tools with SHA256 verification\n- [ ] Replace dynamic checksum fetch with pinned hash literals\n- [ ] Add comment with tool version next to each pinned hash for maintainability\n- [ ] Document hash update procedure in workflow comments\n\n**File Dependencies:** .github/workflows/ (CI config files)\n**Conceptual Dependencies:** None — isolated CI improvement","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T21:28:37Z","created_by":"seanb4t","updated_at":"2026-02-09T21:56:03Z","closed_at":"2026-02-09T21:56:03Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.463","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.464","title":"S1: Add smoke test gate between Phase 7.4 and 7.6","description":"**Review Finding S1 (Suggestion)**\n\nAdd a smoke test gate between Phase 7.4 (Bootstrap) and Phase 7.6 (Migration) to exercise common auth patterns before irreversible migration. This would catch seed policy issues early.\n\n**Acceptance Criteria:**\n- [ ] Evaluate adding smoke test step after T23b (CLI --validate-seeds) and before T28\n- [ ] Define minimum smoke test scenarios (basic player commands, builder operations, admin operations)\n- [ ] Document as acceptance criterion or separate task\n\n**File Dependencies:** docs/plans/2026-02-06-full-abac-implementation.md, docs/plans/2026-02-06-full-abac-phase-7.4.md\n**Conceptual Dependencies:** Overlaps with C1 (gap resolution task)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T21:28:46Z","created_by":"seanb4t","updated_at":"2026-02-09T22:01:52Z","closed_at":"2026-02-09T22:01:52Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.464","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.465","title":"S2: Document spike failure alternative serialization path","description":"**Review Finding S2 (Suggestion)**\n\nDocument what happens if the T0 spike fails — alternative serialization paths (protobuf? custom marshaling?) should be noted for contingency planning.\n\n**Acceptance Criteria:**\n- [ ] T0 or T0.5 plan updated with \"if spike fails\" contingency section\n- [ ] Alternative approaches listed (protobuf, custom marshaling, simplified AST)\n- [ ] Decision criteria for abandoning participle documented\n\n**File Dependencies:** docs/plans/2026-02-06-full-abac-phase-7.1.md (T0/T0.5)\n**Conceptual Dependencies:** None","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T21:28:50Z","created_by":"seanb4t","updated_at":"2026-02-09T22:01:52Z","closed_at":"2026-02-09T22:01:52Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.465","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.466","title":"S3: Make lock rate limit (50/character) configurable","description":"**Review Finding S3 (Suggestion)**\n\nLock rate limit of 50 per character is hardcoded. Should be configurable via server settings for different deployment scenarios.\n\n**Acceptance Criteria:**\n- [ ] Evaluate making lock rate limit a server configuration option\n- [ ] If adopted, update T24/T25 plan with configurable rate limit\n- [ ] Default value remains 50/character\n\n**File Dependencies:** docs/plans/2026-02-06-full-abac-phase-7.5.md (T24/T25)\n**Conceptual Dependencies:** None","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T21:28:53Z","created_by":"seanb4t","updated_at":"2026-02-09T22:01:52Z","closed_at":"2026-02-09T22:01:52Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.466","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.467","title":"S4: Add Updated-by back-references on modified ADRs","description":"**Review Finding S4 (Suggestion)**\n\nADRs modified by later decisions lack back-references. E.g., ADR #38 was modified by ADR #86, and ADR #56 was modified by ADR #86, but neither has an \"Updated by\" note.\n\n**Acceptance Criteria:**\n- [ ] ADR #38 gets \"Updated by [Decision #86]\" back-reference\n- [ ] ADR #56 gets \"Updated by [Decision #86]\" back-reference\n- [ ] Establish pattern for future back-references\n- [ ] Review all ADRs for other missing back-references\n\n**File Dependencies:** docs/specs/decisions/epic7/phase-7.1/038-audit-log-configuration-modes.md, docs/specs/decisions/epic7/phase-7.1/056-audit-off-mode-includes-system-bypasses.md\n**Conceptual Dependencies:** Overlaps with I8 (ADR #38 updates)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T21:28:57Z","created_by":"seanb4t","updated_at":"2026-02-09T22:01:52Z","closed_at":"2026-02-09T22:01:52Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.467","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.467","depends_on_id":"holomush-5k1.461","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.468","title":"S5: README references non-existent Status fields in superseded ADRs","description":"**Review Finding S5 (Suggestion)**\n\nADR README (line 140) references \"Status fields\" that don't exist in superseded ADRs. Should reference \"Superseded by notes\" instead.\n\n**Acceptance Criteria:**\n- [ ] Update README.md reference from \"Status fields\" to \"Superseded by notes\" or equivalent\n- [ ] Verify superseded ADRs use consistent notation\n\n**File Dependencies:** docs/specs/decisions/epic7/README.md\n**Conceptual Dependencies:** None","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T21:29:00Z","created_by":"seanb4t","updated_at":"2026-02-09T22:01:52Z","closed_at":"2026-02-09T22:01:52Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.468","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.469","title":"S6: Verify rumdl default-enables MD040/MD041","description":"**Review Finding S6 (Suggestion)**\n\n.rumdl.toml doesn't explicitly set MD040 (fenced code language) or MD041 (first-line heading). Verify these are enabled by default in rumdl so linting coverage is equivalent to markdownlint.\n\n**Acceptance Criteria:**\n- [ ] Check rumdl documentation for default-enabled rules\n- [ ] If MD040/MD041 not default-enabled, add to .rumdl.toml\n- [ ] If already default-enabled, no action needed (document finding)\n\n**File Dependencies:** site/.rumdl.toml\n**Conceptual Dependencies:** Overlaps with S7 (lefthook markdown config)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T21:29:05Z","created_by":"seanb4t","updated_at":"2026-02-09T22:01:52Z","closed_at":"2026-02-09T22:01:52Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.469","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.47","title":"Plan: Task 8 fuzz/bench commands bypass task runner","description":"## Issue\nTask 9 (line 916) runs go test -fuzz=... directly and Task 20 (line 1815) runs go test -bench=... directly. CLAUDE.md requires using task for all test commands. However, fuzz and benchmark testing are special cases not covered by task test.\n\nAlso: Task 30 commit step uses git add -A (line 2464) which CLAUDE.md discourages in favor of adding specific files.\n\n## Decision\nAdd notes that fuzz/bench are intentional exceptions to the task requirement. Replace git add -A with specific file patterns in Task 30.\n\n## Files\n- Modify: `docs/plans/2026-02-06-full-abac-implementation.md` (Tasks 9, 20, 30)","acceptance_criteria":"- [ ] Tasks 9 and 20 have notes explaining direct go test is intentional for fuzz/bench\n- [ ] Task 30 commit step uses specific file patterns instead of git add -A","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T02:06:03Z","created_by":"seanb4t","updated_at":"2026-02-07T03:05:12Z","closed_at":"2026-02-07T03:05:12Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.47","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.470","title":"S7: Consider stage_fixed for lefthook markdown format hooks","description":"**Review Finding S7 (Suggestion)**\n\nLefthook markdown format hooks could use stage_fixed: true to auto-fix and re-stage on commit, reducing manual formatting steps.\n\n**Acceptance Criteria:**\n- [ ] Evaluate adding stage_fixed: true to markdown format hooks in lefthook.yaml\n- [ ] If adopted, test that auto-fix + re-stage works correctly\n- [ ] If rejected, document rationale\n\n**File Dependencies:** lefthook.yaml\n**Conceptual Dependencies:** Overlaps with S6 (markdown linting config)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-09T21:29:09Z","created_by":"seanb4t","updated_at":"2026-02-09T22:01:52Z","closed_at":"2026-02-09T22:01:52Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.470","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.471","title":"M5 milestone gate task contradicts itself","description":"## Issue\n\nIn `docs/plans/2026-02-06-full-abac-implementation.md`, the M5 milestone is defined inconsistently:\n- Line 152 (milestones summary): **M5 = T28** (Legacy adapter migrated, Phase 7.6)\n- Line 412 (milestones table): **M5 = T27b3** (All admin commands functional, Phase 7.5)\n\nT28 is XL-sized (28 production call sites) and sits on the critical path. T27b3 is admin recompilation in Phase 7.5. These are fundamentally different gates.\n\nAdditionally, T28 has no milestone row in the table at all.\n\n## Decision\n\n**M5 = T28** — Update the milestone table to match the summary. T28 is on the critical path and represents the key migration gate. T27b3 does not need its own milestone.\n\n## Files Affected\n\n- `docs/plans/2026-02-06-full-abac-implementation.md` (lines 146-153, 405-413)\n\n## Acceptance Criteria\n\n- [ ] Milestone table row M5 shows T28, not T27b3\n- [ ] Milestone table M5 description reads \"Legacy adapter migrated\" or equivalent\n- [ ] Milestone summary (line 152) and table (line 412) are consistent\n- [ ] No other milestone references to T27b3 remain\n\n## Dependencies\n\n- File overlap with: Critical path text fix (T23b/T23c), Quick Start path fix, gate table fixes, task count fix, ADR count fix, Mermaid reconciliation (all in implementation.md)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T00:20:32Z","created_by":"seanb4t","updated_at":"2026-02-10T00:52:04Z","closed_at":"2026-02-10T00:52:04Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.471","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.472","title":"Critical path text omits T23b and T23c","description":"## Issue\n\nIn docs/plans/2026-02-06-full-abac-implementation.md line 339, the textual critical path description shows:\n...T23 → T28 (skipping T23b and T23c)\n\nBut the Mermaid diagram correctly shows: T23 → T23b → T23c → T28\n\nT23c explicitly gates T28 in the cross-phase gate table.\n\n## Files Affected\n\n- docs/plans/2026-02-06-full-abac-implementation.md (line 339)\n\n## Acceptance Criteria\n\n- [ ] Textual critical path includes T23b and T23c between T23 and T28\n- [ ] Text matches Mermaid diagram path\n- [ ] Cross-phase gate references remain consistent\n\n## Dependencies\n\n- File overlap: implementation.md (shared with M5 milestone fix, gate table fixes, count fixes)\n- Conceptual overlap: Mermaid diagram style fix for T23b/T23c (Suggestion #4)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T00:21:19Z","created_by":"seanb4t","updated_at":"2026-02-10T00:53:05Z","closed_at":"2026-02-10T00:53:05Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.472","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.473","title":"Audit mode off behavior described 3 different ways","description":"## Issue\n\nThe audit mode 'off' behavior is described inconsistently across 3 locations:\n- Phase 7.3 Task 19: off = \"system bypasses only\"\n- Phase 7.3 Task 17.4: off = \"system bypasses + denials\"\n- Spec 05-storage-audit.md:242: off = \"System bypasses + denials\"\n\nADR #86 mandates denial logging even in off mode.\n\n## Decision\n\nUnify all references to \"system bypasses + denials\" per ADR #86.\n\n## Files Affected\n\n- docs/plans/2026-02-06-full-abac-phase-7.3.md (lines 762, 1025, 1087)\n- docs/specs/abac/05-storage-audit.md (line 242)\n\n## Acceptance Criteria\n\n- [ ] All references to audit mode off consistently say \"system bypasses + denials\"\n- [ ] Phase 7.3 Task 19 description updated\n- [ ] Phase 7.3 Task 17.4 description matches\n- [ ] Spec 05-storage-audit.md matches\n- [ ] Consistent with ADR #86\n\n## Dependencies\n\n- File overlap: 05-storage-audit.md (shared with composite PK fix, denials_only fix)\n- File overlap: phase-7.3.md (shared with raw line number anchors fix)\n- Conceptual overlap: Important #7 (denials_only mode description)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T00:21:28Z","created_by":"seanb4t","updated_at":"2026-02-10T00:56:00Z","closed_at":"2026-02-10T00:56:00Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.473","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.474","title":"Quick Start critical path omits T21a before T22","description":"## Issue\n\nIn docs/plans/2026-02-06-full-abac-implementation.md line 81, the Quick Start critical path overview omits T21a before T22. T21a (@-prefix removal) is a prerequisite for T22.\n\n## Files Affected\n\n- docs/plans/2026-02-06-full-abac-implementation.md (line 81)\n\n## Acceptance Criteria\n\n- [ ] Quick Start critical path includes T21a before T22\n- [ ] Path reads: ...T21a → T22...\n\n## Dependencies\n\n- File overlap: implementation.md (shared with M5 fix, critical path text, gate table, counts)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T00:21:34Z","created_by":"seanb4t","updated_at":"2026-02-10T00:57:23Z","closed_at":"2026-02-10T00:57:23Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.474","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.475","title":"Audit log schema single-column PK incompatible with partitioning","description":"## Issue\n\nIn docs/specs/abac/05-storage-audit.md:\n- Line 48: Schema shows id TEXT PRIMARY KEY (single column)\n- Line 364: Same file specifies PARTITION BY RANGE (timestamp)\n\nPostgreSQL requires the partition key to be included in the primary key. The schema needs a composite PK: PRIMARY KEY (id, timestamp).\n\nThe plan's Spec Deviations table acknowledges this contradiction, but the spec itself still shows the incorrect single-column PK.\n\n## Files Affected\n\n- docs/specs/abac/05-storage-audit.md (lines 48, 364)\n\n## Acceptance Criteria\n\n- [ ] Schema shows PRIMARY KEY (id, timestamp) instead of PRIMARY KEY (id)\n- [ ] Partition clause and PK are compatible\n- [ ] Spec Deviations table note updated or removed if no longer a deviation\n\n## Dependencies\n\n- File overlap: 05-storage-audit.md (shared with audit mode off fix, denials_only fix)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T00:21:36Z","created_by":"seanb4t","updated_at":"2026-02-10T01:08:26Z","closed_at":"2026-02-10T01:08:26Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.475","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.475","depends_on_id":"holomush-5k1.473","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.476","title":"Cross-phase gate table missing T5→T8 and T5→T13 dependencies","description":"## Issue\n\nIn docs/plans/2026-02-06-full-abac-implementation.md lines 366-393, the cross-phase gate table is missing two dependency rows:\n- T5 → T8\n- T5 → T13\n\nThese dependencies exist in the task descriptions but are not reflected in the summary gate table.\n\n## Files Affected\n\n- docs/plans/2026-02-06-full-abac-implementation.md (lines 366-393)\n\n## Acceptance Criteria\n\n- [ ] Gate table includes T5 → T8 row with phase/rationale\n- [ ] Gate table includes T5 → T13 row with phase/rationale\n- [ ] Gate table is complete with respect to all cross-phase dependencies\n\n## Dependencies\n\n- File overlap: implementation.md (shared with M5 fix, critical path text, Mermaid, counts)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T00:21:41Z","created_by":"seanb4t","updated_at":"2026-02-10T01:01:00Z","closed_at":"2026-02-10T01:01:00Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.476","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.477","title":"Decision constructor example won't compile","description":"## Issue\n\nIn docs/specs/abac/04-resolution-evaluation.md line 233, the example shows:\n  return Decision{Allowed: false, Effect: EffectDefaultDeny}\n\nBut per 01-core-types.md:260, allowed is unexported and NewDecision() constructor is required.\n\n## Files Affected\n\n- docs/specs/abac/04-resolution-evaluation.md (line 233)\n\n## Acceptance Criteria\n\n- [ ] Example uses NewDecision(EffectDefaultDeny, \"core provider failure\", \"\") instead of struct literal\n- [ ] Consistent with 01-core-types.md constructor requirement\n\n## Dependencies\n\n- File overlap: 04-resolution-evaluation.md (shared with metric prefix fix)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T00:21:46Z","created_by":"seanb4t","updated_at":"2026-02-10T00:56:53Z","closed_at":"2026-02-10T00:56:53Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.477","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.478","title":"Task count says 54 but T23c missing from complexity table","description":"## Issue\n\nIn docs/plans/2026-02-06-full-abac-implementation.md line 605, the summary reads \"54 tasks\" but T23c is missing from the complexity table, making the actual count 55.\n\n## Files Affected\n\n- docs/plans/2026-02-06-full-abac-implementation.md (line 605 and complexity table)\n\n## Acceptance Criteria\n\n- [ ] T23c row added to complexity table with size and description\n- [ ] Summary total updated to correct count (55 or reconciled)\n- [ ] All referenced tasks appear in the complexity table\n\n## Dependencies\n\n- File overlap: implementation.md (shared with M5 fix, critical path, gate table, ADR count)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T00:21:49Z","created_by":"seanb4t","updated_at":"2026-02-10T01:03:33Z","closed_at":"2026-02-10T01:03:33Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.478","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.479","title":"Phase 7.3 tasks use raw line numbers instead of file anchors","description":"## Issue\n\nIn docs/plans/2026-02-06-full-abac-phase-7.3.md, 6 tasks (T18-T21b) reference spec locations using raw line numbers (e.g., \"lines 150-200\") instead of file.md#anchor format. Raw line numbers break when specs are edited.\n\n## Files Affected\n\n- docs/plans/2026-02-06-full-abac-phase-7.3.md\n\n## Acceptance Criteria\n\n- [ ] All 6 tasks (T18-T21b) use file.md#anchor references instead of raw line numbers\n- [ ] Anchors exist in the referenced spec files\n- [ ] No raw line number spec references remain in phase-7.3.md tasks\n\n## Dependencies\n\n- File overlap: phase-7.3.md (shared with audit mode off fix)\n- Conceptual overlap: Suggestion #2 (Phase 7.7 has same issue)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T00:21:53Z","created_by":"seanb4t","updated_at":"2026-02-10T01:11:36Z","closed_at":"2026-02-10T01:11:36Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.479","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.479","depends_on_id":"holomush-5k1.473","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.48","title":"Fix lock compilation to generate permit policies (not forbid)","description":"## Review Finding: C1 — Lock compilation generates wrong policy effect\n\n**Source:** PR #69 review (plan-vs-spec consistency check)\n**Plan location:** Task 24, lines 2285-2311\n**Spec location:** Lines 2573-2590\n\n### Problem\nTask 24 states locks compile to `forbid` policies with inverted conditions (e.g., `faction:rebels` → `forbid ... when { principal.faction != \"rebels\" }`). The spec explicitly states lock compilation step 4: \"Generate a `permit` policy scoped to the specific resource and action\", with positive conditions (e.g., `permit ... when { principal.faction == \"rebels\" }`).\n\nThis is a fundamental semantic inversion. Under deny-overrides conflict resolution (ADR 0011), a `forbid` policy blocks access even when other `permit` policies would allow it. The spec's lock model uses `permit` to grant access to qualifying principals — not `forbid` to block non-qualifying ones.\n\n### Decision\nRewrite Task 24 acceptance criteria and test examples to generate `permit` policies with positive conditions, matching the spec's compilation example at lines 2578-2590.\n\n### Acceptance Criteria\n- [ ] Task 24 acceptance criteria updated: all lock examples generate `permit` (not `forbid`)\n- [ ] Test expectations on lines 2307-2311 rewritten with `permit` effect and positive conditions\n- [ ] All references to \"inverted\" logic removed from Task 24\n- [ ] Lock compilation description matches spec lines 2564-2590","status":"closed","priority":0,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T16:27:00Z","created_by":"seanb4t","updated_at":"2026-02-07T16:40:48Z","closed_at":"2026-02-07T16:40:48Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.48","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.480","title":"ADR count inconsistent: plan says 82, redirect says 65","description":"## Issue\n\nADR count is stated differently in two locations:\n- docs/plans/2026-02-06-full-abac-implementation.md line 54: says \"82\" ADRs\n- design-decisions.md line 10: says \"65\" ADRs\n- Actual count: 82 ADR files\n\n## Files Affected\n\n- docs/plans/2026-02-06-full-abac-implementation.md (line 54)\n- docs/specs/decisions/design-decisions.md (line 10)\n\n## Acceptance Criteria\n\n- [ ] Both files show the correct ADR count (82 or actual count)\n- [ ] ADR count matches the actual number of ADR files in the repository\n\n## Dependencies\n\n- File overlap: implementation.md (shared with M5 fix, critical path, gate table, task count)\n- File overlap: design-decisions.md","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T00:21:56Z","created_by":"seanb4t","updated_at":"2026-02-10T01:04:34Z","closed_at":"2026-02-10T01:04:34Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.480","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.481","title":"denials_only audit mode description omits system bypasses","description":"## Issue\n\nIn docs/specs/abac/05-storage-audit.md line 243, the denials_only audit mode description omits system bypasses. Per the evaluation algorithm and ADR #86, denials_only should include system bypass logging.\n\n## Files Affected\n\n- docs/specs/abac/05-storage-audit.md (line 243)\n\n## Acceptance Criteria\n\n- [ ] denials_only mode description includes system bypasses\n- [ ] Description matches the evaluation algorithm behavior\n- [ ] Consistent with ADR #86 and audit mode off fix\n\n## Dependencies\n\n- File overlap: 05-storage-audit.md (shared with audit mode off fix, composite PK fix)\n- Conceptual overlap: Critical #3 (audit mode consistency)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T00:22:01Z","created_by":"seanb4t","updated_at":"2026-02-10T01:12:27Z","closed_at":"2026-02-10T01:12:27Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.481","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.481","depends_on_id":"holomush-5k1.473","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.482","title":"T22b→T28 in gate table but not in Mermaid diagram","description":"## Issue\n\nIn docs/plans/2026-02-06-full-abac-implementation.md, the cross-phase gate table includes T22b → T28 as a dependency, but this edge is missing from the Mermaid dependency diagram.\n\n## Files Affected\n\n- docs/plans/2026-02-06-full-abac-implementation.md (gate table and Mermaid diagram)\n\n## Acceptance Criteria\n\n- [ ] Mermaid diagram includes T22b → T28 edge, OR\n- [ ] Gate table and diagram are reconciled with explanation of difference\n- [ ] No other gate table entries are missing from the diagram\n\n## Dependencies\n\n- File overlap: implementation.md (shared with critical path text, M5 fix, gate table)\n- Conceptual overlap: Critical path T23b/T23c fix (same diagram area)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T00:22:05Z","created_by":"seanb4t","updated_at":"2026-02-10T01:15:28Z","closed_at":"2026-02-10T01:15:28Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.482","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.482","depends_on_id":"holomush-5k1.472","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.483","title":"ADR references in specs could be hyperlinks","description":"## Issue\n\n4 instances of text-only ADR references in spec files could be converted to markdown hyperlinks for easier navigation. Currently they reference ADRs by number without linking to the file.\n\n## Files Affected\n\n- Various docs/specs/abac/ files (4 instances)\n\n## Acceptance Criteria\n\n- [ ] All ADR references in spec files are markdown hyperlinks\n- [ ] Links point to correct ADR files\n- [ ] Links are relative paths that work from the spec file location\n\n## Dependencies\n\n- No specific file overlap with other findings\n- Low priority enhancement","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T00:22:06Z","created_by":"seanb4t","updated_at":"2026-02-10T01:16:56Z","closed_at":"2026-02-10T01:16:56Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.483","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.484","title":"Circuit breaker threshold: spec says 3, ADR #83 says 5","description":"## Issue\n\nIn docs/specs/abac/08-testing-appendices.md line 149, the circuit breaker threshold is specified as 3. However, ADR #83 was updated to use a threshold of 5.\n\n## Files Affected\n\n- docs/specs/abac/08-testing-appendices.md (line 149)\n\n## Acceptance Criteria\n\n- [ ] Circuit breaker threshold in spec updated to 5\n- [ ] Consistent with ADR #83\n\n## Dependencies\n\n- No file overlap with other findings (standalone spec file)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T00:22:13Z","created_by":"seanb4t","updated_at":"2026-02-10T01:04:59Z","closed_at":"2026-02-10T01:04:59Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.484","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.485","title":"Phase 7.7 tasks use raw line number spec references","description":"## Issue\n\nTasks in docs/plans/2026-02-06-full-abac-phase-7.7.md reference spec locations using raw line numbers instead of file.md#anchor format, same issue as Phase 7.3 (Important #6).\n\n## Files Affected\n\n- docs/plans/2026-02-06-full-abac-phase-7.7.md\n\n## Acceptance Criteria\n\n- [ ] All tasks use file.md#anchor references instead of raw line numbers\n- [ ] Anchors exist in the referenced spec files\n\n## Dependencies\n\n- Conceptual overlap: Important #6 (same issue pattern in Phase 7.3)\n- File overlap: phase-7.7.md (shared with T36 stub fix)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T00:22:14Z","created_by":"seanb4t","updated_at":"2026-02-10T01:19:04Z","closed_at":"2026-02-10T01:19:04Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.485","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.485","depends_on_id":"holomush-5k1.479","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.485","depends_on_id":"holomush-5k1.491","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.486","title":"Legacy (was lines NNN-NNN) annotations add maintenance burden","description":"## Issue\n\nMultiple files contain legacy annotations like \"(was lines NNN-NNN)\" that reference old line numbers from previous file versions. These annotations become stale as files are edited and add maintenance burden.\n\n## Files Affected\n\n- Multiple docs/plans/ and docs/specs/ files\n\n## Acceptance Criteria\n\n- [ ] All (was lines NNN-NNN) annotations removed or replaced with stable references\n- [ ] No stale line number annotations remain\n\n## Dependencies\n\n- No specific file overlap (spans multiple files)\n- Low priority cleanup","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T00:22:16Z","created_by":"seanb4t","updated_at":"2026-02-10T01:23:01Z","closed_at":"2026-02-10T01:23:01Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.486","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.487","title":"T16b latent critical path risk not highlighted","description":"## Issue\n\nIn docs/plans/2026-02-06-full-abac-implementation.md, T16b is documented as not being on the critical path (per Decision #85), but it is a latent risk for T23 that is not prominently highlighted. If T16b is delayed, it could become a blocker.\n\nThe risk is documented but could benefit from more prominent highlighting in the risk or notes section.\n\n## Files Affected\n\n- docs/plans/2026-02-06-full-abac-implementation.md\n\n## Acceptance Criteria\n\n- [ ] T16b risk is highlighted in a notes or risk section\n- [ ] Relationship to T23 clearly documented as latent dependency\n\n## Dependencies\n\n- File overlap: implementation.md (shared with many other findings)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T00:22:21Z","created_by":"seanb4t","updated_at":"2026-02-10T01:24:37Z","closed_at":"2026-02-10T01:24:37Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.487","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.488","title":"policy_cache_last_update metric missing abac_ prefix","description":"## Issue\n\nIn docs/specs/abac/04-resolution-evaluation.md line 756, the metric policy_cache_last_update is missing the abac_ prefix. All ABAC metrics should use the abac_ prefix for namespace consistency.\n\n## Files Affected\n\n- docs/specs/abac/04-resolution-evaluation.md (line 756)\n\n## Acceptance Criteria\n\n- [ ] Metric renamed to abac_policy_cache_last_update\n- [ ] All ABAC metrics in the spec use abac_ prefix consistently\n\n## Dependencies\n\n- File overlap: 04-resolution-evaluation.md (shared with Decision constructor fix)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T00:22:22Z","created_by":"seanb4t","updated_at":"2026-02-10T01:13:21Z","closed_at":"2026-02-10T01:13:21Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.488","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.488","depends_on_id":"holomush-5k1.477","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.489","title":"Seed policy examples lack seed_version field reference","description":"## Issue\n\nSeed policy examples in the specs do not reference the seed_version field. This field is important for policy versioning and upgrade paths but is missing from the example policy definitions.\n\n## Files Affected\n\n- docs/specs/abac/ seed policy examples (specific files to be identified)\n\n## Acceptance Criteria\n\n- [ ] Seed policy examples include seed_version field\n- [ ] Field usage is consistent with the schema definition\n\n## Dependencies\n\n- No specific file overlap with other findings","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T00:22:23Z","created_by":"seanb4t","updated_at":"2026-02-10T01:27:59Z","closed_at":"2026-02-10T01:27:59Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.489","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.49","title":"Fix systematically incorrect spec section numbering","description":"## Review Finding: C2 — Systematically incorrect section numbering throughout the plan\n\n**Source:** PR #69 review (plan-vs-spec consistency check)\n**Affected:** ~15+ spec references across the entire plan\n\n### Problem\nThe plan uses section (§) references that do not correspond to the spec's actual heading structure. The spec uses unnumbered markdown headers; the plan invents an implicit numbering scheme that is frequently wrong. Examples:\n\n| Plan Reference | Plan Label | Actual Spec Section |\n|---|---|---|\n| §5 | \"Compilation Pipeline\" | No such section; content is within §4 (Policy DSL) |\n| §7.1-7.7 | \"Character/Location/Object Attributes\" | Actually subsections of §3.8 (Core Attribute Schema) |\n| §12.1 | \"Seed Policies\" | Actually §11.1 (Replacing Static Roles); §12 is Testing Strategy |\n| §14 | \"Call Site Migration\" | Actually §11.3; §14 is Acceptance Criteria |\n| §15 | \"Integration Tests\" | Actually §12.4; §15 is Future Commands (Deferred) |\n| §3.4.1 | \"numeric float64 requirement\" | No such subsection exists |\n| §6.5 | \"LISTEN/NOTIFY\" | LISTEN/NOTIFY is in §8.2, not §6 |\n\nNote: Line number references are approximately correct even when section numbers are wrong.\n\n### Decision\nReplace all §N references with spec heading names + line numbers. The line numbers are already approximately accurate and sufficient for navigation.\n\n### Acceptance Criteria\n- [ ] All §N references replaced with heading name + line number format (e.g., \"Policy Storage \u003e Cache Invalidation (lines 2115-2140)\")\n- [ ] No fabricated section numbers remain (§3.4.1, §5.1-5.3, §6.5, §6.6, etc.)\n- [ ] Line number ranges verified to still be approximately correct\n- [ ] Consistent reference format used throughout the plan","status":"closed","priority":0,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T16:27:09Z","created_by":"seanb4t","updated_at":"2026-02-07T16:45:20Z","closed_at":"2026-02-07T16:45:20Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.49","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.490","title":"Mermaid diagram missing style for T23b and T23c nodes","description":"## Issue\n\nIn docs/plans/2026-02-06-full-abac-implementation.md, the Mermaid critical path diagram has style declarations for critical path nodes (red fill) but T23b and T23c are missing style declarations despite being on the critical path.\n\n## Files Affected\n\n- docs/plans/2026-02-06-full-abac-implementation.md (Mermaid diagram style section)\n\n## Acceptance Criteria\n\n- [ ] T23b and T23c have style fill:#ffcccc (critical path red) in Mermaid diagram\n- [ ] All critical path nodes have consistent styling\n\n## Dependencies\n\n- File overlap: implementation.md (shared with critical path text fix)\n- Conceptual overlap: Critical #2 (T23b/T23c critical path)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T00:22:28Z","created_by":"seanb4t","updated_at":"2026-02-10T01:28:51Z","closed_at":"2026-02-10T01:28:51Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.490","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.490","depends_on_id":"holomush-5k1.472","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.491","title":"Phase 7.7 T36 stub creates confusion (moved to T23b)","description":"## Issue\n\nIn docs/plans/2026-02-06-full-abac-phase-7.7.md line 354, a T36 stub remains even though the task was moved to T23b. This creates confusion about whether T36 still exists as a separate task.\n\n## Files Affected\n\n- docs/plans/2026-02-06-full-abac-phase-7.7.md (line 354)\n\n## Acceptance Criteria\n\n- [ ] T36 stub removed or replaced with clear redirect to T23b\n- [ ] No ambiguity about T36 existence as a separate task\n\n## Dependencies\n\n- File overlap: phase-7.7.md (shared with Suggestion #2 raw line numbers)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T00:22:29Z","created_by":"seanb4t","updated_at":"2026-02-10T01:05:28Z","closed_at":"2026-02-10T01:05:28Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.491","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.492","title":"Pin golangci-lint install script to tag matching version","description":"## Issue\n\nThe golangci-lint installation uses an unpinned piped script. This is a pre-existing issue not introduced by this PR, but flagged for security hygiene. The install script should be pinned to a specific tag/version matching the golangci-lint version used.\n\nNote: This is a pre-existing issue, not introduced by PR #69.\n\n## Files Affected\n\n- CI workflow configuration (GitHub Actions or Taskfile)\n\n## Acceptance Criteria\n\n- [ ] golangci-lint install script pinned to specific version tag\n- [ ] Version matches the golangci-lint version configured in the project\n\n## Dependencies\n\n- No file overlap with other findings\n- Pre-existing issue, lowest priority","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T00:22:32Z","created_by":"seanb4t","updated_at":"2026-02-10T01:30:10Z","closed_at":"2026-02-10T01:30:10Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.492","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.493","title":"C1: Task 23 (Bootstrap) missing 6 of 7 cross-phase dependencies in phase file","description":"## Issue\nPhase 7.4 file (docs/plans/2026-02-06-full-abac-phase-7.4.md:275-277) lists only T7 as a dependency for Task 23 (Bootstrap), but the master plan Mermaid diagram shows T6, T12, T16a, T16b, T18, T22b are also required.\n\nAn implementer reading only the phase file would miss critical blockers.\n\n## Acceptance Criteria\n- [ ] T23 dependency list in phase-7.4.md includes T6, T7, T12, T16a, T16b, T18, T22b\n- [ ] Dependencies match master plan Mermaid diagram\n- [ ] Cross-phase gate table updated if needed\n\n## Files\n- docs/plans/2026-02-06-full-abac-phase-7.4.md\n- docs/plans/2026-02-06-full-abac-implementation.md","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T02:03:25Z","created_by":"seanb4t","updated_at":"2026-02-10T13:35:44Z","closed_at":"2026-02-10T13:35:44Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.493","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.494","title":"C2: Task 22 (Seed policies) missing T12 dependency","description":"## Issue\nPhase 7.4 file (docs/plans/2026-02-06-full-abac-phase-7.4.md:26-28) lists only T21a as dependency for Task 22, but the PolicyCompiler (T12) is explicitly needed by acceptance criteria (\"compile without error via PolicyCompiler\").\n\n## Acceptance Criteria\n- [ ] T22 dependency list in phase-7.4.md includes T12\n- [ ] Dependencies match master plan and acceptance criteria requirements\n\n## Files\n- docs/plans/2026-02-06-full-abac-phase-7.4.md\n- docs/plans/2026-02-06-full-abac-implementation.md","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T02:03:30Z","created_by":"seanb4t","updated_at":"2026-02-10T13:37:04Z","closed_at":"2026-02-10T13:37:04Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.494","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.495","title":"C3: Critical path text implies sequential where diagram shows parallel","description":"## Issue\ndocs/plans/2026-02-06-full-abac-implementation.md:81 has critical path text T17.4→T18→T21a→T22→... which reads as sequential, but T18 and T21a are actually parallel branches from T17.4.\n\n## Decision\nChange text to: T17.4→(T18 + T21a→T22→T22b)→T23→T28→T28.5→T29\n\n## Acceptance Criteria\n- [ ] Critical path text accurately reflects parallel structure\n- [ ] Text matches the Mermaid diagram branching\n\n## Files\n- docs/plans/2026-02-06-full-abac-implementation.md","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T02:03:35Z","created_by":"seanb4t","updated_at":"2026-02-10T13:37:54Z","closed_at":"2026-02-10T13:37:54Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.495","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.496","title":"C4: Simplified critical path diagram fabricates T17.4→T21a edge","description":"## Issue\ndocs/plans/2026-02-06-full-abac-implementation.md:121 simplified critical path diagram shows a T17.4→T21a edge, but T21a has NO dependencies in the complete dependency diagram and Phase 7.3 says it \"has no ABAC dependencies.\"\n\n## Decision\nRemove the fabricated T17.4→T21a edge from the simplified diagram, or add the dependency to T21a's description if it is actually required.\n\n## Acceptance Criteria\n- [ ] Simplified diagram edges match actual dependency declarations\n- [ ] T21a dependencies are consistent across all documents\n\n## Files\n- docs/plans/2026-02-06-full-abac-implementation.md\n- docs/plans/2026-02-06-full-abac-phase-7.3.md","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T02:03:42Z","created_by":"seanb4t","updated_at":"2026-02-10T13:39:29Z","closed_at":"2026-02-10T13:39:29Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.496","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.497","title":"C5: Broken link to Decision #65 in phase-7.6.md","description":"## Issue\ndocs/plans/2026-02-06-full-abac-phase-7.6.md:791 references 065-migration-rollback-strategy.md but actual file is 065-git-revert-migration-rollback.md. Three other references in the same file use the correct name.\n\n## Acceptance Criteria\n- [ ] All references to Decision #65 use correct filename 065-git-revert-migration-rollback.md\n- [ ] No broken links remain in phase-7.6.md\n\n## Files\n- docs/plans/2026-02-06-full-abac-phase-7.6.md","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T02:03:47Z","created_by":"seanb4t","updated_at":"2026-02-10T13:40:24Z","closed_at":"2026-02-10T13:40:24Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.497","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.498","title":"I1-I2: Phases 7.5-7.7 tasks missing dependency declarations from master plan","description":"## Issue\nTasks in phases 7.5, 7.6, and 7.7 systematically omit dependency declarations that exist in the master plan Mermaid diagram. Implementers reading phase files in isolation will miss blockers.\n\n## Acceptance Criteria\n- [ ] All tasks in phase-7.5.md have dependency fields matching master plan diagram\n- [ ] All tasks in phase-7.6.md have dependency fields matching master plan diagram\n- [ ] All tasks in phase-7.7.md have dependency fields matching master plan diagram\n- [ ] Cross-reference with master plan Mermaid diagram confirms consistency\n\n## Files\n- docs/plans/2026-02-06-full-abac-phase-7.5.md\n- docs/plans/2026-02-06-full-abac-phase-7.6.md\n- docs/plans/2026-02-06-full-abac-phase-7.7.md\n- docs/plans/2026-02-06-full-abac-implementation.md","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T02:03:48Z","created_by":"seanb4t","updated_at":"2026-02-10T13:45:12Z","closed_at":"2026-02-10T13:45:12Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.498","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.499","title":"I3: Cross-phase gate table missing dependencies from phase files","description":"## Issue\nThe cross-phase gate table in the master plan is incomplete — missing deps declared in phase files (T26b→T17/T18, T27b-1→T7/T12/T17/T18).\n\n## Acceptance Criteria\n- [ ] Cross-phase gate table includes all dependencies declared in phase files\n- [ ] Bidirectional consistency: phase files and gate table agree\n\n## Files\n- docs/plans/2026-02-06-full-abac-implementation.md","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T02:03:48Z","created_by":"seanb4t","updated_at":"2026-02-10T13:50:46Z","closed_at":"2026-02-10T13:50:46Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.499","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.5","title":"[E7] Phase 7.3: Policy Engine \u0026 Attribute Providers","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.3.md`.\n\n\u003c!-- SPDX-License-Identifier: Apache-2.0 --\u003e\n\u003c!-- Copyright 2026 HoloMUSH Contributors --\u003e\n\n# Phase 7.3: Policy Engine \u0026 Attribute Providers\n\n\u003e **[Back to Overview](./2026-02-06-full-abac-implementation.md)** | **[Previous: Phase 7.2](./2026-02-06-full-abac-phase-7.2.md)** | **[Next: Phase 7.4](./2026-02-06-full-abac-phase-7.4.md)**\n\nTask Inventory:\n- T13: Attribute provider interface and schema registry\n- T14: Attribute resolver with per-request caching\n- T15: Core attribute providers (character, location, object)\n- T16a: Simple providers (environment, command, stream, exit stub, scene stub)\n- T16b: PropertyProvider with recursive CTE\n- T17.1: System bypass + session resolution (Steps 1-2)\n- T17.2: Target matching and policy filtering (Step 4)\n- T17.3: Condition evaluation via DSL (Step 5)\n- T17.4: Deny-overrides combination + integration (Step 6 + glue)\n- T18: Policy cache with LISTEN/NOTIFY invalidation\n- T19: Audit logger\n- T19b: Audit log retention and partition management\n- T20: Prometheus metrics for ABAC\n- T21: Performance benchmarks\n- T21b: CI benchmark enforcement\n- T21a: Remove @-prefix from command names\n\nThis epic tracks phase-scoped execution of the ABAC implementation plan. Child tasks preserve plan-level dependencies and carry explicit TDD and independent-review gates.","acceptance_criteria":"- [ ] All planned Phase 7.3 tasks are represented as child beads under this epic.\n- [ ] Each child task is executed with the plan's mandatory TDD protocol (fail test first, then pass with `task test`; SQL migration exception applies with required integration coverage).\n- [ ] Each child task receives a passing independent reviewer-agent review confirming acceptance criteria, spec alignment, design/ADR alignment, and resolution of findings.\n- [ ] Inter-task and cross-phase dependencies are linked in beads and respected before this epic is closed.\n- [ ] M3 gate achieved at T17.4 (engine evaluation flow operational).","status":"closed","priority":1,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:32:39Z","created_by":"seanb4t","updated_at":"2026-02-13T19:47:57Z","closed_at":"2026-02-13T19:47:57Z","close_reason":"PR #86 merged — policy engine, attribute providers, metrics, audit, and benchmarks all landed","dependencies":[{"issue_id":"holomush-5k1.5","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.5","depends_on_id":"holomush-5k1.3","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.5","depends_on_id":"holomush-5k1.4","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.5.1","title":"[ABAC Plan 7.3] T13: Attribute provider interface and schema registry","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.3.md` task section at line 8.\n\n**Spec References:** [01-core-types.md#attribute-providers](../specs/abac/01-core-types.md#attribute-providers), [04-resolution-evaluation.md#attribute-schema-registry](../specs/abac/04-resolution-evaluation.md#attribute-schema-registry), [04-resolution-evaluation.md#provider-registration](../specs/abac/04-resolution-evaluation.md#provider-registration)\n\n**ADR References:** [082-core-first-provider-registration-order.md](../specs/decisions/epic7/phase-7.3/082-core-first-provider-registration-order.md)\n\n**Dependencies:**\n\n- Task 5 (Phase 7.1) — AttributeSchema and NamespaceSchema types must exist before schema registry\n- Task 6 (Phase 7.1) — Prefix parser defines identifier format needed by provider interface\n\n\u003e **Design note:** `AttributeSchema` and `AttrType` are defined in `internal/access/policy/types/` (Task 5 ([Phase 7.1](./2026-02-06-full-abac-phase-7.1.md))) to prevent circular imports. The `policy` package (compiler) needs `AttributeSchema`, and the `attribute` package (resolver) needs `types.AccessRequest` and `types.AttributeBags`. Both import from `types` package.\n\n**Acceptance Criteria:**\n\n- [ ] `AttributeProvider` interface: `Namespace()`, `ResolveSubject()`, `ResolveResource()`, `LockTokens()`\n- [ ] `EnvironmentProvider` interface: `Namespace()`, `Resolve()`\n- [ ] `AttributeSchema` supports: `Register()`, `IsRegistered()` (uses type definition from Task 5 ([Phase 7.1](./2026-02-06-full-abac-phase-7.1.md)))\n- [ ] Engine enforces core-first provider registration order (ADR #82)\n- [ ] Duplicate namespace registration → error\n- [ ] Empty namespace → error\n- [ ] Duplicate attribute key within namespace → error\n- [ ] Invalid attribute type → error\n- [ ] Providers MUST return all numeric attributes as `float64` (per spec [01-core-types.md#core-attribute-schema](../specs/abac/01-core-types.md#core-attribute-schema))\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Create: `internal/access/policy/attribute/provider.go`\n- Create: `internal/access/policy/attribute/schema.go`\n- Test: `internal/access/policy/attribute/schema_test.go`\n\n**Step 1: Write failing tests for schema registration**\n\nTest cases: register namespace, duplicate namespace → error, empty namespace → error, duplicate attribute key → error, invalid type → error, `IsRegistered()` returns correct results.\n\n**Step 2: Implement**\n\n[Code snippet omitted; see source plan section for full example.]\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Step 3: Run tests, commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Sonnet 4.5\n**Complexity:** Moderate-high — interface design for AttributeProvider + SchemaRegistry with registration pattern\n**Scope:** 2-3 files (interfaces, registry implementation, tests)\n**Criticality:** High — all providers implement this interface\n**Reasoning:** Interface design is specified in 01-core-types.md and 04-resolution-evaluation.md. Registration pattern follows established Go conventions. ADR 082 provides clear guidance. Sonnet handles spec-driven interface design.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:46Z","created_by":"seanb4t","updated_at":"2026-02-13T02:46:43Z","closed_at":"2026-02-13T02:46:43Z","close_reason":"Wave 1 complete","labels":["abac","phase-7-3","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.5.1","depends_on_id":"holomush-5k1.3.10","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.5.1","depends_on_id":"holomush-5k1.3.9","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.5.1","depends_on_id":"holomush-5k1.5","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.5.10","title":"[ABAC Plan 7.3] T18: Policy cache with LISTEN/NOTIFY invalidation","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.3.md` task section at line 854.\n\n**Spec References:** [05-storage-audit.md#cache-invalidation](../specs/abac/05-storage-audit.md#cache-invalidation), ADR 0016 (LISTEN/NOTIFY cache invalidation)\n\n**Dependencies:**\n\n- Task 7 (Phase 7.1) — PolicyStore must exist for cache to fetch policies from\n- Task 12 (Phase 7.2) — PolicyCompiler must exist for cache to recompile policies on reload\n\n**Acceptance Criteria:**\n\n- [ ] `Snapshot()` returns read-only copy safe for concurrent use\n- [ ] `Reload()` fetches all enabled policies from store, recompiles, swaps snapshot atomically\n- [ ] `Reload()` uses write lock only for swapping compiled policies; `Evaluate()` uses read lock during reload (no blocking)\n- [ ] `Start()` method spawns LISTEN/NOTIFY goroutine; context cancellation stops goroutine\n- [ ] `Listen()` subscribes to PostgreSQL `NOTIFY` on `policy_changed` channel using dedicated (non-pooled) connection\n- [ ] NOTIFY event → cache reloads before next evaluation\n- [ ] Concurrent reads during reload → stale reads tolerable (snapshot semantics)\n- [ ] Connection drop + reconnect → full reload with exponential backoff (initial 100ms, max 30s, 2x backoff)\n- [ ] Reconnect backoff resets after successful NOTIFY receipt\n- [ ] Health check for subscription liveness (verify connection is alive and listening)\n- [ ] Staleness detection: if no reload occurs within configurable threshold, system detects stale cache state\n- [ ] Reload latency \u003c50ms (benchmark test)\n- [ ] Cache staleness threshold: configurable limit (default 30s) on time since last successful reload\n- [ ] When staleness threshold exceeded → fail-closed (return `EffectDefaultDeny`) without evaluating policies\n- [ ] Prometheus gauge `abac_policy_cache_last_update` (Unix timestamp) updated on every successful reload\n- [ ] **Graceful shutdown:** LISTEN/NOTIFY goroutine stops via context cancellation; shutdown test verifies goroutine exits cleanly\n- [ ] **pg_notify semantics MUST be transactional:** policy write and cache invalidation notification MUST occur in the same database transaction (prevents race conditions where cache invalidates before write commits). All policy store mutations (PolicyStore interface) MUST include pg_notify call within the transaction.\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Create: `internal/access/policy/cache.go`\n- Test: `internal/access/policy/cache_test.go`\n\n**Step 1: Write failing tests**\n\n- Load policies from store → cache snapshot available\n- NOTIFY event on `policy_changed` → cache reloads before next evaluation\n- Concurrent reads during reload → use snapshot semantics (stale reads tolerable)\n- Connection drop → exponential backoff reconnect (100ms, 200ms, 400ms, ..., max 30s)\n- Successful NOTIFY receipt → backoff timer resets\n- Context cancellation → goroutine exits cleanly\n- Cache staleness exceeds threshold → `Evaluate()` returns `EffectDefaultDeny` for all requests (fail-closed)\n- Reload latency benchmark: \u003c50ms target\n\n**Step 2: Implement**\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Goroutine Lifecycle:**\n\n1. **Start:** `PolicyCache.Start(ctx, connStr)` spawns the LISTEN/NOTIFY goroutine\n2. **Reconnect:** Exponential backoff on connection loss (initial 100ms, max 30s, 2x backoff)\n3. **Reset:** Backoff timer resets to 100ms after successful NOTIFY receipt\n4. **Shutdown:** Context cancellation causes goroutine to exit cleanly\n\n**Concurrency Pattern:**\n\n- **Read lock:** `Evaluate()` calls acquire read lock during policy evaluation (non-blocking during reload)\n- **Write lock:** `Reload()` acquires write lock only for swapping compiled policies (~50μs)\n- **No lock during compilation:** Fetch from DB and compile policies without holding lock (~50ms)\n\n**Transactional pg_notify Semantics:**\n\nAll policy store mutations (PolicyStore interface implementations: `Create`, `Update`, `Delete`, etc.) MUST call `pg_notify('policy_changed', \u003cpayload\u003e)` within the same database transaction as the policy write. This ensures cache invalidation notifications are atomic with policy persistence and prevents race conditions where cache invalidates before the transaction commits.\n\nExample pattern for any PolicyStore write operation:\n\n[Code snippet omitted; see source plan section for full example.]\n\nThis pattern applies to all PolicyStore implementations (T7 from Phase 7.1, T18 cache, and any other store mutations). By centralizing this requirement in T18, the cache infrastructure documents the transactional guarantee once, avoiding duplication across lock compiler (T25), command handlers (T26+), and other policy writers.\n\n**Step 3: Run tests, commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Opus 4.6\n**Complexity:** High — concurrent cache with PostgreSQL LISTEN/NOTIFY invalidation, snapshot isolation\n**Scope:** 3-4 files (cache, listener, tests), concurrent access patterns\n**Criticality:** Very high — stale cache = stale authorization decisions\n**Reasoning:** Policy cache must provide read-consistent snapshots while handling concurrent NOTIFY-triggered reloads. Requires careful concurrency design (RWMutex or atomic swap), reconnection handling for LISTEN channel, and recompilation of policies on reload. ADR 0016 documents LISTEN/NOTIFY limitations. Opus needed for concurrent cache design with correctness guarantees.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:47Z","created_by":"seanb4t","updated_at":"2026-02-13T02:46:43Z","closed_at":"2026-02-13T02:46:43Z","close_reason":"Wave 1 complete","labels":["abac","phase-7-3","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.5.10","depends_on_id":"holomush-5k1.3.11","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.5.10","depends_on_id":"holomush-5k1.4.5","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.5.10","depends_on_id":"holomush-5k1.5","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.5.11","title":"[ABAC Plan 7.3] T19: Audit logger","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.3.md` task section at line 1061.\n\n**Spec References:** [05-storage-audit.md#audit-log-serialization](../specs/abac/05-storage-audit.md#audit-log-serialization), [05-storage-audit.md#audit-log-configuration](../specs/abac/05-storage-audit.md#audit-log-configuration), [05-storage-audit.md#audit-log-retention](../specs/abac/05-storage-audit.md#audit-log-retention)\n\n**Dependencies:**\n\n- Task 2 (Phase 7.1) — access_audit_log table must exist before audit writes\n- Task 5 (Phase 7.1) — core types (Effect, AttributeBags) needed for audit entries\n\n**Acceptance Criteria:**\n\n- [ ] Three audit modes: `minimal` (system bypasses + denials), `denials_only`, `all`\n- [ ] Mode `minimal`: system bypasses + denials logged\n- [ ] Mode `denials_only`: denials + default deny + system bypass logged, allows skipped\n- [ ] Mode `all`: everything logged\n- [ ] **Sync write for denials and system bypasses:** `deny`, `default_deny`, and `system_bypass` events written synchronously to PostgreSQL before `Evaluate()` returns\n\n\u003e **Note:** Denials elevated from spec SHOULD to MUST. Rationale: denial audit integrity is critical for security forensics. The ~1-2ms latency per denial is acceptable given denial events are uncommon in normal operation.\n\u003e\n\u003e **Note:** System bypasses use sync path per [ADR 66](../specs/decisions/epic7/phase-7.3/066-sync-audit-system-bypass.md). Rationale: Privileged operations require guaranteed audit trails. System bypasses are rare (server startup, admin maintenance) so sync write cost is negligible. Prevents gaps in audit trail for privilege escalation.\n\u003e\n\u003e **Security requirement (S3):** The `minimal` audit mode logs system bypasses\n\u003e and denials (deny and default_deny) but suppresses allows. Tests MUST verify\n\u003e denial logging behavior matches documented semantics in all modes.\n\n- [ ] **Denials MUST be logged in ALL modes (S3):** Denials (deny and default_deny effects) logged in minimal, denials_only, and all modes (citing spec S3 requirement)\n- [ ] **Async write for regular allows:** `allow` events (non-system-bypass) written asynchronously via buffered channel\n- [ ] Channel full → entry dropped, `abac_audit_channel_full_total` metric incremented\n- [ ] **WAL fallback (S7 requirement from holomush-5k1.353):** If sync write fails, denial entry MUST be written to WAL path from `internal/xdg` package (append-only, O_SYNC)\n- [ ] **ReplayWAL():** Method reads WAL entries, batch-inserts to PostgreSQL, truncates file on success\n- [ ] Catastrophic failure (DB + WAL fail) → log to stderr at ERROR, increment `abac_audit_failures_total{reason=\"wal_failed\"}`, drop entry\n- [ ] Entry includes: subject, action, resource, effect, policy\\_id, policy\\_name, attributes snapshot, duration\\_us\n- [ ] `audit/postgres.go` batch-inserts from channel (async) and handles sync writes (denials)\n- [ ] **Graceful shutdown:** Async channel consumer goroutine stops accepting new entries, drains buffered channel, closes WAL file, exits cleanly\n- [ ] **Shutdown order:** Stop accepting new entries → drain channel → flush to DB → close WAL file → stop consumer goroutine\n- [ ] Shutdown test verifies all buffered entries written before goroutine exits\n- [ ] **WAL monitoring:** `abac_audit_wal_entries` Prometheus gauge tracks current WAL entry count (registered by Task 20, updated by Task 19)\n- [ ] **WAL threshold:** Configurable threshold for WAL size (default 10MB or 10,000 entries) for alerting on persistent DB failures (Task 19 ownership)\n- [ ] **WAL metric updates:** WAL gauge incremented/decremented by audit logger (Task 19) during WAL write and replay operations\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Create: `internal/access/policy/audit/logger.go`\n- Create: `internal/access/policy/audit/postgres.go`\n- Test: `internal/access/policy/audit/logger_test.go`\n\n**Step 1: Write failing tests**\n\n- Mode `minimal`: system bypasses + denials logged (per ADR #86)\n  - [ ] Test: minimal mode + system_bypass → written\n  - [ ] Test: minimal mode + allow → dropped\n  - [ ] Test: minimal mode + deny → written (denials logged even in minimal mode per ADR #86)\n- Mode `denials_only`: denials + default deny + system bypass logged, allows skipped\n- Mode `all`: everything logged\n- **Sync write for denials and system bypasses:** `deny`, `default_deny`, and `system_bypass` events written synchronously, `Evaluate()` blocks until write completes\n- **Async write for regular allows:** `allow` events (non-system-bypass) submitted via buffered channel, doesn't block `Evaluate()`\n- Channel full: entry dropped, `abac_audit_channel_full_total` metric incremented\n- **WAL fallback:** If sync write fails, denial entry written to WAL path from `internal/xdg` package\n- **ReplayWAL():** Reads WAL file, batch-inserts to PostgreSQL, truncates on success\n- Catastrophic failure: DB + WAL fail → stderr log, `abac_audit_failures_total{reason=\"wal_failed\"}` incremented, entry dropped\n- Verify entry contains: subject, action, resource, effect, policy_id, policy_name, attributes snapshot, duration_us\n\n**Step 2: Implement**\n\n[Code snippet omitted; see source plan section for full example.]\n\n`audit/postgres.go` implements both async batch-inserts from the channel and synchronous single writes for security-significant decisions. The logger distinguishes between effects:\n\n- **`deny`, `default_deny`, and `system_bypass`:** Call `writer.WriteSync()` synchronously before returning from `Log()`. If the write fails, append the entry to `$XDG_STATE_HOME/holomush/audit-wal.jsonl` (opened with `O_APPEND | O_SYNC`). If both DB and WAL fail, log to stderr, increment `abac_audit_failures_total{reason=\"wal_failed\"}`, and drop the entry.\n- **`allow` (regular, non-system-bypass):** Send to `entryCh` buffered channel for async batch writes. If channel is full, drop entry and increment `abac_audit_channel_full_total`.\n\n**Audit Path Summary:**\n\n| Effect            | Write Path | Rationale                                      |\n| ----------------- | ---------- | ---------------------------------------------- |\n| `deny`            | Sync       | Security forensics — evidence of denials       |\n| `default_deny`    | Sync       | Security forensics — evidence of denials       |\n| `system_bypass`   | Sync       | Privileged operations — guaranteed audit trail |\n| `allow` (regular) | Async      | Performance — high-volume routine operations   |\n\n`ReplayWAL()` reads JSON-encoded entries from the WAL file, batch-inserts them to PostgreSQL, and truncates the file on success. The server calls this on startup and MAY call it periodically (e.g., every 5 minutes) during recovery.\n\n**Step 3: Run tests, commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Sonnet 4.5\n**Complexity:** Moderate-high — WAL-based audit logger with configurable levels and async writes\n**Scope:** 2-3 files (logger, config, tests), batch insert to audit table\n**Criticality:** High — audit logging is security-critical for compliance\n**Reasoning:** Audit logger follows established patterns (batch writes, configurable levels). Schema is fully defined in spec. The main complexity is buffered async writes with proper flush guarantees. Sonnet handles this moderate async pattern well.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:47Z","created_by":"seanb4t","updated_at":"2026-02-13T02:46:43Z","closed_at":"2026-02-13T02:46:43Z","close_reason":"Wave 1 complete","labels":["abac","phase-7-3","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.5.11","depends_on_id":"holomush-5k1.3.4","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.5.11","depends_on_id":"holomush-5k1.3.9","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.5.11","depends_on_id":"holomush-5k1.5","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.5.12","title":"[ABAC Plan 7.3] T19b: Audit log retention and partition management","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.3.md` task section at line 1202.\n\n**Spec References:** [05-storage-audit.md#audit-log-retention](../specs/abac/05-storage-audit.md#audit-log-retention)\n\n**Dependencies:**\n\n- Task 19 (Phase 7.3) — audit logger must exist before retention management\n\n**Acceptance Criteria:**\n\n- [ ] `AuditConfig` struct with `RetainDenials` (90 days), `RetainAllows` (7 days), `PurgeInterval` (24h)\n- [ ] Background goroutine for partition lifecycle: create future partitions, detach/drop expired partitions\n- [ ] Partition creation: pre-create next 3 months of partitions using IF NOT EXISTS (idempotent)\n- [ ] Two-tier retention strategy: partition drops at 90-day threshold (longer retention), row-level DELETE for allow rows older than 7 days within active partitions\n- [ ] Partition drops use 90-day threshold (denial retention period) since monthly partitions contain mixed effects\n- [ ] Row-level DELETE removes allow-effect rows older than 7 days within still-attached partitions\n- [ ] Partition expiration: detach partitions older than retention period, drop after 7-day grace period\n- [ ] Health check endpoint: verify current month's partition exists and is attached\n- [ ] Health check alerts if no valid partition for current timestamp\n- [ ] `PurgeInterval` configurable via flag (default 24h)\n- [ ] Startup: create missing partitions, schedule first purge cycle\n- [ ] Graceful shutdown: stop background goroutine\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Create: `internal/access/policy/audit/retention.go`\n- Modify: `internal/access/policy/audit/postgres.go` (add partition management)\n- Test: `internal/access/policy/audit/retention_test.go`\n\n**Step 1: Write failing tests**\n\n- `AuditConfig` struct with retention periods (denials: 90d, allows: 7d)\n- Background goroutine creates future partitions (next 3 months)\n- Two-tier retention: partition drops at 90-day threshold, row-level DELETE for allow-effect rows older than 7 days\n- Background goroutine detaches expired partitions based on retention period\n- Health check: returns error if current partition missing\n- Purge cycle runs every `PurgeInterval` (default 24h)\n\n**Note:** Monthly partitions contain mixed effects (allows and denials). Partition-level drops use the longer retention period (90 days for denials). Within active partitions, row-level DELETE removes allow-effect rows older than 7 days.\n\n**Step 2: Implement**\n\n[Code snippet omitted; see source plan section for full example.]\n\nPartition lifecycle ([05-storage-audit.md#audit-log-retention](../specs/abac/05-storage-audit.md#audit-log-retention)):\n\n1. Pre-create partitions for next 3 months\n2. Detach partitions older than `RetainDenials` (90 days for denials, 7 days for allows)\n3. Drop detached partitions after 7-day grace period\n4. Health check ensures current partition exists\n\n**Step 3: Run tests, commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Sonnet 4.5\n**Complexity:** Moderate — background goroutine for partition lifecycle management\n**Scope:** 1-2 files, partition creation/dropping based on retention config\n**Criticality:** Medium — important for long-running systems but not urgent\n**Reasoning:** Partition management follows standard Go background goroutine patterns. Config is well-defined (90-day denials, 7-day allows). Sonnet handles background job patterns reliably.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:47Z","created_by":"seanb4t","updated_at":"2026-02-13T03:20:45Z","closed_at":"2026-02-13T03:20:45Z","close_reason":"Wave 2 complete: resolver, providers, retention","labels":["abac","phase-7-3","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.5.12","depends_on_id":"holomush-5k1.5","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.5.12","depends_on_id":"holomush-5k1.5.11","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.5.13","title":"[ABAC Plan 7.3] T20: Prometheus metrics for ABAC","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.3.md` task section at line 1337.\n\n**Spec References:** [04-resolution-evaluation.md#performance-targets](../specs/abac/04-resolution-evaluation.md#performance-targets) — observability metrics are part of the performance targets section\n\n**Dependencies:**\n\n- Task 17.4 (Phase 7.3) — engine must be operational before metrics can be wired into evaluation flow\n\n**Acceptance Criteria:**\n\n- [ ] `abac_evaluate_duration_seconds` histogram recorded after each `Evaluate()`\n- [ ] `abac_policy_evaluations_total` counter with `source` (values: seed/lock/admin/plugin) and `effect` labels — avoids unbounded cardinality from admin-created policy names\n- [ ] Cardinality concern documented: `source` label preferred over `name` label to prevent metric explosion from admin policy names\n- [ ] All metrics reviewed for unbounded label values (no `name`, `subject_id`, `resource_id` labels)\n- [ ] `abac_audit_channel_full_total` counter for dropped audit entries (Task 20 ownership)\n- [ ] `abac_audit_failures_total` counter with `reason` label (see spec Evaluation Algorithm \u003e Performance Targets) (Task 20 ownership)\n- [ ] `abac_audit_wal_entries` gauge for current WAL entry count (Task 20 ownership - registered here, updated by Task 19 audit logger)\n- [ ] `abac_degraded_mode` gauge (0=normal, 1=degraded) (see spec Attribute Resolution \u003e Error Handling for degraded mode) (Task 20 ownership)\n- [ ] **Degraded mode alerting (Review Finding I3):** Alert configuration documented for `abac_degraded_mode == 1` with critical severity, includes recovery procedure reference to Task 31 degraded-mode runbook and [Decision #96](../specs/decisions/epic7/general/096-defer-phase-7-5-to-epic-8.md) temporary recovery path (DB flag reset or server restart)\n- [ ] Alert fires when `abac_degraded_mode` gauge equals 1 for \u003e1 minute, indicating prolonged degraded state\n- [ ] `abac_provider_circuit_breaker_trips_total` counter with `provider` label (registered here, tripped by Task 34's general circuit breaker — see [Decision #74](../specs/decisions/epic7/phase-7.7/074-unified-circuit-breaker-task-34.md))\n- [ ] `abac_provider_errors_total` counter with `namespace` and `error_type` labels\n- [ ] `abac_policy_cache_last_update` gauge with Unix timestamp (updated on every successful cache reload — tracks LISTEN/NOTIFY connection freshness)\n- [ ] **LISTEN/NOTIFY staleness monitoring (Review Finding H1):** Alert threshold for LISTEN/NOTIFY connection health documented (alert if `time.Now() - abac_policy_cache_last_update \u003e 5 minutes` indicates prolonged disconnection)\n- [ ] Staleness monitoring rationale: LISTEN/NOTIFY connection drop causes silent cache staleness without indication — gauge enables alerting on prolonged disconnection before cache becomes dangerously outdated\n- [ ] Recovery procedure reference: On prolonged disconnection, manual cache reload triggers full policy refresh (see Task 17 LISTEN/NOTIFY reconnect logic with exponential backoff)\n- [ ] `abac_unregistered_attributes_total` counter vec with `namespace` and `key` labels (schema drift indicator)\n- [ ] `RegisterMetrics()` follows existing pattern from `internal/observability/server.go`\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Create: `internal/access/policy/metrics.go`\n- Test: `internal/access/policy/metrics_test.go`\n\n**Step 1: Write tests verifying metrics are recorded**\n\nAfter `Evaluate()`, verify the relevant counters/histograms are updated.\n\n**Step 2: Implement**\n\nFollow existing observability pattern from `internal/observability/server.go`:\n\n[Code snippet omitted; see source plan section for full example.]\n\n**LISTEN/NOTIFY Staleness Monitoring (Review Finding H1):**\n\nThe `abac_policy_cache_last_update` gauge tracks LISTEN/NOTIFY connection health. If the LISTEN connection drops silently, the cache becomes stale without indication. Alert configuration:\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Recovery procedure:** Task 17's LISTEN/NOTIFY goroutine automatically reconnects with exponential backoff (initial 100ms, max 30s) and triggers full cache reload on reconnect. Manual intervention: restart server or use the local/system-only policy reload path defined in Task 31 (Phase 7.7).\n\n**Degraded Mode Alerting (Review Finding I3):**\n\nThe `abac_degraded_mode` gauge tracks engine degraded mode state (0=normal, 1=degraded). When a corrupted forbid/deny policy is detected (Task 31, Phase 7.7), the engine enters degraded mode and returns system-wide denials to prevent security bypass. Alert configuration:\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Recovery procedure:** Task 31 (Phase 7.7) implements degraded mode behavior. Operator workflow for Epic 7: 1) Identify and fix/disable the corrupted policy, 2) Clear degraded mode via [Decision #96](../specs/decisions/epic7/general/096-defer-phase-7-5-to-epic-8.md) workaround (DB flag reset or server restart), 3) Verify `abac_degraded_mode` gauge returns to 0. The `policy clear-degraded-mode` command remains deferred to Epic 8 (Task 27b-3).\n\n**Step 3: Run tests, commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Sonnet 4.5\n**Complexity:** Low-moderate — adding Prometheus histograms and counters to ABAC engine\n**Scope:** 1-2 files, metric registration + instrumentation of existing code paths\n**Criticality:** Medium — observability is important but follows standard patterns\n**Reasoning:** Standard Prometheus instrumentation following existing observability patterns in the codebase. Metric names and types are specified. Sonnet handles metrics instrumentation efficiently.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:47Z","created_by":"seanb4t","updated_at":"2026-02-13T15:37:01Z","closed_at":"2026-02-13T15:37:01Z","close_reason":"Implemented in Wave 7 commit: metrics and benchmarks","labels":["abac","phase-7-3","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.5.13","depends_on_id":"holomush-5k1.5","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.5.13","depends_on_id":"holomush-5k1.5.9","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.5.14","title":"[ABAC Plan 7.3] T21: Performance benchmarks","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.3.md` task section at line 1479.\n\n**Spec References:** [04-resolution-evaluation.md#performance-targets](../specs/abac/04-resolution-evaluation.md#performance-targets)\n\n**Dependencies:**\n\n- Task 17.4 (Phase 7.3) — engine must be fully operational before benchmarks can measure performance\n\n\u003e **Performance Targets (Decision #23):** Evaluate() p99 \u003c25ms, attribute resolution \u003c2ms, DSL evaluation \u003c1ms, cache reload \u003c50ms (200 concurrent users). See [Decision #23](../specs/decisions/epic7/general/023-performance-targets.md).\n\n**Acceptance Criteria:**\n\n- [ ] **DB-inclusive benchmarks** (with PostgreSQL queries):\n  - [ ] `BenchmarkEvaluate_ColdCache` — p99 \u003c10ms\n  - [ ] `BenchmarkEvaluate_WarmCache` — p99 \u003c25ms\n  - [ ] `BenchmarkAttributeResolution_Cold` — \u003c2ms\n  - [ ] `BenchmarkAttributeResolution_Warm` — \u003c100μs\n  - [ ] `BenchmarkCacheReload` — \u003c50ms\n  - [ ] `BenchmarkPropertyProvider_ParentLocation` — recursive CTE with varying depths (1, 5, 10, 20 levels)\n  - [ ] PropertyProvider benchmark validates 100ms timeout appropriateness\n  - [ ] PropertyProvider benchmark verifies timeout behavior under load (circuit breaker logic tested in Task 34)\n  - [ ] `BenchmarkProviderStarvation` — slow first provider consuming ~80ms of 100ms budget, verifies subsequent providers receive cancelled contexts (per spec fair-share timeout requirement)\n- [ ] **Pure computation benchmarks** (no I/O, in-memory only):\n  - [ ] `BenchmarkConditionEvaluation` — \u003c1ms per policy (pure computation)\n  - [ ] `BenchmarkWorstCase_NestedIf` — 32-level nesting \u003c25ms (pure computation)\n  - [ ] `BenchmarkWorstCase_AllPoliciesMatch` — 50 policies \u003c10ms (pure computation)\n  - [ ] Pure/no-IO microbenchmarks: single-policy evaluation \u003c10μs\n  - [ ] Pure/no-IO microbenchmarks: 50-policy set evaluation \u003c100μs\n  - [ ] Pure/no-IO microbenchmarks: attribute resolution \u003c50μs\n- [ ] Setup: 50 active policies, 3 operators per condition avg, 10 attributes per entity\n- [ ] All benchmarks run without errors\n\n**Files:**\n\n- Create: `internal/access/policy/engine_bench_test.go`\n\n**Step 1: Write benchmarks per spec performance targets**\n\n[Code snippet omitted; see source plan section for full example.]\n\nSetup: 50 active policies (25 permit, 25 forbid), 3 operators per condition average, 10 attributes per entity.\n\n**BenchmarkProviderStarvation implementation:**\n\nSimulates a slow first provider consuming ~80ms of the 100ms total budget. Verifies that:\n\n- Subsequent providers receive contexts with `ctx.Err() == context.DeadlineExceeded`\n- Fair-share timeout calculation correctly allocates remaining budget\n- Provider starvation is observable and measurable\n\n**Step 2: Run benchmarks**\n\nRun: `go test -bench=. -benchmem ./internal/access/policy/`\nExpected: All within spec targets\n\n**Note:** Direct `go test` is intentional here — benchmark testing is not covered by `task test` runner.\n\n**Step 3: Commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] Expected: All within spec targets\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Sonnet 4.5\n**Complexity:** Moderate — benchmark tests with specific performance targets (p99 \u003c25ms, resolution \u003c2ms)\n**Scope:** 1-2 files, Go benchmark functions with realistic test scenarios\n**Criticality:** Medium-high — validates performance but implementation is standard\n**Reasoning:** Go benchmark testing follows established patterns. Performance targets are clearly specified (Decision 23). Main work is setting up realistic test scenarios. Sonnet handles benchmark implementation well.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:47Z","created_by":"seanb4t","updated_at":"2026-02-13T15:37:01Z","closed_at":"2026-02-13T15:37:01Z","close_reason":"Implemented in Wave 7 commit: metrics and benchmarks","labels":["abac","phase-7-3","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.5.14","depends_on_id":"holomush-5k1.5","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.5.14","depends_on_id":"holomush-5k1.5.9","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.5.15","title":"[ABAC Plan 7.3] T21b: CI benchmark enforcement","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.3.md` task section at line 1555.\n\n**Spec References:** [04-resolution-evaluation.md#performance-targets](../specs/abac/04-resolution-evaluation.md#performance-targets) — \"CI MUST fail if any benchmark exceeds 110% of its documented target value\"\n\n**Dependencies:**\n\n- Task 21 (Phase 7.3) — benchmarks must exist before CI can enforce regression limits\n\n**Acceptance Criteria:**\n\n- [ ] GitHub Actions workflow configured to run benchmarks on pull requests\n- [ ] Benchmark baseline file stored in repository (e.g., `.benchmarks/baseline.txt`)\n- [ ] CI step compares current benchmark results against baseline values\n- [ ] CI fails if ANY benchmark exceeds 110% of documented target (e.g., cold Evaluate p99 \u003e11ms, warm \u003e27.5ms)\n- [ ] Baseline update strategy documented: manual update via `make update-benchmark-baseline` or similar\n- [ ] Benchmark regression failures treated as build failures (PRs cannot merge)\n- [ ] Test: Simulate benchmark regression → verify CI fails with clear error message\n- [ ] Documentation added to contributor guide explaining benchmark enforcement\n\n**Files:**\n\n- Create: `.github/workflows/benchmark-check.yml`\n- Create: `scripts/check-benchmark-regression.sh`\n- Create: `.benchmarks/baseline.txt` (baseline values)\n- Modify: `docs/contributors/testing.md` or similar (document baseline update process)\n\n**Step 1: Write benchmark comparison script**\n\nCreate `scripts/check-benchmark-regression.sh`:\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Step 2: Create GitHub Actions workflow**\n\nCreate `.github/workflows/benchmark-check.yml`:\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Step 3: Create baseline file with documented targets**\n\nCreate `.benchmarks/baseline.txt` with values from Task 21 acceptance criteria:\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Step 4: Document baseline update process**\n\nAdd section to contributor docs explaining when and how to update baseline (e.g., after intentional performance improvements or architecture changes).\n\n**Step 5: Test regression detection**\n\nTemporarily modify a benchmark to exceed 110% threshold, verify CI fails with clear error message.\n\n**Step 6: Commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Estimated Effort:** 4 hours\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Sonnet 4.5\n**Complexity:** Low-moderate — GitHub Actions workflow for benchmark regression detection\n**Scope:** 1-2 YAML files, benchmark comparison script\n**Criticality:** Medium — CI gate prevents regressions but is standard CI work\n**Reasoning:** GitHub Actions benchmark workflow follows established CI patterns. 110% regression threshold is defined. Sonnet handles CI configuration reliably.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:47Z","created_by":"seanb4t","updated_at":"2026-02-13T15:53:16Z","closed_at":"2026-02-13T15:53:16Z","close_reason":"Implemented and committed on feat/abac-phase-7.3","labels":["abac","phase-7-3","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.5.15","depends_on_id":"holomush-5k1.5","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.5.15","depends_on_id":"holomush-5k1.5.14","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.5.16","title":"[ABAC Plan 7.3] T21a: Remove @-prefix from command names","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.3.md` task section at line 1666.\n\n\u003e **Note:** The @-prefix exists only in access control permission strings (e.g., `\"execute:command:@dig\"`), not in actual command registrations. Command validation explicitly rejects `@` as a leading character.\n\n**Spec References:** Seed policies reference command names without @ prefix\n\n**Dependencies:** None (standalone codebase-wide rename, can be submitted as independent PR)\n\n**Placement Justification:**\n\nThis task is placed in Phase 7.3 as a prerequisite for Task 22 seed policies (Phase 7.4), which reference bare command names (e.g., `dig`, `create`) rather than @-prefixed variants. The @-prefix removal must occur before seed policy installation to ensure policy conditions match actual command names.\n\n**Implementation Note:**\n\nThis task MAY be submitted as an independent PR before or during Phase 7.3, as the @-prefix removal is a standalone codebase-wide rename that does not depend on other ABAC infrastructure.\n\n**Acceptance Criteria:**\n\n- [ ] All command name handling removes @ prefix\n- [ ] No `@`-prefixed command names remain in codebase\n- [ ] Command lock expressions reference bare command names (e.g., `dig`, `create`, not `@dig`, `@create`)\n- [ ] `task test` passes\n- [ ] `task lint` passes\n\n\u003e **Verified (2026-02-07):** @-prefixed command names confirmed in `permissions.go` (4), `permissions_test.go` (1), `static_test.go` (4). Total: 9 occurrences. Command validation rejects `@` as leading character — the `@` exists only in permission string encoding, not in actual command names.\n\u003e\n\u003e **Note:** 4 of 9 @-prefixed name occurrences are in `static_test.go` which is deleted by Task 29 ([Phase 7.6](./2026-02-06-full-abac-phase-7.6.md)). Only 5 occurrences in `permissions.go` and `permissions_test.go` need modification in this task.\n\u003e\n\u003e **Note:** This task could be submitted as an independent pre-ABAC PR. It only modifies `internal/access/permissions.go` and has no ABAC dependencies.\n\n**Files:**\n\n- `internal/access/permissions.go` (4 instances)\n- `internal/access/permissions_test.go` (1 instance)\n- `internal/access/static_test.go` (4 instances)\n\n**Step 1: Search for @-prefixed command usage**\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Step 2: Remove @ prefix from all command name handling**\n\nUpdate command name parsing, lock expressions, and any references to strip or avoid the @ prefix.\n\n**Step 3: Run tests**\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Step 4: Commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n\n**Cross-Phase Gate:** Task 18 (policy cache with LISTEN/NOTIFY invalidation) gates Phase 7.4. Task 18 is engine infrastructure that logically belongs here, even though T18→T23 creates a Phase 7.4 dependency.\n\n---\n\n\u003e **[Back to Overview](./2026-02-06-full-abac-implementation.md)** | **[Previous: Phase 7.2](./2026-02-06-full-abac-phase-7.2.md)** | **[Next: Phase 7.4](./2026-02-06-full-abac-phase-7.4.md)**\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Haiku 4.5\n**Complexity:** Low — codebase-wide rename removing @ prefix from command permission strings\n**Scope:** Multiple files but mechanical search-and-replace\n**Criticality:** Low-medium — cleanup task, standalone PR\n**Reasoning:** Simple search-and-replace operation across the codebase. No logic changes, no design decisions. Haiku is sufficient for mechanical rename tasks.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:47Z","created_by":"seanb4t","updated_at":"2026-02-13T02:46:43Z","closed_at":"2026-02-13T02:46:43Z","close_reason":"Wave 1 complete","labels":["abac","phase-7-3","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.5.16","depends_on_id":"holomush-5k1.5","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.5.2","title":"[ABAC Plan 7.3] T14: Attribute resolver with per-request caching","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.3.md` task section at line 128.\n\n**Spec References:** [04-resolution-evaluation.md#resolution-flow](../specs/abac/04-resolution-evaluation.md#resolution-flow), [04-resolution-evaluation.md#performance-targets](../specs/abac/04-resolution-evaluation.md#performance-targets), [04-resolution-evaluation.md#attribute-caching](../specs/abac/04-resolution-evaluation.md#attribute-caching), ADR 0012 (Eager attribute resolution)\n\n**Dependencies:**\n\n- Task 13 (Phase 7.3) — AttributeProvider interface and schema registry must exist before resolver\n\n\u003e **Note (Bug I10):** [04-resolution-evaluation.md#attribute-caching](../specs/abac/04-resolution-evaluation.md#attribute-caching) explicitly specifies LRU eviction with `maxEntries` default of 100. Reviewer concern about missing LRU/size spec was incorrect — spec clearly defines both semantics and default value.\n\n**Acceptance Criteria:**\n\n- [ ] Single provider → correct attribute bags returned\n- [ ] Multiple providers → merge semantics (last-registered wins for scalars, concatenate for lists)\n- [ ] Multi-provider list concatenation: two providers contributing to same list attribute are merged (e.g., Provider A: factions:[rebels], Provider B: factions:[traders] → merged: factions:[rebels,traders]). Verify order determinism.\n- [ ] Core-to-plugin key collision → reject plugin registration at startup\n- [ ] Plugin-to-plugin key collision → warn, last registered wins\n- [ ] Provider error → skip provider, continue, record `ProviderError`\n- [ ] Per-request cache → second `Resolve()` with same entity reuses cached result\n- [ ] Fair-share budget: `max(remainingBudget / remainingProviders, 5ms)`\n- [ ] Provider exceeding fair-share timeout → cancelled\n- [ ] **Re-entrance guard:** Provider calling `Evaluate()` during attribute resolution → panic with descriptive error. Implementation: store `inResolution` flag in context at resolver entry, check flag before calling providers, panic if flag is true. Guards against deadlock (Engine → Resolver → Provider → Engine). See [ADR #31](../specs/decisions/epic7/phase-7.3/031-provider-re-entrance-prohibition.md) (Provider Re-Entrance Prohibition)\n- [ ] **Panic recovery:** Plugin provider panics → recovered with error logging, evaluation continues, error recorded in decision\n- [ ] **Security (S6):** Runtime namespace validation — provider return keys MUST match registered namespace, invalid keys rejected with error logging and metric emission\n- [ ] **Panic recovery test case:** Provider `ResolveSubject()` panics → evaluator catches panic via `defer func() { if r := recover()... }`, logs error, continues with next provider\n- [ ] `AttributeCache` is LRU with max 100 entries, attached to context (per [04-resolution-evaluation.md#attribute-caching](../specs/abac/04-resolution-evaluation.md#attribute-caching))\n- [ ] LRU rate limiter capacity of 256 entries for per-request attribute cache\n- [ ] Provider timeout fair-share formula: per-provider timeout = max(remaining_budget / remaining_providers, configurable_floor_ms) (per ADR #59)\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Create: `internal/access/policy/attribute/resolver.go`\n- Create: `internal/access/policy/attribute/cache.go`\n- Test: `internal/access/policy/attribute/resolver_test.go`\n\n**Step 1: Write failing tests**\n\n- Resolve with single provider → correct bags\n- Resolve with multiple providers → merge semantics (last-registered wins for scalars, concatenate for lists)\n- Core-to-plugin key collision → reject plugin registration at startup\n- Plugin-to-plugin key collision → warn, last registered wins\n- Provider error → skip provider, continue, record `ProviderError`\n- Panic recovery → plugin provider panics, recovered with error logging, evaluation continues\n- Per-request cache → second `Resolve()` with same entity reuses cached result\n- Timeout enforcement → provider exceeding fair-share timeout is cancelled\n- Fair-share budget: 4 providers with 100ms total → ~25ms each initially\n- Re-entrance detection → provider calling `Evaluate()` on same context → panic\n\n**Step 2: Implement resolver**\n\n[Code snippet omitted; see source plan section for full example.]\n\nKey: fair-share timeout is `max(remainingBudget / remainingProviders, 5ms)`.\n\n**Re-entrance guard implementation:**\n\n1. Define context key for resolution flag: `type resolutionKey struct{}`\n2. At resolver entry (`Resolve()` method start), check context for `resolutionKey`\n3. If flag is true, panic with descriptive error: `\"provider re-entrance detected: Evaluate() called during attribute resolution (deadlock prevention)\"`\n4. Set flag in context before calling providers: `ctx = context.WithValue(ctx, resolutionKey{}, true)`\n5. Pass flagged context to all provider calls (`ResolveSubject`, `ResolveResource`, `Resolve`)\n6. Providers attempting to call `Evaluate()` with flagged context will trigger panic in step 2 of their own Evaluate() call (when resolver is entered again)\n\nSee [ADR #31](../specs/decisions/epic7/phase-7.3/031-provider-re-entrance-prohibition.md) (Provider Re-Entrance Prohibition) for rationale.\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Step 3: Run tests, commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Opus 4.6\n**Complexity:** High — attribute resolver orchestrating multiple providers with per-request caching, timeouts, and eager resolution\n**Scope:** 2-3 files, must handle provider failures, timeout budgets, caching strategy\n**Criticality:** Very high — resolver is on the hot path for every access check\n**Reasoning:** Orchestrating multiple providers with timeout budgets, per-request caching, and failure handling requires careful concurrency design. Performance-critical (\u003c 2ms target). Must handle provider errors gracefully without leaking partial state. Opus needed for concurrent orchestration with strict performance requirements.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:46Z","created_by":"seanb4t","updated_at":"2026-02-13T03:20:45Z","closed_at":"2026-02-13T03:20:45Z","close_reason":"Wave 2 complete: resolver, providers, retention","labels":["abac","phase-7-3","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.5.2","depends_on_id":"holomush-5k1.5","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.5.2","depends_on_id":"holomush-5k1.5.1","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.5.3","title":"[ABAC Plan 7.3] T15: Core attribute providers (character, location, object)","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.3.md` task section at line 272.\n\n**Spec References:** [01-core-types.md#core-attribute-schema](../specs/abac/01-core-types.md#core-attribute-schema) — character, location, and object attributes are in the table\n\n**Dependencies:**\n\n- Task 13 (Phase 7.3) — AttributeProvider interface must exist before implementing providers\n\n**Acceptance Criteria:**\n\n- [ ] CharacterProvider resolves: `type`, `id`, `name`, `role`, `faction`, `level`, `flags`, `location`\n- [ ] CharacterProvider only resolves `character` type subjects/resources (returns nil for others)\n- [ ] LocationProvider resolves: `type`, `id`, `name`, `faction`, `restricted`\n- [ ] LocationProvider only resolves `location` type resources\n- [ ] ObjectProvider resolves: `type`, `id`, `name`, `location`, `owner`, `flags`\n- [ ] ObjectProvider only resolves `object` type resources\n- [ ] Each provider uses mockery-generated mocks for world model repositories\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Create: `internal/access/policy/attribute/character.go`\n- Create: `internal/access/policy/attribute/location.go`\n- Create: `internal/access/policy/attribute/object.go`\n- Test: `internal/access/policy/attribute/character_test.go`\n- Test: `internal/access/policy/attribute/location_test.go`\n- Test: `internal/access/policy/attribute/object_test.go`\n\n**Step 1: Write failing tests for each provider**\n\nCharacterProvider:\n\n- `ResolveSubject(\"character\", \"01ABC\")` → `{\"type\": \"character\", \"id\": \"01ABC\", \"name\": \"...\", \"role\": \"player\", \"faction\": \"rebels\", \"level\": 5, \"flags\": [\"vip\"], \"location\": \"01XYZ\"}`\n- `ResolveSubject(\"plugin\", \"...\")` → `(nil, nil)` — character provider only resolves characters\n- `ResolveResource(\"character\", \"01ABC\")` → same attrs (for `resource is character` policies)\n- `ResolveResource(\"location\", \"...\")` → `(nil, nil)` — wrong resource type\n\nLocationProvider:\n\n- `ResolveResource(\"location\", \"01XYZ\")` → `{\"type\": \"location\", \"id\": \"01XYZ\", \"name\": \"Town Square\", \"faction\": \"neutral\", \"restricted\": false}`\n- `ResolveSubject(...)` → `(nil, nil)` — resource-only provider\n\nObjectProvider:\n\n- `ResolveResource(\"object\", \"01DEF\")` → `{\"type\": \"object\", \"id\": \"01DEF\", \"name\": \"Sword\", \"location\": \"01XYZ\", \"owner\": \"01ABC\", \"flags\": [\"weapon\"]}`\n\nEach provider takes world model repositories as constructor dependencies. Use mockery-generated mocks for tests.\n\n**Step 2: Implement providers**\n\n**Step 3: Run tests, commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Sonnet 4.5\n**Complexity:** Moderate — three provider implementations following AttributeProvider interface\n**Scope:** 3-4 files (one per provider + tests), database queries for character/location/object attributes\n**Criticality:** High — core providers supply most attribute data\n**Reasoning:** Follows AttributeProvider interface pattern. Each provider queries existing WorldRepository methods. Attribute schemas are defined in spec. Sonnet handles pattern-driven implementation well.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:46Z","created_by":"seanb4t","updated_at":"2026-02-13T03:20:45Z","closed_at":"2026-02-13T03:20:45Z","close_reason":"Wave 2 complete: resolver, providers, retention","labels":["abac","phase-7-3","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.5.3","depends_on_id":"holomush-5k1.5","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.5.3","depends_on_id":"holomush-5k1.5.1","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.5.4","title":"[ABAC Plan 7.3] T16a: Simple providers (environment, command, stream, exit stub, scene stub)","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.3.md` task section at line 333.\n\n**Spec References:** [01-core-types.md#core-attribute-schema](../specs/abac/01-core-types.md#core-attribute-schema) — environment, command, stream attributes are in the table; [Decision #88](../specs/decisions/epic7/phase-7.3/088-exit-scene-provider-stubs.md) — exit/scene stubs\n\n**Dependencies:**\n\n- Task 13 (Phase 7.3) — AttributeProvider/EnvironmentProvider interfaces must exist before implementing providers\n\n**Acceptance Criteria:**\n\n- [ ] EnvironmentProvider implements `EnvironmentProvider` interface; resolves `time`, `hour`, `minute`, `day_of_week`, `maintenance`\n- [ ] CommandProvider resolves `type`, `name` for `command` resources only\n- [ ] StreamProvider resolves `type`, `name`, `location` for `stream` resources only\n- [ ] ExitProvider stub resolves `type`, `id` for `exit` resources only (Decision #88)\n- [ ] SceneProvider stub resolves `type`, `id` for `scene` resources only (Decision #88)\n- [ ] All tests pass via `task test`\n\n\u003c!-- TODO: ExitProvider and SceneProvider are stubs returning type/id only.\n     Full implementations are backlog items:\n     - ExitProvider full attrs: holomush-5k1.422\n     - SceneProvider full attrs: holomush-5k1.424\n     See Decision #88 for rationale. --\u003e\n\n**Files:**\n\n- Create: `internal/access/policy/attribute/environment.go`\n- Create: `internal/access/policy/attribute/command.go`\n- Create: `internal/access/policy/attribute/stream.go`\n- Create: `internal/access/policy/attribute/exit.go` (stub — Decision #88)\n- Create: `internal/access/policy/attribute/scene.go` (stub — Decision #88)\n- Test files for each\n\n**Step 1: Write failing tests**\n\nEnvironmentProvider (implements `EnvironmentProvider` interface):\n\n- `Resolve()` → `{\"time\": \"2026-02-06T14:30:00Z\", \"hour\": 14, \"minute\": 30, \"day_of_week\": \"friday\", \"maintenance\": false}`\n\nCommandProvider:\n\n- `ResolveResource(\"command\", \"say\")` → `{\"type\": \"command\", \"name\": \"say\"}`\n- `ResolveResource(\"location\", \"...\")` → `(nil, nil)` — wrong type\n\nStreamProvider:\n\n- `ResolveResource(\"stream\", \"location:01XYZ\")` → `{\"type\": \"stream\", \"name\": \"location:01XYZ\", \"location\": \"01XYZ\"}`\n\nExitProvider (stub — Decision #88):\n\n- `ResolveResource(\"exit\", \"01MNO\")` → `{\"type\": \"exit\", \"id\": \"01MNO\"}`\n- `ResolveResource(\"location\", \"...\")` → `(nil, nil)` — wrong type\n\nSceneProvider (stub — Decision #88):\n\n- `ResolveResource(\"scene\", \"01PQR\")` → `{\"type\": \"scene\", \"id\": \"01PQR\"}`\n- `ResolveResource(\"location\", \"...\")` → `(nil, nil)` — wrong type\n\n**Step 2: Implement simple providers**\n\nEnvironmentProvider, CommandProvider, StreamProvider are straightforward mappings with no database queries or complex logic. ExitProvider and SceneProvider are minimal stubs returning only `{type, id}` — full attribute resolution deferred to backlog (holomush-5k1.422, holomush-5k1.424).\n\n**Step 3: Run tests, commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n\u003e **Known Limitation:** Sequential provider execution allows one slow provider to starve others. This is acceptable for MVP scale (~200 users). Future optimization: parallel provider execution if profiling reveals bottlenecks.\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Sonnet 4.5\n**Complexity:** Low-moderate — five simple providers, mostly in-memory or stub implementations\n**Scope:** 3-5 files, environment (time/system), command, stream providers + exit/scene stubs\n**Criticality:** Medium — stubs are placeholders, environment/command are straightforward\n**Reasoning:** Simple implementations — EnvironmentProvider reads system time, CommandProvider extracts from request, stubs return empty. Per Decision 88, exit/scene stubs are intentionally minimal. Sonnet handles batch simple implementations efficiently.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:46Z","created_by":"seanb4t","updated_at":"2026-02-13T03:20:45Z","closed_at":"2026-02-13T03:20:45Z","close_reason":"Wave 2 complete: resolver, providers, retention","labels":["abac","phase-7-3","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.5.4","depends_on_id":"holomush-5k1.5","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.5.4","depends_on_id":"holomush-5k1.5.1","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.5.5","title":"[ABAC Plan 7.3] T16b: PropertyProvider with recursive CTE","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.3.md` task section at line 407.\n\n\u003e **Note:** This task depends on Task 4a ([Phase 7.1](./2026-02-06-full-abac-phase-7.1.md)) — PropertyRepository (Task 4a) must exist before PropertyProvider (Task 16b).\n\n**Spec References:** [03-property-model.md#property-attributes](../specs/abac/03-property-model.md#property-attributes), ADR 0013 (Properties as first-class entities)\n\n**Dependencies:**\n\n- Task 4a (Phase 7.1) — PropertyRepository must exist before PropertyProvider\n- Task 13 (Phase 7.3) — AttributeProvider interface must exist before implementing provider\n\n**Acceptance Criteria:**\n\n- [ ] PropertyProvider resolves all property attributes including `parent_location`\n- [ ] `parent_location` uses recursive CTE covering all three placement scenarios: direct location (location_id), held by character (held_by_character_id), contained in object (contained_in_object_id)\n- [ ] `parent_location` CTE depth limit: 20 levels\n- [ ] `parent_location` resolution timeout: 100ms enforced via context.WithTimeout; circuit breaker wrapping added in Task 34 per ADR #74\n- [ ] Test case: timeout enforcement verifies `parent_location` resolution aborts after 100ms with context.DeadlineExceeded error\n- [ ] Test case: Object at location (location_id non-NULL) → resolves `parent_location`\n- [ ] Test case: Object held by character (held_by_character_id non-NULL) → resolves to character's location\n- [ ] Test case: Object inside object inside room (contained_in_object_id) → resolves `parent_location` to room\n- [ ] Cycle detection → error before depth limit\n- [ ] All tests pass via `task test`\n\n\u003e **Note:** Timeout is enforced via context.WithTimeout in PropertyProvider; circuit breaker wrapping (trip threshold, backoff) is deferred to Task 34 per ADR #74.\n\n**Files:**\n\n- Create: `internal/access/policy/attribute/property.go`\n- Test: `internal/access/policy/attribute/property_test.go`\n\n**Step 1: Write failing tests**\n\nPropertyProvider:\n\n- `ResolveResource(\"property\", \"01GHI\")` → all property attributes including `parent_location`\n- Nested containment: object in object in room → resolves `parent_location` to room\n- `parent_location` resolution timeout (100ms) → error returned (circuit breaker behavior deferred to Task 34, [Phase 7.7](./2026-02-06-full-abac-phase-7.7.md) — see [Decision #74](../specs/decisions/epic7/phase-7.7/074-unified-circuit-breaker-task-34.md))\n- Cycle detection → error before depth limit (20 levels)\n\n**Step 2: Implement PropertyProvider**\n\nPropertyProvider's `parent_location` uses recursive CTE covering all three placement scenarios:\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Note:** Circuit breaker behavior is deferred to Task 34 (Phase 7.7). See Decision #74 (Unified Circuit Breaker in Task 34).\n\n**Step 3: Run tests, commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n\n### Task 17: AccessPolicyEngine (Summary)\n\n\u003e **This task has been split into 4 sub-tasks (T17.1–T17.4) for better progress tracking and isolated testing.** The sub-tasks implement the 7-step evaluation algorithm from the spec. Each sub-task has its own acceptance criteria, test suite, and files. The final engine integrates all components in the 7-step evaluation flow.\n\n**Spec References:** [04-resolution-evaluation.md#evaluation-algorithm](../specs/abac/04-resolution-evaluation.md#evaluation-algorithm), ADR 0009 (Custom Go-Native ABAC Engine), ADR 0011 (Deny-overrides), ADR 0012 (Eager attribute resolution)\n\n\u003e **Performance Targets (Decision #23):** Evaluate() p99 \u003c25ms, attribute resolution \u003c2ms, DSL evaluation \u003c1ms, cache reload \u003c50ms (200 concurrent users). See [Decision #23](../specs/decisions/epic7/general/023-performance-targets.md).\n\n**Sub-tasks:**\n\n| Sub-task | Scope                                    | Algorithm Steps | Size |\n| -------- | ---------------------------------------- | --------------- | ---- |\n| T17.1    | System bypass + session resolution       | Steps 1-2       | M    |\n| T17.2    | Target matching and policy filtering     | Step 4          | M    |\n| T17.3    | Condition evaluation via DSL             | Step 5          | M    |\n| T17.4    | Deny-overrides combination + integration | Step 6 + glue   | L    |\n\n**Dependencies between sub-tasks:** T17.1 → T17.2 → T17.3 → T17.4 (sequential — each builds on the previous)\n\n**Shared files (created incrementally across sub-tasks):**\n\n- `internal/access/policy/engine.go` — Engine struct, interfaces, `Evaluate()` method (built incrementally)\n- `internal/access/policy/engine_test.go` — Test file (test cases added per sub-task)\n- `internal/access/policy/session_resolver.go` — SessionResolver (T17.1)\n- `internal/access/policy/session_resolver_test.go` — SessionResolver tests (T17.1)\n\n**Cross-cutting acceptance criteria (verified in T17.4 after all sub-tasks complete):**\n\n- [ ] Implements the 7-step evaluation algorithm from the spec exactly\n- [ ] Engine MUST call `Decision.Validate()` before returning any Decision\n- [ ] Full policy evaluation (no short-circuit) when policy test active or audit mode is `all` ([04-resolution-evaluation.md#key-behaviors](../specs/abac/04-resolution-evaluation.md#key-behaviors))\n- [ ] Provider error → evaluation continues, error recorded in decision\n- [ ] Per-request cache → second call reuses cached attributes\n- [ ] Test verifies `Validate()` is called on every engine return path\n- [ ] Test for Decision invariant violation (`allowed=true` but `effect=deny`) is rejected by `Validate()`\n- [ ] All tests pass via `task test`\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Opus 4.6\n**Complexity:** High — PropertyProvider using recursive CTE for inheritance chain resolution\n**Scope:** 2-3 files, recursive SQL query, inheritance traversal, performance concerns\n**Criticality:** High — property inheritance is central to ABAC flexibility\n**Reasoning:** Recursive CTE implementation for property inheritance chains requires careful SQL design (depth limits, cycle detection), understanding of PostgreSQL CTE optimization, and integration with the provider interface. Performance-sensitive query on the hot path. Opus needed for recursive SQL + provider integration.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:46Z","created_by":"seanb4t","updated_at":"2026-02-13T03:31:01Z","closed_at":"2026-02-13T03:31:01Z","close_reason":"Implemented in Wave 3 commit","labels":["abac","phase-7-3","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.5.5","depends_on_id":"holomush-5k1.3.6","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.5.5","depends_on_id":"holomush-5k1.5","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.5.6","title":"[ABAC Plan 7.3] T17.1: System bypass + session resolution (Steps 1-2)","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.3.md` task section at line 535.\n\n**Spec References:** [04-resolution-evaluation.md#evaluation-algorithm](../specs/abac/04-resolution-evaluation.md#evaluation-algorithm) Steps 1-2, [ADR 66](../specs/decisions/epic7/phase-7.3/066-sync-audit-system-bypass.md) (sync audit for system bypass)\n\n**Dependencies:**\n\n- Task 12 (Phase 7.2) — PolicyCompiler must exist for engine scaffold\n- Task 14 (Phase 7.3) — AttributeResolver must exist for engine construction\n- Task 6 (Phase 7.1) — prefix parser and system context helpers needed for subject parsing\n\n**Acceptance Criteria:**\n\n- [ ] `Engine` struct created with constructor accepting `AttributeResolver`, `PolicyCache`, `SessionResolver`, `AuditLogger`\n- [ ] `AccessPolicyEngine` interface defined with `Evaluate(ctx, AccessRequest) (Decision, error)`\n- [ ] `SessionResolver` interface defined with `ResolveSession(ctx, sessionID) (characterID, error)`\n- [ ] `AuditLogger` interface defined with `Log(entry AuditEntry)`\n- [ ] Step 1: System bypass — subject `\"system\"` → `types.NewDecision(SystemBypass, \"system bypass\", \"\")`\n  - [ ] System bypass decisions MUST be audited in ALL modes (including minimal), even though `Evaluate()` short-circuits at step 1\n  - [ ] System bypass audit writes MUST use sync write path (same as denials) per [ADR 66](../specs/decisions/epic7/phase-7.3/066-sync-audit-system-bypass.md) — guarantees audit trail for privileged operations\n  - [ ] Engine implementation MUST call audit logger synchronously before returning from step 1\n  - [ ] Test case: system bypass subject with audit mode=minimal still produces audit entry (via sync write)\n  - [ ] Test case: system bypass audit write failure triggers WAL fallback (same flow as denials)\n- [ ] Step 2: Session resolution — subject `\"session:web-123\"` → resolved to `\"character:01ABC\"` via `SessionResolver`\n  - [ ] Invalid session → `types.NewDecision(DefaultDeny, \"session invalid\", \"infra:session-invalid\")`\n  - [ ] Session store error → `types.NewDecision(DefaultDeny, \"session store error\", \"infra:session-store-error\")`\n  - [ ] PostgreSQL `SessionResolver` implementation queries session store for character ID\n  - [ ] Character deletion handling: deleted characters return `SESSION_INVALID` error code\n  - [ ] All `SessionResolver` error codes tested: `SESSION_INVALID`, `SESSION_STORE_ERROR`\n- [ ] `Evaluate()` returns `DefaultDeny` for non-system, non-session subjects as a placeholder (subsequent steps implemented in T17.2-T17.4)\n- [ ] `Decision.Validate()` called before returning any Decision\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Create: `internal/access/policy/engine.go` (Engine struct, interfaces, Steps 1-2 of `Evaluate()`)\n- Test: `internal/access/policy/engine_test.go` (system bypass and session resolution tests)\n- Create: `internal/access/policy/session_resolver.go` (PostgreSQL SessionResolver implementation)\n- Test: `internal/access/policy/session_resolver_test.go`\n\n**Step 1: Write failing tests**\n\nTable-driven tests:\n\n1. **System bypass:** Subject `\"system\"` → `types.NewDecision(SystemBypass, \"system bypass\", \"\")`\n2. **System bypass audit (mode=minimal):** Verify audit entry still written synchronously\n3. **System bypass audit write failure:** Verify WAL fallback triggered\n4. **Session resolution:** Subject `\"session:web-123\"` → resolved to `\"character:01ABC\"`, returns `DefaultDeny` placeholder\n5. **Session invalid:** Subject `\"session:expired\"` → `types.NewDecision(DefaultDeny, \"session invalid\", \"infra:session-invalid\")`\n6. **Session store error:** DB failure → `types.NewDecision(DefaultDeny, \"session store error\", \"infra:session-store-error\")`\n7. **Character deleted:** Subject `\"session:deleted-char\"` → `SESSION_INVALID`\n8. **Non-system subject:** Subject `\"character:01ABC\"` → `DefaultDeny` placeholder (steps 3-6 not yet implemented)\n\n**Step 2: Implement**\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Step 3: Run tests, commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Opus 4.6\n**Complexity:** High — engine scaffold with system bypass logic and session-to-subject resolution\n**Scope:** 2-3 files, security-critical bypass detection, session resolution from context\n**Criticality:** Very high — system bypass is the first security check, must be bulletproof\n**Reasoning:** System bypass (Step 1) determines if access checks are skipped entirely — must be provably correct. Session-to-subject resolution (Step 2) maps session tokens to authorization subjects. Both are security-critical foundations. ADR 066 adds sync audit requirement for bypass. Opus needed for security-critical engine foundation.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:46Z","created_by":"seanb4t","updated_at":"2026-02-13T03:31:01Z","closed_at":"2026-02-13T03:31:01Z","close_reason":"Implemented in Wave 3 commit","labels":["abac","phase-7-3","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.5.6","depends_on_id":"holomush-5k1.3.10","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.5.6","depends_on_id":"holomush-5k1.4.5","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.5.6","depends_on_id":"holomush-5k1.5","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.5.6","depends_on_id":"holomush-5k1.5.2","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.5.7","title":"[ABAC Plan 7.3] T17.2: Target matching and policy filtering (Step 4)","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.3.md` task section at line 668.\n\n**Spec References:** [04-resolution-evaluation.md#evaluation-algorithm](../specs/abac/04-resolution-evaluation.md#evaluation-algorithm) Step 4\n\n**Dependencies:**\n\n- Task 17.1 (Phase 7.3) — Engine struct and interfaces must exist\n\n**Acceptance Criteria:**\n\n- [ ] Engine loads policies from the in-memory `PolicyCache` snapshot\n- [ ] Step 3: Eager attribute resolution — all attributes collected via `AttributeResolver` before policy filtering\n- [ ] Step 4: Target matching filters policies by:\n  - [ ] Principal type: `\"principal is character\"` matches when parsed subject prefix equals `character`. Bare `\"principal\"` matches all subject types. Valid types: `character`, `plugin`. `\"session\"` is never valid (resolved in step 2).\n  - [ ] Action list: `\"action in [say, pose]\"` matches when request action is in the list. Bare `\"action\"` matches all actions.\n  - [ ] Resource type: `\"resource is location\"` matches when parsed resource prefix equals `location`. `\"resource == location:01XYZ\"` matches exact string. Bare `\"resource\"` matches all resource types.\n- [ ] `findApplicablePolicies()` helper function (or method) returns only matching policies\n- [ ] Non-matching policies excluded from evaluation\n- [ ] Test cases cover: exact principal match, wildcard principal, action list match, action wildcard, resource type match, resource exact match, resource wildcard, no policies match (empty candidate set), mixed targets (some match, some don't)\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Modify: `internal/access/policy/engine.go` (add Step 3 attribute resolution + Step 4 target matching)\n- Modify: `internal/access/policy/engine_test.go` (add target matching tests)\n\n**Step 1: Write failing tests**\n\nTable-driven tests:\n\n1. **Principal type match:** Policy targets `\"principal is character\"`, subject `\"character:01ABC\"` → policy included\n2. **Principal type mismatch:** Policy targets `\"principal is plugin\"`, subject `\"character:01ABC\"` → policy excluded\n3. **Principal wildcard:** Policy targets bare `\"principal\"` → always included\n4. **Action list match:** Policy targets `\"action in [say, pose]\"`, action `\"say\"` → included\n5. **Action list mismatch:** Policy targets `\"action in [say, pose]\"`, action `\"dig\"` → excluded\n6. **Action wildcard:** Policy targets bare `\"action\"` → always included\n7. **Resource type match:** Policy targets `\"resource is location\"`, resource `\"location:01XYZ\"` → included\n8. **Resource exact match:** Policy targets `\"resource == location:01XYZ\"`, resource `\"location:01XYZ\"` → included\n9. **Resource exact mismatch:** Policy targets `\"resource == location:01XYZ\"`, resource `\"location:01ABC\"` → excluded\n10. **Resource wildcard:** Policy targets bare `\"resource\"` → always included\n11. **No policies match:** Empty candidate set → returns empty slice\n12. **Mixed targets:** Multiple policies with different targets → only matching ones returned\n\n**Step 2: Implement**\n\nAdd `findApplicablePolicies()` method to `Engine`. Wire Step 3 (eager attribute resolution via `AttributeResolver.Resolve()`) and Step 4 (policy filtering) into `Evaluate()`.\n\n**Step 3: Run tests, commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Opus 4.6\n**Complexity:** High — policy filtering with target matching against principal/action/resource clauses\n**Scope:** 2-3 files, matching algorithm, wildcard support, policy cache integration\n**Criticality:** Very high — incorrect matching = policies applied to wrong requests\n**Reasoning:** Target matching must correctly evaluate principal, action, and resource clauses including wildcard patterns. Must handle 'any' targets, prefix matching, and exact matching. Integrates with PolicyCache snapshot. Incorrect matching is a security vulnerability. Opus needed for correctness-critical matching algorithm.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:46Z","created_by":"seanb4t","updated_at":"2026-02-13T03:37:46Z","closed_at":"2026-02-13T03:37:46Z","close_reason":"Implemented in Wave 4 commit","labels":["abac","phase-7-3","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.5.7","depends_on_id":"holomush-5k1.5","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.5.7","depends_on_id":"holomush-5k1.5.6","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.5.8","title":"[ABAC Plan 7.3] T17.3: Condition evaluation via DSL (Step 5)","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.3.md` task section at line 724.\n\n**Spec References:** [04-resolution-evaluation.md#evaluation-algorithm](../specs/abac/04-resolution-evaluation.md#evaluation-algorithm) Step 5, [04-resolution-evaluation.md#key-behaviors](../specs/abac/04-resolution-evaluation.md#key-behaviors), ADR 0010 (Cedar-Aligned Missing Attribute Semantics)\n\n**Dependencies:**\n\n- Task 17.2 (Phase 7.3) — target matching must produce candidate policies\n- Task 11 (Phase 7.2) — DSL evaluator must exist for condition evaluation\n\n**Acceptance Criteria:**\n\n- [ ] Step 5: For each candidate policy, evaluate DSL conditions against `AttributeBags`\n- [ ] If all conditions true → policy is \"satisfied\"\n- [ ] If any condition false → policy does not apply\n- [ ] Missing attribute in condition → condition evaluates to `false` (fail-safe, per ADR 0010)\n- [ ] Provider error → evaluation continues with remaining policies, error recorded in decision's `ProviderErrors`\n- [ ] `evaluatePolicy()` helper returns `(satisfied bool, err error)` for each candidate policy\n- [ ] DSL evaluator called with policy's compiled AST and the resolved `AttributeBags`\n- [ ] Full policy evaluation (no short-circuit) when policy test active or audit mode is `all`\n- [ ] All satisfied policies recorded in `Decision.Policies` slice for audit/debugging\n- [ ] Test cases cover: simple condition satisfied, simple condition unsatisfied, missing attribute → false, compound condition (AND/OR), nested conditions, provider error with continued evaluation, multiple policies with mixed results\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Modify: `internal/access/policy/engine.go` (add Step 5 condition evaluation)\n- Modify: `internal/access/policy/engine_test.go` (add condition evaluation tests)\n\n**Step 1: Write failing tests**\n\nTable-driven tests:\n\n1. **Simple condition satisfied:** `subject.role == \"admin\"` with `role=\"admin\"` in bags → satisfied\n2. **Simple condition unsatisfied:** `subject.role == \"admin\"` with `role=\"player\"` → not satisfied\n3. **Missing attribute:** `subject.faction == \"rebels\"` with no `faction` attribute → false (fail-safe)\n4. **Compound AND:** `subject.role == \"admin\" \u0026\u0026 resource.type == \"location\"` — both true → satisfied\n5. **Compound AND partial:** One condition true, one false → not satisfied\n6. **Compound OR:** `subject.role == \"admin\" || subject.role == \"storyteller\"` — one true → satisfied\n7. **Nested conditions:** `(a \u0026\u0026 b) || c` with various truth value combinations\n8. **Numeric comparison:** `subject.level \u003e 5` with `level=7` → satisfied\n9. **List membership:** `\"vip\" in subject.flags` with `flags=[\"vip\"]` → satisfied\n10. **Provider error:** Provider fails, attribute missing → condition false, error recorded\n11. **Multiple policies mixed:** 3 policies, 2 satisfied, 1 not → 2 in satisfied set\n12. **Full evaluation mode:** All policies evaluated even after first forbid match\n\n**Step 2: Implement**\n\nAdd `evaluatePolicy()` method that calls the DSL evaluator (from Task 11, [Phase 7.2](./2026-02-06-full-abac-phase-7.2.md)) with compiled AST and `AttributeBags`. Wire into `Evaluate()` after Step 4. Collect satisfied policies into `Decision.Policies`.\n\n**Step 3: Run tests, commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Opus 4.6\n**Complexity:** High — integrating DSL condition evaluator into engine evaluation pipeline\n**Scope:** 1-2 files, condition evaluation for candidate policies, Cedar-aligned semantics\n**Criticality:** Very high — condition evaluation determines policy applicability\n**Reasoning:** Bridges DSL evaluator (T11) with engine pipeline. Must handle missing attributes per Cedar semantics (ADR 0010), propagate evaluation errors correctly, and maintain fail-safe behavior. Integration of two complex subsystems with security implications. Opus needed.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:46Z","created_by":"seanb4t","updated_at":"2026-02-13T03:46:09Z","closed_at":"2026-02-13T03:46:09Z","close_reason":"Implemented in Wave 5 commit","labels":["abac","phase-7-3","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.5.8","depends_on_id":"holomush-5k1.4.4","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.5.8","depends_on_id":"holomush-5k1.5","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.5.8","depends_on_id":"holomush-5k1.5.7","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.5.9","title":"[ABAC Plan 7.3] T17.4: Deny-overrides combination + integration (Step 6 + glue)","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.3.md` task section at line 782.\n\n**Spec References:** [04-resolution-evaluation.md#evaluation-algorithm](../specs/abac/04-resolution-evaluation.md#evaluation-algorithm) Steps 6-7, ADR 0011 (Deny-overrides conflict resolution), [05-storage-audit.md#audit-log-configuration](../specs/abac/05-storage-audit.md#audit-log-configuration)\n\n**Dependencies:**\n\n- Task 17.3 (Phase 7.3) — condition evaluation must produce satisfied policy set\n\n**Acceptance Criteria:**\n\n- [ ] Step 6: Deny-overrides combination — forbid + permit both match → forbid wins (ADR 0011)\n  - [ ] Any satisfied forbid policy → `Decision{Allowed: false, Effect: Deny}`\n  - [ ] Only satisfied permit policies → `Decision{Allowed: true, Effect: Allow}`\n  - [ ] No policies satisfied → `Decision{Allowed: false, Effect: DefaultDeny, Reason: \"no policies matched\"}`\n- [ ] Step 7: Audit logger records the decision, matched policies, and attribute snapshot per configured mode\n  - [ ] Denials (forbid + default deny) use sync audit write\n  - [ ] Allows use async audit write\n  - [ ] Audit mode respected: `minimal` (system bypasses + denials), `denials_only`, `all`\n- [ ] `combineDecisions()` helper implements deny-overrides algorithm\n- [ ] `Decision.Validate()` called on every return path (including error paths)\n- [ ] Per-request attribute cache verified: second `Evaluate()` call in same context reuses cached attributes\n- [ ] End-to-end integration tests covering full 7-step flow:\n  - [ ] System bypass → audit → return\n  - [ ] Session resolution → attribute resolution → policy matching → condition eval → deny-overrides → audit → return\n  - [ ] Provider error mid-flow → continued evaluation → deny → audit\n  - [ ] No matching policies → default deny → audit\n  - [ ] Multiple permits → allow → audit\n  - [ ] Permit + forbid → forbid wins → audit\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Modify: `internal/access/policy/engine.go` (add Steps 6-7, finalize `Evaluate()` flow)\n- Modify: `internal/access/policy/engine_test.go` (add deny-overrides + integration tests)\n\n**Step 1: Write failing tests**\n\nTable-driven tests:\n\n1. **Deny-overrides: forbid wins:** Permit and forbid both satisfied → `Decision{Allowed: false, Effect: Deny}`\n2. **Permit only:** Only permit policies satisfied → `Decision{Allowed: true, Effect: Allow}`\n3. **Default deny:** No policies satisfied → `Decision{Allowed: false, Effect: DefaultDeny}`\n4. **Multiple forbid:** Two forbid policies satisfied → `Deny` (first forbid recorded as primary)\n5. **Multiple permit:** Two permit policies satisfied → `Allow`\n6. **Audit mode minimal + denial:** Denial audited (sync)\n7. **Audit mode minimal + allow:** Allow NOT audited\n8. **Audit mode denials_only:** Denial audited, allow skipped\n9. **Audit mode all:** Both denial and allow audited\n10. **Validate() on every path:** Mock `Validate()` to track calls, verify called for system bypass, session error, deny, allow, default deny\n11. **Decision invariant violation:** `allowed=true` but `effect=deny` → `Validate()` rejects\n12. **Per-request cache warmth:** Two `Evaluate()` calls in same context → `AttributeResolver.Resolve()` called once (cached)\n\nEnd-to-end integration tests:\n\n13. **Full flow: admin permit:** `\"character:01ABC\"` with `role=admin` → seed policy matches → `Allow`\n14. **Full flow: deny-overrides:** Permit + forbid both match → `Deny`\n15. **Full flow: session → character:** `\"session:web-123\"` resolved → evaluated → decision\n16. **Full flow: provider error:** Provider fails → partial attributes → default deny → error in decision\n\n**Step 2: Implement**\n\nAdd `combineDecisions()` implementing deny-overrides: scan satisfied policies, any forbid → deny, else any permit → allow, else default deny. Wire Step 7 audit logging. Finalize `Evaluate()` to call all 7 steps in sequence. Ensure `Decision.Validate()` on every return path.\n\n**Step 3: Run tests, commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Opus 4.6\n**Complexity:** Very high — deny-overrides conflict resolution, final decision assembly, full engine integration\n**Scope:** 2-3 files, combining all engine steps into complete Evaluate() flow\n**Criticality:** Critical — this is THE authorization decision point for the entire system\n**Reasoning:** Implements deny-overrides combination algorithm (ADR 0011), assembles final Decision from matched policies, integrates Steps 1-6 into complete flow. This is the culmination of the entire ABAC engine — every authorization decision passes through this code. Any bug here is a potential security vulnerability. Must handle edge cases (no matching policies, all-deny, mixed effects). Opus absolutely required.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:47Z","created_by":"seanb4t","updated_at":"2026-02-13T03:56:45Z","closed_at":"2026-02-13T03:56:45Z","close_reason":"Implemented in Wave 6 commit: deny-overrides combination + audit logging","labels":["abac","phase-7-3","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.5.9","depends_on_id":"holomush-5k1.5","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.5.9","depends_on_id":"holomush-5k1.5.8","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.50","title":"Move call site migration tasks to Phase 7.3 per spec ordering","description":"## Review Finding: C3 — Phase ordering contradicts spec for call site migration\n\n**Source:** PR #69 review (plan-vs-spec consistency check)\n**Plan location:** Tasks 28-29 in Phase 7.6 (lines 2508-2612)\n**Spec location:** Lines 3193-3196 (Implementation Sequence)\n\n### Problem\nTasks 28-29 (DI wiring + call site migration) are placed in Phase 7.6 (\"Call Site Migration \u0026 Cleanup\"). The spec (lines 3193-3196) explicitly states Phase 7.3 should: \"Build AccessPolicyEngine, attribute providers, and audit logger. Replace AccessControl with AccessPolicyEngine in dependency injection. Update all call sites to use Evaluate() directly.\"\n\nThis means Tasks 21-27 (seed policies, bootstrap, locks, admin commands) would be developed against an engine not yet wired into the application — integration testing would be meaningless.\n\n### Decision\nMove Tasks 28-29 into Phase 7.3 (after engine is built). Phase 7.6 should only contain Task 30 (cleanup/deletion of old code like StaticAccessControl).\n\n### Acceptance Criteria\n- [ ] Tasks 28-29 moved to Phase 7.3 (after Task 20)\n- [ ] Phase 7.6 contains only Task 30 (legacy cleanup)\n- [ ] Task dependencies updated to reflect new ordering\n- [ ] Phase descriptions updated to match restructuring","status":"closed","priority":0,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T16:27:17Z","created_by":"seanb4t","updated_at":"2026-02-07T16:49:42Z","closed_at":"2026-02-07T16:49:42Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.50","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.500","title":"I4: DSL chain tasks T8, T9, T11 missing critical path styling in Mermaid","description":"## Issue\nTasks T8, T9, T11 (DSL chain) are missing critical path (red) styling in the Mermaid dependency diagram. These tasks are on the critical path but not visually distinguished.\n\n## Acceptance Criteria\n- [ ] T8, T9, T11 have critical path styling (red/bold) in Mermaid diagram\n- [ ] All tasks on the actual critical path are consistently styled\n\n## Files\n- docs/plans/2026-02-06-full-abac-implementation.md","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T02:03:48Z","created_by":"seanb4t","updated_at":"2026-02-10T13:52:47Z","closed_at":"2026-02-10T13:52:47Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.500","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.501","title":"I5: Phase 7.1 tasks partially missing dependency fields","description":"## Issue\nSome tasks in Phase 7.1 are missing dependency field declarations that exist in the master plan.\n\n## Acceptance Criteria\n- [ ] All tasks in phase-7.1.md have complete dependency fields\n- [ ] Dependencies match master plan Mermaid diagram\n\n## Files\n- docs/plans/2026-02-06-full-abac-phase-7.1.md\n- docs/plans/2026-02-06-full-abac-implementation.md","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T02:03:48Z","created_by":"seanb4t","updated_at":"2026-02-10T13:47:45Z","closed_at":"2026-02-10T13:47:45Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.501","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.502","title":"I6: Adjust p99 performance target from 5ms to 25ms","description":"## Issue\nThe p99 \u003c5ms target for policy evaluation is aggressive with SQL JOINs in PropertyProvider. Reviewer recommends validation.\n\n## Decision\nAdjust p99 target to 25ms. This is a final design decision — document in design decisions.\n\n## Acceptance Criteria\n- [ ] p99 target changed from 5ms to 25ms in design spec\n- [ ] p99 target changed from 5ms to 25ms in all plan references\n- [ ] Design decision documented in docs/specs/decisions/epic7/general/\n- [ ] No references to the old 5ms target remain\n\n## Files\n- docs/specs/2026-02-05-full-abac-design.md\n- docs/plans/2026-02-06-full-abac-implementation.md\n- docs/specs/decisions/epic7/general/ (new or updated decision file)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T02:03:48Z","created_by":"seanb4t","updated_at":"2026-02-10T13:57:40Z","closed_at":"2026-02-10T13:57:40Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.502","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.503","title":"I7: Add import cycle check to T4a acceptance criteria","description":"## Issue\nPropertyProvider interface (T4a) in internal/access/ needs to fetch attributes from internal/world/ and internal/store/. This creates a circular dependency risk: access → world → access.\n\n## Decision\nAdd explicit acceptance criterion to T4a: \"go vet confirms no import cycles between access/ and provider packages.\"\n\n## Acceptance Criteria\n- [ ] T4a acceptance criteria in phase file includes import cycle check\n- [ ] Design decision documented in docs/specs/decisions/epic7/phase-7.1/\n\n## Files\n- docs/plans/2026-02-06-full-abac-phase-7.1.md\n- docs/specs/decisions/epic7/phase-7.1/ (new decision file)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T02:04:09Z","created_by":"seanb4t","updated_at":"2026-02-10T13:58:59Z","closed_at":"2026-02-10T13:58:59Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.503","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.504","title":"I8: Migration rollback — ADR #65 sufficient, no T28 playbook needed","description":"## Issue\nReviewer flagged that 28 call sites with no adapter layer could be hard to roll back. Recommended adding explicit rollback playbook to T28.\n\n## Decision\nADR #65 (065-git-revert-migration-rollback.md) already documents git-revert as the rollback strategy. No duplication needed in T28. Document this decision.\n\n## Acceptance Criteria\n- [ ] Decision documented that ADR #65 is sufficient for rollback coverage\n- [ ] No changes needed to T28\n\n## Files\n- docs/specs/decisions/epic7/phase-7.6/ (document decision)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T02:04:09Z","created_by":"seanb4t","updated_at":"2026-02-10T14:23:11Z","closed_at":"2026-02-10T14:23:11Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.504","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.505","title":"I9: Add AccessPolicyEngine contract test task (T7b)","description":"## Issue\nNo dedicated contract/interface test for AccessPolicyEngine covering edge cases: malformed subjects, context cancellation, empty cache. Currently exercised only through integration and migration tests.\n\n## Decision\nCreate a new task T7b for AccessPolicyEngine contract tests. This task depends on T7 (engine unit tests).\n\n## Acceptance Criteria\n- [ ] New task T7b added to phase-7.1.md or phase-7.3.md (wherever engine tests live)\n- [ ] T7b acceptance criteria covers: malformed subjects, context cancellation, empty cache, nil inputs\n- [ ] T7b has dependency on T7\n- [ ] Master plan Mermaid diagram updated to include T7b\n- [ ] Design decision documented\n\n## Files\n- docs/plans/2026-02-06-full-abac-phase-7.1.md or phase-7.3.md\n- docs/plans/2026-02-06-full-abac-implementation.md (Mermaid diagram)\n- docs/specs/decisions/epic7/ (new decision file)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T02:04:09Z","created_by":"seanb4t","updated_at":"2026-02-10T14:03:05Z","closed_at":"2026-02-10T14:03:05Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.505","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.506","title":"I10: Document lefthook fmt-markdown auto-fix as intentional","description":"## Issue\nReviewer noted lefthook fmt-markdown was changed from check-only to auto-fix mode. Committed content may differ from what developer reviewed.\n\n## Decision\nThis change was intentional. Developers should trust the formatter. Document as a design decision.\n\n## Acceptance Criteria\n- [ ] Decision documented that auto-fix is intentional\n- [ ] No code changes needed — this is by design\n\n## Files\n- docs/specs/decisions/epic7/general/ (document decision)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T02:04:09Z","created_by":"seanb4t","updated_at":"2026-02-10T14:23:11Z","closed_at":"2026-02-10T14:23:11Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.506","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.507","title":"I11: Pin actionlint, yamlfmt, dprint versions in CI","description":"## Issue\nCI workflow pins golangci-lint (v2.1.6) and rumdl (v0.2.3) but actionlint, yamlfmt, and dprint are installed via go install without version pins. Inconsistent reproducibility posture.\n\n## Decision\nPin all three tools to their current versions for reproducible CI builds.\n\n## Acceptance Criteria\n- [ ] actionlint pinned to specific version in CI workflow\n- [ ] yamlfmt pinned to specific version in CI workflow\n- [ ] dprint pinned to specific version in CI workflow\n- [ ] All tool versions documented in workflow comments\n\n## Files\n- .github/workflows/ (CI workflow files)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T02:04:09Z","created_by":"seanb4t","updated_at":"2026-02-10T14:05:36Z","closed_at":"2026-02-10T14:05:36Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.507","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.508","title":"I12: ADR #57 states range 001-090 but 91-95 exist","description":"## Issue\nADR #57 (numbering allocation) states the range is 001-090, but decisions 91-95 exist. The stated range needs updating.\n\n## Acceptance Criteria\n- [ ] ADR #57 range updated to reflect actual decision count (001-095 or appropriate range)\n- [ ] No gaps or conflicts in numbering allocation\n\n## Files\n- docs/specs/decisions/epic7/ (ADR #57 file)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T02:04:21Z","created_by":"seanb4t","updated_at":"2026-02-10T14:25:07Z","closed_at":"2026-02-10T14:25:07Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.508","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.509","title":"I13: ADR #75 title mismatch between README index and file","description":"## Issue\nADR #75 has a different title in the README index compared to the actual file. Titles must be consistent.\n\n## Acceptance Criteria\n- [ ] ADR #75 title matches in both README index and the decision file\n- [ ] No other title mismatches exist in the README index\n\n## Files\n- docs/specs/decisions/epic7/README.md\n- docs/specs/decisions/epic7/ (ADR #75 file)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T02:04:26Z","created_by":"seanb4t","updated_at":"2026-02-10T14:25:07Z","closed_at":"2026-02-10T14:25:07Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.509","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.51","title":"Fix recursive CTE: add held_by_character path and cycle detection","description":"## Review Finding: I1 — Recursive CTE incomplete in Task 15\n\n**Source:** PR #69 review\n**Plan location:** Task 15, lines 1454-1466\n**Spec location:** Lines 1237-1264\n\n### Problem\nThe plan's recursive CTE for parent_location resolution only handles object → object.location_id. The spec requires three resolution strategies:\n1. Direct location (location_id non-NULL) — partially handled\n2. Held by character (held_by_character_id non-NULL) — NOT handled\n3. Contained in object (contained_in_object_id non-NULL) — recursion target, but CTE joins on location_id (termination) not contained_in_object_id (recursion)\n\nThe CTE also lacks spec-required cycle detection via \"tracking visited IDs via an array path column\" (spec line 1258).\n\n### Acceptance Criteria\n- [ ] CTE handles all 3 resolution strategies from spec lines 1237-1264\n- [ ] For parent_type character: JOIN characters to get location_id\n- [ ] For parent_type location: use parent_id directly\n- [ ] For parent_type object: walk contained_in_object_id chain, handle held_by_character_id and location_id termination\n- [ ] Cycle detection via array path column (path TEXT[], rejecting if id = ANY(path))\n- [ ] Depth limit of 20 iterations preserved\n- [ ] Orphaned objects (no placement column) return nil parent_location","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T16:28:02Z","created_by":"seanb4t","updated_at":"2026-02-07T16:55:51Z","closed_at":"2026-02-07T16:55:51Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.51","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.510","title":"I14: ADR #52 cross-reference is vague","description":"## Issue\nADR #52 has a vague cross-reference stating \"Main spec, Audit Log section\" without a specific file path or section anchor. This makes it hard to find the referenced content.\n\n## Acceptance Criteria\n- [ ] ADR #52 cross-reference updated with specific file path and section\n- [ ] Cross-reference is clickable/navigable from the ADR\n\n## Files\n- docs/specs/decisions/epic7/ (ADR #52 file)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T02:04:30Z","created_by":"seanb4t","updated_at":"2026-02-10T14:25:07Z","closed_at":"2026-02-10T14:25:07Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.510","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.511","title":"S4: Combine Tasks 23b/23c into single seed policy integration test suite","description":"## Issue\nTasks 23b and 23c are separate seed policy integration test tasks that could be combined into a single, more focused test suite.\n\n## Decision\nMerge 23b and 23c into a single task in the phase plan.\n\n## Acceptance Criteria\n- [ ] Tasks 23b and 23c merged into single task in phase-7.4.md\n- [ ] Combined task has unified acceptance criteria from both\n- [ ] Master plan Mermaid diagram updated (single node replaces two)\n- [ ] Dependencies updated for the merged task\n\n## Files\n- docs/plans/2026-02-06-full-abac-phase-7.4.md\n- docs/plans/2026-02-06-full-abac-implementation.md","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T02:04:35Z","created_by":"seanb4t","updated_at":"2026-02-10T14:09:40Z","closed_at":"2026-02-10T14:09:40Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.511","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.512","title":"S1/S10: Standardize dependency format and task numbering across phase files","description":"## Issue\nDependency declarations are inconsistent across phase files (some use tables, some use bullet lists, some omit them). Task numbering is also inconsistent (integers T7, decimals T17.4, alphanumeric T22b).\n\n## Decision\nStandardize both dependency declaration format and task numbering convention across all 7 phase files.\n\n## Acceptance Criteria\n- [ ] Consistent dependency declaration format in all phase files (pick one: table or structured field)\n- [ ] Task numbering convention documented and applied consistently\n- [ ] All 7 phase files updated to match chosen format\n- [ ] Design decision documented\n\n## Files\n- docs/plans/2026-02-06-full-abac-phase-7.1.md\n- docs/plans/2026-02-06-full-abac-phase-7.2.md\n- docs/plans/2026-02-06-full-abac-phase-7.3.md\n- docs/plans/2026-02-06-full-abac-phase-7.4.md\n- docs/plans/2026-02-06-full-abac-phase-7.5.md\n- docs/plans/2026-02-06-full-abac-phase-7.6.md\n- docs/plans/2026-02-06-full-abac-phase-7.7.md","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T02:04:37Z","created_by":"seanb4t","updated_at":"2026-02-10T14:21:20Z","closed_at":"2026-02-10T14:21:20Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.512","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.512","depends_on_id":"holomush-5k1.498","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.512","depends_on_id":"holomush-5k1.499","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.512","depends_on_id":"holomush-5k1.501","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.513","title":"S2: Defer Phase 7.5 (Locks \u0026 Admin) from Epic 7 to Epic 8","description":"## Issue\nPhase 7.5 (Lock/Unlock commands and admin tools) is not architecturally required for ABAC core functionality.\n\n## Decision\nDefer Phase 7.5 out of Epic 7 scope immediately. Move to Epic 8.\n\n## Acceptance Criteria\n- [ ] Phase 7.5 removed from Epic 7 master plan scope\n- [ ] Mermaid dependency diagram updated (remove phase 7.5 nodes or mark as deferred)\n- [ ] Cross-phase gate table updated\n- [ ] Milestone definitions updated\n- [ ] Design decision documented\n- [ ] Any tasks that depended on phase 7.5 tasks have dependencies updated\n\n## Files\n- docs/plans/2026-02-06-full-abac-implementation.md\n- docs/plans/2026-02-06-full-abac-phase-7.5.md (mark as deferred)\n- docs/specs/decisions/epic7/general/ (new decision file)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T02:04:43Z","created_by":"seanb4t","updated_at":"2026-02-10T13:29:11Z","closed_at":"2026-02-10T13:29:11Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.513","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.514","title":"S9: Add runner.arch to CI cache keys","description":"## Issue\nCI cache keys use runner.os and hashFiles() but not runner architecture. Could cause cache misses or stale caches on mixed runner fleets.\n\n## Decision\nAdd runner.arch to cache keys.\n\n## Acceptance Criteria\n- [ ] All cache keys in CI workflow include runner.arch\n- [ ] Cache invalidation works correctly with the new key component\n\n## Files\n- .github/workflows/ (CI workflow files)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T02:05:13Z","created_by":"seanb4t","updated_at":"2026-02-10T14:26:25Z","closed_at":"2026-02-10T14:26:25Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.514","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.515","title":"S3/S5/S6/S7/S8: Declined review suggestions — documented for tracking","description":"## Issue\nThe following review suggestions were evaluated and declined:\n\n- S3: Add mid-epic retrospective after M2 — declined (not needed at this time)\n- S5: Add performance regression test to CI (T21.5) — declined\n- S6: Document ADR conflict resolution process — declined\n- S7: Update smoke test scenarios after T22b — declined\n- S8: Add PropertyProvider perf test to T16b acceptance criteria — declined\n\n## Decision\nAll declined. No action needed. This bead exists for tracking/audit purposes only.\n\n## Acceptance Criteria\n- [ ] This bead can be closed immediately — no work required\n\n## Files\n- None","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T02:05:18Z","created_by":"seanb4t","updated_at":"2026-02-10T02:05:29Z","closed_at":"2026-02-10T02:05:29Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.515","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.516","title":"Fix inverted performance targets: cached/cold p99 values swapped","description":"**Finding:** PR #69 review Critical #1\n\n**Issue:** In 04-resolution-evaluation.md (lines 443-444) and 08-testing-appendices.md (line 189-190), the Evaluate() p99 latency targets have cached and cold values swapped:\n- Current: cached = \u003c25ms, cold = \u003c10ms  \n- Correct: cached = \u003c10ms (warm cache, fast), cold = \u003c25ms (DB roundtrip, slow)\n\nA warm cache hit should be faster than a cold cache miss requiring a database roundtrip. The current values are logically inverted.\n\n**Decision:** Swap the values. Update CI thresholds (110% of each) and acceptance criteria in both spec sections.\n\n**Acceptance Criteria:**\n- [ ] 04-resolution-evaluation.md performance table shows cached=\u003c10ms, cold=\u003c25ms\n- [ ] 08-testing-appendices.md acceptance criteria shows cached=\u003c10ms, cold=\u003c25ms  \n- [ ] Any CI threshold references updated accordingly\n- [ ] ADR #97 references updated if applicable\n\n**Files affected:** docs/specs/abac/04-resolution-evaluation.md, docs/specs/abac/08-testing-appendices.md","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T15:13:59Z","created_by":"seanb4t","updated_at":"2026-02-10T15:30:45Z","closed_at":"2026-02-10T15:30:45Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.516","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.517","title":"Add missing T23b to Quick Start critical path text","description":"**Finding:** PR #69 review Critical #2\n\n**Issue:** In 2026-02-06-full-abac-implementation.md (line 81), the Quick Start critical path text jumps from T23 directly to T28, but the mermaid diagram and cross-phase gate table both show T23b (seed policy integration tests) as a hard gate for T28.\n\nCurrent: ...T23→T28→T28.5→T29\nCorrect: ...T23→T23b→T28→T28.5→T29\n\n**Decision:** Insert T23b between T23 and T28 in the critical path text.\n\n**Acceptance Criteria:**\n- [ ] Critical path text at line 81 includes T23b between T23 and T28\n- [ ] Text matches mermaid diagram path\n\n**Files affected:** docs/plans/2026-02-06-full-abac-implementation.md","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T15:14:09Z","created_by":"seanb4t","updated_at":"2026-02-10T15:30:45Z","closed_at":"2026-02-10T15:30:45Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.517","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.518","title":"Add abac_ prefix to policy_cache_last_update metric in section 05","description":"**Finding:** PR #69 review Critical #3\n\n**Issue:** In 05-storage-audit.md (line 180), the metric name is `policy_cache_last_update` without the `abac_` prefix. Section 04-resolution-evaluation.md consistently uses `abac_policy_cache_last_update`. All ABAC metrics should use the `abac_` prefix for namespace consistency.\n\n**Decision:** Add `abac_` prefix in section 05 to match section 04.\n\n**Acceptance Criteria:**\n- [ ] Line 180 of 05-storage-audit.md uses `abac_policy_cache_last_update`\n- [ ] All references to this metric in section 05 are consistent\n- [ ] No other unprefixed metrics remain in section 05\n\n**Files affected:** docs/specs/abac/05-storage-audit.md","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T15:14:17Z","created_by":"seanb4t","updated_at":"2026-02-10T15:30:45Z","closed_at":"2026-02-10T15:30:45Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.518","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.519","title":"Fix task size summary: 23 M should be 22 M (or correct count)","description":"**Finding:** PR #69 review Important #1\n\n**Issue:** In 2026-02-06-full-abac-implementation.md (line 640), the task size summary states \"23 M\" but an actual count of M-sized tasks yields approximately 22 M.\n\n**Decision:** Recount M-sized tasks (excluding deferred Phase 7.5 tasks) and update line 640 with the correct count.\n\n**Acceptance Criteria:**\n- [ ] M-sized task count verified by manual recount of task table\n- [ ] Line 640 summary updated with correct count\n- [ ] Total still sums to 46 active tasks (or corrected total)\n\n**Files affected:** docs/plans/2026-02-06-full-abac-implementation.md","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T15:14:20Z","created_by":"seanb4t","updated_at":"2026-02-10T15:33:17Z","closed_at":"2026-02-10T15:33:17Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.519","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.52","title":"Add early @ prefix removal task before Phase 7.4","description":"## Review Finding: I2 — @ prefix removal timing contradicts seed policy references\n\n**Source:** PR #69 review\n**Plan location:** Task 30 (Phase 7.6) vs Tasks 21-22 (Phase 7.4)\n**Spec location:** Lines 3207-3211\n\n### Problem\nThe spec states: \"The @ prefix removal MUST happen before or concurrently with Phase 7.4 seed policy creation, since seed policies reference command names without the @ prefix (e.g., 'dig' not '@dig').\"\n\nThe plan places @ prefix removal in Task 30 (Phase 7.6), well after seed policies are created in Tasks 21-22 (Phase 7.4). Seed policies would reference \"dig\" but the command registry still uses \"@dig\".\n\n### Decision\nAdd an early task before Phase 7.4 to strip @ prefixes from command registry.\n\n### Acceptance Criteria\n- [ ] New task created before Phase 7.4 for @ prefix removal\n- [ ] Command registry updated to use unprefixed names\n- [ ] Task 30 updated to remove @ prefix cleanup (already done)\n- [ ] Seed policies in Tasks 21-22 confirmed to use correct unprefixed names\n- [ ] No @-prefixed command names remain after the new task completes","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T16:28:13Z","created_by":"seanb4t","updated_at":"2026-02-07T16:57:51Z","closed_at":"2026-02-07T16:57:51Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.52","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.520","title":"Add missing T6→T17.1 cross-phase gate dependency","description":"**Finding:** PR #69 review Important #2\n\n**Issue:** The cross-phase gate table in 2026-02-06-full-abac-implementation.md is missing the T6 (Prefix parser, Phase 7.1) → T17.1 (System bypass + session, Phase 7.3) dependency. T17.1 evaluates policies that use prefixed identifiers (e.g., char:alice), so T6 must be complete first.\n\n**Decision:** Add row to cross-phase gate table documenting T6→T17.1.\n\n**Acceptance Criteria:**\n- [ ] Gate table includes T6→T17.1 with rationale\n- [ ] Mermaid diagram updated if this edge is missing there too\n\n**Files affected:** docs/plans/2026-02-06-full-abac-implementation.md\n**Conceptual overlap:** Cross-phase gate table fixes (I3, I6)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T15:14:28Z","created_by":"seanb4t","updated_at":"2026-02-10T15:40:50Z","closed_at":"2026-02-10T15:40:50Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.520","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.521","title":"Fix gate table: T5→T13 should be T6→T13 per task spec","description":"**Finding:** PR #69 review Important #3\n\n**Issue:** The cross-phase gate table shows T5→T13 but Task 13's own dependency section in the phase plan says it depends on T6, not T5. T6 (prefix parser) defines the identifier format that T13 (AttributeSchema) needs, making T6 the correct dependency.\n\n**Decision:** Update gate table from T5→T13 to T6→T13 to match Task 13's spec.\n\n**Acceptance Criteria:**\n- [ ] Gate table corrected from T5→T13 to T6→T13\n- [ ] Rationale in gate table updated\n\n**Files affected:** docs/plans/2026-02-06-full-abac-implementation.md\n**Conceptual overlap:** Cross-phase gate table fixes (I2, I6)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T15:14:37Z","created_by":"seanb4t","updated_at":"2026-02-10T15:40:50Z","closed_at":"2026-02-10T15:40:50Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.521","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.521","depends_on_id":"holomush-5k1.520","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.522","title":"Fix Character Operations header: 5 call sites should be 4","description":"**Finding:** PR #69 review Important #5\n\n**Issue:** In 2026-02-06-full-abac-phase-7.4.md (line 757), the header says \"Character Operations (5 call sites)\" but the table lists only 4 rows (#21-#24: GetCharacter, GetCharactersByLocation, MoveCharacter, ExamineCharacter). Phase 7.6 (line 170) correctly says \"Characters (4)\".\n\nAlso in Phase 7.6, line 612 has a code comment saying \"Character operations (5 call sites)\" which should also be fixed to 4.\n\n**Decision:** Update headers to \"4 call sites\" in both Phase 7.4 and Phase 7.6 line 612.\n\n**Acceptance Criteria:**\n- [ ] Phase 7.4 line 757 header says \"4 call sites\"\n- [ ] Phase 7.6 line 612 code comment says \"4 call sites\"\n- [ ] Count matches actual table rows\n\n**Files affected:** docs/plans/2026-02-06-full-abac-phase-7.4.md, docs/plans/2026-02-06-full-abac-phase-7.6.md","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T15:14:40Z","created_by":"seanb4t","updated_at":"2026-02-10T15:32:20Z","closed_at":"2026-02-10T15:32:20Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.522","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.523","title":"Remove spurious T7→T12 dependency edge from mermaid and gate table","description":"**Finding:** PR #69 review Important #4\n\n**Issue:** The mermaid diagram has T7→T12 (PolicyStore→PolicyCompiler) but Task 12's listed dependencies are T9 (parser), T11 (evaluator), T6 (schema) — no T7. PolicyCompiler compiles DSL text against a schema; it does not need the storage layer.\n\n**Decision (approved by project owner):** Remove the T7→T12 edge. This shortens the critical path since T12 can start once T9/T11/T6 are done without waiting for T7. Update critical path text if affected.\n\n**Acceptance Criteria:**\n- [ ] T7→T12 edge removed from mermaid diagram (line ~297)\n- [ ] Gate table updated if T7→T12 appears there\n- [ ] Critical path text updated if it referenced this edge\n- [ ] No orphaned T12 — verify T12 still reachable via T9/T11\n\n**Files affected:** docs/plans/2026-02-06-full-abac-implementation.md\n**Conceptual overlap:** Mermaid diagram changes (S6)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T15:14:45Z","created_by":"seanb4t","updated_at":"2026-02-10T15:43:26Z","closed_at":"2026-02-10T15:43:26Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.523","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.524","title":"Add T2→T19 and T5→T19 cross-phase deps to gate table","description":"**Finding:** PR #69 review Important #6\n\n**Issue:** Task 19 (Audit logger, Phase 7.3) has cross-phase dependencies T2→T19 (Phase 7.1→7.3) and T5→T19 (Phase 7.1→7.3) that are not documented in the cross-phase gate table.\n\nT2 provides the audit schema and T5 provides the policy types that the audit logger needs.\n\n**Decision:** Add rows to gate table for T2→T19 and T5→T19 with rationale.\n\n**Acceptance Criteria:**\n- [ ] Gate table includes T2→T19 with rationale\n- [ ] Gate table includes T5→T19 with rationale\n- [ ] Mermaid diagram updated if these edges are missing\n\n**Files affected:** docs/plans/2026-02-06-full-abac-implementation.md\n**Conceptual overlap:** Cross-phase gate table fixes (I2, I3)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T15:14:50Z","created_by":"seanb4t","updated_at":"2026-02-10T15:40:50Z","closed_at":"2026-02-10T15:40:50Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.524","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.524","depends_on_id":"holomush-5k1.521","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.525","title":"Rename audit mode 'off' to 'minimal' for clarity","description":"**Finding:** PR #69 review Important #9 + Suggestion #3\n\n**Issue:** The audit mode off still logs system bypasses and explicit denials, making the name misleading. The functional distinction between off (bypasses + denials) and denials_only (bypasses + deny + default_deny) is that off omits default_deny entries.\n\n**Decision (approved by project owner):** Rename off to minimal. This clarifies that the mode still logs critical events while suppressing most entries.\n\n**Acceptance Criteria:**\n- [ ] Go const AuditOff renamed to AuditMinimal with value \"minimal\" in 05-storage-audit.md\n- [ ] Audit mode table updated with minimal name and description\n- [ ] All references to off mode in spec and plan files updated\n- [ ] ADR references updated if any mention the off mode name\n- [ ] Design decision documented\n\n**Files affected:** docs/specs/abac/05-storage-audit.md, possibly ADR files","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T15:14:54Z","created_by":"seanb4t","updated_at":"2026-02-10T15:38:48Z","closed_at":"2026-02-10T15:38:48Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.525","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.526","title":"Fix DSL keyword: subject.role should be principal.role in lockout scenario","description":"**Finding:** PR #69 review Important #7\n\n**Issue:** In 04-resolution-evaluation.md (line 712), the admin lockout scenario walkthrough uses subject.role == \"admin\" but the DSL uses principal.role (not subject.role). All other DSL examples in the spec use principal.role correctly.\n\n**Decision:** Change subject.role to principal.role at line 712.\n\n**Acceptance Criteria:**\n- [ ] Line 712 uses principal.role == \"admin\" instead of subject.role == \"admin\"\n- [ ] No other instances of subject.role remain in spec files\n\n**Files affected:** docs/specs/abac/04-resolution-evaluation.md","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T15:14:57Z","created_by":"seanb4t","updated_at":"2026-02-10T15:32:20Z","closed_at":"2026-02-10T15:32:20Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.526","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.527","title":"Fix circuit breaker count: 'three designs' should be 'two'","description":"**Finding:** PR #69 review Important #10\n\n**Issue:** In 04-resolution-evaluation.md (line 550), the text says \"three distinct circuit breaker designs\" but the table at lines 553-556 only has two rows (General provider, PropertyProvider).\n\n**Decision (confirmed by project owner):** There are only two designs. Fix the text to say \"two\".\n\n**Acceptance Criteria:**\n- [ ] Line 550 says \"two distinct circuit breaker designs\"\n- [ ] No other references to \"three circuit breakers\" in spec\n\n**Files affected:** docs/specs/abac/04-resolution-evaluation.md","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T15:15:02Z","created_by":"seanb4t","updated_at":"2026-02-10T15:32:20Z","closed_at":"2026-02-10T15:32:20Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.527","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.528","title":"Add deferred policy subcommands (diff/export/import) to section 06 synopsis","description":"**Finding:** PR #69 review Important #8\n\n**Issue:** Section 06 (06-layers-commands.md, lines 360-371) lists 12 policy subcommands in its synopsis but omits diff, export, and import which are described in section 08 as future/deferred commands.\n\n**Decision:** Add the 3 deferred commands to the synopsis with a (deferred) annotation, or add a cross-reference note pointing to section 08 for deferred commands.\n\n**Acceptance Criteria:**\n- [ ] Synopsis references deferred commands (diff, export, import)\n- [ ] Clear that these are deferred/future, not Phase 1\n\n**Files affected:** docs/specs/abac/06-layers-commands.md","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T15:15:05Z","created_by":"seanb4t","updated_at":"2026-02-10T15:45:37Z","closed_at":"2026-02-10T15:45:37Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.528","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.529","title":"Move ADR #66 from phase-7.5 to phase-7.3 directory","description":"**Finding:** PR #69 review Important #11\n\n**Issue:** ADR #66 (066-sync-audit-system-bypass.md) is located in docs/specs/decisions/epic7/phase-7.5/ but it implements a Phase 7.3 concern (audit engine behavior for system bypass writes). Being in the phase-7.5 directory may lead to it being misinterpreted as deferred work.\n\n**Decision:** Move the file from phase-7.5/ to phase-7.3/ directory.\n\n**Acceptance Criteria:**\n- [ ] 066-sync-audit-system-bypass.md moved to phase-7.3/\n- [ ] Any cross-references updated (README, spec files)\n- [ ] No broken links\n\n**Files affected:** docs/specs/decisions/epic7/phase-7.5/066-sync-audit-system-bypass.md → docs/specs/decisions/epic7/phase-7.3/","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T15:15:12Z","created_by":"seanb4t","updated_at":"2026-02-10T15:47:05Z","closed_at":"2026-02-10T15:47:05Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.529","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.53","title":"Define separate PolicyEffect type for stored policy effect","description":"## Review Finding: I3 — StoredPolicy.Effect conflates policy effect with decision effect\n\n**Source:** PR #69 review\n**Plan location:** Task 6, lines 660-674\n**Spec location:** Lines 1978-1993 (access_policies table)\n\n### Problem\nStoredPolicy.Effect is typed as policy.Effect (int iota enum: EffectDefaultDeny, EffectAllow, EffectDeny, EffectSystemBypass). But the DB stores effect as TEXT CHECK ('permit', 'forbid'). These are conceptually different:\n- Policy effect: permit/forbid (what the policy DECLARES)\n- Decision effect: allow/deny/default_deny/system_bypass (what the engine DECIDES)\n\nThe plan conflates them by reusing the decision Effect enum for stored policies.\n\n### Decision\nDefine a separate PolicyEffect type with PolicyEffectPermit/PolicyEffectForbid constants, distinct from the decision Effect enum.\n\n### Acceptance Criteria\n- [ ] New PolicyEffect type defined (PolicyEffectPermit, PolicyEffectForbid)\n- [ ] StoredPolicy.Effect uses PolicyEffect (not policy.Effect)\n- [ ] Serialization to/from DB TEXT values (\"permit\"/\"forbid\") implemented\n- [ ] Decision Effect enum unchanged (allow/deny/default_deny/system_bypass)\n- [ ] Clear documentation distinguishing the two types","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T16:28:21Z","created_by":"seanb4t","updated_at":"2026-02-07T17:01:01Z","closed_at":"2026-02-07T17:01:01Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.53","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.530","title":"Deduplicate Known Limitations headings in sections 04 and 08","description":"**Finding:** PR #69 review Suggestion #2\n\n**Issue:** Both 04-resolution-evaluation.md (line 696) and 08-testing-appendices.md (line 118) have ## Known Limitations headings. When rendered in combined documentation, this creates anchor conflicts (both resolve to #known-limitations).\n\n**Decision:** Rename to unique anchors, e.g.:\n- Section 04: ## Known Limitations — Resolution\n- Section 08: ## Known Limitations — Testing\n\n**Acceptance Criteria:**\n- [ ] Headings have unique anchor-generating names\n- [ ] Any cross-references to these sections updated\n- [ ] No anchor conflicts in rendered docs\n\n**Files affected:** docs/specs/abac/04-resolution-evaluation.md, docs/specs/abac/08-testing-appendices.md","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T15:15:19Z","created_by":"seanb4t","updated_at":"2026-02-10T15:45:37Z","closed_at":"2026-02-10T15:45:37Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.530","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.531","title":"Create ADR for LISTEN/NOTIFY disconnection recovery strategy","description":"**Finding:** PR #69 review Suggestion #4\n\n**Issue:** The LISTEN/NOTIFY disconnection recovery behavior is documented in 05-storage-audit.md (lines 160-187) covering: stale cache usage, staleness threshold (30s default), fail-closed behavior, manual policy reload command. However, there is no formal ADR documenting this as a deliberate design decision with alternatives considered.\n\n**Decision (approved by project owner):** Create a formal ADR in phase-7.3 decisions directory.\n\n**Acceptance Criteria:**\n- [ ] New ADR created in docs/specs/decisions/epic7/phase-7.3/\n- [ ] Documents: context, problem, decision, alternatives considered, rationale\n- [ ] Cross-references spec section 05 lines 160-187\n- [ ] ADR number follows existing sequence\n- [ ] README index updated\n\n**Files affected:** docs/specs/decisions/epic7/phase-7.3/ (new file), docs/specs/decisions/epic7/README.md","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T15:15:27Z","created_by":"seanb4t","updated_at":"2026-02-10T15:44:11Z","closed_at":"2026-02-10T15:44:11Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.531","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.532","title":"Remove Task 36 stub from Phase 7.7 (moved to T23b)","description":"**Finding:** PR #69 review Suggestion #5\n\n**Issue:** Phase 7.7 (2026-02-06-full-abac-phase-7.7.md, line 383) contains a Task 36 stub that just says the task was moved to Phase 7.4 as Task 23b. The stub is unnecessary clutter since the redirect is clear and the actual work is fully defined in T23b.\n\n**Decision:** Remove the Task 36 stub section entirely, or reduce to a one-line note.\n\n**Acceptance Criteria:**\n- [ ] Task 36 stub removed or reduced to minimal redirect\n- [ ] No broken cross-references\n\n**Files affected:** docs/plans/2026-02-06-full-abac-phase-7.7.md","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T15:15:36Z","created_by":"seanb4t","updated_at":"2026-02-10T15:45:37Z","closed_at":"2026-02-10T15:45:37Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.532","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.533","title":"Remove redundant T0→T7 edge from mermaid diagram","description":"**Finding:** PR #69 review Suggestion #6\n\n**Issue:** In 2026-02-06-full-abac-implementation.md (line 294), the mermaid diagram has a direct T0→T7 edge that is redundant because T7 is already reachable via T0→T0.5→T1→T7. The direct edge adds visual clutter without conveying additional dependency information.\n\n**Decision:** Remove the T0→T7 edge from the mermaid diagram.\n\n**Acceptance Criteria:**\n- [ ] T0→T7 edge removed from mermaid diagram\n- [ ] T7 still reachable via transitive path\n- [ ] Diagram renders correctly\n\n**Files affected:** docs/plans/2026-02-06-full-abac-implementation.md\n**Conceptual overlap:** Mermaid diagram changes (I4)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T15:15:43Z","created_by":"seanb4t","updated_at":"2026-02-10T15:47:51Z","closed_at":"2026-02-10T15:47:51Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.533","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.533","depends_on_id":"holomush-5k1.523","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.534","title":"Convert raw line-number spec refs to anchor links in phase plans","description":"**Finding:** PR #69 review Suggestion #7\n\n**Issue:** Phase plans 7.3 and 7.7 use raw line-number references to spec sections (e.g., 'see line 345') instead of anchor-based markdown links (e.g., '[section](#anchor)'). Other phase files (7.1, 7.2) use the proper anchor format consistently.\n\n**Decision:** Convert all line-number references to anchor-based links.\n\n**Acceptance Criteria:**\n- [ ] No raw line-number references in phase-7.3.md\n- [ ] No raw line-number references in phase-7.7.md\n- [ ] All references use file.md#anchor format\n- [ ] Referenced anchors exist in target files\n\n**Files affected:** docs/plans/2026-02-06-full-abac-phase-7.3.md, docs/plans/2026-02-06-full-abac-phase-7.7.md","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T15:15:52Z","created_by":"seanb4t","updated_at":"2026-02-10T15:52:01Z","closed_at":"2026-02-10T15:52:01Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.534","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.535","title":"C1: Performance target contradiction between spec sections","description":"## Issue\n`01-core-types.md` line 112 states '\u003c25ms p99 latency target for cached requests' but `04-resolution-evaluation.md` lines 443-444 defines cached at \u003c10ms and cold at \u003c25ms. The text conflates the cold target with cached.\n\n## Fix\nChange line 112 in `01-core-types.md` to reference the \u003c10ms cached target, aligning with the detailed targets in `04-resolution-evaluation.md`.\n\n## Files Affected\n- `docs/specs/abac/01-core-types.md` (line 112)\n- `docs/specs/abac/04-resolution-evaluation.md` (lines 443-444, reference only)\n\n## Acceptance Criteria\n- [ ] `01-core-types.md` references \u003c10ms for cached requests\n- [ ] All spec sections use consistent performance targets\n- [ ] No other files reference the incorrect \u003c25ms cached target","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T20:41:15Z","created_by":"seanb4t","updated_at":"2026-02-10T21:15:54Z","closed_at":"2026-02-10T21:15:54Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.535","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.536","title":"C2: ADR #104 contradicts spec on minimal audit mode behavior","description":"## Issue\nADR #104 (rename audit off to minimal) states minimal omits `default_deny` entries, but this directly contradicts:\n- `04-resolution-evaluation.md` line 411: 'Log denials (forbid + default deny) in ALL modes'\n- `05-storage-audit.md` lines 281-283 (S3): 'Denial records MUST be logged regardless of configured audit mode'\n- ADR #86: 'Audit mode minimal MUST still log denials (deny and default_deny outcomes)'\n\n## Decision\nPer C3 resolution: `minimal` is documented as an alias for `denials_only`, reserved for future differentiation. Remove the incorrect distinction claim from ADR #104.\n\n## Files Affected\n- `docs/specs/decisions/epic7/general/104-rename-audit-off-to-minimal.md`\n\n## Dependencies\n- Depends on C3 (audit mode alias resolution) for correct wording\n\n## Acceptance Criteria\n- [ ] ADR #104 no longer claims minimal omits default_deny entries\n- [ ] ADR #104 references the alias decision\n- [ ] No contradiction between ADR #104 and spec sections","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T20:41:22Z","created_by":"seanb4t","updated_at":"2026-02-10T21:16:48Z","closed_at":"2026-02-10T21:16:48Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.536","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.536","depends_on_id":"holomush-5k1.537","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.537","title":"C3: minimal vs denials_only audit modes are functionally identical","description":"## Issue\nAfter ADR #56 (system bypasses in minimal) and ADR #86 (denials in minimal), both `minimal` and `denials_only` modes log the same things: system bypasses + deny + default_deny. The three-tier audit system is effectively two-tier.\n\n## Decision\n**Option (c): Document as alias.** `minimal` is an alias for `denials_only`, reserved for future differentiation. No functional change needed now. This defers the full design decision while preserving the three-tier naming for future use.\n\n## Files Affected\n- `docs/specs/abac/05-storage-audit.md` (lines 244-261, audit mode definitions)\n- `docs/specs/decisions/epic7/general/104-rename-audit-off-to-minimal.md`\n- New ADR documenting the alias decision\n\n## Acceptance Criteria\n- [ ] `05-storage-audit.md` documents `minimal` as alias for `denials_only`\n- [ ] New ADR records the alias decision with rationale\n- [ ] No spec section implies functional difference between the two modes\n- [ ] ADR #104 updated to reflect alias status","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T20:41:28Z","created_by":"seanb4t","updated_at":"2026-02-10T21:15:54Z","closed_at":"2026-02-10T21:15:54Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.537","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.538","title":"I1: Reference to deferred policy lint --fix as if available","description":"## Issue\n`02-policy-dsl.md` line 123 references `policy lint --fix` command, but `08-testing-appendices.md` lists it as Future/Deferred. The spec reads as if the command is available in the current phase.\n\n## Fix\nAdd caveat language to `02-policy-dsl.md` line 123 indicating this command is deferred/future.\n\n## Files Affected\n- `docs/specs/abac/02-policy-dsl.md` (line 123)\n\n## Acceptance Criteria\n- [ ] `02-policy-dsl.md` clearly marks `policy lint --fix` as deferred\n- [ ] Language indicates this is a future capability, not current phase","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T20:41:36Z","created_by":"seanb4t","updated_at":"2026-02-10T21:55:52Z","closed_at":"2026-02-10T21:55:52Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.538","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.539","title":"I2: ADR count mismatch — 95 vs 93","description":"## Issue\nDesign decisions file says '95' ADRs but README index and disk count show 93. The count is incorrect.\n\n## Fix\nChange the count to 93 in the design decisions file.\n\n## Files Affected\n- `docs/specs/2026-02-05-full-abac-design-decisions.md` (line referencing count)\n\n## Acceptance Criteria\n- [ ] ADR count matches actual number of decision files on disk\n- [ ] All references to the count are consistent","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T20:41:40Z","created_by":"seanb4t","updated_at":"2026-02-10T21:55:52Z","closed_at":"2026-02-10T21:55:52Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.539","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.54","title":"Fix AuditMode type to match spec (string, not int iota)","description":"## Review Finding: I4 — AuditMode type inconsistency with spec\n\n**Source:** PR #69 review\n**Plan location:** Task 18, line 1704\n**Spec location:** Lines 2198-2204\n\n### Problem\nPlan defines AuditMode as int type using iota. Spec defines it as string type:\n  type AuditMode string\n  const (\n    AuditOff         AuditMode = \"off\"\n    AuditDenialsOnly AuditMode = \"denials_only\"\n    AuditAll         AuditMode = \"all\"\n  )\n\nString-based type is needed for YAML config deserialization and human-readable logging.\n\n### Acceptance Criteria\n- [ ] AuditMode changed to string type matching spec\n- [ ] Constants use string values: \"off\", \"denials_only\", \"all\"\n- [ ] YAML config deserialization works without custom unmarshaler\n- [ ] Logging outputs human-readable mode names","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T16:28:29Z","created_by":"seanb4t","updated_at":"2026-02-07T17:01:01Z","closed_at":"2026-02-07T17:01:01Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.54","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.540","title":"I3: Phase 7.5 deferred but spec section 06 lacks deferral annotation","description":"## Issue\nPhase 7.5 is deferred, but spec section `06-layers-commands.md` documents locks/admin commands in detail without any annotation indicating the content is deferred. Readers may assume this is current-phase work.\n\n## Fix\nAdd prominent deferral note at top of Lock Syntax subsection in `06-layers-commands.md`.\n\n## Files Affected\n- `docs/specs/abac/06-layers-commands.md` (Lock Syntax subsection)\n\n## Acceptance Criteria\n- [ ] Lock Syntax subsection has a clear deferral notice\n- [ ] Notice references Phase 7.5 deferral status\n- [ ] Notice appears before the detailed content","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T20:41:44Z","created_by":"seanb4t","updated_at":"2026-02-10T21:55:52Z","closed_at":"2026-02-10T21:55:52Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.540","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.541","title":"I4: seed:property-owner-write fails-safe for ownerless properties undocumented","description":"## Issue\nThe `seed:property-owner-write` policy has undocumented behavior where properties without an owner are unwritable by non-admins. This is a reasonable security default (fail-safe) but should be explicitly documented so implementors understand the intent.\n\n## Fix\nAdd explanatory comment in the seed policy documentation describing the fails-safe behavior for ownerless properties.\n\n## Files Affected\n- Seed policy documentation (spec section referencing `seed:property-owner-write`)\n\n## Acceptance Criteria\n- [ ] Ownerless property behavior is explicitly documented\n- [ ] Fail-safe rationale is explained\n- [ ] Non-admin restriction is clear","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T20:41:49Z","created_by":"seanb4t","updated_at":"2026-02-10T21:55:52Z","closed_at":"2026-02-10T21:55:52Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.541","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.542","title":"I5: Decision.Validate() uses fmt.Errorf instead of oops","description":"## Issue\nThe `Decision.Validate()` method in the spec uses `fmt.Errorf` for error creation, but HoloMUSH conventions require `oops` for structured errors (per CLAUDE.md error handling section).\n\n## Fix\nEither switch the spec example to use `oops` or document why `fmt.Errorf` is acceptable for validation methods (e.g., if validation errors don't need structured context).\n\n## Files Affected\n- Spec section containing `Decision.Validate()` code example\n\n## Acceptance Criteria\n- [ ] Error handling aligns with project conventions or exception is documented\n- [ ] If using oops, structured context is included (e.g., field names)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T20:41:54Z","created_by":"seanb4t","updated_at":"2026-02-10T21:55:52Z","closed_at":"2026-02-10T21:55:52Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.542","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.543","title":"I6: Microbenchmark targets unanchored in spec","description":"## Issue\n`08-testing-appendices.md` lines 187-188 define microbenchmark targets that are not referenced in any spec performance section. These targets float without connection to the normative performance requirements.\n\n## Fix\nAnchor the microbenchmark targets by cross-referencing them from the relevant spec performance sections, or move them into those sections.\n\n## Files Affected\n- `docs/specs/abac/08-testing-appendices.md` (lines 187-188)\n- Performance sections in other spec files (cross-references)\n\n## Acceptance Criteria\n- [ ] Microbenchmark targets are referenced from normative performance sections\n- [ ] Clear traceability between targets and spec requirements","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T20:41:58Z","created_by":"seanb4t","updated_at":"2026-02-10T21:41:15Z","closed_at":"2026-02-10T21:41:15Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.543","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.544","title":"I7: Missing T5→T13 dependency in phase 7.3 file","description":"## Issue\nMermaid diagram and gate table show T5→T13 dependency, but Phase 7.3 Task 13 only lists T6 in its dependencies. The task dependency list is incomplete.\n\n## Fix\nAdd T5 to Task 13's dependency list in the Phase 7.3 file.\n\n## Files Affected\n- Phase 7.3 plan file (Task 13 dependencies section)\n- Verify mermaid diagram matches\n\n## Acceptance Criteria\n- [ ] Task 13 lists both T5 and T6 as dependencies\n- [ ] Phase file text matches mermaid diagram and gate table","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T20:42:06Z","created_by":"seanb4t","updated_at":"2026-02-10T21:55:52Z","closed_at":"2026-02-10T21:55:52Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.544","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.545","title":"I8: Missing T0→T8 dependency in phase 7.2 file","description":"## Issue\nMermaid diagram and gate table show T0→T8 dependency, but Phase 7.2 Task 8 only lists T5 in its dependencies. The task dependency list is incomplete.\n\n## Fix\nAdd T0 to Task 8's dependency list in the Phase 7.2 file.\n\n## Files Affected\n- Phase 7.2 plan file (Task 8 dependencies section)\n- Verify mermaid diagram matches\n\n## Acceptance Criteria\n- [ ] Task 8 lists both T0 and T5 as dependencies\n- [ ] Phase file text matches mermaid diagram and gate table","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T20:42:08Z","created_by":"seanb4t","updated_at":"2026-02-10T21:55:52Z","closed_at":"2026-02-10T21:55:52Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.545","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.546","title":"I9: Mermaid edges T14→T15 and T14→T16a should be T13→T15 and T13→T16a","description":"## Issue\nMermaid edges show T14→T15 and T14→T16a, but providers depend on the interface (T13), not the resolver (T14). The mermaid overstates sequentiality — T14 and T15 can actually run in parallel after T13.\n\n## Fix\nChange mermaid edges from T14→T15 and T14→T16a to T13→T15 and T13→T16a. This correctly enables parallelism between T14 and T15 after T13 completes.\n\n## Files Affected\n- Mermaid dependency diagram in plan file\n- Gate table (if it reflects the incorrect edges)\n\n## Acceptance Criteria\n- [ ] Mermaid shows T13→T15 and T13→T16a (not T14→)\n- [ ] T14 and T15 shown as parallelizable after T13\n- [ ] Gate table matches corrected mermaid","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T20:42:12Z","created_by":"seanb4t","updated_at":"2026-02-10T21:55:52Z","closed_at":"2026-02-10T21:55:52Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.546","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.547","title":"I10: Critical path description incorrect","description":"## Issue\nCritical path description states 'T13→T14→T15' as sequential, but T15 depends only on T13 (not T14). The actual critical path is T13 → (T14 \\|\\| T15) → T17.1, with T14 and T15 running in parallel. The critical path through providers is T13→T14→T17.1.\n\n## Fix\nCorrect the critical path description to reflect the parallelism enabled by I9's mermaid fix.\n\n## Dependencies\n- Conceptually related to I9 (mermaid edge correction)\n\n## Files Affected\n- Plan file critical path section\n\n## Acceptance Criteria\n- [ ] Critical path correctly describes T13 → (T14 \\|\\| T15) → T17.1\n- [ ] Parallelism between T14 and T15 is noted\n- [ ] Actual longest path is identified","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T20:42:17Z","created_by":"seanb4t","updated_at":"2026-02-10T22:17:22Z","closed_at":"2026-02-10T22:17:22Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.547","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.547","depends_on_id":"holomush-5k1.546","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.548","title":"I11: Missing T12→T18 cross-phase dependency edge","description":"## Issue\nPhase file lists T12 as a T18 dependency (PolicyCache needs PolicyCompiler), but neither the mermaid diagram nor the gate table includes this cross-phase edge.\n\n## Fix\nAdd T12→T18 edge to both mermaid diagram and gate table.\n\n## Files Affected\n- Mermaid dependency diagram\n- Gate table\n\n## Acceptance Criteria\n- [ ] Mermaid shows T12→T18 edge\n- [ ] Gate table lists T12 as dependency for T18\n- [ ] Cross-phase dependency is visible in both representations","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T20:42:20Z","created_by":"seanb4t","updated_at":"2026-02-10T22:17:22Z","closed_at":"2026-02-10T22:17:22Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.548","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.549","title":"I12: dprint CI installation lacks SHA256 hash pinning (ADR #93 violation)","description":"## Issue\n`ci.yaml` line 76 uses `curl | sh` for dprint installation with only version pin, no SHA256 hash verification. This is inconsistent with rumdl's SHA256 verification pattern and violates Decision #93 (CI tool pinning).\n\n## Fix\nAdd SHA256 hash verification to the dprint installation step in CI, matching the pattern used for rumdl.\n\n## Files Affected\n- `.github/workflows/ci.yaml` (line 76, dprint installation)\n\n## Acceptance Criteria\n- [ ] dprint installation includes SHA256 hash verification\n- [ ] Pattern matches rumdl's verification approach\n- [ ] ADR #93 compliance restored","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T20:42:25Z","created_by":"seanb4t","updated_at":"2026-02-10T21:15:54Z","closed_at":"2026-02-10T21:15:54Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.549","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.55","title":"Fix evaluation algorithm step count (7 steps, not 9)","description":"## Review Finding: I5 — Plan says 9-step algorithm, spec defines 7 steps\n\n**Source:** PR #69 review\n**Plan location:** Task 16, lines 1487-1499\n**Spec location:** Lines 1644-1690\n\n### Problem\nTask 16 says \"Implements the 9-step evaluation algorithm from the spec exactly\" and lists steps 1-9. The spec defines a 7-step algorithm:\n1. System bypass\n2. Session resolution\n3. Resolve attributes\n4. Find applicable policies\n5. Evaluate conditions\n6. Combine decisions\n7. Audit\n\nThe plan inflates to 9 by adding \"caller invokes Evaluate()\" (step 1) and \"returns Decision\" (step 9).\n\n### Acceptance Criteria\n- [ ] Task 16 updated to reference 7-step algorithm matching spec\n- [ ] Steps renumbered to align with spec lines 1644-1690\n- [ ] If plan keeps 9 steps, deviation from spec explicitly noted","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T16:29:06Z","created_by":"seanb4t","updated_at":"2026-02-07T17:03:54Z","closed_at":"2026-02-07T17:03:54Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.55","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.550","title":"I13: Taskfile lint:markdown and fmt:markdown double-scan site/ files","description":"## Issue\n`rumdl check .` scans all files including `site/`, then `rumdl check --config site/.rumdl.toml site/` re-checks site/ with different rules. Lefthook handles this correctly with `exclude: site/**` but Taskfile doesn't. This causes redundant scanning and potential rule conflicts.\n\n## Fix\nAdd `--exclude site` to root rumdl invocations in Taskfile, matching Lefthook's pattern.\n\n## Files Affected\n- `Taskfile.yml` (lint:markdown and fmt:markdown tasks)\n\n## Acceptance Criteria\n- [ ] Root rumdl invocations exclude site/ directory\n- [ ] site/ is only scanned with its own config\n- [ ] No double-scanning of site/ files","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T20:42:30Z","created_by":"seanb4t","updated_at":"2026-02-10T21:15:54Z","closed_at":"2026-02-10T21:15:54Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.550","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.551","title":"S1: ADR #56 and #86 titles still reference Off Mode","description":"## Issue\nADR #56 and #86 titles still reference 'Off Mode' but this was renamed to 'minimal' per ADR #104. The titles are stale.\n\n## Fix\nAdd note to ADR #56 and #86 about the rename to 'minimal' per ADR #104.\n\n## Dependencies\n- Related to C3 (audit mode alias resolution)\n\n## Files Affected\n- ADR #56 file\n- ADR #86 file\n\n## Acceptance Criteria\n- [ ] Both ADRs reference the rename to minimal\n- [ ] Notes reference ADR #104 for the rename decision","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T20:42:38Z","created_by":"seanb4t","updated_at":"2026-02-10T22:17:22Z","closed_at":"2026-02-10T22:17:22Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.551","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.551","depends_on_id":"holomush-5k1.537","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.552","title":"S2: Grammar | expr production comment could be clearer","description":"## Issue\nThe grammar comment for the `| expr` production could be clearer. It should explicitly state that bare attribute references are rejected.\n\n## Fix\nRephrase the comment to explicitly state that bare attribute references are rejected.\n\n## Files Affected\n- `docs/specs/abac/02-policy-dsl.md` (grammar section)\n\n## Acceptance Criteria\n- [ ] Comment explicitly states bare attribute references are rejected\n- [ ] Grammar production is clearly documented","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T20:42:41Z","created_by":"seanb4t","updated_at":"2026-02-10T22:17:22Z","closed_at":"2026-02-10T22:17:22Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.552","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.553","title":"S3: env.hour/env.minute typed as float64 — add explanatory note","description":"## Issue\n`env.hour` and `env.minute` are typed as `float64`. This is correct for type-system uniformity but may confuse readers expecting integer types for time components.\n\n## Fix\nAdd inline note explaining the type-system uniformity rationale.\n\n## Files Affected\n- Spec section defining env attributes and their types\n\n## Acceptance Criteria\n- [ ] Inline note explains why float64 is used for integer-like values\n- [ ] Type-system uniformity rationale is clear","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T20:42:45Z","created_by":"seanb4t","updated_at":"2026-02-10T22:17:22Z","closed_at":"2026-02-10T22:17:22Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.553","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.554","title":"S4: Testing section still says off mode instead of minimal","description":"## Issue\n`08-testing-appendices.md` line 31 uses 'off' mode instead of the renamed 'minimal/denials_only/all' terminology per ADR #104.\n\n## Dependencies\n- Related to C3 (audit mode alias resolution)\n\n## Files Affected\n- `docs/specs/abac/08-testing-appendices.md` (line 31)\n\n## Acceptance Criteria\n- [ ] 'off' replaced with 'minimal' (or current naming per C3 resolution)\n- [ ] All three audit modes named consistently","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T20:42:48Z","created_by":"seanb4t","updated_at":"2026-02-10T22:17:22Z","closed_at":"2026-02-10T22:17:22Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.554","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.554","depends_on_id":"holomush-5k1.537","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.555","title":"S5: list_characters action in AccessRequest comment unexplained","description":"## Issue\nThe `list_characters` action appears in an AccessRequest comment without explanation. It's unclear if this is a built-in action or a plugin-defined example.\n\n## Fix\nEither remove the unexplained action or add a note indicating it's a plugin-defined example.\n\n## Files Affected\n- Spec section containing AccessRequest code example\n\n## Acceptance Criteria\n- [ ] `list_characters` action is either explained or removed\n- [ ] If kept, clearly marked as example/plugin-defined","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T20:42:51Z","created_by":"seanb4t","updated_at":"2026-02-10T22:17:22Z","closed_at":"2026-02-10T22:17:22Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.555","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.556","title":"S6: Clarify policy reload during fail-closed state","description":"## Issue\nThe spec doesn't document how `policy reload` works during a fail-closed state. If the system is fail-closed due to policy errors, administrators need an out-of-band mechanism to reload policies.\n\n## Fix\nDocument the out-of-band access mechanism for policy reload during fail-closed state.\n\n## Files Affected\n- Relevant spec section on fail-closed behavior and policy management\n\n## Acceptance Criteria\n- [ ] Out-of-band reload mechanism is documented\n- [ ] Fail-closed recovery path is clear to implementors","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T20:42:55Z","created_by":"seanb4t","updated_at":"2026-02-10T22:17:22Z","closed_at":"2026-02-10T22:17:22Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.556","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.557","title":"S7: Phase 7.4 nav header links to deferred Phase 7.5 without annotation","description":"## Issue\nPhase 7.4 navigation header links to deferred Phase 7.5 without any annotation. Readers may not realize 7.5 is deferred.\n\n## Fix\nAdd '(deferred)' label to the Phase 7.5 link and point the 'next active phase' link to Phase 7.6 instead.\n\n## Files Affected\n- Phase 7.4 plan file (navigation header)\n\n## Acceptance Criteria\n- [ ] Phase 7.5 link labeled as '(deferred)'\n- [ ] Next active phase link points to 7.6","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T20:42:58Z","created_by":"seanb4t","updated_at":"2026-02-10T22:17:22Z","closed_at":"2026-02-10T22:17:22Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.557","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.558","title":"S8: GitHub Actions not pinned to commit SHAs","description":"## Issue\nPre-existing pattern but newly added `actions/cache@v4` is inconsistent with the security posture implied by ADR #93. While the full repo uses tag-based pinning, at minimum the new action should be pinned.\n\n## Fix\nPin at minimum the new `actions/cache@v4` action to a commit SHA, consistent with the security posture.\n\n## Files Affected\n- `.github/workflows/ci.yaml` (actions/cache@v4 reference)\n\n## Acceptance Criteria\n- [ ] New actions/cache action pinned to commit SHA\n- [ ] Comment noting the full SHA for version tracking","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-10T20:43:02Z","created_by":"seanb4t","updated_at":"2026-02-10T22:17:22Z","closed_at":"2026-02-10T22:17:22Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.558","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.559","title":"D1: Remove incorrect T9→T11 dependency edge","description":"Dependency diagram shows T9→T11 edge but Task 11 deps are T8, T5 (not T9). Evaluator (T11) needs matcher (T8), not parser (T9). Following this diagram would incorrectly sequence T11 after T9. File: docs/plans/2026-02-06-full-abac-implementation.md. Fix: Remove T9→T11 edge, add T8→T11.","acceptance_criteria":"Diagram T11 incoming edges match Task 11 dependency list exactly (T8, T5). T9→T11 removed, T8→T11 present.","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:04:30Z","created_by":"seanb4t","updated_at":"2026-02-11T00:24:10Z","closed_at":"2026-02-11T00:24:10Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.559","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.56","title":"Fix circuit breaker parameters to match spec budget-utilization design","description":"## Review Finding: I6 — General circuit breaker params differ from spec\n\n**Source:** PR #69 review\n**Plan location:** Task 35, lines 2852-2860\n**Spec location:** Lines 1830-1846\n\n### Problem\nPlan defines circuit breaker as: trigger = \"10 consecutive errors\", open duration = 30s, half-open = 1 probe. Spec defines the general provider circuit breaker as: trigger = \"\u003e80% budget utilization in \u003e50% of calls (min 10 calls)\", window = 60s, skip duration = 60s.\n\nThe spec distinguishes between:\n1. General provider circuit breaker: budget-utilization-based (lines 1830-1846)\n2. PropertyProvider circuit breaker: timeout-count-based, 3 timeouts in 60s (lines 1275-1279)\n\nThe plan conflates these, using simplified parameters from a different spec section.\n\n### Acceptance Criteria\n- [ ] Task 35 updated to match spec's general provider circuit breaker: \u003e80% budget utilization in \u003e50% of calls over 60s (min 10 calls), skip for 60s\n- [ ] PropertyProvider circuit breaker kept separate (3 timeouts in 60s per spec lines 1275-1279)\n- [ ] Both circuit breaker designs clearly distinguished in the plan","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T16:29:18Z","created_by":"seanb4t","updated_at":"2026-02-07T17:01:01Z","closed_at":"2026-02-07T17:01:01Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.56","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.560","title":"D2: Remove incorrect T15→T17.1 dependency edge","description":"Dependency diagram shows T15→T17.1 but T17.1 deps are T12, T14, T6 (not T15). Engine constructor takes AttributeResolver (T14), not individual providers (T15). File: docs/plans/2026-02-06-full-abac-implementation.md. Fix: Remove T15→T17.1 edge.","acceptance_criteria":"T17.1 diagram edges match task file deps exactly (T12, T14, T6). T15→T17.1 edge removed.","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:04:32Z","created_by":"seanb4t","updated_at":"2026-02-11T00:29:53Z","closed_at":"2026-02-11T00:29:53Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.560","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.560","depends_on_id":"holomush-5k1.559","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.561","title":"D3: Fix inverted T17.4→T19 dependency (audit logger)","description":"Inverted dependency: diagram shows T17.4→T19 implying audit logger cannot start until full engine is done. Actually T19 (audit logger) depends on T2, T5 only — it is a PREREQUISITE of the engine, not dependent on it. Most impactful error: following it literally delays T19 by the entire engine implementation timeline. File: docs/plans/2026-02-06-full-abac-implementation.md. Fix: Remove T17.4→T19 edge.","acceptance_criteria":"T19 edges in diagram match task file (T2, T5 only). T17.4→T19 edge removed. Critical path recalculated without artificial T19 delay.","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:04:36Z","created_by":"seanb4t","updated_at":"2026-02-11T00:35:58Z","closed_at":"2026-02-11T00:35:58Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.561","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.561","depends_on_id":"holomush-5k1.560","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.562","title":"D4: Add missing T6→T12 cross-phase gate","description":"Task 12 depends on T6 per task file, but no T6→T12 edge exists in dependency diagram or cross-phase gate table. This is a Phase 7.1→7.2 gate that must be tracked. File: docs/plans/2026-02-06-full-abac-implementation.md. Fix: Add T6→T12 to diagram and gate table with rationale.","acceptance_criteria":"T6→T12 edge appears in dependency diagram and cross-phase gate table with clear rationale.","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:04:38Z","created_by":"seanb4t","updated_at":"2026-02-11T01:13:27Z","closed_at":"2026-02-11T01:13:27Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.562","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.562","depends_on_id":"holomush-5k1.561","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.563","title":"S1: Add policy reload bypass criterion to T31","description":"Spec S5 (holomush-5k1.346): Out-of-band cache reload MUST bypass ABAC, restricted to local/system callers. No task currently covers this — plan defers full command suite to Epic 8. Decision: Add acceptance criterion to T31 (admin commands) for minimal policy reload bypass mechanism. File: docs/plans/2026-02-06-full-abac-phase-7.4.md (T31). Decision must be documented in design decisions.","acceptance_criteria":"T31 has explicit acceptance criterion for policy reload command that bypasses ABAC, restricted to local/system callers, with test for stale cache recovery.","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:04:42Z","created_by":"seanb4t","updated_at":"2026-02-11T00:24:10Z","closed_at":"2026-02-11T00:24:10Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.563","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.564","title":"S2: Add S4 lock re-verification reference to T25b","description":"Spec S4 (holomush-5k1.344): Lock ownership re-verification per operation not referenced in any plan task. Fix: Add S4 references to deferred T25b acceptance criteria for traceability. File: docs/plans/2026-02-06-full-abac-phase-7.5.md (T25b).","acceptance_criteria":"T25b acceptance criteria explicitly cite S4 lock ownership re-verification requirement.","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:04:44Z","created_by":"seanb4t","updated_at":"2026-02-11T00:24:10Z","closed_at":"2026-02-11T00:24:10Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.564","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.565","title":"S3: Add S7 WAL fallback reference to T19","description":"Spec S7: WAL fallback elevated from SHOULD to MUST. Implemented in T19 but security requirement ID not cited for traceability. Fix: Add (S7) reference to T19 acceptance criteria. File: docs/plans/2026-02-06-full-abac-phase-7.7.md (T19).","acceptance_criteria":"T19 acceptance criteria include explicit (S7) traceability reference for WAL fallback requirement.","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:04:46Z","created_by":"seanb4t","updated_at":"2026-02-11T00:24:10Z","closed_at":"2026-02-11T00:24:10Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.565","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.566","title":"P1: Add glob colon separator to T11 guidance","description":"glob.Compile(pattern, ':') colon separator is critical for namespace isolation but not mentioned in T11 implementation guidance. Omitting it breaks namespace isolation — patterns could match across namespaces. File: docs/plans/2026-02-06-full-abac-phase-7.2.md (T11). Fix: Add explicit note: MUST use glob.Compile(pattern, ':') separator.","acceptance_criteria":"T11 implementation guidance includes explicit glob.Compile colon separator requirement with rationale about namespace isolation.","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:04:49Z","created_by":"seanb4t","updated_at":"2026-02-11T00:24:10Z","closed_at":"2026-02-11T00:24:10Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.566","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.567","title":"A1: Standardize ADR 98-102 H1 title format","description":"ADRs 98-102 use 3 different H1 title formats (# ADR 98:, # ADR 099:, # Decision #100:) instead of established # N. Title convention — despite ADR #79 existing to standardize this. Files: docs/specs/decisions/epic7/ ADRs 98-102. Fix: Rename H1 titles to match # N. Title pattern per ADR #79.","acceptance_criteria":"All ADR H1 titles in 98-102 follow the # N. Title convention established by ADR #79. No mixed formats.","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:04:53Z","created_by":"seanb4t","updated_at":"2026-02-11T00:24:10Z","closed_at":"2026-02-11T00:24:10Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.567","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.568","title":"D5: Fix simplified critical path T7→T8 edge","description":"Simplified critical path diagram shows T7→T8 but T8 does not depend on T7 — overstates M1 gating. File: docs/plans/2026-02-06-full-abac-implementation.md (simplified diagram). Fix: Show T5 as fork point instead of T7.","acceptance_criteria":"Simplified critical path diagram does not show T7→T8. T5 shown as correct fork point.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:04:58Z","created_by":"seanb4t","updated_at":"2026-02-11T01:13:38Z","closed_at":"2026-02-11T01:13:38Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.568","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.568","depends_on_id":"holomush-5k1.562","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.569","title":"D6: Fix simplified critical path T7→T13 edge","description":"Simplified critical path diagram shows T7→T13 but T13 does not depend on T7. Same root issue as D5. File: docs/plans/2026-02-06-full-abac-implementation.md (simplified diagram). Fix: Remove T7→T13 from simplified diagram.","acceptance_criteria":"Simplified critical path diagram does not show T7→T13.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:05:00Z","created_by":"seanb4t","updated_at":"2026-02-11T01:13:48Z","closed_at":"2026-02-11T01:13:48Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.569","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.569","depends_on_id":"holomush-5k1.568","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.57","title":"Add CreatedAt/UpdatedAt fields to StoredPolicy struct","description":"## Review Finding: I7 — StoredPolicy struct missing timestamp fields\n\n**Source:** PR #69 review\n**Plan location:** Task 6, lines 661-674\n**Spec location:** Lines 1978-1993\n\n### Problem\nThe access_policies table includes created_at and updated_at columns, but the StoredPolicy struct in Task 6 omits CreatedAt and UpdatedAt fields. These are needed for policy show and policy list admin command display.\n\n### Acceptance Criteria\n- [ ] CreatedAt time.Time field added to StoredPolicy\n- [ ] UpdatedAt time.Time field added to StoredPolicy\n- [ ] Repository scans populate these fields from DB\n- [ ] policy show and policy list commands display timestamps","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T16:29:27Z","created_by":"seanb4t","updated_at":"2026-02-07T17:03:55Z","closed_at":"2026-02-07T17:03:55Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.57","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.570","title":"D7: Add T6 to Task 13 dependency list","description":"T6→T13 appears in diagram and gate table but NOT in Task 13's dependency list in the phase plan. File: docs/plans/2026-02-06-full-abac-phase-7.3.md (T13 deps). Fix: Add T6 to Task 13 deps.","acceptance_criteria":"Task 13 dependency list includes T6, matching diagram and gate table.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:05:03Z","created_by":"seanb4t","updated_at":"2026-02-11T00:29:53Z","closed_at":"2026-02-11T00:29:53Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.570","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.571","title":"D8: Add T0 to Task 8 dependency list","description":"T0→T8 appears in diagram and gate table but NOT in Task 8's dependency list in the phase plan. File: docs/plans/2026-02-06-full-abac-phase-7.1.md (T8 deps). Fix: Add T0 to Task 8 deps.","acceptance_criteria":"Task 8 dependency list includes T0, matching diagram and gate table.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:05:04Z","created_by":"seanb4t","updated_at":"2026-02-11T00:29:53Z","closed_at":"2026-02-11T00:29:53Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.571","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.572","title":"D9: Add T5→T11 and T11→T17.3 to diagram and gate table","description":"Cross-phase gates T5→T11 and T11→T17.3 exist in task files but are absent from the dependency diagram and gate table. File: docs/plans/2026-02-06-full-abac-implementation.md. Fix: Add both edges to diagram and gate table.","acceptance_criteria":"T5→T11 and T11→T17.3 appear in dependency diagram and cross-phase gate table with rationale.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:05:07Z","created_by":"seanb4t","updated_at":"2026-02-11T01:13:58Z","closed_at":"2026-02-11T01:13:58Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.572","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.572","depends_on_id":"holomush-5k1.562","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.573","title":"D10: Remove duplicate T5→T13 edge in diagram","description":"T5→T13 edge appears twice: line 201 inside Phase 7.1 subgraph and line 301 in cross-phase section. File: docs/plans/2026-02-06-full-abac-implementation.md. Fix: Remove the line 201 duplicate.","acceptance_criteria":"T5→T13 appears exactly once in the dependency diagram (in cross-phase section only).","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:05:09Z","created_by":"seanb4t","updated_at":"2026-02-11T01:14:09Z","closed_at":"2026-02-11T01:14:09Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.573","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.573","depends_on_id":"holomush-5k1.562","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.574","title":"P2: Add LRU rate limiter capacity to acceptance criteria","description":"LRU rate limiter capacity (256 entries) specified in spec but not in any task acceptance criteria. File: docs/plans/2026-02-06-full-abac-phase-7.3.md (T14 or T17). Fix: Add 256-entry capacity as acceptance criterion.","acceptance_criteria":"T14 or T17 acceptance criteria specify LRU rate limiter capacity of 256 entries.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:05:12Z","created_by":"seanb4t","updated_at":"2026-02-11T00:29:53Z","closed_at":"2026-02-11T00:29:53Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.574","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.575","title":"P3: Move glob rejection to compiler task (T12)","description":"Glob bracket/brace/globstar rejection ([, {, **) assigned to evaluator task but should be in the compiler — rejection at compile time is cheaper and catches errors earlier. File: docs/plans/2026-02-06-full-abac-phase-7.2.md (T12). Fix: Add explicit criterion to T12 for rejecting invalid glob syntax.","acceptance_criteria":"T12 acceptance criteria include explicit rejection of [, {, ** glob patterns at compile time.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:05:15Z","created_by":"seanb4t","updated_at":"2026-02-11T00:29:53Z","closed_at":"2026-02-11T00:29:53Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.575","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.575","depends_on_id":"holomush-5k1.566","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.576","title":"P4: Add grammar_version field to T12 CompiledPolicy","description":"grammar_version field not in Phase 7.2 CompiledPolicy. Phase 7.5 (deferred) depends on it for versioned grammar evolution. Decision: Add now in T12 — cheap to include, avoids schema migration later. File: docs/plans/2026-02-06-full-abac-phase-7.2.md (T12). Decision must be documented in design decisions.","acceptance_criteria":"T12 acceptance criteria include grammar_version field in CompiledPolicy struct. Design decision documented.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:05:18Z","created_by":"seanb4t","updated_at":"2026-02-11T00:29:53Z","closed_at":"2026-02-11T00:29:53Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.576","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.576","depends_on_id":"holomush-5k1.566","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.577","title":"P5: Add provider timeout fair-share formula to criteria","description":"Provider timeout fair-share formula specified in spec but not in any task acceptance criteria. File: docs/plans/2026-02-06-full-abac-phase-7.3.md (T14 or T34). Fix: Add fair-share formula as acceptance criterion.","acceptance_criteria":"T14 or T34 acceptance criteria specify the provider timeout fair-share formula.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:05:21Z","created_by":"seanb4t","updated_at":"2026-02-11T00:29:53Z","closed_at":"2026-02-11T00:29:53Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.577","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.578","title":"P6: Add entity deletion integration test criterion","description":"Spec requires real DB integration tests for entity deletion, but plan only specifies unit tests. File: docs/plans/2026-02-06-full-abac-phase-7.4.md (T30 or T35). Fix: Add integration test criterion.","acceptance_criteria":"T30 or T35 includes acceptance criterion for entity deletion integration tests with real database.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:05:26Z","created_by":"seanb4t","updated_at":"2026-02-11T00:29:53Z","closed_at":"2026-02-11T00:29:53Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.578","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.579","title":"P7: Standardize metric name prefix (abac_)","description":"Metric name mismatch: T18 uses policy_cache_last_update, T20 uses abac_policy_cache_last_update. Inconsistent prefix will cause test failures and dashboard confusion. Files: docs/plans/2026-02-06-full-abac-phase-7.3.md (T18), phase-7.7.md (T20). Fix: Standardize to abac_ prefix in T18.","acceptance_criteria":"All ABAC metric names use consistent abac_ prefix. T18 references abac_policy_cache_last_update.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:05:29Z","created_by":"seanb4t","updated_at":"2026-02-11T00:29:53Z","closed_at":"2026-02-11T00:29:53Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.579","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.58","title":"Update task count from 31 to 36 in PR description and references","description":"## Review Finding: I8 — Task count mismatch (31 vs 36)\n\n**Source:** PR #69 review\n**Plan location:** PR description and external references\n\n### Problem\nPR description references \"31 tasks\" but the plan contains Tasks 1-36. Tasks 32-36 were added after the original 31-task scope.\n\n### Acceptance Criteria\n- [ ] PR description updated to reference 36 tasks\n- [ ] Any beads or external documentation updated to reflect 36-task scope","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T16:29:35Z","created_by":"seanb4t","updated_at":"2026-02-07T17:04:05Z","closed_at":"2026-02-07T17:04:05Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.58","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.580","title":"P8: Add S3 denials-in-all-modes as discrete criterion","description":"Spec S3 (denials logged in ALL modes including permissive) not broken out as discrete acceptance criterion in T19. File: docs/plans/2026-02-06-full-abac-phase-7.7.md (T19). Fix: Add explicit S3 criterion.","acceptance_criteria":"T19 has discrete acceptance criterion: denials MUST be logged in all modes including permissive, citing S3.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:05:32Z","created_by":"seanb4t","updated_at":"2026-02-11T00:29:53Z","closed_at":"2026-02-11T00:29:53Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.580","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.580","depends_on_id":"holomush-5k1.565","type":"blocks","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.581","title":"P9: Add policy seed status/verify to deferred features","description":"policy seed status/verify is MUST-level but deferred without explicit acknowledgment in the deferred features table. File: docs/plans/2026-02-06-full-abac-implementation.md (deferred features table). Fix: Add entry to deferred features table.","acceptance_criteria":"Deferred features table includes policy seed status/verify with MUST-level notation and deferral rationale.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:05:35Z","created_by":"seanb4t","updated_at":"2026-02-11T01:14:19Z","closed_at":"2026-02-11T01:14:19Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.581","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:28Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.581","depends_on_id":"holomush-5k1.562","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.582","title":"Q1: Add cache-thrashing benchmark to T21","description":"Performance benchmarks test 200 concurrent users but not high-cardinality cache pressure. Missing cache-thrashing scenario could miss performance cliffs. File: docs/plans/2026-02-06-full-abac-phase-7.7.md (T21). Fix: Add cache-thrashing benchmark scenario.","acceptance_criteria":"T21 includes benchmark scenario for high-cardinality cache pressure (cache thrashing).","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:05:38Z","created_by":"seanb4t","updated_at":"2026-02-11T01:14:29Z","closed_at":"2026-02-11T01:14:29Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.582","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.582","depends_on_id":"holomush-5k1.583","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.583","title":"Q2: Specify degraded mode clearing mechanism","description":"Degraded mode clearing mechanism described as 'provide a temporary mechanism' with no concrete choice in plan. The spec already defines policy clear-degraded-mode command (specs/abac/04-resolution-evaluation.md). File: docs/plans/2026-02-06-full-abac-phase-7.7.md. Fix: Reference the spec's clear-degraded-mode command explicitly in the plan.","acceptance_criteria":"Plan references spec's policy clear-degraded-mode command as the concrete clearing mechanism.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:05:41Z","created_by":"seanb4t","updated_at":"2026-02-11T00:35:58Z","closed_at":"2026-02-11T00:35:58Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.583","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.584","title":"Q3: Elevate T16b to mandatory Phase 7.3 milestone gate","description":"T16b (PropertyProvider) scheduling risk identified but only documented as recommendation. T16b blocks T23 (Bootstrap) and all of Phase 7.4. Decision: Elevate to mandatory Phase 7.3 milestone gate — Phase 7.4 cannot begin until T16b completes. File: docs/plans/2026-02-06-full-abac-implementation.md (gate table). Decision must be documented in design decisions.","acceptance_criteria":"T16b listed as mandatory Phase 7.3 milestone gate in gate table. Phase 7.4 start explicitly gated on T16b completion.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:05:45Z","created_by":"seanb4t","updated_at":"2026-02-11T01:14:39Z","closed_at":"2026-02-11T01:14:39Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.584","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.584","depends_on_id":"holomush-5k1.562","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.585","title":"A2: Fix ADR #56/#86 title inconsistency","description":"ADRs #56 and #86: README index says 'Minimal' but filenames/titles still say 'Off'. 3-way inconsistency from Decision #104 rename. Files: docs/specs/decisions/epic7/ (ADRs 56, 86, and README index). Fix: Update file titles to match index or vice versa.","acceptance_criteria":"ADR #56 and #86 titles match README index entry. No 3-way inconsistency.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:05:48Z","created_by":"seanb4t","updated_at":"2026-02-11T00:35:58Z","closed_at":"2026-02-11T00:35:58Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.585","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.586","title":"A3: Add Decision marker to ADR #14","description":"ADR #14 has no **Decision:** marker — invisible to format audits. File: docs/specs/decisions/epic7/ (ADR 14). Fix: Add minimal Decision: structure.","acceptance_criteria":"ADR #14 includes a **Decision:** marker visible to automated format audits.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:05:51Z","created_by":"seanb4t","updated_at":"2026-02-11T00:35:58Z","closed_at":"2026-02-11T00:35:58Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.586","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.587","title":"A4: Fix ADR #57 range claim (001-102 → 001-106)","description":"ADR #57 claims range '001-102' but actual range is 001-106. File: docs/specs/decisions/epic7/ (ADR 57). Fix: Update range to 001-106.","acceptance_criteria":"ADR #57 range claim matches actual ADR range (001-106).","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:05:53Z","created_by":"seanb4t","updated_at":"2026-02-11T00:35:58Z","closed_at":"2026-02-11T00:35:58Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.587","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.588","title":"M1: Add Back to Index links to ADRs 98-102","description":"5 ADRs (98-102) missing [Back to Decision Index] navigation link present in all other ADRs. Files: docs/specs/decisions/epic7/ ADRs 98-102. Fix: Add navigation link to each.","acceptance_criteria":"ADRs 98-102 each include [Back to Decision Index] navigation link.","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:05:58Z","created_by":"seanb4t","updated_at":"2026-02-11T00:35:58Z","closed_at":"2026-02-11T00:35:58Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.588","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.588","depends_on_id":"holomush-5k1.567","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.589","title":"M2: Document ADR 98-102 format shift","description":"ADRs 98-102 use formal ADR structure without explaining the format shift from the simpler format used in earlier ADRs. Files: docs/specs/decisions/epic7/ ADRs 98-102 or README. Fix: Add brief note explaining format evolution.","acceptance_criteria":"Format shift from simple to formal ADR structure is documented (in README or ADR 98+ headers).","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:06:01Z","created_by":"seanb4t","updated_at":"2026-02-11T00:35:58Z","closed_at":"2026-02-11T00:35:58Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.589","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.589","depends_on_id":"holomush-5k1.567","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.59","title":"Add task for audit log partition management goroutine","description":"## Review Finding: S1 — Missing partition management goroutine task\n\n**Source:** PR #69 review\n**Spec location:** Lines 2303-2318\n\n### Problem\nThe spec requires a background goroutine for audit log partition management:\n- Create future partitions (ensure 2 months ahead)\n- Drop expired partitions (DETACH + DROP for aged-out months)\n- Health check integration\n\nTask 18 (audit logger) covers writing entries but no task covers partition lifecycle management.\n\n### Acceptance Criteria\n- [ ] New task added or Task 18 expanded to include partition management goroutine\n- [ ] Acceptance criteria cover: create-ahead, drop-expired, health check\n- [ ] Configurable retention period specified","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T16:30:18Z","created_by":"seanb4t","updated_at":"2026-02-07T17:06:48Z","closed_at":"2026-02-07T17:06:48Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.59","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.590","title":"M3: Fix ADR #95 Status marker placement","description":"ADR #95 places **Status:** Accepted after body text instead of in header area. File: docs/specs/decisions/epic7/ ADR 95. Fix: Move Status to header position.","acceptance_criteria":"ADR #95 Status: Accepted appears in header area, not after body text.","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:06:03Z","created_by":"seanb4t","updated_at":"2026-02-11T00:35:58Z","closed_at":"2026-02-11T00:35:58Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.590","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.591","title":"M4: Consider SHA-pinning actions/cache@v4","description":"actions/cache@v4 uses mutable tags. Consistent with existing CI pattern but SHA-pinning would improve supply chain security. Files: CI workflow files (.github/workflows/). Fix: Consider SHA-pinning in follow-up.","acceptance_criteria":"CI workflow actions/cache usage evaluated for SHA-pinning. Either pinned or documented rationale for keeping mutable tags.","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:06:06Z","created_by":"seanb4t","updated_at":"2026-02-11T00:35:58Z","closed_at":"2026-02-11T00:35:58Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.591","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.592","title":"M5: Verify dprint version v prefix in CI","description":"dprint version 0.51.1 may be missing v prefix — download URL format may require it. Files: CI config (Taskfile or workflow). Fix: Verify download URL format and add v prefix if needed.","acceptance_criteria":"dprint version reference uses correct format for download URL (with or without v prefix verified).","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:06:09Z","created_by":"seanb4t","updated_at":"2026-02-11T00:35:58Z","closed_at":"2026-02-11T00:35:58Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.592","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.593","title":"M6: Reconcile internal/access/abac/ in Quick Start","description":"Quick Start section references internal/access/abac/ directory but no task creates files there. Either tasks should reference it or Quick Start should be updated. File: docs/plans/2026-02-06-full-abac-implementation.md (Quick Start section).","acceptance_criteria":"Quick Start directory references match actual task file creation targets.","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:06:12Z","created_by":"seanb4t","updated_at":"2026-02-11T01:14:50Z","closed_at":"2026-02-11T01:14:50Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.593","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.594","title":"M7: Address hardcoded seed policy count 18","description":"Seed policy count '18' hardcoded in many plan locations. T22b will likely change this count. File: multiple plan files. Fix: Add note that count will be updated after T22b gap analysis.","acceptance_criteria":"Hardcoded 18 count annotated with note about T22b dependency, or parameterized.","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:06:14Z","created_by":"seanb4t","updated_at":"2026-02-11T01:15:00Z","closed_at":"2026-02-11T01:15:00Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.594","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.595","title":"M8: Track CI configuration changes in a task","description":"CI configuration changes (dprint, linting additions) not tracked by any task in the plan. File: docs/plans/2026-02-06-full-abac-implementation.md. Fix: Add CI config changes to an existing task or create a chore task.","acceptance_criteria":"CI configuration changes for ABAC are tracked in a plan task.","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:06:17Z","created_by":"seanb4t","updated_at":"2026-02-11T01:15:10Z","closed_at":"2026-02-11T01:15:10Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.595","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.596","title":"M9: Resolve list_characters policy as dedicated policy","description":"T22b gap G3 leaves list_characters action as OR choice between expanding existing policy or creating dedicated one. Decision: Create dedicated seed:player-location-list-characters policy (least-privilege principle). File: docs/plans/2026-02-06-full-abac-phase-7.4.md (T22b). Decision must be documented in design decisions.","acceptance_criteria":"T22b G3 resolved: dedicated seed:player-location-list-characters policy specified. Design decision documented.","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:06:20Z","created_by":"seanb4t","updated_at":"2026-02-11T01:15:21Z","closed_at":"2026-02-11T01:15:21Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.596","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.596","depends_on_id":"holomush-5k1.563","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.597","title":"M10: Add deferred annotation to Phase 7.4 footer","description":"Phase 7.4 footer missing '(Deferred to Epic 8)' annotation on Phase 7.5 navigation link. File: docs/plans/2026-02-06-full-abac-phase-7.4.md (footer nav). Fix: Add deferred annotation.","acceptance_criteria":"Phase 7.4 footer Phase 7.5 link includes '(Deferred to Epic 8)' annotation.","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:06:23Z","created_by":"seanb4t","updated_at":"2026-02-11T01:15:31Z","closed_at":"2026-02-11T01:15:31Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.597","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.597","depends_on_id":"holomush-5k1.563","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.598","title":"M11: Fix gate table T23→T28 path via T23b","description":"Gate table shows T23→T28 as direct dependency but actual path is T23→T23b→T28. File: docs/plans/2026-02-06-full-abac-implementation.md (gate table). Fix: Update to show intermediate T23b step.","acceptance_criteria":"Gate table shows T23→T23b→T28 path, not direct T23→T28.","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:06:25Z","created_by":"seanb4t","updated_at":"2026-02-11T01:15:41Z","closed_at":"2026-02-11T01:15:41Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.598","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.598","depends_on_id":"holomush-5k1.562","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.599","title":"M12: Document reverse index replacement with grep","description":"Spec SHOULD-level reverse index for policy scanning replaced with grep in implementation, but deviation is undocumented. File: docs/plans/2026-02-06-full-abac-implementation.md or relevant phase plan. Fix: Document the deviation and rationale.","acceptance_criteria":"Deviation from spec SHOULD (reverse index → grep) documented with rationale.","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T00:06:28Z","created_by":"seanb4t","updated_at":"2026-02-11T01:15:52Z","closed_at":"2026-02-11T01:15:52Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.599","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.6","title":"[E7] Phase 7.4: Seed Policies \u0026 Bootstrap","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.4.md`.\n\n\u003c!-- SPDX-License-Identifier: Apache-2.0 --\u003e\n\u003c!-- Copyright 2026 HoloMUSH Contributors --\u003e\n\n# Phase 7.4: Seed Policies \u0026 Bootstrap\n\n\u003e **[Back to Overview](./2026-02-06-full-abac-implementation.md)** | **[Previous: Phase 7.3](./2026-02-06-full-abac-phase-7.3.md)** | **[Next: Phase 7.5 (Deferred to Epic 8)](./2026-02-06-full-abac-phase-7.5.md)**\n\u003e\n\u003e **Prerequisites:** Tasks 12, 21a, 16a, 16b, and 18 must complete before Phase 7.4 tasks begin (T12→T22/T23, T21a→T22, T16a→T23, T16b→T23, and T18→T23 dependencies). T16a provides StreamProvider and CommandProvider, which are referenced by seed policies `seed:player-stream-emit` and `seed:player-basic-commands`. T16b provides PropertyProvider, which enables `property.*` attribute resolution for seed policies `seed:property-public-read`, `seed:property-private-read`, `seed:property-admin-read`, `seed:property-owner-write`, `seed:property-restricted-visible-to`, and `seed:property-restricted-excluded`.\n\nTask Inventory:\n- T22: Define seed policy constants\n- T22b: Resolve seed policy coverage gaps\n- T23: Bootstrap sequence\n- T23b: Seed policy integration test suite (CLI validation + smoke test gate)\n\nThis epic tracks phase-scoped execution of the ABAC implementation plan. Child tasks preserve plan-level dependencies and carry explicit TDD and independent-review gates.","acceptance_criteria":"- [ ] All planned Phase 7.4 tasks are represented as child beads under this epic.\n- [ ] Each child task is executed with the plan's mandatory TDD protocol (fail test first, then pass with `task test`; SQL migration exception applies with required integration coverage).\n- [ ] Each child task receives a passing independent reviewer-agent review confirming acceptance criteria, spec alignment, design/ADR alignment, and resolution of findings.\n- [ ] Inter-task and cross-phase dependencies are linked in beads and respected before this epic is closed.\n- [ ] M4 gate achieved at T23 (bootstrap inserts seed policies successfully).","status":"closed","priority":1,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:32:47Z","created_by":"seanb4t","updated_at":"2026-02-13T22:07:27Z","closed_at":"2026-02-13T22:07:27Z","close_reason":"All Phase 7.4 tasks complete: T22 (seed constants), T22b (coverage gaps), T23 (bootstrap), T23b (CLI validation + 22 smoke tests). Discovered and fixed qualified attribute path issue in all seed policies.","dependencies":[{"issue_id":"holomush-5k1.6","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.6","depends_on_id":"holomush-5k1.3","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.6","depends_on_id":"holomush-5k1.4","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.6","depends_on_id":"holomush-5k1.5","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.6","depends_on_id":"holomush-5k1.6.1","type":"blocks","created_at":"2026-02-13T14:55:26Z","created_by":"seanb4t","metadata":"{}"},{"issue_id":"holomush-5k1.6","depends_on_id":"holomush-5k1.6.2","type":"blocks","created_at":"2026-02-13T14:55:27Z","created_by":"seanb4t","metadata":"{}"},{"issue_id":"holomush-5k1.6","depends_on_id":"holomush-5k1.6.3","type":"blocks","created_at":"2026-02-13T14:55:27Z","created_by":"seanb4t","metadata":"{}"},{"issue_id":"holomush-5k1.6","depends_on_id":"holomush-5k1.6.4","type":"blocks","created_at":"2026-02-13T14:55:28Z","created_by":"seanb4t","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.6.1","title":"[ABAC Plan 7.4] T22: Define seed policy constants","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.4.md` task section at line 10.\n\n**Spec References:** [07-migration-seeds.md#seed-policies](../specs/abac/07-migration-seeds.md#seed-policies)\n\n**Acceptance Criteria:**\n\n- [ ] All 18 seed policies defined as `SeedPolicy` structs (17 permit, 1 forbid) — Note: Count may change after T22b gap analysis\n- [ ] All seed policies compile without error via `PolicyCompiler`\n- [ ] Each seed policy name starts with `seed:`\n- [ ] Each seed policy has `SeedVersion: 1` field for upgrade tracking\n- [ ] No duplicate seed names\n- [ ] DSL text matches spec exactly [07-migration-seeds.md#seed-policies](../specs/abac/07-migration-seeds.md#seed-policies)\n- [ ] Default deny behavior provided by EffectDefaultDeny (no matching policy = denied), not an explicit forbid policy\n- [ ] Seed policy coverage validated against all 28 production call sites (see [Appendix A](#appendix-a-seed-policy-coverage-matrix))\n- [ ] All tests pass via `task test`\n\n**Dependencies:**\n\n- Task 12 (Phase 7.2) — DSL compiler needed; acceptance criteria requires seed policies to compile without error via `PolicyCompiler`\n- Task 21a (Phase 7.3) — seed policies reference bare command names (e.g., `\"say\"`, `\"dig\"`) which require @-prefix removal first\n\n**Files:**\n\n- Create: `internal/access/policy/seed.go`\n- Test: `internal/access/policy/seed_test.go`\n\n**Step 1: Write failing tests**\n\n- All 18 seed policies compile without error via `PolicyCompiler` (17 permit, 1 forbid) — Note: Count may change after T22b gap analysis\n- Each seed policy name starts with `seed:`\n- Each seed policy source is `\"seed\"`\n- No duplicate seed names\n- DSL text matches spec exactly [07-migration-seeds.md#seed-policies](../specs/abac/07-migration-seeds.md#seed-policies)\n\n**Step 2: Implement**\n\n[Code snippet omitted; see source plan section for full example.]\n\n(Note: 18 seed policies listed above (count may change after T22b gap analysis): 17 permit policies for standard access patterns, plus 1 forbid policy (seed:property-restricted-excluded for restricted property exclusion). System properties are protected by default-deny instead of an explicit forbid (see ADR 087 - under deny-overrides conflict resolution, a forbid would block seed:admin-full-access, locking admins out permanently).)\n\n**Step 3: Run tests, commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Sonnet 4.5\n**Complexity:** Moderate — defining 18 seed policies as SeedPolicy structs with DSL strings\n**Scope:** 1-2 files, struct definitions matching spec's seed policy table\n**Criticality:** High — seed policies are the default authorization rules\n**Reasoning:** Seed policies are fully specified in 07-migration-seeds.md. Translation from spec to Go structs with DSL strings is well-defined. Must ensure all 18 compile via PolicyCompiler. Sonnet handles spec-to-code translation reliably.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:48Z","created_by":"seanb4t","updated_at":"2026-02-13T20:14:48Z","closed_at":"2026-02-13T20:14:48Z","close_reason":"18 seed policies defined, all compile, tests pass","labels":["abac","phase-7-4","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.6.1","depends_on_id":"holomush-5k1.4.5","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.6.1","depends_on_id":"holomush-5k1.5.16","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.6.1","depends_on_id":"holomush-5k1.6","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.6.2","title":"[ABAC Plan 7.4] T22b: Resolve seed policy coverage gaps","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.4.md` task section at line 187.\n\n\u003e **Note:** Elevated from a T22 acceptance criterion to a dedicated task per [Decision #94](../specs/decisions/epic7/phase-7.4/094-elevate-seed-policy-gap-resolution.md). With direct replacement (no adapter/shadow mode), unresolved gaps cause immediate functional regressions at T28 migration.\n\n**Spec References:** [07-migration-seeds.md#seed-policies](../specs/abac/07-migration-seeds.md#seed-policies), [Appendix A](#appendix-a-seed-policy-coverage-matrix)\n\n**Acceptance Criteria:**\n\n- [ ] **G1 resolved:** `seed:player-exit-read` policy added — players can read exits in their current location (covers call site #10 GetExit)\n- [ ] **G2 resolved:** `seed:builder-exit-write` policy added — builders can create/update/delete exits (covers call sites #11-#13 CreateExit, UpdateExit, DeleteExit)\n- [ ] **G3 resolved:** Dedicated `seed:player-location-list-characters` policy added (covers call site #22 GetCharactersByLocation, per ADR #109)\n- [ ] **G4 resolved:** Scene access policies added — `seed:player-scene-participant` (read+write own scenes) and/or `seed:player-scene-read` (read scenes in current location) (covers call sites #25-#27)\n- [ ] **G5 documented:** Plugin command gap documented as intentional — plugins MUST define their own ABAC policies at install time; default-deny is correct baseline\n- [ ] **G6 documented:** MoveObject gap evaluated against game design requirements — either `seed:player-object-move` policy added or documented as intentional builder-only behavior\n- [ ] Seed policy count updated in T22 and T23 to reflect additions\n- [ ] Updated seed policies compile without error via `PolicyCompiler`\n- [ ] Coverage matrix in Appendix A updated to reflect resolved gaps\n- [ ] All tests pass via `task test`\n\n**Dependencies:**\n\n- Task 22 (Phase 7.4) — gap resolution requires the base seed policies to exist first\n\n**Files:**\n\n- Modify: `internal/access/policy/seed.go` (add new seed policies for G1-G4, optionally G6)\n- Modify: `internal/access/policy/seed_test.go` (test new seed policies)\n\n**Step 1: Write failing tests**\n\n- New seed policies (G1-G4) compile without error via `PolicyCompiler`\n- Each new seed policy name starts with `seed:`\n- Each new seed policy has `SeedVersion: 1`\n- No duplicate seed names after additions\n- Coverage matrix has no Medium/High severity gaps remaining\n\n**Step 2: Implement**\n\nAdd missing seed policies based on Appendix A gap analysis recommendations:\n\n1. **G1+G2 (Exits):** Add `seed:player-exit-read` and `seed:builder-exit-write`\n2. **G3 (list\\_characters):** Expand `seed:player-location-read` to include `list_characters` action, or add a dedicated policy\n3. **G4 (Scenes):** Add `seed:player-scene-participant` and `seed:player-scene-read`\n4. **G5 (Plugin commands):** Document in plugin developer guide — no seed policy change\n5. **G6 (MoveObject):** Evaluate and either add `seed:player-object-move` or document as intentional\n\n**Step 3: Update Appendix A coverage matrix, run tests, commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Opus 4.6\n**Complexity:** High — gap analysis between existing StaticAccessControl permissions and seed policies\n**Scope:** Cross-system analysis spanning internal/access/, seed policies, and ~28 call sites\n**Criticality:** Critical — unresolved gaps cause immediate functional regressions at migration\n**Reasoning:** Requires deep understanding of both the old permission system and new ABAC seed policies. Must identify every permission currently granted by StaticAccessControl that lacks a corresponding seed policy. Missing coverage = broken functionality after migration. Security-critical analysis requiring Opus's reasoning depth.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:48Z","created_by":"seanb4t","updated_at":"2026-02-13T20:24:57Z","closed_at":"2026-02-13T20:24:57Z","close_reason":"5 gap-fill policies added (G1-G4), G5/G6 documented as intentional","labels":["abac","phase-7-4","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.6.2","depends_on_id":"holomush-5k1.6","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.6.2","depends_on_id":"holomush-5k1.6.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.6.3","title":"[ABAC Plan 7.4] T23: Bootstrap sequence","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.4.md` task section at line 242.\n\n**Spec References:** [07-migration-seeds.md#bootstrap-sequence](../specs/abac/07-migration-seeds.md#bootstrap-sequence), [07-migration-seeds.md#seed-policy-migrations](../specs/abac/07-migration-seeds.md#seed-policy-migrations)\n\n**ADR References:** [091-bootstrap-creates-initial-partitions.md](../specs/decisions/epic7/phase-7.4/091-bootstrap-creates-initial-partitions.md)\n\n**Acceptance Criteria:**\n\n- [ ] Creates initial `access_audit_log` partitions before seed policy insertion (per ADR #91)\n- [ ] At least 3 initial monthly partitions created (current month + 2 future months)\n- [ ] Partition naming follows spec convention: `access_audit_log_YYYY_MM`\n- [ ] Partition creation is idempotent (skips partitions that already exist via `IF NOT EXISTS`)\n- [ ] Partition creation failure is fatal (bootstrap aborts with clear error)\n- [ ] Uses `access.WithSystemSubject(context.Background())` to bypass ABAC for seed operations\n- [ ] Per-seed name-based idempotency check via `policyStore.Get(ctx, seed.Name)`\n- [ ] Skips seed if policy exists with same name and `source=\"seed\"` (already seeded)\n- [ ] Logs warning and skips if policy exists with same name but `source!=\"seed\"` (admin collision)\n- [ ] New seeds inserted with `source=\"seed\"`, `seed_version=1`, `created_by=\"system\"`\n- [ ] Seed version upgrade: if shipped `seed_version \u003e stored.seed_version`, update `dsl_text`, `compiled_ast`, and `seed_version`\n- [ ] Upgrade populates `change_note` with `\"Auto-upgraded from seed v{N} to v{N+1} on server upgrade\"`\n- [ ] Respects `--skip-seed-migrations` flag to disable automatic upgrades\n- [ ] Bootstrap handles `PolicyCompiler` compilation errors gracefully during seed insertion and upgrades\n- [ ] **Seed compilation/install failure is fatal — server exits with error (ADR #92)**\n- [ ] `PolicyStore.UpdateSeed(ctx, name, oldDSL, newDSL, changeNote)` method for migration-delivered seed fixes\n- [ ] `UpdateSeed()` checks if policy exists with `source='seed'`; fails if not\n- [ ] `UpdateSeed()` skips if stored DSL matches new DSL (idempotent)\n- [ ] `UpdateSeed()` skips with warning if stored DSL differs from old DSL (customized by admins)\n- [ ] `UpdateSeed()` updates DSL, compiled AST, logs info, invalidates cache if uncustomized\n- [ ] Policy store's `IsNotFound(err)` helper: either confirmed as pre-existing or added to Task 7 ([Phase 7.1](./2026-02-06-full-abac-phase-7.1.md)) (policy store) acceptance criteria\n- [ ] All tests pass via `task test`\n- [ ] After bootstrap completes, `SELECT COUNT(*) FROM access_policies WHERE source='seed'` returns expected seed count matching number of defined seeds in Task 22\n- [ ] Spot-check: at least one bootstrap integration test verifies a specific seed policy's `name`, `dsl_text`, and `effect` match expected values\n- [ ] Bootstrap test verifies no duplicate seed policies exist (`SELECT name, COUNT(*) FROM access_policies WHERE source='seed' GROUP BY name HAVING COUNT(*) \u003e 1` returns zero rows)\n- [ ] After bootstrap completes, admin subject can successfully execute policy edit operations via `policyStore.Update()` (verifies `seed:admin-full-access` policy works for policy management; integration test coverage deferred to Task 27a/27b which define policy edit handlers)\n\n**Dependencies:**\n\n- Task 6 (Phase 7.1) — provides prefix constants needed for bootstrap subject/resource validation\n- Task 12 (Phase 7.2) — provides `PolicyCompiler` for seed policy compilation during bootstrap\n- Task 16a (Phase 7.3) — seed policies reference streams and commands\n- Task 16b (Phase 7.3) — seed policies reference property attributes\n- Task 18 (Phase 7.3) — bootstrap requires cache for policy retrieval\n- Task 22b (Phase 7.4) — seed policy coverage gaps resolved before bootstrap\n\n**Files:**\n\n- Create: `internal/access/policy/bootstrap.go`\n- Test: `internal/access/policy/bootstrap_test.go`\n\n**Step 1: Write failing tests**\n\n- Bootstrap creates initial audit log partitions (current month + 2 future months)\n- Partition creation is idempotent (re-running bootstrap does not fail on existing partitions)\n- Partition naming follows convention: `access_audit_log_YYYY_MM`\n- Empty `access_policies` table → all seeds created with `source=\"seed\"`, `seed_version=1`\n- Existing seed policy (same name, `source=\"seed\"`) → skipped (idempotent)\n- Existing non-seed policy (same name, `source!=\"seed\"`) → skipped, warning logged\n- Seed version upgrade (shipped version \u003e stored version) → policy updated with new DSL and incremented version\n- `--skip-seed-migrations` flag → no version upgrades, only new seed insertions\n- Malformed seed DSL during bootstrap → compilation error handled gracefully, bootstrap fails with clear error\n- Partial bootstrap failure → some seeds compile successfully, some don't; bootstrap fails but successful seeds are not committed\n\n**Step 2: Implement**\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Implementation Notes:**\n\n- `createAuditLogPartitions()` runs BEFORE seed policy insertion to ensure audit log writes succeed during bootstrap (ADR #91)\n- Partition creation uses `CREATE TABLE IF NOT EXISTS` for idempotency — safe to re-run on every server startup\n- The same partition naming convention (`access_audit_log_YYYY_MM`) is used by T19b (audit retention/partition management) at runtime\n- `Bootstrap()` now accepts `*pgxpool.Pool` parameter for direct SQL partition creation (seed policies still use `PolicyStore` interface)\n- `SeedPolicies()` must return policies with `SeedVersion` field (default 1)\n- `store.PolicyStore.Get(ctx, name)` retrieves policy by name, returns `IsNotFound` error if absent\n- `access.WithSystemSubject(ctx)` marks context as system-level operation\n- `PolicyStore.Create/Update` checks `access.IsSystemContext(ctx)` and bypasses `Evaluate()` when true\n- Upgrade logic compares shipped `seed.SeedVersion` against stored `existing.SeedVersion`\n- `--skip-seed-migrations` server flag sets `opts.SkipSeedMigrations=true`\n- Legacy policies without `SeedVersion` (nil) will not be upgraded; future enhancement may treat nil as version 0\n- `--force-seed-version=N` flag enables rollback (future enhancement, see [07-migration-seeds.md#bootstrap-sequence](../specs/abac/07-migration-seeds.md#bootstrap-sequence), was spec lines 3121-3129)\n- **Bootstrap failures are fatal (ADR #92):** Any seed policy compilation or\n  installation error causes `Bootstrap()` to return an error, which MUST cause\n  the server to exit with a non-zero code and descriptive error message. No\n  `--skip-seed-install` flag or degraded startup mode is supported. Seed\n  policy failures are configuration errors equivalent to missing database\n  connections or invalid TLS certificates.\n\n**Step 3: Run tests, commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Spec Deviations:**\n\n| What                     | Deviation                                                                                                               | Rationale                                                                                                                                              |\n| ------------------------ | ----------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------ |\n| `UpdateSeed()` signature | `UpdateSeed(ctx, name, oldDSL, newDSL, changeNote)` — 5 params vs spec's 3-param `UpdateSeed(ctx, name, dsl)` signature | `oldDSL` enables CAS (compare-and-swap) semantics for safe concurrent updates; `changeNote` provides audit trail context for migration-delivered fixes |\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Opus 4.6\n**Complexity:** High — server bootstrap sequence orchestrating PolicyStore, SchemaRegistry, providers, cache, engine\n**Scope:** 3-4 files, startup ordering, error handling, partition creation (ADR 091)\n**Criticality:** Very high — incorrect bootstrap = server won't authorize anything\n**Reasoning:** Bootstrap must initialize components in correct dependency order, handle startup failures gracefully, create initial audit partitions, and seed policies. Multi-component orchestration with strict ordering requirements. Opus needed for complex initialization sequence coordination.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:48Z","created_by":"seanb4t","updated_at":"2026-02-13T21:50:01Z","closed_at":"2026-02-13T21:50:01Z","close_reason":"Implementation committed and tests passing. PR review deferred to end of phase.","labels":["abac","phase-7-4","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.6.3","depends_on_id":"holomush-5k1.3.10","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.6.3","depends_on_id":"holomush-5k1.4.5","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.6.3","depends_on_id":"holomush-5k1.5.10","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.6.3","depends_on_id":"holomush-5k1.5.4","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.6.3","depends_on_id":"holomush-5k1.5.5","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.6.3","depends_on_id":"holomush-5k1.6","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.6.3","depends_on_id":"holomush-5k1.6.2","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.6.4","title":"[ABAC Plan 7.4] T23b: Seed policy integration test suite (CLI validation + smoke test gate)","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.4.md` task section at line 485.\n\n\u003e **Note:** This task combines CLI seed validation (moved from an earlier Phase 7.7 validation task) with the smoke test gate. It gates the irreversible migration step (Task 28, [Phase 7.6](./2026-02-06-full-abac-phase-7.6.md)). Positioned between T23 (bootstrap) and T28 (call site migration) to validate seed policy correctness and exercise common auth patterns with the full ABAC engine before replacing all production call sites.\n\n**Spec References:** [07-migration-seeds.md#bootstrap-sequence](../specs/abac/07-migration-seeds.md#bootstrap-sequence)\n\n**Acceptance Criteria:**\n\n**Part 1: CLI Validation**\n\n- [ ] CLI flag `--validate-seeds` added to server startup\n- [ ] Flag behavior: boot DSL compiler, validate all seed policy DSL text, exit with success/failure status\n- [ ] Does NOT start the server (validation-only mode)\n- [ ] Exit code 0 on success, non-zero on failure\n- [ ] Logs validation results: \"All N seed policies valid\" or \"Validation failed: {errors}\"\n- [ ] Enables CI integration: `holomush --validate-seeds` in build pipeline\n\n**Part 2: Smoke Test Gate**\n\n- [ ] Smoke test implementation covers minimum scenarios (see below)\n- [ ] All smoke tests pass with expected permissions (Allow for authorized, Deny for unauthorized)\n- [ ] Tests exercise the full evaluation pipeline (AttributeResolver → PolicyEngine → deny-overrides)\n- [ ] Tests run against a real test server with seeded policies\n- [ ] Tests validate that unauthorized operations are denied (negative cases)\n- [ ] All tests pass via `task test`\n\n**Smoke Test Minimum Scenarios:**\n\n| Scenario                             | Subject             | Action    | Resource                     | Expected Result |\n| ------------------------------------ | ------------------- | --------- | ---------------------------- | --------------- |\n| **Basic Player Commands**            |                     |           |                              |                 |\n| Player executes \"say\"                | character (player)  | `execute` | command (say)                | Allow           |\n| Player executes \"look\"               | character (player)  | `execute` | command (look)               | Allow           |\n| Player moves to adjacent location    | character (player)  | `enter`   | location (destination)       | Allow           |\n| Player uses exit                     | character (player)  | `use`     | exit                         | Allow           |\n| Player reads co-located character    | character (player)  | `read`    | character (co-located)       | Allow           |\n| Player executes \"dig\" (unauthorized) | character (player)  | `execute` | command (dig)                | Deny            |\n| **Builder Operations**               |                     |           |                              |                 |\n| Builder executes \"dig\"               | character (builder) | `execute` | command (dig)                | Allow           |\n| Builder creates location             | character (builder) | `write`   | location                     | Allow           |\n| Builder creates exit                 | character (builder) | `write`   | exit                         | Allow           |\n| Builder describes object             | character (builder) | `write`   | object                       | Allow           |\n| **Admin Operations**                 |                     |           |                              |                 |\n| Admin executes \"shutdown\"            | character (admin)   | `execute` | command (shutdown)           | Allow           |\n| Admin reads any location             | character (admin)   | `read`    | location (any)               | Allow           |\n| Admin deletes location               | character (admin)   | `delete`  | location                     | Allow           |\n| Admin creates policy                 | character (admin)   | `write`   | policy                       | Allow           |\n| **Negative Cases (Deny Expected)**   |                     |           |                              |                 |\n| Player deletes location              | character (player)  | `delete`  | location                     | Deny            |\n| Builder executes admin-only command  | character (builder) | `execute` | command (admin-only)         | Deny            |\n| Player writes co-located object      | character (player)  | `write`   | object (co-located, unowned) | Deny            |\n\n**Dependencies:**\n\n- Task 23 (Phase 7.4) — bootstrap creates seed policies before tests can exercise them\n- Task 17.4 (Phase 7.3) — AccessPolicyEngine must be operational\n- Task 18 (Phase 7.3) — policy cache must be functional\n- Task 22b (Phase 7.4) — seed policies must cover all required actions\n\n**Files:**\n\n- Modify: `cmd/holomush/main.go` (add flag and validation logic)\n- Test: `cmd/holomush/main_test.go`\n- Create: `test/integration/access/smoke_test.go`\n\n**Implementation Notes:**\n\n**Part 1: CLI Validation**\n\n- Add flag parsing and validation logic in `cmd/holomush/main.go`\n- Use the DSL compiler from Task 12 ([Phase 7.2](./2026-02-06-full-abac-phase-7.2.md)) to validate all seed policy DSL text from Task 22\n- Exit with appropriate status codes\n\n**Part 2: Smoke Test Gate**\n\n- Use Ginkgo/Gomega for BDD-style test organization\n- Test server setup:\n  1. Spin up PostgreSQL testcontainer\n  2. Run migrations (schema + bootstrap)\n  3. Create test characters with player/builder/admin roles\n  4. Initialize AccessPolicyEngine with full provider chain\n- Tests MUST call `AccessPolicyEngine.Evaluate()` directly (not via service layer wrappers)\n- Each test case verifies `Decision.Effect` matches expected `types.EffectAllow`/`types.EffectDeny`\n- Failures MUST block T28 migration start — smoke test gate is a hard dependency\n\n**TDD Test List:**\n\n**Part 1: CLI Validation**\n\n- `--validate-seeds` flag present → validation mode activated\n- All valid seeds → exit 0, log success\n- Invalid seed DSL → exit non-zero, log errors with line/column\n- Validation mode → server does NOT start\n- CI integration test: run in build pipeline, verify exit codes\n\n**Part 2: Smoke Test Gate**\n\n- Test setup: bootstrap seeds, create test subjects (player/builder/admin characters), initialize engine\n- Each minimum scenario above as a separate `It()` block\n- Verify `Decision.Effect == types.EffectAllow` for authorized cases\n- Verify `Decision.Effect == types.EffectDeny` for unauthorized cases\n\n**Step 1: Write failing tests**\n\nTest both CLI validation mode and smoke test scenarios.\n\n**Step 2: Implement**\n\nAdd flag parsing and validation logic in `cmd/holomush/main.go` for Part 1.\n\nAdd test file `test/integration/access/smoke_test.go` for Part 2:\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Step 3: Run tests, commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n\n## Appendix A: Seed Policy Coverage Matrix\n\nThis appendix maps each of the 28 production call sites (documented in Task 28.5, [Phase 7.6](./2026-02-06-full-abac-phase-7.6.md)) to the seed policies that authorize them. Every call site MUST have at least one applicable seed policy, or rely on default-deny for intentional denial.\n\n### Command Package (3 call sites)\n\n| # | Call Site                                         | Action    | Resource Type | Applicable Seed Policies                                                                                                            | Notes                                                                       |\n| - | ------------------------------------------------- | --------- | ------------- | ----------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------- |\n| 1 | `dispatcher.go:157` — command execution           | `execute` | `command`     | `seed:player-basic-commands` (say/pose/look/go), `seed:builder-commands` (dig/create/describe/link), `seed:admin-full-access` (all) | Unlisted commands: default-deny for players; admins covered by full-access  |\n| 2 | `rate_limit_middleware.go:39` — rate limit bypass | `execute` | `capability`  | `seed:admin-full-access`                                                                                                            | Only admins bypass rate limits; players denied via default-deny             |\n| 3 | `handlers/boot.go:52` — boot command              | `execute` | `admin.boot`  | `seed:admin-full-access`                                                                                                            | Admin-only operation; no specific seed policy — relies on admin full-access |\n\n### World Service — Location Operations (6 call sites)\n\n| # | Call Site                             | Action   | Resource Type | Applicable Seed Policies                                | Notes                                              |\n| - | ------------------------------------- | -------- | ------------- |\n\n[Description truncated for bead payload size; full details remain in source plan section.]\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Sonnet 4.5\n**Complexity:** Moderate-high — integration test suite with CLI validation and smoke tests\n**Scope:** 2-3 files, Ginkgo/Gomega tests exercising seed policies with full engine\n**Criticality:** High — gates the irreversible migration step (T28)\n**Reasoning:** Integration tests follow established Ginkgo/Gomega patterns. Test scenarios are derivable from seed policy specs. While this gates migration, the test implementation itself follows clear patterns. Sonnet handles integration test writing from specifications.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:48Z","created_by":"seanb4t","updated_at":"2026-02-13T22:06:53Z","closed_at":"2026-02-13T22:06:53Z","close_reason":"Part 1: validate-seeds CLI command with tests. Part 2: 22 seed smoke tests exercising full engine pipeline. Also fixed seed policy DSL to use qualified attribute paths (principal.character.role etc) and added role/location to CharacterProvider.","labels":["abac","phase-7-4","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.6.4","depends_on_id":"holomush-5k1.5.10","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.6.4","depends_on_id":"holomush-5k1.5.9","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.6.4","depends_on_id":"holomush-5k1.6","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.6.4","depends_on_id":"holomush-5k1.6.3","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.60","title":"Add SPDX license header note to Task Execution Protocol","description":"## Review Finding: S2 — Missing SPDX license headers in code examples\n\n**Source:** PR #69 review\n**Plan location:** Multiple (lines 316, 372, 539, 651, etc.)\n**CLAUDE.md requirement:** All .go files MUST include SPDX license headers\n\n### Problem\nCode examples in the plan (which will be used as implementation templates) do not include SPDX headers. While these are plan-level examples, the plan's \"Step N: Implement\" blocks are intended to be copied near-verbatim.\n\n### Acceptance Criteria\n- [ ] Task Execution Protocol section includes note: \"All generated .go files MUST include SPDX headers per CLAUDE.md\"\n- [ ] Or: SPDX headers added to template code blocks","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T16:30:26Z","created_by":"seanb4t","updated_at":"2026-02-07T17:09:42Z","closed_at":"2026-02-07T17:09:42Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.60","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.600","title":"[E7] Phase 7.7: Resilience, Observability \u0026 Integration Tests","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.7.md`.\n\n\u003c!-- SPDX-License-Identifier: Apache-2.0 --\u003e\n\u003c!-- Copyright 2026 HoloMUSH Contributors --\u003e\n\n# Phase 7.7: Resilience, Observability \u0026 Integration Tests\n\n\u003e **[Back to Overview](./2026-02-06-full-abac-implementation.md)** | **[Previous: Phase 7.6](./2026-02-06-full-abac-phase-7.6.md)**\n\nTask Inventory:\n- T30: Integration tests for full ABAC flow\n- T31: Degraded mode implementation\n- T32: Schema evolution on plugin reload\n- T33: Lock tokens discovery command — **BLOCKED: Deferred to Epic 8**\n- T34: General provider circuit breaker\n- T35: Property orphan cleanup goroutine\n\nThis epic tracks phase-scoped execution of the ABAC implementation plan. Child tasks preserve plan-level dependencies and carry explicit TDD and independent-review gates.","acceptance_criteria":"- [ ] All planned Phase 7.7 tasks are represented as child beads under this epic.\n- [ ] Each child task is executed with the plan's mandatory TDD protocol (fail test first, then pass with `task test`; SQL migration exception applies with required integration coverage).\n- [ ] Each child task receives a passing independent reviewer-agent review confirming acceptance criteria, spec alignment, design/ADR alignment, and resolution of findings.\n- [ ] Inter-task and cross-phase dependencies are linked in beads and respected before this epic is closed.\n- [ ] Resilience and integration verification complete, including blocked-task note for T33 pending Epic 8 T24.","status":"open","priority":2,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:12:33Z","created_by":"seanb4t","updated_at":"2026-02-11T21:13:40Z","labels":["abac","phase-7-7","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.600","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.600","depends_on_id":"holomush-5k1.3","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.600","depends_on_id":"holomush-5k1.5","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.600","depends_on_id":"holomush-5k1.6","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.600","depends_on_id":"holomush-5k1.7","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.600.1","title":"[ABAC Plan 7.7] T30: Integration tests for full ABAC flow","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.7.md` task section at line 8.\n\n**Spec References:** [Testing Strategy](../specs/abac/08-testing-appendices.md#testing-strategy), [Integration Tests](../specs/abac/08-testing-appendices.md#integration-tests-ginkgogomega), ADR 0011 (Deny-overrides), ADR 0013 (Properties)\n\n**Dependencies:**\n\n- Task 23b (Phase 7.4) — seed validation must be in place before integration tests exercise seed policy behavior\n\n**Acceptance Criteria:**\n\n- [ ] Ginkgo/Gomega BDD-style tests with `//go:build integration` tag\n- [ ] testcontainers for PostgreSQL (pattern from `test/integration/world/`)\n- [ ] Seed policy behavior: self-access, location read, co-location, admin full access, deny-overrides, default deny\n- [ ] Property visibility: public co-located, private owner-only, admin-only, restricted with visible\\_to\n- [ ] **Canary test (full ABAC evaluation path):** End-to-end test covering subject resolution, attribute resolution, policy evaluation, deny-overrides, and audit logging with seed policies → validates complete system integration\n- [ ] Re-entrance guard: synchronous re-entry panics, goroutine-based re-entry NOT detected ([01-core-types.md#attribute-providers](../specs/abac/01-core-types.md#attribute-providers), prevented by convention)\n- [ ] Cache invalidation: NOTIFY after create, NOTIFY after delete → cache reloads\n- [ ] Cache invalidation: Policy UPDATE operations trigger pg_notify and cache invalidation (not just CREATE/DELETE). All three CRUD operations verified.\n- [ ] Cache invalidation: Multi-step commands (e.g., \"go north \u0026\u0026 look\") invalidate cache between steps to prevent stale permission data from persisting across evaluations within same request\n- [ ] Audit logging: denials\\_only mode, all mode, minimal mode\n- [ ] ~~Lock system: apply lock → permit policy, remove lock → allow~~ — deferred to Epic 8 (Phase 7.5 dependency)\n- [ ] All integration tests pass: `go test -race -v -tags=integration ./test/integration/access/...`\n\n**Files:**\n\n- Create: `test/integration/access/access_suite_test.go`\n- Create: `test/integration/access/evaluation_test.go`\n- Create: `test/integration/access/seed_policies_test.go`\n- Create: `test/integration/access/property_visibility_test.go`\n\n**Step 1: Write Ginkgo/Gomega integration tests**\n\nUse testcontainers for PostgreSQL (pattern from `test/integration/world/world_suite_test.go`).\n\n**Benchmark scenario:** Include a cache thrashing test case with high-cardinality policy sets (e.g., 10,000 unique policy sets rotating through a 256-entry LRU cache) to verify performance under cache pressure.\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Step 2: Run integration tests**\n\nRun: `go test -race -v -tags=integration ./test/integration/access/...`\nExpected: PASS\n\n**Step 3: Commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] Expected: PASS\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Opus 4.6\n**Complexity:** High — comprehensive integration tests for full ABAC flow with Ginkgo/Gomega + testcontainers\n**Scope:** 3-5 test files covering multi-policy scenarios, provider chains, audit verification\n**Criticality:** High — validates entire ABAC system end-to-end\n**Reasoning:** Integration tests must exercise complex multi-policy scenarios (deny-overrides, missing attributes, degraded mode, cache invalidation) with real PostgreSQL via testcontainers. Requires creative scenario design covering edge cases. Opus needed for comprehensive test design spanning the full ABAC stack.","status":"open","priority":2,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:50Z","created_by":"seanb4t","updated_at":"2026-02-11T21:37:56Z","labels":["abac","phase-7-7","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.600.1","depends_on_id":"holomush-5k1.6.4","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.600.1","depends_on_id":"holomush-5k1.600","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.600.2","title":"[ABAC Plan 7.7] T31: Degraded mode implementation","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.7.md` task section at line 113.\n\n**Spec References:** [Degraded Mode](../specs/abac/04-resolution-evaluation.md#error-handling) (Security note section)\n\n**Dependencies:**\n\n- Task 17.4 (Phase 7.3) — engine must be operational before degraded mode can be added\n\n**Acceptance Criteria:**\n\n- [ ] Engine MUST enter degraded mode when corrupted forbid/deny policy detected\n- [ ] Engine MUST auto-disable corrupted permit policies (set enabled=false in DB) without entering degraded mode\n- [ ] Degraded mode flag (`abac_degraded_mode` boolean) persists until administratively cleared\n- [ ] In degraded mode: all `Evaluate()` calls return `EffectDefaultDeny` without policy evaluation\n- [ ] In degraded mode: log CRITICAL level message on every evaluation attempt\n- [ ] Corrupted policy detection: unmarshal `compiled_ast` fails or structural invariants violated\n- [ ] Only forbid/deny policies trigger degraded mode (permit policies auto-disabled instead)\n- [ ] Degraded mode clearing in Epic 7 follows [Decision #96](../specs/decisions/epic7/general/096-defer-phase-7-5-to-epic-8.md): use temporary operational recovery (direct DB flag reset or server restart) until `policy clear-degraded-mode` ships in Epic 8 (Task 27b-3)\n- [ ] Policy reload command MUST bypass ABAC, restricted to local/system callers, with test for stale cache recovery (references ADR #107 and security requirement S5 from holomush-5k1.346)\n- [ ] Prometheus gauge `abac_degraded_mode` (0=normal, 1=degraded) exported (already added to Task 19 ([Phase 7.3](./2026-02-06-full-abac-phase-7.3.md)))\n- [ ] All tests pass via `task test`\n\n**Degraded Mode Triggers:**\n\n| Trigger                          | Cause                                                | Recovery                                                             |\n| -------------------------------- | ---------------------------------------------------- | -------------------------------------------------------------------- |\n| Compile-time corruption (forbid) | `compiled_ast` unmarshal fails on forbid policy load | Disable corrupted policy, then clear degraded mode via DB flag reset or server restart |\n| Compile-time corruption (permit) | `compiled_ast` unmarshal fails on permit policy load | Policy auto-disabled, normal evaluation continues (no degraded mode) |\n| Runtime evaluation error         | AST structural invariants violated during evaluation | Disable corrupted policy; if forbid/deny, clear degraded mode via DB flag reset or server restart |\n| Transient database error         | PostgreSQL unavailable during policy load            | Fix DB connectivity, restart server or reload policies               |\n\n**Files:**\n\n- Modify: `internal/access/policy/engine.go` (add degraded mode state and check)\n- Test: `internal/access/policy/engine_test.go`\n\n**TDD Test List:**\n\n- Engine detects corrupted forbid policy → enters degraded mode\n- Engine detects corrupted deny policy → enters degraded mode\n- Engine detects corrupted permit policy → auto-disables policy (set enabled=false), logs ERROR, no degraded mode\n- In degraded mode → all evaluations return default deny\n- In degraded mode → CRITICAL log on every evaluation\n- In degraded mode → audit entry written with reason='degraded_mode' and effect default_deny\n- Auto-disabled permit policy → subsequent loads skip disabled policy, normal evaluation continues\n- Clear degraded mode via DB flag reset or server restart (Decision #96 workaround) → normal evaluation resumes\n- Degraded mode gauge metric → 0 when normal, 1 when degraded\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Opus 4.6\n**Complexity:** High — degraded mode for corrupted policies, auto-disable, operator alerting\n**Scope:** 2-3 files, corruption detection, state machine for degraded/healthy transitions\n**Criticality:** Very high — security resilience, incorrect degraded mode = either too permissive or total lockout\n**Reasoning:** Degraded mode must correctly detect corrupted forbid/deny policies (enter degraded) vs corrupted permit policies (auto-disable). State transitions between healthy/degraded must be safe under concurrent access. Wrong behavior in either direction has severe security consequences. Opus needed for security-critical resilience logic.","status":"open","priority":2,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:50Z","created_by":"seanb4t","updated_at":"2026-02-11T21:37:56Z","labels":["abac","phase-7-7","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.600.2","depends_on_id":"holomush-5k1.5.9","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.600.2","depends_on_id":"holomush-5k1.600","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.600.3","title":"[ABAC Plan 7.7] T32: Schema evolution on plugin reload","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.7.md` task section at line 163.\n\n**Spec References:** [Schema Evolution on Plugin Reload](../specs/abac/04-resolution-evaluation.md#schema-evolution-on-plugin-reload)\n\n**Dependencies:**\n\n- Task 7 (Phase 7.1) — PolicyStore interface needed for schema evolution policy scanning\n\n**Acceptance Criteria:**\n\n- [ ] When plugin reloaded, compare new schema against previous schema version\n- [ ] Attribute added → INFO log, no action required\n- [ ] Attribute type changed → WARN log, note existing policies may break\n- [ ] Attribute removed → WARN log, scan policies for references, mark affected policies for review\n- [ ] Attribute removal handling: scan all enabled policies' `dsl_text` for removed attribute keys, log references at WARN level, mark affected policies with metadata flag for administrator review (soft-delete approach — attribute removal doesn't block reload, but triggers operator notification)\n- [ ] Namespace removed → ERROR log, scan policies for references, reject reload if policies reference it\n- [ ] Schema change detection: compare attribute keys, types, namespaces between old and new schemas\n- [ ] Policy reference scan: grep all enabled policies' `dsl_text` for removed namespace or attribute keys\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Modify: `internal/access/policy/schema_registry.go` (add schema versioning and comparison)\n- Test: `internal/access/policy/schema_registry_test.go`\n\n**TDD Test List:**\n\n- Plugin reload with added attribute → INFO log, no error\n- Plugin reload with changed attribute type → WARN log, no error\n- Plugin reload with removed attribute → WARN log, scan policies, mark affected policies for review\n- Plugin reload with removed namespace → ERROR, reject if policies reference it\n- Schema comparison detects all change types correctly\n- Policy scan correctly identifies references to removed attributes\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Opus 4.6\n**Complexity:** High — handling attribute schema changes when plugins reload, backward compatibility analysis\n**Scope:** 2-3 files, schema comparison, policy impact analysis, migration logic\n**Criticality:** High — incorrect schema evolution = broken policies after plugin reload\n**Reasoning:** Must detect attribute additions, removals, and type changes, then determine impact on existing compiled policies. Attribute removal affecting active policies requires careful handling (warn, block, or degrade). Complex analysis with multiple valid approaches. Opus needed for schema evolution logic.","status":"open","priority":2,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:50Z","created_by":"seanb4t","updated_at":"2026-02-11T21:37:56Z","labels":["abac","phase-7-7","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.600.3","depends_on_id":"holomush-5k1.3.11","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.600.3","depends_on_id":"holomush-5k1.600","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.600.4","title":"[ABAC Plan 7.7] T33: Lock tokens discovery command — **BLOCKED: Deferred to Epic 8**","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.7.md` task section at line 199.\n\n\u003e **Blocked:** This task depends on Task 24 (Lock token registry) which is part of Phase 7.5,\n\u003e deferred to Epic 8 ([Decision #96](../specs/decisions/epic7/general/096-defer-phase-7-5-to-epic-8.md)).\n\u003e Task 33 cannot proceed until Task 24 is implemented in Epic 8.\n\n**Spec References:** [Lock Token Discovery](../specs/abac/06-layers-commands.md#lock-token-discovery)\n\n**Dependencies:**\n\n- Task 24 (Phase 7.5) — lock registry must exist before discovery command can query it (deferred to Epic 8)\n\n**Acceptance Criteria:**\n\n- [ ] `lock tokens` command → lists all registered lock tokens (faction, flag, level, etc.)\n- [ ] `lock tokens --namespace character` → filters to specific namespace\n- [ ] `lock tokens --verbose` → shows underlying DSL attribute path for each token (for debugging)\n- [ ] Display format: token name, type, description, example\n- [ ] Discovery sources: schema registry (plugin-provided attributes) + core tokens (faction, flag, level, role)\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Modify: `internal/command/handlers/lock.go`\n- Test: `internal/command/handlers/lock_test.go`\n\n**TDD Test List:**\n\n- `lock tokens` → lists all available lock tokens\n- `lock tokens --namespace character` → filters to character namespace\n- `lock tokens --verbose` → shows DSL attribute path\n- Core tokens (faction, flag, level, role) always present\n- Plugin-provided attributes appear in token list\n- Display format includes name, type, description, example\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Sonnet 4.5\n**Complexity:** Moderate — command implementation for discovering lock tokens on objects\n**Scope:** 1-2 files, command handler querying lock registry\n**Criticality:** Low — deferred to Epic 8, depends on lock registry (T24)\n**Reasoning:** Standard command implementation following established patterns. Query lock registry, format output. Blocked until Phase 7.5 lock registry exists. Sonnet handles command implementation well.","status":"open","priority":2,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:50Z","created_by":"seanb4t","updated_at":"2026-02-11T21:37:56Z","labels":["abac","phase-7-7","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.600.4","depends_on_id":"holomush-5k1.600","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.600.4","depends_on_id":"holomush-5k1.7.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.600.5","title":"[ABAC Plan 7.7] T34: General provider circuit breaker","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.7.md` task section at line 236.\n\n**Spec References:** [Provider Circuit Breaker](../specs/abac/04-resolution-evaluation.md#circuit-breaker-summary)\n\n**Dependencies:**\n\n- Task 14 (Phase 7.3) — resolver must exist before circuit breaker logic can be added to it\n\n\u003e **Note:** This task's circuit breaker also covers PropertyProvider (formerly a\n\u003e separate circuit breaker in Task 16b). See [Decision #74](../specs/decisions/epic7/phase-7.7/074-unified-circuit-breaker-task-34.md).\n\u003e\n\u003e **Note:** The spec defines two circuit breaker parameter sets: a SHOULD-level simpler version (10 consecutive errors, 30s open) and a MUST-level budget-utilization version (\u003e80% budget in \u003e50% of calls). This task implements the MUST-level version as it provides better detection of chronic performance degradation vs. hard failures. The simpler parameters are subsumed by the budget-utilization approach.\n\n**Acceptance Criteria:**\n\n- [ ] Track budget utilization per provider over 60-second rolling window\n- [ ] Trigger: \u003e80% budget utilization in \u003e50% of calls (minimum 10 calls) over 60-second rolling window → circuit opens\n- [ ] Circuit open → skip provider for 60s, return empty attributes\n- [ ] Log at WARN level: \"Provider {name} circuit breaker opened: budget utilization threshold exceeded\"\n- [ ] Prometheus counter `abac_provider_circuit_breaker_trips_total{provider=\"name\"}` incremented on trip\n- [ ] After 60s → half-open state with single probe request\n- [ ] Probe success → close circuit (INFO log); probe failure → re-open for another 60s\n- [ ] Circuit-opened providers do NOT consume evaluation time budget (immediate skip, no I/O)\n- [ ] Fair-share timeout calculation excludes circuit-opened providers from remaining provider count\n- [ ] Provider metrics endpoint `/debug/abac/providers` shows: call counts, avg latency, timeout rate, circuit status\n- [ ] PropertyProvider circuit breaker behavior covered (replaces Task 16b's deferred circuit breaker)\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Modify: `internal/access/policy/attribute/resolver.go` (add general circuit breaker logic)\n- Test: `internal/access/policy/attribute/resolver_test.go`\n\n**TDD Test List:**\n\n- 80% budget utilization in \u003e50% of calls (minimum 10 calls) over 60-second rolling window → circuit opens\n- Circuit open → provider skipped for 60s, empty attributes returned\n- WARN log on circuit open with provider name and budget utilization details\n- Prometheus counter incremented on trip\n- After 60s → half-open probe sent (single request)\n- Probe success → circuit closes, normal operation resumes (INFO log)\n- Probe failure → circuit re-opens for another 60s\n- Skipping circuit-opened provider does not consume evaluation budget\n- Fair-share timeout excludes circuit-opened providers from denominator\n- Metrics endpoint shows circuit status\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Opus 4.6\n**Complexity:** High — circuit breaker pattern for attribute providers with configurable thresholds\n**Scope:** 2-3 files, circuit breaker state machine, health checking, fallback behavior\n**Criticality:** High — prevents cascading failures from slow/broken providers\n**Reasoning:** Circuit breaker must track per-provider health (open/half-open/closed), handle concurrent state transitions safely, and integrate with the resolver. Decision 74 unified PropertyProvider circuit breaker into this general implementation. Incorrect behavior causes either cascading failures (too slow to open) or unnecessary denials (too aggressive). Opus needed for concurrent state machine design.","status":"open","priority":2,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:50Z","created_by":"seanb4t","updated_at":"2026-02-11T21:37:56Z","labels":["abac","phase-7-7","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.600.5","depends_on_id":"holomush-5k1.5.2","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.600.5","depends_on_id":"holomush-5k1.600","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.600.6","title":"[ABAC Plan 7.7] T35: Property orphan cleanup goroutine","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.7.md` task section at line 284.\n\n**Spec References:** [05-storage-audit.md#schema](../specs/abac/05-storage-audit.md#schema) — entity_properties lifecycle section\n\n\u003e **Note:** This task was moved from Phase 7.1 (Task 4c) because orphan cleanup is a resilience concern, not a core schema concern. Cascade deletion remains in Phase 7.1.\n\n**Dependencies:**\n\n- Task 4c (Phase 7.1) — cascade deletion logic must exist before orphan cleanup can build on it\n\n**Acceptance Criteria:**\n\n- [ ] Orphan cleanup goroutine: runs on configurable timer (default: daily) to detect orphaned properties (parent entity no longer exists)\n- [ ] Orphan cleanup: detected orphans logged at WARN level on first discovery\n- [ ] Orphan cleanup: configurable grace period (default: 24h, configured via `world.orphan_grace_period` in server YAML)\n- [ ] Orphan cleanup: orphans persisting across two consecutive runs are actively deleted with batch `DELETE` and logged at INFO level with count\n- [ ] Startup integrity check: count orphaned properties on server startup\n- [ ] Startup integrity check: if orphan count exceeds configurable threshold (default: 100), log at ERROR level but continue starting (not fail-fast)\n- [ ] Integration tests with real database: entity deletion (character/location/object) cascades to entity_properties table (verifies Task 4c cascade deletion with PostgreSQL)\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Create: `internal/world/property_lifecycle.go` (orphan cleanup goroutine, startup integrity check)\n- Test: `internal/world/property_lifecycle_test.go` (orphan cleanup tests)\n\n**TDD Test List:**\n\n- Background goroutine runs on configurable timer (default: daily)\n- Detected orphans logged at WARN level on first discovery\n- Grace period configurable via YAML (default: 24h)\n- Orphans persisting across two consecutive runs are deleted\n- Batch DELETE logged at INFO level with count\n- Startup integrity check counts orphaned properties\n- If orphan count exceeds threshold (default: 100), log at ERROR but continue starting\n- No fail-fast on orphan detection (resilience requirement)\n\n**Step 1: Write failing tests**\n\n- Orphan cleanup goroutine runs on timer\n- Orphans logged at WARN on first detection\n- Grace period enforced before deletion\n- Batch deletion after grace period\n- Startup integrity check logs orphan count\n- Threshold-based ERROR logging\n\n**Step 2: Implement orphan cleanup**\n\nCreate `internal/world/property_lifecycle.go`:\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Step 3: Run tests, commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n\n\u003e **[Back to Overview](./2026-02-06-full-abac-implementation.md)** | **[Previous: Phase 7.6](./2026-02-06-full-abac-phase-7.6.md)**\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Sonnet 4.5\n**Complexity:** Moderate — background goroutine scanning for orphaned properties and cleaning up\n**Scope:** 1-2 files, periodic scan query, deletion with logging\n**Criticality:** Medium — data hygiene concern, not urgent\n**Reasoning:** Standard background cleanup pattern — periodic SQL query finding properties whose parent entity no longer exists, followed by batch deletion with logging. Follows existing Go goroutine patterns in the codebase. Sonnet handles background job patterns reliably.","status":"open","priority":2,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:50Z","created_by":"seanb4t","updated_at":"2026-02-11T21:37:56Z","labels":["abac","phase-7-7","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.600.6","depends_on_id":"holomush-5k1.3.8","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.600.6","depends_on_id":"holomush-5k1.600","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.61","title":"Fix role lock token inconsistency between Task 23 and Task 34","description":"## Review Finding: S3 — role core lock token inconsistency\n\n**Source:** PR #69 review\n**Plan location:** Task 23 (line 2226) and Task 34 (line 2828)\n\n### Problem\nTask 23 lists core lock tokens as faction, flag, level. Task 34 references \"core tokens (faction, flag, level, role)\" — adding role. The spec only lists faction, flag, level.\n\n### Decision\nFollow spec exactly: faction, flag, level only. Fix Task 34's description to remove role.\n\n### Acceptance Criteria\n- [ ] Task 34 description updated to remove role from core lock tokens\n- [ ] Task 23 and Task 34 consistent: faction, flag, level only\n- [ ] If role lock token is desired in future, tracked as separate enhancement","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T16:30:33Z","created_by":"seanb4t","updated_at":"2026-02-07T17:06:48Z","closed_at":"2026-02-07T17:06:48Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.61","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.62","title":"Add missing admin commands to plan: policy repair, lint --fix, recompile-all","description":"## Review Finding: S4 — Missing admin commands from Tasks 26-27\n\n**Source:** PR #69 review\n**Spec locations:** Line 848 (policy lint --fix), Lines 957-958 (policy recompile-all), Lines 2596-2604 (policy repair)\n\n### Problem\nThree spec-defined commands are missing from the plan:\n1. policy repair \u003cname\u003e — re-compiles corrupted policies (spec lines 2596-2604)\n2. policy lint --fix — automatic bare-boolean rewriting (spec line 848)\n3. policy recompile-all — grammar version migration (spec lines 957-958)\n\n### Decision\nAdd these to existing Tasks 26-27 acceptance criteria (in-scope for MVP).\n\n### Acceptance Criteria\n- [ ] policy repair added to Task 26 or Task 27 acceptance criteria\n- [ ] policy lint --fix added to Task 26 or Task 27 acceptance criteria\n- [ ] policy recompile-all added to Task 26 or Task 27 acceptance criteria\n- [ ] Each command has at least one test case specified","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T16:30:41Z","created_by":"seanb4t","updated_at":"2026-02-07T17:06:48Z","closed_at":"2026-02-07T17:06:48Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.62","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.63","title":"Add Cedar entity reference rejection test to Task 8","description":"## Review Finding: S5 — Missing entity reference rejection test\n\n**Source:** PR #69 review\n**Plan location:** Task 8, lines 793-854\n**Spec location:** Lines 939-945\n\n### Problem\nThe spec states the parser MUST reject Cedar-style Type::\"value\" syntax with a clear error message. Task 8's invalid policy tests do not include this test case.\n\n### Acceptance Criteria\n- [ ] Test case added to Task 8 for Cedar entity reference syntax rejection\n- [ ] Parser returns descriptive error mentioning Cedar syntax is not supported","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T16:30:52Z","created_by":"seanb4t","updated_at":"2026-02-07T17:09:42Z","closed_at":"2026-02-07T17:09:42Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.63","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.64","title":"Add lock policy naming convention to Task 24","description":"## Review Finding: S6 — Lock policy naming format missing from Task 24\n\n**Source:** PR #69 review\n**Spec location:** Line 2656\n\n### Problem\nTask 24 references lock-generated policies but does not specify the naming format. The spec defines naming as lock:{type}:{id}:{action} (e.g., lock:object:01ABC:read).\n\n### Acceptance Criteria\n- [ ] Lock policy naming convention lock:{type}:{id}:{action} added to Task 24 acceptance criteria\n- [ ] Test cases verify generated policy names follow the convention","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T16:31:21Z","created_by":"seanb4t","updated_at":"2026-02-07T17:09:42Z","closed_at":"2026-02-07T17:09:42Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.64","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.65","title":"Fix bootstrap sequence line reference (2916 should be 3007)","description":"## Review Finding: S7 — Bootstrap sequence line reference incorrect\n\n**Source:** PR #69 review\n**Plan location:** Task 22, line 2059\n\n### Problem\nTask 22 references \"Bootstrap Sequence (lines 2916-2992)\" but the Bootstrap Sequence section starts at line 3007. Line 2916 is within Policy Order Irrelevance. The actual content matches lines 3007-3122.\n\n### Acceptance Criteria\n- [ ] Line reference corrected from \"lines 2916-2992\" to \"lines 3007-3122\"","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T16:31:29Z","created_by":"seanb4t","updated_at":"2026-02-07T17:09:42Z","closed_at":"2026-02-07T17:09:42Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.65","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.66","title":"Define or document store.IsNotFound utility used in bootstrap","description":"## Review Finding: S8 — store.IsNotFound referenced but not defined\n\n**Source:** PR #69 review\n**Plan location:** Task 22, line 2124\n\n### Problem\nThe bootstrap implementation references store.IsNotFound(err) but no task creates this utility. It should either be documented as a pre-existing utility or added to a task's acceptance criteria.\n\n### Acceptance Criteria\n- [ ] store.IsNotFound either confirmed as pre-existing utility or added to a task\n- [ ] If new, added to Task 6 (policy store) or Task 22 (bootstrap) acceptance criteria","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T16:31:44Z","created_by":"seanb4t","updated_at":"2026-02-07T17:06:48Z","closed_at":"2026-02-07T17:06:48Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.66","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.67","title":"Fix file path inconsistency: schema_registry.go vs attribute/schema.go","description":"## Review Finding: S9 — File path inconsistency between Task 33 and Task 12\n\n**Source:** PR #69 review\n**Plan location:** Task 33 references internal/access/policy/schema_registry.go; Task 12 creates schema at internal/access/policy/attribute/schema.go\n\n### Problem\nTask 33 references a file path that differs from where Task 12 creates the schema. These should be consistent.\n\n### Acceptance Criteria\n- [ ] Task 33 updated to reference the same file path established in Task 12\n- [ ] All cross-references to schema file paths consistent throughout the plan","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T16:31:51Z","created_by":"seanb4t","updated_at":"2026-02-07T17:09:42Z","closed_at":"2026-02-07T17:09:42Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.67","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.68","title":"Add WAL size threshold monitoring to audit logger","description":"## Review Finding: S10 — Missing WAL size threshold monitoring\n\n**Source:** PR #69 review\n**Spec location:** Lines 2265-2269\n\n### Problem\nThe spec requires a configurable WAL file size threshold (10MB/10k entries) with a Prometheus gauge abac_audit_wal_entries to monitor backlog. Task 18 does not include this.\n\n### Acceptance Criteria\n- [ ] WAL size threshold (configurable, default 10MB/10k entries) added to Task 18 or Task 19\n- [ ] Prometheus gauge abac_audit_wal_entries implemented\n- [ ] Alert threshold documented for operators","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T16:32:24Z","created_by":"seanb4t","updated_at":"2026-02-07T17:06:48Z","closed_at":"2026-02-07T17:06:48Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.68","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.69","title":"Expand orphan cleanup goroutine acceptance criteria","description":"## Review Finding: S11 — Orphan cleanup goroutine needs more detail\n\n**Source:** PR #69 review\n**Plan location:** Task 25, lines 2344-2345\n**Spec location:** Lines 2089-2110\n\n### Problem\nTask 25 mentions \"Orphan cleanup goroutine\" and \"Startup integrity check\" in acceptance criteria but provides minimal detail. The spec requires: configurable timer, grace period, batch DELETE, startup threshold logging, and integration tests.\n\n### Acceptance Criteria\n- [ ] Task 25 expanded with detailed acceptance criteria from spec lines 2089-2110\n- [ ] Configurable cleanup interval and grace period specified\n- [ ] Batch DELETE semantics documented\n- [ ] Startup integrity check threshold and logging specified","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T16:32:32Z","created_by":"seanb4t","updated_at":"2026-02-07T17:09:42Z","closed_at":"2026-02-07T17:09:42Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.69","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.7","title":"[E7] Phase 7.5: Locks \u0026 Admin (Deferred to Epic 8)","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.5.md`.\n\n\u003c!-- SPDX-License-Identifier: Apache-2.0 --\u003e\n\u003c!-- Copyright 2026 HoloMUSH Contributors --\u003e\n\n# Phase 7.5: Locks \u0026 Admin\n\n\u003e **[Back to Overview](./2026-02-06-full-abac-implementation.md)** | **[Previous: Phase 7.4](./2026-02-06-full-abac-phase-7.4.md)** | **[Next: Phase 7.6](./2026-02-06-full-abac-phase-7.6.md)**\n\n---\n\n\u003e **DEFERRED TO EPIC 8**\n\u003e\n\u003e All 9 tasks in this phase (T24, T25, T25b, T26a, T26b, T27a, T27b-1, T27b-2, T27b-3) have been\n\u003e deferred from Epic 7 to Epic 8. Lock/unlock commands and admin policy management tools are not\n\u003e architecturally required for the ABAC core policy engine to function.\n\u003e\n\u003e **Rationale:** The core ABAC engine (Phases 7.1-7.4), call site migration (Phase 7.6), and\n\u003e resilience/integration testing (Phase 7.7) deliver the full policy evaluation pipeline without\n\u003e lock commands or admin tooling. These features enhance operability but do not gate the\n\u003e architectural replacement of `StaticAccessControl` with `AccessPolicyEngine`.\n\u003e\n\u003e **Decision:** [#96](../specs/decisions/epic7/general/096-defer-phase-7-5-to-epic-8.md)\n\u003e\n\u003e **Impact on other phases:**\n\u003e\n\u003e - Phase 7.7 Task 33 (Lock discovery command) is blocked until Phase 7.5 completes in Epic 8\n\u003e - Phase 7.7 Task 31 references `policy clear-degraded-mode` (T27b-3) -- the degraded mode\n\u003e   flag will need an alternative clearing mechanism until this command is implemented in Epic 8\n\n---\n\nTask Inventory:\n- T24: Lock token registry\n- T25: Lock expression parser and compiler\n- T25b: Lock and unlock in-game command handlers\n- T26a: Admin commands — policy CRUD (create/list/show/edit/delete)\n- T26b: Admin commands — policy state management (enable/disable/history/rollback)\n- T27a: Admin command — policy test\n- T27b-1: Admin commands — core policy management (validate/reload/attributes/list --old-grammar)\n- T27b-2: Admin commands — audit and seed inspection (audit/seed verify/seed status)\n- T27b-3: Admin commands — recompilation and repair (recompile-all/recompile/repair/clear-degraded-mode)\n\nThis epic tracks phase-scoped execution of the ABAC implementation plan. Child tasks preserve plan-level dependencies and carry explicit TDD and independent-review gates.","acceptance_criteria":"- [ ] All planned Phase 7.5 tasks are represented as child beads under this epic.\n- [ ] Each child task is executed with the plan's mandatory TDD protocol (fail test first, then pass with `task test`; SQL migration exception applies with required integration coverage).\n- [ ] Each child task receives a passing independent reviewer-agent review confirming acceptance criteria, spec alignment, design/ADR alignment, and resolution of findings.\n- [ ] Inter-task and cross-phase dependencies are linked in beads and respected before this epic is closed.\n- [ ] Deferred phase: readiness and execution are moved to Epic 8 per Decision #96.\n- [ ] Phase remains deferred to Epic 8 unless explicitly reactivated; dependent blocked work is tracked accordingly.","status":"open","priority":3,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:32:53Z","created_by":"seanb4t","updated_at":"2026-02-11T21:13:40Z","dependencies":[{"issue_id":"holomush-5k1.7","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.7","depends_on_id":"holomush-5k1.3","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.7","depends_on_id":"holomush-5k1.4","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.7","depends_on_id":"holomush-5k1.5","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.7","depends_on_id":"holomush-5k1.6","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.7.1","title":"[ABAC Plan 7.5] T24: Lock token registry","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.5.md` task section at line 31.\n\n**Spec References:** [06-layers-commands.md#layer-2-object-locks-owners](../specs/abac/06-layers-commands.md#layer-2-object-locks-owners), [06-layers-commands.md#lock-token-registry](../specs/abac/06-layers-commands.md#lock-token-registry)\n\n**Dependencies (deferred — applies when Epic 8 work begins):**\n\n- Task 17.4 (Phase 7.3) — engine must be operational before lock registry\n\n**Acceptance Criteria:**\n\n- [ ] Core lock tokens registered: `faction`, `flag`, `level`\n- [ ] Plugin lock tokens require namespace prefix (e.g., `myplugin:custom_token`)\n- [ ] Duplicate token → error\n- [ ] `Lookup()` returns definition with DSL expansion info\n- [ ] `All()` returns complete token list\n- [ ] `TokenDef` extends `LockTokenDef` (from Task 13 ([Phase 7.3](./2026-02-06-full-abac-phase-7.3.md))) with additional fields: `Namespace` (required for plugin tokens) and `ValueType` (for type-safe lock value parsing)\n- [ ] Conversion function `FromLockTokenDef(def LockTokenDef, namespace string) TokenDef` provided\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Create: `internal/access/policy/lock/registry.go`\n- Test: `internal/access/policy/lock/registry_test.go`\n\n- Register core lock tokens (faction, flag, level)\n- Register plugin lock tokens (must be namespace-prefixed)\n- Duplicate token → error\n- Lookup token → returns definition with DSL expansion info\n\n[Code snippet omitted; see source plan section for full example.]\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Sonnet 4.5\n**Complexity:** Moderate-high — lock token registry with type hierarchy and validation\n**Scope:** 2-3 files (registry, types, tests), token registration and lookup\n**Criticality:** Medium — deferred to Epic 8, foundational for lock system\n**Reasoning:** Registry pattern follows established Go conventions. Token types and hierarchy are specified in 06-layers-commands.md. Requires careful type design but no novel algorithms. Sonnet handles registry pattern implementation well.","status":"open","priority":3,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:48Z","created_by":"seanb4t","updated_at":"2026-02-11T21:38:03Z","labels":["abac","phase-7-5","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.7.1","depends_on_id":"holomush-5k1.5.9","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.7.1","depends_on_id":"holomush-5k1.7","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.7.2","title":"[ABAC Plan 7.5] T25: Lock expression parser and compiler","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.5.md` task section at line 97.\n\n**Spec References:** [06-layers-commands.md#lock-syntax](../specs/abac/06-layers-commands.md#lock-syntax), [06-layers-commands.md#lock-compilation](../specs/abac/06-layers-commands.md#lock-compilation)\n\n**Dependencies (deferred — applies when Epic 8 work begins):**\n\n- Task 24 (Phase 7.5) — lock tokens must be registered before parser can reference them\n\n**Acceptance Criteria:**\n\n- [ ] `faction:rebels` → generates `permit` with faction check\n- [ ] `flag:storyteller` → generates `permit` with flag membership check\n- [ ] `level\u003e5` → generates `permit` with level comparison\n- [ ] `faction:rebels \u0026 flag:storyteller` → compound (multiple permits, AND operator)\n- [ ] `faction:rebels | flag:storyteller` → compound (OR operator — at least one condition satisfies)\n- [ ] `!faction:rebels` → negates faction check\n- [ ] Compiler output → valid DSL that `PolicyCompiler` accepts\n- [ ] Invalid lock expression → descriptive error\n- [ ] All lock-generated policies MUST include `resource.owner == principal.id` in condition block (ownership check requirement)\n- [ ] Location lock policies omit ownership check (locations have no owner attribute)\n- [ ] Location locks use write-access authorization instead\n- [ ] Test: location lock created by builder without ownership check\n- [ ] Test: object/property locks still require ownership\n- [ ] Lock rate limiting: max 50 lock policies per character → error on create if exceeded (SHOULD be configurable via server settings; default: 50 lock attempts per character per minute)\n- [ ] Fuzz tests cover lock expression parser edge cases\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Create: `internal/access/policy/lock/parser.go`\n- Create: `internal/access/policy/lock/compiler.go`\n- Test: `internal/access/policy/lock/parser_test.go`\n- Test: `internal/access/policy/lock/compiler_test.go`\n\nLock syntax from spec:\n\n- `faction:rebels` → `permit(principal is character, action, resource == \"\u003ctarget\u003e\") when { principal.faction == \"rebels\" };`\n- `flag:storyteller` → `permit(principal is character, action, resource == \"\u003ctarget\u003e\") when { \"storyteller\" in principal.flags };`\n- `level\u003e5` → `permit(principal is character, action, resource == \"\u003ctarget\u003e\") when { principal.level \u003e 5 };`\n- `faction:rebels \u0026 flag:storyteller` → compound (both conditions as separate permits or combined, AND operator)\n- `faction:rebels | flag:storyteller` → compound (either condition satisfies, OR operator — generates single permit with OR condition)\n- `!faction:rebels` → negates faction check\n\nCompiler takes parsed lock expression + target resource string → DSL policy text. Then PolicyCompiler validates the generated DSL.\n\nLock expression compilation converts lock syntax into valid DSL permit policies. The compiled policy MUST include the ownership check requirement: `resource.owner == principal.id`.\n\nThe lock rate limit (default 50 lock policies per character per minute) SHOULD be configurable via server settings to allow operators to adjust based on their server's scale and player behavior patterns. The default value remains 50/character for backward compatibility and reasonable protection against policy storage exhaustion.\n\nConfiguration approach:\n\n- Add `lock_rate_limit_per_character` to server config file (default: 50)\n- Expose via environment variable `HOLOMUSH_LOCK_RATE_LIMIT` (optional override)\n- Document in operator documentation under access control configuration\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Opus 4.6\n**Complexity:** High — lock expression parser with compilation to ABAC policies\n**Scope:** 2-3 files, parser for lock syntax, compilation to forbid policies\n**Criticality:** Medium-high — deferred to Epic 8, but parser correctness is security-critical\n**Reasoning:** Lock expressions (e.g., 'faction:rebels AND level \u003e 5') must be correctly parsed and compiled into ABAC policies. Parser design with operator precedence, token references, and boolean combinators requires Opus. Incorrect compilation = security bypass through locks.","status":"open","priority":3,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:48Z","created_by":"seanb4t","updated_at":"2026-02-11T21:38:03Z","labels":["abac","phase-7-5","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.7.2","depends_on_id":"holomush-5k1.7","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.7.2","depends_on_id":"holomush-5k1.7.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.7.3","title":"[ABAC Plan 7.5] T25b: Lock and unlock in-game command handlers","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.5.md` task section at line 167.\n\n**Spec References:** [06-layers-commands.md#layer-2-object-locks-owners](../specs/abac/06-layers-commands.md#layer-2-object-locks-owners)\n\n**Dependencies (deferred — applies when Epic 8 work begins):**\n\n- Task 25 (Phase 7.5) — lock parser/compiler must exist before command handlers can use them\n- Task 17.4 (Phase 7.3) — engine needed for ownership verification via `Evaluate()`\n\n**Acceptance Criteria:**\n\n- [ ] `lock \u003cresource\u003e/\u003caction\u003e = \u003cexpression\u003e` → parses expression, validates ownership via `Evaluate()`, compiles to permit policy, stores via `PolicyStore`\n- [ ] `unlock \u003cresource\u003e/\u003caction\u003e` → removes action-specific lock policy for the resource\n- [ ] `unlock \u003cresource\u003e` → removes all lock policies for the resource\n- [ ] Resource target resolution: resolve object/exit by name in current location\n- [ ] Ownership verification: character must own the target resource (checked via `Evaluate()`); lock ownership MUST be re-verified per operation (S4 requirement from holomush-5k1.344)\n- [ ] Rate limiting: max 50 lock policies per character → error on create if exceeded (SHOULD be configurable via server settings; default: 50)\n- [ ] Lock policy naming: `lock:\u003ctype\u003e:\u003cresource_id\u003e:\u003caction\u003e` format (per spec: `\u003ctype\u003e` is bare resource type like `object`, `property`, `location`)\n- [ ] Commands registered in command registry following existing handler patterns\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Create: `internal/command/handlers/lock.go`\n- Test: `internal/command/handlers/lock_test.go`\n\n- `lock \u003cresource\u003e/\u003caction\u003e = \u003cexpression\u003e` → parses expression, validates ownership, compiles policy, stores in DB\n- `unlock \u003cresource\u003e/\u003caction\u003e` → removes action-specific lock policy\n- `unlock \u003cresource\u003e` → removes all lock policies for resource\n- Resource target resolution: resolve by name in current location\n- Ownership check: character must own target resource\n- Rate limiting: max 50 lock policies per character\n\nLock command workflow:\n\n1. Parse `lock \u003cresource\u003e/\u003caction\u003e = \u003cexpression\u003e` syntax\n2. Resolve resource by name in character's current location\n3. Determine resource type (object, property, location, etc.) from resolved resource\n4. Check ownership via `engine.Evaluate(ctx, AccessRequest{Subject: character, Action: \"own\", Resource: resource})`\n5. Count existing lock policies for character (from PolicyStore, filter by `WHERE source = 'lock' AND created_by = \u003ccharacter_id\u003e`)\n6. If count \u003e= configured rate limit (default 50), return error \"Rate limit exceeded: max N lock policies per character\"\n7. Parse lock expression via lock parser (from Task 25)\n8. Compile to DSL policy via lock compiler (from Task 25)\n9. Generate policy name: `lock:\u003ctype\u003e:\u003cresource_id\u003e:\u003caction\u003e` (e.g., `lock:object:01ABC:read`)\n10. Store policy via PolicyStore with source=\"lock\"\n\n\u003e **Design note:** Lock policy naming uses `lock:\u003ctype\u003e:\u003cresource_id\u003e:\u003caction\u003e` format per [06-layers-commands.md#layer-2-object-locks-owners](../specs/abac/06-layers-commands.md#layer-2-object-locks-owners). The `\u003ctype\u003e` is the bare resource type (object, property, location) without trailing colon. This format is safe because lockable resources use ULID identifiers (no colons/spaces). Rate limiting queries use `WHERE source = 'lock' AND created_by = \u003ccharacter_id\u003e` instead of pattern matching on policy names, which is more efficient and clearer.\n\nUnlock command workflow:\n\n1. Parse `unlock \u003cresource\u003e/\u003caction\u003e` or `unlock \u003cresource\u003e` syntax\n2. Resolve resource by name in character's current location\n3. Determine resource type from resolved resource\n4. Check ownership via `Evaluate()`\n5. If action specified: delete policy named `lock:\u003ctype\u003e:\u003cresource_id\u003e:\u003caction\u003e`\n6. If no action: delete all policies matching pattern `lock:\u003ctype\u003e:\u003cresource_id\u003e:%` (using PolicyStore query)\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Sonnet 4.5\n**Complexity:** Moderate — lock/unlock command handlers using parser and engine\n**Scope:** 2-3 files, command registration, argument parsing, engine integration\n**Criticality:** Medium — deferred to Epic 8, follows command handler patterns\n**Reasoning:** Command handlers follow established patterns in the codebase. lock/unlock commands parse arguments, validate ownership via Evaluate(), and store lock expressions. Sonnet handles command implementation reliably.","status":"open","priority":3,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:48Z","created_by":"seanb4t","updated_at":"2026-02-11T21:38:03Z","labels":["abac","phase-7-5","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.7.3","depends_on_id":"holomush-5k1.5.9","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.7.3","depends_on_id":"holomush-5k1.7","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.7.3","depends_on_id":"holomush-5k1.7.2","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.7.4","title":"[ABAC Plan 7.5] T26a: Admin commands — policy CRUD (create/list/show/edit/delete)","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.5.md` task section at line 237.\n\n**Spec References:** [06-layers-commands.md#policy-management](../specs/abac/06-layers-commands.md#policy-management)\n\n**Dependencies (deferred — applies when Epic 8 work begins):**\n\n- Task 23 (Phase 7.4) — seeded policies must exist before admin CRUD commands operate on them\n\n**Acceptance Criteria:**\n\n- [ ] `policy create \u003cname\u003e \u003cdsl\u003e` → validates DSL, stores policy, triggers NOTIFY\n- [ ] `policy create` MUST reject policy names starting with reserved prefixes `seed:` and `lock:` → error message explaining reserved prefix restriction\n- [ ] `policy list` → shows all policies (filterable by `--source`, `--enabled`/`--disabled`, `--effect=permit|forbid`)\n- [ ] `policy list --effect=permit` → filters to permit policies only\n- [ ] `policy list --effect=forbid` → filters to forbid policies only\n- [ ] `policy show \u003cname\u003e` → displays full policy details\n- [ ] `policy edit \u003cname\u003e \u003cnew_dsl\u003e` → validates new DSL, increments version\n- [ ] `policy delete \u003cname\u003e` → removes policy; seed policies cannot be deleted → error\n- [ ] Admin-only permission check on create/edit/delete\n- [ ] Invalid DSL input → helpful error message with line/column\n- [ ] Commands registered in command registry following existing handler patterns\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Create: `internal/command/handlers/policy.go`\n- Test: `internal/command/handlers/policy_test.go`\n\nFor each command, test:\n\n- Valid invocation produces expected output\n- Permission check (admin-only for create/edit/delete)\n- Invalid input produces helpful error message\n- `policy create \u003cname\u003e \u003cdsl\u003e` → validates DSL, stores policy, triggers NOTIFY\n- `policy create` with `seed:` prefix → rejected with error message\n- `policy create` with `lock:` prefix → rejected with error message\n- `policy list` → shows all policies (filterable by `--source`, `--enabled`/`--disabled`)\n- `policy show \u003cname\u003e` → displays full policy details\n- `policy edit \u003cname\u003e \u003cnew_dsl\u003e` → validates new DSL, increments version\n- `policy delete \u003cname\u003e` → removes policy (seed policies cannot be deleted)\n\nRegister commands in the command registry following existing handler patterns in `internal/command/handlers/`.\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Sonnet 4.5\n**Complexity:** Moderate — CRUD admin commands for policies (create/list/show/edit/delete)\n**Scope:** 2-3 files, 5 command handlers with validation and output formatting\n**Criticality:** Medium — deferred to Epic 8, standard CRUD pattern\n**Reasoning:** Admin CRUD commands follow established command handler patterns. Each command validates input, calls PolicyStore, formats output. create must validate DSL and trigger NOTIFY. Sonnet handles CRUD command batches efficiently.","status":"open","priority":3,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:48Z","created_by":"seanb4t","updated_at":"2026-02-11T21:38:03Z","labels":["abac","phase-7-5","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.7.4","depends_on_id":"holomush-5k1.6.3","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.7.4","depends_on_id":"holomush-5k1.7","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.7.5","title":"[ABAC Plan 7.5] T26b: Admin commands — policy state management (enable/disable/history/rollback)","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.5.md` task section at line 293.\n\n**Spec References:** [06-layers-commands.md#policy-management](../specs/abac/06-layers-commands.md#policy-management)\n\n**Dependencies (deferred — applies when Epic 8 work begins):**\n\n- Task 26a (Phase 7.5) — CRUD commands must exist before state management commands extend them\n- Task 7 (Phase 7.1) — PolicyStore interface needed for state management operations\n- Task 17.4 (Phase 7.3) — engine needed for policy evaluation\n- Task 18 (Phase 7.3) — policy cache needed for reload triggers\n\n**Acceptance Criteria:**\n\n- [ ] `policy enable \u003cname\u003e` → sets `enabled=true`, triggers cache reload\n- [ ] `policy disable \u003cname\u003e` → sets `enabled=false`, triggers cache reload\n- [ ] `policy history \u003cname\u003e` → shows version history from `access_policy_versions` table\n- [ ] `policy rollback \u003cname\u003e \u003cversion\u003e` → restores policy to previous version, creates new version entry\n- [ ] Admin-only permission check on enable/disable/rollback\n- [ ] Commands registered in command registry following existing handler patterns\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Modify: `internal/command/handlers/policy.go`\n- Test: `internal/command/handlers/policy_test.go`\n\nFor each command, test:\n\n- Valid invocation produces expected output\n- Permission check (admin-only for enable/disable/rollback)\n- `policy enable \u003cname\u003e` → sets `enabled=true`, triggers cache reload\n- `policy disable \u003cname\u003e` → sets `enabled=false`, triggers cache reload\n- `policy history \u003cname\u003e` → shows version history from `access_policy_versions` table\n- `policy rollback \u003cname\u003e \u003cversion\u003e` → restores policy to previous version, creates new version entry\n\nRegister commands in the command registry following existing handler patterns in `internal/command/handlers/`.\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Spec Deviations:**\n\n| What                      | Deviation                                                  | Rationale                                                                                                      |\n| ------------------------- | ---------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------- |\n| `policy rollback` command | Elevated from SHOULD to MUST — acceptance criteria require | Rollback is critical for safe policy updates — operators need guaranteed ability to revert changes immediately |\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Sonnet 4.5\n**Complexity:** Moderate-high — policy state management (enable/disable/history/rollback)\n**Scope:** 2-3 files, state transitions with versioning, rollback logic\n**Criticality:** Medium — deferred to Epic 8, state management follows patterns\n**Reasoning:** Enable/disable update policy status. History queries version table. Rollback restores previous version and triggers recompilation. While rollback has some complexity, the patterns are well-established. Sonnet handles state management commands.","status":"open","priority":3,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:49Z","created_by":"seanb4t","updated_at":"2026-02-11T21:38:03Z","labels":["abac","phase-7-5","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.7.5","depends_on_id":"holomush-5k1.3.11","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.7.5","depends_on_id":"holomush-5k1.7","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.7.5","depends_on_id":"holomush-5k1.7.4","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.7.6","title":"[ABAC Plan 7.5] T27a: Admin command — policy test","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.5.md` task section at line 349.\n\n**Spec References:** [06-layers-commands.md#policy-management](../specs/abac/06-layers-commands.md#policy-management)\n\n\u003e **Design note:** Task 27 split into 27a (policy test) and 27b (remaining admin commands) due to complexity. The `policy test` command has significant implementation scope (verbose mode, JSON mode, suite mode, builder redaction, audit logging) that warrants its own task for reviewability.\n\n**Dependencies (deferred — applies when Epic 8 work begins):**\n\n- Task 23 (Phase 7.4) — seeded policies must exist before policy test command can evaluate them\n\n**Acceptance Criteria:**\n\n- [ ] `policy test \u003csubject\u003e \u003caction\u003e \u003cresource\u003e` → returns decision and matched policies\n- [ ] `policy test --verbose` → shows all candidate policies with match/no-match reasons\n- [ ] `policy test --json` → returns structured JSON output with decision, matched policies, and attribute bags\n- [ ] Builder attribute redaction: subject attributes redacted when testing characters the builder doesn't own\n- [ ] Builder attribute redaction: resource attributes redacted for objects/locations the builder doesn't own\n- [ ] `policy test --suite \u003cfile\u003e` → batch testing from YAML scenario file\n- [ ] YAML scenario file format: list of {subject, action, resource, expected_decision} entries\n- [ ] **All `policy test` invocations logged to audit log** — metadata: subject, action, resource, decision, matched policies, admin invoker ([06-layers-commands.md#policy-test](../specs/abac/06-layers-commands.md#policy-test), was spec lines 2845-2849)\n- [ ] **Audit logging security justification:** `policy test` enables reconnaissance of permission boundaries; full audit trail prevents unauthorized probing\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Modify: `internal/command/handlers/policy.go`\n- Test: `internal/command/handlers/policy_test.go`\n\n- `policy test \u003csubject\u003e \u003caction\u003e \u003cresource\u003e` → returns decision, matched policies\n- `policy test --verbose` → shows all candidate policies with why each did/didn't match\n- `policy test --json` → structured JSON output test\n- `policy test --suite \u003cfile\u003e` → batch YAML scenario testing\n- Builder attribute redaction: test with characters/resources the builder doesn't own\n\nImplement the `policy test` command with all variants (verbose, JSON, suite mode) and builder attribute redaction. Ensure all invocations are logged to the audit log per spec requirements.\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Spec Deviations:**\n\n| What                          | Deviation                                                                | Rationale                                                                                                                          |\n| ----------------------------- | ------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------- |\n| `policy test --suite` support | Elevated from SHOULD to MUST — acceptance criteria requires this feature | Suite testing is essential for correctness verification of the test harness itself; enables batch testing from YAML scenario files |\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Opus 4.6\n**Complexity:** High — policy test command with verbose mode, JSON mode, suite mode, builder redaction, audit logging\n**Scope:** 3-4 files, multiple output modes, policy simulation, attribute assembly\n**Criticality:** Medium-high — deferred to Epic 8, but complex command with many modes\n**Reasoning:** Policy test command must simulate Evaluate() with custom attributes, display step-by-step evaluation in verbose mode, support JSON output for scripting, and run test suites from files. Multiple output modes with builder redaction for sensitive data. Most complex admin command. Opus needed for multi-mode command design.","status":"open","priority":3,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:49Z","created_by":"seanb4t","updated_at":"2026-02-11T21:38:03Z","labels":["abac","phase-7-5","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.7.6","depends_on_id":"holomush-5k1.6.3","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.7.6","depends_on_id":"holomush-5k1.7","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.7.7","title":"[ABAC Plan 7.5] T27b-1: Admin commands — core policy management (validate/reload/attributes/list --old-grammar)","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.5.md` task section at line 404.\n\n\u003e **Note:** Task 27b was split into three sub-tasks (27b-1, 27b-2, 27b-3) to achieve atomic commits per the plan's principle. The original Task 27b covered 11 distinct features spanning policy validation, cache management, attribute introspection, audit querying, seed inspection, and policy recompilation/repair — too many unrelated features for a single reviewable commit.\n\n**Spec References:** [06-layers-commands.md#policy-management](../specs/abac/06-layers-commands.md#policy-management), [02-policy-dsl.md](../specs/abac/02-policy-dsl.md)\n\n**Dependencies (deferred — applies when Epic 8 work begins):**\n\n- Task 27a (Phase 7.5) — policy test command must exist before extending with validation commands\n- Task 7 (Phase 7.1) — PolicyStore interface needed\n- Task 12 (Phase 7.2) — PolicyCompiler needed for validation\n- Task 17.4 (Phase 7.3) — engine needed for evaluation\n- Task 18 (Phase 7.3) — policy cache needed for reload command\n\n**Acceptance Criteria:**\n\n- [ ] `policy validate \u003cdsl\u003e` → success or error with line/column\n- [ ] `policy reload` → forces cache reload from DB\n- [ ] `policy attributes` → lists all registered attribute namespaces and keys\n- [ ] `policy attributes --namespace reputation` → filters to specific namespace\n- [ ] `policy list --old-grammar` → filters to policies with outdated grammar version\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Modify: `internal/command/handlers/policy.go`\n- Test: `internal/command/handlers/policy_test.go`\n\n- `policy validate \u003cdsl\u003e` → success or error with line/column\n- `policy reload` → forces cache reload from DB\n- `policy attributes` → lists all registered attribute namespaces and keys\n- `policy attributes --namespace reputation` → filters to specific namespace\n- `policy list --old-grammar` → shows only policies with outdated grammar_version in compiled_ast JSONB\n\n`policy list --old-grammar` filter: query `compiled_ast-\u003e\u003e'grammar_version' \u003c current_version`.\n\n**Note:** `grammar_version` is stored within the `compiled_ast` JSONB column, not as a separate top-level column. Access via `compiled_ast-\u003e\u003e'grammar_version'`.\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Sonnet 4.5\n**Complexity:** Moderate — four admin commands (validate/reload/attributes/list --old-grammar)\n**Scope:** 2-3 files, straightforward admin utilities\n**Criticality:** Medium — deferred to Epic 8, utility commands\n**Reasoning:** validate checks DSL syntax. reload triggers cache refresh. attributes lists registered schemas. list --old-grammar shows pre-recompilation state. Each is a focused utility. Sonnet handles batch admin command implementation.","status":"open","priority":3,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:49Z","created_by":"seanb4t","updated_at":"2026-02-11T21:38:03Z","labels":["abac","phase-7-5","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.7.7","depends_on_id":"holomush-5k1.3.11","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.7.7","depends_on_id":"holomush-5k1.7","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.7.7","depends_on_id":"holomush-5k1.7.6","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.7.8","title":"[ABAC Plan 7.5] T27b-2: Admin commands — audit and seed inspection (audit/seed verify/seed status)","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.5.md` task section at line 455.\n\n**Spec References:** [06-layers-commands.md#policy-management](../specs/abac/06-layers-commands.md#policy-management), [07-migration-seeds.md#bootstrap-sequence](../specs/abac/07-migration-seeds.md#bootstrap-sequence)\n\n**Dependencies (deferred — applies when Epic 8 work begins):**\n\n- Task 27b-1 (Phase 7.5) — core admin commands must exist before audit/seed inspection\n- Task 7 (Phase 7.1) — PolicyStore interface needed for seed verification\n- Task 22 (Phase 7.4) — seed policy constants needed for seed verify/status\n- Task 23 (Phase 7.4) — bootstrap sequence needed for seed installation context\n\n**Acceptance Criteria:**\n\n- [ ] `policy audit --since 1h --subject character:01ABC` → queries audit log with filters\n- [ ] `policy audit` supports time-based filters (`--since`, `--until`)\n- [ ] `policy audit` supports entity filters (`--subject`, `--resource`, `--action`)\n- [ ] `policy audit` supports decision filter (`--decision permit|deny`)\n- [ ] `policy seed verify` → compares installed seed policies against shipped seed text, highlights differences\n- [ ] `policy seed status` → shows seed policy versions, customization status\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Modify: `internal/command/handlers/policy.go`\n- Test: `internal/command/handlers/policy_test.go`\n\n- `policy audit --since 1h --subject character:01ABC` → queries audit log with filters\n- `policy audit --decision permit` → shows only permit decisions\n- `policy audit --decision deny` → shows only deny decisions\n- `policy seed verify` → compares installed vs. shipped seed policies\n- `policy seed status` → shows seed versions and customization flags\n\nAudit log query with filter support. Seed verify compares stored DSL against `SeedPolicies()` function from Task 22 (Phase 7.4). Seed status shows seed_version field and detects customization by comparing stored DSL against shipped seed text.\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Sonnet 4.5\n**Complexity:** Moderate — audit query and seed inspection commands\n**Scope:** 1-2 files, query audit log, verify/compare seed policies\n**Criticality:** Medium — deferred to Epic 8, diagnostic commands\n**Reasoning:** audit command queries audit log with filters. seed verify compares installed vs expected seeds. seed status shows bootstrap state. Each queries existing data stores. Sonnet handles diagnostic command implementation.","status":"open","priority":3,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:49Z","created_by":"seanb4t","updated_at":"2026-02-11T21:38:03Z","labels":["abac","phase-7-5","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.7.8","depends_on_id":"holomush-5k1.7","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.7.8","depends_on_id":"holomush-5k1.7.7","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.7.9","title":"[ABAC Plan 7.5] T27b-3: Admin commands — recompilation and repair (recompile-all/recompile/repair/clear-degraded-mode)","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.5.md` task section at line 502.\n\n**Spec References:** [06-layers-commands.md#policy-management](../specs/abac/06-layers-commands.md#policy-management), [04-resolution-evaluation.md#key-behaviors](../specs/abac/04-resolution-evaluation.md#key-behaviors), [02-policy-dsl.md](../specs/abac/02-policy-dsl.md)\n\n**Dependencies (deferred — applies when Epic 8 work begins):**\n\n- Task 27b-2 (Phase 7.5) — audit/seed inspection commands must exist before recompilation commands\n- Task 7 (Phase 7.1) — PolicyStore interface needed for policy reads/writes\n- Task 12 (Phase 7.2) — PolicyCompiler needed for recompilation\n- Task 17.4 (Phase 7.3) — engine needed for degraded mode flag management\n\n**Acceptance Criteria:**\n\n- [ ] `policy recompile-all` → recompiles all policies with current grammar version; failed recompilation logged at ERROR level, policy left at original grammar version (not disabled)\n- [ ] `policy recompile \u003cname\u003e` → recompiles single policy with current grammar version; failed recompilation logged at ERROR level, policy left at original grammar version (not disabled)\n- [ ] `policy repair \u003cname\u003e` → re-compiles a corrupted policy from its DSL text ([04-resolution-evaluation.md#error-handling](../specs/abac/04-resolution-evaluation.md#error-handling), was spec line 1650), used to fix policies with invalid compiled_ast\n- [ ] `policy clear-degraded-mode` → clears degraded mode flag, resumes normal evaluation\n- [ ] Recompilation commands update grammar_version within compiled_ast JSONB\n- [ ] Failed recompilation does NOT disable policy — continues evaluating with old AST\n- [ ] All tests pass via `task test`\n\n**Files:**\n\n- Modify: `internal/command/handlers/policy.go`\n- Test: `internal/command/handlers/policy_test.go`\n\n- `policy recompile-all` → recompiles all policies, updates grammar_version within compiled_ast JSONB\n- `policy recompile \u003cname\u003e` → recompiles single policy, updates grammar_version within compiled_ast JSONB\n- `policy recompile \u003cname\u003e` with compilation error → logs ERROR, policy remains at old grammar version, policy NOT disabled\n- `policy repair \u003cname\u003e` → re-compiles corrupted policy from DSL text, fixing invalid compiled_ast\n- `policy clear-degraded-mode` → clears degraded mode flag\n\nPolicy recompile commands ([02-policy-dsl.md](../specs/abac/02-policy-dsl.md), was spec lines 1001-1031):\n\n- `policy recompile-all` — fetches all policies, recompiles with current grammar, updates compiled_ast and grammar_version within compiled_ast JSONB\n- `policy recompile \u003cname\u003e` — fetches single policy by name, recompiles, updates compiled_ast JSONB\n- `policy repair \u003cname\u003e` — re-compiles policy with invalid compiled_ast from DSL text\n\n**Note:** `grammar_version` is stored within the `compiled_ast` JSONB column, not as a separate top-level column. Access via `compiled_ast-\u003e\u003e'grammar_version'`.\n\nEach policy's `CompiledPolicy` includes `GrammarVersion` field ([02-policy-dsl.md](../specs/abac/02-policy-dsl.md), was spec lines 1003-1004). Recompile commands update this field to the current grammar version after successful recompilation, which updates the grammar_version within the compiled_ast JSONB.\n\n**Failed recompilation handling** ([02-policy-dsl.md](../specs/abac/02-policy-dsl.md), was spec lines 1012-1015): Policies that fail recompilation are logged at ERROR level with policy name, policy ID, and compilation error message, then left at their original grammar version. A failed recompilation does NOT disable the policy — it continues to evaluate using its existing AST with the old grammar version.\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n\n\u003e **[Back to Overview](./2026-02-06-full-abac-implementation.md)** | **[Previous: Phase 7.4](./2026-02-06-full-abac-phase-7.4.md)** | **[Next: Phase 7.6](./2026-02-06-full-abac-phase-7.6.md)**\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Opus 4.6\n**Complexity:** High — recompilation and repair commands with degraded mode recovery\n**Scope:** 2-3 files, recompile-all/recompile/repair/clear-degraded-mode\n**Criticality:** High — repair commands are the recovery mechanism for corrupted policies\n**Reasoning:** recompile-all re-processes all policies through current compiler (handles grammar evolution). repair identifies and fixes corrupted policies. clear-degraded-mode transitions system back to healthy. These are the operator's tools for recovering from ABAC failures — must be correct and safe. Security-critical recovery operations. Opus needed.","status":"open","priority":3,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:49Z","created_by":"seanb4t","updated_at":"2026-02-11T21:38:04Z","labels":["abac","phase-7-5","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.7.9","depends_on_id":"holomush-5k1.7","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.7.9","depends_on_id":"holomush-5k1.7.8","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.70","title":"Add restricted visibility design note to Task 21","description":"## Review Finding: S12 — Missing note about restricted visibility seed policy\n\n**Source:** PR #69 review\n**Spec location:** Lines 1209-1210\n\n### Problem\nTask 21 defines 14 seed policies including public/private/admin visibility but does NOT include a restricted visibility seed policy. The spec says restricted properties use visible_to/excluded_from lists. This appears intentional but should be explicitly documented.\n\n### Acceptance Criteria\n- [ ] Task 21 includes explicit note explaining why restricted visibility does not need a separate seed policy\n- [ ] Note references the visible_to/excluded_from mechanism from spec","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T16:32:38Z","created_by":"seanb4t","updated_at":"2026-02-07T17:09:42Z","closed_at":"2026-02-07T17:09:42Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.70","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.71","title":"Add AttrType simplification note (Int/Float both map to float64)","description":"## Review Finding: S13 — AttrType enum has confusing Int/Float distinction\n\n**Source:** PR #69 review\n**Plan location:** Task 12, lines 1214-1220\n**Spec location:** Lines 978-1018\n\n### Problem\nPlan defines both AttrTypeInt and AttrTypeFloat, but both MUST be returned as float64 at runtime. The spec does not distinguish between Int and Float at the schema level. Having both creates confusion about when to use which.\n\n### Acceptance Criteria\n- [ ] Either consolidate to single AttrTypeNumber, or document that Int/Float distinction is purely for schema introspection\n- [ ] Task 12 acceptance criteria clarified","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T16:32:46Z","created_by":"seanb4t","updated_at":"2026-02-07T17:09:42Z","closed_at":"2026-02-07T17:09:42Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.71","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.72","title":"Plan: Task 28 breaks build - merge with Task 29 for atomic migration","description":"**PR:** #69 | **File:** docs/plans/2026-02-06-full-abac-implementation.md (Tasks 28-29, lines ~2455-2575)\n**Finding:** Task 28 (Replace AccessControl in DI wiring) explicitly says 'compilation errors at call sites expected - fixed in Task 29.' This creates commits where `task build` fails, violating the CI requirement ('MUST pass CI checks') and leaving the branch in a non-functional state if development is interrupted.\n**Decision:** Merge Tasks 28 and 29 into a single atomic task. DI wiring change and call site migration happen together per-package. Each commit keeps the build green.\n**Related files:** All ~28 call sites across internal/command/, internal/world/, internal/plugin/, internal/core/","acceptance_criteria":"- [ ] Tasks 28 and 29 merged into single task\n- [ ] Task specifies per-package atomic migration (DI wiring + call sites per commit)\n- [ ] Each commit compiles and passes `task build`\n- [ ] No intentional build breakage documented","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T17:29:18Z","created_by":"seanb4t","updated_at":"2026-02-07T18:08:20Z","closed_at":"2026-02-07T18:08:20Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.72","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.73","title":"Plan: Task 15 (PropertyProvider) depends on Task 25 (PropertyRepository)","description":"**PR:** #69 | **File:** docs/plans/2026-02-06-full-abac-implementation.md (Task 15 lines 1402-1477, Task 25 lines 2326-2409)\n**Finding:** Task 15 (Phase 7.3) creates PropertyProvider at internal/access/policy/attribute/property.go which requires PropertyRepository to resolve property attributes including parent_location via recursive CTE. But EntityProperty type and PropertyRepository are created in Task 25 (Phase 7.5). The entity_properties migration (Task 3, Phase 7.1) creates the table, but no Go types or repository exist until Phase 7.5.\n**Decision:** Move Task 25 to Phase 7.1 (after Task 3) so PropertyRepository exists before PropertyProvider needs it. Alternatively, split Task 15 to defer PropertyProvider.\n**Related files:** internal/access/policy/attribute/property.go, internal/world/property.go, internal/world/postgres/property_repo.go","acceptance_criteria":"- [ ] Task 25 (Property model) moved before Task 15 in plan ordering\n- [ ] OR Task 15 split: simple providers (environment/command/stream) first, PropertyProvider deferred\n- [ ] Dependency chain verified: migration (Task 3) -\u003e types+repo (Task 25) -\u003e provider (Task 15)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T17:29:18Z","created_by":"seanb4t","updated_at":"2026-02-07T18:08:20Z","closed_at":"2026-02-07T18:08:20Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.73","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.74","title":"Plan: Missing seed:catch-all-deny forbid policy in Task 21","description":"**PR:** #69 | **File:** docs/plans/2026-02-06-full-abac-implementation.md (Task 21, lines 1957-2043)\n**Finding:** The 14 seed policies in Task 21 are all `permit` statements. No explicit `forbid(principal, action, resource);` catch-all exists in SeedPolicies(). Without it, operators cannot see a named deny policy in `policy list`, and audit logs show `default_deny` instead of a named policy denial. The parser test cases (line 832) test the forbid syntax but no seed uses it.\n**Decision:** Add explicit `seed:catch-all-deny` with `forbid(principal, action, resource);` to the seed policy set. This makes deny decisions observable in policy list and audit logs.\n**Spec reference:** Seed Policies (spec lines 2935-2999)","acceptance_criteria":"- [ ] seed:catch-all-deny added to SeedPolicies() with `forbid(principal, action, resource);`\n- [ ] Seed count updated from 14 to 15 throughout plan\n- [ ] Task 21 acceptance criteria updated\n- [ ] Audit log examples show named policy denial (not default_deny)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T17:29:19Z","created_by":"seanb4t","updated_at":"2026-02-07T18:08:20Z","closed_at":"2026-02-07T18:08:20Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.74","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.75","title":"Plan: Missing audit log retention and partition management task","description":"**PR:** #69 | **File:** docs/plans/2026-02-06-full-abac-implementation.md (Task 18, lines 1658-1763)\n**Finding:** The spec (lines 2271-2318) defines critical operational requirements not covered by any task:\n- AuditConfig struct with RetainDenials (90 days), RetainAllows (7 days), PurgeInterval (24h)\n- Background goroutine for partition lifecycle management (create future partitions, detach/drop expired)\n- Health check integration for partition availability\nTask 18 covers the audit logger (modes, sync/async writes, WAL fallback) but retention/partitioning is separate significant work.\n**Decision:** Add a new task (suggested: between Task 18 and Task 19) covering partition management.\n**Related files:** internal/access/policy/audit/ (new partition manager), migrations for partition creation","acceptance_criteria":"- [ ] New task added to plan for audit log retention and partition management\n- [ ] Task covers: AuditConfig struct, RetainDenials/RetainAllows/PurgeInterval fields\n- [ ] Task covers: background goroutine for partition lifecycle (create future, detach/drop expired)\n- [ ] Task covers: health check integration for partition availability\n- [ ] Task references spec lines 2271-2318","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T17:29:19Z","created_by":"seanb4t","updated_at":"2026-02-07T18:08:20Z","closed_at":"2026-02-07T18:08:20Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.75","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.76","title":"Plan: Missing policy recompile-all and policy recompile commands","description":"**PR:** #69 | **File:** docs/plans/2026-02-06-full-abac-implementation.md (Tasks 26-27)\n**Finding:** The spec (lines 947-976) defines grammar versioning as critical:\n- compiled_ast JSONB MUST include grammar_version (initially 1)\n- `policy recompile-all` recompiles all policies with current grammar version\n- `policy recompile \u003cid\u003e` for individual policies\n- `policy list --old-grammar` filter for migration tracking\n- Failed recompilation policies left at original grammar version\nThe plan's CompiledPolicy (Task 11, line 1110) includes GrammarVersion but no task implements recompile commands or --old-grammar filter.\n**Decision:** Add recompile commands to Task 27 acceptance criteria. Add --old-grammar filter to Task 26's `policy list`.\n**Related files:** internal/access/policy/compiler.go, admin command handlers","acceptance_criteria":"- [ ] `policy recompile-all` command added to Task 27 acceptance criteria\n- [ ] `policy recompile \u003cid\u003e` command added to Task 27 acceptance criteria\n- [ ] `policy list --old-grammar` filter added to Task 26 acceptance criteria\n- [ ] Failed recompilation behavior documented (leave at original grammar version)\n- [ ] Spec reference lines 947-976 cited","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T17:29:19Z","created_by":"seanb4t","updated_at":"2026-02-07T18:08:20Z","closed_at":"2026-02-07T18:08:20Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.76","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.77","title":"Plan: Fabricated spec section numbers throughout (~30+ references)","description":"**PR:** #69 | **File:** docs/plans/2026-02-06-full-abac-implementation.md (throughout all tasks)\n**Finding:** The spec uses markdown headings without explicit numbering. The plan invented a numbering scheme that is inconsistent and sometimes maps to wrong content:\n- Section 3 subsections used: §3.3, §3.4, §3.4.1 (none exist in spec)\n- Section 5 subsections: §5, §5.1, §5.2, §5.3 (spec has no section 5 called 'Compilation Pipeline')\n- Section 6 subsections: §6.1-§6.7 (inconsistently mapped)\n- Section 7 subsections: §7.1-§7.7 (these reference Core Attribute Schema in section 3, not section 7)\n- Section 9: §9, §9.1 (no Observability section exists in spec)\nThe plan correctly notes 'Spec line numbers are approximate' but the section numbers imply false precision.\n**Decision:** Replace all fabricated section numbers with actual heading names from the spec.\n**Related files:** docs/plans/2026-02-06-full-abac-implementation.md, docs/specs/2026-02-05-full-abac-design.md","acceptance_criteria":"- [ ] All ~30+ fabricated section numbers replaced with actual heading names\n- [ ] Format: 'Section Name \u003e Subsection Name (lines NNN-NNN)' instead of '§N.N'\n- [ ] Cross-checked against spec heading structure\n- [ ] No invented numbering scheme remains","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T17:29:19Z","created_by":"seanb4t","updated_at":"2026-02-07T18:08:21Z","closed_at":"2026-02-07T18:08:21Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.77","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.78","title":"Plan: Task 16 references wrong spec lines (148-160 should be 1642-1690)","description":"**PR:** #69 | **File:** docs/plans/2026-02-06-full-abac-implementation.md (Task 16, line 1511)\n**Finding:** Task 16 step 1 says '(spec lines 148-160)' for the evaluation algorithm. Lines 148-160 are in the middle of the Architecture diagram. The Evaluation Algorithm is at spec lines 1642-1690.\n**Decision:** Fix line reference.\n**Related files:** docs/plans/2026-02-06-full-abac-implementation.md","acceptance_criteria":"- [ ] Line reference changed from '148-160' to '1642-1690'\n- [ ] Section name 'Evaluation Algorithm' added for clarity","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T17:29:19Z","created_by":"seanb4t","updated_at":"2026-02-07T18:08:21Z","closed_at":"2026-02-07T18:08:21Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.78","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.79","title":"Plan: Task 6 cites wrong lines for LISTEN/NOTIFY (1327-1345 should be 2115-2159)","description":"**PR:** #69 | **File:** docs/plans/2026-02-06-full-abac-implementation.md (Task 6, line 627)\n**Finding:** Plan says '§6.5 (LISTEN/NOTIFY, lines 1327-1345)' but lines 1327-1345 cover Provider Registration under Attribute Resolution. LISTEN/NOTIFY cache invalidation is at spec lines 2115-2159 under Policy Storage \u003e Cache Invalidation.\n**Decision:** Fix both section label and line reference.\n**Related files:** docs/plans/2026-02-06-full-abac-implementation.md","acceptance_criteria":"- [ ] Section reference changed from '§6.5' to 'Policy Storage \u003e Cache Invalidation'\n- [ ] Line reference changed from '1327-1345' to '2115-2159'","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T17:29:19Z","created_by":"seanb4t","updated_at":"2026-02-07T18:08:21Z","closed_at":"2026-02-07T18:08:21Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.79","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.8","title":"[E7] Phase 7.6: Call Site Migration \u0026 Cleanup","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.6.md`.\n\n\u003c!-- SPDX-License-Identifier: Apache-2.0 --\u003e\n\u003c!-- Copyright 2026 HoloMUSH Contributors --\u003e\n\n# Phase 7.6: Call Site Migration \u0026 Cleanup\n\n\u003e **[Back to Overview](./2026-02-06-full-abac-implementation.md)** | **[Previous: Phase 7.5](./2026-02-06-full-abac-phase-7.5.md)** | **[Next: Phase 7.7](./2026-02-06-full-abac-phase-7.7.md)**\n\nTask Inventory:\n- T28: Migrate to AccessPolicyEngine (atomic per-package migration)\n- T28.5: Migration Equivalence Testing\n- T29: Remove StaticAccessControl, AccessControl interface, and capability.Enforcer\n\nThis epic tracks phase-scoped execution of the ABAC implementation plan. Child tasks preserve plan-level dependencies and carry explicit TDD and independent-review gates.","acceptance_criteria":"- [ ] All planned Phase 7.6 tasks are represented as child beads under this epic.\n- [ ] Each child task is executed with the plan's mandatory TDD protocol (fail test first, then pass with `task test`; SQL migration exception applies with required integration coverage).\n- [ ] Each child task receives a passing independent reviewer-agent review confirming acceptance criteria, spec alignment, design/ADR alignment, and resolution of findings.\n- [ ] Inter-task and cross-phase dependencies are linked in beads and respected before this epic is closed.\n- [ ] M5 gate at T28 (migration complete) and M6 gate at T29 (legacy access-control removed).","status":"open","priority":1,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:33:01Z","created_by":"seanb4t","updated_at":"2026-02-11T21:13:40Z","dependencies":[{"issue_id":"holomush-5k1.8","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.8","depends_on_id":"holomush-5k1.5","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.8","depends_on_id":"holomush-5k1.6","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.8.1","title":"[ABAC Plan 7.6] T28: Migrate to AccessPolicyEngine (atomic per-package migration)","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.6.md` task section at line 8.\n\n**Spec References:** [07-migration-seeds.md#implementation-sequence](../specs/abac/07-migration-seeds.md#implementation-sequence), ADR 0014 (Direct replacement, no adapter)\n\n**Dependencies:**\n\n- Task 17.4 (Phase 7.3) — AccessPolicyEngine must be fully operational before migrating call sites\n- Task 22b (Phase 7.4) — seed policy coverage gaps must be resolved before migration (Decision #94)\n- Task 23b (Phase 7.4) — CLI validation and smoke tests must validate seed policy behavior before migration proceeds\n\n**Migration Strategy:**\n\nThis task uses **5 atomic commits** (T28-pkg1 through T28-pkg5), each covering specific packages and call sites. Each commit compiles and passes `task build`. The world service package (24 call sites) is decomposed into 3 sub-commits by domain to reduce review complexity and blast radius.\n\n**Acceptance Criteria:**\n\n- [ ] Per-package atomic migration: DI wiring + call sites migrated together, each commit compiles and passes `task build`\n- [ ] `AccessControl` replaced with `*policy.Engine` in dependency graph\n- [ ] `AttributeResolver` wired with all registered providers\n- [ ] `PolicyCache` wired and `Listen()` called for NOTIFY subscription\n- [ ] `SessionResolver` wired\n- [ ] `AuditLogger` wired\n- [ ] `Bootstrap()` called at startup to seed policies\n- [ ] **Security (S1):** API ingress validation added to prevent external requests from using system subject or `WithSystemSubject(ctx)` bypass mechanism\n- [ ] **Security (S8 - holomush-5k1.355):** A static analysis rule or go vet check MUST verify no remaining `AccessControl.Check()` calls post-migration. CI MUST enforce this check. Migration checklist MUST include per-site verification.\n- [ ] ALL **28 production call sites** migrated from `AccessControl.Check()` to `engine.Evaluate()`:\n  - [ ] 3 call sites in command package (T28-pkg1)\n  - [ ] 6 call sites in world: locations (T28-pkg2)\n  - [ ] 11 call sites in world: exits + objects (T28-pkg3)\n  - [ ] 7 call sites in world: characters + scenes (T28-pkg4)\n  - [ ] 1 call site in plugin package (T28-pkg5)\n- [ ] ALL **57 test call sites** in `internal/access/static_test.go` migrated to new engine\n- [ ] Generated mocks regenerated with mockery\n- [ ] Each call site uses `types.AccessRequest{Subject, Action, Resource}` struct\n- [ ] Error handling: `Evaluate()` error → fail-closed (deny), logged via slog\n- [ ] All subject strings use `character:` prefix (not legacy `char:`)\n- [ ] **All migrated call sites MUST use `SubjectCharacter` constant, not `char:` prefix** (per ADR #13 prefix normalization)\n- [ ] **Static analysis check for remaining `char:` prefix usage** — verify no call sites use legacy `char:` prefix after migration\n- [ ] Prefix migration strategy: EventStore accepts both `char:` and `character:` prefixes during transition (backward compatibility for existing event stream names)\n- [ ] Audit logs are immutable: old entries keep `char:` prefix, new entries use `character:` prefix\n- [ ] Tests verify both prefix variants are accepted by EventStore during migration period\n- [ ] Tests updated to mock `AccessPolicyEngine` instead of `AccessControl`\n- [ ] **Per-package error-path tests:** Each migrated package MUST have tests verifying:\n  1. Correct `AccessRequest` construction (subject, action, resource populated)\n  2. `decision.IsAllowed()=false` handling (deny path returns error/fails operation)\n  3. `Evaluate()` error handling (error != nil → fail-closed, operation denied, error logged)\n- [ ] Tests pass incrementally after each package sub-commit\n- [ ] 5 atomic commits: T28-pkg1, T28-pkg2, T28-pkg3, T28-pkg4, T28-pkg5\n- [ ] `task test` passes after all migrations\n- [ ] No commits with intentional build breakage\n- [ ] Rollback strategy documented ([Decision #65](../specs/decisions/epic7/phase-7.6/065-git-revert-migration-rollback.md)): `git revert` of Task 28 commit(s) restores `AccessControl.Check()` call sites\n- [ ] Database rollback procedure documented ([Decision #65](../specs/decisions/epic7/phase-7.6/065-git-revert-migration-rollback.md#database-migration-rollback-procedure)) covering all 3 migration files (000015, 000016, 000017) with down-migration order, backup requirements, and data recovery steps\n\n**Files:**\n\n- Modify: `cmd/holomush/main.go` (or server bootstrap file) — DI wiring\n- Modify: `internal/command/dispatcher.go` — Command execution authorization\n- Modify: `internal/command/rate_limit_middleware.go` — Rate limit bypass for admins\n- Modify: `internal/command/handlers/boot.go` — Boot command permission check\n- Modify: `internal/world/service.go` — World model operation authorization\n- Modify: `internal/plugin/hostfunc/commands.go` — Plugin command execution auth\n- Modify: `internal/core/broadcaster_test.go` — Test mock injection\n\n**Key files include (non-exhaustive)** — run `grep -r \"AccessControl\" internal/ --include=\"*.go\" -l` for the authoritative list.\n\n**Migration strategy:**\n\nMigrate per-package, with each commit including both DI wiring changes and all call site updates for that package. This ensures every commit compiles and passes `task build`.\n\n**Compound resource decomposition:**\n\nThe codebase uses compound resource strings like `fmt.Sprintf(\"location:%s:characters\", locationID.String())` at `internal/world/service.go:470`. These compound formats break the engine's prefix parser, which splits on the first `:` producing `type=location`, `id=01ABC:characters` — which is incorrect. During migration, decompose compound resources into separate action and resource fields:\n\n- **OLD:** `resource = \"location:\u003cid\u003e:characters\"`\n- **NEW:** `resource = \"location:\u003cid\u003e\"`, `action = \"list_characters\"`\n\nRationale: The ABAC model separates concerns — the resource identifies _what_ is being accessed, the action identifies _how_. \"List characters in a location\" is naturally `action=list_characters, resource=location:\u003cid\u003e`. This decomposition avoids parser complexity and aligns with the ABAC model.\n\nSee ADR #76 (Compound Resource Decomposition During Migration) for full decision rationale.\n\n**Call site counts verified (as of 2026-02-07):**\n\n- Production: 28 call sites (3 in command, 24 in world, 1 in plugin)\n- Tests: 57 call sites in `internal/access/static_test.go` + ~20 in `internal/plugin/capability/enforcer_test.go` (Task 29)\n\n### T28-pkg1: Command Package (3 call sites)\n\n**Atomic commit:** `refactor(command): migrate command package to AccessPolicyEngine`\n\n**Call sites (3):**\n\n- `internal/command/dispatcher.go` (1 call)\n- `internal/command/rate_limit_middleware.go` (1 call)\n- `internal/command/handlers/boot.go` (1 call)\n\n**Steps:**\n\n1. Update DI wiring in `cmd/holomush/main.go` to wire `*policy.Engine` for command package dependencies\n2. Update 3 production call sites using the migration pattern (see \"Call site migration pattern\" section)\n3. Update tests to mock `AccessPolicyEngine` instead of `AccessControl`\n4. **Per-package error-path tests:** Add tests verifying `AccessRequest` construction, `decision.IsAllowed()=false` handling, and `Evaluate()` error handling\n5. Run `task test` — MUST PASS\n6. Run `task build` — MUST PASS\n7. Commit\n\n### T28-pkg2: World Service - Locations (6 call sites)\n\n**Atomic commit:** `refactor(world): migrate location operations to AccessPolicyEngine`\n\n**Call sites (6):**\n\n- `GetLocation` (`internal/world/service.go:74`)\n- `CreateLocation` (`internal/world/service.go:94`)\n- `UpdateLocation` (`internal/world/service.go:123`)\n- `DeleteLocation` (`internal/world/service.go:144`)\n- `FindLocationByName` (`internal/world/service.go:796`)\n- `ExamineLocation` (`internal/world/service.go:655`)\n\n**Steps:**\n\n1. Update DI wiring in `cmd/holomush/main.go` to wire `*policy.Engine` for world package dependencies (if not done in pkg1)\n2. Update 6 location-related call sites in `internal/world/service.go`\n3. Update tests to mock `AccessPolicyEngine`\n4. **Per-package error-path tests:** Add tests verifying correct behavior for location operations\n5. Run `task test` — MUST PASS\n6. Run `task build` — MUST PASS\n7. Commit\n\n### T28-pkg3: World Service - Exits \u0026 Objects (11 call sites)\n\n**Atomic commit:** `refactor(world): migrate exit and object operations to AccessPolicyEngine`\n\n**Call sites - Exits (5):**\n\n- `GetExit` (`internal/world/service.go:162`)\n- `CreateExit` (`internal/world/service.go:185`)\n- `UpdateExit` (`internal/world/service.go:217`)\n- `DeleteExit` (`internal/world/service.go:241`)\n- `GetExitsByLocation` (`internal/world/service.go:279`)\n\n**Call sites - Objects (6):**\n\n- `GetObject` (`internal/world/service.go:295`)\n- `CreateObject` (`internal/world/service.go:315`)\n- `UpdateObject` (`internal/world/service.go:347`)\n- `DeleteObject` (`internal/world/service.go:371`)\n- `MoveObject` (`internal/world/service.go:401`)\n- `ExamineObject` (`internal/world/service.go:713`)\n\n**Steps:**\n\n1. Update 11 call sites (5 exits + 6 objects) in `internal/world/service.go`\n2. Update tests to mock `AccessPolicyEngine`\n3. **Per-package error-path tests:** Add tests verifying correct behavior for exi\n\n[Description truncated for bead payload size; full details remain in source plan section.]\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Opus 4.6\n**Complexity:** Very high — migrating ~28 production call sites from StaticAccessControl to AccessPolicyEngine\n**Scope:** 15-20+ files across multiple packages (world, core, plugin, telnet, grpc, control)\n**Criticality:** Critical — every authorization decision in the system changes\n**Reasoning:** Atomic per-package migration touching the entire codebase. Each call site must be converted from Check(subject, action, resource) bool to Evaluate(ctx, AccessRequest) (Decision, error) with proper error handling. Security-critical transformation where any mistake means broken authorization. Must maintain backward compatibility during migration. Opus absolutely required for mass security-critical refactoring.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:49Z","created_by":"seanb4t","updated_at":"2026-02-14T03:06:14Z","closed_at":"2026-02-14T03:06:14Z","close_reason":"PR #88 created — all 29 call sites migrated from AccessControl.Check to AccessPolicyEngine.Evaluate across command, world, and plugin packages","labels":["abac","phase-7-6","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.8.1","depends_on_id":"holomush-5k1.5.9","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.8.1","depends_on_id":"holomush-5k1.6.2","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.8.1","depends_on_id":"holomush-5k1.6.4","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.8.1","depends_on_id":"holomush-5k1.8","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.8.2","title":"[ABAC Plan 7.6] T28.5: Migration Equivalence Testing","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.6.md` task section at line 349.\n\n**Spec References:** Review Finding H5 (Architectural Recommendation) — No test validates identical authorization decisions between old StaticAccessControl and new ABAC engine\n\n**Dependencies:**\n\n- Task 28 (Phase 7.6) — all call sites must be migrated before equivalence testing validates the migration\n\n**Acceptance Criteria:**\n\n- [ ] Equivalence test suite created covering all ~28 production call sites\n- [ ] Test validates identical decisions between `StaticAccessControl.Check()` and `AccessPolicyEngine.Evaluate()` for same inputs\n- [ ] Test covers all unique subject/action/resource combinations from production call sites:\n  - [ ] Command dispatcher authorization (1 call site)\n  - [ ] Rate limit bypass checks (1 call site)\n  - [ ] Boot command permission (1 call site)\n  - [ ] World service operations (24 call sites covering all world actions)\n  - [ ] Plugin command execution (1 call site)\n- [ ] Test uses table-driven approach with request sets for each call site pattern\n- [ ] Test instantiates both engines with identical bootstrap data (roles, permissions, policies)\n- [ ] Test verifies `Check()` return value matches `decision.IsAllowed()` for every request\n- [ ] Any behavioral differences documented with justification in test comments\n- [ ] Test fails explicitly if decisions diverge without documented justification\n- [ ] Test runs as part of `task test` during migration phase\n- [ ] Test covers compound resource decomposition cases (e.g., `location:\u003cid\u003e:characters` → `action=list_characters, resource=location:\u003cid\u003e`)\n\n**Files:**\n\n- Create: `internal/access/migration_equivalence_test.go`\n\n**Test Structure:**\n\n[Code snippet omitted; see source plan section for full example.]\n\n**Implementation Notes:**\n\n1. **Bootstrap Equivalence:** Both engines MUST be seeded with equivalent authorization data. Static engine uses roles/permissions, policy engine uses RBAC policies that grant same permissions.\n\n2. **Compound Resource Handling:** For compound resources like `location:\u003cid\u003e:characters`, test BOTH:\n   - Old format: `resource=\"location:01ABC:characters\", action=\"read\"`\n   - New format: `resource=\"location:01ABC\", action=\"list_characters\"`\n\n   Verify that new format produces same decision as old format.\n\n3. **Test Timing:** Run this test AFTER Task 28 Package 1-3 migrations are complete but BEFORE Task 29 deletes old code. This validates the migration before cleanup.\n\n4. **Failure Handling:** If decisions diverge:\n   - Investigate which engine is correct per ABAC spec\n   - Document justified divergences with `comment` field\n   - Fix incorrect engine or migration code\n   - DO NOT proceed to Task 29 until all unjustified divergences are resolved\n\n5. **Coverage Verification:** Audit all 28 production call sites to ensure each unique subject/action/resource pattern appears in test cases. Use `grep -n \"\\.Check(\" internal/ --include=\"*.go\"` to enumerate call sites.\n\n**Acceptance Gate:**\n\nThis test MUST pass with zero unjustified divergences before Task 29 proceeds. Any documented divergences MUST have architectural justification (e.g., ABAC spec clarification, intentional behavior change).\n\n---\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] No explicit `Expected:` line is present in the source section; the section checklist is authoritative.\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Opus 4.6\n**Complexity:** High — equivalence testing between old and new authorization systems\n**Scope:** 2-3 test files covering all ~28 call sites with both systems\n**Criticality:** Critical — validates that migration preserves authorization semantics\n**Reasoning:** Must construct test scenarios that exercise every call site path in both old StaticAccessControl and new AccessPolicyEngine, verifying identical decisions. Requires deep understanding of both systems and creative test scenario design. Any unjustified divergence is a potential regression. Opus needed for cross-system equivalence verification.","status":"open","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:49Z","created_by":"seanb4t","updated_at":"2026-02-11T21:37:56Z","labels":["abac","phase-7-6","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.8.2","depends_on_id":"holomush-5k1.8","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.8.2","depends_on_id":"holomush-5k1.8.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.8.3","title":"[ABAC Plan 7.6] T29: Remove StaticAccessControl, AccessControl interface, and capability.Enforcer","description":"Derived from `docs/plans/2026-02-06-full-abac-phase-7.6.md` task section at line 781.\n\n**Spec References:** [07-migration-seeds.md#implementation-sequence](../specs/abac/07-migration-seeds.md#implementation-sequence), ADR 0014 (Direct replacement, no adapter)\n\n**Dependencies:**\n\n- Task 28.5 (Phase 7.6) — equivalence tests must pass with zero unjustified divergences before old code is removed\n\n**Acceptance Criteria:**\n\n- [ ] `internal/access/static.go` and `static_test.go` deleted\n- [ ] `internal/access/permissions.go` and `permissions_test.go` deleted (if static-only)\n- [ ] `AccessControl` interface removed from `access.go` and `internal/plugin/hostfunc/commands.go`\n- [ ] `capability.Enforcer` and `capability.CapabilityChecker` removed (capabilities now seed policies)\n- [ ] `internal/plugin/hostfunc/functions.go` — Remove `CapabilityChecker` field and `wrap()` capability checks (plugin capabilities now enforced via ABAC policies)\n- [ ] **Security (S8 - holomush-5k1.355):** Static analysis rule added to CI via `go vet` or custom linter to detect remaining `AccessControl.Check()` calls\n- [ ] Zero references to `AccessControl` in codebase (`grep` clean)\n- [ ] Zero references to `StaticAccessControl` in codebase\n- [ ] Zero references to `CapabilityChecker` or `capability.Enforcer` in codebase\n- [ ] Zero `char:` prefix usage (all migrated to `character:`)\n- [ ] `task test` passes\n- [ ] `task lint` passes\n- [ ] Rollback test: git-revert of Task 29 commit produces compilable code (validates ADR #65 rollback strategy)\n- [ ] Rollback test: existing tests pass after git-revert of Task 29 (old AccessControl interfaces restored)\n- [ ] Cross-reference: rollback strategy documented in [Decision #65](../specs/decisions/epic7/phase-7.6/065-git-revert-migration-rollback.md) (was ADR #65 — see Decision #36 for migration approach)\n\n**Files:**\n\n- Delete: `internal/access/static.go`\n- Delete: `internal/access/static_test.go`\n- Delete: `internal/access/permissions.go` (if only used by static evaluator)\n- Delete: `internal/access/permissions_test.go`\n- Delete: `internal/world/worldtest/mock_AccessControl.go` (generated mock)\n- Delete: `internal/access/accesstest/mock.go` (generated mock)\n- Modify: `internal/access/access.go` — remove `AccessControl` interface\n- Delete or modify: `internal/plugin/capability/` — remove `Enforcer` (capabilities now seed policies)\n- Modify: `internal/plugin/hostfunc/functions.go` — remove `CapabilityChecker` field and `wrap()` function\n- Modify: `internal/plugin/hostfunc/commands.go` — remove local `AccessControl` interface declaration\n- Search and remove: all `char:` prefix usage (replace with `character:`)\n- Run: `mockery` to regenerate mocks for new `AccessPolicyEngine` interface\n\n**Call Site Verification:**\n\nThis task removes OLD interfaces/implementations. Ensure all production call sites were migrated in Task 28:\n\n- `internal/command/dispatcher.go` — migrated in Task 28 Package 1\n- `internal/command/rate_limit_middleware.go` — migrated in Task 28 Package 1\n- `internal/command/handlers/boot.go` — migrated in Task 28 Package 1\n- `internal/world/service.go` (24 calls) — migrated in Task 28 Package 2\n- `internal/plugin/hostfunc/commands.go` (1 call to `f.access.Check()`) — migrated in Task 28 Package 3\n\nThe capability enforcer (`f.enforcer.Check()` in `functions.go`) is separate from `AccessControl` and removed here.\n\n**Step 1: Delete static access control files**\n\n**Step 2: Remove AccessControl interface from access.go**\n\nKeep `ParseSubject()` or migrate it to `policy.ParseEntityRef()`. Keep any utility functions still referenced.\n\n**Step 3: Remove capability.Enforcer**\n\nPlugin manifests are now handled by seed policies. Remove enforcer and all references.\n\n**Step 4: Remove legacy char: prefix**\n\nSearch and replace `char:` → `character:` in all `.go` files.\n\n**Step 5: Add static analysis check (S8 - holomush-5k1.355)**\n\nCreate a custom go vet analyzer or CI check to detect remaining `AccessControl.Check()` calls:\n\n[Code snippet omitted; see source plan section for full example.]\n\nOR add a custom go vet analyzer in `tools/migration-check/` that fails on `AccessControl.Check()` invocations.\n\n**Step 6: Run tests**\n\nRun: `task test`\nExpected: PASS\n\n**Step 7: Commit**\n\n[Code snippet omitted; see source plan section for full example.]\n\n---\n\n\u003e **[Back to Overview](./2026-02-06-full-abac-implementation.md)** | **[Previous: Phase 7.5](./2026-02-06-full-abac-phase-7.5.md)** | **[Next: Phase 7.7](./2026-02-06-full-abac-phase-7.7.md)**\n","acceptance_criteria":"- [ ] Complete all checklist items in the source plan section for this task.\n- [ ] Expected: PASS\n- [ ] TDD is mandatory: write failing test(s) first, verify failure with `task test`, implement minimal fix, verify pass with `task test`, then refactor while tests stay green (Tasks 1-3 may skip red-green-refactor but MUST add integration coverage).\n- [ ] A passing independent reviewer-agent review confirms code quality, acceptance-criteria completion, and alignment with the ABAC spec/design and referenced ADRs; all findings are resolved or explicitly justified.","notes":"## Model Selection\n**Model:** Sonnet 4.5\n**Complexity:** Moderate — removing old access control code and all references\n**Scope:** Delete 3-5 files, update imports across codebase\n**Criticality:** Medium — cleanup after migration is complete, lower risk\n**Reasoning:** Deletion task after equivalence tests pass. Remove StaticAccessControl, AccessControl interface, capability.Enforcer. Main risk is missing references, but Go compiler catches unused imports. Sonnet handles systematic cleanup reliably.","status":"open","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:13:50Z","created_by":"seanb4t","updated_at":"2026-02-11T21:37:56Z","labels":["abac","phase-7-6","plan-breakdown"],"dependencies":[{"issue_id":"holomush-5k1.8.3","depends_on_id":"holomush-5k1.8","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.8.3","depends_on_id":"holomush-5k1.8.2","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.80","title":"Plan: char: to character: prefix migration underspecified for production code","description":"**PR:** #69 | **File:** docs/plans/2026-02-06-full-abac-implementation.md (Tasks 29-30)\n**Finding:** The codebase has ~20+ production uses of 'char:' prefix across:\n- pkg/holo/emit.go (event stream names: 'char:\u003cid\u003e')\n- internal/command/handlers/objects.go (access control subjects)\n- internal/plugin/hostfunc/commands.go (access control subjects)\n- internal/plugin/ test files\n- test/integration/ test files\nTasks 29-30 mandate 'character:' prefix but don't address:\n1. Event stream names persisted with 'char:' prefix\n2. Whether EventStore.Subscribe/Replay needs backward-compatible stream name resolution\n3. Whether existing AccessControl.Check() call sites emit 'char:' to audit logs\n**Decision:** Plan must document migration strategy for persisted 'char:' prefix data and provide backward-compatible parsing during transition.\n**Related files:** pkg/holo/emit.go, internal/command/handlers/objects.go, internal/plugin/hostfunc/commands.go","acceptance_criteria":"- [ ] Migration strategy for persisted 'char:' prefix documented in Task 29\n- [ ] Event stream backward compatibility addressed (or confirmed no persistence issue)\n- [ ] Transition period handling documented (accept both prefixes temporarily?)\n- [ ] Test cases cover both 'char:' and 'character:' prefix handling","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T17:29:20Z","created_by":"seanb4t","updated_at":"2026-02-07T18:08:21Z","closed_at":"2026-02-07T18:08:21Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.80","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.81","title":"Plan: Task 15 recursive CTE missing held_by_character_id path","description":"**PR:** #69 | **File:** docs/plans/2026-02-06-full-abac-implementation.md (Task 15, lines 1453-1466)\n**Finding:** The plan's recursive CTE for parent_location resolution only follows objects.location_id. The spec (lines 1236-1264) defines three placement scenarios:\n1. Direct location (location_id non-NULL) - partially handled\n2. Held by character (held_by_character_id non-NULL) - MISSING, needs JOIN through characters table\n3. Contained in object (contained_in_object_id non-NULL) - only joins objects for location_id\nObjects held by characters would not resolve parent_location correctly.\n**Decision:** Update example CTE or add explicit note that it's simplified and implementation must cover all three cases.\n**Related files:** docs/plans/2026-02-06-full-abac-implementation.md, docs/specs/2026-02-05-full-abac-design.md (lines 1236-1264)","acceptance_criteria":"- [ ] CTE updated to handle all three placement columns OR\n- [ ] Explicit note added that CTE is simplified, with all three cases listed\n- [ ] held_by_character_id -\u003e characters.location_id path documented\n- [ ] Acceptance criteria reference all three placement scenarios from spec","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T17:29:20Z","created_by":"seanb4t","updated_at":"2026-02-07T18:08:21Z","closed_at":"2026-02-07T18:08:21Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.81","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.81","depends_on_id":"holomush-5k1.73","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.82","title":"Plan: PolicyCompiler thread safety not documented","description":"**PR:** #69 | **File:** docs/plans/2026-02-06-full-abac-implementation.md (Task 11, lines 1048-1139)\n**Finding:** PolicyCompiler is constructed with an immutable AttributeSchema and used by both PolicyStore (on create/update) and PolicyCache (on reload). These can execute concurrently but the plan doesn't state that PolicyCompiler must be safe for concurrent use. While likely safe (immutable schema), this should be explicit.\n**Decision:** Add thread safety documentation to Task 11 acceptance criteria.\n**Related files:** internal/access/policy/compiler.go","acceptance_criteria":"- [ ] Task 11 acceptance criteria includes: 'PolicyCompiler MUST be safe for concurrent use'\n- [ ] Documentation note added about immutable AttributeSchema ensuring safety\n- [ ] OR explicit mutex/synchronization documented if needed","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T17:29:20Z","created_by":"seanb4t","updated_at":"2026-02-07T18:08:21Z","closed_at":"2026-02-07T18:08:21Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.82","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.83","title":"Plan: Phase 7.7 mislabeled - contains feature implementations","description":"**PR:** #69 | **File:** docs/plans/2026-02-06-full-abac-implementation.md (Phase 7.7, Tasks 31-36)\n**Finding:** Phase 7.7 is labeled 'Integration Tests' but Tasks 32-35 are feature implementations:\n- Task 32: Degraded mode (feature)\n- Task 33: Schema evolution (feature)\n- Task 34: Lock tokens command (feature)\n- Task 35: General circuit breaker (feature)\nOnly Task 31 is an actual integration test suite. Task 36 (--validate-seeds) is a CLI flag.\n**Decision:** Rename phase to reflect actual content.\n**Related files:** docs/plans/2026-02-06-full-abac-implementation.md","acceptance_criteria":"- [ ] Phase 7.7 renamed to 'Resilience, Observability \u0026 Integration Tests'\n- [ ] OR split into Phase 7.7 (Resilience: 32,33,35) and Phase 7.8 (Integration \u0026 CLI: 31,34,36)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T17:29:20Z","created_by":"seanb4t","updated_at":"2026-02-07T18:08:21Z","closed_at":"2026-02-07T18:08:21Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.83","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.84","title":"Plan: LISTEN/NOTIFY reconnection strategy underspecified in Task 17","description":"**PR:** #69 | **File:** docs/plans/2026-02-06-full-abac-implementation.md (Task 17)\n**Finding:** Task 17 acceptance criteria mention 'Connection drop + reconnect -\u003e full reload' but don't specify:\n1. Dedicated connection (not pooled) for LISTEN\n2. Exponential backoff on reconnect\n3. Health check that verifies LISTEN subscription is active\nIf the notification listener connection drops undetected, the cache becomes permanently stale (hitting 30s staleness threshold and fail-closing).\n**Decision:** Add specific reconnection acceptance criteria.\n**Related files:** internal/access/policy/cache.go","acceptance_criteria":"- [ ] Dedicated (non-pooled) connection for LISTEN specified\n- [ ] Exponential backoff on reconnection documented\n- [ ] Health check for subscription liveness added\n- [ ] Staleness detection mechanism explicit","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T17:29:20Z","created_by":"seanb4t","updated_at":"2026-02-07T18:08:21Z","closed_at":"2026-02-07T18:08:21Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.84","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.85","title":"Plan: Missing policy repair command in Tasks 26/27","description":"**PR:** #69 | **File:** docs/plans/2026-02-06-full-abac-implementation.md (Tasks 26-27)\n**Finding:** Spec (line 1596) defines `policy repair \u003cname\u003e` as the recovery mechanism for corrupted compiled policies (re-compiles from dsl_text, re-enables policy). Neither Task 26 nor Task 27 includes this command. Task 32 (degraded mode) references degraded behavior but not the repair command itself.\n**Decision:** Add to Task 27 acceptance criteria.\n**Related files:** internal/access/policy/ admin command handlers","acceptance_criteria":"- [ ] `policy repair \u003cname\u003e` added to Task 27 acceptance criteria\n- [ ] Behavior specified: re-compile from dsl_text, re-enable policy\n- [ ] Error handling for failed repair documented","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T17:29:21Z","created_by":"seanb4t","updated_at":"2026-02-07T18:08:21Z","closed_at":"2026-02-07T18:08:21Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.85","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.85","depends_on_id":"holomush-5k1.76","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.86","title":"Plan: Missing Type::value entity reference rejection test in Task 8","description":"**PR:** #69 | **File:** docs/plans/2026-02-06-full-abac-implementation.md (Task 8, lines 790-898)\n**Finding:** Spec (lines 939-945) requires: 'The parser MUST reject Type::\"value\" syntax with a clear error message directing admins to use attribute-based group checks.' This is a security-relevant parser requirement. Task 8's acceptance criteria and invalid policy test cases don't include this.\n**Decision:** Add to Task 8 invalid policy tests.\n**Related files:** internal/access/policy/dsl/parser.go, parser_test.go","acceptance_criteria":"- [ ] Invalid policy test added: Type::\"value\" syntax rejected\n- [ ] Error message directs to attribute-based group checks\n- [ ] Spec reference lines 939-945 cited","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T17:29:21Z","created_by":"seanb4t","updated_at":"2026-02-07T18:08:21Z","closed_at":"2026-02-07T18:08:21Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.86","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.87","title":"Plan: Add phase dependency diagram for 36-task plan","description":"**PR:** #69 | **File:** docs/plans/2026-02-06-full-abac-implementation.md\n**Finding:** With 36 tasks across 7 phases, a visual dependency graph would help implementers understand the critical path and identify parallel work opportunities. The PropertyProvider/PropertyRepository dependency issue (C2) might have been caught earlier with such a diagram. Even a text-based mermaid or ASCII diagram would add significant value.\n**Decision:** Add dependency diagram to plan.\n**Related files:** docs/plans/2026-02-06-full-abac-implementation.md","acceptance_criteria":"- [ ] Phase dependency diagram added to plan (mermaid or text-based)\n- [ ] Critical path identified\n- [ ] Parallel work opportunities marked\n- [ ] Cross-phase dependencies visible","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T17:29:21Z","created_by":"seanb4t","updated_at":"2026-02-07T18:08:22Z","closed_at":"2026-02-07T18:08:22Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.87","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.88","title":"Plan: Split Task 15 - separate PropertyProvider from simpler providers","description":"**PR:** #69 | **File:** docs/plans/2026-02-06-full-abac-implementation.md (Task 15, lines 1402-1477)\n**Finding:** Task 15 bundles four providers (environment, command, stream, property) with vastly different complexity. Environment/command/stream are simple attribute resolvers. PropertyProvider has recursive CTE, circuit breaker (3 timeouts in 60s), cycle detection, and depth limits. Bundling them makes the task harder to estimate and review.\n**Decision:** Split into two tasks: simple providers (environment/command/stream) and PropertyProvider.\n**Related files:** internal/access/policy/attribute/ (4 provider files)","acceptance_criteria":"- [ ] Task 15 split into Task 15a (environment, command, stream) and Task 15b (property)\n- [ ] Task 15b includes: recursive CTE, circuit breaker, cycle detection, depth limits\n- [ ] Task 15b depends on Task 25 (PropertyRepository)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T17:29:21Z","created_by":"seanb4t","updated_at":"2026-02-07T18:08:22Z","closed_at":"2026-02-07T18:08:22Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.88","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.88","depends_on_id":"holomush-5k1.73","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.89","title":"Plan: Split Task 26 - 9 admin commands too large for single task","description":"**PR:** #69 | **File:** docs/plans/2026-02-06-full-abac-implementation.md (Task 26)\n**Finding:** Task 26 implements 9 admin commands (create, list, show, edit, delete, enable, disable, history, rollback). Each has its own test matrix, permission model, and output formatting. This is the largest task in the plan and should be split for clearer progress tracking and easier review.\n**Decision:** Suggest splitting into 3-4 tasks: CRUD (create/list/show/edit/delete), state management (enable/disable), and history (history/rollback).\n**Related files:** admin command handlers","acceptance_criteria":"- [ ] Task 26 split into 3-4 smaller tasks\n- [ ] Suggested grouping: CRUD, state management, history/rollback\n- [ ] Each sub-task has independent test coverage","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T17:29:21Z","created_by":"seanb4t","updated_at":"2026-02-07T18:08:22Z","closed_at":"2026-02-07T18:08:22Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.89","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.9","title":"PR 69 review: ABAC plan dependency and architecture inconsistencies","description":"## Full Plan Review Findings (Sanity, Architecture, Dependencies)\n\n### 1) P1 - Task 7b is architecturally inconsistent and out of sequence\n\nTask 7b currently mixes package/interface contracts that conflict with the ABAC spec and the rest of the plan:\n\n- It uses `internal/access/abac` paths while the spec package layout places engine work under `internal/access/policy`.\n- It uses pointer-style request signatures in examples (`Evaluate(ctx, *AccessRequest)`) where the spec defines value semantics (`Evaluate(ctx, AccessRequest)`).\n- It depends only on Task 7 but asks for implementation-level engine behavior that belongs to T17.1-T17.4.\n\n**Why this matters:** this can cause implementation churn and rework at the most central interface boundary.\n\n**References:**\n- `docs/plans/2026-02-06-full-abac-phase-7.1.md:1364`\n- `docs/plans/2026-02-06-full-abac-phase-7.1.md:1381`\n- `docs/plans/2026-02-06-full-abac-phase-7.1.md:1502`\n- `docs/plans/2026-02-06-full-abac-phase-7.3.md:569`\n- `docs/plans/2026-02-06-full-abac-phase-7.3.md:602`\n- `docs/specs/abac/01-core-types.md:11`\n- `docs/specs/abac/00-overview.md:176`\n\n### 2) P2 - Master dependency artifacts drift from task-level dependency truth\n\nThe top-level dependency views (cross-phase table and mermaid graph) do not fully match task-level `Dependencies` blocks:\n\n- Cross-phase gate table states it lists all cross-phase dependencies, but omits dependencies present in phase docs:\n  - T17.4 -\u003e T23b\n  - T18 -\u003e T23b\n  - T7 -\u003e T27b-1\n- The diagram includes T17.4 -\u003e T18, but Task 18 dependency block does not include T17.4.\n\n**Why this matters:** teams using only the overview can schedule in the wrong order and miss actual gates.\n\n**References:**\n- `docs/plans/2026-02-06-full-abac-implementation.md:390`\n- `docs/plans/2026-02-06-full-abac-implementation.md:243`\n- `docs/plans/2026-02-06-full-abac-phase-7.4.md:540`\n- `docs/plans/2026-02-06-full-abac-phase-7.4.md:541`\n- `docs/plans/2026-02-06-full-abac-phase-7.5.md:413`\n- `docs/plans/2026-02-06-full-abac-phase-7.3.md:860`\n\n### 3) P2 - Active-task accounting includes blocked work\n\nThe overview says there are 46 active tasks, but Task 33 is explicitly blocked by deferred Task 24 (Epic 8). This makes active-count reporting optimistic for Epic 7 execution.\n\n**Why this matters:** planning metrics and milestone burndown can be misleading.\n\n**References:**\n- `docs/plans/2026-02-06-full-abac-implementation.md:103`\n- `docs/plans/2026-02-06-full-abac-phase-7.7.md:199`\n- `docs/plans/2026-02-06-full-abac-phase-7.7.md:201`\n- `docs/plans/2026-02-06-full-abac-phase-7.7.md:209`\n\n### 4) P2 - Residual package-path drift remains outside Task 7b\n\nThere are still scattered references to `internal/access/abac` in plan docs, while the split spec package structure documents `internal/access/policy` as the engine location.\n\n**Why this matters:** increases likelihood of split implementations or wrong-file changes during execution.\n\n**References:**\n- `docs/plans/2026-02-06-full-abac-implementation.md:89`\n- `docs/plans/2026-02-06-full-abac-implementation.md:557`\n- `docs/plans/2026-02-06-full-abac-implementation.md:573`\n- `docs/plans/2026-02-06-full-abac-phase-7.4.md:610`\n- `docs/specs/abac/00-overview.md:176`\n\n## Recommended Remediation\n\n1. Normalize all package/API references to one canonical contract (`internal/access/policy`, value-based `Evaluate`).\n2. Re-home or re-scope Task 7b so dependency timing matches actual engine availability.\n3. Regenerate top-level dependency table/diagram from per-task dependency blocks to prevent manual drift.\n4. Report active vs blocked task counts separately in the overview.\n","status":"open","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T20:21:02Z","created_by":"seanb4t","updated_at":"2026-02-11T02:10:44Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.9","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.90","title":"Plan: Move --validate-seeds (Task 36) earlier in plan","description":"**PR:** #69 | **File:** docs/plans/2026-02-06-full-abac-implementation.md (Task 36)\n**Finding:** Task 36 (--validate-seeds CLI flag) only needs the compiler and seed policy definitions. It could be done right after Task 21 (Phase 7.4) rather than at the end of Phase 7.7. Having it early enables CI validation of seed policies during development of later phases.\n**Decision:** Move to Phase 7.4 after Task 22.\n**Related files:** docs/plans/2026-02-06-full-abac-implementation.md","acceptance_criteria":"- [ ] Task 36 moved to Phase 7.4 (after Task 22)\n- [ ] CI validation of seed policies enabled during later phase development","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T17:29:21Z","created_by":"seanb4t","updated_at":"2026-02-07T18:08:22Z","closed_at":"2026-02-07T18:08:22Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.90","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.91","title":"Plan: Prometheus metric cardinality risk with policy name label","description":"**PR:** #69 | **File:** docs/plans/2026-02-06-full-abac-implementation.md (Task 19, lines 1768-1858)\n**Finding:** The `abac_policy_evaluations_total` counter uses `name` as a label. With unbounded admin-created policy names, this creates a cardinality explosion risk in Prometheus. Each unique policy name creates a new time series.\n**Decision:** Recommend using `source` label (seed/lock/admin/plugin) instead, or document the cardinality concern with mitigation advice.\n**Related files:** internal/access/policy/ metrics","acceptance_criteria":"- [ ] `name` label replaced with `source` (seed/lock/admin/plugin) OR\n- [ ] Cardinality concern documented with mitigation (relabeling, series limits)\n- [ ] Metric design reviewed for unbounded label values","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T17:29:22Z","created_by":"seanb4t","updated_at":"2026-02-07T18:08:22Z","closed_at":"2026-02-07T18:08:22Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.91","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.92","title":"Plan: Add graceful shutdown coverage for LISTEN/NOTIFY and audit channel","description":"**PR:** #69 | **File:** docs/plans/2026-02-06-full-abac-implementation.md (Tasks 17-18)\n**Finding:** No task addresses graceful shutdown of:\n1. LISTEN/NOTIFY goroutine in PolicyCache (uses context.Context for cancellation)\n2. Async audit channel consumer goroutine\n3. Draining audit channel before shutdown to avoid losing buffered entries\nThe WAL file also needs proper close-on-shutdown handling.\n**Decision:** Add shutdown acceptance criteria to relevant tasks.\n**Related files:** internal/access/policy/cache.go, internal/access/policy/audit/","acceptance_criteria":"- [ ] PolicyCache shutdown via context cancellation documented\n- [ ] Audit channel drain logic before shutdown specified\n- [ ] WAL file close-on-shutdown handling documented\n- [ ] Shutdown order: stop accepting -\u003e drain channel -\u003e close WAL -\u003e close LISTEN","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T17:29:22Z","created_by":"seanb4t","updated_at":"2026-02-07T18:08:22Z","closed_at":"2026-02-07T18:08:22Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.92","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.93","title":"Plan: Missing policy test audit logging requirement in Task 27","description":"**PR:** #69 | **File:** docs/plans/2026-02-06-full-abac-implementation.md (Task 27)\n**Finding:** Spec (lines 2790-2794) requires all `policy test` invocations MUST be logged to the audit log with specific metadata fields. This is a security requirement for reconnaissance detection - if someone tests policies to probe the authorization system, it should be visible in audit logs.\n**Decision:** Add to Task 27 acceptance criteria.\n**Related files:** internal/access/policy/audit/, admin command handlers","acceptance_criteria":"- [ ] Task 27 acceptance criteria includes: all policy test invocations audit logged\n- [ ] Metadata fields per spec lines 2790-2794\n- [ ] Security justification noted (reconnaissance detection)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T17:29:22Z","created_by":"seanb4t","updated_at":"2026-02-07T18:08:22Z","closed_at":"2026-02-07T18:08:22Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.93","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.94","title":"Plan: Add dedicated PropertyProvider parent_location benchmark","description":"**PR:** #69 | **File:** docs/plans/2026-02-06-full-abac-implementation.md (Task 20, lines 1862-1937)\n**Finding:** Task 20 benchmarks the engine and attribute resolution generically. The recursive CTE for parent_location is a known performance hotspot with depth-dependent latency. A dedicated benchmark would provide visibility into the containment depth vs. latency curve and validate the 100ms timeout is appropriate.\n**Decision:** Add PropertyProvider-specific benchmark to Task 20 or as separate sub-task.\n**Related files:** internal/access/policy/attribute/property.go","acceptance_criteria":"- [ ] Dedicated PropertyProvider parent_location benchmark added\n- [ ] Benchmark covers varying containment depths (1, 5, 10, 20)\n- [ ] Results validate 100ms timeout appropriateness\n- [ ] Circuit breaker behavior under load verified","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T17:29:22Z","created_by":"seanb4t","updated_at":"2026-02-07T18:08:22Z","closed_at":"2026-02-07T18:08:22Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.94","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5k1.94","depends_on_id":"holomush-5k1.73","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.95","title":"C1: Lock compilation generates forbid instead of permit policies","description":"PR #69 review finding (Critical). Task 25 acceptance criteria and Task 30 integration test state that locks compile to forbid policies. Spec line 2573 explicitly says locks generate permit policies scoped to the resource/action. This is a semantic inversion — locks would deny access instead of granting it, opposite to player intent. The spec's lock compilation example (lines 2578-2589) shows the output is a permit policy with conditions. Fix: Rewrite all lock task acceptance criteria and test expectations in Tasks 25 and 30 to generate permit policies matching the spec's compilation example.","acceptance_criteria":"- [ ] Task 25 acceptance criteria specify locks compile to permit policies\n- [ ] Task 25 test expectations check for permit effect\n- [ ] Task 30 integration test expects permit policy from lock compilation\n- [ ] Lock DSL examples in plan match spec lines 2578-2589","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T18:38:47Z","created_by":"seanb4t","updated_at":"2026-02-07T19:18:43Z","closed_at":"2026-02-07T19:18:43Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.95","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.96","title":"C2: Circuit breaker parameters contradict spec","description":"PR #69 review finding (Critical). Task 34 defines the general circuit breaker as '10 consecutive errors → circuit opens, skip provider for 30s'. Spec lines 1833-1843 define it differently: \u003e80% budget utilization in \u003e50% of calls (min 10 calls) over a 60-second rolling window, skip for 60s. The plan conflates the failure threshold parameter table (line 1547) with the actual general circuit breaker definition. Fix: Rewrite Task 34 acceptance criteria to match the spec's percentage-based budget utilization trigger.","acceptance_criteria":"- [ ] Task 34 trigger uses \u003e80% budget utilization in \u003e50% of calls\n- [ ] Minimum 10 calls before circuit can open\n- [ ] 60-second rolling window for evaluation\n- [ ] Skip provider for 60 seconds when circuit opens\n- [ ] No reference to consecutive error counting","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T18:38:53Z","created_by":"seanb4t","updated_at":"2026-02-07T19:18:43Z","closed_at":"2026-02-07T19:18:43Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.96","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.97","title":"C3: seed:catch-all-deny forbid policy not in spec","description":"PR #69 review finding (Critical). Task 22 defines '15 seed policies (14 permit + 1 forbid catch-all)' including seed:catch-all-deny. Spec seed policies section (lines 2929-2999) lists exactly 14 policies, all permit. The spec relies on EffectDefaultDeny (no policy matched = denied) as the catch-all mechanism. Adding an explicit forbid changes audit semantics — EffectDeny vs EffectDefaultDeny are distinguished for filtering (spec line 384). Fix: Remove seed:catch-all-deny from Task 22, update count to 14 seed policies.","acceptance_criteria":"- [ ] Task 22 lists exactly 14 permit seed policies\n- [ ] No forbid catch-all seed policy exists\n- [ ] Seed policy count updated from 15 to 14\n- [ ] Default-deny behavior relies on EffectDefaultDeny, not explicit forbid","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T18:38:57Z","created_by":"seanb4t","updated_at":"2026-02-07T19:18:43Z","closed_at":"2026-02-07T19:18:43Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.97","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.98","title":"I1: 9-step vs 7-step evaluation algorithm mismatch","description":"PR #69 review finding (Important). Task 17 claims to implement a '9-step evaluation algorithm from the spec' but the spec defines 7 steps: (1) System bypass, (2) Session resolution, (3) Resolve attributes, (4) Find applicable policies, (5) Evaluate conditions, (6) Combine decisions (deny-overrides), (7) Audit. The plan adds 'Caller invokes Evaluate' as step 1 and 'Return decision' as step 9 which are function signature, not algorithm steps. Fix: Change '9-step' to '7-step' and align step numbers with spec. Remove steps 1 and 9 from code skeleton.","acceptance_criteria":"- [ ] Task 17 references '7-step algorithm' (not 9-step)\n- [ ] Code skeleton uses spec steps 1-7\n- [ ] No separate steps for function entry/return","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T18:39:09Z","created_by":"seanb4t","updated_at":"2026-02-07T19:18:44Z","closed_at":"2026-02-07T19:18:44Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.98","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5k1.99","title":"I2: Critical path description inaccurate for Phase 7.1","description":"PR #69 review finding (Important). Critical path states 'Task 1 → Task 4 → Task 7' but Mermaid diagram shows T1 and T3→T4 as parallel feeds into T7. No T1→T4 edge exists. The longest path through Phase 7.1 is T3→T4→T7 (3 tasks), not T1→T4→T7. Fix: Update critical path to 'Task 3 → Task 4 → Task 7 → Task 12 → Task 17 → Task 18 → Task 23 → Task 28 → Task 29'.","acceptance_criteria":"- [ ] Critical path starts with Task 3, not Task 1\n- [ ] Critical path reads: Task 3 → Task 4 → Task 7 → Task 12 → ...\n- [ ] Mermaid diagram is consistent with stated critical path","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T18:39:14Z","created_by":"seanb4t","updated_at":"2026-02-07T19:18:44Z","closed_at":"2026-02-07T19:18:44Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-5k1.99","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5rh","title":"Epic 9: Scenes \u0026 RP","description":"Scene management for narrative play, visibility isolation, logging.\n\n**Goal:** Enable structured roleplay with scene isolation.\n\n**Visibility Model:**\nLocation: 'The Tavern'\n├── Real-time (no scene) ← new arrivals land here\n├── Scene #42 'Secret Meeting' ← isolated\n└── Scene #87 'Bar Fight' ← isolated\n\n**Scene Metadata:**\n- Visibility: public, private, unlisted\n- Tags: combat, mature, social, plot, custom\n\n**Phases:**\n- 9.1: Scene schema\n- 9.1b: Scene metadata\n- 9.2: Visibility isolation\n- 9.3: Scene commands\n- 9.4: Scene logging\n- 9.5: Web portal: Scenes\n- 9.6: Forum integration\n\n**Acceptance Criteria:**\n- [ ] Create/join/leave scenes works\n- [ ] Tags and visibility (public/private/unlisted) work\n- [ ] Scene participants only see each other\n- [ ] scene create/join/leave/end commands work\n- [ ] Events captured and exportable\n- [ ] Web portal shows active scenes and logs\n- [ ] Scene requests and scheduling via forums","status":"open","priority":2,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:27:44Z","created_by":"seanb4t","updated_at":"2026-01-19T01:27:44Z","dependencies":[{"issue_id":"holomush-5rh","depends_on_id":"holomush-qve","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5rh.1","title":"[E9] Design: Scenes \u0026 RP Architecture","description":"Design the architecture for HoloMUSH's scene and roleplay system.\n\n## Acceptance Criteria\n\n- [ ] Define scene data model (schema, relationships to rooms/characters)\n- [ ] Design scene lifecycle states (creating, active, paused, ended)\n- [ ] Specify visibility isolation model (who sees what)\n- [ ] Define scene metadata structure (tags, visibility levels)\n- [ ] Design scene logging and export format\n- [ ] Document integration points with event system\n- [ ] Specify ABAC policies for scene operations\n- [ ] Address multi-room scenes if applicable\n- [ ] Consider web portal and forum integration requirements","status":"open","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:32:14Z","created_by":"seanb4t","updated_at":"2026-01-19T01:32:14Z","dependencies":[{"issue_id":"holomush-5rh.1","depends_on_id":"holomush-5rh","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5rh.2","title":"[E9] Implementation Plan: Scenes \u0026 RP","description":"Create detailed implementation plan for the Scenes \u0026 RP system based on the approved design.\n\n## Acceptance Criteria\n\n- [ ] Break down work into implementable tasks\n- [ ] Define test strategy for each component\n- [ ] Identify shared dependencies across phases\n- [ ] Estimate effort for each phase\n- [ ] Document migration path if modifying existing schemas\n- [ ] Specify integration test requirements\n- [ ] Plan for backward compatibility","status":"open","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:32:18Z","created_by":"seanb4t","updated_at":"2026-01-19T01:32:18Z","dependencies":[{"issue_id":"holomush-5rh.2","depends_on_id":"holomush-5rh","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5rh.2","depends_on_id":"holomush-5rh.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5rh.3","title":"[E9.1] Scene Schema - Create/Join/Leave Scenes","description":"Implement the core scene schema and basic scene operations.\n\n## Acceptance Criteria\n\n- [ ] Scene table with ID, name, location, creator, status, timestamps\n- [ ] Scene participants junction table\n- [ ] CreateScene operation with validation\n- [ ] JoinScene operation with permission checks\n- [ ] LeaveScene operation with cleanup\n- [ ] Scene status transitions (active, paused, ended)\n- [ ] Unit tests for all operations (\u003e80% coverage)\n- [ ] Integration tests for scene lifecycle","status":"open","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:32:23Z","created_by":"seanb4t","updated_at":"2026-01-19T01:32:23Z","dependencies":[{"issue_id":"holomush-5rh.3","depends_on_id":"holomush-5rh","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5rh.3","depends_on_id":"holomush-5rh.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5rh.3","depends_on_id":"holomush-5rh.2","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5rh.4","title":"[E9.1b] Scene Metadata - Tags, Visibility","description":"Add metadata support to scenes including tags and visibility settings.\n\n## Acceptance Criteria\n\n- [ ] Scene tags table with many-to-many relationship\n- [ ] Visibility enum: public, private, unlisted\n- [ ] Tag CRUD operations\n- [ ] Visibility change operation with permission checks\n- [ ] Filter scenes by tag\n- [ ] Filter scenes by visibility (for listings)\n- [ ] ABAC policies for visibility changes\n- [ ] Unit tests for metadata operations","status":"open","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:32:28Z","created_by":"seanb4t","updated_at":"2026-01-19T01:32:28Z","dependencies":[{"issue_id":"holomush-5rh.4","depends_on_id":"holomush-5rh","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5rh.4","depends_on_id":"holomush-5rh.3","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5rh.5","title":"[E9.2] Visibility Isolation - Scene Participants Only","description":"Implement visibility isolation so scene participants only see each other.\n\n## Acceptance Criteria\n\n- [ ] Scene context added to event routing\n- [ ] Non-participants filtered from scene events\n- [ ] Scene participants see each other's poses/says\n- [ ] Room contents filtered by scene membership\n- [ ] Who/where commands respect scene isolation\n- [ ] Exit/enter notifications scoped to scene\n- [ ] Integration tests for isolation scenarios\n- [ ] Edge cases: overlapping scenes, leaving mid-scene","status":"open","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:32:35Z","created_by":"seanb4t","updated_at":"2026-01-19T01:32:35Z","dependencies":[{"issue_id":"holomush-5rh.5","depends_on_id":"holomush-5rh","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5rh.5","depends_on_id":"holomush-5rh.4","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5rh.6","title":"[E9.3] Scene Commands - create, join, leave, end","description":"Implement user-facing scene commands.\n\n## Acceptance Criteria\n\n- [ ] scene create \u003cname\u003e [--private|--unlisted] [--tags=...]\n- [ ] scene join \u003cscene-id|scene-name\u003e\n- [ ] scene leave (exit current scene)\n- [ ] scene end (creator/staff only)\n- [ ] scene list [--mine|--public|--all]\n- [ ] scene info \u003cscene-id\u003e\n- [ ] scene invite \u003cplayer\u003e\n- [ ] Help text for all commands\n- [ ] Error messages for invalid operations\n- [ ] Unit tests for command parsing\n- [ ] Integration tests for command execution","status":"open","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:32:40Z","created_by":"seanb4t","updated_at":"2026-01-19T01:32:40Z","dependencies":[{"issue_id":"holomush-5rh.6","depends_on_id":"holomush-5rh","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5rh.6","depends_on_id":"holomush-5rh.5","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5rh.7","title":"[E9.4] Scene Logging - Events Captured, Exportable","description":"Implement scene event logging and export functionality.\n\n## Acceptance Criteria\n\n- [ ] Scene events automatically captured during scene\n- [ ] Scene log table with event references\n- [ ] scene log \u003cscene-id\u003e command to view logs\n- [ ] Export format: plain text, markdown, HTML\n- [ ] scene export \u003cscene-id\u003e [--format=...]\n- [ ] Privacy controls: only participants can export\n- [ ] Staff override for moderation\n- [ ] Pagination for long scenes\n- [ ] Include timestamps and participant names\n- [ ] Unit tests for log capture\n- [ ] Integration tests for export formats","status":"open","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:32:45Z","created_by":"seanb4t","updated_at":"2026-01-19T01:32:45Z","dependencies":[{"issue_id":"holomush-5rh.7","depends_on_id":"holomush-5rh","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5rh.7","depends_on_id":"holomush-5rh.6","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5rh.8","title":"[E9.5] Web Portal: Scenes - Browse Active, View Logs","description":"Add scene browsing and log viewing to the web portal.\n\n## Acceptance Criteria\n\n- [ ] Active scenes list page (public scenes)\n- [ ] Scene detail page with metadata\n- [ ] Scene log viewer (formatted, readable)\n- [ ] My scenes page (scenes I participate in)\n- [ ] Scene search/filter by tag\n- [ ] Export download (txt, md, html)\n- [ ] Real-time scene updates via WebSocket\n- [ ] Mobile-responsive design\n- [ ] Accessibility compliance\n- [ ] Integration with existing auth","status":"open","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:32:51Z","created_by":"seanb4t","updated_at":"2026-01-19T01:32:51Z","dependencies":[{"issue_id":"holomush-5rh.8","depends_on_id":"holomush-5rh","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5rh.8","depends_on_id":"holomush-5rh.7","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5rh.9","title":"[E9.6] Forum Integration - Scene Requests, Scheduling","description":"Integrate scenes with the forum system for requests and scheduling.\n\n## Acceptance Criteria\n\n- [ ] Scene request forum category\n- [ ] Request template (participants, theme, timing)\n- [ ] Scene scheduling with calendar integration\n- [ ] Notification when scheduled scene starts\n- [ ] Link forum thread to scene instance\n- [ ] Post scene summary to thread when ended\n- [ ] Scene interest/RSVP functionality\n- [ ] Timezone-aware scheduling\n- [ ] Reminder notifications\n- [ ] Integration tests for forum linkage","status":"open","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:32:56Z","created_by":"seanb4t","updated_at":"2026-01-19T01:32:56Z","dependencies":[{"issue_id":"holomush-5rh.9","depends_on_id":"holomush-5rh","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-5rh.9","depends_on_id":"holomush-5rh.8","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-5viy","title":"[E4-Post] Add integration test for concurrent seed execution","description":"**Source:** PR review - test coverage analysis\n\n**Problem:**\nThe acceptance criteria specifies \"CLI seeding (idempotency, concurrent execution)\" but there are no integration tests verifying concurrent seed command execution against a real database.\n\nThe unit tests verify idempotency via unique constraint handling, but there is no test that runs two seed commands simultaneously to verify race condition safety.\n\n**What it would catch:**\nRace conditions where two parallel `holomush seed` commands could both pass the \"does it exist?\" check before either creates the record, leading to duplicate creation attempts or data corruption.\n\n**Acceptance Criteria:**\n- [ ] Integration test spawns 2-3 goroutines executing seed concurrently\n- [ ] Uses testcontainers PostgreSQL instance\n- [ ] Verifies exactly one location is created\n- [ ] Verifies no errors occur (unique violation handled gracefully)\n- [ ] Test located in `test/integration/cli/seed_test.go`","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T21:44:13Z","created_by":"seanb4t","updated_at":"2026-01-25T22:13:20Z","closed_at":"2026-01-25T22:13:20Z","work_type":"mutex"}
{"id":"holomush-5zk2","title":"Fix building integration tests: handler error assertions","description":"5 building integration tests in test/integration/building/building_test.go expect err==nil from handlers when passing invalid input, but handlers correctly return ErrInvalidArgs. Tests assert Expect(err).NotTo(HaveOccurred()) then check output for error messages, but the error is returned not written to output.\n\nFailing tests:\n- 'returns error for invalid syntax' (line 96) - input 'object MissingSword' (no quotes)\n- 'returns error for unknown type' (line 134) - input 'widget Something'\n- 'returns error for unknown property' (line 233) - input 'xyz of here to value'\n- 'returns error for invalid target' (line 250) - input 'description of nonexistent to value'\n- 'returns error for invalid ID reference' (line 268) - input 'description of #invalid-id to value'\n\nFix: Change assertions to expect the error and verify error code/message instead of checking output.","notes":"label: broken-on-main","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-14T20:56:46Z","created_by":"seanb4t","updated_at":"2026-02-14T21:20:37Z","closed_at":"2026-02-14T21:20:37Z","close_reason":"Fixed in 93431ab on feat/abac-phase-7.6-migration","labels":["broken-on-main"]}
{"id":"holomush-5zm0","title":"Rename MigratorIface to idiomatic Go interface name","description":"## Problem\n\n`MigratorIface` uses the `-Iface` suffix which is non-idiomatic in Go. Per Go conventions, interfaces should be named after what they do (e.g., `Reader`, `Writer`) or just the noun if it's clear.\n\n**File:** `cmd/holomush/migrate.go:19-29`\n\n## Options\n\n1. Rename to `migrator` (unexported) since it's only used in tests\n2. Rename to `MigrationRunner` if exported is needed\n3. Add comment explaining relationship to `store.Migrator`\n\n## Acceptance Criteria\n\n- [ ] Rename interface following Go conventions\n- [ ] Update all references\n- [ ] Add doc comment explaining the interface purpose","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T19:00:22Z","created_by":"seanb4t","updated_at":"2026-01-25T19:41:02Z","closed_at":"2026-01-25T19:41:02Z","work_type":"mutex"}
{"id":"holomush-61to","title":"ABAC Review C3: Switch to equal-share provider timeout allocation","description":"Issue: Fair-share timeout lets slow front-of-queue providers starve later providers. Core providers register first, squeezing plugin providers. Decision: Equal-share: each provider gets total_budget / provider_count. Unused budget not redistributed. AC: (1) Spec updated with equal-share math (2) Tradeoff documented (3) Example calculation. Ref: docs/specs/2026-02-05-full-abac-design.md:1422-1435.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:09Z","created_by":"seanb4t","updated_at":"2026-02-06T17:19:00Z","closed_at":"2026-02-06T17:19:00Z","dependencies":[{"issue_id":"holomush-61to","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-62v","title":"Add scene existence check to SceneRepository methods","description":"## Problem\n\nSceneRepository methods don't verify the scene exists before operating:\n- `ListParticipants` returns empty slice for non-existent scene instead of `ErrNotFound`\n- `AddParticipant` may silently succeed for non-existent scene (depends on FK constraints)\n- Inconsistent with `RemoveParticipant` which correctly returns `ErrNotFound`\n\n**Location:** `internal/world/postgres/scene_repo.go:28-42, 66-102`\n\n## Acceptance Criteria\n\n- [ ] `ListParticipants` returns `world.ErrNotFound` if scene doesn't exist\n- [ ] `AddParticipant` returns `world.ErrNotFound` if scene doesn't exist\n- [ ] Tests verify both methods return `ErrNotFound` for non-existent scenes\n- [ ] Tests verify `errors.Is(err, world.ErrNotFound)` works for these errors\n- [ ] Existing tests continue to pass\n\n## Implementation Notes\n\nAdd existence check before operations:\n```go\nvar exists bool\nerr := r.pool.QueryRow(ctx, \n    `SELECT EXISTS(SELECT 1 FROM locations WHERE id = $1 AND type = 'scene')`,\n    sceneID.String()).Scan(\u0026exists)\nif \\!exists {\n    return nil, oops.With(\"scene_id\", sceneID.String()).Wrap(world.ErrNotFound)\n}\n```","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T19:52:25Z","created_by":"seanb4t","updated_at":"2026-01-24T20:05:56Z","closed_at":"2026-01-24T20:05:56Z","work_type":"mutex"}
{"id":"holomush-66g","title":"Add oops.Code() to circular/nesting containment errors","description":"## Problem\n\nHelper methods `checkCircularContainmentTx` and `checkNestingDepthTx` return errors using `oops.Errorf()` without error codes. When these bubble up through `Move()`, they lack proper codes for categorization.\n\n**Location:** `internal/world/postgres/object_repo.go:254-293, 295-348`\n\n## Acceptance Criteria\n\n- [ ] `checkCircularContainmentTx` returns errors with `oops.Code(\"CIRCULAR_CONTAINMENT\")`\n- [ ] `checkNestingDepthTx` returns errors with `oops.Code(\"NESTING_DEPTH_EXCEEDED\")`\n- [ ] Service layer `MoveObject` maps these codes appropriately (or passes them through)\n- [ ] Tests verify error codes are present using `errutil.AssertErrorCode()`\n- [ ] Existing tests continue to pass\n\n## Implementation Notes\n\nChange from:\n```go\nreturn oops.With(\"operation\", \"move object\").Errorf(\"circular containment...\")\n```\n\nTo:\n```go\nreturn oops.Code(\"CIRCULAR_CONTAINMENT\").With(\"operation\", \"move object\").Errorf(\"circular containment...\")\n```","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T19:52:25Z","created_by":"seanb4t","updated_at":"2026-01-24T20:05:56Z","closed_at":"2026-01-24T20:05:56Z","work_type":"mutex"}
{"id":"holomush-66t","title":"Update NewExtismSubscriber signature in architecture doc","description":"## Problem\ndocs/plans/2026-01-17-holomush-architecture-design.md shows old 2-parameter NewExtismSubscriber signature but code now takes 3 parameters (ctx, host, emitter).\n\n## Acceptance Criteria\n- [ ] Update architecture doc with correct signature\n- [ ] Verify no other stale signatures in documentation\n- [ ] Independent code review before closing","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T15:36:27Z","created_by":"seanb4t","updated_at":"2026-01-18T15:58:28Z","closed_at":"2026-01-18T15:58:28Z","work_type":"mutex"}
{"id":"holomush-68ig","title":"Add unit test for postgresql:// URL scheme conversion","description":"## Problem\n\nThe code handles `postgresql://` scheme conversion but this path is not tested. Integration tests only use `postgres://` (from testcontainers).\n\n**File:** `internal/store/migrate.go:64`\n\n```go\n} else if rest, found := strings.CutPrefix(databaseURL, \"postgresql://\"); found {\n    migrateURL = \"pgx5://\" + rest\n}\n```\n\n## Risk\n\nRegression if `postgresql://` handling is accidentally removed during refactoring.\n\n## Acceptance Criteria\n\n- [ ] Add unit test verifying `postgresql://` is converted to `pgx5://`\n- [ ] Test should mock underlying migrate library to focus on URL transformation\n- [ ] Consider adding integration test with `postgresql://` prefix","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T19:00:21Z","created_by":"seanb4t","updated_at":"2026-01-25T19:35:20Z","closed_at":"2026-01-25T19:35:20Z","work_type":"mutex"}
{"id":"holomush-6eh","title":"Fix incorrect event type example in plugin-authoring.md","description":"## Summary\nThe plugin-authoring.md documentation incorrectly lists \"emit\" as a valid event type.\n\n## Location\n`docs/reference/plugin-authoring.md:104`\n\n## Current (Incorrect)\n```markdown\n| `type`       | string | Event type (e.g., \"say\", \"pose\", \"emit\")    |\n```\n\n## Expected\n```markdown\n| `type`       | string | Event type (e.g., \"say\", \"pose\", \"arrive\")  |\n```\n\n## Acceptance Criteria\n- [ ] Add test that validates documented event types match code (internal/core/event.go)\n- [ ] Fix the documentation to use valid event types\n- [ ] Test passes proving the fix is correct\n- [ ] Independent review by subagent confirms fix","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T17:13:23Z","created_by":"seanb4t","updated_at":"2026-01-18T17:26:14Z","closed_at":"2026-01-18T17:26:14Z","work_type":"mutex"}
{"id":"holomush-6gr","title":"Add error code assertions to integration tests","description":"## Problem\nThe integration test verifies functionality but doesn't check that errors have the correct oops error codes.\n\n## Source\nPR Review: pr-test-analyzer agent\n\n## Location\n\\`internal/store/migrate_integration_test.go\\`\n\n## Current State\nIntegration test uses \\`require.NoError(t, err)\\` but doesn't verify error codes when errors occur.\n\n## Suggested Improvement\nAdd error code assertions similar to \\`migrate_test.go:17\\`:\n\n```go\nerrutil.AssertErrorCode(t, err, \"EXPECTED_CODE\")\n```\n\n## Error Codes to Verify\n- MIGRATION_UP_FAILED\n- MIGRATION_DOWN_FAILED\n- MIGRATION_STEPS_FAILED\n- MIGRATION_FORCE_FAILED\n\n## Challenge\nNeed to trigger errors in integration test, which requires:\n- Invalid migration files, or\n- Database state manipulation\n\n## Acceptance Criteria\n- [ ] Add at least one error code verification\n- [ ] Document which codes are verified\n- [ ] Tests pass: \\`task test:integration\\`","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T13:52:18Z","created_by":"seanb4t","updated_at":"2026-01-25T14:48:42Z","closed_at":"2026-01-25T14:48:42Z","work_type":"mutex"}
{"id":"holomush-6h2o","title":"Decisions: Add lock expression parser fuzz target to Decision #47","description":"**Review Finding: S9 (Suggestion)**\n\nDecision #47 adds fuzz testing for parser.Parse() but the DSL has two parsers: policy DSL parser and lock expression parser. Lock expressions accept player input and should also be fuzzed.\n\n**Location:** Decisions doc, Decision #47\n\n**Acceptance Criteria:**\n- Add note: lock expression parser SHOULD also have a fuzz test (FuzzParseLock)\n- Lock expressions accept player input and must handle malformed input gracefully","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T14:06:06Z","created_by":"seanb4t","updated_at":"2026-02-06T14:34:19Z","closed_at":"2026-02-06T14:34:19Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-6h2o","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-6hpu","title":"Add consolidated reserved prefix table to ABAC spec","description":"Reserved prefixes for policy names (seed:, lock:), subject strings (character:, plugin:, system, session:), and resource strings are scattered across the 3,200-line spec. An implementer building validation logic would need to find all of these.\n\n**Acceptance Criteria:**\n- [ ] Consolidated table listing all reserved prefixes (policy name, subject, resource, policy ID)\n- [ ] Placed in Key Design Decisions or Core Interfaces section\n\n**Files:** docs/specs/2026-02-05-full-abac-design.md","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T22:37:29Z","created_by":"seanb4t","updated_at":"2026-02-07T00:24:01Z","closed_at":"2026-02-07T00:24:01Z","labels":["review-finding"],"work_type":"mutex"}
{"id":"holomush-6me","title":"Complete goreleaser + Taskfile + release-please integration","description":"Add Taskfile tasks for local goreleaser testing.\n\n**Files to modify:**\n- `Taskfile.yaml` - add release:check and release:snapshot tasks\n\n**Acceptance Criteria:**\n- [ ] `task release:check` runs successfully with output containing \"config is valid\"\n- [ ] `task release:snapshot` builds snapshot without errors\n- [ ] Code reviewed and approved by independent agent\n\n**Reference:** docs/plans/2026-01-17-goreleaser-docker-compose-plan.md (Task 1)","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T00:20:56Z","created_by":"seanb4t","updated_at":"2026-01-18T01:50:29Z","closed_at":"2026-01-18T01:50:29Z","dependencies":[{"issue_id":"holomush-6me","depends_on_id":"holomush-rsl","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-6r0","title":"Fix incorrect actor_kind values in plugin-authoring.md","description":"## Problem\nDocumentation in docs/reference/plugin-authoring.md shows actor_kind as string values but code uses int constants:\n- 0 = character\n- 1 = system  \n- 2 = plugin\n\n## Acceptance Criteria\n- [ ] Update documentation to show correct int values\n- [ ] Add test that validates documentation matches core.ActorKind constants\n- [ ] Independent code review before closing","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T15:36:20Z","created_by":"seanb4t","updated_at":"2026-01-18T15:58:28Z","closed_at":"2026-01-18T15:58:28Z","work_type":"mutex"}
{"id":"holomush-6ryp","title":"Decisions: Add worked example to Decision #28 (missing attribute semantics)","description":"**Review Finding: I2 (Important)**\n\nDecision #28 states ALL comparisons involving missing attributes evaluate to false, including \\!=. The phrasing could be misread as 'the permit applies' when it means the opposite. A worked example showing the full control flow would prevent misunderstanding.\n\n**Location:** Decisions doc, Decision #28\n\n**Acceptance Criteria:**\n- Add worked example showing: principal.faction \\!= 'enemy' with missing faction\n- Example traces: comparison → false → when condition unsatisfied → permit doesn't match → default deny\n- Explicitly states 'this is the desired behavior — missing attributes always fail-closed'","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T14:04:44Z","created_by":"seanb4t","updated_at":"2026-02-06T14:25:48Z","closed_at":"2026-02-06T14:25:48Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-6ryp","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-6uvb","title":"Auth: Fix race condition in password reset tokens","description":"Multiple reset requests create multiple valid tokens. Delete existing tokens before creating new one to ensure only one valid token per player at any time. Security risk: intercepted old token may remain valid if cleanup fails.","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T01:29:08Z","created_by":"seanb4t","updated_at":"2026-02-02T01:43:51Z","closed_at":"2026-02-02T01:43:51Z","dependencies":[{"issue_id":"holomush-6uvb","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-6zev","title":"Auth: Add NewPlayer constructor with validation","description":"Player type has no constructor to enforce invariants. All fields are exported allowing invalid state. Add NewPlayer(username, passwordHash string) (*Player, error) that validates all required fields. Consider making PasswordHash unexported.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T01:29:26Z","created_by":"seanb4t","updated_at":"2026-02-02T02:10:11Z","closed_at":"2026-02-02T02:10:11Z","dependencies":[{"issue_id":"holomush-6zev","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-72r","title":"Add service layer with ABAC authorization","description":"CRITICAL: Repositories perform no authorization checks. Create WorldService layer wrapping repositories with ABAC checks. All mutations must verify subject permissions before calling repository methods.","status":"closed","priority":0,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T00:26:09Z","created_by":"seanb4t","updated_at":"2026-01-24T00:37:42Z","closed_at":"2026-01-24T00:37:42Z","work_type":"mutex"}
{"id":"holomush-75um","title":"Update audit 'off' mode description to 'System bypasses only'","description":"The spec requires system_bypass logging in ALL modes including 'off', but 'off' is defined as 'Nothing logged'. These contradict each other.\n\n**Decision:** Change 'off' mode description from 'Nothing' to 'System bypasses only'. Preserves the security intent of always logging bypass use.\n\n**Acceptance Criteria:**\n- [ ] Audit mode table updated: 'off' description changed to 'System bypasses only'\n- [ ] No other references to 'off' mode claim 'Nothing logged'\n\n**Files:** docs/specs/2026-02-05-full-abac-design.md","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T22:37:02Z","created_by":"seanb4t","updated_at":"2026-02-06T23:12:31Z","closed_at":"2026-02-06T23:12:31Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-75um","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-763z","title":"Add Effect enum validation to prevent invalid values","description":"PR #88 review noted the Effect type (int) accepts any value without validation. Consider adding a Valid() method or validation in NewDecision() to reject unknown effect values.","notes":"External ref: https://github.com/holomush/holomush/pull/88#issuecomment-3904727321","status":"open","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-15T23:10:34Z","created_by":"seanb4t","updated_at":"2026-02-15T23:19:29Z","labels":["deferred-work","review-finding"],"dependencies":[{"issue_id":"holomush-763z","depends_on_id":"holomush-5k1.8","type":"parent-child","created_at":"2026-02-15T18:19:21Z","created_by":"seanb4t","metadata":"{}"}]}
{"id":"holomush-7cb","title":"Verify DB environment variables implementation","description":"Documentation in site/docs/operators/database.md (lines 81-87) lists these DB environment variables:\n- DB_MAX_CONNS\n- DB_MIN_CONNS  \n- DB_MAX_LIFETIME\n\nNeed to verify if these are actually implemented in the codebase and working as documented.\n\nAcceptance Criteria:\n1. MUST search codebase for references to these env vars\n2. MUST determine if implementation matches documentation\n3. IF implemented: MUST verify they work as documented\n4. IF not implemented: MUST either implement them OR update documentation to remove them\n5. MUST update documentation if any discrepancies found","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T16:40:09Z","created_by":"seanb4t","updated_at":"2026-01-25T17:14:39Z","closed_at":"2026-01-25T17:14:39Z","work_type":"mutex"}
{"id":"holomush-7ep","title":"Add debug logging for dropped events during shutdown","description":"## Problem\nextism_subscriber.go:54-56 silently drops events during shutdown with no visibility.\n\n## Acceptance Criteria\n- [ ] Add slog.Debug logging for dropped events\n- [ ] Include event_id and event_stream in log\n- [ ] Verify tests still pass\n- [ ] Independent code review before closing","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T16:10:30Z","created_by":"seanb4t","updated_at":"2026-01-18T16:49:28Z","closed_at":"2026-01-18T16:49:28Z","dependencies":[{"issue_id":"holomush-7ep","depends_on_id":"holomush-moi","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-7h4a","title":"Document --dry-run flag in operator migration docs","description":"## Problem\n\nThe operator documentation doesn't mention the `--dry-run` flag that exists on both `migrate up` and `migrate down` commands.\n\n**File:** `site/docs/operators/database.md:20-32`\n\n## Feature Location\n\n- `cmd/holomush/migrate.go:294` - `migrate up --dry-run`\n- `cmd/holomush/migrate.go:337` - `migrate down --dry-run`\n\n## Acceptance Criteria\n\n- [ ] Add `--dry-run` flag documentation to operator docs\n- [ ] Include example: `holomush migrate up --dry-run`\n- [ ] Explain that dry-run shows what would be applied without executing","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T19:00:21Z","created_by":"seanb4t","updated_at":"2026-01-25T19:26:53Z","closed_at":"2026-01-25T19:26:53Z","work_type":"mutex"}
{"id":"holomush-7jhn6","title":"[BACKLOG] Plugin stdlib for common Lua utilities","description":"**Context:** The communication plugin (and likely others) duplicate common patterns:\n- JSON field extraction (fragile pattern matching)\n- JSON escaping\n- Event construction helpers\n- Validation utilities\n\n**Proposal:** Create a plugin stdlib loaded automatically for all Lua plugins with:\n- json.parse() / json.encode() (proper JSON handling)\n- event.create(stream, type, payload) helper\n- validation utilities\n\n**Blocks:** Nothing immediately, but improves plugin development experience","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T21:04:12Z","created_by":"seanb4t","updated_at":"2026-02-03T00:44:32Z","closed_at":"2026-02-03T00:44:32Z","work_type":"mutex"}
{"id":"holomush-7lsn","title":"Clarify participle (PEG) vs LL(1) disambiguation relationship","description":"Phase 7.2 recommends participle (PEG-based parser) but decision #41 specifies LL(1) disambiguation with one-token lookahead. These are different parsing strategies. An implementer following both literally would be confused.\n\n**Acceptance Criteria:**\n- [ ] Clarify that decision #41 LL(1) disambiguation describes logical grammar design\n- [ ] Note that participle ordered-choice (PEG) semantics achieve the same effect\n- [ ] Implementers should verify ambiguity handling with test cases regardless of parser choice\n\n**Files:** docs/specs/2026-02-05-full-abac-design.md, docs/specs/2026-02-05-full-abac-design-decisions.md","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T22:37:08Z","created_by":"seanb4t","updated_at":"2026-02-06T23:47:58Z","closed_at":"2026-02-06T23:47:58Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-7lsn","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-7rz","title":"Add ParticipantRole type with validation","description":"HIGH: AddParticipant accepts any string for role. Add ParticipantRole type with constants (owner/member/invited) and Validate method. Update SceneRepository interface and implementation.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T00:26:11Z","created_by":"seanb4t","updated_at":"2026-01-24T00:51:51Z","closed_at":"2026-01-24T00:51:51Z","work_type":"mutex"}
{"id":"holomush-7s55","title":"ABAC Review I3: Define list attribute merge semantics as concatenate","description":"Issue: Two providers returning list attribute with same key have undefined merge behavior. Decision: Concatenate lists, preserving all values. Scalars remain last-registered-wins. AC: (1) Merge rules documented (2) Integration test requirement (3) Example shown. Ref: docs/specs/2026-02-05-full-abac-design.md:423-441.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:10Z","created_by":"seanb4t","updated_at":"2026-02-06T17:26:00Z","closed_at":"2026-02-06T17:26:00Z","dependencies":[{"issue_id":"holomush-7s55","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-82p","title":"Upgrade dropped-event logging from DEBUG to WARN","description":"## Problem\nextism_subscriber.go:66-70 logs dropped events during shutdown at DEBUG level. Since this is actual data loss, it should be WARN level to ensure visibility in production (where log level is typically INFO or higher).\n\n## Source\nPR Review Round 7 - silent-failure-hunter agent (HIGH severity)\n\n## Acceptance Criteria\n- [ ] Test proves issue exists (dropped events log at DEBUG)\n- [ ] Change slog.Debug to slog.Warn for dropped events\n- [ ] Verify production log visibility\n- [ ] Independent subagent review before closing","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T18:36:23Z","created_by":"seanb4t","updated_at":"2026-01-18T19:30:34Z","closed_at":"2026-01-18T19:30:34Z","work_type":"mutex"}
{"id":"holomush-8agz","title":"Decisions doc: Add new decisions from PR #65 review (C1, I1, S2)","description":"**Review-driven requirement**\n\nThree design decisions were made during the PR #65 architecture review that need to be documented in the decisions log alongside the existing 49 decisions:\n\n**Decision #50 — Plugin Attribute Collision Behavior:**\nWhen a plugin registers an attribute colliding with a core attribute, reject the plugin's provider registration and continue startup. Server remains operational. Log at ERROR. (Was: fatal startup error.)\n\n**Decision #51 — Session Integrity Error Classification:**\nsession-character-integrity errors indicate a bug (failed cascade deletion), not a normal operational condition. Log at CRITICAL level with alerting. Transactional MUST for session cleanup unchanged.\n\n**Decision #52 — Async Audit Writes:**\nAudit log inserts use async buffered channel. Evaluate() enqueues audit entry, background goroutine writes to PostgreSQL. Audit is best-effort, MUST NOT block authorization.\n\n**Location:** docs/specs/2026-02-05-full-abac-design-decisions.md\n\n**Acceptance Criteria:**\n- Three new decisions added to the decisions document following existing format\n- Each has: rationale, alternatives considered, and cross-references to the spec sections they affect\n- Decision numbering continues from #49 (or whatever the current last number is)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T14:06:32Z","created_by":"seanb4t","updated_at":"2026-02-06T14:28:44Z","closed_at":"2026-02-06T14:28:44Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-8agz","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-8agz","depends_on_id":"holomush-jfim","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-8agz","depends_on_id":"holomush-u2da","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-8agz","depends_on_id":"holomush-vok6","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-8cie","title":"Test bead","description":"test","status":"tombstone","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T20:21:06Z","created_by":"seanb4t","updated_at":"2026-02-06T20:21:10Z","work_type":"mutex"}
{"id":"holomush-8h5","title":"Fix import path typo in design doc","description":"## Problem\nDesign doc shows incorrect import path:\n\nDoc shows: `database/pgx5`\nActual: `database/pgx/v5`\n\n## Source\nPR Review: comment-analyzer agent\n\n## Location\n`docs/plans/2026-01-24-database-migrations-design.md:97`\n\n## Fix\nChange line 97 from:\n```go\n_ \"github.com/golang-migrate/migrate/v4/database/pgx5\"\n```\n\nTo:\n```go\n_ \"github.com/golang-migrate/migrate/v4/database/pgx/v5\"\n```\n\n## Acceptance Criteria\n- [ ] Import path matches actual implementation\n- [ ] Lint passes: `task lint:markdown`","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T04:13:51Z","created_by":"seanb4t","updated_at":"2026-01-25T13:41:27Z","closed_at":"2026-01-25T13:41:27Z","work_type":"mutex"}
{"id":"holomush-8onf","title":"[E5.8.3] Create contributor/operator auth documentation","description":"## Current State\n\nAuthentication documentation exists only in:\n- `docs/specs/2026-01-25-auth-identity-design.md` - Design spec (internal, partially outdated)\n- `internal/auth/doc.go` - Package-level Go docs (accurate but brief)\n\nNo public documentation exists in `site/docs/` for contributors or operators.\n\n## Gaps\n\n**For Contributors (`site/docs/contributors/`):**\n- No explanation of auth architecture or service responsibilities\n- No guidance on extending or modifying auth system\n- No links to key source files\n\n**For Operators (`site/docs/operators/`):**\n- No documentation on configuring authentication\n- No security hardening guidance\n- No rate limiting configuration docs\n\n## Acceptance Criteria\n\n- [ ] Create `site/docs/contributors/authentication.md` covering:\n  - [ ] Architecture overview (three-layer design)\n  - [ ] Service responsibilities (AuthService, CharacterService, PasswordResetService)\n  - [ ] Security features (timing attack prevention, argon2id, rate limiting)\n  - [ ] Links to source files (not duplicated code)\n  - [ ] Authentication flow diagrams\n\n- [ ] Create `site/docs/operators/authentication.md` covering:\n  - [ ] Configuration options (when configurable)\n  - [ ] Security considerations\n  - [ ] Rate limiting behavior\n  - [ ] Password reset setup\n\n- [ ] Documentation passes `task lint:markdown`\n- [ ] No duplicated code/schemas that will go stale\n- [ ] Appropriate cross-references between docs","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T15:10:49Z","created_by":"seanb4t","updated_at":"2026-02-02T15:39:25Z","closed_at":"2026-02-02T15:39:25Z","dependencies":[{"issue_id":"holomush-8onf","depends_on_id":"holomush-cri1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-8onf","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-8onf","depends_on_id":"holomush-odos","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-8qn17","title":"[E6.1b] Alias database migration","description":"Create PostgreSQL migration for system_aliases and player_aliases tables.\n\n**Acceptance Criteria:**\n- system_aliases table with alias (PK), command, created_at, created_by\n- player_aliases table with player_id + alias (composite PK), command, created_at\n- Foreign key to players table\n- Index on player_id for efficient lookup\n- Down migration drops tables\n\n**Files:** internal/store/migrations/000006_aliases.up.sql, internal/store/migrations/000006_aliases.down.sql","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T18:07:31Z","created_by":"seanb4t","updated_at":"2026-02-02T19:05:42Z","closed_at":"2026-02-02T19:05:42Z","dependencies":[{"issue_id":"holomush-8qn17","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-8rr","title":"Add test for malformed plugin response JSON","description":"## Summary\nDeliverEvent has JSON unmarshaling logic that could fail if a plugin returns invalid JSON, but this path is not tested.\n\n## Location\n`internal/wasm/extism_host.go:173`\n\n## Code Path\n```go\nif err := json.Unmarshal(output, \u0026response); err \\!= nil {\n    err = fmt.Errorf(\"failed to unmarshal response: %w\", err)\n    span.RecordError(err)\n    return nil, err\n}\n```\n\n## Acceptance Criteria\n- [ ] Create a test WASM module that returns malformed JSON\n- [ ] Write test verifying error is properly returned and logged\n- [ ] Test passes and demonstrates the error handling works correctly\n- [ ] Independent review by subagent confirms test coverage","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T17:13:47Z","created_by":"seanb4t","updated_at":"2026-01-18T17:43:42Z","closed_at":"2026-01-18T17:43:42Z","dependencies":[{"issue_id":"holomush-8rr","depends_on_id":"holomush-1xk","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-8ze8","title":"Auth: Add index on web_sessions.player_id","description":"GetByPlayer queries by player_id with ORDER BY created_at DESC. Without an index, this could become slow as sessions accumulate. Add: CREATE INDEX idx_web_sessions_player_id ON web_sessions(player_id);","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T01:29:18Z","created_by":"seanb4t","updated_at":"2026-02-02T02:15:04Z","closed_at":"2026-02-02T02:15:04Z","dependencies":[{"issue_id":"holomush-8ze8","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-935g","title":"Simplify session error handling from 4 to 2 error codes","description":"Session resolution defines 4 distinct error cases (not found, store error, no character, integrity error) with separate policy IDs, effect codes, and metrics. This is excessive.\n\n**Decision:** Simplify to 2 codes:\n- SESSION_INVALID (not found, no character) — normal operation\n- SESSION_STORE_ERROR (DB down, timeout) — infrastructure failure\nCharacter deletion integrity is handled by CASCADE constraints in the world model, not the authorization layer.\n\n**Acceptance Criteria:**\n- [ ] Session resolution section simplified to 2 error paths\n- [ ] SESSION_INVALID covers expired/missing sessions and missing characters\n- [ ] SESSION_STORE_ERROR covers infrastructure failures\n- [ ] Character integrity case moved to world model responsibility\n- [ ] Metrics simplified accordingly\n\n**Files:** docs/specs/2026-02-05-full-abac-design.md","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T22:36:49Z","created_by":"seanb4t","updated_at":"2026-02-06T23:24:50Z","closed_at":"2026-02-06T23:24:50Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-935g","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-958","title":"Remove or implement skipped test","description":"## Problem\nSkipped test provides no value:\n\n```go\nfunc TestNewMigrator_ValidURL(t *testing.T) {\n    t.Skip(\"requires database connection\")\n}\n```\n\n## Source\nPR Review: pr-test-analyzer agent\n\n## Location\n`internal/store/migrate_test.go:17-20`\n\n## Options\n1. **Remove** - Delete the skipped test entirely\n2. **Implement** - Move to integration test file with `//go:build integration` tag\n\n## Acceptance Criteria\n- [ ] No permanently skipped tests in the codebase\n- [ ] Either removed or properly implemented as integration test\n- [ ] All tests pass: `task test`","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T04:13:51Z","created_by":"seanb4t","updated_at":"2026-01-25T13:43:25Z","closed_at":"2026-01-25T13:43:25Z","work_type":"mutex"}
{"id":"holomush-9acx","title":"Auth: Add nil validation to service constructors","description":"NewAuthService, NewCharacterService, NewPasswordResetService, NewAuthHandler accept nil dependencies without validation. This allows runtime panics. Constructors should return (*T, error) and validate all dependencies.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T01:29:10Z","created_by":"seanb4t","updated_at":"2026-02-02T02:10:11Z","closed_at":"2026-02-02T02:10:11Z","dependencies":[{"issue_id":"holomush-9acx","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-9cfv","title":"[E7] CI lint rule for char: prefix elimination","description":"Add CI lint check to verify no char: prefix usage remains in production code (only character: prefix should be used). Currently CI checks for AccessControl.Check() calls but does NOT verify prefix migration. Discovered from PR #88 review finding #10.","status":"open","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-16T00:47:05Z","created_by":"seanb4t","updated_at":"2026-02-16T00:47:05Z"}
{"id":"holomush-9h20","title":"Decisions: Enforce consistency between policy name prefix and source column (#35/#48)","description":"**Review Finding: S7 (Suggestion)**\n\nDecision #35 adds a source column (admin, lock, seed, plugin) and Decision #48 defines seed policy naming (seed:*). Duplicate tracking creates inconsistency risk — if a policy's name doesn't match its source column, which is authoritative?\n\n**Location:** Decisions doc, Decisions #35 and #48\n\n**Acceptance Criteria:**\n- Add validation rule: policies named seed:* MUST have source='seed' and vice versa\n- Same for lock:* → source='lock'\n- Violations rejected at creation time\n- Document which is authoritative (source column) if enforcement is not feasible","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T14:05:58Z","created_by":"seanb4t","updated_at":"2026-02-06T14:34:19Z","closed_at":"2026-02-06T14:34:19Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-9h20","depends_on_id":"holomush-0d30","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-9h20","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-9loi7","title":"[E6.2] Quit command handler","description":"Implement quit command to end session gracefully.\n\n**Acceptance Criteria:**\n- Quit outputs goodbye message\n- Calls Services.Session.EndSession\n- Handles session end errors\n- Tests with mock session manager\n\n**Files:** internal/command/handlers/quit.go, internal/command/handlers/quit_test.go\n**Blocks:** holomush-wr9.5","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T18:08:37Z","created_by":"seanb4t","updated_at":"2026-02-02T20:32:04Z","closed_at":"2026-02-02T20:32:04Z","dependencies":[{"issue_id":"holomush-9loi7","depends_on_id":"holomush-rgihb","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-9loi7","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-9lx","title":"Add Taskfile integration for docs","description":"## Summary\nAdd Taskfile commands for documentation development workflow.\n\n## Files\n- Modify: Taskfile.yaml\n\n## Steps\n1. Add to Taskfile.yaml after existing tasks:\n   - docs:serve - Start documentation dev server (uv run zensical serve)\n   - docs:build - Build documentation site (uv run zensical build)\n   - docs:setup - Set up dev environment (uv sync)\n2. Run: task docs:setup \u0026\u0026 task docs:build - verify tasks work\n3. Commit: feat(docs): add Taskfile integration for docs commands\n\n## Acceptance Criteria\n- [ ] task docs:setup runs uv sync in site/ directory\n- [ ] task docs:build runs zensical build\n- [ ] task docs:serve starts dev server\n- [ ] All three commands execute successfully\n\n## Reference\nSee docs/plans/2026-01-23-zensical-docs-design.md","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T14:05:27Z","created_by":"seanb4t","updated_at":"2026-01-24T16:50:33Z","closed_at":"2026-01-24T16:50:33Z","dependencies":[{"issue_id":"holomush-9lx","depends_on_id":"holomush-1zx","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-9qb","title":"Phase 1: Tracer Bullet","description":"Thin vertical slice through HoloMUSH architecture. Telnet server with events, sessions, and WASM plugin proof-of-concept.","status":"closed","priority":0,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T15:01:33Z","created_by":"seanb4t","updated_at":"2026-01-17T19:07:05Z","closed_at":"2026-01-17T19:07:05Z","comments":[{"id":3,"issue_id":"holomush-9qb","author":"seanb4t","text":"Additional work needed: documentation and real-time event wiring","created_at":"2026-01-17T18:29:55Z"}],"work_type":"mutex"}
{"id":"holomush-9qb.1","title":"Add core dependencies (ulid, pgx, wazero, bcrypt)","description":"Add Go module dependencies for Phase 1","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T15:04:39Z","created_by":"seanb4t","updated_at":"2026-01-17T15:09:57Z","closed_at":"2026-01-17T15:09:57Z","dependencies":[{"issue_id":"holomush-9qb.1","depends_on_id":"holomush-9qb","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-9qb.10","title":"Main entry point with graceful shutdown","description":"Wire up main.go with server, signals, and config","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T15:05:01Z","created_by":"seanb4t","updated_at":"2026-01-17T15:22:06Z","closed_at":"2026-01-17T15:22:06Z","dependencies":[{"issue_id":"holomush-9qb.10","depends_on_id":"holomush-9qb","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-9qb.10","depends_on_id":"holomush-9qb.9","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-9qb.11","title":"Broadcaster for real-time events","description":"Pub/sub for distributing events to connected clients","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T15:05:02Z","created_by":"seanb4t","updated_at":"2026-01-17T15:23:14Z","closed_at":"2026-01-17T15:23:14Z","dependencies":[{"issue_id":"holomush-9qb.11","depends_on_id":"holomush-9qb","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-9qb.11","depends_on_id":"holomush-9qb.3","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-9qb.12","title":"WASM plugin host proof-of-concept","description":"wazero integration with hello plugin","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T15:05:02Z","created_by":"seanb4t","updated_at":"2026-01-17T15:24:51Z","closed_at":"2026-01-17T15:24:51Z","dependencies":[{"issue_id":"holomush-9qb.12","depends_on_id":"holomush-9qb","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-9qb.12","depends_on_id":"holomush-9qb.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-9qb.13","title":"Final integration and cleanup","description":"Wire all components, integration tests, cleanup","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T15:05:03Z","created_by":"seanb4t","updated_at":"2026-01-17T15:27:24Z","closed_at":"2026-01-17T15:27:24Z","dependencies":[{"issue_id":"holomush-9qb.13","depends_on_id":"holomush-9qb","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-9qb.13","depends_on_id":"holomush-9qb.10","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-9qb.13","depends_on_id":"holomush-9qb.11","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-9qb.13","depends_on_id":"holomush-9qb.12","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-9qb.14","title":"Write getting started documentation","description":"Create documentation for developers and users explaining how to:\n\n## Required Sections\n\n### README.md updates\n- Project overview and current status\n- Prerequisites (Go version, Docker for tests, etc.)\n- How to build: `task build`\n- How to run: `task dev` or `./holomush`\n- How to test: `task test`, `task test:integration`\n- How to lint: `task lint`\n\n### docs/reference/getting-started.md\n- Detailed setup instructions\n- Connecting via telnet (e.g., `telnet localhost 4000`)\n- Available commands (connect, look, say, pose, quit)\n- Test credentials (testuser/password)\n- What works in Phase 1 vs what's planned\n\n### docs/reference/architecture-overview.md\n- High-level architecture summary (event-sourced, telnet adapter, WASM plugins)\n- Link to full architecture design doc\n- Directory structure explanation\n\n## Acceptance Criteria\n- [ ] README.md has quick start instructions\n- [ ] New developer can build and run server from docs alone\n- [ ] Available commands and test credentials documented\n- [ ] Current Phase 1 status is clear","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T18:29:51Z","created_by":"seanb4t","updated_at":"2026-01-17T18:45:50Z","closed_at":"2026-01-17T18:45:50Z","dependencies":[{"issue_id":"holomush-9qb.14","depends_on_id":"holomush-9qb","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-9qb.15","title":"Wire Broadcaster to push real-time events to connected clients","description":"Phase 1 Success Criteria #2: \"See events from other connected characters in same location\"\n\nThe Broadcaster component exists but isn't wired to push events to connected clients in real-time.\n\n## Current State\n- Broadcaster exists in internal/core with Subscribe/Publish\n- ConnectionHandler processes commands and sends responses\n- Events are persisted to EventStore\n- Events are replayed on reconnect\n\n## Missing\n- When a character does `say` or `pose`, other connected characters in the same location don't see it in real-time\n- Need to wire: Engine -\u003e Broadcaster -\u003e ConnectionHandlers\n\n## Implementation\n1. ConnectionHandler subscribes to location stream on connect\n2. Engine publishes events to Broadcaster after persisting\n3. Broadcaster delivers to all subscribed ConnectionHandlers\n4. ConnectionHandler.sendEvent() formats and sends to client\n\n## Acceptance Criteria\n- [ ] Two telnet clients connected to same location\n- [ ] Client A does `say hello`\n- [ ] Client B sees the message in real-time (not just on reconnect)\n- [ ] Works for both say and pose events","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T18:31:22Z","created_by":"seanb4t","updated_at":"2026-01-17T18:45:50Z","closed_at":"2026-01-17T18:45:50Z","dependencies":[{"issue_id":"holomush-9qb.15","depends_on_id":"holomush-9qb","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-9qb.16","title":"Wire WASM plugins to event stream","description":"Phase 1 Success Criteria #4: \"WASM plugin receives events, can emit responses\"\n\nThe wazero plugin host exists as a proof-of-concept but isn't connected to the event system.\n\n## Current State\n- PluginHost exists in internal/wasm with LoadPlugin/CallFunction\n- Basic WASM execution works (math add function test)\n- No connection to game events\n\n## Required\n- Plugin can subscribe to event streams\n- Plugin receives events when they occur\n- Plugin can emit events back to the game\n\n## Implementation\n1. Define plugin API for event handling (host functions)\n2. Create example plugin that responds to events (e.g., echo bot)\n3. Wire PluginHost to Broadcaster to receive events\n4. Add capability for plugin to emit events\n\n## Acceptance Criteria\n- [ ] Example WASM plugin loaded on server start\n- [ ] Plugin receives say events from location stream\n- [ ] Plugin can emit a response event (e.g., \"Echo: \u003cmessage\u003e\")\n- [ ] Response appears to connected clients","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T18:31:23Z","created_by":"seanb4t","updated_at":"2026-01-17T18:45:50Z","closed_at":"2026-01-17T18:45:50Z","dependencies":[{"issue_id":"holomush-9qb.16","depends_on_id":"holomush-9qb","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-9qb.17","title":"Create architecture diagrams using Mermaid","description":"Add visual architecture diagrams to documentation using Mermaid syntax for rendering in GitHub/docs","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T19:04:45Z","created_by":"seanb4t","updated_at":"2026-01-17T19:06:10Z","closed_at":"2026-01-17T19:06:10Z","dependencies":[{"issue_id":"holomush-9qb.17","depends_on_id":"holomush-9qb","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-9qb.2","title":"Event types and ULID generator","description":"Create Event struct, EventType, ActorKind, and ULID utilities","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T15:04:40Z","created_by":"seanb4t","updated_at":"2026-01-17T15:11:39Z","closed_at":"2026-01-17T15:11:39Z","dependencies":[{"issue_id":"holomush-9qb.2","depends_on_id":"holomush-9qb","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-9qb.2","depends_on_id":"holomush-9qb.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-9qb.3","title":"EventStore interface with MemoryEventStore","description":"Define EventStore interface and implement in-memory version for testing","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T15:04:40Z","created_by":"seanb4t","updated_at":"2026-01-17T15:13:08Z","closed_at":"2026-01-17T15:13:08Z","dependencies":[{"issue_id":"holomush-9qb.3","depends_on_id":"holomush-9qb","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-9qb.3","depends_on_id":"holomush-9qb.2","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-9qb.4","title":"PostgreSQL EventStore implementation","description":"Implement EventStore backed by PostgreSQL with migrations","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T15:04:41Z","created_by":"seanb4t","updated_at":"2026-01-17T15:14:49Z","closed_at":"2026-01-17T15:14:49Z","dependencies":[{"issue_id":"holomush-9qb.4","depends_on_id":"holomush-9qb","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-9qb.4","depends_on_id":"holomush-9qb.3","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-9qb.5","title":"SessionManager for connection tracking","description":"Track character sessions and connections across disconnects","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T15:04:49Z","created_by":"seanb4t","updated_at":"2026-01-17T15:15:59Z","closed_at":"2026-01-17T15:15:59Z","dependencies":[{"issue_id":"holomush-9qb.5","depends_on_id":"holomush-9qb","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-9qb.5","depends_on_id":"holomush-9qb.2","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-9qb.6","title":"Basic telnet server","description":"TCP listener with connection handling","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T15:04:50Z","created_by":"seanb4t","updated_at":"2026-01-17T15:17:22Z","closed_at":"2026-01-17T15:17:22Z","dependencies":[{"issue_id":"holomush-9qb.6","depends_on_id":"holomush-9qb","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-9qb.7","title":"Command parser","description":"Parse telnet input into command and arguments","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T15:04:50Z","created_by":"seanb4t","updated_at":"2026-01-17T15:18:20Z","closed_at":"2026-01-17T15:18:20Z","dependencies":[{"issue_id":"holomush-9qb.7","depends_on_id":"holomush-9qb","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-9qb.7","depends_on_id":"holomush-9qb.2","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-9qb.8","title":"Game Engine with say/pose handling","description":"Core engine that processes commands and emits events","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T15:04:51Z","created_by":"seanb4t","updated_at":"2026-01-17T15:19:23Z","closed_at":"2026-01-17T15:19:23Z","dependencies":[{"issue_id":"holomush-9qb.8","depends_on_id":"holomush-9qb","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-9qb.8","depends_on_id":"holomush-9qb.3","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-9qb.8","depends_on_id":"holomush-9qb.5","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-9qb.8","depends_on_id":"holomush-9qb.7","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-9qb.9","title":"Wire telnet to engine with command handling","description":"ConnectionHandler that processes commands via Engine","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T15:05:01Z","created_by":"seanb4t","updated_at":"2026-01-17T15:20:58Z","closed_at":"2026-01-17T15:20:58Z","dependencies":[{"issue_id":"holomush-9qb.9","depends_on_id":"holomush-9qb","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-9qb.9","depends_on_id":"holomush-9qb.6","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-9qb.9","depends_on_id":"holomush-9qb.8","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-9sm","title":"Make maxNestingDepth configurable","description":"MEDIUM: DefaultMaxNestingDepth=3 is hardcoded. Make injectable via NewObjectRepository(pool, maxDepth) for different game mechanics.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T00:26:11Z","created_by":"seanb4t","updated_at":"2026-01-24T01:01:40Z","closed_at":"2026-01-24T01:01:40Z","work_type":"mutex"}
{"id":"holomush-9urh","title":"Auth: Add IsOwnedByPlayer method to CharacterRepository","description":"HandlePlay does two lookups (GetByName then ListByPlayer) to verify ownership. Add CharacterRepository.IsOwnedByPlayer(ctx, charID, playerID) method to avoid listing all characters for ownership check.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T01:29:20Z","created_by":"seanb4t","updated_at":"2026-02-02T02:15:04Z","closed_at":"2026-02-02T02:15:04Z","dependencies":[{"issue_id":"holomush-9urh","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-9xhw","title":"Improve panic message wording in resource helpers","description":"PR #88 review suggestion S9: prefix.go panic message 'empty charID would bypass access control' is slightly misleading — it creates a malformed request, not a bypass that grants access.","status":"open","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-16T01:26:59Z","created_by":"seanb4t","updated_at":"2026-02-16T01:44:03Z","external_ref":"https://github.com/holomush/holomush/pull/88#issuecomment-RC_IC_kwDOQ7tZvM7o0CyA","labels":["deferred-work","review-finding"],"dependencies":[{"issue_id":"holomush-9xhw","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-15T21:19:56Z","created_by":"seanb4t","metadata":"{}"}]}
{"id":"holomush-9yw","title":"Setup documentation site with Zensical","description":"## Summary\nSetup project documentation using Zensical (https://zensical.org/docs/get-started/) - a modern documentation framework similar to mkdocs-material but with improved features.\n\n## Reference\n- Zensical docs: https://zensical.org/docs/get-started/\n\n## Acceptance Criteria\n- [ ] Install and configure Zensical for HoloMUSH documentation\n- [ ] Migrate existing markdown docs to Zensical structure\n- [ ] Configure navigation, search, and theming\n- [ ] Setup CI/CD for documentation deployment\n- [ ] Verify all existing documentation renders correctly","status":"open","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T16:03:43Z","created_by":"seanb4t","updated_at":"2026-01-19T01:45:17Z","dependencies":[{"issue_id":"holomush-9yw","depends_on_id":"holomush-oxd","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-9z0a","title":"Define policy test command syntax explicitly","description":"The spec references 'policy test' and 'policy test --verbose' ~20 times as critical debugging tools but never defines the command syntax, input format, or output format. Implementers need concrete examples.\n\n**Acceptance Criteria:**\n- [ ] Policy Testing Commands section added with syntax, examples, and output format\n- [ ] Both brief and verbose output modes documented\n\n**Files:** docs/specs/2026-02-05-full-abac-design.md","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T22:37:22Z","created_by":"seanb4t","updated_at":"2026-02-07T00:25:34Z","closed_at":"2026-02-07T00:25:34Z","labels":["review-finding"],"work_type":"mutex"}
{"id":"holomush-a0u","title":"Standardize error handling in ExtismSubscriber","description":"## Problem\nExtismSubscriber uses slog.Error in some places and returns errors in others - inconsistent pattern.\n\n## Acceptance Criteria\n- [ ] Document error handling strategy (log vs return)\n- [ ] Apply consistent pattern across ExtismSubscriber\n- [ ] Add test verifying error logging behavior\n- [ ] Independent code review before closing","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T15:36:22Z","created_by":"seanb4t","updated_at":"2026-01-18T15:58:28Z","closed_at":"2026-01-18T15:58:28Z","work_type":"mutex"}
{"id":"holomush-aao","title":"Migrate getting started guide","description":"## Summary\nMigrate the existing getting-started documentation to the new Zensical site, adapted for plugin developers.\n\n## Files\n- Create: site/docs/developers/getting-started.md\n- Reference: docs/reference/getting-started.md\n\n## Steps\n1. Read docs/reference/getting-started.md for content\n2. Create site/docs/developers/getting-started.md adapted for plugin developers\n3. Add tabbed code blocks for OS-specific instructions (macOS/Linux)\n4. Run: cd site \u0026\u0026 uv run zensical build - verify build succeeds\n5. Commit: docs(developers): migrate getting started guide\n\n## Acceptance Criteria\n- [ ] Getting started guide renders correctly\n- [ ] OS-specific instructions use Zensical tabbed code blocks\n- [ ] Content adapted for plugin developer audience\n- [ ] All code examples render with syntax highlighting\n- [ ] zensical build succeeds\n\n## Reference\nSee docs/plans/2026-01-23-zensical-docs-design.md","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T14:05:26Z","created_by":"seanb4t","updated_at":"2026-01-24T16:54:46Z","closed_at":"2026-01-24T16:54:46Z","dependencies":[{"issue_id":"holomush-aao","depends_on_id":"holomush-3h6","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-ado","title":"Remove auto-migration claims from operator docs","description":"## Problem\nThe operator documentation at `site/docs/operators/database.md:34-45` claims HoloMUSH runs migrations automatically on startup with `HOLOMUSH_DB_AUTO_MIGRATE=false` to disable. This feature doesn't exist in the codebase.\n\n## Source\nPR Review: code-reviewer agent\n\n## Location\n`site/docs/operators/database.md` lines 34-45\n\n## Acceptance Criteria\n- [ ] Remove the auto-migration section from database.md\n- [ ] OR implement the auto-migration feature with the environment variable\n- [ ] Documentation accurately reflects actual behavior\n- [ ] Lint passes: `task lint:markdown`","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T04:13:50Z","created_by":"seanb4t","updated_at":"2026-01-25T13:32:43Z","closed_at":"2026-01-25T13:32:43Z","work_type":"mutex"}
{"id":"holomush-aem","title":"Add emit failure aggregation logging","description":"## Problem\nextism_subscriber.go:124-137 logs each emit failure individually but does not aggregate. If 5 out of 10 events fail, there is no summary - operators must parse individual log lines.\n\n## Source\nPR Review Round 7 - silent-failure-hunter agent (MEDIUM severity)\n\n## Acceptance Criteria\n- [ ] Test proves issue exists (multiple emit failures have no summary)\n- [ ] Track emit failure count during loop\n- [ ] Log summary at WARN level after loop if failures \u003e 0\n- [ ] Include total attempted and failed counts\n- [ ] Independent subagent review before closing","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T18:36:43Z","created_by":"seanb4t","updated_at":"2026-01-18T20:30:20Z","closed_at":"2026-01-18T20:30:20Z","dependencies":[{"issue_id":"holomush-aem","depends_on_id":"holomush-vq5","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-aet","title":"Log non-severe BidirectionalCleanupResult at INFO level","description":"## Problem\n\nWhen `DeleteExit` encounters a non-severe cleanup result (return exit not found), it logs at DEBUG level. In production where DEBUG is disabled, there's no record that the return exit was orphaned.\n\n**Location:** `internal/world/service.go:241-243`\n\n## Current Code\n\n```go\nslog.Debug(\"bidirectional exit cleanup notice\",\n    \"exit_id\", cleanupResult.ExitID.String(),\n    \"message\", cleanupResult.Error())\nreturn nil\n```\n\n## Acceptance Criteria\n\n- [ ] Non-severe cleanup results logged at INFO level\n- [ ] Log message includes relevant context (exit_id, to_location_id, return_name)\n- [ ] Debug-level logging remains for other diagnostic purposes\n- [ ] No behavior change (still returns nil for non-severe)\n\n## Implementation Notes\n\nChange to:\n```go\nslog.Info(\"bidirectional exit cleanup notice: return exit already deleted\",\n    \"exit_id\", cleanupResult.ExitID.String(),\n    \"to_location_id\", cleanupResult.ToLocationID.String(),\n    \"return_name\", cleanupResult.ReturnName)\n```","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T19:52:26Z","created_by":"seanb4t","updated_at":"2026-01-24T20:05:56Z","closed_at":"2026-01-24T20:05:56Z","work_type":"mutex"}
{"id":"holomush-afs","title":"(EPIC) Database Migrations PR #43 Review Round 3","description":"Address findings from comprehensive PR review of the database migrations system.\n\n## Context\nPR #43 implements the golang-migrate database migration system. This epic tracks issues identified during the third round of code review using specialized review agents.\n\n## Review Agents Used\n- code-reviewer: General code quality and CLAUDE.md compliance\n- silent-failure-hunter: Error handling and silent failures  \n- pr-test-analyzer: Test coverage analysis\n- comment-analyzer: Documentation accuracy\n\n## Summary\n- 1 Critical issue (broken integration tests)\n- 6 Important issues (error handling, test coverage)\n- 5 Suggestions (documentation improvements)\n\n## Related\n- PR: https://github.com/holomush/holomush/pull/43\n- Branch: feat/migrations\n- Previous reviews: holomush-gmw (Round 1), holomush-d3n (Round 2)","status":"closed","priority":1,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T15:18:04Z","created_by":"seanb4t","updated_at":"2026-01-25T15:51:00Z","closed_at":"2026-01-25T15:51:00Z","work_type":"mutex"}
{"id":"holomush-afs.1","title":"CRITICAL: Fix broken integration tests referencing removed eventStore.Migrate()","description":"## Problem\nMultiple integration test files reference `eventStore.Migrate(ctx)` which was removed when the migration system was refactored to use the separate `store.Migrator` type.\n\n## Files Affected\n- `internal/store/postgres_integration_test.go:52`\n- `test/integration/phase1_5_test.go:109`\n- `test/integration/world/world_suite_test.go:90`\n- `internal/world/postgres/postgres_test.go:61`\n\n## Impact\n- Integration tests fail to compile\n- CI pipeline will break\n- Blocks merging PR #43\n\n## Root Cause\nThe old `PostgresEventStore.Migrate(ctx)` method was removed and replaced with the new `store.NewMigrator()` + `migrator.Up()` pattern, but integration tests weren't updated.\n\n## Acceptance Criteria\n- [ ] All 4 files updated to use new Migrator pattern\n- [ ] Integration tests compile: `go build -tags=integration ./...`\n- [ ] Integration tests pass: `go test -tags=integration ./...`\n\n## Fix Pattern\nReplace:\n```go\nif err := eventStore.Migrate(ctx); err \\!= nil {\n    return nil, nil, err\n}\n```\n\nWith:\n```go\nmigrator, err := store.NewMigrator(connStr)\nif err \\!= nil {\n    return nil, nil, err\n}\nif err := migrator.Up(); err \\!= nil {\n    migrator.Close()\n    return nil, nil, err\n}\ndefer migrator.Close()\n```","status":"closed","priority":0,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T15:19:12Z","created_by":"seanb4t","updated_at":"2026-01-25T15:25:09Z","closed_at":"2026-01-25T15:25:09Z","dependencies":[{"issue_id":"holomush-afs.1","depends_on_id":"holomush-afs","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-afs.10","title":"Use generic migration example in operator docs","description":"## Problem\nThe documentation example `task migrate:create -- add_player_email` claims it creates `000008_*` files, which is only accurate for the current state of the codebase.\n\n## Location\n`site/docs/operators/database.md:57`\n\n## Acceptance Criteria\n- [ ] Replace hardcoded version number with generic placeholder\n- [ ] Make example work regardless of current migration count\n\n## Recommended Fix\nReplace:\n```markdown\ntask migrate:create -- add_player_email\n# Creates: 000008_add_player_email.up.sql and 000008_add_player_email.down.sql\n```\n\nWith:\n```markdown\ntask migrate:create -- descriptive_name\n# Creates: NNNNNN_descriptive_name.up.sql and NNNNNN_descriptive_name.down.sql\n```","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T15:19:14Z","created_by":"seanb4t","updated_at":"2026-01-25T15:49:01Z","closed_at":"2026-01-25T15:49:01Z","dependencies":[{"issue_id":"holomush-afs.10","depends_on_id":"holomush-afs","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-afs.11","title":"Standardize migrator close error logging","description":"## Problem\nInconsistent error logging when `migrator.Close()` fails:\n- CLI commands use `cmd.PrintErrf`\n- Server code uses `slog.Warn`\n\n## Locations\n- `cmd/holomush/migrate.go:55-59, 95-99, 142-146, 179-183, 226-230` (CLI)\n- `cmd/holomush/core.go:456-459` (server)\n\n## User Impact\n- Minor inconsistency in error reporting\n- Harder to aggregate/search warnings across logs\n\n## Acceptance Criteria\n- [ ] Decide on consistent approach (both acceptable, just be consistent)\n- [ ] Consider adding more context about potential resource leak\n\n## Options\n1. **Keep split** (CLI uses PrintErrf, server uses slog.Warn) - defensible since contexts differ\n2. **Add context** to both about potential resource leak:\n   ```go\n   // CLI\n   cmd.PrintErrf(\"Warning: failed to close migrator (resource may leak): %v\\n\", closeErr)\n   \n   // Server\n   slog.Warn(\"error closing migrator\", \"error\", closeErr, \"note\", \"database connection may leak\")\n   ```","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T15:19:14Z","created_by":"seanb4t","updated_at":"2026-01-25T15:49:01Z","closed_at":"2026-01-25T15:49:01Z","dependencies":[{"issue_id":"holomush-afs.11","depends_on_id":"holomush-afs","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-afs.2","title":"Improve case-insensitive handling for HOLOMUSH_DB_AUTO_MIGRATE","description":"## Problem\nThe `parseAutoMigrate()` function only handles `\"false\"`, `\"FALSE\"`, and `\"0\"` as false values. Common variants like `\"False\"`, `\"f\"`, `\"F\"`, `\"no\"`, `\"NO\"` are treated as true.\n\n## Location\n`cmd/holomush/core.go:479-481`\n\n## Current Code\n```go\nswitch val {\ncase \"false\", \"FALSE\", \"0\":\n    return false\n}\n```\n\n## User Impact\nA user setting `HOLOMUSH_DB_AUTO_MIGRATE=False` (mixed case) expects migrations to be disabled, but they run anyway.\n\n## Acceptance Criteria\n- [ ] Use `strings.EqualFold(val, \"false\")` for case-insensitive comparison\n- [ ] Add test for mixed-case \"False\" value\n- [ ] Update test table in `automigrate_test.go` with new case\n\n## Recommended Fix\n```go\nswitch {\ncase strings.EqualFold(val, \"false\"), val == \"0\":\n    return false\ncase strings.EqualFold(val, \"true\"), val == \"1\":\n    return true\ndefault:\n    slog.Warn(\"unrecognized HOLOMUSH_DB_AUTO_MIGRATE value\", \"value\", val)\n    return true\n}\n```","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T15:19:12Z","created_by":"seanb4t","updated_at":"2026-01-25T15:28:57Z","closed_at":"2026-01-25T15:28:57Z","dependencies":[{"issue_id":"holomush-afs.2","depends_on_id":"holomush-afs","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-afs.2","depends_on_id":"holomush-afs.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-afs.3","title":"Improve migrate up/down feedback when no changes occur","description":"## Problem\nThe `Up()`, `Down()`, and `Steps()` methods treat `migrate.ErrNoChange` as success and return `nil`. The CLI then prints \"Migrations complete\" even when nothing happened, which is misleading.\n\n## Location\n- `internal/store/migrate.go:42-47, 50-55, 58-63`\n- `cmd/holomush/migrate.go` (CLI handlers)\n\n## User Impact\nUsers running `holomush migrate up` when already at latest version see:\n```\nApplying migrations...\nMigrations complete. Current version: 7\n```\nThis doesn't indicate whether migrations actually ran.\n\n## Acceptance Criteria\n- [ ] CLI shows \"Already at latest version: N\" when no migrations run\n- [ ] CLI shows \"Migrated from version X to Y\" when migrations run\n- [ ] Tests verify correct output for both scenarios\n\n## Recommended Approach\nCheck version before and after migration:\n```go\nbeforeVersion, _, _ := migrator.Version()\nif err := migrator.Up(); err \\!= nil {\n    return err\n}\nafterVersion, _, _ := migrator.Version()\nif beforeVersion == afterVersion {\n    cmd.Printf(\"Already at latest version: %d\\n\", afterVersion)\n} else {\n    cmd.Printf(\"Migrated from version %d to %d\\n\", beforeVersion, afterVersion)\n}\n```","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T15:19:12Z","created_by":"seanb4t","updated_at":"2026-01-25T15:38:41Z","closed_at":"2026-01-25T15:38:41Z","dependencies":[{"issue_id":"holomush-afs.3","depends_on_id":"holomush-afs","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-afs.3","depends_on_id":"holomush-afs.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-afs.4","title":"Add warning for unrecognized HOLOMUSH_DB_AUTO_MIGRATE values","description":"## Problem\n`parseAutoMigrate()` silently defaults to `true` for any unrecognized value. A typo like `HOLOMUSH_DB_AUTO_MIGRATE=flase` (instead of \"false\") will enable auto-migration unexpectedly.\n\n## Location\n`cmd/holomush/core.go:470-484`\n\n## User Impact\n**Production risk:** A user trying to disable migrations with a typo will have migrations run unexpectedly. This could be catastrophic on production databases.\n\n## Acceptance Criteria\n- [ ] Log warning with `slog.Warn` for unrecognized values\n- [ ] Include the invalid value and list of valid values in warning\n- [ ] Add test verifying warning is logged for invalid values\n\n## Recommended Fix\n```go\nswitch val {\ncase \"false\", \"FALSE\", \"0\":\n    return false\ncase \"true\", \"TRUE\", \"1\", \"\":\n    return true\ndefault:\n    slog.Warn(\"unrecognized HOLOMUSH_DB_AUTO_MIGRATE value, defaulting to true\",\n        \"value\", val,\n        \"valid_values\", \"true, false, 1, 0\")\n    return true\n}\n```","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T15:19:13Z","created_by":"seanb4t","updated_at":"2026-01-25T15:32:26Z","closed_at":"2026-01-25T15:32:26Z","dependencies":[{"issue_id":"holomush-afs.4","depends_on_id":"holomush-afs","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-afs.4","depends_on_id":"holomush-afs.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-afs.4","depends_on_id":"holomush-afs.2","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-afs.5","title":"Add unit tests for Migrator methods error handling","description":"## Problem\nThe `Migrator` methods in `internal/store/migrate.go` have 0% unit test coverage. Only integration tests exercise these paths, meaning error handling changes won't be caught by fast unit tests.\n\n## Location\n`internal/store/migrate.go`\n\n## Methods Needing Tests\n| Method | Coverage | Critical Paths |\n|--------|----------|----------------|\n| `Up()` | 0% | ErrNoChange handling, error wrapping |\n| `Down()` | 0% | ErrNoChange handling, error wrapping |\n| `Steps()` | 0% | Error wrapping |\n| `Version()` | 0% | Nil version handling, error wrapping |\n| `Force()` | 0% | Error wrapping |\n| `Close()` | 0% | Dual error paths (source + database) |\n\n## Acceptance Criteria\n- [ ] Unit tests for each method's error paths\n- [ ] Tests verify correct oops error codes\n- [ ] Tests use mocking to avoid database dependency\n- [ ] Coverage for `migrate.go` reaches \u003e80%\n\n## Testing Approach\nCreate a mock `*migrate.Migrate` or use interface to test error handling:\n```go\nfunc TestMigrator_Up_ErrorWrapping(t *testing.T) {\n    // Test that errors are wrapped with MIGRATION_UP_FAILED code\n}\n\nfunc TestMigrator_Close_SourceError(t *testing.T) {\n    // Test that source errors include component=source\n}\n\nfunc TestMigrator_Close_DatabaseError(t *testing.T) {\n    // Test that db errors include component=database\n}\n```","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T15:19:13Z","created_by":"seanb4t","updated_at":"2026-01-25T15:42:45Z","closed_at":"2026-01-25T15:42:45Z","dependencies":[{"issue_id":"holomush-afs.5","depends_on_id":"holomush-afs","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-afs.5","depends_on_id":"holomush-afs.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-afs.6","title":"Add tests for migrate CLI command outputs","description":"## Problem\nThe migrate CLI commands (`up`, `down`, `status`, `version`, `force`) have no tests verifying their output or behavior. Only helper functions are tested.\n\n## Location\n`cmd/holomush/migrate.go`\n\n## Missing Test Coverage\n- `migrate up` success/failure output\n- `migrate down` with `--all` flag behavior\n- `migrate status` dirty state display\n- `migrate version` output formatting\n- `migrate force` success messaging\n- Warning path when Version() fails after successful migration\n\n## Acceptance Criteria\n- [ ] Tests for each subcommand's happy path output\n- [ ] Tests for error scenarios\n- [ ] Test for `migrate down --all` flag\n- [ ] Test for dirty state display in status\n- [ ] Test for version warning path (line 66-71)\n\n## Testing Approach\nUse cobra's test utilities:\n```go\nfunc TestMigrateUpCommand_Success(t *testing.T) {\n    cmd := newMigrateUpCmd()\n    // Inject mock migrator via dependency injection\n    // Capture stdout/stderr\n    // Verify expected output\n}\n```","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T15:19:13Z","created_by":"seanb4t","updated_at":"2026-01-25T15:47:02Z","closed_at":"2026-01-25T15:47:02Z","dependencies":[{"issue_id":"holomush-afs.6","depends_on_id":"holomush-afs","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-afs.6","depends_on_id":"holomush-afs.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-afs.7","title":"Document destructive nature of Down() method","description":"## Problem\nThe `Down()` method comment says \"rolls back all migrations to version 0\" but doesn't warn about the destructive nature of this operation.\n\n## Location\n`internal/store/migrate.go:49`\n\n## Current Comment\n```go\n// Down rolls back all migrations to version 0.\n```\n\n## Acceptance Criteria\n- [ ] Update comment to warn about data loss\n- [ ] Mention that this drops all tables and data\n\n## Recommended Comment\n```go\n// Down rolls back all migrations to version 0, effectively removing all schema objects.\n// WARNING: This is a destructive operation that drops all tables and data.\n```","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T15:19:13Z","created_by":"seanb4t","updated_at":"2026-01-25T15:49:01Z","closed_at":"2026-01-25T15:49:01Z","dependencies":[{"issue_id":"holomush-afs.7","depends_on_id":"holomush-afs","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-afs.8","title":"Document dirty state meaning in Version() method","description":"## Problem\nThe `Version()` method returns a \"dirty\" boolean but the documentation doesn't explain what this means.\n\n## Location\n`internal/store/migrate.go:65`\n\n## Current Comment\n```go\n// Version returns the current migration version and dirty state.\n```\n\n## Acceptance Criteria\n- [ ] Explain what \"dirty\" means\n- [ ] Document the return value for no migrations applied\n\n## Recommended Comment\n```go\n// Version returns the current migration version and dirty state.\n// A dirty state indicates a migration failed partway through and requires manual intervention.\n// Returns version 0 with dirty=false if no migrations have been applied.\n```","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T15:19:14Z","created_by":"seanb4t","updated_at":"2026-01-25T15:49:01Z","closed_at":"2026-01-25T15:49:01Z","dependencies":[{"issue_id":"holomush-afs.8","depends_on_id":"holomush-afs","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-afs.9","title":"Add safety warning to Force() method documentation","description":"## Problem\nThe `Force()` method documentation doesn't warn about the risks of setting incorrect versions.\n\n## Location\n`internal/store/migrate.go:77`\n\n## Current Comment\n```go\n// Force sets the migration version without running migrations.\n```\n\n## Acceptance Criteria\n- [ ] Document intended use case (recovering from dirty state)\n- [ ] Add warning about risks of incorrect version\n\n## Recommended Comment\n```go\n// Force sets the migration version without running migrations.\n// Use only for recovering from a dirty state after manually fixing the database.\n// WARNING: Setting an incorrect version can corrupt database state tracking.\n```","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T15:19:14Z","created_by":"seanb4t","updated_at":"2026-01-25T15:49:01Z","closed_at":"2026-01-25T15:49:01Z","dependencies":[{"issue_id":"holomush-afs.9","depends_on_id":"holomush-afs","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-anj","title":"Delete redundant TestExtismSubscriber_MultiplePatterns test","description":"## Problem\nextism_subscriber_test.go:285-331 admits it tests nothing useful - pattern matching already tested elsewhere.\n\n## Acceptance Criteria\n- [ ] Delete TestExtismSubscriber_MultiplePatterns function\n- [ ] Verify remaining tests still pass\n- [ ] Independent code review before closing","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T16:10:28Z","created_by":"seanb4t","updated_at":"2026-01-18T16:40:34Z","closed_at":"2026-01-18T16:40:34Z","work_type":"mutex"}
{"id":"holomush-aos4","title":"Fix seed migration example DSL text mismatch","description":"The migration example for seed:player-self-access shows oldDSL with [\"read\"] but the actual seed policy has [\"read\", \"write\"]. The comparison would never match, causing the migration to skip with a false customization warning.\n\n**Acceptance Criteria:**\n- [ ] Migration example oldDSL matches actual seed policy text\n- [ ] Or add clarification that this is a hypothetical version 1→2 example\n\n**Files:** docs/specs/2026-02-05-full-abac-design.md","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T22:37:29Z","created_by":"seanb4t","updated_at":"2026-02-06T23:09:40Z","closed_at":"2026-02-06T23:09:40Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-aos4","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-aotlc","title":"[E6.docs] Document MustRegister is for initialization only","description":"## Problem\nMustRegister panics on error, which is documented but could be surprising. Need clearer documentation that this is only for known-safe initialization, not runtime use.\n\n**Location:** `pkg/holo/property.go:172`\n\n## Acceptance Criteria\n- [ ] Add doc comment explicitly stating MustRegister is for initialization only\n- [ ] Add example showing proper usage in init() or package-level var\n- [ ] Consider adding a linter comment to help catch runtime usage","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T03:06:12Z","created_by":"seanb4t","updated_at":"2026-02-04T06:06:39Z","closed_at":"2026-02-04T06:06:39Z","dependencies":[{"issue_id":"holomush-aotlc","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-aqq","title":"Epic 12: Discord Integration","description":"Bridge Discord and HoloMUSH for seamless community interaction.\n\n**Goal:** Unified community experience across Discord and game.\n\n**Phases:**\n- 12.1: Discord bot\n- 12.2: Channel bridge\n- 12.3: OAuth linking\n- 12.4: Notifications\n- 12.5: Status sync\n\n**Acceptance Criteria:**\n- [ ] go-plugin Discord bot implementation works\n- [ ] Discord ↔ game channel sync works\n- [ ] Discord account to player account linking works\n- [ ] Mentions and DMs forwarded\n- [ ] Online/offline presence synced","status":"open","priority":3,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:27:57Z","created_by":"seanb4t","updated_at":"2026-01-19T01:27:57Z","dependencies":[{"issue_id":"holomush-aqq","depends_on_id":"holomush-0sc","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-aqq","depends_on_id":"holomush-1hq","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-aqq.1","title":"[E12] Design: Discord Integration Architecture","description":"Design the architecture for Discord integration with HoloMUSH.\n\n## Acceptance Criteria\n- [ ] Document Discord bot architecture (go-discordgo or similar)\n- [ ] Define channel bridging protocol and message format\n- [ ] Design OAuth2 flow for Discord account linking\n- [ ] Specify notification routing (mentions, DMs)\n- [ ] Design presence sync mechanism\n- [ ] Document rate limiting and error handling strategies\n- [ ] Define security boundaries (what Discord can/cannot access)\n- [ ] Create sequence diagrams for key flows","status":"open","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:34:12Z","created_by":"seanb4t","updated_at":"2026-01-19T01:34:12Z","dependencies":[{"issue_id":"holomush-aqq.1","depends_on_id":"holomush-aqq","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-aqq.2","title":"[E12] Implementation Plan: Discord Integration","description":"Create detailed implementation plan for Discord integration based on the architecture design.\n\n## Acceptance Criteria\n- [ ] Break down each phase into specific tasks\n- [ ] Define file structure for discord package\n- [ ] Specify test strategy (mocking Discord API)\n- [ ] Document configuration schema\n- [ ] Create migration plan for player account linking\n- [ ] Estimate effort for each phase\n- [ ] Identify risks and mitigation strategies\n- [ ] Define rollback procedures","status":"open","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:34:18Z","created_by":"seanb4t","updated_at":"2026-01-19T01:34:18Z","dependencies":[{"issue_id":"holomush-aqq.2","depends_on_id":"holomush-aqq","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-aqq.2","depends_on_id":"holomush-aqq.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-aqq.3","title":"[E12.1] Discord Bot - Go Plugin Implementation","description":"Implement the core Discord bot as a Go plugin using discordgo or similar library.\n\n## Acceptance Criteria\n- [ ] Bot connects to Discord and maintains stable connection\n- [ ] Bot responds to basic commands (\\!help, \\!status)\n- [ ] Plugin integrates with HoloMUSH event system\n- [ ] Configuration supports multiple Discord servers (guilds)\n- [ ] Reconnection logic handles network interruptions\n- [ ] Logging captures Discord events at appropriate levels\n- [ ] Unit tests cover connection and command handling\n- [ ] Integration tests verify Discord API interactions (mocked)","status":"open","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:34:23Z","created_by":"seanb4t","updated_at":"2026-01-19T01:34:23Z","dependencies":[{"issue_id":"holomush-aqq.3","depends_on_id":"holomush-aqq","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-aqq.3","depends_on_id":"holomush-aqq.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-aqq.3","depends_on_id":"holomush-aqq.2","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-aqq.4","title":"[E12.2] Channel Bridge - Discord ↔ Game Channel Sync","description":"Implement bidirectional message bridging between Discord channels and game channels.\n\n## Acceptance Criteria\n- [ ] Messages from Discord channel appear in linked game channel\n- [ ] Messages from game channel appear in linked Discord channel\n- [ ] Message attribution shows original sender name\n- [ ] Rich formatting translates appropriately (markdown ↔ ANSI)\n- [ ] Attachments/embeds handled gracefully (links or descriptions)\n- [ ] Channel mapping configurable per-guild\n- [ ] Rate limiting prevents spam amplification\n- [ ] Message history not duplicated on reconnect\n- [ ] Unit tests cover message transformation\n- [ ] Integration tests verify bidirectional sync","status":"open","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:34:28Z","created_by":"seanb4t","updated_at":"2026-01-19T01:34:28Z","dependencies":[{"issue_id":"holomush-aqq.4","depends_on_id":"holomush-aqq","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-aqq.4","depends_on_id":"holomush-aqq.3","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-aqq.5","title":"[E12.3] OAuth Linking - Discord Account to Player Account","description":"Implement OAuth2 flow for linking Discord accounts to HoloMUSH player accounts.\n\n## Acceptance Criteria\n- [ ] Players can initiate linking from in-game command\n- [ ] OAuth2 flow redirects to Discord for authorization\n- [ ] Callback handler validates and stores Discord user ID\n- [ ] Players can unlink their Discord account\n- [ ] Multiple players cannot link same Discord account\n- [ ] Linked status visible in player profile\n- [ ] Database migration adds discord_id to players table\n- [ ] Security: tokens stored securely, state parameter prevents CSRF\n- [ ] Unit tests cover OAuth flow\n- [ ] Integration tests verify account linking/unlinking","status":"open","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:34:38Z","created_by":"seanb4t","updated_at":"2026-01-19T01:34:38Z","dependencies":[{"issue_id":"holomush-aqq.5","depends_on_id":"holomush-aqq","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-aqq.5","depends_on_id":"holomush-aqq.4","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-aqq.6","title":"[E12.4] Notifications - Mentions and DMs Forwarded","description":"Implement notification forwarding between Discord and HoloMUSH.\n\n## Acceptance Criteria\n- [ ] Game mentions (@playername) forward to linked Discord account as DM\n- [ ] Discord @mentions in bridged channels forward to player in-game\n- [ ] Players can configure notification preferences (on/off, quiet hours)\n- [ ] Page/tell commands optionally forward to Discord DM\n- [ ] Notification rate limiting prevents spam\n- [ ] Offline players receive notifications when they return (configurable)\n- [ ] Rich notification content (room name, context)\n- [ ] Unit tests cover notification routing\n- [ ] Integration tests verify DM delivery (mocked)","status":"open","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:34:44Z","created_by":"seanb4t","updated_at":"2026-01-19T01:34:44Z","dependencies":[{"issue_id":"holomush-aqq.6","depends_on_id":"holomush-aqq","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-aqq.6","depends_on_id":"holomush-aqq.5","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-aqq.7","title":"[E12.5] Status Sync - Online/Offline Presence","description":"Implement presence synchronization between Discord and HoloMUSH.\n\n## Acceptance Criteria\n- [ ] Game online status reflected in Discord (custom status or role)\n- [ ] Discord presence optionally shown in-game who list\n- [ ] Character name displayed in Discord status when playing\n- [ ] Idle/AFK status synced bidirectionally\n- [ ] Players can opt out of presence sync\n- [ ] Presence updates debounced to avoid rate limits\n- [ ] Graceful degradation if Discord API unavailable\n- [ ] Unit tests cover presence state machine\n- [ ] Integration tests verify sync accuracy","status":"open","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:34:51Z","created_by":"seanb4t","updated_at":"2026-01-19T01:34:51Z","dependencies":[{"issue_id":"holomush-aqq.7","depends_on_id":"holomush-aqq","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-aqq.7","depends_on_id":"holomush-aqq.6","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-avzd","title":"Update call site inventory count in ABAC spec (~29 → ~33)","description":"The spec claims ~29 production call sites but actual codebase has ~33. The inventory table in ADR 0014 omits handlers/look.go, handlers/move.go, handlers/who.go, and handlers/objects.go which all contain Check() calls. Missing call sites would cause compilation failures during migration.\n\n**Acceptance Criteria:**\n- [ ] Call site count updated in main spec line 27\n- [ ] Call site count updated in ADR 0014\n- [ ] Call site count updated in decisions.md #5 and #36\n- [ ] Inventory table in ADR 0014 includes all command handlers\n\n**Files:** docs/specs/2026-02-05-full-abac-design.md, docs/adr/0014-direct-static-access-control-replacement.md, docs/specs/2026-02-05-full-abac-design-decisions.md","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T22:36:40Z","created_by":"seanb4t","updated_at":"2026-02-06T23:34:12Z","closed_at":"2026-02-06T23:34:12Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-avzd","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-awqm","title":"ABAC Review S11: Add per-provider lifetime budget with circuit breaker","description":"Issue: Slow providers staying just under timeout cause cumulative impact with no detection. AC: (1) 80% allocation exceeded in \u003e50% of calls triggers circuit break (2) Provider metrics endpoint. Ref: docs/specs/2026-02-05-full-abac-design.md:1235-1254.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:12Z","created_by":"seanb4t","updated_at":"2026-02-06T17:41:21Z","closed_at":"2026-02-06T17:41:21Z","dependencies":[{"issue_id":"holomush-awqm","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-awqm","depends_on_id":"holomush-61to","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-ay5l","title":"Fix broken relative links in markdown docs (MD057)","description":"rumdl MD057 rule found ~60 broken relative links across README.md, docs/, and site/docs/. These point to pages not yet created. Re-enable MD057 in .rumdl.toml and site/.rumdl.toml after fixing.","status":"open","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-08T20:36:31Z","created_by":"seanb4t","updated_at":"2026-02-08T20:36:31Z","work_type":"mutex"}
{"id":"holomush-ayh0","title":"Add integration tests for engine error → client error response at protocol boundary","description":"PR #88 review (comment RC_IC_kwDOQ7tZvM7owGga) identified missing integration tests that verify end-to-end behavior when AccessPolicyEngine returns errors: the error should propagate through the command handler → dispatcher → protocol adapter → client response chain. This tests the fail-closed pattern at the system boundary level, not just unit level. Ref: https://github.com/holomush/holomush/pull/88","notes":"external-ref: https://github.com/holomush/holomush/pull/88#issuecomment-RC_IC_kwDOQ7tZvM7owGga","status":"open","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-15T19:06:32Z","created_by":"seanb4t","updated_at":"2026-02-15T19:47:45Z","labels":["deferred-work","review-finding"],"dependencies":[{"issue_id":"holomush-ayh0","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-15T14:48:50Z","created_by":"seanb4t","metadata":"{}"}]}
{"id":"holomush-b11m","title":"Remove redundant close error handling comments","description":"## Problem\nIn `internal/store/migrate.go:70-73`, both a block comment and nolint comment explain the same thing:\n\n```go\n// Close source to prevent resource leak when initialization fails.\n// Close error is intentionally ignored - we're already returning the more\n// informative initialization error, and the source is an embedded filesystem.\n_ = source.Close() //nolint:errcheck // best-effort cleanup, init error takes precedence\n```\n\n## Acceptance Criteria\n- [ ] Keep only the nolint inline comment since it appears at the point of use\n- [ ] Remove redundant block comment (lines 70-72)\n\n## Suggested Change\n```go\n_ = source.Close() //nolint:errcheck // cleanup for embedded FS; init error takes precedence\n```\n\n## Files to Modify\n- `internal/store/migrate.go:70-73`","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T21:20:34Z","created_by":"seanb4t","updated_at":"2026-01-25T21:30:32Z","closed_at":"2026-01-25T21:30:32Z","work_type":"mutex"}
{"id":"holomush-b1t","title":"test: auto-migration when database already at latest version","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T16:40:29Z","created_by":"seanb4t","updated_at":"2026-01-25T17:23:01Z","closed_at":"2026-01-25T17:23:01Z","work_type":"mutex"}
{"id":"holomush-b2cq","title":"ADR 0015: Specify timing of duplicate token collision check","description":"**Review Finding: I10 (Important)**\n\nADR 0015 says duplicate token registrations MUST cause a startup error but doesn't specify when this check occurs: at plugin load, after all plugins loaded, or at runtime.\n\n**Location:** ADR 0015 (Three-Layer Player Access Control), lines 150-164\n\n**Acceptance Criteria:**\n- ADR specifies: collision check occurs during plugin initialization (phase 7.4)\n- When PluginManager.LoadPlugin() calls LockTokenRegistry.RegisterTokens(), registry checks for existing tokens\n- Plugin load FAILS with clear error identifying both plugins and conflicting token\n- Server startup ABORTS if a configured plugin cannot load","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T14:05:28Z","created_by":"seanb4t","updated_at":"2026-02-06T14:28:44Z","closed_at":"2026-02-06T14:28:44Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-b2cq","depends_on_id":"holomush-0d30","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-b2cq","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-b2qq","title":"Remove redundant DELETE statements from initial down migration","description":"File: internal/store/migrations/000001_initial.down.sql:5-7\n\nThe down migration has DELETE statements before DROP TABLE that are unnecessary since DROP TABLE handles cleanup via foreign key cascades.\n\nProblem:\n- DELETE statements will fail silently if data doesn't exist\n- Unnecessary since DROP TABLE CASCADE handles cleanup\n- Add complexity without benefit\n\nAcceptance Criteria:\n- Remove the three DELETE statements from 000001_initial.down.sql\n- Verify down migration still works correctly\n- Run integration tests to confirm no regression","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T18:09:08Z","created_by":"seanb4t","updated_at":"2026-01-25T18:33:01Z","closed_at":"2026-01-25T18:33:01Z","work_type":"mutex"}
{"id":"holomush-b3wz","title":"Fix Transactor integration test: missing required column","description":"TestTransactor_InTransaction_CommitsOnSuccess in internal/world/postgres/transactor_test.go fails with:\n  ERROR: null value in column 'description' of relation 'locations' violates not-null constraint (SQLSTATE 23502)\n\nThe test inserts a location row without providing the 'description' column, but the DB schema requires it (NOT NULL constraint). The test was likely written before the description column became required.\n\nFix: Update the INSERT statement in the test to include a description value.","notes":"label: broken-on-main","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-14T20:57:01Z","created_by":"seanb4t","updated_at":"2026-02-14T21:20:37Z","closed_at":"2026-02-14T21:20:37Z","close_reason":"Fixed in 93431ab on feat/abac-phase-7.6-migration","labels":["broken-on-main"]}
{"id":"holomush-b5y","title":"Add input validation to domain types","description":"HIGH: Name, Description, Aliases, LockData, VisibleTo accept arbitrary input. Add ValidateName, ValidateAliases, ValidateLockData, ValidateVisibleTo with length limits, UTF-8 validation, schema enforcement.","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T00:26:10Z","created_by":"seanb4t","updated_at":"2026-01-24T00:45:19Z","closed_at":"2026-01-24T00:45:19Z","work_type":"mutex"}
{"id":"holomush-bc4","title":"Add context to Containment.Validate() errors","description":"## Problem\n\n`Containment.Validate()` returns raw `ErrInvalidContainment` without context about which fields were set or missing. When validation fails, the error says \"object must be in exactly one place\" but doesn't indicate:\n- How many locations were set (0 or 2+)?\n- Which fields were set?\n\n**Location:** `internal/world/object.go:25-40`\n\n## Acceptance Criteria\n\n- [ ] `Containment.Validate()` wraps error with field context\n- [ ] Error includes which containment fields were set (location/character/object)\n- [ ] Error includes count of set fields\n- [ ] `Object.SetContainment()` benefits from improved error context\n- [ ] Tests verify error context is present\n\n## Implementation Notes\n\nChange from:\n```go\nif count \\!= 1 {\n    return ErrInvalidContainment\n}\n```\n\nTo:\n```go\nif count \\!= 1 {\n    return oops.\n        With(\"location_set\", c.LocationID \\!= nil).\n        With(\"character_set\", c.CharacterID \\!= nil).\n        With(\"object_set\", c.ObjectID \\!= nil).\n        With(\"count\", count).\n        Wrap(ErrInvalidContainment)\n}\n```","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T19:52:26Z","created_by":"seanb4t","updated_at":"2026-01-24T20:05:56Z","closed_at":"2026-01-24T20:05:56Z","work_type":"mutex"}
{"id":"holomush-bg5","title":"Website Landing Page for holomush.dev","description":"Transform site/docs into full website at holomush.dev with landing page, updated plugin references (WASM → Lua \u0026 Go), and cleaned up broken links. Design: docs/plans/2026-01-24-website-landing-page-design.md","status":"closed","priority":2,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T01:23:30Z","created_by":"seanb4t","updated_at":"2026-01-25T01:29:45Z","closed_at":"2026-01-25T01:29:45Z","work_type":"mutex"}
{"id":"holomush-bg5.1","title":"Update site configuration for holomush.dev","description":"Update zensical.toml: site_url → https://holomush.dev, site_name → HoloMUSH","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T01:23:38Z","created_by":"seanb4t","updated_at":"2026-01-25T01:26:14Z","closed_at":"2026-01-25T01:26:14Z","dependencies":[{"issue_id":"holomush-bg5.1","depends_on_id":"holomush-bg5","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-bg5.2","title":"Rewrite landing page with hero and features","description":"Replace site/docs/index.md with new landing page: hero section, feature cards, project status, audience paths, community links. Remove broken links to nonexistent pages.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T01:23:38Z","created_by":"seanb4t","updated_at":"2026-01-25T01:26:14Z","closed_at":"2026-01-25T01:26:14Z","dependencies":[{"issue_id":"holomush-bg5.2","depends_on_id":"holomush-bg5","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-bg5.3","title":"Update WASM references to Lua \u0026 Go plugins","description":"Find and update all WASM/WebAssembly references in site/docs to reflect current Lua \u0026 Go plugin system. Files: index.md, contributors/coding-standards.md","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T01:23:38Z","created_by":"seanb4t","updated_at":"2026-01-25T01:26:14Z","closed_at":"2026-01-25T01:26:14Z","dependencies":[{"issue_id":"holomush-bg5.3","depends_on_id":"holomush-bg5","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-bg5.4","title":"Verify docs build and test all links","description":"Run task docs:build, task docs:serve. Verify landing page renders correctly, all navigation works, no broken links remain.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T01:23:39Z","created_by":"seanb4t","updated_at":"2026-01-25T01:29:42Z","closed_at":"2026-01-25T01:29:42Z","dependencies":[{"issue_id":"holomush-bg5.4","depends_on_id":"holomush-bg5","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-bg5.4","depends_on_id":"holomush-bg5.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-bg5.4","depends_on_id":"holomush-bg5.2","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-bg5.4","depends_on_id":"holomush-bg5.3","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-bk5","title":"Fix object_repo.go Move to wrap ErrNotFound","description":"## Context\n\nIn `internal/world/postgres/object_repo.go`, the `Move` method uses `oops.Errorf()` which creates a new error and loses the ability to match against sentinel errors.\n\n## Problem\n\nAt lines 203-214, errors are created with `oops.Errorf()`:\n```go\nreturn oops.\n    With(\"operation\", \"move object\").\n    With(\"object_id\", objectID.String()).\n    With(\"container_id\", to.ObjectID.String()).\n    Errorf(\"container object not found\")\n```\n\nCallers cannot use `errors.Is(err, world.ErrNotFound)` to detect this condition because the error is not wrapping the sentinel.\n\n## Acceptance Criteria\n\n- [ ] Line ~203-207: \"container object not found\" wraps `world.ErrNotFound`\n- [ ] Line ~209-214: \"target object is not a container\" uses appropriate sentinel (consider adding `ErrInvalidContainment` or similar)\n- [ ] Tests verify `errors.Is(err, world.ErrNotFound)` works for not-found cases\n- [ ] Tests verify the specific containment error can be detected\n- [ ] All existing tests pass\n\n## Implementation Notes\n\nFix for not-found case:\n```go\nreturn oops.\n    With(\"operation\", \"move object\").\n    With(\"object_id\", objectID.String()).\n    With(\"container_id\", to.ObjectID.String()).\n    Wrap(world.ErrNotFound)\n```\n\nFor \"not a container\" case, consider:\n```go\nreturn oops.\n    With(\"operation\", \"move object\").\n    With(\"object_id\", objectID.String()).\n    With(\"container_id\", to.ObjectID.String()).\n    Wrap(world.ErrInvalidContainment)  // Or create ErrNotContainer\n```","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T19:27:50Z","created_by":"seanb4t","updated_at":"2026-01-24T19:39:06Z","closed_at":"2026-01-24T19:39:06Z","work_type":"mutex"}
{"id":"holomush-bpms6","title":"[E6.4] Building plugin (dig, create, describe, link)","description":"Implement building commands as Lua plugin.\n\n**Acceptance Criteria:**\n- dig creates new rooms and exits\n- create makes new objects\n- describe sets descriptions\n- link creates exits between existing rooms\n- All require build.* capabilities\n\n**Files:** plugins/building/plugin.yaml, plugins/building/main.lua\n**Blocks:** holomush-wr9.7","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T18:08:46Z","created_by":"seanb4t","updated_at":"2026-02-03T13:38:59Z","closed_at":"2026-02-03T13:38:59Z","dependencies":[{"issue_id":"holomush-bpms6","depends_on_id":"holomush-h76xh","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-bpms6","depends_on_id":"holomush-rgihb","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-bpms6","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-c0hh","title":"ABAC Review C4: Fix has operator grammar comment contradiction","description":"Issue: Grammar allows dotted paths in has but comment at line 700 says bare root only. Decision #40 confirms dotted paths intended. AC: (1) Comment revised to match grammar (2) No grammar change needed (3) Example shows both simple and dotted has. Ref: docs/specs/2026-02-05-full-abac-design.md:689, 699-706.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:09Z","created_by":"seanb4t","updated_at":"2026-02-06T17:19:00Z","closed_at":"2026-02-06T17:19:00Z","dependencies":[{"issue_id":"holomush-c0hh","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-c1d","title":"Add ContainmentType constants for type safety","description":"## Context\n\nIn `internal/world/object.go` (lines 43-54), the `Containment.Type()` method returns string literals like \"location\", \"character\", \"object\", but constants for these values already exist in `internal/world/payloads.go`.\n\n## Problem\n\nThe `Containment.Type()` method duplicates the string values instead of using the existing constants:\n```go\n// object.go - uses literals\nfunc (c *Containment) Type() string {\n    if c.LocationID \\!= nil {\n        return \"location\"  // Should use ContainmentTypeLocation\n    }\n    // ...\n}\n\n// payloads.go - has constants\nconst (\n    ContainmentTypeLocation  = \"location\"\n    ContainmentTypeCharacter = \"character\"\n    ContainmentTypeObject    = \"object\"\n)\n```\n\n## Acceptance Criteria\n\n- [ ] Update `Containment.Type()` in `object.go` to return the constants from `payloads.go`\n- [ ] Verify no circular import issues (both are in same package, should be fine)\n- [ ] All existing tests pass\n\n## Implementation Notes\n\nSimple change - update return statements to use constants:\n```go\nfunc (c *Containment) Type() string {\n    if c.LocationID \\!= nil {\n        return ContainmentTypeLocation\n    }\n    if c.CharacterID \\!= nil {\n        return ContainmentTypeCharacter\n    }\n    if c.ObjectID \\!= nil {\n        return ContainmentTypeObject\n    }\n    return \"\"\n}\n```\n\nThis is a low-priority cleanup task.","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T19:27:51Z","created_by":"seanb4t","updated_at":"2026-01-24T19:39:06Z","closed_at":"2026-01-24T19:39:06Z","work_type":"mutex"}
{"id":"holomush-c2c","title":"Add CLI command context to error wrapping","description":"## Problem\nErrors don't indicate which CLI command failed. When a user sees `MIGRATION_INIT_FAILED`, they don't know if it was during `up`, `down`, `status`, etc.\n\n## Source\nPR Review: silent-failure-hunter agent\n\n## Location\n`cmd/holomush/migrate.go` - multiple error return sites\n\n## Suggested Fix\nWrap errors with command context at the CLI layer:\n\n```go\nmigrator, err := store.NewMigrator(url)\nif err \\!= nil {\n    return oops.With(\"command\", \"migrate up\").Wrap(err)\n}\n```\n\n## Acceptance Criteria\n- [ ] All error returns in CLI include command context\n- [ ] Error messages clearly indicate which command failed\n- [ ] Lint passes: `task lint`","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T04:13:51Z","created_by":"seanb4t","updated_at":"2026-01-25T13:42:56Z","closed_at":"2026-01-25T13:42:56Z","work_type":"mutex"}
{"id":"holomush-c3cro","title":"Update docs to remove @ prefixes/decorators","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-05T02:10:53Z","created_by":"seanb4t","updated_at":"2026-02-05T02:19:50Z","closed_at":"2026-02-05T02:19:50Z","work_type":"mutex"}
{"id":"holomush-c6qch","title":"[E7] Migrate callers from AccessControl to AccessPolicyEngine","description":"Migrate all ~35 callers of AccessControl.Check(ctx, subject, action, resource) bool to the new AccessPolicyEngine.Evaluate(ctx, AccessRequest) (Decision, error) interface. Remove the accessControlAdapter once all callers are migrated. Track via grep for AccessControl usage outside of the adapter.","status":"open","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-05T19:06:30Z","created_by":"seanb4t","updated_at":"2026-02-05T19:06:30Z","dependencies":[{"issue_id":"holomush-c6qch","depends_on_id":"holomush-5k1.5","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-c83","title":"Investigate golang-migrate library for database migrations","description":"Evaluate using github.com/golang-migrate/migrate instead of rolling our own migration system.\n\n## Investigation Goals\n- Review golang-migrate features and API\n- Compare with current/planned migration approach\n- Assess integration complexity with our PostgreSQL setup\n- Evaluate CLI tooling and developer experience\n- Document pros/cons and recommendation\n\n## Reference\n- Library: https://github.com/golang-migrate/migrate\n- Current migration approach: TBD (if any exists)\n\n## Acceptance Criteria\n- [ ] Document current migration approach (if any)\n- [ ] Summarize golang-migrate capabilities\n- [ ] Identify integration points with HoloMUSH\n- [ ] Provide recommendation with justification","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T23:37:37Z","created_by":"seanb4t","updated_at":"2026-01-25T03:28:29Z","closed_at":"2026-01-25T03:28:29Z","work_type":"mutex"}
{"id":"holomush-cdap","title":"Mark implementation plan as historical/superseded","description":"## Problem\n\nThe implementation plan contains a stale comment saying `Down()` rolls back one migration, but the actual implementation rolls back ALL migrations.\n\n**File:** `docs/plans/2026-01-24-database-migrations-implementation.md:415-421`\n\n## Risk\n\nFuture developers may treat this historical plan as current specification and get confused by the discrepancy.\n\n## Acceptance Criteria\n\n- [ ] Add header note: \"Historical: Implementation complete as of PR #43\"\n- [ ] OR correct the Down() comment at line 415 to match actual behavior\n- [ ] Consider adding similar header to design doc","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T19:00:22Z","created_by":"seanb4t","updated_at":"2026-01-25T19:42:43Z","closed_at":"2026-01-25T19:42:43Z","work_type":"mutex"}
{"id":"holomush-cgc","title":"Enforce invariants in Object.SetContainment","description":"MEDIUM: SetContainment requires external validation. Either make it return error after validating, or make private and expose specific methods (PlaceAtLocation, GiveToCharacter, PutInContainer).","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T00:26:11Z","created_by":"seanb4t","updated_at":"2026-01-24T00:55:02Z","closed_at":"2026-01-24T00:55:02Z","work_type":"mutex"}
{"id":"holomush-ci8","title":"Consider goroutine leak during slow plugin + context cancellation","description":"## Problem\nextism_subscriber.go:105-121 uses a timeout derived from parent context. If parent context is cancelled (during shutdown), DeliverEvent may still block for up to 5 seconds if Extism SDK does not respect context cancellation internally.\n\n## Source\nPR Review Round 7 - code-reviewer agent (Confidence: 85)\n\n## Acceptance Criteria\n- [ ] Test whether Extism SDK respects context cancellation\n- [ ] If not: document limitation and consider workaround\n- [ ] If yes: add test proving cancellation works\n- [ ] Consider adding select with done channel before DeliverEvent\n- [ ] Independent subagent review before closing","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T18:37:05Z","created_by":"seanb4t","updated_at":"2026-01-18T20:30:20Z","closed_at":"2026-01-18T20:30:20Z","dependencies":[{"issue_id":"holomush-ci8","depends_on_id":"holomush-v1r","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"comments":[{"id":4,"issue_id":"holomush-ci8","author":"seanb4t","text":"## Investigation Complete\n\n### Findings\n\n1. **Extism SDK does NOT respect context cancellation during WASM execution**\n   - `CallWithContext` does not interrupt in-flight WASM calls when context is cancelled\n   - The call runs to completion regardless of context state\n\n2. **This is NOT a problem for goroutine leaks** because:\n   - WASM compilation (LoadPlugin) is slow (~1.5s) but happens once\n   - Plugin calls (DeliverEvent) after compilation are **very fast (~1-2ms)**\n   - Even without context cancellation, calls complete almost immediately\n   - The `deliveryTimeout` (default 5s) provides a safety boundary for stuck plugins\n   - `ExtismSubscriber.Stop()` waits for in-flight deliveries via WaitGroup\n\n3. **Changes made:**\n   - Switched from `p.Call()` to `p.CallWithContext(ctx, ...)` for future-proofing\n   - Added comprehensive test `TestExtismHost_DeliverEvent_ContextCancellation` documenting behavior\n   - Test verifies calls complete in \u003c3s even with cancelled contexts\n\n### Recommendation\nNo further action needed. The current implementation is safe.","created_at":"2026-01-18T20:15:26Z"}],"work_type":"mutex"}
{"id":"holomush-cjl","title":"Add mTLS gRPC control port for admin operations","description":"Add an mTLS-authenticated gRPC port for control operations.\n\n**Operations:**\n- Shutdown (graceful stop)\n- Status (detailed process info)  \n- Reload (future: reload config)\n- Drain (future: stop accepting new connections)\n\n**Requirements:**\n- Add `--control-grpc-addr` flag (e.g., `--control-grpc-addr=:9091`)\n- Require mTLS client certificate authentication\n- Reuse existing TLS certificates from `internal/tls`\n- Both core and gateway processes\n- Define proto in `internal/proto/holomush/control/v1/control.proto`\n- Update `holomush status` to use gRPC instead of Unix socket\n\n**Why mTLS gRPC:**\n- Control operations need authentication (shutdown is destructive)\n- gRPC provides typed interface and streaming\n- Consistent with core↔gateway communication pattern\n- Supports remote administration securely","status":"closed","priority":2,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T00:11:13Z","created_by":"seanb4t","updated_at":"2026-01-18T00:20:21Z","closed_at":"2026-01-18T00:20:21Z","work_type":"mutex"}
{"id":"holomush-cmr","title":"Delete redundant TestActorKindDocumentedValues test","description":"## Problem\ndoc_validation_test.go:39-59 TestActorKindDocumentedValues is redundant with TestActorKindConstants.\n\n## Acceptance Criteria\n- [ ] Delete TestActorKindDocumentedValues function\n- [ ] Verify remaining tests still pass\n- [ ] Independent code review before closing","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T16:10:27Z","created_by":"seanb4t","updated_at":"2026-01-18T16:40:34Z","closed_at":"2026-01-18T16:40:34Z","work_type":"mutex"}
{"id":"holomush-co6","title":"Move reusable helpers to helpers.go","description":"LOW: ulidsToStrings, stringsToULIDs, nullableString, marshalLockData in exit_repo.go. Move to helpers.go alongside ulidToStringPtr and parseOptionalULID.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T00:26:13Z","created_by":"seanb4t","updated_at":"2026-01-24T01:13:02Z","closed_at":"2026-01-24T01:13:02Z","work_type":"mutex"}
{"id":"holomush-cri1","title":"[E5.8.2] Investigate HMAC token design decision","description":"## Current State\n\nThe auth spec describes a signed token design using HMAC-SHA256:\n```\ntoken = base64(payload) + \".\" + base64(hmac_sha256(payload, secret))\npayload = {player_id, character_id, issued_at, expires_at}\n```\n\nThe implementation uses a simpler approach:\n- Generate 32 random bytes via crypto/rand\n- Store SHA256(token) in database\n- Send plaintext token to client\n- Validate by hashing received token and looking up in DB\n\n## Questions to Investigate\n\n1. **Why was HMAC not implemented?**\n   - Was this a deliberate security decision?\n   - Performance considerations (DB lookup vs crypto verification)?\n   - Simplicity tradeoff?\n\n2. **Security implications:**\n   - Current approach requires DB lookup for every validation\n   - HMAC approach is stateless (no DB lookup needed)\n   - Current approach allows server-side session invalidation\n   - HMAC approach would require token blacklist for invalidation\n\n3. **Should the spec be updated or the implementation changed?**\n\n## Acceptance Criteria\n\n- [ ] Document the rationale for choosing DB-backed tokens over HMAC\n- [ ] Analyze security tradeoffs between the two approaches\n- [ ] Update spec to reflect chosen design with rationale section\n- [ ] Add ADR (Architecture Decision Record) if decision is significant\n- [ ] Spec section on Web Token Design accurately describes implementation","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T15:10:42Z","created_by":"seanb4t","updated_at":"2026-02-02T15:33:18Z","closed_at":"2026-02-02T15:33:18Z","dependencies":[{"issue_id":"holomush-cri1","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-ctw7","title":"Align pg_trgm and pg_stat_statements down migration approaches","description":"## Problem\nThe two extension migrations have different commenting approaches for their down migrations:\n- `000004_pg_trgm.down.sql` silently doesn't drop the extension\n- `000005_pg_stat_statements.down.sql` has explicit commentary about its no-op nature\n\n## Acceptance Criteria\n- [ ] Align the approach between both extension down migrations\n- [ ] Document the decision more thoroughly in pg_trgm\n\n## Suggested Addition to pg_trgm.down.sql\n```sql\n-- Drop trigram indexes. Extension left in place - may be used by other schemas.\n-- Note: If extension removal is needed, run 'DROP EXTENSION IF EXISTS pg_trgm' manually.\n```\n\n## Files to Modify\n- `internal/store/migrations/000004_pg_trgm.down.sql`","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T21:20:34Z","created_by":"seanb4t","updated_at":"2026-01-25T21:31:36Z","closed_at":"2026-01-25T21:31:36Z","work_type":"mutex"}
{"id":"holomush-cuc5x","title":"[E6.2] Who command handler","description":"Implement who command to list connected players.\n\n**Acceptance Criteria:**\n- Who queries connected sessions\n- Lists player names with idle times\n- Respects visibility rules\n- Formats output nicely\n\n**Files:** internal/command/handlers/who.go, internal/command/handlers/who_test.go\n**Blocks:** holomush-wr9.5","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T18:08:38Z","created_by":"seanb4t","updated_at":"2026-02-02T20:40:59Z","closed_at":"2026-02-02T20:40:59Z","dependencies":[{"issue_id":"holomush-cuc5x","depends_on_id":"holomush-rgihb","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-cuc5x","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-cyg5","title":"Spec + ADR 0014: Update call site count from ~28 to ~24","description":"**Review Finding: I8 (Important)**\n\nCodebase validation found 24 production call sites (23 in world/service.go, 1 in command/dispatcher.go, 1 in rate_limit_middleware.go, 1 in handlers/boot.go, 1 in plugin/hostfunc/commands.go). The spec and ADR 0014 claim ~28-29 which includes test mocks.\n\n**Location:** Main spec migration section + ADR 0014 line 18\n\n**Acceptance Criteria:**\n- Main spec updated to '~24 production call sites (plus test mocks)'\n- ADR 0014 line 18 updated to '~24 production call sites (plus 6 test mocks)'\n- ADR 0014 inventory table clarifies test vs production split","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T14:05:17Z","created_by":"seanb4t","updated_at":"2026-02-06T14:25:48Z","closed_at":"2026-02-06T14:25:48Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-cyg5","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-cyi","title":"Control gRPC authentication with special client cert or admin privileges","description":"The control gRPC interface needs proper authentication. Options:\n1. Special client certificate issued only for control operations\n2. User authentication with system admin privileges\n\nCurrently the control interface uses the same mTLS certs as the main gRPC communication, which means any component with valid certs can control (shutdown) any process.","status":"open","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T00:51:11Z","created_by":"seanb4t","updated_at":"2026-01-19T01:45:17Z","work_type":"mutex"}
{"id":"holomush-cyj","title":"Consolidate duplicate embedded WASM in test files","description":"## Problem\nechoWASM is embedded separately in extism_host_test.go and integration_test.go (as echoWASMIntegration).\n\n## Acceptance Criteria\n- [ ] Single source for embedded WASM fixtures\n- [ ] Remove duplicate //go:embed directives\n- [ ] All tests must pass\n- [ ] Independent code review before closing","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T15:36:21Z","created_by":"seanb4t","updated_at":"2026-01-18T15:58:28Z","closed_at":"2026-01-18T15:58:28Z","dependencies":[{"issue_id":"holomush-cyj","depends_on_id":"holomush-xcz","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d07","title":"Add logo and favicon assets","description":"## Summary\nAdd the HoloMUSH logo and create a favicon for the documentation site.\n\n## Files\n- Copy: Logo to site/assets/logo.png\n- Create: site/assets/favicon.png\n\n## Steps\n1. Ensure site/assets directory exists\n2. Copy HoloMUSH logo to site/assets/logo.png\n3. Create favicon (resize logo to 32x32 or 64x64) as site/assets/favicon.png\n4. Run: cd site \u0026\u0026 uv run zensical build - verify logo appears in header\n5. Commit: feat(docs): add logo and favicon assets\n\n## Acceptance Criteria\n- [ ] Logo appears in site header\n- [ ] Favicon displays in browser tab\n- [ ] Images are appropriately sized\n- [ ] zensical build succeeds\n\n## Reference\nSee docs/plans/2026-01-23-zensical-docs-design.md for logo reference","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T14:05:27Z","created_by":"seanb4t","updated_at":"2026-01-24T16:51:11Z","closed_at":"2026-01-24T16:51:11Z","dependencies":[{"issue_id":"holomush-d07","depends_on_id":"holomush-1zx","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d0tn","title":"Database Migrations System","description":"Implement golang-migrate based database migration system for HoloMUSH.\n\n## Scope\n- Migration framework using golang-migrate with pgx/v5 driver\n- CLI commands: migrate up/down/status/version/force\n- Auto-migration on startup (with opt-out)\n- Embedded SQL migrations\n- Comprehensive operator documentation\n\n## Key Files\n- internal/store/migrate.go - Core migration logic\n- cmd/holomush/migrate.go - CLI commands\n- internal/store/migrations/*.sql - Migration files\n- site/docs/operators/database.md - Operator docs\n\n## PR\n- #43: feat(store): implement golang-migrate migration system\n\n## Review Status\nPR review completed with findings that must be addressed before merge.","status":"closed","priority":1,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T18:08:01Z","created_by":"seanb4t","updated_at":"2026-01-26T00:08:58Z","closed_at":"2026-01-26T00:08:58Z","dependencies":[{"issue_id":"holomush-d0tn","depends_on_id":"holomush-0n5d","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d0tn","depends_on_id":"holomush-0w1j","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d0tn","depends_on_id":"holomush-1332","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d0tn","depends_on_id":"holomush-146c","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d0tn","depends_on_id":"holomush-18ig","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d0tn","depends_on_id":"holomush-18we","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d0tn","depends_on_id":"holomush-40ym","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d0tn","depends_on_id":"holomush-5zm0","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d0tn","depends_on_id":"holomush-68ig","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d0tn","depends_on_id":"holomush-7h4a","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d0tn","depends_on_id":"holomush-b11m","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d0tn","depends_on_id":"holomush-b2qq","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d0tn","depends_on_id":"holomush-cdap","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d0tn","depends_on_id":"holomush-ctw7","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d0tn","depends_on_id":"holomush-etnm","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d0tn","depends_on_id":"holomush-fkog","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d0tn","depends_on_id":"holomush-g23i","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d0tn","depends_on_id":"holomush-j94b","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d0tn","depends_on_id":"holomush-kgfm","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d0tn","depends_on_id":"holomush-muzr","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d0tn","depends_on_id":"holomush-sew8","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d0tn","depends_on_id":"holomush-sled","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d0tn","depends_on_id":"holomush-sxwb","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d0tn","depends_on_id":"holomush-txnz","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d0tn","depends_on_id":"holomush-unxp","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d0tn","depends_on_id":"holomush-vatz","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d0tn","depends_on_id":"holomush-vcd6","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d0tn","depends_on_id":"holomush-wrzc","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d0tn","depends_on_id":"holomush-x7kd","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d0tn","depends_on_id":"holomush-xd5i","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d0tn.1","title":"fix(migrate): MigrationName silently degrades on embedded FS corruption","description":"## Problem\n\n`MigrationName()` in `internal/store/migrate.go:219-226` logs a warning and returns an empty string when `migrationsFS.ReadDir()` fails. The comment explicitly states this indicates \"corruption or tampering\" of the binary.\n\nHowever, CLI callers silently fall back to \"Version N\" display without informing the user:\n\n```go\nname := store.MigrationName(v)\nif name \\!= \"\" {\n    fmt.Fprintf(out, \"  - %s\\n\", name)\n} else {\n    fmt.Fprintf(out, \"  - Version %d\\n\", v)  // Silent fallback\n}\n```\n\n## Impact\n\nIf the embedded FS is corrupted (a security-relevant condition), users see degraded output without knowing something is wrong. The warning log goes to slog which CLI users may not see.\n\n## Acceptance Criteria\n\n- [ ] When `MigrationName()` returns empty for a valid version, CLI output indicates the anomaly\n- [ ] Consider: return error from `MigrationName()` or add second return value indicating failure\n- [ ] Alternative: Add CLI-visible warning when name lookup fails unexpectedly\n- [ ] Document the security implications in code comments\n\n## Files\n\n- `internal/store/migrate.go:219-226` - MigrationName function\n- `cmd/holomush/migrate.go:56-61` - Dry run display logic\n\n## References\n\n- PR #43 review finding (silent-failure-hunter agent)\n- Severity: HIGH","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T21:41:25Z","created_by":"seanb4t","updated_at":"2026-01-25T21:50:14Z","closed_at":"2026-01-25T21:50:14Z","dependencies":[{"issue_id":"holomush-d0tn.1","depends_on_id":"holomush-d0tn","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d0tn.10","title":"Add Migrator.Close() idempotency test","description":"## Context\nPR #43 review suggestion: Tests verify methods return errors after Close(), but don't test that Close() itself is idempotent (calling twice doesn't error or panic).\n\n## Location\n`internal/store/migrate_test.go`\n\n## Suggested Test\n```go\nfunc TestMigrator_Close_Idempotent(t *testing.T) {\n    mock := \u0026mockMigrate{}\n    migrator := \u0026Migrator{m: mock}\n    \n    err1 := migrator.Close()\n    require.NoError(t, err1)\n    \n    err2 := migrator.Close()\n    // Document expected behavior: error or nil?\n}\n```\n\n## Acceptance Criteria\n- [ ] Test added for calling Close() twice\n- [ ] Expected behavior documented (error or idempotent nil)\n- [ ] Test passes","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T22:04:42Z","created_by":"seanb4t","updated_at":"2026-01-25T22:12:20Z","closed_at":"2026-01-25T22:12:20Z","dependencies":[{"issue_id":"holomush-d0tn.10","depends_on_id":"holomush-d0tn","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d0tn.11","title":"Add migration Steps boundary condition test","description":"## Context\nPR #43 review suggestion: Tests cover positive, negative, and zero steps, but don't test attempting more steps than available.\n\n## Location\n`internal/store/migrate_test.go`\n\n## Suggested Test\n```go\nfunc TestMigrator_Steps_ExceedsAvailable(t *testing.T) {\n    // At version 3, trying to step 10 forward should fail gracefully\n    m := \u0026Migrator{m: \u0026mockMigrate{stepsErr: migrate.ErrShortLimit}}\n    err := m.Steps(10)\n    // Verify behavior when more steps requested than available\n}\n```\n\n## Acceptance Criteria\n- [ ] Test added for requesting more steps than available\n- [ ] Expected error behavior documented\n- [ ] Test passes","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T22:04:42Z","created_by":"seanb4t","updated_at":"2026-01-25T22:14:03Z","closed_at":"2026-01-25T22:14:03Z","dependencies":[{"issue_id":"holomush-d0tn.11","depends_on_id":"holomush-d0tn","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d0tn.12","title":"Consider NOTIFY failure metrics","description":"## Context\nPR #43 review suggestion: When `pg_notify` fails in `Append`, the error is logged but execution continues. While this is an intentional design decision with recovery via Replay, repeated failures could indicate serious issues.\n\n## Location\n`internal/store/postgres.go:94-103`\n\n## Suggested Change\nAdd a metric counter for NOTIFY failures to enable alerting on repeated failures. Consider Prometheus counter with labels for stream/channel.\n\n## Acceptance Criteria\n- [ ] Evaluate if metrics are worth adding at this stage\n- [ ] If implementing: Add prometheus counter for notify failures\n- [ ] If implementing: Include stream/channel labels\n- [ ] If not implementing: Document decision in code comment","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T22:04:42Z","created_by":"seanb4t","updated_at":"2026-01-25T22:17:39Z","closed_at":"2026-01-25T22:17:39Z","dependencies":[{"issue_id":"holomush-d0tn.12","depends_on_id":"holomush-d0tn","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d0tn.13","title":"Remove line number references from test comments","description":"## Context\nPR #43 review suggestion: Test comment references specific line numbers that become stale as code changes.\n\n## Location\n`internal/store/migrate_test.go:24-26`\n\n## Current Comment\n\u003e The conversion happens at line 64-65 of migrate.go\n\n## Suggested Change\nChange to: \"The conversion is implemented in NewMigrator. This test confirms the scheme is recognized...\"\n\n## Acceptance Criteria\n- [ ] Line number references removed from test comments\n- [ ] Comments still clearly explain what is being tested\n- [ ] `task lint` passes","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T22:04:42Z","created_by":"seanb4t","updated_at":"2026-01-25T22:18:36Z","closed_at":"2026-01-25T22:18:36Z","dependencies":[{"issue_id":"holomush-d0tn.13","depends_on_id":"holomush-d0tn","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d0tn.14","title":"Add caching to MigrationName() for consistency with allMigrationVersions()","description":"## Problem\n\n`MigrationName()` reads from the embedded FS on every call via `migrationsFS.ReadDir(\"migrations\")`, while `allMigrationVersions()` properly caches its results with `sync.Once`. In CLI dry-run output, `MigrationName` is called in a loop for each pending migration, causing redundant FS reads.\n\n## Location\n\n`internal/store/migrate.go:230-246`\n\n## Acceptance Criteria\n\n- [ ] Cache the ReadDir result using `sync.Once` pattern (similar to `cachedVersionsOnce`)\n- [ ] OR reuse the same entries slice from `allMigrationVersions` internal cache\n- [ ] Verify dry-run commands only read embedded FS once\n- [ ] Add benchmark test comparing before/after performance\n- [ ] Tests pass with `task test`\n- [ ] Linting passes with `task lint`\n\n## Context\n\nIdentified in PR #43 code review. While embedded FS reads are fast, caching is inconsistent with the documented rationale for caching `allMigrationVersions`.\n\n## Confidence\n\n85% - Minor performance concern but inconsistent with caching rationale documented elsewhere.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T22:43:58Z","created_by":"seanb4t","updated_at":"2026-01-25T22:53:11Z","closed_at":"2026-01-25T22:53:11Z","dependencies":[{"issue_id":"holomush-d0tn.14","depends_on_id":"holomush-d0tn","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d0tn.15","title":"Add test for runAutoMigration close error path","description":"## Problem\n\nThe `runAutoMigration` function logs close errors but the tests do not verify this behavior. The close error path (`slog.Warn(\"failed to close migrator\", ...)`) is untested.\n\n## Location\n\n`cmd/holomush/core.go:474-476`\n\n## Acceptance Criteria\n\n- [ ] Add test case in `cmd/holomush/automigrate_test.go` where `mockMigrator.Close()` returns an error\n- [ ] Verify the warning is logged (capture slog output or use test hook)\n- [ ] Test verifies the main operation still succeeds despite close error\n- [ ] Tests pass with `task test`\n- [ ] Coverage for `runAutoMigration` includes the close error path\n\n## Context\n\nIdentified in PR #43 code review. CLAUDE.md requires \u003e80% test coverage.\n\n## Confidence\n\n82% - Tests should verify all code paths.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T22:43:59Z","created_by":"seanb4t","updated_at":"2026-01-25T22:48:43Z","closed_at":"2026-01-25T22:48:43Z","dependencies":[{"issue_id":"holomush-d0tn.15","depends_on_id":"holomush-d0tn","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d0tn.16","title":"Add test for \"Version X\" fallback format in dry-run output","description":"## Problem\n\nIn `runMigrateUpDryRun` and `runMigrateDownDryRun`, when `store.MigrationName()` returns an empty string (version not found), the code falls back to \"Version X\" format. This branch is not tested.\n\n## Location\n\n`cmd/holomush/migrate.go` - dry-run functions\n`cmd/holomush/migrate_test.go`\n\n## Acceptance Criteria\n\n- [ ] Add test case using a mock version number that does not exist (e.g., 999)\n- [ ] Verify output contains \"Version 999\" format instead of migration name\n- [ ] Test both `runMigrateUpDryRun` and `runMigrateDownDryRun` fallback paths\n- [ ] Tests pass with `task test`\n\n## Context\n\nIdentified in PR #43 test coverage analysis. The code path is simple but untested. This is a nice-to-have rather than critical.\n\n## Criticality\n\n5/10 - Simple code path but should be tested for regression protection.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T22:43:59Z","created_by":"seanb4t","updated_at":"2026-01-25T22:56:21Z","closed_at":"2026-01-25T22:56:21Z","dependencies":[{"issue_id":"holomush-d0tn.16","depends_on_id":"holomush-d0tn","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d0tn.17","title":"Fix PostgreSQL version in documentation (18 does not exist)","description":"## Problem\n\nDocumentation specifies \"PostgreSQL 18 or later\" as a prerequisite, but PostgreSQL 18 does not exist. PostgreSQL versioning is at 17.x as of late 2025/early 2026.\n\n## Locations\n\n- `site/docs/operators/database.md:8` - mentions PostgreSQL 18\n- `site/docs/operators/installation.md` - Docker examples reference `postgres:18-alpine`\n\n## Acceptance Criteria\n\n- [ ] Verify minimum supported PostgreSQL version (likely 15, 16, or 17)\n- [ ] Update `site/docs/operators/database.md` with correct version\n- [ ] Update `site/docs/operators/installation.md` Docker examples with correct image tag\n- [ ] Update any other documentation referencing PostgreSQL 18\n- [ ] Test Docker commands work with corrected image tag\n- [ ] Linting passes with `task lint`\n\n## Context\n\nIdentified in PR #43 comment analysis. Documentation accuracy is important for operators deploying HoloMUSH.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T22:43:59Z","created_by":"seanb4t","updated_at":"2026-01-25T22:45:56Z","closed_at":"2026-01-25T22:45:56Z","dependencies":[{"issue_id":"holomush-d0tn.17","depends_on_id":"holomush-d0tn","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d0tn.18","title":"Fix or remove TestMigrationsFS_EmbeddedFiles reference in code comment","description":"## Problem\n\nThe `loadMigrationVersions` comment references a test file `TestMigrationsFS_EmbeddedFiles in migrate_embed_test.go` that validates embedded migrations. However, this test may not exist with that exact name or in that file.\n\n## Location\n\n`internal/store/migrate.go:171-177`\n\n```go\n// The embedded migrations are validated at compile time by TestMigrationsFS_EmbeddedFiles \n// in migrate_embed_test.go, which ensures all files follow the NNNNNN_name.(up|down).sql pattern.\n```\n\n## Acceptance Criteria\n\n- [ ] Verify if `TestMigrationsFS_EmbeddedFiles` exists in any test file\n- [ ] If it exists: Update the comment with correct file name\n- [ ] If it does not exist: Either create the test OR update comment to remove the reference\n- [ ] Ensure the embedded FS validation claim is accurate\n- [ ] Tests pass with `task test`\n\n## Context\n\nIdentified in PR #43 comment analysis. Incorrect cross-references in documentation cause confusion for future maintainers.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T22:43:59Z","created_by":"seanb4t","updated_at":"2026-01-25T22:54:06Z","closed_at":"2026-01-25T22:54:06Z","dependencies":[{"issue_id":"holomush-d0tn.18","depends_on_id":"holomush-d0tn","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d0tn.19","title":"Remove stale PR references from code comments","description":"## Problem\n\nSeveral code comments reference \"PR #43 review\" without context. PR references in code comments become stale over time and require context to understand.\n\n## Locations\n\n- `internal/store/postgres.go:93-100` - \"Metrics consideration (PR #43 review)\"\n- `cmd/holomush/migrate.go:248-254` - \"This was evaluated in PR #43 review\"\n- `internal/store/migrate.go:193-198` - \"Logger DI was evaluated and deemed unnecessary complexity (PR #43 review)\"\n\n## Acceptance Criteria\n\n- [ ] Remove or generalize PR references in the above locations\n- [ ] Keep the technical rationale (the valuable part)\n- [ ] Options: remove PR ref entirely, add date for context, or generalize to \"This design decision was evaluated and deemed acceptable\"\n- [ ] Linting passes with `task lint`\n\n## Context\n\nIdentified in PR #43 comment analysis. The technical rationale is excellent and provides lasting value. The PR references will become stale.\n\n## Priority\n\nP4 (backlog) - This is a documentation polish task, not urgent.","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T22:44:00Z","created_by":"seanb4t","updated_at":"2026-01-25T22:57:15Z","closed_at":"2026-01-25T22:57:15Z","dependencies":[{"issue_id":"holomush-d0tn.19","depends_on_id":"holomush-d0tn","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d0tn.2","title":"fix(migrate): wrap errors consistently in status/version/force logic","description":"## Problem\n\nThree CLI logic functions return raw errors without wrapping, inconsistent with other similar functions that use `oops.With()`:\n\n1. `runMigrateStatusLogic` (line 198-199)\n2. `runMigrateVersionLogic` (line 216-218)  \n3. `runMigrateForceLogic` (line 229-230)\n\nCompare to `runMigrateUpDryRun` which properly wraps:\n```go\nif err \\!= nil {\n    return oops.With(\"operation\", \"get version\").Wrap(err)\n}\n```\n\n## Impact\n\nUsers get less context when status/version/force commands fail, making debugging harder.\n\n## Acceptance Criteria\n\n- [ ] `runMigrateStatusLogic` wraps errors with `oops.With(\"operation\", \"get version\")`\n- [ ] `runMigrateVersionLogic` wraps errors with `oops.With(\"operation\", \"get version\")`\n- [ ] `runMigrateForceLogic` wraps errors with `oops.With(\"operation\", \"force version\")`\n- [ ] Error wrapping pattern is consistent across all migrate subcommand logic functions\n\n## Files\n\n- `cmd/holomush/migrate.go:196-231` - Three affected functions\n\n## References\n\n- PR #43 review finding (silent-failure-hunter agent)\n- Severity: MEDIUM (affects 3 locations)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T21:41:25Z","created_by":"seanb4t","updated_at":"2026-01-25T21:52:48Z","closed_at":"2026-01-25T21:52:48Z","dependencies":[{"issue_id":"holomush-d0tn.2","depends_on_id":"holomush-d0tn","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d0tn.20","title":"Add error handling for PostgresEventStore.Close()","description":"## Problem\n`eventStore.Close()` errors are silently ignored in `seed.go:99` and `core.go:165`. Database connections could leak without any logging.\n\n## Source\nPR #43 Review - silent-failure-hunter agent (Important Issue #1)\n\n## Files to Modify\n- `internal/store/postgres.go` - Change Close() signature to return error\n- `cmd/holomush/seed.go:99` - Handle close error\n- `cmd/holomush/core.go:165` - Handle close error\n\n## Acceptance Criteria\n- [ ] PostgresEventStore.Close() returns an error\n- [ ] All callers log close errors at WARN level with structured context\n- [ ] Tests verify close error propagation\n- [ ] No regression in existing functionality","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T23:49:54Z","created_by":"seanb4t","updated_at":"2026-01-26T00:04:40Z","closed_at":"2026-01-26T00:04:40Z","dependencies":[{"issue_id":"holomush-d0tn.20","depends_on_id":"holomush-d0tn","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d0tn.21","title":"Elevate connection cleanup error logging to ERROR level","description":"## Problem\nConnection cleanup failures in `postgres.go:257` and `postgres.go:270` are logged as WARN, but they indicate guaranteed resource leaks that will eventually cause connection pool exhaustion.\n\n## Source\nPR #43 Review - silent-failure-hunter agent (Important Issue #2)\n\n## Files to Modify\n- `internal/store/postgres.go:257-259` - Cleanup on error path\n- `internal/store/postgres.go:270-272` - Subscription cleanup\n\n## Acceptance Criteria\n- [ ] Connection cleanup failures logged at ERROR level\n- [ ] Error messages updated: 'connection may leak' → 'connection will leak'\n- [ ] Consider adding structured error codes via oops","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T23:49:55Z","created_by":"seanb4t","updated_at":"2026-01-26T00:05:38Z","closed_at":"2026-01-26T00:05:38Z","dependencies":[{"issue_id":"holomush-d0tn.21","depends_on_id":"holomush-d0tn","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d0tn.21","depends_on_id":"holomush-d0tn.20","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d0tn.22","title":"Add test for concurrent migration dirty state handling","description":"## Problem\nNo test exists for the scenario where concurrent migrations create a dirty state due to one failing mid-execution while another is running. In HA deployments, this could cause split-brain scenarios.\n\n## Source\nPR #43 Review - pr-test-analyzer agent (Critical Gap #1)\n\n## Files to Modify\n- `internal/store/migrate_integration_test.go` - Add integration test\n\n## Test Scenario\n1. Create two migrators pointing to same database\n2. Have migrator1 run Up() normally\n3. Simulate a failure in migrator2 (e.g., inject bad migration)\n4. Verify dirty state is detected by both migrators\n5. Verify Force() can recover from the dirty state\n\n## Acceptance Criteria\n- [ ] Integration test `TestMigrator_ConcurrentMigrationDirtyStateHandling` exists\n- [ ] Test verifies dirty state detection across instances\n- [ ] Test verifies Force() recovery works\n- [ ] Test runs in CI with testcontainers","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T23:49:55Z","created_by":"seanb4t","updated_at":"2026-01-25T23:59:49Z","closed_at":"2026-01-25T23:59:49Z","dependencies":[{"issue_id":"holomush-d0tn.22","depends_on_id":"holomush-d0tn","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d0tn.23","title":"Add test for Force() with version exceeding available migrations","description":"## Problem\nNo test for `Force(999)` when only migrations 1-8 exist. If an operator mistakenly forces a version higher than available, subsequent Up() calls would do nothing, causing silent schema drift.\n\n## Source\nPR #43 Review - pr-test-analyzer agent (Important Improvement #3)\n\n## Files to Modify\n- `internal/store/migrate_integration_test.go`\n\n## Test Scenario\n1. Apply all migrations (version 8)\n2. Force(999)\n3. Verify Version() returns 999\n4. Verify Up() returns no error (ErrNoChange)\n5. Verify PendingMigrations() returns empty list\n\n## Acceptance Criteria\n- [ ] Test `TestMigrator_Force_VersionExceedsAvailable` exists\n- [ ] Test documents the dangerous behavior\n- [ ] Consider adding CLI warning when Force() version \u003e max available","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T23:49:55Z","created_by":"seanb4t","updated_at":"2026-01-25T23:59:49Z","closed_at":"2026-01-25T23:59:49Z","dependencies":[{"issue_id":"holomush-d0tn.23","depends_on_id":"holomush-d0tn","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d0tn.24","title":"Improve parseAutoMigrate whitespace handling","description":"## Problem\n`HOLOMUSH_DB_AUTO_MIGRATE=\"   \"` is treated as 'invalid value' and defaults to true with a warning, rather than being treated as 'not set'. This causes unnecessary log noise.\n\n## Source\nPR #43 Review - pr-test-analyzer agent (Important Improvement #2)\n\n## Files to Modify\n- `cmd/holomush/deps.go` - `parseAutoMigrate` function\n\n## Acceptance Criteria\n- [ ] Whitespace-only values trimmed and treated as 'not set'\n- [ ] No warning logged for whitespace-only values\n- [ ] Test verifies whitespace handling without warning","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T23:49:56Z","created_by":"seanb4t","updated_at":"2026-01-25T23:59:49Z","closed_at":"2026-01-25T23:59:49Z","dependencies":[{"issue_id":"holomush-d0tn.24","depends_on_id":"holomush-d0tn","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d0tn.25","title":"Add context.Context to Migrator lifecycle methods","description":"## Problem\nMigrator methods (Up, Down, Steps) don't accept context.Context, preventing cancellation and timeout support. Modern Go practice requires cancellation support for long-running operations.\n\n## Source\nPR #43 Review - type-design-analyzer agent (Cross-Cutting Improvement #1)\n\n## Files to Modify\n- `internal/store/migrate.go` - Add ctx parameter to Up(), Down(), Steps()\n- `cmd/holomush/migrate.go` - Update CLI to pass context\n- All tests using these methods\n\n## Acceptance Criteria\n- [ ] Up(ctx), Down(ctx), Steps(ctx, n) signatures\n- [ ] Context cancellation stops migration mid-execution\n- [ ] CLI commands pass cmd.Context()\n- [ ] Backward compatibility considered (may need interface changes)","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T23:49:56Z","created_by":"seanb4t","updated_at":"2026-01-26T00:04:40Z","closed_at":"2026-01-26T00:04:40Z","dependencies":[{"issue_id":"holomush-d0tn.25","depends_on_id":"holomush-d0tn","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d0tn.26","title":"Document Migrator concurrency safety","description":"## Problem\nNo type documents whether it's safe for concurrent use. The answer is that Migrator is NOT safe for concurrent use, but this isn't expressed in the type documentation.\n\n## Source\nPR #43 Review - type-design-analyzer agent (Cross-Cutting Improvement #5)\n\n## Files to Modify\n- `internal/store/migrate.go` - Add documentation to Migrator type\n\n## Acceptance Criteria\n- [ ] Migrator type comment explicitly states NOT safe for concurrent use\n- [ ] Each instance should be used from a single goroutine\n- [ ] Must not be copied","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T23:49:56Z","created_by":"seanb4t","updated_at":"2026-01-25T23:59:49Z","closed_at":"2026-01-25T23:59:49Z","dependencies":[{"issue_id":"holomush-d0tn.26","depends_on_id":"holomush-d0tn","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d0tn.27","title":"Consider WithMigrator builder pattern for automatic cleanup","description":"## Problem\nConstruction currently requires manual defer for Close(). A builder pattern could provide automatic cleanup and improve usability.\n\n## Source\nPR #43 Review - type-design-analyzer agent (Cross-Cutting Improvement #6)\n\n## Proposed Pattern\n```go\n// Current (error-prone)\nmigrator, err := store.NewMigrator(url)\nif err \\!= nil { return err }\ndefer migrator.Close()\nreturn migrator.Up()\n\n// Proposed (automatic cleanup)\nerr := store.WithMigrator(url, func(m *Migrator) error {\n    return m.Up()\n})\n```\n\n## Acceptance Criteria\n- [ ] Evaluate whether pattern provides value over existing approach\n- [ ] If implemented: WithMigrator() function with callback\n- [ ] If rejected: Document decision in code comment","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T23:49:56Z","created_by":"seanb4t","updated_at":"2026-01-26T00:04:40Z","closed_at":"2026-01-26T00:04:40Z","dependencies":[{"issue_id":"holomush-d0tn.27","depends_on_id":"holomush-d0tn","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d0tn.27","depends_on_id":"holomush-d0tn.20","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d0tn.28","title":"Remove obvious/redundant comments in seed.go","description":"## Problem\nSeveral comments restate what's obvious from the code, adding maintenance burden without value.\n\n## Source\nPR #43 Review - comment-analyzer agent\n\n## Comments to Remove\n- `seed.go:25` - 'Default timeout for seed command' (obvious from const name)\n- `seed.go:28` - 'seedConfig holds configuration...' (obvious from type name)\n- `seed.go:34` - 'seedLocation holds seed data...' (obvious from type name)\n- `seed.go:101` - 'Reuse the event store's pool...' (obvious from code)\n\n## Acceptance Criteria\n- [ ] Listed comments removed\n- [ ] No functional changes\n- [ ] Code remains self-documenting","status":"closed","priority":4,"issue_type":"chore","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T23:49:57Z","created_by":"seanb4t","updated_at":"2026-01-25T23:59:49Z","closed_at":"2026-01-25T23:59:49Z","dependencies":[{"issue_id":"holomush-d0tn.28","depends_on_id":"holomush-d0tn","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d0tn.29","title":"Simplify over-documented function headers in migrate.go","description":"## Problem\nSome function comments are longer than the functions themselves and contain implementation details that could become stale.\n\n## Source\nPR #43 Review - comment-analyzer agent\n\n## Comments to Simplify\n- `migrate.go:161-164` - allMigrationVersions() - reduce to essential info\n- `migrate.go:245-262` - MigrationName() - remove design justifications\n\n## Acceptance Criteria\n- [ ] Function comments focus on contract, not implementation\n- [ ] Remove temporal references ('PR #43 review', 'later phase')\n- [ ] Keep essential information (return semantics, error conditions)","status":"closed","priority":4,"issue_type":"chore","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T23:49:57Z","created_by":"seanb4t","updated_at":"2026-01-25T23:59:49Z","closed_at":"2026-01-25T23:59:49Z","dependencies":[{"issue_id":"holomush-d0tn.29","depends_on_id":"holomush-d0tn","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d0tn.3","title":"docs(migrate): document defense-in-depth version validation pattern","description":"## Context\n\nNegative version validation is duplicated in two places:\n- `parseForceVersion()` in `cmd/holomush/migrate.go:431-433` (CLI layer)\n- `Migrator.Force()` in `internal/store/migrate.go:123-125` (store layer)\n\nThis is intentional **defense-in-depth** - validating at both layers ensures the invariant holds regardless of entry point.\n\n## Problem\n\nThe duplication lacks documentation explaining it is intentional. Future maintainers may remove one check thinking it is redundant.\n\n## Acceptance Criteria\n\n- [ ] Add comment in `parseForceVersion()` noting validation is intentionally duplicated for defense-in-depth\n- [ ] Add comment in `Migrator.Force()` noting CLI also validates (defense-in-depth)\n- [ ] Alternatively: Remove CLI check and document that store layer is authoritative\n\n## Files\n\n- `cmd/holomush/migrate.go:426-435` - parseForceVersion\n- `internal/store/migrate.go:122-125` - Migrator.Force validation\n\n## References\n\n- PR #43 review finding (code-simplifier agent)\n- Severity: Suggestion","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T21:41:26Z","created_by":"seanb4t","updated_at":"2026-01-25T21:53:25Z","closed_at":"2026-01-25T21:53:25Z","dependencies":[{"issue_id":"holomush-d0tn.3","depends_on_id":"holomush-d0tn","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d0tn.4","title":"docs(migrate): restore nolint comment context","description":"## Problem\n\nThe nolint comments in `cmd/holomush/migrate.go` were truncated, losing important context about **why** errors are ignored:\n\n**Original (better):**\n```go\n//nolint:errcheck // CLI output errors are intentionally ignored - no recovery possible\n```\n\n**Current (truncated):**\n```go\n//nolint:errcheck // CLI output\n```\n\n## Impact\n\nFuture maintainers lose context about the design decision. The truncated comments do not explain that there is no recovery possible for CLI output errors.\n\n## Acceptance Criteria\n\n- [ ] Restore full context to nolint comments at lines 36, 70, 126, 157, 195, 214, 226\n- [ ] Each comment should explain: \"CLI output errors are intentionally ignored - no recovery possible\"\n- [ ] Alternatively: Reference the file-level comment at line 19-20 that explains the pattern\n\n## Files\n\n- `cmd/holomush/migrate.go:36,70,126,157,195,214,226` - Truncated nolint comments\n\n## References\n\n- PR #43 review finding (code-simplifier agent)\n- Severity: Suggestion (documentation quality)","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T21:41:26Z","created_by":"seanb4t","updated_at":"2026-01-25T21:54:04Z","closed_at":"2026-01-25T21:54:04Z","dependencies":[{"issue_id":"holomush-d0tn.4","depends_on_id":"holomush-d0tn","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d0tn.5","title":"Update PostgreSQL version documentation to 18+","description":"## Context\nPR #43 review identified that documentation states PostgreSQL 14+ but the actual requirement is PostgreSQL 18+.\n\n## Files to Update\n- `site/docs/operators/database.md:8` - Change 'PostgreSQL 14 or later' to 'PostgreSQL 18 or later'\n- Verify docker-compose examples already use PostgreSQL 18\n\n## Acceptance Criteria\n- [ ] `database.md` prerequisites section states PostgreSQL 18+\n- [ ] All documentation consistently references PostgreSQL 18+\n- [ ] `task lint:markdown` passes","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T22:04:40Z","created_by":"seanb4t","updated_at":"2026-01-25T22:09:16Z","closed_at":"2026-01-25T22:09:16Z","dependencies":[{"issue_id":"holomush-d0tn.5","depends_on_id":"holomush-d0tn","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d0tn.6","title":"Add warning comment to bootstrap-migrations.sql","description":"## Context\nPR #43 review identified that the bootstrap script assumes all 7 migrations were applied to existing databases. If someone has partial migrations (versions 1-5), marking version 7 would skip migrations 6-7.\n\n## Location\n`scripts/bootstrap-migrations.sql:16-19`\n\n## Required Changes\nAdd a clear warning comment explaining:\n1. This script is ONLY for databases that were fully migrated with the old system\n2. Using this on partially-migrated databases will cause migrations to be skipped\n3. Consider adding a check that expected tables exist\n\n## Acceptance Criteria\n- [ ] Warning comment added to bootstrap script header\n- [ ] Comment explains the specific risk of partial migrations\n- [ ] Optional: Add SQL assertions that key tables exist before marking version 7","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T22:04:41Z","created_by":"seanb4t","updated_at":"2026-01-25T22:10:14Z","closed_at":"2026-01-25T22:10:14Z","dependencies":[{"issue_id":"holomush-d0tn.6","depends_on_id":"holomush-d0tn","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d0tn.7","title":"Update design doc to note interface abstraction","description":"## Context\nPR #43 review identified that the design document shows `*migrate.Migrate` but the implementation uses `migrateIface` interface for testability.\n\n## Location\n`docs/plans/2026-01-24-database-migrations-design.md:103-105`\n\n## Required Changes\nAdd a note in the API section explaining that the interface abstraction was added for testability. The implementation plan header already notes the code is the source of truth.\n\n## Acceptance Criteria\n- [ ] Design doc API section notes the interface abstraction\n- [ ] Explanation mentions testability as the reason\n- [ ] `task lint:markdown` passes","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T22:04:41Z","created_by":"seanb4t","updated_at":"2026-01-25T22:10:50Z","closed_at":"2026-01-25T22:10:50Z","dependencies":[{"issue_id":"holomush-d0tn.7","depends_on_id":"holomush-d0tn","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d0tn.8","title":"Consider logger DI for loadMigrationVersions","description":"## Context\nPR #43 review suggestion: The `loadMigrationVersions` function uses global `slog` logger for warnings. For testability and consistency with the project's DI patterns, consider accepting a logger parameter.\n\n## Location\n`internal/store/migrate.go:192-198`\n\n## Current Code\n```go\nslog.Warn(\"migration file name doesn't match expected format, skipping\",\n    \"filename\", name,\n    \"expected_format\", \"NNNNNN_name.up.sql\",\n    \"error\", err)\n```\n\n## Suggested Change\nAccept a `*slog.Logger` parameter or make this configurable via the Migrator struct.\n\n## Acceptance Criteria\n- [ ] Evaluate if logger DI is worth the complexity\n- [ ] If implementing: Add logger field to Migrator struct\n- [ ] If implementing: Update tests to verify warning is logged\n- [ ] If not implementing: Document decision to use global logger","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T22:04:41Z","created_by":"seanb4t","updated_at":"2026-01-25T22:15:23Z","closed_at":"2026-01-25T22:15:23Z","dependencies":[{"issue_id":"holomush-d0tn.8","depends_on_id":"holomush-d0tn","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d0tn.9","title":"Extract CLI migrate command boilerplate","description":"## Context\nPR #43 review suggestion: Each migrate subcommand (up, down, status, version, force) has similar boilerplate for:\n1. Getting DATABASE_URL\n2. Creating migrator\n3. Setting up defer for Close()\n4. Handling close errors\n\n## Location\n`cmd/holomush/migrate.go:244-274, 299-328, 347-369, 386-408`\n\n## Suggested Change\nExtract common setup into a helper function. Low priority since current approach is explicit and readable.\n\n## Acceptance Criteria\n- [ ] Evaluate if extraction improves maintainability\n- [ ] If implementing: Create helper that handles common setup\n- [ ] If implementing: Update all subcommands to use helper\n- [ ] All existing tests pass","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T22:04:41Z","created_by":"seanb4t","updated_at":"2026-01-25T22:16:24Z","closed_at":"2026-01-25T22:16:24Z","dependencies":[{"issue_id":"holomush-d0tn.9","depends_on_id":"holomush-d0tn","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d1w","title":"Run task fmt to fix import order in extism_host.go","description":"## Summary\nImport statements in extism_host.go are not in gofumpt-canonical order.\n\n## Location\n`internal/wasm/extism_host.go:9-10`\n\n## Current\n```go\n\"sync\"\n\"log/slog\"\n```\n\n## Expected (after task fmt)\n```go\n\"log/slog\"\n\"sync\"\n```\n\n## Acceptance Criteria\n- [ ] Run `task fmt`\n- [ ] Verify `task lint` passes\n- [ ] Independent review by subagent confirms fix","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T17:13:23Z","created_by":"seanb4t","updated_at":"2026-01-18T17:20:43Z","closed_at":"2026-01-18T17:20:43Z","work_type":"mutex"}
{"id":"holomush-d3n","title":"(EPIC) Database Migrations PR #43 Review Round 2","description":"Track fixes identified during second PR #43 code review after initial fixes were applied.\n\n## Context\nAfter addressing the first round of review findings, a second comprehensive review identified additional issues and test coverage gaps.\n\n## Important Issues (P1)\n1. Inconsistent output method (fmt.Println vs cmd.Println)\n2. Missing oops context in error wrapping\n3. Design doc auto-migrate default mismatch\n\n## Test Coverage Gaps (P1)\n4. No tests for getDatabaseURL()\n5. No tests for migrate force version parsing\n6. No tests for Migrator.Close() error paths\n\n## Suggestions (P2)\n7. Post-migration version query failures should be warnings\n8. Add error code assertions to integration tests\n\n## Acceptance Criteria\n- [ ] All P1 issues resolved\n- [ ] Test coverage gaps addressed\n- [ ] P2 suggestions addressed or documented as deferred\n- [ ] Tests pass\n- [ ] Lint passes","status":"closed","priority":1,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T13:51:31Z","created_by":"seanb4t","updated_at":"2026-01-25T14:48:56Z","closed_at":"2026-01-25T14:48:56Z","dependencies":[{"issue_id":"holomush-d3n","depends_on_id":"holomush-38p","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d3n","depends_on_id":"holomush-3i5","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d3n","depends_on_id":"holomush-6gr","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d3n","depends_on_id":"holomush-df6","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d3n","depends_on_id":"holomush-er7","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d3n","depends_on_id":"holomush-g7n","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d3n","depends_on_id":"holomush-ntm","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d3n","depends_on_id":"holomush-t4e","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d3oe","title":"Add decision #50 to decisions.md Table of Contents","description":"Decision #50 (Plugin Attribute Collision Behavior) exists in the body of decisions.md but is not listed in the Table of Contents. The ToC ends at decision #49.\n\n**Acceptance Criteria:**\n- [ ] Decision #50 added to Table of Contents\n- [ ] ToC entry links correctly to the decision anchor\n\n**Files:** docs/specs/2026-02-05-full-abac-design-decisions.md","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T22:36:58Z","created_by":"seanb4t","updated_at":"2026-02-06T23:13:51Z","closed_at":"2026-02-06T23:13:51Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-d3oe","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d62","title":"Add plugin.name span attribute to LoadPlugin","description":"## Problem\nDeliverEvent includes plugin.name in trace span but LoadPlugin does not (extism_host.go:38-40).\n\n## Acceptance Criteria\n- [ ] Add test verifying span attributes exist\n- [ ] Add plugin.name attribute to LoadPlugin span\n- [ ] Test must pass\n- [ ] Independent code review before closing","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T16:09:59Z","created_by":"seanb4t","updated_at":"2026-01-18T16:31:33Z","closed_at":"2026-01-18T16:31:33Z","work_type":"mutex"}
{"id":"holomush-d6sn","title":"Auth: Log ignored errors in best-effort operations","description":"Several locations use //nolint:errcheck for best-effort operations. While not propagating errors is appropriate, they should be logged for visibility. Locations: reset_service.go:141, auth_service.go:87, auth_service.go:112, auth_service.go:184, auth_handler.go:221.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T01:29:05Z","created_by":"seanb4t","updated_at":"2026-02-02T02:10:11Z","closed_at":"2026-02-02T02:10:11Z","dependencies":[{"issue_id":"holomush-d6sn","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-d6sn","depends_on_id":"holomush-lt4k","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-d8k","title":"Extract newTestHost helper in extism_host_test.go","description":"## Problem\nextism_host_test.go has 12 repetitions of tracer/host setup code.\n\n## Acceptance Criteria\n- [ ] Create newTestHost(t) helper function\n- [ ] Replace all repetitions\n- [ ] Verify tests still pass\n- [ ] Independent code review before closing","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T16:10:29Z","created_by":"seanb4t","updated_at":"2026-01-18T16:46:09Z","closed_at":"2026-01-18T16:46:09Z","work_type":"mutex"}
{"id":"holomush-dc4y","title":"Action bag purpose and MVP necessity unclear in spec","description":"## Issue\n\nThe spec defines an action bag in AttributeBags containing only `name`, with a note that future attributes MAY be added. However, no seed policy or example policy uses action bag attributes in conditions — all action matching happens via the target clause (`action in [\"read\", \"write\"]`), not via conditions referencing `action.name`.\n\nThe spec states: \"Action matching in the target clause covers most use cases, but conditions MAY reference action attributes when needed.\" But no concrete use case is provided for when condition-level action attribute access would be needed.\n\nThis creates ambiguity for implementers: should the action bag be populated in phase 7.3, or can it be deferred?\n\n## Suggestion\n\nAdd a brief note clarifying that the action bag exists for plugin extensibility (plugins may define custom actions with additional metadata) and that MVP implementation MAY skip action bag population if no policies reference `action.*` attributes. Alternatively, provide a concrete example where `action.name` in a condition (vs the target clause) would be useful.\n\n## Acceptance Criteria\n\n- [ ] Spec clarifies the purpose of the action bag relative to target-clause action matching\n- [ ] Implementation guidance indicates whether action bag is required for MVP or deferrable","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T00:09:55Z","created_by":"seanb4t","updated_at":"2026-02-08T23:32:12Z","closed_at":"2026-02-08T23:32:12Z","labels":["review-finding"],"work_type":"mutex"}
{"id":"holomush-df6","title":"Update design doc auto-migrate default to match implementation","description":"## Problem\nDesign document says auto-migrate defaults to false (opt-in), but implementation defaults to true (opt-out).\n\n## Source\nPR Review: comment-analyzer agent\n\n## Discrepancy\n| Source | Default Value |\n|--------|---------------|\n| Design doc line 187 | \\`false\\` (explicit opt-in) |\n| Implementation | \\`true\\` (opt-out) |\n| Code comment line 151 | Correctly says \\`true\\` |\n\n## Location\n`docs/plans/2026-01-24-database-migrations-design.md:187`\n\n## Current Text\n```\nDefault: --auto-migrate=false (explicit opt-in).\n```\n\n## Fix\n```\nDefault: auto-migration enabled (set HOLOMUSH_DB_AUTO_MIGRATE=false to disable).\n```\n\n## Acceptance Criteria\n- [ ] Update design doc to reflect true default\n- [ ] Verify consistency between design doc, code, and comments\n- [ ] Lint passes: `task lint`","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T13:52:17Z","created_by":"seanb4t","updated_at":"2026-01-25T13:55:59Z","closed_at":"2026-01-25T13:55:59Z","work_type":"mutex"}
{"id":"holomush-dix","title":"Convert matchesAny/matchPattern to standalone functions","description":"## Problem\nextism_subscriber.go:86-102 matchesAny and matchPattern don't use receiver state - should be standalone.\n\n## Acceptance Criteria\n- [ ] Convert to package-level functions\n- [ ] Update all call sites\n- [ ] Verify tests still pass\n- [ ] Independent code review before closing","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T16:10:29Z","created_by":"seanb4t","updated_at":"2026-01-18T16:46:09Z","closed_at":"2026-01-18T16:46:09Z","work_type":"mutex"}
{"id":"holomush-dj6z","title":"ABAC Review S7: Add common audit SQL query examples","description":"Issue: No operational SQL examples for audit log investigations. AC: (1) 3-5 example queries covering top denied, hot forbid, latency outliers. Ref: docs/specs/2026-02-05-full-abac-design.md:2270-2277.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:12Z","created_by":"seanb4t","updated_at":"2026-02-06T17:41:21Z","closed_at":"2026-02-06T17:41:21Z","dependencies":[{"issue_id":"holomush-dj6z","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-djj","title":"Epic 11: Forums","description":"Web-based discussion forums integrated with the game.\n\n**Goal:** Community discussion space accessible from web and in-game.\n\n**Phases:**\n- 11.1: Forum schema\n- 11.2: Web UI\n- 11.3: Moderation tools\n- 11.4: Notifications\n- 11.5: In-game integration\n\n**Acceptance Criteria:**\n- [ ] Boards, threads, posts schema works\n- [ ] Web browsing and posting works\n- [ ] Edit, delete, lock, move moderation works\n- [ ] New reply notifications work\n- [ ] forum recent command works in-game","status":"open","priority":3,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:27:57Z","created_by":"seanb4t","updated_at":"2026-01-19T01:27:57Z","dependencies":[{"issue_id":"holomush-djj","depends_on_id":"holomush-qve","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-djj.1","title":"[E11] Design: Forums Architecture","description":"Design the forums architecture for HoloMUSH web client integration.\n\n## Acceptance Criteria\n\n- [ ] Document forum data model (boards, threads, posts, permissions)\n- [ ] Define relationship between forum users and game characters\n- [ ] Specify moderation workflow and permission levels\n- [ ] Design notification system for replies\n- [ ] Plan in-game command integration points\n- [ ] Consider threading model (flat vs nested replies)\n- [ ] Address search and indexing requirements\n- [ ] Document API endpoints needed","status":"open","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:34:12Z","created_by":"seanb4t","updated_at":"2026-01-19T01:34:12Z","dependencies":[{"issue_id":"holomush-djj.1","depends_on_id":"holomush-djj","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-djj.2","title":"[E11] Implementation Plan: Forums","description":"Create detailed implementation plan for Forums based on approved design.\n\n## Acceptance Criteria\n\n- [ ] Break down work into implementable tasks\n- [ ] Define database migration strategy\n- [ ] Specify test coverage requirements\n- [ ] Identify integration points with existing systems\n- [ ] Document rollout/migration plan\n- [ ] Estimate effort for each phase\n- [ ] Identify risks and mitigation strategies","status":"open","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:34:29Z","created_by":"seanb4t","updated_at":"2026-01-19T01:34:29Z","dependencies":[{"issue_id":"holomush-djj.2","depends_on_id":"holomush-djj","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-djj.2","depends_on_id":"holomush-djj.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-djj.3","title":"[E11.1] Forum Schema - Boards, threads, posts","description":"Implement core forum schema and data layer.\n\n## Acceptance Criteria\n\n- [ ] Create boards table with categories and ordering\n- [ ] Create threads table with sticky/locked flags\n- [ ] Create posts table with edit history tracking\n- [ ] Implement ForumStore interface with CRUD operations\n- [ ] Add permission checks for board access\n- [ ] Create database migrations\n- [ ] Achieve \u003e80% test coverage\n- [ ] Document schema in docs/reference/","status":"open","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:34:29Z","created_by":"seanb4t","updated_at":"2026-01-19T01:34:29Z","dependencies":[{"issue_id":"holomush-djj.3","depends_on_id":"holomush-djj","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-djj.3","depends_on_id":"holomush-djj.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-djj.3","depends_on_id":"holomush-djj.2","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-djj.4","title":"[E11.2] Web UI - Browsing, posting","description":"Implement web UI for forum browsing and posting.\n\n## Acceptance Criteria\n\n- [ ] Board list view with unread counts\n- [ ] Thread list view with pagination\n- [ ] Post view with threading display\n- [ ] New thread creation form\n- [ ] Reply form with preview\n- [ ] Rich text/markdown support\n- [ ] Mobile-responsive design\n- [ ] Loading states and error handling\n- [ ] Integration tests for key flows","status":"open","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:34:30Z","created_by":"seanb4t","updated_at":"2026-01-19T01:34:30Z","dependencies":[{"issue_id":"holomush-djj.4","depends_on_id":"holomush-djj","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-djj.4","depends_on_id":"holomush-djj.3","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-djj.5","title":"[E11.3] Moderation Tools - Edit, delete, lock, move","description":"Implement forum moderation capabilities.\n\n## Acceptance Criteria\n\n- [ ] Edit post with revision history\n- [ ] Soft delete posts (preserve for audit)\n- [ ] Lock threads (prevent new replies)\n- [ ] Move threads between boards\n- [ ] Moderator action logging\n- [ ] Permission checks for all mod actions\n- [ ] Mod UI elements (lock icon, move dialog)\n- [ ] Test coverage for permission edge cases","status":"open","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:34:30Z","created_by":"seanb4t","updated_at":"2026-01-19T01:34:30Z","dependencies":[{"issue_id":"holomush-djj.5","depends_on_id":"holomush-djj","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-djj.5","depends_on_id":"holomush-djj.4","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-djj.6","title":"[E11.4] Notifications - New replies","description":"Implement notification system for forum activity.\n\n## Acceptance Criteria\n\n- [ ] Subscribe/unsubscribe to threads\n- [ ] New reply notifications (web push and/or in-game)\n- [ ] Mention notifications (@username)\n- [ ] Notification preferences UI\n- [ ] Batch digest option (immediate vs daily)\n- [ ] Mark as read functionality\n- [ ] Integration with existing notification infrastructure\n- [ ] Test notification delivery","status":"open","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:34:30Z","created_by":"seanb4t","updated_at":"2026-01-19T01:34:30Z","dependencies":[{"issue_id":"holomush-djj.6","depends_on_id":"holomush-djj","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-djj.6","depends_on_id":"holomush-djj.5","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-djj.7","title":"[E11.5] In-game Integration - forum recent command","description":"Implement in-game commands for forum integration.\n\n## Acceptance Criteria\n\n- [ ] +forum/recent - show recent posts summary\n- [ ] +forum/read \u003cthread\u003e - read thread in-game\n- [ ] +forum/post \u003cboard\u003e - quick post from game\n- [ ] Link character to forum account\n- [ ] Respect board permissions from game side\n- [ ] ANSI formatting for in-game display\n- [ ] Help text for all commands\n- [ ] Test command parsing and output","status":"open","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:34:30Z","created_by":"seanb4t","updated_at":"2026-01-19T01:34:30Z","dependencies":[{"issue_id":"holomush-djj.7","depends_on_id":"holomush-djj","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-djj.7","depends_on_id":"holomush-djj.6","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-dkw","title":"Create contributors documentation","description":"## Summary\nCreate documentation for core contributors covering architecture, coding standards, and PR workflow.\n\n## Files\n- Create: site/docs/contributors/architecture.md\n- Create: site/docs/contributors/coding-standards.md\n- Create: site/docs/contributors/pr-guide.md\n- Reference: docs/reference/pull-request-guide.md, CLAUDE.md\n\n## Steps\n1. Create site/docs/contributors/architecture.md - system design overview with ASCII diagram\n2. Create site/docs/contributors/coding-standards.md - extracted from CLAUDE.md, human-relevant parts\n3. Create site/docs/contributors/pr-guide.md - adapted from existing PR guide\n4. Run: cd site \u0026\u0026 uv run zensical build - verify build succeeds\n5. Commit: docs(contributors): add architecture, coding standards, and PR guides\n\n## Acceptance Criteria\n- [ ] Architecture doc includes system design overview\n- [ ] Architecture doc includes ASCII/visual diagram\n- [ ] Coding standards extracted from CLAUDE.md (human-relevant only)\n- [ ] PR guide covers complete workflow\n- [ ] zensical build succeeds\n\n## Reference\nSee docs/plans/2026-01-23-zensical-docs-design.md","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T14:05:26Z","created_by":"seanb4t","updated_at":"2026-01-24T16:55:50Z","closed_at":"2026-01-24T16:55:50Z","dependencies":[{"issue_id":"holomush-dkw","depends_on_id":"holomush-3h6","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-dmq","title":"Evaluate service layer query method coverage","description":"## Problem\n\nRepository interfaces define query methods not exposed through the service layer:\n\n| Repository | Missing Service Methods |\n|------------|------------------------|\n| LocationRepository | ListByType, GetShadowedBy |\n| ExitRepository | ListFromLocation, FindByName, FindBySimilarity, ListVisibleExits |\n| ObjectRepository | ListAtLocation, ListHeldBy, ListContainedIn |\n| SceneRepository | GetScenesFor |\n\n**Location:** `internal/world/service.go`, `internal/world/repository.go`\n\n## Acceptance Criteria\n\n- [ ] Document which query methods are needed by external consumers\n- [ ] For needed methods: add service layer methods with proper authorization\n- [ ] For internal-only methods: consider splitting interfaces (query vs command)\n- [ ] Update CLAUDE.md if interface segregation pattern is adopted\n- [ ] All new service methods include proper `oops.Code()` error handling\n\n## Implementation Notes\n\nThis is a design decision task. Options:\n1. Add service methods with auth for externally-needed queries\n2. Split repository interfaces into command/query interfaces\n3. Document that repositories are internal-only and service is the only public API\n\nRecommend option 3 unless specific external use cases are identified.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T19:52:25Z","created_by":"seanb4t","updated_at":"2026-01-24T20:05:57Z","closed_at":"2026-01-24T20:05:57Z","work_type":"mutex"}
{"id":"holomush-dn7","title":"Investigate Python PDK plugin reuse state corruption","description":"## Summary\nWhen the Python echo plugin is called multiple times in rapid succession within the same ExtismHost, wasm memory errors occur:\n- `out of bounds memory access`\n- `invalid memory address or nil pointer dereference`\n\nThe Rust alloc plugin handles reuse fine, suggesting this is Python PDK-specific.\n\n## Impact\n- Plugins may need to be single-use or require host instance isolation\n- Could affect production plugin reliability under load\n\n## Investigation Tasks\n- [ ] Determine if this is Extism Go SDK behavior or Python PDK behavior\n- [ ] Test with other PDKs (Rust, JavaScript) for comparison\n- [ ] Check Extism documentation for plugin instance lifecycle\n- [ ] Determine if `plugin.Reset()` or similar is needed between calls\n- [ ] Document findings and recommended patterns\n\n## Workarounds\n- Use separate ExtismHost instances per plugin (current test approach)\n- Avoid rapid sequential calls to same plugin\n\n## References\n- Observed in TestExtismSubscriber_MultiplePatterns test\n- Related epic: holomush-qmt (Extism Phase 1)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T15:07:38Z","created_by":"seanb4t","updated_at":"2026-01-18T22:17:17Z","closed_at":"2026-01-18T22:17:17Z","work_type":"mutex"}
{"id":"holomush-dop","title":"Rename FindByNameFuzzy to database-agnostic name","description":"BACKLOG: Method name references pg_trgm. Rename to FindExitBySimilarity for Apache AGE future-proofing.","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T00:26:13Z","created_by":"seanb4t","updated_at":"2026-01-24T01:49:50Z","closed_at":"2026-01-24T01:49:50Z","work_type":"mutex"}
{"id":"holomush-dpsd","title":"S1 API ingress validation","description":"Security S1 (API ingress validation) from Phase 7.6 plan was not addressed in the migration PR. Needs implementation in a follow-up. Listed as a Task 28 acceptance criterion in docs/plans/2026-02-06-full-abac-phase-7.6.md:30.","notes":"External ref: https://github.com/holomush/holomush/pull/88#issuecomment-3904668056 (comprehensive review finding #11)","status":"open","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-15T20:36:30Z","created_by":"seanb4t","updated_at":"2026-02-15T20:53:12Z","labels":["deferred-work","review-finding"],"dependencies":[{"issue_id":"holomush-dpsd","depends_on_id":"holomush-5k1.8","type":"parent-child","created_at":"2026-02-15T15:53:11Z","created_by":"seanb4t","metadata":"{}"}]}
{"id":"holomush-dtb","title":"Clarify empty output is valid in plugin-authoring.md","description":"## Problem\nplugin-authoring.md:140 doesn't mention that returning nothing (no output call) is valid.\n\n## Acceptance Criteria\n- [ ] Add clarification that no output is acceptable\n- [ ] Reference the code handling (extism_host.go:152-155)\n- [ ] Independent code review before closing","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T16:10:31Z","created_by":"seanb4t","updated_at":"2026-01-18T16:51:34Z","closed_at":"2026-01-18T16:51:34Z","dependencies":[{"issue_id":"holomush-dtb","depends_on_id":"holomush-3hj","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-dwk","title":"Epic 5: Auth \u0026 Identity","description":"Player accounts, character creation, authentication flows.\n\n**Goal:** Secure authentication with player-character separation.\n\n**Authentication Flow:**\nConnect → Authenticate (player) → Select Character → Resume/Create Session\n\n**Security:**\n- Passwords: argon2id (time=1, memory=64MB, threads=4)\n- Sessions: Secure tokens, server-side storage\n- Rate limiting on auth endpoints\n\n**Phases:**\n- 5.1: Player schema\n- 5.2: Password auth\n- 5.3: Character creation\n- 5.4: Session binding\n- 5.5: OAuth integration (optional)\n\n**Acceptance Criteria:**\n- [ ] Player accounts with email/password work\n- [ ] argon2id hashing and login flow functional\n- [ ] Players create characters, select on connect\n- [ ] Login → select character → resume session works\n- [ ] (Optional) Discord/Google login linking","status":"closed","priority":1,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:27:15Z","created_by":"seanb4t","updated_at":"2026-02-02T16:16:39Z","closed_at":"2026-02-02T16:16:39Z","dependencies":[{"issue_id":"holomush-dwk","depends_on_id":"holomush-x2t","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-dwk.1","title":"[E5] Design: Auth \u0026 Identity Architecture","description":"Design the authentication and identity system architecture.\n\n## Acceptance Criteria\n- [ ] Document player account schema (email, password hash, created_at, etc.)\n- [ ] Document character-to-account relationship model\n- [ ] Define authentication flow (connect → login → select character → play)\n- [ ] Specify password hashing requirements (argon2id parameters)\n- [ ] Design session binding mechanism (token → account → character)\n- [ ] Document OAuth provider integration points (Discord, Google)\n- [ ] Define security requirements (rate limiting, lockout, MFA future)\n- [ ] Create architecture diagram showing auth flow\n- [ ] Document API endpoints for auth operations\n- [ ] Spec reviewed and approved","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:30:19Z","created_by":"seanb4t","updated_at":"2026-01-26T00:35:38Z","closed_at":"2026-01-26T00:35:38Z","dependencies":[{"issue_id":"holomush-dwk.1","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-dwk.10","title":"[E5.1.3] Create Password Resets Migration","description":"Create migration 000011 for password_resets table (player_id, token_hash, expires_at).","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-26T00:55:59Z","created_by":"seanb4t","updated_at":"2026-01-26T01:23:31Z","closed_at":"2026-01-26T01:23:31Z","dependencies":[{"issue_id":"holomush-dwk.10","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-dwk.11","title":"[E5.2.1] Implement Argon2id Password Hasher","description":"Create internal/auth/hasher.go with argon2id hashing (OWASP params), bcrypt upgrade detection, constant-time verification.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-26T00:55:59Z","created_by":"seanb4t","updated_at":"2026-01-26T02:46:08Z","closed_at":"2026-01-26T02:46:08Z","dependencies":[{"issue_id":"holomush-dwk.11","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-dwk.11","depends_on_id":"holomush-dwk.8","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-dwk.12","title":"[E5.2.2] Implement Rate Limiter","description":"Create internal/auth/ratelimit.go with progressive delays, lockout tracking, and reset on success.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-26T00:55:59Z","created_by":"seanb4t","updated_at":"2026-01-26T02:46:08Z","closed_at":"2026-01-26T02:46:08Z","dependencies":[{"issue_id":"holomush-dwk.12","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-dwk.12","depends_on_id":"holomush-dwk.8","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-dwk.13","title":"[E5.2.3] Implement Player Domain Type","description":"Create internal/auth/player.go with Player struct, validation, and preference methods.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-26T00:56:00Z","created_by":"seanb4t","updated_at":"2026-01-26T02:55:01Z","closed_at":"2026-01-26T02:55:01Z","dependencies":[{"issue_id":"holomush-dwk.13","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-dwk.13","depends_on_id":"holomush-dwk.11","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-dwk.14","title":"[E5.2.4] Implement Player PostgreSQL Repository","description":"Create internal/auth/postgres/player_repo.go implementing PlayerRepository interface with CRUD and auth queries.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-26T00:56:12Z","created_by":"seanb4t","updated_at":"2026-02-02T02:38:47Z","closed_at":"2026-02-02T00:50:22Z","dependencies":[{"issue_id":"holomush-dwk.14","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-dwk.14","depends_on_id":"holomush-dwk.13","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-dwk.14","depends_on_id":"holomush-dwk.8","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-dwk.15","title":"[E5.3.1] Implement Character Name Validation","description":"Add character name validation: letters/spaces only, 2-32 chars, Initial Caps normalization, case-insensitive uniqueness.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-26T00:56:12Z","created_by":"seanb4t","updated_at":"2026-01-26T01:21:57Z","closed_at":"2026-01-26T01:21:57Z","dependencies":[{"issue_id":"holomush-dwk.15","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-dwk.16","title":"[E5.3.2] Implement Character Creation Service","description":"Create character creation with name validation, placement in seeded first room, and player association.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-26T00:56:13Z","created_by":"seanb4t","updated_at":"2026-02-02T02:38:47Z","closed_at":"2026-02-02T00:50:22Z","dependencies":[{"issue_id":"holomush-dwk.16","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-dwk.16","depends_on_id":"holomush-dwk.13","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-dwk.16","depends_on_id":"holomush-dwk.15","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-dwk.17","title":"[E5.4.1] Implement Web Session Token","description":"Create internal/auth/token.go with HMAC-SHA256 signed tokens containing player_id, character_id, timestamps.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-26T00:56:13Z","created_by":"seanb4t","updated_at":"2026-02-02T02:38:47Z","closed_at":"2026-02-02T00:50:22Z","dependencies":[{"issue_id":"holomush-dwk.17","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-dwk.17","depends_on_id":"holomush-dwk.13","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-dwk.18","title":"[E5.4.2] Implement Web Session Repository","description":"Create internal/auth/postgres/session_repo.go for web session CRUD with token signature lookup.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-26T00:56:13Z","created_by":"seanb4t","updated_at":"2026-02-02T02:38:47Z","closed_at":"2026-02-02T00:56:57Z","dependencies":[{"issue_id":"holomush-dwk.18","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-dwk.18","depends_on_id":"holomush-dwk.17","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-dwk.18","depends_on_id":"holomush-dwk.9","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-dwk.19","title":"[E5.4.3] Implement Authentication Service","description":"Create internal/auth/service.go orchestrating login, session creation, character selection, and bcrypt upgrade.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-26T00:56:14Z","created_by":"seanb4t","updated_at":"2026-02-02T02:38:47Z","closed_at":"2026-02-02T01:05:32Z","dependencies":[{"issue_id":"holomush-dwk.19","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-dwk.19","depends_on_id":"holomush-dwk.11","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-dwk.19","depends_on_id":"holomush-dwk.12","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-dwk.19","depends_on_id":"holomush-dwk.14","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-dwk.19","depends_on_id":"holomush-dwk.17","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-dwk.19","depends_on_id":"holomush-dwk.18","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-dwk.2","title":"[E5] Implementation Plan: Auth \u0026 Identity","description":"Create detailed implementation plan for Auth \u0026 Identity epic.\n\n## Acceptance Criteria\n- [ ] Break down design into implementable phases\n- [ ] Define phase gates with clear completion criteria\n- [ ] Estimate effort for each phase\n- [ ] Identify dependencies on other epics (E4 Events \u0026 Plugins for session events)\n- [ ] Define test strategy for each phase\n- [ ] Document rollback strategy for failed migrations\n- [ ] Identify security testing requirements\n- [ ] Plan reviewed and approved","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:30:26Z","created_by":"seanb4t","updated_at":"2026-01-26T00:54:41Z","closed_at":"2026-01-26T00:54:41Z","dependencies":[{"issue_id":"holomush-dwk.2","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-dwk.2","depends_on_id":"holomush-dwk.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-dwk.20","title":"[E5.4.4] Implement Telnet Auth Handler","description":"Create telnet command handlers for connect, play, create commands with auth service integration.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-26T00:56:23Z","created_by":"seanb4t","updated_at":"2026-02-02T02:38:47Z","closed_at":"2026-02-02T01:14:41Z","dependencies":[{"issue_id":"holomush-dwk.20","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-dwk.20","depends_on_id":"holomush-dwk.19","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-dwk.21","title":"[E5.5.1] Implement Password Reset Token","description":"Create internal/auth/reset.go with secure token generation (32 bytes), SHA-256 storage, 1-hour expiry.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-26T00:56:24Z","created_by":"seanb4t","updated_at":"2026-01-26T02:55:01Z","closed_at":"2026-01-26T02:55:01Z","dependencies":[{"issue_id":"holomush-dwk.21","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-dwk.21","depends_on_id":"holomush-dwk.11","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-dwk.22","title":"[E5.5.2] Implement Password Reset Repository","description":"Create internal/auth/postgres/reset_repo.go for reset token CRUD with expiry handling.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-26T00:56:24Z","created_by":"seanb4t","updated_at":"2026-02-02T02:38:47Z","closed_at":"2026-02-02T00:50:22Z","dependencies":[{"issue_id":"holomush-dwk.22","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-dwk.22","depends_on_id":"holomush-dwk.10","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-dwk.22","depends_on_id":"holomush-dwk.21","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-dwk.23","title":"[E5.5.3] Implement Password Reset Service","description":"Create password reset flow: request token, verify, update password, invalidate sessions.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-26T00:56:25Z","created_by":"seanb4t","updated_at":"2026-02-02T02:38:47Z","closed_at":"2026-02-02T00:56:57Z","dependencies":[{"issue_id":"holomush-dwk.23","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-dwk.23","depends_on_id":"holomush-dwk.14","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-dwk.23","depends_on_id":"holomush-dwk.22","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-dwk.24","title":"[E5.6.1] Generate Auth Mocks","description":"Generate mockery mocks for PasswordHasher, RateLimiter, PlayerRepository, SessionRepository interfaces.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-26T00:56:25Z","created_by":"seanb4t","updated_at":"2026-02-02T02:38:47Z","closed_at":"2026-02-02T02:15:04Z","dependencies":[{"issue_id":"holomush-dwk.24","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-dwk.3","title":"[E5.1] Player Schema - Accounts with email/password","description":"Implement player account schema and database migrations.\n\n## Scope\nCreate the foundational player account table with email/password authentication fields.\n\n## Acceptance Criteria\n- [ ] Create players table migration (id, email, password_hash, created_at, updated_at, last_login_at)\n- [ ] Add unique constraint on email\n- [ ] Implement PlayerStore interface with CRUD operations\n- [ ] Create Player domain type in internal/core\n- [ ] Add email validation (format, uniqueness)\n- [ ] Write table-driven tests for PlayerStore (\u003e80% coverage)\n- [ ] Document schema in docs/reference/\n- [ ] Migration runs successfully in both directions (up/down)","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:30:34Z","created_by":"seanb4t","updated_at":"2026-02-02T02:38:47Z","closed_at":"2026-02-02T01:15:09Z","dependencies":[{"issue_id":"holomush-dwk.3","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-dwk.3","depends_on_id":"holomush-dwk.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-dwk.3","depends_on_id":"holomush-dwk.2","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-dwk.4","title":"[E5.2] Password Auth - argon2id hashing, login flow","description":"Implement password authentication with argon2id hashing.\n\n## Scope\nSecure password hashing and verification with login/registration flows.\n\n## Acceptance Criteria\n- [ ] Implement argon2id password hashing with OWASP-recommended parameters\n- [ ] Create password verification function\n- [ ] Implement Register flow (email + password → hashed account)\n- [ ] Implement Login flow (email + password → verify → token)\n- [ ] Add rate limiting for login attempts (configurable)\n- [ ] Implement account lockout after N failed attempts\n- [ ] Create auth service interface in internal/core\n- [ ] Write comprehensive tests including timing attack resistance\n- [ ] Document auth API endpoints\n- [ ] \u003e80% test coverage on auth package","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:30:40Z","created_by":"seanb4t","updated_at":"2026-02-02T02:38:47Z","closed_at":"2026-02-02T01:15:09Z","dependencies":[{"issue_id":"holomush-dwk.4","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-dwk.4","depends_on_id":"holomush-dwk.3","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-dwk.5","title":"[E5.3] Character Creation - Players create characters, select on connect","description":"Implement character creation and selection system.\n\n## Scope\nAllow players to create multiple characters and select which to play.\n\n## Acceptance Criteria\n- [ ] Create characters table migration (links to players, has name, etc.)\n- [ ] Implement CharacterStore interface with CRUD operations\n- [ ] Create Character domain type in internal/core\n- [ ] Implement character creation flow (player → create character → persist)\n- [ ] Implement character listing (show player's characters)\n- [ ] Implement character selection (choose character to play)\n- [ ] Add character name validation (uniqueness, format rules)\n- [ ] Enforce character-per-player limits (configurable)\n- [ ] Write table-driven tests for CharacterStore (\u003e80% coverage)\n- [ ] Document character API endpoints","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:30:45Z","created_by":"seanb4t","updated_at":"2026-02-02T02:38:47Z","closed_at":"2026-02-02T01:15:09Z","dependencies":[{"issue_id":"holomush-dwk.5","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-dwk.5","depends_on_id":"holomush-dwk.4","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-dwk.6","title":"[E5.4] Session Binding - Login → select character → resume session","description":"Bind authenticated sessions to player accounts and selected characters.\n\n## Scope\nConnect the authentication flow to the existing session system.\n\n## Acceptance Criteria\n- [ ] Extend Session type to include player_id and character_id\n- [ ] Implement session state machine (anonymous → authenticated → character-selected)\n- [ ] Create session upgrade flow (connect → login → select → play)\n- [ ] Handle reconnection (token → resume session with same character)\n- [ ] Emit auth events to event bus (login, logout, character-select)\n- [ ] Update telnet adapter to support auth flow\n- [ ] Implement session timeout for unauthenticated connections\n- [ ] Write integration tests for full auth flow\n- [ ] \u003e80% test coverage on session binding code\n- [ ] Document session lifecycle in docs/reference/","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:30:53Z","created_by":"seanb4t","updated_at":"2026-02-02T02:38:47Z","closed_at":"2026-02-02T01:15:09Z","dependencies":[{"issue_id":"holomush-dwk.6","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-dwk.6","depends_on_id":"holomush-dwk.5","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-dwk.7","title":"OAuth Integration (optional) - Discord/Google login linking","description":"Add OAuth provider support for Discord and Google login.\n\n## Scope\nAllow players to link external OAuth providers as alternative login methods.\n\n## Acceptance Criteria\n- [ ] Create oauth_links table migration (player_id, provider, provider_user_id)\n- [ ] Implement OAuth flow for Discord (authorization code → token → user info)\n- [ ] Implement OAuth flow for Google (authorization code → token → user info)\n- [ ] Allow linking OAuth to existing account\n- [ ] Allow account creation via OAuth (optional email fallback)\n- [ ] Implement unlinking flow\n- [ ] Store minimal provider data (user ID, not tokens)\n- [ ] Write integration tests with mock OAuth providers\n- [ ] Document OAuth setup for server operators\n- [ ] \u003e80% test coverage on OAuth package\n- [ ] Security review of OAuth implementation","status":"open","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:30:59Z","created_by":"seanb4t","updated_at":"2026-02-02T02:38:47Z","dependencies":[{"issue_id":"holomush-dwk.7","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-dwk.7","depends_on_id":"holomush-dwk.6","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-dwk.8","title":"[E5.1.1] Create Auth Player Fields Migration","description":"Create migration 000009 for player auth fields (email, rate limiting, preferences, nullable player_id for rostering).","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-26T00:55:58Z","created_by":"seanb4t","updated_at":"2026-01-26T01:23:31Z","closed_at":"2026-01-26T01:23:31Z","dependencies":[{"issue_id":"holomush-dwk.8","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-dwk.9","title":"[E5.1.2] Create Web Sessions Migration","description":"Create migration 000010 for web_sessions table (player_id, character_id, token_signature, expires_at).","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-26T00:55:58Z","created_by":"seanb4t","updated_at":"2026-01-26T01:23:31Z","closed_at":"2026-01-26T01:23:31Z","dependencies":[{"issue_id":"holomush-dwk.9","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-dxl","title":"Fix incorrect actor_kind and stream prefix in echo-python README","description":"## Summary\nThe echo-python README has multiple documentation errors:\n1. Uses actor_kind: 1 (System) when the example should show actor_kind: 0 (Character)\n2. Uses \"room:\" stream prefix instead of \"location:\"\n\n## Locations\n- `plugins/echo-python/README.md:45` - actor_kind\n- `plugins/echo-python/README.md:43,56` - stream prefix\n\n## Acceptance Criteria\n- [ ] Add validation test comparing README examples against actual usage patterns\n- [ ] Fix actor_kind to 0 in examples\n- [ ] Fix stream prefix to \"location:\" in examples\n- [ ] Add missing id/timestamp fields to examples for completeness\n- [ ] Test passes proving documentation matches code patterns\n- [ ] Independent review by subagent confirms fix","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T17:13:23Z","created_by":"seanb4t","updated_at":"2026-01-18T17:32:04Z","closed_at":"2026-01-18T17:32:04Z","dependencies":[{"issue_id":"holomush-dxl","depends_on_id":"holomush-6eh","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-dymd","title":"ABAC Review S1: Run task fmt on all PR markdown files","description":"Issue: Some markdown tables have inconsistent alignment. Project standards require aligned tables. AC: (1) task fmt run on all PR files (2) All tables pass markdownlint. Ref: multiple files.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:11Z","created_by":"seanb4t","updated_at":"2026-02-06T17:33:48Z","closed_at":"2026-02-06T17:33:48Z","dependencies":[{"issue_id":"holomush-dymd","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-dysc","title":"Document Lua API return format change in plan","description":"PR #88 review suggestion S5: The breaking Lua API change (list_commands return format) is documented in PR body but not in docs/plans/2026-02-06-full-abac-phase-7.6.md.","status":"open","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-16T01:26:51Z","created_by":"seanb4t","updated_at":"2026-02-16T01:43:58Z","external_ref":"https://github.com/holomush/holomush/pull/88#issuecomment-RC_IC_kwDOQ7tZvM7o0CyA","labels":["deferred-work","review-finding"],"dependencies":[{"issue_id":"holomush-dysc","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-15T21:19:55Z","created_by":"seanb4t","metadata":"{}"}]}
{"id":"holomush-dzs","title":"Record errors on trace spans in ExtismHost","description":"## Problem\nTrace spans in extism_host.go:102-108 don't record errors, making failed operations appear successful in observability tools.\n\n## Acceptance Criteria\n- [ ] Add test verifying span.RecordError is called on failure\n- [ ] Add span.RecordError(err) and span.SetStatus(codes.Error, ...) on error paths\n- [ ] Test must pass\n- [ ] Independent code review before closing","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T16:10:00Z","created_by":"seanb4t","updated_at":"2026-01-18T16:40:34Z","closed_at":"2026-01-18T16:40:34Z","dependencies":[{"issue_id":"holomush-dzs","depends_on_id":"holomush-d62","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e2cp","title":"Add floor to fair-share provider timeout and increase staleness threshold","description":"Two performance-related issues:\n1. Fair-share timeout formula can produce sub-millisecond timeouts if early providers are slow. Need max(fair_share, 5ms) floor.\n2. Cache staleness threshold default (5s) is too aggressive — normal reconnection backoff exceeds 6.3s (100ms+200ms+400ms+800ms+1600ms+3200ms), which would trigger fail-closed on brief network blips.\n\n**Acceptance Criteria:**\n- [ ] Fair-share timeout formula includes max(fair_share, 5ms) floor\n- [ ] Document registration order dependency for slow providers\n- [ ] Cache staleness threshold default increased to 30s (matching max backoff)\n- [ ] Note added explaining interaction between backoff schedule and staleness threshold\n\n**Files:** docs/specs/2026-02-05-full-abac-design.md","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T22:36:54Z","created_by":"seanb4t","updated_at":"2026-02-06T23:16:40Z","closed_at":"2026-02-06T23:16:40Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-e2cp","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55","title":"Phase 1.5: Infrastructure \u0026 Process Separation","status":"closed","priority":1,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T20:30:50Z","created_by":"seanb4t","updated_at":"2026-01-18T13:30:25Z","closed_at":"2026-01-18T13:30:25Z","comments":[{"id":5,"issue_id":"holomush-e55","author":"seanb4t","text":"New tasks added: wire up CLI commands (m96, w4n, h4r)","created_at":"2026-01-17T22:24:13Z"}],"work_type":"mutex"}
{"id":"holomush-e55.1","title":"XDG path utilities","description":"Implement XDG Base Directory spec utilities for config, data, state, and runtime paths. Must check env vars first, then fall back to defaults.","status":"tombstone","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T20:31:11Z","created_by":"seanb4t","updated_at":"2026-01-17T20:44:22Z","work_type":"mutex"}
{"id":"holomush-e55.10","title":"Phase 1.5 documentation","description":"Update README, getting-started, architecture-overview. Create new docs: cli.md, deployment.md, observability.md.","status":"tombstone","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T20:31:13Z","created_by":"seanb4t","updated_at":"2026-01-17T20:44:22Z","work_type":"mutex"}
{"id":"holomush-e55.11","title":"Database migration for game_id system_info table","description":"Add holomush_system_info table for game_id storage. Add GetSystemInfo, SetSystemInfo, InitGameID methods to postgres store.","status":"tombstone","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T20:37:51Z","created_by":"seanb4t","updated_at":"2026-01-17T20:44:22Z","work_type":"mutex"}
{"id":"holomush-e55.12","title":"A1: XDG Path Utilities","description":"Implement XDG Base Directory utilities for config, data, state, and runtime paths.\n\n**Files:**\n- Create: internal/xdg/xdg.go\n- Create: internal/xdg/xdg_test.go\n\n**Acceptance Criteria:**\n- [ ] ConfigDir() checks XDG_CONFIG_HOME first, falls back to ~/.config/holomush\n- [ ] DataDir() checks XDG_DATA_HOME first, falls back to ~/.local/share/holomush\n- [ ] StateDir() checks XDG_STATE_HOME first, falls back to ~/.local/state/holomush\n- [ ] RuntimeDir() checks XDG_RUNTIME_DIR first, falls back to StateDir()/run\n- [ ] CertsDir() returns ConfigDir()/certs\n- [ ] EnsureDir() creates directory with 0700 permissions\n- [ ] All tests pass: task test -- -run Test -v ./internal/xdg/...\n- [ ] Lint passes: task lint\n- [ ] Code reviewed by separate agent","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T20:44:41Z","created_by":"seanb4t","updated_at":"2026-01-17T20:57:51Z","closed_at":"2026-01-17T20:57:51Z","dependencies":[{"issue_id":"holomush-e55.12","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.13","title":"A2: Structured Logging with OTEL Trace Context","description":"Implement custom slog handler that extracts trace_id/span_id from context.\n\n**Files:**\n- Create: internal/logging/handler.go\n- Create: internal/logging/handler_test.go\n\n**Acceptance Criteria:**\n- [ ] Setup() creates logger with JSON format by default\n- [ ] Setup() supports text format via format parameter\n- [ ] Handler extracts trace_id from OTEL context and injects into log entries\n- [ ] Handler extracts span_id from OTEL context and injects into log entries\n- [ ] Missing trace context results in empty strings (not errors)\n- [ ] JSON output includes: time, level, msg, service, version, trace_id, span_id\n- [ ] All tests pass: task test -- -run Test -v ./internal/logging/...\n- [ ] Lint passes: task lint\n- [ ] Code reviewed by separate agent","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T20:44:56Z","created_by":"seanb4t","updated_at":"2026-01-17T20:57:51Z","closed_at":"2026-01-17T20:57:51Z","dependencies":[{"issue_id":"holomush-e55.13","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.14","title":"A3: gRPC Proto Definitions and Codegen","description":"Define Core service proto and set up buf for code generation.\n\n**Files:**\n- Create: api/proto/holomush/core/v1/core.proto\n- Create: buf.yaml\n- Create: buf.gen.yaml\n- Modify: Taskfile.yaml (add proto task)\n- Generated: internal/proto/holomush/core/v1/*.go\n\n**Acceptance Criteria:**\n- [ ] Proto defines Core service with Authenticate, HandleCommand, Subscribe, Disconnect RPCs\n- [ ] RequestMeta and ResponseMeta messages include request_id and timestamp\n- [ ] Subscribe RPC returns stream of Event messages\n- [ ] buf.yaml configured with googleapis dependency\n- [ ] buf.gen.yaml generates Go code to internal/proto/\n- [ ] task proto runs buf generate successfully\n- [ ] Generated code compiles: go build ./...\n- [ ] Lint passes: task lint\n- [ ] Code reviewed by separate agent","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T20:44:56Z","created_by":"seanb4t","updated_at":"2026-01-17T20:57:51Z","closed_at":"2026-01-17T20:57:51Z","dependencies":[{"issue_id":"holomush-e55.14","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.15","title":"C1: Database Migration for game_id","description":"Add holomush_system_info table for game_id and system metadata storage.\n\n**Files:**\n- Create: internal/store/migrations/002_system_info.sql\n- Modify: internal/store/postgres.go (add GetSystemInfo, SetSystemInfo, InitGameID)\n- Create: internal/store/system_test.go\n\n**Acceptance Criteria:**\n- [ ] Migration creates holomush_system_info table with key, value, timestamps\n- [ ] GetSystemInfo() retrieves value by key\n- [ ] SetSystemInfo() upserts value (insert or update)\n- [ ] InitGameID() returns existing game_id or generates new ULID\n- [ ] All tests pass with PostgreSQL testcontainer\n- [ ] Lint passes: task lint\n- [ ] Code reviewed by separate agent","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T20:44:57Z","created_by":"seanb4t","updated_at":"2026-01-17T20:57:51Z","closed_at":"2026-01-17T20:57:51Z","dependencies":[{"issue_id":"holomush-e55.15","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.16","title":"B1: TLS Certificate Generation","description":"Implement mTLS certificate generation and loading utilities.\n\n**Files:**\n- Create: internal/tls/certs.go\n- Create: internal/tls/certs_test.go\n\n**Dependencies:** A1 (XDG paths for cert storage)\n\n**Acceptance Criteria:**\n- [ ] GenerateCA() creates self-signed root CA with 10-year validity\n- [ ] GenerateServerCert() creates core cert signed by CA with game_id in SAN\n- [ ] GenerateClientCert() creates gateway cert signed by CA with CN=holomush-gateway\n- [ ] LoadServerTLS() returns tls.Config with mTLS (RequireAndVerifyClientCert)\n- [ ] LoadClientTLS() returns tls.Config that validates server SAN against expected game_id\n- [ ] EnsureCerts() generates all certs if they don't exist, skips if they do\n- [ ] Certs stored in XDG certs directory with 0600 permissions\n- [ ] All tests pass: task test -- -run Test -v ./internal/tls/...\n- [ ] Lint passes: task lint\n- [ ] Code reviewed by separate agent","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T20:45:10Z","created_by":"seanb4t","updated_at":"2026-01-17T21:03:55Z","closed_at":"2026-01-17T21:03:55Z","dependencies":[{"issue_id":"holomush-e55.16","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.16","depends_on_id":"holomush-e55.12","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.17","title":"D1: Cobra CLI Skeleton","description":"Set up Cobra CLI with root command and subcommands.\n\n**Files:**\n- Modify: cmd/holomush/main.go (replace with Cobra root)\n- Create: cmd/holomush/root.go\n- Create: cmd/holomush/gateway.go\n- Create: cmd/holomush/core.go\n- Create: cmd/holomush/cmd_test.go\n\n**Dependencies:** A1 (XDG), A2 (Logging)\n\n**Acceptance Criteria:**\n- [ ] Root command with --log-format, --otlp-endpoint, --config-dir, --data-dir flags\n- [ ] gateway subcommand with --telnet-addr, --core-addr, --game-id flags\n- [ ] gateway stop/status subcommands (placeholder implementation)\n- [ ] core subcommand with --grpc-addr, --database-url (required) flags\n- [ ] core stop/status subcommands (placeholder implementation)\n- [ ] status subcommand for overall health (placeholder implementation)\n- [ ] --help shows all commands and flags\n- [ ] All tests pass: task test -- -run Test -v ./cmd/holomush/...\n- [ ] Lint passes: task lint\n- [ ] Code reviewed by separate agent","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T20:45:10Z","created_by":"seanb4t","updated_at":"2026-01-17T21:03:55Z","closed_at":"2026-01-17T21:03:55Z","dependencies":[{"issue_id":"holomush-e55.17","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.17","depends_on_id":"holomush-e55.12","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.17","depends_on_id":"holomush-e55.13","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.18","title":"E1: Core gRPC Service Implementation","description":"Wrap existing engine in gRPC server with mTLS.\n\n**Files:**\n- Create: internal/grpc/server.go\n- Create: internal/grpc/server_test.go\n- Modify: cmd/holomush/core.go (wire up server)\n\n**Dependencies:** A1 (XDG), A2 (Logging), A3 (Proto), B1 (TLS), C1 (DB migration), D1 (CLI)\n\n**Acceptance Criteria:**\n- [ ] CoreServer implements corev1.CoreServer interface\n- [ ] Authenticate RPC validates credentials (placeholder for Phase 2)\n- [ ] HandleCommand RPC forwards to Engine and returns response\n- [ ] Subscribe RPC streams events from Broadcaster\n- [ ] Disconnect RPC ends session\n- [ ] Server uses mTLS with auto-generated certs\n- [ ] Server initializes game_id on first run, writes to gateway.yaml config\n- [ ] holomush core starts, listens on --grpc-addr, logs in JSON format\n- [ ] All tests pass: task test -- -run Test -v ./internal/grpc/...\n- [ ] Lint passes: task lint\n- [ ] Code reviewed by separate agent","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T20:45:28Z","created_by":"seanb4t","updated_at":"2026-01-17T21:10:29Z","closed_at":"2026-01-17T21:10:29Z","dependencies":[{"issue_id":"holomush-e55.18","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.18","depends_on_id":"holomush-e55.12","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.18","depends_on_id":"holomush-e55.13","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.18","depends_on_id":"holomush-e55.14","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.18","depends_on_id":"holomush-e55.15","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.18","depends_on_id":"holomush-e55.16","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.18","depends_on_id":"holomush-e55.17","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.19","title":"F1: Gateway gRPC Client Implementation","description":"Implement gRPC client with auto-reconnect and telnet adapter refactoring.\n\n**Files:**\n- Create: internal/grpc/client.go\n- Create: internal/grpc/client_test.go\n- Modify: internal/telnet/handler.go (use client instead of engine)\n- Modify: cmd/holomush/gateway.go (wire up client)\n\n**Dependencies:** E1 (Core must exist for testing)\n\n**Acceptance Criteria:**\n- [ ] CoreClient wraps gRPC client with reconnection logic\n- [ ] Client validates server cert SAN against expected game_id\n- [ ] Client auto-reconnects when Core restarts (backoff strategy)\n- [ ] Telnet handler forwards commands via gRPC client instead of direct Engine\n- [ ] Telnet handler receives events via Subscribe stream\n- [ ] holomush gateway starts, connects to core at --core-addr\n- [ ] Gateway reads game_id from config file (not database)\n- [ ] Clients stay connected when Core restarts, receive events after reconnect\n- [ ] All tests pass: task test -- -run Test -v ./internal/grpc/...\n- [ ] Lint passes: task lint\n- [ ] Code reviewed by separate agent","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T20:45:28Z","created_by":"seanb4t","updated_at":"2026-01-17T21:10:29Z","closed_at":"2026-01-17T21:10:29Z","dependencies":[{"issue_id":"holomush-e55.19","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.19","depends_on_id":"holomush-e55.18","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.2","title":"Structured logging with OTEL trace context","description":"Custom slog handler that extracts trace_id/span_id from context and injects into all log entries. Support JSON and text formats via --log-format flag.","status":"tombstone","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T20:31:11Z","created_by":"seanb4t","updated_at":"2026-01-17T20:44:22Z","work_type":"mutex"}
{"id":"holomush-e55.20","title":"G1: Control Socket Implementation","description":"Implement Unix socket HTTP server for lifecycle management.\n\n**Files:**\n- Create: internal/control/socket.go\n- Create: internal/control/socket_test.go\n- Modify: cmd/holomush/core.go (start control socket)\n- Modify: cmd/holomush/gateway.go (start control socket)\n\n**Dependencies:** E1 (Core), F1 (Gateway)\n\n**Acceptance Criteria:**\n- [ ] ControlSocket listens on Unix socket at XDG runtime dir\n- [ ] GET /health returns 200 OK when healthy, 503 when unhealthy\n- [ ] GET /ready returns 200 when ready to serve\n- [ ] POST /shutdown triggers graceful shutdown\n- [ ] holomush core stop connects to socket, calls /shutdown\n- [ ] holomush gateway stop connects to socket, calls /shutdown\n- [ ] holomush core status shows health from /health endpoint\n- [ ] holomush gateway status shows health from /health endpoint\n- [ ] holomush status shows health of both processes\n- [ ] All tests pass: task test -- -run Test -v ./internal/control/...\n- [ ] Lint passes: task lint\n- [ ] Code reviewed by separate agent","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T20:45:28Z","created_by":"seanb4t","updated_at":"2026-01-17T21:12:48Z","closed_at":"2026-01-17T21:12:48Z","dependencies":[{"issue_id":"holomush-e55.20","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.20","depends_on_id":"holomush-e55.18","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.20","depends_on_id":"holomush-e55.19","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.21","title":"H1: Integration Tests","description":"End-to-end tests for Gateway + Core lifecycle.\n\n**Files:**\n- Create: tests/integration/process_test.go\n\n**Dependencies:** G1 (Control sockets)\n\n**Acceptance Criteria:**\n- [ ] Test: Gateway + Core startup - both processes start and connect via gRPC\n- [ ] Test: Core restart tolerance - Gateway stays up, reconnects after Core restart\n- [ ] Test: mTLS validation - reject invalid certs, accept valid certs\n- [ ] Test: SAN mismatch rejection - Gateway rejects Core with wrong game_id in SAN\n- [ ] Test: Command flow - Telnet client -\u003e Gateway -\u003e Core -\u003e response back\n- [ ] Test: Event streaming - Core broadcasts event, Gateway receives via stream\n- [ ] Test: Control socket lifecycle - stop, status commands work\n- [ ] Test: Log format switching - --log-format=json vs --log-format=text\n- [ ] All tests pass: task test -- -run Test -v ./tests/integration/...\n- [ ] Coverage \u003e= 80% on new code\n- [ ] Code reviewed by separate agent","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T20:45:43Z","created_by":"seanb4t","updated_at":"2026-01-17T21:17:36Z","closed_at":"2026-01-17T21:17:36Z","dependencies":[{"issue_id":"holomush-e55.21","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.21","depends_on_id":"holomush-e55.20","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.22","title":"H2: Documentation Updates","description":"Update existing docs and create new reference documentation.\n\n**Files to Update:**\n- README.md (new CLI commands, two-process architecture, startup instructions)\n- docs/reference/getting-started.md (running gateway + core)\n- docs/reference/architecture-overview.md (process separation diagram, gRPC interface)\n\n**Files to Create:**\n- docs/reference/cli.md (full CLI reference with all commands and flags)\n- docs/reference/deployment.md (running in production, systemd units, logging)\n- docs/reference/observability.md (OpenTelemetry setup, log aggregation, tracing)\n\n**Dependencies:** H1 (Integration tests - ensures docs match working implementation)\n\n**Acceptance Criteria:**\n- [ ] README includes new CLI commands and startup sequence\n- [ ] getting-started.md updated with gateway + core instructions\n- [ ] architecture-overview.md includes process separation diagram\n- [ ] cli.md documents all commands, subcommands, and flags\n- [ ] deployment.md includes systemd unit examples\n- [ ] observability.md documents OTEL integration and log format\n- [ ] All links work (no broken references)\n- [ ] Markdown lint passes: task lint:markdown\n- [ ] Documentation reviewed by separate agent","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T20:45:44Z","created_by":"seanb4t","updated_at":"2026-01-17T21:17:36Z","closed_at":"2026-01-17T21:17:36Z","dependencies":[{"issue_id":"holomush-e55.22","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.22","depends_on_id":"holomush-e55.21","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.23","title":"Fix silent failure: JSON encoding error in control socket","description":"**Location:** internal/control/socket.go:97\n\n**Issue:** JSON encoding error silently continues instead of returning error to caller.\n\n**Acceptance Criteria:**\n- [ ] JSON encoding errors are properly returned/logged\n- [ ] Tests verify error handling behavior\n- [ ] Tests pass with `task test`\n- [ ] Package maintains 80%+ coverage\n- [ ] Follow-on code review passes","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T21:29:54Z","created_by":"seanb4t","updated_at":"2026-01-17T21:48:05Z","closed_at":"2026-01-17T21:48:05Z","dependencies":[{"issue_id":"holomush-e55.23","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.24","title":"Fix silent failure: Server.Serve error not logged","description":"**Location:** internal/control/socket.go:112\n\n**Issue:** Server.Serve error is not logged when it fails.\n\n**Acceptance Criteria:**\n- [ ] Server.Serve errors are properly logged\n- [ ] Tests verify error logging behavior\n- [ ] Tests pass with `task test`\n- [ ] Package maintains 80%+ coverage\n- [ ] Follow-on code review passes","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T21:29:54Z","created_by":"seanb4t","updated_at":"2026-01-17T21:48:05Z","closed_at":"2026-01-17T21:48:05Z","dependencies":[{"issue_id":"holomush-e55.24","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.25","title":"Fix silent failure: Listener close error ignored","description":"**Location:** internal/control/socket.go:128\n\n**Issue:** Listener close error is ignored during shutdown.\n\n**Acceptance Criteria:**\n- [ ] Listener close errors are properly logged\n- [ ] Tests verify cleanup behavior\n- [ ] Tests pass with `task test`\n- [ ] Package maintains 80%+ coverage\n- [ ] Follow-on code review passes","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T21:29:54Z","created_by":"seanb4t","updated_at":"2026-01-17T21:48:05Z","closed_at":"2026-01-17T21:48:05Z","dependencies":[{"issue_id":"holomush-e55.25","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.26","title":"Fix silent failure: Socket file removal error ignored","description":"**Location:** internal/control/socket.go:132\n\n**Issue:** Socket file removal error is ignored during cleanup.\n\n**Acceptance Criteria:**\n- [ ] Socket removal errors are properly logged\n- [ ] Tests verify cleanup behavior\n- [ ] Tests pass with `task test`\n- [ ] Package maintains 80%+ coverage\n- [ ] Follow-on code review passes","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T21:29:54Z","created_by":"seanb4t","updated_at":"2026-01-17T21:48:05Z","closed_at":"2026-01-17T21:48:05Z","dependencies":[{"issue_id":"holomush-e55.26","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.27","title":"Increase test coverage: internal/store (0% → 80%+)","description":"**Package:** internal/store\n**Current Coverage:** 0%\n**Target Coverage:** 80%+\n\n**Files to test:**\n- postgres.go - PostgresEventStore implementation\n- All EventStore interface methods\n\n**Acceptance Criteria:**\n- [ ] Unit tests for all public methods\n- [ ] Mock database for isolation\n- [ ] Error path coverage\n- [ ] Tests pass with `task test`\n- [ ] Coverage ≥80% verified with `task test:coverage`\n- [ ] Follow-on code review passes","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T21:30:08Z","created_by":"seanb4t","updated_at":"2026-01-17T21:48:05Z","closed_at":"2026-01-17T21:48:05Z","dependencies":[{"issue_id":"holomush-e55.27","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.28","title":"Increase test coverage: cmd/holomush (31.4% → 80%+)","description":"**Package:** cmd/holomush\n**Current Coverage:** 31.4%\n**Target Coverage:** 80%+\n\n**Files to test:**\n- main.go - Entry point\n- Cobra command initialization\n- Flag parsing\n\n**Acceptance Criteria:**\n- [ ] Unit tests for command setup\n- [ ] Integration tests for CLI behavior\n- [ ] Tests pass with `task test`\n- [ ] Coverage ≥80% verified with `task test:coverage`\n- [ ] Follow-on code review passes","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T21:30:08Z","created_by":"seanb4t","updated_at":"2026-01-17T21:48:05Z","closed_at":"2026-01-17T21:48:05Z","dependencies":[{"issue_id":"holomush-e55.28","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.29","title":"Increase test coverage: internal/control (34.7% → 80%+)","description":"**Package:** internal/control\n**Current Coverage:** 34.7%\n**Target Coverage:** 80%+\n\n**Files to test:**\n- socket.go - Control socket HTTP server\n\n**Acceptance Criteria:**\n- [ ] Unit tests for all handlers\n- [ ] Error path coverage\n- [ ] Lifecycle tests (start/stop)\n- [ ] Tests pass with `task test`\n- [ ] Coverage ≥80% verified with `task test:coverage`\n- [ ] Follow-on code review passes\n\n**Note:** Depends on silent failure fixes (e55.23-26)","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T21:30:08Z","created_by":"seanb4t","updated_at":"2026-01-17T21:53:52Z","closed_at":"2026-01-17T21:53:52Z","dependencies":[{"issue_id":"holomush-e55.29","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.29","depends_on_id":"holomush-e55.23","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.29","depends_on_id":"holomush-e55.24","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.29","depends_on_id":"holomush-e55.25","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.29","depends_on_id":"holomush-e55.26","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.3","title":"TLS certificate generation and mTLS utilities","description":"Auto-generate root CA, core server cert, and gateway client cert. Include game_id in core cert SAN. Store in XDG config dir.","status":"tombstone","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T20:31:11Z","created_by":"seanb4t","updated_at":"2026-01-17T20:44:22Z","work_type":"mutex"}
{"id":"holomush-e55.30","title":"Increase test coverage: internal/grpc (61.7% → 80%+)","description":"**Package:** internal/grpc\n**Current Coverage:** 61.7%\n**Target Coverage:** 80%+\n\n**Files to test:**\n- server.go - Core gRPC service\n- client.go - Gateway gRPC client\n\n**Acceptance Criteria:**\n- [ ] Unit tests for all RPC methods\n- [ ] Error path coverage\n- [ ] Connection handling tests\n- [ ] Tests pass with `task test`\n- [ ] Coverage ≥80% verified with `task test:coverage`\n- [ ] Follow-on code review passes","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T21:30:08Z","created_by":"seanb4t","updated_at":"2026-01-17T21:48:05Z","closed_at":"2026-01-17T21:48:05Z","dependencies":[{"issue_id":"holomush-e55.30","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.31","title":"Add test: Unix socket permission errors","description":"**Package:** internal/control\n**Gap:** No permission error tests for Unix socket creation\n\n**Test scenarios:**\n- Socket creation in read-only directory\n- Socket creation with insufficient permissions\n- Socket path too long\n\n**Acceptance Criteria:**\n- [ ] Tests cover permission error scenarios\n- [ ] Error messages are helpful\n- [ ] Tests pass with `task test`\n- [ ] Package maintains 80%+ coverage\n- [ ] Follow-on code review passes","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T21:30:27Z","created_by":"seanb4t","updated_at":"2026-01-17T22:03:17Z","closed_at":"2026-01-17T22:03:17Z","dependencies":[{"issue_id":"holomush-e55.31","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.31","depends_on_id":"holomush-e55.29","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.32","title":"Add test: Concurrent request handling","description":"**Package:** internal/control\n**Gap:** No concurrent request handling tests\n\n**Test scenarios:**\n- Multiple simultaneous status requests\n- Concurrent shutdown requests\n- Race condition detection\n\n**Acceptance Criteria:**\n- [ ] Tests verify concurrent safety\n- [ ] No race conditions (verified with `-race`)\n- [ ] Tests pass with `task test`\n- [ ] Package maintains 80%+ coverage\n- [ ] Follow-on code review passes","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T21:30:27Z","created_by":"seanb4t","updated_at":"2026-01-17T22:03:17Z","closed_at":"2026-01-17T22:03:17Z","dependencies":[{"issue_id":"holomush-e55.32","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.32","depends_on_id":"holomush-e55.29","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.33","title":"Add test: Graceful shutdown under load","description":"**Package:** internal/control\n**Gap:** No graceful shutdown tests under load\n\n**Test scenarios:**\n- Shutdown with pending requests\n- Shutdown timeout behavior\n- Connection draining\n\n**Acceptance Criteria:**\n- [ ] Tests verify graceful shutdown\n- [ ] Pending requests complete or timeout properly\n- [ ] Tests pass with `task test`\n- [ ] Package maintains 80%+ coverage\n- [ ] Follow-on code review passes","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T21:30:28Z","created_by":"seanb4t","updated_at":"2026-01-17T22:03:17Z","closed_at":"2026-01-17T22:03:17Z","dependencies":[{"issue_id":"holomush-e55.33","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.33","depends_on_id":"holomush-e55.29","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.34","title":"Add test: TLS certificate expiration","description":"**Package:** internal/tls\n**Gap:** No certificate expiration tests\n\n**Test scenarios:**\n- Certificate near expiration warning\n- Expired certificate rejection\n- Certificate rotation behavior\n\n**Acceptance Criteria:**\n- [ ] Tests verify expiration handling\n- [ ] Appropriate warnings/errors logged\n- [ ] Tests pass with `task test`\n- [ ] Package maintains 80%+ coverage\n- [ ] Follow-on code review passes","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T21:30:28Z","created_by":"seanb4t","updated_at":"2026-01-17T21:53:52Z","closed_at":"2026-01-17T21:53:52Z","dependencies":[{"issue_id":"holomush-e55.34","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.34","depends_on_id":"holomush-e55.30","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.35","title":"Add test: Invalid TLS certificates","description":"**Package:** internal/tls, internal/grpc\n**Gap:** No invalid certificate tests\n\n**Test scenarios:**\n- Self-signed cert without proper CA\n- Wrong hostname in certificate\n- Revoked certificate handling\n- Mismatched key/cert pair\n\n**Acceptance Criteria:**\n- [ ] Tests verify invalid cert rejection\n- [ ] Clear error messages\n- [ ] Tests pass with `task test`\n- [ ] Package maintains 80%+ coverage\n- [ ] Follow-on code review passes","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T21:30:28Z","created_by":"seanb4t","updated_at":"2026-01-17T21:53:52Z","closed_at":"2026-01-17T21:53:52Z","dependencies":[{"issue_id":"holomush-e55.35","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.35","depends_on_id":"holomush-e55.30","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.36","title":"Add test: Session expiration","description":"**Package:** internal/grpc\n**Gap:** No session expiration tests\n\n**Test scenarios:**\n- Session timeout after inactivity\n- Session cleanup on expiration\n- Session refresh behavior\n\n**Acceptance Criteria:**\n- [ ] Tests verify session lifecycle\n- [ ] Proper cleanup on expiration\n- [ ] Tests pass with `task test`\n- [ ] Package maintains 80%+ coverage\n- [ ] Follow-on code review passes","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T21:30:28Z","created_by":"seanb4t","updated_at":"2026-01-17T21:53:52Z","closed_at":"2026-01-17T21:53:52Z","dependencies":[{"issue_id":"holomush-e55.36","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.36","depends_on_id":"holomush-e55.30","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.37","title":"Add test: Command timeout handling","description":"**Package:** internal/grpc\n**Gap:** No command timeout tests\n\n**Test scenarios:**\n- Command execution timeout\n- Context cancellation propagation\n- Timeout error messages\n\n**Acceptance Criteria:**\n- [ ] Tests verify timeout behavior\n- [ ] Contexts properly cancelled\n- [ ] Tests pass with `task test`\n- [ ] Package maintains 80%+ coverage\n- [ ] Follow-on code review passes","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T21:30:29Z","created_by":"seanb4t","updated_at":"2026-01-17T21:53:52Z","closed_at":"2026-01-17T21:53:52Z","dependencies":[{"issue_id":"holomush-e55.37","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.37","depends_on_id":"holomush-e55.30","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.38","title":"Add test: Malformed request handling","description":"**Package:** internal/control, internal/grpc\n**Gap:** No malformed request tests\n\n**Test scenarios:**\n- Invalid JSON in control socket\n- Truncated gRPC messages\n- Unknown fields handling\n- Oversized requests\n\n**Acceptance Criteria:**\n- [ ] Tests verify malformed input rejection\n- [ ] Clear error messages returned\n- [ ] No panics on bad input\n- [ ] Tests pass with `task test`\n- [ ] Package maintains 80%+ coverage\n- [ ] Follow-on code review passes","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T21:30:29Z","created_by":"seanb4t","updated_at":"2026-01-17T22:03:17Z","closed_at":"2026-01-17T22:03:17Z","dependencies":[{"issue_id":"holomush-e55.38","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.38","depends_on_id":"holomush-e55.29","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.38","depends_on_id":"holomush-e55.30","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.39","title":"CRITICAL: gRPC server goroutine swallows errors","description":"## Problem\n`Start()` in `internal/control/grpc_server.go:62-69` returns nil immediately after launching goroutine. Server failures are logged but not propagated to caller.\n\n## Location\n`internal/control/grpc_server.go:62-69`\n\n## Hidden Errors\n- TLS handshake failures\n- Network binding failures after initial Listen() succeeds\n- gRPC protocol-level errors\n\n## Acceptance Criteria\n- [ ] Write a test that proves the bug exists (server error not visible to caller)\n- [ ] Return error channel from Start() OR use startup sync to verify server begins serving\n- [ ] Caller can detect and respond to server failures\n- [ ] All existing tests pass\n- [ ] Code review by separate agent confirms fix is complete","status":"closed","priority":0,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T01:15:29Z","created_by":"seanb4t","updated_at":"2026-01-18T01:41:29Z","closed_at":"2026-01-18T01:41:29Z","dependencies":[{"issue_id":"holomush-e55.39","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.4","title":"Cobra CLI skeleton","description":"Set up Cobra with root command and subcommands: gateway, core, migrate, status. Include common flags (--log-format, --otlp-endpoint, --config-dir, --data-dir).","status":"tombstone","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T20:31:11Z","created_by":"seanb4t","updated_at":"2026-01-17T20:44:22Z","work_type":"mutex"}
{"id":"holomush-e55.40","title":"CRITICAL: Observability server goroutine swallows errors","description":"## Problem\n`Start()` in `internal/observability/server.go:120-124` returns nil immediately. Errors from Serve() are logged but never propagated to caller.\n\n## Location\n`internal/observability/server.go:120-124`\n\n## Hidden Errors\n- Port conflicts after Listen() succeeds\n- HTTP protocol errors\n- Resource exhaustion during serving\n\n## Acceptance Criteria\n- [ ] Write a test that proves the bug exists (server error not visible to caller)\n- [ ] Return error channel from Start() OR use startup sync pattern\n- [ ] Caller can detect and respond to server failures\n- [ ] All existing tests pass\n- [ ] Code review by separate agent confirms fix is complete","status":"closed","priority":0,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T01:15:29Z","created_by":"seanb4t","updated_at":"2026-01-18T01:41:29Z","closed_at":"2026-01-18T01:41:29Z","dependencies":[{"issue_id":"holomush-e55.40","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.41","title":"CRITICAL: GRPCServer.Start() has 0% test coverage","description":"## Problem\nThe `Start()` method that binds control gRPC server with mTLS has zero test coverage. The mTLS integration path is entirely untested.\n\n## Location\n`internal/control/grpc_server.go:51`\n\n## What Tests Would Catch\n- TLS configuration errors preventing process management\n- Port binding failures leaving orphaned processes\n- gRPC service registration issues\n\n## Acceptance Criteria\n- [ ] Add integration test for Start() with valid TLS certs\n- [ ] Verify mTLS handshake works end-to-end\n- [ ] Test server actually listens after Start() returns\n- [ ] Coverage for Start() method reaches 80%+\n- [ ] Code review by separate agent confirms coverage is adequate","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T01:15:29Z","created_by":"seanb4t","updated_at":"2026-01-18T01:46:11Z","closed_at":"2026-01-18T01:46:11Z","dependencies":[{"issue_id":"holomush-e55.41","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.42","title":"IMPORTANT: Resource leak - gRPC listener not closed on startup failure","description":"## Problem\nWhen `net.Listen` succeeds but subsequent operations fail (loading control TLS config or starting control gRPC server), the listener is not closed before returning an error.\n\n## Location\n`cmd/holomush/core.go:137-157`\n\n## Impact\nLeaked file descriptors and ports held open on startup failures.\n\n## Acceptance Criteria\n- [ ] Write a test that proves the bug exists (listener leaked on TLS config failure)\n- [ ] Add `defer listener.Close()` after successful listen OR explicit close on error paths\n- [ ] Verify no resource leaks on any startup failure path\n- [ ] All existing tests pass\n- [ ] Code review by separate agent confirms fix is complete","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T01:15:55Z","created_by":"seanb4t","updated_at":"2026-01-18T01:41:29Z","closed_at":"2026-01-18T01:41:29Z","dependencies":[{"issue_id":"holomush-e55.42","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.43","title":"IMPORTANT: Dead code - errChan never receives in gateway","description":"## Problem\n`errChan` is created but nothing ever sends to it. The telnet accept loop logs errors and continues but never sends to errChan. The `case err := \u003c-errChan` select branch is dead code.\n\n## Location\n`cmd/holomush/gateway.go:165,194`\n\n## Impact\nIf telnet listener enters failure loop (resource exhaustion), gateway continues running but is non-functional. Errors scroll by unnoticed while process appears healthy.\n\n## Acceptance Criteria\n- [ ] Write a test that proves errChan select case is never triggered\n- [ ] Either remove errChan OR implement failure threshold (N consecutive failures → send fatal error)\n- [ ] Gateway correctly signals fatal accept errors\n- [ ] All existing tests pass\n- [ ] Code review by separate agent confirms fix is complete","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T01:15:56Z","created_by":"seanb4t","updated_at":"2026-01-18T01:41:29Z","closed_at":"2026-01-18T01:41:29Z","dependencies":[{"issue_id":"holomush-e55.43","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.44","title":"IMPORTANT: Broad error handling in ensureTLSCerts","description":"## Problem\nWhen `tls.LoadServerTLS` returns any error, code assumes certificates do not exist and proceeds to generate new ones. This conflates \"file not found\" with \"file corrupted\" or \"permission denied\".\n\n## Location\n`cmd/holomush/core.go:250-256`\n\n## Impact\nIf existing certificates are corrupted, system silently regenerates them, breaking existing client connections that trusted old certificates.\n\n## Acceptance Criteria\n- [ ] Write a test that proves corrupted cert triggers regeneration (unexpected behavior)\n- [ ] Check for specific error types - only proceed with generation if `os.IsNotExist(err)`\n- [ ] For other errors (corruption, permission), return them to caller with context\n- [ ] All existing tests pass\n- [ ] Code review by separate agent confirms fix is complete","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T01:15:56Z","created_by":"seanb4t","updated_at":"2026-01-18T01:46:11Z","closed_at":"2026-01-18T01:46:11Z","dependencies":[{"issue_id":"holomush-e55.44","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.45","title":"IMPORTANT: Swallowed cleanup errors during shutdown","description":"## Problem\nDuring error cleanup paths (when component fails to start), errors from stopping already-started components are discarded with `_ = ...`. Secondary cleanup failures are completely lost.\n\n## Locations\n- `cmd/holomush/core.go:168-171`\n- `cmd/holomush/gateway.go:137-140,151-154`\n\n## Impact\nIf startup fails and cleanup also fails, users only see primary error. Lingering sockets or resources could cause issues on retry.\n\n## Acceptance Criteria\n- [ ] Write a test that proves cleanup errors are invisible\n- [ ] Log cleanup errors at warn level before returning primary error\n- [ ] Consider multi-error pattern for aggregating errors\n- [ ] All existing tests pass\n- [ ] Code review by separate agent confirms fix is complete","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T01:15:56Z","created_by":"seanb4t","updated_at":"2026-01-18T01:50:28Z","closed_at":"2026-01-18T01:50:28Z","dependencies":[{"issue_id":"holomush-e55.45","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.46","title":"IMPORTANT: runCore() has 10.3% test coverage","description":"## Problem\nThe main `runCore()` function that orchestrates entire core process startup has minimal coverage. Only early error paths (missing DATABASE_URL) are tested.\n\n## Location\n`cmd/holomush/core.go:72`\n\n## Untested Critical Paths\n- Database connection and game ID initialization (lines 84-107)\n- TLS certificate loading and generation flow (lines 109-121)\n- Control gRPC server startup and error handling (lines 148-159)\n- Observability server startup and cleanup on failure (lines 161-174)\n- Signal handling and graceful shutdown (lines 176-226)\n\n## Acceptance Criteria\n- [ ] Add test for successful runCore() with mocked dependencies\n- [ ] Test race conditions between server startup and shutdown\n- [ ] Test resource leaks when startup fails partway through\n- [ ] Coverage for runCore() reaches 60%+\n- [ ] Code review by separate agent confirms coverage is adequate","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T01:15:56Z","created_by":"seanb4t","updated_at":"2026-01-18T01:57:52Z","closed_at":"2026-01-18T01:57:52Z","dependencies":[{"issue_id":"holomush-e55.46","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.47","title":"MEDIUM: Discarded write error in telnet handler","description":"## Problem\nThe third `Fprintln` call intentionally discards both bytes written and error with `_, _ = fmt.Fprintln(...)`. Inconsistent with previous two writes which check errors.\n\n## Location\n`cmd/holomush/gateway.go:247`\n\n## Impact\nMinor - connection is closing anyway. However inconsistent pattern suggests incomplete error handling.\n\n## Acceptance Criteria\n- [ ] Write a test that shows write error is not logged (unlike other writes)\n- [ ] Either log error at debug level like others OR document why this case intentionally ignores errors\n- [ ] Consistent error handling pattern across all writes\n- [ ] All existing tests pass\n- [ ] Code review by separate agent confirms fix is complete","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T01:16:11Z","created_by":"seanb4t","updated_at":"2026-01-18T01:46:11Z","closed_at":"2026-01-18T01:46:11Z","dependencies":[{"issue_id":"holomush-e55.47","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.48","title":"MEDIUM: runGateway() has 9.0% test coverage","description":"## Problem\nThe gateway orchestration function is almost entirely untested.\n\n## Location\n`cmd/holomush/gateway.go:65`\n\n## Untested Critical Paths\n- Game ID extraction from CA certificate (lines 84-87)\n- TLS client configuration for mTLS to core (lines 89-93)\n- gRPC client creation and error handling (lines 98-109)\n- Telnet listener startup and cleanup (lines 130-143)\n- Connection accept loop and error handling (lines 166-182)\n\n## Acceptance Criteria\n- [ ] Add test for successful runGateway() with mocked dependencies\n- [ ] Test game ID extraction paths\n- [ ] Test connection accept and error handling\n- [ ] Coverage for runGateway() reaches 50%+\n- [ ] Code review by separate agent confirms coverage is adequate","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T01:16:11Z","created_by":"seanb4t","updated_at":"2026-01-18T01:57:52Z","closed_at":"2026-01-18T01:57:52Z","dependencies":[{"issue_id":"holomush-e55.48","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.49","title":"MEDIUM: LoadControlServerTLS() missing invalid content tests","description":"## Problem\n`LoadControlServerTLS()` has 46.2% coverage. Missing tests for invalid certificate file content (valid path, corrupted data) and CA pool append failure scenarios.\n\n## Location\n`internal/control/grpc_server.go:117`\n\n## Missing Tests\n- Invalid certificate file content\n- CA pool append failure scenario\n- Corrupted PEM data\n\n## Acceptance Criteria\n- [ ] Add test for invalid cert content (valid path, corrupted data)\n- [ ] Add test for CA pool append failure\n- [ ] Add test for malformed PEM data\n- [ ] Coverage for LoadControlServerTLS() reaches 80%+\n- [ ] Code review by separate agent confirms coverage is adequate","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T01:16:11Z","created_by":"seanb4t","updated_at":"2026-01-18T01:50:28Z","closed_at":"2026-01-18T01:50:28Z","dependencies":[{"issue_id":"holomush-e55.49","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.5","title":"gRPC proto definitions and codegen","description":"Define Core service proto with Authenticate, HandleCommand, Subscribe (streaming), Disconnect RPCs. Set up buf for code generation.","status":"tombstone","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T20:31:12Z","created_by":"seanb4t","updated_at":"2026-01-17T20:44:22Z","work_type":"mutex"}
{"id":"holomush-e55.50","title":"Propagate control server errors to trigger shutdown in core.go","description":"## Problem\nIn cmd/holomush/core.go:161-165, control server errors are logged but the main process continues running, leaving the process uncontrollable.\n\n## Acceptance Criteria\n- [ ] Write a test that proves the bug exists (control server failure doesn't trigger shutdown)\n- [ ] Implement fix: cancel context on control server error\n- [ ] Test passes showing shutdown is triggered on error\n- [ ] Code reviewed by separate agent using pr-review-toolkit:code-reviewer","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T02:16:44Z","created_by":"seanb4t","updated_at":"2026-01-18T02:31:29Z","closed_at":"2026-01-18T02:31:29Z","dependencies":[{"issue_id":"holomush-e55.50","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.51","title":"Monitor observability error channel in core.go instead of discarding","description":"## Problem\nIn cmd/holomush/core.go:175, the observability server error channel is discarded. If observability fails after startup, the process is unaware.\n\n## Acceptance Criteria\n- [ ] Write a test that proves the bug exists (observability failure is not detected)\n- [ ] Implement fix: monitor error channel and cancel context on error\n- [ ] Test passes showing shutdown is triggered on observability error\n- [ ] Code reviewed by separate agent using pr-review-toolkit:code-reviewer","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T02:16:44Z","created_by":"seanb4t","updated_at":"2026-01-18T02:31:29Z","closed_at":"2026-01-18T02:31:29Z","dependencies":[{"issue_id":"holomush-e55.51","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.52","title":"Propagate control server errors to trigger shutdown in gateway.go","description":"## Problem\nIn cmd/holomush/gateway.go:129-133, control server errors are logged but the main process continues running, leaving the gateway uncontrollable.\n\n## Acceptance Criteria\n- [ ] Write a test that proves the bug exists (control server failure doesn't trigger shutdown)\n- [ ] Implement fix: cancel context on control server error\n- [ ] Test passes showing shutdown is triggered on error\n- [ ] Code reviewed by separate agent using pr-review-toolkit:code-reviewer","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T02:16:44Z","created_by":"seanb4t","updated_at":"2026-01-18T02:31:29Z","closed_at":"2026-01-18T02:31:29Z","dependencies":[{"issue_id":"holomush-e55.52","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.53","title":"Monitor observability error channel in gateway.go instead of discarding","description":"## Problem\nIn cmd/holomush/gateway.go:159, the observability server error channel is discarded. If observability fails after startup, the gateway is unaware.\n\n## Acceptance Criteria\n- [ ] Write a test that proves the bug exists (observability failure is not detected)\n- [ ] Implement fix: monitor error channel and cancel context on error\n- [ ] Test passes showing shutdown is triggered on observability error\n- [ ] Code reviewed by separate agent using pr-review-toolkit:code-reviewer","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T02:16:44Z","created_by":"seanb4t","updated_at":"2026-01-18T02:31:29Z","closed_at":"2026-01-18T02:31:29Z","dependencies":[{"issue_id":"holomush-e55.53","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.54","title":"Increase test coverage in cmd/holomush to 80%","description":"## Problem\nCurrent coverage is 42%, required is \u003e80%. Key gaps:\n- runCore: 10.5%\n- runGateway: 13.1%\n- runStatus: 0%\n\n## Acceptance Criteria\n- [ ] Add integration tests for runCore startup sequence with mock database\n- [ ] Add integration tests for runGateway startup sequence\n- [ ] Add unit tests for runStatus with mock gRPC responses\n- [ ] Add shutdown sequence ordering tests\n- [ ] Coverage reaches \u003e80% for cmd/holomush package\n- [ ] Code reviewed by separate agent using pr-review-toolkit:pr-test-analyzer","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T02:16:45Z","created_by":"seanb4t","updated_at":"2026-01-18T02:41:46Z","closed_at":"2026-01-18T02:41:46Z","dependencies":[{"issue_id":"holomush-e55.54","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.55","title":"Fix package comment inaccuracy in grpc_server.go","description":"## Problem\nIn internal/control/grpc_server.go:1, package comment says 'HTTP and gRPC control interfaces' but only provides gRPC.\n\n## Acceptance Criteria\n- [ ] Update comment to accurately describe package contents\n- [ ] Code reviewed by separate agent using pr-review-toolkit:comment-analyzer","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T02:17:00Z","created_by":"seanb4t","updated_at":"2026-01-18T02:31:29Z","closed_at":"2026-01-18T02:31:29Z","dependencies":[{"issue_id":"holomush-e55.55","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.56","title":"Fix misleading comment about gRPC server readiness in core.go","description":"## Problem\nIn cmd/holomush/core.go:172-173, comment says 'gRPC server is listening' but server isn't serving yet at that point.\n\n## Acceptance Criteria\n- [ ] Update comment to accurately describe state: 'database is connected, listener is bound, core components initialized'\n- [ ] Code reviewed by separate agent using pr-review-toolkit:comment-analyzer","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T02:17:00Z","created_by":"seanb4t","updated_at":"2026-01-18T02:31:29Z","closed_at":"2026-01-18T02:31:29Z","dependencies":[{"issue_id":"holomush-e55.56","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.57","title":"Add double-start guard to GRPCServer","description":"## Problem\nIn internal/control/grpc_server.go, calling Start() twice will leak the first listener. No guard exists.\n\n## Acceptance Criteria\n- [ ] Write a test that proves the bug exists (double-start leaks listener)\n- [ ] Add guard: return error if listener \\!= nil\n- [ ] Test passes showing double-start returns error\n- [ ] Code reviewed by separate agent using pr-review-toolkit:code-reviewer","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T02:17:01Z","created_by":"seanb4t","updated_at":"2026-01-18T02:31:29Z","closed_at":"2026-01-18T02:31:29Z","dependencies":[{"issue_id":"holomush-e55.57","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.58","title":"Add component validation to GRPCServer constructor","description":"## Problem\nIn internal/control/grpc_server.go, NewGRPCServer('', fn) creates an invalid server silently.\n\n## Acceptance Criteria\n- [ ] Write a test that proves the bug exists (empty component accepted)\n- [ ] Add validation: return error if component is empty\n- [ ] Test passes showing empty component returns error\n- [ ] Code reviewed by separate agent using pr-review-toolkit:code-reviewer","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T02:17:01Z","created_by":"seanb4t","updated_at":"2026-01-18T02:31:29Z","closed_at":"2026-01-18T02:31:29Z","dependencies":[{"issue_id":"holomush-e55.58","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.59","title":"Fix race condition in GRPCServer.Stop()","description":"## Problem\nIn internal/control/grpc_server.go, running.Store(false) happens before GracefulStop() completes, creating a brief window where status reports 'stopped' before actually stopped.\n\n## Acceptance Criteria\n- [ ] Write a test that proves the race condition exists\n- [ ] Fix: set running=false after GracefulStop() completes\n- [ ] Test passes showing status remains 'running' until stop completes\n- [ ] Code reviewed by separate agent using pr-review-toolkit:code-reviewer","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T02:17:01Z","created_by":"seanb4t","updated_at":"2026-01-18T02:31:29Z","closed_at":"2026-01-18T02:31:29Z","dependencies":[{"issue_id":"holomush-e55.59","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.6","title":"Core process implementation","description":"Wrap existing engine in gRPC server. Listen on --grpc-addr with mTLS. Connect to PostgreSQL. Implement Core service RPCs.","status":"tombstone","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T20:31:12Z","created_by":"seanb4t","updated_at":"2026-01-17T20:44:22Z","work_type":"mutex"}
{"id":"holomush-e55.60","title":"Plan migration from deprecated grpc.DialContext to grpc.NewClient","description":"## Problem\nIn cmd/holomush/status.go:115, uses deprecated grpc.DialContext with a nolint directive.\n\n## Acceptance Criteria\n- [ ] Research grpc.NewClient connection lifecycle differences\n- [ ] Document migration approach\n- [ ] Implement migration when gRPC 2.x patterns stabilize\n- [ ] Code reviewed by separate agent using pr-review-toolkit:code-reviewer","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T02:17:17Z","created_by":"seanb4t","updated_at":"2026-01-18T02:41:47Z","closed_at":"2026-01-18T02:41:47Z","dependencies":[{"issue_id":"holomush-e55.60","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.61","title":"Remove obvious comments that add no value","description":"## Problem\nComments like '// Register flags', '// Set up logging', '// Get database URL' add no value.\n\nLocations:\n- core.go:60,73,83,89,109,123,187\n- gateway.go:54,66,77,113,174\n- status.go:49\n\n## Acceptance Criteria\n- [ ] Remove all listed obvious comments\n- [ ] Verify no meaningful context is lost\n- [ ] Code reviewed by separate agent using pr-review-toolkit:comment-analyzer","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T02:17:18Z","created_by":"seanb4t","updated_at":"2026-01-18T02:41:47Z","closed_at":"2026-01-18T02:41:47Z","dependencies":[{"issue_id":"holomush-e55.61","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.62","title":"Add TODO tag to placeholder telnet comment for future cleanup","description":"## Problem\nIn cmd/holomush/gateway.go:137-141, the placeholder telnet comment lacks a TODO tag or issue reference for cleanup when gRPC handler is implemented.\n\n## Acceptance Criteria\n- [ ] Add TODO tag with issue reference\n- [ ] Code reviewed by separate agent using pr-review-toolkit:comment-analyzer","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T02:17:18Z","created_by":"seanb4t","updated_at":"2026-01-18T02:41:47Z","closed_at":"2026-01-18T02:41:47Z","dependencies":[{"issue_id":"holomush-e55.62","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.63","title":"Add Validate() methods to config structs","description":"## Problem\nConfig structs (coreConfig, gatewayConfig, statusConfig) lack validation. Invalid values cause late runtime errors instead of early failures.\n\n## Acceptance Criteria\n- [ ] Write tests that prove invalid configs are accepted\n- [ ] Add Validate() method to each config struct\n- [ ] Call Validate() after flag parsing in each command\n- [ ] Tests pass showing invalid configs are rejected early\n- [ ] Code reviewed by separate agent using pr-review-toolkit:type-design-analyzer","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T02:17:18Z","created_by":"seanb4t","updated_at":"2026-01-18T02:41:47Z","closed_at":"2026-01-18T02:41:47Z","dependencies":[{"issue_id":"holomush-e55.63","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.64","title":"Add constructor functions for ProcessStatus to prevent invalid states","description":"## Problem\nIn cmd/holomush/status.go, ProcessStatus allows inconsistent states like Running: true with Error: 'something'.\n\n## Acceptance Criteria\n- [ ] Write tests that prove invalid states can be created\n- [ ] Add NewProcessStatus() and NewProcessStatusError() constructors\n- [ ] Use constructors in queryProcessStatusGRPC()\n- [ ] Tests pass showing invalid states are prevented\n- [ ] Code reviewed by separate agent using pr-review-toolkit:type-design-analyzer","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T02:17:18Z","created_by":"seanb4t","updated_at":"2026-01-18T02:41:47Z","closed_at":"2026-01-18T02:41:47Z","dependencies":[{"issue_id":"holomush-e55.64","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.65","title":"Fix CI lint failure: prealloc issue in grpc/server.go","description":"## Problem\nCI build is failing on main branch. Lint job fails with prealloc error.\n\n**Error:**\n```\ninternal/grpc/server.go:295:2: Consider pre-allocating `channels` (prealloc)\n    var channels []chan core.Event\n```\n\n**Failed runs:** 21104365542, 21103645279, 21103566615\n\n## Acceptance Criteria\n- [ ] Fix prealloc issue by pre-allocating slice with known capacity\n- [ ] CI passes on main branch\n- [ ] Code reviewed by separate agent using pr-review-toolkit:code-reviewer","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T02:21:15Z","created_by":"seanb4t","updated_at":"2026-01-18T02:31:29Z","closed_at":"2026-01-18T02:31:29Z","dependencies":[{"issue_id":"holomush-e55.65","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.66","title":"Refactor runCore/runGateway for testability via dependency injection","description":"## Problem\n`runCore()` and `runGateway()` have low test coverage (10-14%) because they're monolithic functions with hardcoded dependencies:\n- Database connections (PostgreSQL)\n- TLS certificate loading\n- gRPC server creation\n- Observability server creation\n- Signal handling\n\nCurrent cmd/holomush coverage: 54.6%\n\n## Solution\nRefactor using dependency injection pattern to allow mocking in tests.\n\n## Implementation Approach\n1. Define interfaces for external dependencies:\n   - EventStoreFactory\n   - TLSLoader\n   - GRPCServerFactory\n   - ObservabilityServerFactory\n\n2. Create a `CoreDeps` struct for runCore dependencies\n3. Create a `GatewayDeps` struct for runGateway dependencies\n4. Modify run functions to accept deps (with sensible defaults for production)\n5. Write tests using mock implementations\n\n## Acceptance Criteria\n- [ ] Dependencies are injectable via struct or functional options\n- [ ] Mock implementations exist for all external dependencies\n- [ ] Tests cover happy path and error paths for runCore\n- [ ] Tests cover happy path and error paths for runGateway\n- [ ] cmd/holomush test coverage exceeds 80%\n- [ ] Existing tests continue to pass\n- [ ] `task lint` passes\n- [ ] `task test` passes\n- [ ] Code reviewed by separate agent using pr-review-toolkit:code-reviewer","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T02:53:55Z","created_by":"seanb4t","updated_at":"2026-01-18T03:09:59Z","closed_at":"2026-01-18T03:09:59Z","dependencies":[{"issue_id":"holomush-e55.66","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.67","title":"Fix race condition in observability Server.Stop()","description":"## Problem\nThe Stop() method in internal/observability/server.go has a race condition. It checks `running` with `Load()` but then sets it with `Store()`. Between these two operations, a concurrent `Start()` call could succeed.\n\n## Files\n- internal/observability/server.go\n\n## Acceptance Criteria\n- [ ] Write a test that demonstrates the race condition (run with -race flag)\n- [ ] Fix Stop() to use CompareAndSwap for atomic state transition\n- [ ] All existing tests pass\n- [ ] New test passes without race detector warnings\n- [ ] Code reviewed by separate agent before merge","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T03:27:41Z","created_by":"seanb4t","updated_at":"2026-01-18T03:37:02Z","closed_at":"2026-01-18T03:37:02Z","dependencies":[{"issue_id":"holomush-e55.67","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.68","title":"Fix race condition in control GRPCServer.Stop()","description":"## Problem\nThe Stop() method in internal/control/grpc_server.go sets `running.Store(false)` after `GracefulStop()`, but there's no protection against calling Stop() twice concurrently.\n\n## Files\n- internal/control/grpc_server.go\n\n## Acceptance Criteria\n- [ ] Write a test that demonstrates the race condition (run with -race flag)\n- [ ] Fix Stop() to use CompareAndSwap for atomic state transition\n- [ ] All existing tests pass\n- [ ] New test passes without race detector warnings\n- [ ] Code reviewed by separate agent before merge","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T03:27:41Z","created_by":"seanb4t","updated_at":"2026-01-18T03:34:06Z","closed_at":"2026-01-18T03:34:06Z","dependencies":[{"issue_id":"holomush-e55.68","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.68","depends_on_id":"holomush-e55.67","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.69","title":"Increase internal/tls test coverage to 80%","description":"## Problem\ninternal/tls package is at 72.2% coverage, below the 80% minimum requirement.\n\n## Files\n- internal/tls/*.go\n- internal/tls/*_test.go\n\n## Acceptance Criteria\n- [ ] Identify uncovered code paths using `task test:coverage`\n- [ ] Write tests for certificate error paths\n- [ ] Write tests for edge cases in TLS configuration\n- [ ] Coverage reaches 80% minimum\n- [ ] All tests pass\n- [ ] Code reviewed by separate agent before merge","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T03:27:42Z","created_by":"seanb4t","updated_at":"2026-01-18T03:43:05Z","closed_at":"2026-01-18T03:43:05Z","dependencies":[{"issue_id":"holomush-e55.69","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.7","title":"Gateway process implementation","description":"gRPC client connecting to core with mTLS. Auto-reconnect on core restart. Forward telnet commands to core, stream events back to clients.","status":"tombstone","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T20:31:12Z","created_by":"seanb4t","updated_at":"2026-01-17T20:44:22Z","work_type":"mutex"}
{"id":"holomush-e55.70","title":"Increase internal/wasm test coverage to 80%","description":"## Problem\ninternal/wasm package is at 71.4% coverage, below the 80% minimum requirement.\n\n## Files\n- internal/wasm/*.go\n- internal/wasm/*_test.go\n\n## Acceptance Criteria\n- [ ] Identify uncovered code paths using `task test:coverage`\n- [ ] Write tests for plugin loading edge cases\n- [ ] Write tests for WASM runtime error handling\n- [ ] Coverage reaches 80% minimum\n- [ ] All tests pass\n- [ ] Code reviewed by separate agent before merge","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T03:27:42Z","created_by":"seanb4t","updated_at":"2026-01-18T03:38:00Z","closed_at":"2026-01-18T03:38:00Z","dependencies":[{"issue_id":"holomush-e55.70","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.71","title":"Increase internal/xdg test coverage to 80%","description":"## Problem\ninternal/xdg package is at 75.6% coverage, below the 80% minimum requirement.\n\n## Files\n- internal/xdg/*.go\n- internal/xdg/*_test.go\n\n## Acceptance Criteria\n- [ ] Identify uncovered code paths using `task test:coverage`\n- [ ] Write tests for environment variable fallbacks\n- [ ] Write tests for directory creation edge cases\n- [ ] Coverage reaches 80% minimum\n- [ ] All tests pass\n- [ ] Code reviewed by separate agent before merge","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T03:27:42Z","created_by":"seanb4t","updated_at":"2026-01-18T03:32:20Z","closed_at":"2026-01-18T03:32:20Z","dependencies":[{"issue_id":"holomush-e55.71","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.72","title":"Add error logging for discarded defer errors","description":"## Problem\nMultiple locations explicitly discard errors in defer statements with `_ = x.Close()`. This hides resource leak indicators and makes debugging difficult.\n\n## Locations\n- cmd/holomush/core.go:197 - listener.Close()\n- cmd/holomush/gateway.go - similar pattern\n- cmd/holomush/status.go:176 - conn.Close()\n- internal/observability/server.go:169,179,184 - health check write errors\n\n## Files\n- cmd/holomush/core.go\n- cmd/holomush/gateway.go\n- cmd/holomush/status.go\n- internal/observability/server.go\n\n## Acceptance Criteria\n- [ ] Write tests that verify errors are logged (use log capture)\n- [ ] Replace `_ = x.Close()` with logging at debug/warn level\n- [ ] All existing tests pass\n- [ ] New tests verify log output contains close errors\n- [ ] Code reviewed by separate agent before merge","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T03:28:05Z","created_by":"seanb4t","updated_at":"2026-01-18T03:38:04Z","closed_at":"2026-01-18T03:38:04Z","dependencies":[{"issue_id":"holomush-e55.72","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.73","title":"Add panic recovery to telnet accept loop","description":"## Problem\nThe telnet accept goroutine in gateway.go has no panic recovery. If a panic occurs, the entire process will crash without proper cleanup.\n\n## Files\n- cmd/holomush/gateway.go (lines 238-254)\n\n## Acceptance Criteria\n- [ ] Write a test that simulates a panic in the accept loop\n- [ ] Add deferred recover() that logs panic and triggers graceful shutdown\n- [ ] Verify panic doesn't crash the gateway process\n- [ ] All existing tests pass\n- [ ] Code reviewed by separate agent before merge","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T03:28:06Z","created_by":"seanb4t","updated_at":"2026-01-18T03:38:09Z","closed_at":"2026-01-18T03:38:09Z","dependencies":[{"issue_id":"holomush-e55.73","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.73","depends_on_id":"holomush-e55.72","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.74","title":"Fix documentation: --database-url flag vs DATABASE_URL env","description":"## Problem\ngetting-started.md shows `--database-url` flag but the code actually uses `DATABASE_URL` environment variable only.\n\n## Files\n- docs/reference/getting-started.md (line 70)\n\n## Acceptance Criteria\n- [ ] Verify current code behavior (flag vs env var)\n- [ ] Update documentation to match actual implementation\n- [ ] Ensure examples are correct and runnable\n- [ ] Documentation reviewed by separate agent before merge","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T03:28:06Z","created_by":"seanb4t","updated_at":"2026-01-18T03:33:00Z","closed_at":"2026-01-18T03:33:00Z","dependencies":[{"issue_id":"holomush-e55.74","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.75","title":"Fix documentation: postgres version mismatch","description":"## Problem\ngetting-started.md shows `postgres:16` but docker-compose.yaml uses `postgres:18-alpine`.\n\n## Files\n- docs/reference/getting-started.md (line 67)\n- docker-compose.yaml (line 3)\n\n## Acceptance Criteria\n- [ ] Decide on canonical postgres version\n- [ ] Update all references to use consistent version\n- [ ] Verify docker-compose still works\n- [ ] Documentation reviewed by separate agent before merge","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T03:28:06Z","created_by":"seanb4t","updated_at":"2026-01-18T03:33:00Z","closed_at":"2026-01-18T03:33:00Z","dependencies":[{"issue_id":"holomush-e55.75","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.75","depends_on_id":"holomush-e55.74","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.76","title":"Fix documentation: XDG_CONFIG_HOME vs HOME mismatch","description":"## Problem\nDesign docs show `XDG_CONFIG_HOME: /config` but docker-compose.yaml uses `HOME: /home/holomush`.\n\n## Files\n- docs/plans/2026-01-17-goreleaser-docker-compose-design.md\n- docs/plans/2026-01-17-goreleaser-docker-compose-plan.md\n- docker-compose.yaml\n\n## Acceptance Criteria\n- [ ] Verify actual code behavior for config directory resolution\n- [ ] Update design docs to match implementation (or vice versa)\n- [ ] Add note if implementation deviated from design for good reason\n- [ ] Documentation reviewed by separate agent before merge","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T03:28:06Z","created_by":"seanb4t","updated_at":"2026-01-18T03:33:00Z","closed_at":"2026-01-18T03:33:00Z","dependencies":[{"issue_id":"holomush-e55.76","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.76","depends_on_id":"holomush-e55.74","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.76","depends_on_id":"holomush-e55.75","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.77","title":"Fix documentation: goreleaser command mismatch","description":"## Problem\nDesign docs show `goreleaser release --snapshot --clean` but Taskfile.yaml implements `goreleaser build --snapshot --clean --single-target`.\n\n## Files\n- docs/plans/2026-01-17-goreleaser-docker-compose-design.md\n- docs/plans/2026-01-17-goreleaser-docker-compose-plan.md\n- Taskfile.yaml (line 239)\n\n## Acceptance Criteria\n- [ ] Verify actual task behavior\n- [ ] Update design docs to match implementation\n- [ ] Add note explaining why `build` was chosen over `release`\n- [ ] Documentation reviewed by separate agent before merge","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T03:28:06Z","created_by":"seanb4t","updated_at":"2026-01-18T03:33:01Z","closed_at":"2026-01-18T03:33:01Z","dependencies":[{"issue_id":"holomush-e55.77","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.77","depends_on_id":"holomush-e55.76","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.78","title":"Increase internal/core test coverage to 90%","description":"## Problem\ninternal/core package is at 84.8% coverage, below the 90% target for core packages.\n\n## Files\n- internal/core/*.go\n- internal/core/*_test.go\n\n## Acceptance Criteria\n- [ ] Identify uncovered code paths using `task test:coverage`\n- [ ] Write tests for remaining edge cases\n- [ ] Coverage reaches 90% target\n- [ ] All tests pass\n- [ ] Code reviewed by separate agent before merge","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T03:28:07Z","created_by":"seanb4t","updated_at":"2026-01-18T03:34:03Z","closed_at":"2026-01-18T03:34:03Z","dependencies":[{"issue_id":"holomush-e55.78","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.79","title":"Remove unused Listener/Conn/Addr interfaces","description":"## Problem\nCustom `Listener`, `Conn`, and `Addr` interfaces in deps.go duplicate `net.Listener` and `net.Conn`. This adds ~40 lines of unnecessary adapter code.\n\n## Files to modify\n- cmd/holomush/deps.go (remove interfaces at lines 104-120)\n- cmd/holomush/gateway.go (remove netListenerAdapter, writerAdapter)\n\n## Acceptance Criteria\n- [ ] Write test verifying current behavior works with net.Listener/net.Conn directly\n- [ ] Remove custom Listener, Conn, Addr interfaces from deps.go\n- [ ] Remove netListenerAdapter from gateway.go\n- [ ] Remove writerAdapter from gateway.go\n- [ ] Update all usages to use net.* types directly\n- [ ] All existing tests pass\n- [ ] Code reviewed by separate agent before merge","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T03:28:19Z","created_by":"seanb4t","updated_at":"2026-01-18T03:38:15Z","closed_at":"2026-01-18T03:38:15Z","dependencies":[{"issue_id":"holomush-e55.79","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.79","depends_on_id":"holomush-e55.72","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.79","depends_on_id":"holomush-e55.73","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.8","title":"Control socket implementation","description":"Unix socket HTTP server for lifecycle management. Endpoints: /health, /ready, /shutdown. CLI commands (stop, status) connect to control socket.","status":"tombstone","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T20:31:12Z","created_by":"seanb4t","updated_at":"2026-01-17T20:44:22Z","work_type":"mutex"}
{"id":"holomush-e55.80","title":"Remove unused handleTelnetConnectionPlaceholder function","description":"## Problem\n`handleTelnetConnectionPlaceholder` in gateway.go (lines 316-320) is never called. Only `handleTelnetConnectionPlaceholderWithConn` is used.\n\n## Files\n- cmd/holomush/gateway.go\n\n## Acceptance Criteria\n- [ ] Verify function is truly unused (grep for all references)\n- [ ] Remove the unused function\n- [ ] All existing tests pass\n- [ ] Code reviewed by separate agent before merge","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T03:28:19Z","created_by":"seanb4t","updated_at":"2026-01-18T03:38:20Z","closed_at":"2026-01-18T03:38:20Z","dependencies":[{"issue_id":"holomush-e55.80","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.80","depends_on_id":"holomush-e55.72","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.80","depends_on_id":"holomush-e55.73","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.80","depends_on_id":"holomush-e55.79","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.81","title":"Replace custom stringContains with slices.Contains","description":"## Problem\n`grpc_server_test.go` has a custom `stringContains` function that reimplements standard library functionality.\n\n## Files\n- internal/control/grpc_server_test.go (lines 481-488)\n\n## Acceptance Criteria\n- [ ] Verify slices.Contains works identically\n- [ ] Replace custom function with slices.Contains\n- [ ] Remove the custom stringContains function\n- [ ] All existing tests pass\n- [ ] Code reviewed by separate agent before merge","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T03:28:20Z","created_by":"seanb4t","updated_at":"2026-01-18T03:33:06Z","closed_at":"2026-01-18T03:33:06Z","dependencies":[{"issue_id":"holomush-e55.81","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.82","title":"Fix running state initialization in GRPCServer","description":"## Problem\n`NewGRPCServer` sets `running.Store(true)` immediately upon creation (line 50), before `Start()` is called. This creates misleading state where `Status()` RPC reports `Running: true` even if server hasn't started.\n\n## Acceptance Criteria\n1. Write a test that proves the bug exists BEFORE fixing\n2. Move `running.Store(true)` to `Start()` after listener is created\n3. Add test verifying Status() returns false before Start() is called\n4. All existing tests pass\n5. Review by separate agent confirms fix\n\n## Files\n- internal/control/grpc_server.go:50","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T04:10:57Z","created_by":"seanb4t","updated_at":"2026-01-18T04:22:36Z","closed_at":"2026-01-18T04:22:36Z","dependencies":[{"issue_id":"holomush-e55.82","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.83","title":"Fix double-start race condition in GRPCServer","description":"## Problem\n`Start()` checks `s.listener \\!= nil` (lines 59-61) to prevent double-start, but this is not thread-safe. Two concurrent calls could both pass the check.\n\n## Acceptance Criteria\n1. Write a test proving concurrent Start() calls can both succeed (the bug)\n2. Use atomic bool or mutex for double-start check\n3. Follow observability server pattern with CompareAndSwap\n4. All existing tests pass\n5. Review by separate agent confirms fix\n\n## Files\n- internal/control/grpc_server.go:59-61","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T04:10:57Z","created_by":"seanb4t","updated_at":"2026-01-18T04:22:41Z","closed_at":"2026-01-18T04:22:41Z","dependencies":[{"issue_id":"holomush-e55.83","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.83","depends_on_id":"holomush-e55.82","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.84","title":"Fix Stop() race with Start() in GRPCServer","description":"## Problem\n`Stop()` uses CompareAndSwap on running, but `Start()` doesn't coordinate. If Stop() called during Start() (after listener created but before Serve()), listener may leak.\n\n## Acceptance Criteria\n1. Write test proving Stop() during Start() leaves server in bad state\n2. Use mutex to coordinate Start() and Stop()\n3. Ensure running state transitions at safe points\n4. All existing tests pass\n5. Review by separate agent confirms fix\n\n## Files\n- internal/control/grpc_server.go:92-104","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T04:10:57Z","created_by":"seanb4t","updated_at":"2026-01-18T04:22:44Z","closed_at":"2026-01-18T04:22:44Z","dependencies":[{"issue_id":"holomush-e55.84","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.84","depends_on_id":"holomush-e55.82","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.84","depends_on_id":"holomush-e55.83","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.85","title":"Fix observability server Stop() state restoration","description":"## Problem\nWhen Shutdown fails (line 149-151), code restores `running.Store(true)`. But HTTP server may be in inconsistent state. Retry might cause undefined behavior.\n\n## Acceptance Criteria\n1. Write test proving state restoration after failed shutdown is problematic\n2. Remove state restoration or add 'stopping_failed' state\n3. Log error and leave as stopped, don't allow retry\n4. All existing tests pass\n5. Review by separate agent confirms fix\n\n## Files\n- internal/observability/server.go:149-151","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T04:10:57Z","created_by":"seanb4t","updated_at":"2026-01-18T04:23:53Z","closed_at":"2026-01-18T04:23:53Z","dependencies":[{"issue_id":"holomush-e55.85","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.86","title":"Add rate limiting to telnet accept loop","description":"## Problem\nWhen Accept() fails (lines 243-251), error is logged and loop continues. Permanent failures cause tight error loop.\n\n## Acceptance Criteria\n1. Write test proving tight loop on permanent Accept() failure\n2. Add sleep (100ms) after Accept() error to prevent spin\n3. Consider checking for permanent error types\n4. All existing tests pass\n5. Review by separate agent confirms fix\n\n## Files\n- cmd/holomush/gateway.go:243-251","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T04:10:58Z","created_by":"seanb4t","updated_at":"2026-01-18T04:29:17Z","closed_at":"2026-01-18T04:29:17Z","dependencies":[{"issue_id":"holomush-e55.86","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.86","depends_on_id":"holomush-e55.91","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.87","title":"Add signal.Stop() cleanup in core command","description":"## Problem\nSignal channel (lines 250-251) has no corresponding signal.Stop() call during shutdown to clean up registration.\n\n## Acceptance Criteria\n1. Add `defer signal.Stop(sigChan)` after Notify call\n2. Verify test isolation is improved\n3. All existing tests pass\n4. Review by separate agent confirms fix\n\n## Files\n- cmd/holomush/core.go:250-251","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T04:10:58Z","created_by":"seanb4t","updated_at":"2026-01-18T04:14:56Z","closed_at":"2026-01-18T04:14:56Z","dependencies":[{"issue_id":"holomush-e55.87","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.88","title":"Consolidate duplicate TLS loading functions","description":"## Problem\n3 nearly identical TLS loading implementations exist:\n- internal/tls/certs.go:302-360\n- internal/grpc/server.go:431-491\n- internal/control/grpc_server.go:136-199\n\n~60 lines of duplicate code.\n\n## Acceptance Criteria\n1. Keep internal/tls/certs.go LoadServerTLS and LoadClientTLS\n2. Delete internal/grpc/server.go LoadServerTLS and LoadClientTLS\n3. Delete internal/control/grpc_server.go LoadControlServerTLS and LoadControlClientTLS\n4. Update all callers to use tls.LoadServerTLS(certsDir, serverName)\n5. All existing tests pass\n6. Review by separate agent confirms fix\n\n## Files\n- internal/tls/certs.go\n- internal/grpc/server.go:431-491\n- internal/control/grpc_server.go:136-199","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T04:11:29Z","created_by":"seanb4t","updated_at":"2026-01-18T04:35:33Z","closed_at":"2026-01-18T04:35:33Z","dependencies":[{"issue_id":"holomush-e55.88","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.88","depends_on_id":"holomush-e55.82","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.88","depends_on_id":"holomush-e55.83","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.88","depends_on_id":"holomush-e55.84","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.89","title":"Extract CommonDeps from CoreDeps and GatewayDeps","description":"## Problem\nCoreDeps and GatewayDeps share 4 identical factory fields:\n- CertsDirGetter\n- ControlTLSLoader\n- ControlServerFactory\n- ObservabilityServerFactory\n\n## Acceptance Criteria\n1. Create CommonDeps struct with shared fields\n2. Embed CommonDeps in CoreDeps and GatewayDeps\n3. Update all usages\n4. All existing tests pass\n5. Review by separate agent confirms fix\n\n## Files\n- cmd/holomush/deps.go","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T04:11:29Z","created_by":"seanb4t","updated_at":"2026-01-18T04:25:51Z","closed_at":"2026-01-18T04:25:51Z","dependencies":[{"issue_id":"holomush-e55.89","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.9","title":"Phase 1.5 integration tests","description":"Test gateway+core startup, core restart tolerance, mTLS validation, SAN mismatch rejection, command flow, event streaming, control socket lifecycle.","status":"tombstone","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T20:31:13Z","created_by":"seanb4t","updated_at":"2026-01-17T20:44:22Z","work_type":"mutex"}
{"id":"holomush-e55.90","title":"Replace byteWriter with bytes.Buffer in status.go","description":"## Problem\nCustom byteWriter type (lines 246-252) is unnecessary. Standard bytes.Buffer provides same functionality.\n\n## Acceptance Criteria\n1. Replace byteWriter with bytes.Buffer\n2. Delete custom byteWriter type\n3. All existing tests pass\n4. Review by separate agent confirms fix\n\n## Files\n- cmd/holomush/status.go:246-252","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T04:11:30Z","created_by":"seanb4t","updated_at":"2026-01-18T04:18:09Z","closed_at":"2026-01-18T04:18:09Z","dependencies":[{"issue_id":"holomush-e55.90","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.91","title":"Simplify handleTelnetConnection placeholder","description":"## Problem\nTelnet placeholder (lines 300-323) has verbose error handling for a temporary function. Errors are ignored anyway on third write.\n\n## Acceptance Criteria\n1. Remove unnecessary error handling from placeholder\n2. Keep simple defer conn.Close() and fmt.Fprintln calls\n3. All existing tests pass\n4. Review by separate agent confirms fix\n\n## Files\n- cmd/holomush/gateway.go:300-323","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T04:11:30Z","created_by":"seanb4t","updated_at":"2026-01-18T04:21:38Z","closed_at":"2026-01-18T04:21:38Z","dependencies":[{"issue_id":"holomush-e55.91","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.92","title":"Delete or rewrite stale integration test","description":"## Problem\nTestPhase1_5_ControlSocketHealthCheck (test/integration/phase1_5_test.go:485-534) references non-existent socket API:\n- control.NewServer (replaced by control.NewGRPCServer)\n- control.SocketPath (sockets replaced by gRPC)\n- control.HealthResponse\n\nTest will not compile.\n\n## Acceptance Criteria\n1. Either delete the test entirely OR\n2. Rewrite to use new gRPC control interface\n3. Build passes\n4. Review by separate agent confirms fix\n\n## Files\n- test/integration/phase1_5_test.go:485-534","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T04:11:30Z","created_by":"seanb4t","updated_at":"2026-01-18T04:22:36Z","closed_at":"2026-01-18T04:22:36Z","dependencies":[{"issue_id":"holomush-e55.92","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.93","title":"Add header notes to superseded design docs","description":"## Problem\nSeveral design docs reference old socket-based control approach:\n- docs/plans/2026-01-17-phase1.5-infrastructure-design.md\n- docs/plans/2026-01-17-phase1.5-implementation.md\n- docs/plans/2026-01-17-goreleaser-docker-compose-design.md (image: vs build:.)\n\n## Acceptance Criteria\n1. Add header note to infrastructure-design.md stating gRPC replaced sockets\n2. Add header note to implementation.md stating gRPC replaced sockets\n3. Update goreleaser docs to mention build:. is for local dev, image: for production\n4. Review by separate agent confirms fix\n\n## Files\n- docs/plans/2026-01-17-phase1.5-infrastructure-design.md\n- docs/plans/2026-01-17-phase1.5-implementation.md\n- docs/plans/2026-01-17-goreleaser-docker-compose-design.md\n- docs/plans/2026-01-17-goreleaser-docker-compose-plan.md","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T04:11:30Z","created_by":"seanb4t","updated_at":"2026-01-18T04:16:22Z","closed_at":"2026-01-18T04:16:22Z","dependencies":[{"issue_id":"holomush-e55.93","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.94","title":"Add signal handling tests for core and gateway","description":"## Problem\ncore.go and gateway.go handle OS signals (SIGINT, SIGTERM) for graceful shutdown, but there are no tests verifying this behavior.\n\n## Acceptance Criteria\n1. Add TestCoreCommand_SignalHandling\n2. Add TestGatewayCommand_SignalHandling\n3. Tests simulate signal delivery and verify graceful shutdown\n4. All tests pass\n5. Review by separate agent confirms fix\n\n## Files\n- cmd/holomush/core_test.go\n- cmd/holomush/gateway_test.go","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T04:11:49Z","created_by":"seanb4t","updated_at":"2026-01-18T04:36:58Z","closed_at":"2026-01-18T04:36:58Z","dependencies":[{"issue_id":"holomush-e55.94","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.94","depends_on_id":"holomush-e55.87","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.95","title":"Add concurrent shutdown race test for GRPCServer","description":"## Problem\nTestGRPCServer_ConcurrentStatusRequests tests concurrent reads, but there is no test for concurrent shutdown attempts. Stop() uses CompareAndSwap but this is not exercised under concurrent conditions.\n\n## Acceptance Criteria\n1. Add TestGRPCServer_ConcurrentShutdown\n2. Launch 10+ goroutines calling Stop() concurrently\n3. Verify server stops exactly once without panic\n4. All tests pass\n5. Review by separate agent confirms fix\n\n## Files\n- internal/control/grpc_server_test.go","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T04:11:49Z","created_by":"seanb4t","updated_at":"2026-01-18T04:35:39Z","closed_at":"2026-01-18T04:35:39Z","dependencies":[{"issue_id":"holomush-e55.95","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.95","depends_on_id":"holomush-e55.82","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.95","depends_on_id":"holomush-e55.83","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.95","depends_on_id":"holomush-e55.84","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.96","title":"Add context timeout test for shutdown","description":"## Problem\nTests verify normal stop behavior but don't test what happens when Stop() is called with cancelled context or very short timeout.\n\n## Acceptance Criteria\n1. Add TestServer_StopWithCancelledContext to observability_test.go\n2. Test both already-cancelled and short-timeout contexts\n3. Verify graceful error handling\n4. All tests pass\n5. Review by separate agent confirms fix\n\n## Files\n- internal/observability/server_test.go","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T04:11:50Z","created_by":"seanb4t","updated_at":"2026-01-18T04:36:24Z","closed_at":"2026-01-18T04:36:24Z","dependencies":[{"issue_id":"holomush-e55.96","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-e55.96","depends_on_id":"holomush-e55.85","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-e55.97","title":"Add server error propagation integration test","description":"## Problem\nmonitorServerErrors is tested for basic scenarios, but there's no test verifying that control server error channel error triggers main process shutdown through full integration path.\n\n## Acceptance Criteria\n1. Add integration test running full runCoreWithDeps\n2. Use mock that sends error after startup\n3. Verify function returns properly\n4. All tests pass\n5. Review by separate agent confirms fix\n\n## Files\n- cmd/holomush/deps_test.go","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T04:11:50Z","created_by":"seanb4t","updated_at":"2026-01-18T04:22:30Z","closed_at":"2026-01-18T04:22:30Z","dependencies":[{"issue_id":"holomush-e55.97","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-efyej","title":"Add alias caching layer","description":"## Context\n\nArchitecture review identified that alias resolution performs separate database queries per lookup:\n1. Check registry (in-memory) \n2. Query player_aliases WHERE player_id=? AND alias=? (DB round trip)\n3. Query system_aliases WHERE alias=? (DB round trip if step 2 fails)\n\nFor chatty players (100+ commands/session), this creates significant DB load.\n\n## Solution\n\nAdd session-scoped alias caching with AliasCache type. System aliases loaded at startup, player aliases loaded per session. Invalidate on alias changes.\n\n## Acceptance Criteria\n\n- [ ] AliasCache type implemented in internal/command\n- [ ] System aliases loaded into cache at server startup\n- [ ] Player aliases loaded into cache when session established\n- [ ] Cache invalidated when alias created/updated/deleted\n- [ ] AliasStore interface includes cache methods\n- [ ] Unit tests verify cache hit/miss behavior\n- [ ] Benchmark shows \u003c1μs alias resolution from cache","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T17:28:14Z","created_by":"seanb4t","updated_at":"2026-02-02T17:34:13Z","closed_at":"2026-02-02T17:34:13Z","dependencies":[{"issue_id":"holomush-efyej","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-eicb","title":"[E4-Post] Add operation context to Examine method errors","description":"**Source:** PR review - error handling audit\n\n**Problem:**\nThe `ExamineLocation`, `ExamineObject`, and `ExamineCharacter` methods in `internal/world/service.go:665, 717, 766` return the result of `EmitExamineEvent` directly without adding operation context:\n\n```go\nreturn EmitExamineEvent(ctx, s.eventEmitter, payload)\n```\n\nUnlike `MoveObject` and `MoveCharacter`, which wrap event emission errors with operation context, the examine methods provide no indication of which examine operation failed.\n\n**Impact:**\n- When event emission fails, logs/errors won't indicate whether it was ExamineLocation, ExamineObject, or ExamineCharacter\n- Debugging requires inspecting payload content rather than error context\n\n**Acceptance Criteria:**\n- [ ] ExamineLocation wraps error with `operation=examine_location`\n- [ ] ExamineObject wraps error with `operation=examine_object`\n- [ ] ExamineCharacter wraps error with `operation=examine_character`\n- [ ] Error includes character_id and target_id context\n- [ ] Tests verify error context is present","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T21:44:14Z","created_by":"seanb4t","updated_at":"2026-01-25T22:18:45Z","closed_at":"2026-01-25T22:18:45Z","work_type":"mutex"}
{"id":"holomush-enps","title":"Enforce AccessRequest constructor with unexported fields","description":"Review finding I11: AccessRequest has exported fields allowing bypass of NewAccessRequest validation. Consider unexporting fields or adding lint rule for production code. From PR #88 9-agent review.","status":"open","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-16T03:21:03Z","created_by":"seanb4t","updated_at":"2026-02-16T03:23:42Z","external_ref":"https://github.com/holomush/holomush/pull/88","labels":["deferred-work","review-finding"],"dependencies":[{"issue_id":"holomush-enps","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-15T22:23:42Z","created_by":"seanb4t","metadata":"{}"}]}
{"id":"holomush-er7","title":"Add unit tests for Migrator.Close() error paths","description":"## Problem\nThe \\`Migrator.Close()\\` method has two error paths that are not tested.\n\n## Source\nPR Review: pr-test-analyzer agent\n\n## Location\n`internal/store/migrate.go:86-95`\n\n## Current Code\n```go\nfunc (m *Migrator) Close() error {\n    srcErr, dbErr := m.m.Close()\n    if srcErr \\!= nil {\n        return oops.Code(\"MIGRATION_CLOSE_FAILED\").With(\"component\", \"source\").Wrap(srcErr)\n    }\n    if dbErr \\!= nil {\n        return oops.Code(\"MIGRATION_CLOSE_FAILED\").With(\"component\", \"database\").Wrap(dbErr)\n    }\n    return nil\n}\n```\n\n## Error Paths\n1. Source close fails (srcErr \\!= nil)\n2. Database close fails (dbErr \\!= nil)\n\n## Challenge\nTesting requires mocking the underlying golang-migrate instance, which is not easily mockable. Options:\n1. Accept integration test coverage only\n2. Create interface wrapper for testing\n3. Test via integration with error injection\n\n## Acceptance Criteria\n- [ ] Document testing strategy chosen\n- [ ] Add tests if feasible OR document why integration tests suffice\n- [ ] Verify error codes are correct in existing tests\n- [ ] Tests pass: `task test`","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T13:52:18Z","created_by":"seanb4t","updated_at":"2026-01-25T14:25:05Z","closed_at":"2026-01-25T14:25:05Z","work_type":"mutex"}
{"id":"holomush-esg9","title":"Update spec: Decision.effect is private (deviation from design)","description":"Review finding I19: Spec shows Effect as public field; implementation makes it private. Intentional improvement but docs/specs/2026-02-05-full-abac-design.md should be updated to match. From PR #88 9-agent review.","status":"open","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-16T03:21:10Z","created_by":"seanb4t","updated_at":"2026-02-16T03:23:45Z","external_ref":"https://github.com/holomush/holomush/pull/88","labels":["deferred-work","review-finding"],"dependencies":[{"issue_id":"holomush-esg9","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-15T22:23:44Z","created_by":"seanb4t","metadata":"{}"}]}
{"id":"holomush-etnm","title":"Add warning for silent version parsing failures in allMigrationVersions()","description":"File: internal/store/migrate.go:142-144\n\nMalformed migration filenames are silently skipped. Operators won't know if a migration file is being ignored due to a naming error (e.g., 0000O1_foo.up.sql with letter O instead of zero).\n\n## Problem\nMalformed migration filenames are silently skipped in allMigrationVersions().\n\n## Impact\n- Incorrectly named migrations are silently ignored\n- Users see inconsistent migration counts\n- Debugging \"missing\" migrations is difficult\n\n## Acceptance Criteria\n- [ ] Log warning when .up.sql file fails to parse version number\n- [ ] Warning should include filename and expected format\n- [ ] Add test case for malformed filename logging\n- [ ] Use slog.Warn for consistency with codebase\n\n## Suggested Fix\nReplace silent continue with warning log including filename and expected format.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T18:09:08Z","created_by":"seanb4t","updated_at":"2026-01-25T18:32:11Z","closed_at":"2026-01-25T18:32:11Z","work_type":"mutex"}
{"id":"holomush-eu80","title":"E5.7.9 Expand security rationale in code comments","description":"Security-critical code documents WHAT but not WHY. Expand comments for: dummyPasswordHash parameter matching, VerifySessionToken constant-time rationale, lockout check ordering, Argon2 OWASP citation.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T02:41:41Z","created_by":"seanb4t","updated_at":"2026-02-02T02:54:48Z","closed_at":"2026-02-02T02:54:48Z","dependencies":[{"issue_id":"holomush-eu80","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-ex0b","title":"ABAC Review C6: Add attribute redaction to policy test for builders","description":"Issue: policy test shows all resolved attributes to builders, exposing admin roles and factions. Decision: Redact attributes for entities builder does not own. Audit all policy test usage. AC: (1) Redaction rules documented (2) Audit logging specified (3) Redaction format defined. Ref: docs/specs/2026-02-05-full-abac-design.md:2195-2227.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:09Z","created_by":"seanb4t","updated_at":"2026-02-06T17:19:00Z","closed_at":"2026-02-06T17:19:00Z","dependencies":[{"issue_id":"holomush-ex0b","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-extfl","title":"[E6.0] ADR 0006: Unified Command Registry","description":"Document the decision to use a single unified registry for both Go and Lua commands.\n\n**Acceptance Criteria:**\n- ADR explains context (Go + Lua commands need registration)\n- ADR lists options (separate vs unified registry)\n- ADR documents decision: unified registry\n- ADR explains consequences (same API for Go and Lua, conflict detection)\n\n**Files:** docs/adr/0006-unified-command-registry.md","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T18:07:06Z","created_by":"seanb4t","updated_at":"2026-02-02T18:21:38Z","closed_at":"2026-02-02T18:21:38Z","dependencies":[{"issue_id":"holomush-extfl","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-f3vz","title":"Decisions: Strengthen list size limit rationale in Decision #45","description":"**Review Finding: S8 (Suggestion)**\n\nDecision #45 claims O(100) string comparisons for 'in' checks is 'negligible.' With ULID strings (26 chars), that's ~2600 bytes to scan per check. Not catastrophic but the rationale could be stronger.\n\n**Location:** Decisions doc, Decision #45\n\n**Acceptance Criteria:**\n- Improve rationale: '100 entries balances flexibility (covers 99% of realistic use cases) with performance (avoids multi-millisecond scans)'\n- Note that adversarial lists would require hash set instead of linear scan","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T14:06:02Z","created_by":"seanb4t","updated_at":"2026-02-06T14:34:19Z","closed_at":"2026-02-06T14:34:19Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-f3vz","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-fd9","title":"Add validation to ExtismSubscriber.Subscribe method","description":"## Problem\nextism_subscriber.go:44-49 accepts any plugin name and pattern without validation:\n- Subscribing non-existent plugin only fails at delivery time\n- Empty plugin names or patterns are accepted\n- Malformed patterns are accepted\n\n## Source\nPR Review Round 7 - silent-failure-hunter agent (LOW severity)\n\n## Acceptance Criteria\n- [ ] Test proves issue exists (invalid subscription accepted)\n- [ ] Consider returning error from Subscribe\n- [ ] Validate plugin exists in host\n- [ ] Validate pattern is not empty\n- [ ] Log warning for invalid subscriptions\n- [ ] Independent subagent review before closing","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T18:36:44Z","created_by":"seanb4t","updated_at":"2026-01-18T20:30:20Z","closed_at":"2026-01-18T20:30:20Z","work_type":"mutex"}
{"id":"holomush-fdw4","title":"ABAC Review S9: Make orphan cleanup grace period configurable","description":"Issue: 24h grace period is hardcoded with no operator override. AC: (1) Configurable via server YAML (2) Default 24h documented. Ref: docs/specs/2026-02-05-full-abac-design.md:1665-1679.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:12Z","created_by":"seanb4t","updated_at":"2026-02-06T17:41:21Z","closed_at":"2026-02-06T17:41:21Z","dependencies":[{"issue_id":"holomush-fdw4","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-fkog","title":"Add migration filename to PendingMigrations output","description":"File: internal/store/migrate.go:163-177\n\nCurrently PendingMigrations() returns only version numbers. Returning migration names (e.g., \"000003_world_model\") would make dry-run output more informative.\n\nCurrent Output:\nPending migrations: 3, 4, 5\n\nSuggested Output:\nPending migrations:\n  000003_world_model\n  000004_pg_trgm\n  000005_pg_stat_statements\n\nAcceptance Criteria:\n- Add method to return migration names with versions\n- Update dry-run output to show names\n- Consider backward compatibility for existing API","status":"closed","priority":4,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T18:09:07Z","created_by":"seanb4t","updated_at":"2026-01-25T18:48:16Z","closed_at":"2026-01-25T18:48:16Z","work_type":"mutex"}
{"id":"holomush-fmae","title":"Consider BRIN indexes for audit log partitions","description":"For time-series audit log workload with natural insertion order, BRIN indexes would be 1-2% the size of B-tree indexes. Spec currently uses B-tree on timestamp column.\n\nExample: CREATE INDEX idx_audit_log_timestamp ON access_audit_log USING BRIN (timestamp) WITH (pages_per_range = 128);\n\n**Acceptance Criteria:**\n- [ ] Evaluate BRIN vs B-tree trade-offs for audit log access patterns\n- [ ] Update spec if BRIN is preferred\n\n**Files:** docs/specs/2026-02-05-full-abac-design.md","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T22:37:16Z","created_by":"seanb4t","updated_at":"2026-02-07T00:29:51Z","closed_at":"2026-02-07T00:29:51Z","labels":["review-finding"],"work_type":"mutex"}
{"id":"holomush-fozy","title":"Rate limiter logs engine failures at Warn instead of Error","description":"PR #88 review suggestion S3: internal/access/rate_limit_middleware.go logs engine failures at Warn level, inconsistent with other call sites that use Error. Operators filtering by Error level would miss these.","status":"open","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-16T01:26:49Z","created_by":"seanb4t","updated_at":"2026-02-16T01:43:57Z","external_ref":"https://github.com/holomush/holomush/pull/88#issuecomment-RC_IC_kwDOQ7tZvM7o0CyA","labels":["deferred-work","review-finding"],"dependencies":[{"issue_id":"holomush-fozy","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-15T21:19:55Z","created_by":"seanb4t","metadata":"{}"}]}
{"id":"holomush-fpuvz","title":"[E6.refactor] Call ValidateCommandName in Registry.Register","description":"## Problem\nRegistry.Register validates Name is non-empty and Handler is non-nil, but doesn't call ValidateCommandName for consistent name validation. This means invalid command names can be registered.\n\n**Location:** `internal/command/registry.go:30-36`\n\n## Acceptance Criteria\n- [ ] Add call to ValidateCommandName in Register\n- [ ] Return appropriate error if name validation fails\n- [ ] Add test for invalid command name registration attempt\n- [ ] Update existing tests if they use invalid names","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T03:05:53Z","created_by":"seanb4t","updated_at":"2026-02-04T06:00:48Z","closed_at":"2026-02-04T06:00:48Z","dependencies":[{"issue_id":"holomush-fpuvz","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-fsid","title":"[E4-Post] Add pagination to GetCharactersByLocation","description":"**Source:** PR Review - Type Design Analyzer\n\n**Problem:**\nThe WorldQuerier.GetCharactersByLocation method returns unbounded results. In a room with many characters (e.g., a popular gathering spot), this could return a very large slice causing memory pressure for plugins.\n\n**Acceptance Criteria:**\n- [ ] Add ListOptions struct with Limit and Offset fields\n- [ ] Update WorldQuerier interface with paginated method\n- [ ] Update WorldQuerierAdapter to support pagination\n- [ ] Update CharacterRepository.GetByLocation to support pagination\n- [ ] Add tests for pagination edge cases (empty results, partial pages)\n- [ ] Document default limit if none specified\n\n**Files:**\n- Modify: `internal/plugin/hostfunc/world.go`\n- Modify: `internal/plugin/hostfunc/adapter.go`\n- Modify: `internal/world/repository.go`\n- Modify: `internal/world/postgres/character_repo.go`","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T19:50:28Z","created_by":"seanb4t","updated_at":"2026-01-25T21:25:54Z","closed_at":"2026-01-25T21:25:54Z","work_type":"mutex"}
{"id":"holomush-fvs","title":"Add emit context to emit failure error logs","description":"## Problem\nError log at extism_subscriber.go:132-134 omits emit.Stream, emit.Type making debugging difficult.\n\n## Acceptance Criteria\n- [ ] Add test verifying log fields are present\n- [ ] Add emit_stream, emit_type, emit_payload_len to slog.Error call\n- [ ] Test must pass\n- [ ] Independent code review before closing","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T16:10:00Z","created_by":"seanb4t","updated_at":"2026-01-18T16:40:34Z","closed_at":"2026-01-18T16:40:34Z","dependencies":[{"issue_id":"holomush-fvs","depends_on_id":"holomush-52s","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-fvzx","title":"E5.7.11 Consider TokenHash newtype for type safety","description":"Token hashes and plaintext are both strings, risking accidental comparison. Consider type TokenHash string to prevent hash/plaintext confusion at compile time.","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T02:41:45Z","created_by":"seanb4t","updated_at":"2026-02-02T02:55:58Z","closed_at":"2026-02-02T02:55:58Z","dependencies":[{"issue_id":"holomush-fvzx","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-fwp","title":"Add event index/count to emit failure logs","description":"## Summary\nWhen multiple plugin events fail to emit, operators cannot determine which event failed or how many total events were being emitted.\n\n## Location\n`internal/wasm/extism_subscriber.go:130-140`\n\n## Current\n```go\nslog.Error(\"failed to emit plugin event\",\n    \"plugin\", pluginName,\n    \"emitted_stream\", emit.Stream,\n    \"emitted_type\", emit.Type,\n    \"error\", err)\n```\n\n## Proposed\n```go\nslog.Error(\"failed to emit plugin event\",\n    \"plugin\", pluginName,\n    \"emit_index\", i,\n    \"emit_count\", len(emitted),\n    \"emitted_stream\", emit.Stream,\n    \"emitted_type\", emit.Type,\n    \"error\", err)\n```\n\n## Acceptance Criteria\n- [ ] Add test that verifies emit_index and emit_count appear in error logs\n- [ ] Implement the enhancement\n- [ ] Test passes proving the improvement works\n- [ ] Independent review by subagent confirms enhancement","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T17:13:47Z","created_by":"seanb4t","updated_at":"2026-01-18T17:24:46Z","closed_at":"2026-01-18T17:24:46Z","work_type":"mutex"}
{"id":"holomush-g23i","title":"Consider renaming migrator interfaces for clarity","description":"## Summary\n\nThe codebase has two migrator interfaces that could be confusing:\n\n1. `cmd/holomush/migrate.go:19-29` defines `MigratorIface` with 8 methods (full migration control)\n2. `cmd/holomush/deps.go:108-112` defines `Migrator` with only 2 methods (`Up()`, `Close()`)\n\nThese serve different purposes (CLI vs auto-migration) but the naming does not make this clear.\n\n## Acceptance Criteria\n\n- [ ] Evaluate whether renaming improves clarity\n- [ ] If yes: rename to `FullMigrator` / `AutoMigrator` or similar\n- [ ] If no: add comments explaining the distinction\n- [ ] Update any documentation references\n- [ ] Run `task test` to verify no breakage\n\n## Notes\n\n- Low confidence suggestion (50%) from code-reviewer agent\n- Priority P4 - nice to have, not blocking\n\n## References\n\n- Full interface: `cmd/holomush/migrate.go:19-29`\n- Minimal interface: `cmd/holomush/deps.go:108-112`\n- PR review finding: code-reviewer agent","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T19:14:45Z","created_by":"seanb4t","updated_at":"2026-01-25T19:41:02Z","closed_at":"2026-01-25T19:41:02Z","work_type":"mutex"}
{"id":"holomush-g2tyt","title":"Document Lua state limitations for multi-turn commands","description":"## Context\n\nArchitecture review identified that Lua plugin commands execute with ephemeral state:\n- Each command execution creates fresh Lua VM state\n- State does not persist between command invocations\n- This blocks multi-turn command wizards (e.g., @dig → confirm → execute)\n\nThis is a known limitation per the plugin system design (50μs state creation vs 1.5s WASM), but it needs explicit documentation so implementers don't make blocking architectural choices.\n\n## Required Updates\n\n1. Spec Update: Add to Out of Scope section in commands spec:\n   - Multi-turn command wizards (Lua state is ephemeral per command execution)\n   - Command-scoped state persistence (use KV store host functions instead)\n\n2. Draft ADR: Create docs/adr/XXXX-command-state-management.md exploring future options\n\n3. Implementation Guidance: Document workarounds for v1:\n   - Store state in player metadata via host functions\n   - Use confirmation flags in command args (e.g., @dig --confirm)\n\n## Acceptance Criteria\n\n- [ ] Spec Out of Scope section updated with state limitations\n- [ ] Draft ADR created with status proposed exploring future options\n- [ ] ADR documents trade-offs for each approach\n- [ ] ADR explicitly states no blocking decisions for v1\n- [ ] Implementation guidance added for workarounds","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T17:28:39Z","created_by":"seanb4t","updated_at":"2026-02-02T17:34:13Z","closed_at":"2026-02-02T17:34:13Z","dependencies":[{"issue_id":"holomush-g2tyt","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-g3o2u","title":"[E6.1b] Alias PostgreSQL repository","description":"Implement PostgreSQL repository for alias CRUD operations.\n\n**Acceptance Criteria:**\n- AliasRepository implements interface for system and player aliases\n- GetSystemAliases, SetSystemAlias, DeleteSystemAlias\n- GetPlayerAliases, SetPlayerAlias, DeletePlayerAlias\n- Uses pgx for queries\n- Upsert for set operations\n- Integration tests with testcontainers\n\n**Files:** internal/store/alias.go, internal/store/alias_test.go","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T18:07:34Z","created_by":"seanb4t","updated_at":"2026-02-02T19:24:26Z","closed_at":"2026-02-02T19:24:26Z","dependencies":[{"issue_id":"holomush-g3o2u","depends_on_id":"holomush-8qn17","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-g3o2u","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-g5a9","title":"Create docs/adr/README.md as ADR index","description":"With 16 ADRs now, an index file listing all ADRs with their status (Accepted, Superseded) would help contributors navigate. This overlaps with Important #14 (ADR format documentation) but focuses on the index aspect.\n\n**Acceptance Criteria:**\n- [ ] docs/adr/README.md lists all ADRs with number, title, status, and date\n\n**Files:** docs/adr/README.md (new)","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T22:37:48Z","created_by":"seanb4t","updated_at":"2026-02-07T00:28:11Z","closed_at":"2026-02-07T00:28:11Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-g5a9","depends_on_id":"holomush-ly15","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-g7n","title":"Add operation context to oops errors in migrate.go","description":"## Problem\nTwo oops errors in the Migrator are missing operation context per CLAUDE.md guidelines.\n\n## Source\nPR Review: code-reviewer agent\n\n## Locations\n- `internal/store/migrate.go:30` - MIGRATION_SOURCE_FAILED\n- `internal/store/migrate.go:35` - MIGRATION_INIT_FAILED\n\n## Current Code\n```go\nreturn nil, oops.Code(\"MIGRATION_SOURCE_FAILED\").Wrap(err)\n// and\nreturn nil, oops.Code(\"MIGRATION_INIT_FAILED\").Wrap(err)\n```\n\n## Fix\n```go\nreturn nil, oops.Code(\"MIGRATION_SOURCE_FAILED\").With(\"operation\", \"create migration source\").Wrap(err)\n// and\nreturn nil, oops.Code(\"MIGRATION_INIT_FAILED\").With(\"operation\", \"initialize migrator\").Wrap(err)\n```\n\n## CLAUDE.md Reference\n\u003e Wrap existing error with context:\n\u003e return oops.With(\"plugin\", name).With(\"operation\", \"load\").Wrap(err)\n\n## Acceptance Criteria\n- [ ] Add `.With(\"operation\", ...)` to both error returns\n- [ ] Lint passes: `task lint`\n- [ ] Tests pass: `task test`","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T13:52:17Z","created_by":"seanb4t","updated_at":"2026-01-25T13:54:57Z","closed_at":"2026-01-25T13:54:57Z","work_type":"mutex"}
{"id":"holomush-gf0o","title":"Fix seed command integration tests: missing migrations","description":"4 seed command integration tests in test/integration/cli/seed_test.go fail because the test database has no schema — migrations haven't run before the seed command executes.\n\nError: 'ERROR: relation locations does not exist (SQLSTATE 42P01)'\n\nFailing tests:\n- 'is idempotent (running twice succeeds without duplicates)' (line 57)\n- 'sets correct replay policy for persistent location' (line 85)\n- 'warns when existing location attributes differ from expected' (line 103)\n- 'handles concurrent seed commands without creating duplicates' (line 162)\n\nFix: The test suite setup (BeforeSuite or BeforeEach) needs to run migrations against the testcontainer PostgreSQL instance before executing the seed command. Check if there is a shared test helper for running migrations that other integration test suites use.","notes":"label: broken-on-main","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-14T20:57:10Z","created_by":"seanb4t","updated_at":"2026-02-14T21:20:37Z","closed_at":"2026-02-14T21:20:37Z","close_reason":"Fixed in 93431ab on feat/abac-phase-7.6-migration","labels":["broken-on-main"]}
{"id":"holomush-gfa65","title":"Fix wr9.129 spec review issues","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-05T02:45:08Z","created_by":"seanb4t","updated_at":"2026-02-05T02:47:32Z","closed_at":"2026-02-05T02:47:32Z","work_type":"mutex"}
{"id":"holomush-ghm","title":"Add comprehensive Prometheus metrics across system","description":"Extend the existing observability infrastructure to add comprehensive Prometheus metrics across the HoloMUSH system.\n\n## Background\n\nWe have basic metrics infrastructure in `internal/observability/server.go`:\n- `holomush_connections_total` (by type)\n- `holomush_requests_total` (by type, status)\n- Standard Go runtime metrics\n\nHowever, critical operational metrics are missing, particularly around retry behavior and event emission.\n\n## Specific Concerns\n\n### Event Emission Retries (from PR review x2t.75)\nThe `emitWithRetry` function in `internal/world/events.go` uses exponential backoff with up to 3 retries. Currently:\n- Individual retry attempts log at DEBUG level (invisible in production)\n- Only complete failures log at ERROR level\n\n**Metrics needed:**\n- `holomush_event_emission_retries_total` - Counter with labels: stream, event_type, outcome (success/failure)\n- `holomush_event_emission_duration_seconds` - Histogram for emission latency\n\nThe go-retry library (`github.com/sethvargo/go-retry`) doesn't have built-in callback hooks. Metrics must be emitted within the retry function body where we currently increment `attempt`.\n\n### Implementation Approach\n\n1. Add new counters/histograms to `observability.Metrics` struct\n2. Pass `*Metrics` through `world.ServiceConfig` to Service\n3. Pass metrics to `emitWithRetry` and other functions that need instrumentation\n4. Consider package-level metrics registration as alternative (simpler but less testable)\n\n### Other Metrics to Consider\n\n- Plugin execution duration and errors\n- ABAC policy evaluation counts\n- Repository operation latency\n- WebSocket/Telnet connection lifecycle\n- Session counts by state\n\n## Acceptance Criteria\n\n- [ ] Event emission retry counter added\n- [ ] Metrics plumbing through Service layer\n- [ ] Documentation of available metrics\n- [ ] Grafana dashboard template (optional)","status":"open","priority":3,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T13:51:00Z","created_by":"seanb4t","updated_at":"2026-01-25T13:51:00Z","work_type":"mutex"}
{"id":"holomush-gloh","title":"Epic: Character Rostering \u0026 Transfer","description":"Character rostering (releasing to unclaimed pool) and transfer between players.\n\n**Goal:** Enable characters to be released to a roster and claimed by other players.\n\n**Key Features:**\n- Players can release (roster) their own characters\n- Rostered characters have NULL player_id\n- Claiming a rostered character requires admin approval\n- Direct player-to-player transfer (admin-mediated or request/accept flow)\n\n**Design Discussion (from Epic 5):**\n- player_id nullable to support rostered state\n- Self-service roster release in future\n- Admin approval required for claims\n- Possible roster table for metadata (notes, restrictions, available_at)\n\n**Depends on:** Epic 5 (Auth \u0026 Identity) for nullable player_id\n\n**Acceptance Criteria:**\n- [ ] Players can release characters to roster\n- [ ] Admins can approve/deny roster claims\n- [ ] Character ownership transfers cleanly\n- [ ] Audit trail for ownership changes","status":"open","priority":2,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-26T00:24:20Z","created_by":"seanb4t","updated_at":"2026-01-26T00:24:20Z","dependencies":[{"issue_id":"holomush-gloh","depends_on_id":"holomush-dwk","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-gmw","title":"Database Migrations System (PR #43 Review Fixes)","description":"Track fixes identified during PR #43 code review for the golang-migrate database migration system.\n\n## Context\nPR #43 introduces golang-migrate for database schema management. Code review identified 4 important issues and 4 suggestions that should be addressed before merge.\n\n## Important Issues\n1. Documentation claims auto-migration not implemented\n2. Comment incorrectly describes Down() behavior  \n3. Insufficient test coverage (72.6% \u003c 80%)\n4. Close errors silently discarded\n\n## Suggestions\n1. Integration test hardcodes version\n2. Import path typo in design doc\n3. Missing CLI command context in errors\n4. Skipped test provides no value\n\n## Acceptance Criteria\n- [ ] All 4 important issues resolved\n- [ ] Suggestions addressed or documented as deferred\n- [ ] Tests pass with \u003e80% coverage\n- [ ] Lint passes\n- [ ] PR approved and merged","status":"closed","priority":1,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T04:13:16Z","created_by":"seanb4t","updated_at":"2026-01-25T13:43:44Z","closed_at":"2026-01-25T13:43:44Z","dependencies":[{"issue_id":"holomush-gmw","depends_on_id":"holomush-1pj","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-gmw","depends_on_id":"holomush-54r","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-gmw","depends_on_id":"holomush-8h5","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-gmw","depends_on_id":"holomush-958","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-gmw","depends_on_id":"holomush-ado","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-gmw","depends_on_id":"holomush-c2c","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-gmw","depends_on_id":"holomush-n4m","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-gmw","depends_on_id":"holomush-s8d","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-gpd9","title":"E5.7.3 Missing logging in telnet error handlers","description":"handleConnectError, handleCreateError, and HandlePlay failure paths return generic messages without logging unexpected errors. Operators have no visibility into system failures.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T02:41:27Z","created_by":"seanb4t","updated_at":"2026-02-02T02:50:02Z","closed_at":"2026-02-02T02:50:02Z","dependencies":[{"issue_id":"holomush-gpd9","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-gqez","title":"Spec: Define provider_errors JSONB schema","description":"**Review Finding: S3 (Suggestion)**\n\nThe spec describes provider_errors as a JSONB field in audit logs but doesn't define the schema or field names.\n\n**Location:** Main spec, Error Handling (~line 1201)\n\n**Acceptance Criteria:**\n- Spec includes JSONB schema for provider_errors: [{namespace, error, timestamp, duration_us}]\n- Field types documented (namespace: string, error: string, timestamp: RFC3339, duration_us: int)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T14:05:39Z","created_by":"seanb4t","updated_at":"2026-02-06T14:34:19Z","closed_at":"2026-02-06T14:34:19Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-gqez","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-gqez","depends_on_id":"holomush-qt1g","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-gunv","title":"E5.7.10 Fix misleading GetByPlayer comment in reset.go","description":"reset.go:112-115 says tokens are invalidated when new one created, but they're only deleted after successful reset. Comment should match actual behavior.","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T02:41:43Z","created_by":"seanb4t","updated_at":"2026-02-02T02:54:48Z","closed_at":"2026-02-02T02:54:48Z","dependencies":[{"issue_id":"holomush-gunv","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-gx9p","title":"Test bead creation","description":"Testing if bd create works","status":"tombstone","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T01:28:45Z","created_by":"seanb4t","updated_at":"2026-02-02T01:28:49Z","work_type":"mutex"}
{"id":"holomush-gyb5","title":"E5.7.5 Add password reset token reuse prevention test","description":"No test verifying that a reset token cannot be reused after successful password reset. Should verify RESET_TOKEN_INVALID error on second use.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T02:41:31Z","created_by":"seanb4t","updated_at":"2026-02-02T02:52:21Z","closed_at":"2026-02-02T02:52:21Z","dependencies":[{"issue_id":"holomush-gyb5","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-h4r","title":"Wire up 'holomush status' command","description":"**Current state:** `holomush status` prints 'not implemented yet'\n\n**Required:**\n- Connect to control sockets for gateway and core\n- Query /health endpoints\n- Display process status (running/stopped, uptime, connections)\n\n**Depends on:** core and gateway commands being implemented","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T22:23:32Z","created_by":"seanb4t","updated_at":"2026-01-17T22:45:45Z","closed_at":"2026-01-17T22:45:45Z","dependencies":[{"issue_id":"holomush-h4r","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-h4r","depends_on_id":"holomush-m96","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-h4r","depends_on_id":"holomush-w4n","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-h4t","title":"Create operators documentation","description":"## Summary\nCreate documentation for game operators covering installation, configuration, and operations.\n\n## Files\n- Create: site/docs/operators/installation.md\n- Create: site/docs/operators/configuration.md\n- Create: site/docs/operators/operations.md\n- Reference: docs/reference/operations.md, docs/reference/getting-started.md\n\n## Steps\n1. Create site/docs/operators/installation.md - Docker and binary installation\n2. Create site/docs/operators/configuration.md - CLI flags and env vars reference\n3. Create site/docs/operators/operations.md - adapted from existing, PostgreSQL monitoring\n4. Run: cd site \u0026\u0026 uv run zensical build - verify build succeeds\n5. Commit: docs(operators): add installation, configuration, and operations guides\n\n## Acceptance Criteria\n- [ ] Installation guide covers Docker deployment\n- [ ] Installation guide covers binary installation\n- [ ] Configuration reference documents all CLI flags\n- [ ] Configuration reference documents environment variables\n- [ ] Operations guide includes PostgreSQL monitoring queries\n- [ ] zensical build succeeds\n\n## Reference\nSee docs/plans/2026-01-23-zensical-docs-design.md","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T14:05:26Z","created_by":"seanb4t","updated_at":"2026-01-24T16:55:38Z","closed_at":"2026-01-24T16:55:38Z","dependencies":[{"issue_id":"holomush-h4t","depends_on_id":"holomush-3h6","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-h6xba","title":"[E6.test] Add formatIdleTime edge case tests","description":"## Problem\nThe formatIdleTime function handles various duration ranges but tests only cover basic cases. Missing edge cases could cause formatting bugs at boundaries.\n\n**Location:** `internal/command/handlers/who.go:113-132`\n\n## Acceptance Criteria\nAdd test cases for:\n- [ ] Exactly 1 hour (boundary between Xm and XhYm format)\n- [ ] Large durations (24+ hours)\n- [ ] Rounding behavior near boundaries (e.g., 59.9 seconds)\n- [ ] Just under 1 second (999ms)\n\nExample test cases to add:\n```go\n{\"exactly 1 hour\", time.Hour, \"1h0m\"},\n{\"24 hours\", 24 * time.Hour, \"24h0m\"},\n{\"just under 1 second\", 999*time.Millisecond, \"0s\"},\n```","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T03:05:42Z","created_by":"seanb4t","updated_at":"2026-02-04T06:00:48Z","closed_at":"2026-02-04T06:00:48Z","dependencies":[{"issue_id":"holomush-h6xba","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-h76xh","title":"[E6.1] Extend plugin manifest for commands","description":"Add CommandSpec to plugin manifest schema for declaring commands.\n\n**Acceptance Criteria:**\n- CommandSpec struct with Name, Capabilities, Help, Usage, HelpText, HelpFile\n- Manifest.Commands []CommandSpec field\n- Validation rejects both helpText AND helpFile together\n- Tests verify manifest parsing with commands\n\n**Files:** internal/plugin/manifest.go (modify), internal/plugin/manifest_test.go (modify)\n**Blocks:** holomush-wr9.3, holomush-wr9.6","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T18:08:33Z","created_by":"seanb4t","updated_at":"2026-02-02T20:06:39Z","closed_at":"2026-02-02T20:06:39Z","dependencies":[{"issue_id":"holomush-h76xh","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-hicm","title":"ABAC Review I5: Define grammar version migration failure behavior","description":"Issue: If policy cannot be recompiled during grammar migration, behavior undefined. Decision: Failed recompilation keeps policy at old grammar version, NOT disabled. AC: (1) Migration behavior specified (2) policy list --old-grammar flag documented (3) Admin fix workflow. Ref: docs/specs/2026-02-05-full-abac-design.md:852-873.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:10Z","created_by":"seanb4t","updated_at":"2026-02-06T17:33:09Z","closed_at":"2026-02-06T17:33:09Z","dependencies":[{"issue_id":"holomush-hicm","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-hicm","depends_on_id":"holomush-c0hh","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-hju","title":"Docker Compose local development environment","description":"Create docker-compose.yaml for local development.\n\n**Files to create:**\n- `docker-compose.yaml` - PostgreSQL + core + gateway services\n\n**Acceptance Criteria:**\n- [ ] `docker compose config` parses without errors\n- [ ] Services have proper health checks and dependency ordering\n- [ ] Shared volume for TLS cert sharing between core/gateway\n- [ ] Code reviewed and approved by independent agent\n\n**Reference:** docs/plans/2026-01-17-goreleaser-docker-compose-plan.md (Task 2)","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T01:29:52Z","created_by":"seanb4t","updated_at":"2026-01-18T01:50:29Z","closed_at":"2026-01-18T01:50:29Z","dependencies":[{"issue_id":"holomush-hju","depends_on_id":"holomush-6me","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-hju","depends_on_id":"holomush-rsl","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-hpqx","title":"AccessRequest exported fields allow bypassing constructor","description":"PR #88 review suggestion S8: types.AccessRequest struct literals skip NewAccessRequest validation. Pragmatic for tests but relies on convention. Consider unexported fields with functional options.","status":"open","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-16T01:26:57Z","created_by":"seanb4t","updated_at":"2026-02-16T01:44:02Z","external_ref":"https://github.com/holomush/holomush/pull/88#issuecomment-RC_IC_kwDOQ7tZvM7o0CyA","labels":["deferred-work","review-finding"],"dependencies":[{"issue_id":"holomush-hpqx","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-15T21:19:56Z","created_by":"seanb4t","metadata":"{}"}]}
{"id":"holomush-hri","title":"Log individual plugin close failures","description":"## Problem\nextism_host.go:89-93 aggregates close errors but doesn't log which plugin failed.\n\n## Acceptance Criteria\n- [ ] Add slog.Warn logging for individual plugin close failures\n- [ ] Include plugin name in error aggregation\n- [ ] Verify tests still pass\n- [ ] Independent code review before closing","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T16:10:30Z","created_by":"seanb4t","updated_at":"2026-01-18T16:49:28Z","closed_at":"2026-01-18T16:49:28Z","work_type":"mutex"}
{"id":"holomush-hu36m","title":"[E6.6] Help plugin","description":"Implement help command as Lua plugin querying registry.\n\n**Acceptance Criteria:**\n- help lists available commands (filtered by capabilities)\n- help \u003ccommand\u003e shows detailed help\n- help search \u003cterm\u003e searches help text\n- Uses ListCommands and GetCommandHelp host functions\n- Formats output nicely for telnet\n\n**Files:** plugins/help/plugin.yaml, plugins/help/main.lua\n**Blocks:** holomush-wr9.9","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T18:08:47Z","created_by":"seanb4t","updated_at":"2026-02-03T16:29:48Z","closed_at":"2026-02-03T16:29:48Z","dependencies":[{"issue_id":"holomush-hu36m","depends_on_id":"holomush-vgv1q","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-hu36m","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-i0wa","title":"[E4-Post] Add integration test for character movement event emission","description":"**Source:** PR Review - Test Analyzer (Criticality 6/10)\n\n**Problem:**\nUnit tests verify MoveCharacter calls the EventEmitter mock, but no integration test verifies events actually reach the event store end-to-end. This could miss integration issues between the world service and event store that mocks cannot detect.\n\n**Acceptance Criteria:**\n- [ ] Integration test in `test/integration/world/` verifies MoveCharacter emits event to event stream\n- [ ] Test verifies event payload contains correct entity type, IDs, and location data\n- [ ] Test uses real EventStore implementation (not mock)\n- [ ] Test covers both first-time placement and subsequent moves\n\n**Files:**\n- Create: `test/integration/world/character_events_test.go`","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T19:50:27Z","created_by":"seanb4t","updated_at":"2026-01-25T20:02:10Z","closed_at":"2026-01-25T20:02:10Z","work_type":"mutex"}
{"id":"holomush-i15do","title":"[E6.3] Communication plugin (say, pose, emit)","description":"Implement communication commands as Lua plugin to prove plugin model.\n\n**Acceptance Criteria:**\n- plugin.yaml declares say, pose, emit commands with capabilities\n- say formats \"You say, ...\" / \"X says, ...\"\n- pose prepends player name\n- emit for privileged users only\n- Emits communication events\n\n**Files:** plugins/communication/plugin.yaml, plugins/communication/main.lua\n**Blocks:** holomush-wr9.6","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T18:08:45Z","created_by":"seanb4t","updated_at":"2026-02-02T21:04:02Z","closed_at":"2026-02-02T21:04:02Z","dependencies":[{"issue_id":"holomush-i15do","depends_on_id":"holomush-h76xh","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-i15do","depends_on_id":"holomush-rgihb","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-i15do","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-i58a","title":"Add comprehensive access request construction test for all 25 call sites","description":"Review finding I18: Individual operations tested but no comprehensive test verifies correct AccessRequest construction across all world service operations. From PR #88 9-agent review.","status":"open","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-16T03:21:07Z","created_by":"seanb4t","updated_at":"2026-02-16T03:23:44Z","external_ref":"https://github.com/holomush/holomush/pull/88","labels":["deferred-work","review-finding"],"dependencies":[{"issue_id":"holomush-i58a","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-15T22:23:43Z","created_by":"seanb4t","metadata":"{}"}]}
{"id":"holomush-i679","title":"Remove docs/specs/CLAUDE.md placeholder from PR","description":"The file docs/specs/CLAUDE.md contains only a claude-mem-context placeholder tag — internal Claude Code state, not project documentation. Must be removed from the PR branch before merge.\n\n**Acceptance Criteria:**\n- [ ] docs/specs/CLAUDE.md is removed from the feat/epic7-abac-design branch\n- [ ] No other files reference this file\n\n**Files:** docs/specs/CLAUDE.md","status":"closed","priority":0,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T22:35:53Z","created_by":"seanb4t","updated_at":"2026-02-06T22:53:34Z","closed_at":"2026-02-06T22:53:34Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-i679","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-imzn","title":"[C4] Fix recursive CTE depth limit: 10 to 20","description":"PR #65 review finding (Documentation). Main spec line 1207 says depth limit 10 iterations, but decisions doc line 1056 uses depth \u003c 20 and performance table line 1506 says 20-level containment CTE. Acceptance Criteria: (1) All references to CTE depth limit say 20 consistently (2) Main spec prose, decisions doc, and performance table aligned. Dependencies: performance section overlaps with C1.","status":"closed","priority":0,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T20:21:58Z","created_by":"seanb4t","updated_at":"2026-02-06T20:42:16Z","closed_at":"2026-02-06T20:42:16Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-imzn","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-ip0i","title":"ABAC Review S8: Add Go types to lock token discovery output","description":"Issue: Lock token listing lacks Go types, making it harder for plugin authors. AC: (1) Token format includes Go type (float64, string). Ref: docs/specs/2026-02-05-full-abac-design.md:2066-2089.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:12Z","created_by":"seanb4t","updated_at":"2026-02-06T17:41:21Z","closed_at":"2026-02-06T17:41:21Z","dependencies":[{"issue_id":"holomush-ip0i","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-ipz","title":"Remove internal/core dependency from postgres layer","description":"CRITICAL: exit_repo.go imports internal/core for ULID generation. Violates Clean Architecture dependency rule. Move ID generation to service layer or require caller to provide IDs.","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T00:26:10Z","created_by":"seanb4t","updated_at":"2026-01-24T00:39:27Z","closed_at":"2026-01-24T00:39:27Z","dependencies":[{"issue_id":"holomush-ipz","depends_on_id":"holomush-72r","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-itp","title":"Add info logging for successful plugin loads","description":"## Problem\nextism_host.go:64 doesn't log successful plugin loads - reduces operational visibility.\n\n## Acceptance Criteria\n- [ ] Add slog.Info logging after successful plugin load\n- [ ] Include plugin name and wasm_size\n- [ ] Verify tests still pass\n- [ ] Independent code review before closing","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T16:10:30Z","created_by":"seanb4t","updated_at":"2026-01-18T16:51:34Z","closed_at":"2026-01-18T16:51:34Z","dependencies":[{"issue_id":"holomush-itp","depends_on_id":"holomush-hri","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-iwix","title":"Fix incorrect ADR cross-reference in ADR 0004","description":"## Problem\n\nADR 0004 (Timing-Attack Resistant Authentication) incorrectly references ADR 0003 for rate limiting information.\n\n### Current Text (docs/adr/0004-timing-attack-resistant-auth.md:192)\n```markdown\n- Rate limiting (see ADR 0003) mitigates DoS concerns\n```\n\n### Issue\nADR 0003 is titled 'Player-Character Authentication Model' and discusses the player-character separation design - it does NOT discuss rate limiting at all.\n\nRate limiting is actually implemented in `internal/auth/ratelimit.go` with no dedicated ADR.\n\n## Acceptance Criteria\n- [ ] Update ADR 0004 to remove incorrect ADR 0003 reference\n- [ ] Replace with accurate reference to implementation location:\n      `Rate limiting mitigates DoS concerns (see internal/auth/ratelimit.go)`\n- [ ] Verify no other ADRs have broken cross-references\n- [ ] Documentation passes `task lint`","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T16:02:58Z","created_by":"seanb4t","updated_at":"2026-02-02T16:07:45Z","closed_at":"2026-02-02T16:07:45Z","dependencies":[{"issue_id":"holomush-iwix","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-j159","title":"ADR 0010: Add inline note linking hazard example to defensive patterns","description":"**Review Finding: S11 (Suggestion)**\n\nADR 0010 shows the 'wrong' permit pattern (principal.faction \\!= enemy) but the correct defensive pattern is 60 lines later. Readers may not connect them.\n\n**Location:** ADR 0010 (Cedar-Aligned Fail-Safe Type Semantics), lines 21-31\n\n**Acceptance Criteria:**\n- After the hazard example, add inline note explaining the control flow with missing faction\n- Note points to Defensive Patterns section below for the correct approach","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T14:06:15Z","created_by":"seanb4t","updated_at":"2026-02-06T14:34:19Z","closed_at":"2026-02-06T14:34:19Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-j159","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-j59","title":"Complete event types table in plugin-authoring.md","description":"## Problem\nDocumentation only shows say/pose event types but code defines more types in core.EventType.\n\n## Acceptance Criteria\n- [ ] Document all event types from core package\n- [ ] Add test that validates documented types match core.EventType constants\n- [ ] Independent code review before closing","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T15:36:21Z","created_by":"seanb4t","updated_at":"2026-01-18T15:58:28Z","closed_at":"2026-01-18T15:58:28Z","dependencies":[{"issue_id":"holomush-j59","depends_on_id":"holomush-6r0","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-j6qe5","title":"[E6.1b] Alias cache and resolver","description":"Implement in-memory alias cache and resolver with proper precedence.\n\n**Acceptance Criteria:**\n- AliasCache stores system and player aliases in memory\n- Thread-safe with RWMutex\n- AliasResolver follows precedence: command \u003e player alias \u003e system alias\n- MaxExpansionDepth (10) prevents circular aliases\n- Bulk load methods for startup/session establishment\n- ClearPlayer for session termination\n- \u003e90% test coverage\n\n**Files:** internal/command/alias.go, internal/command/alias_test.go","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T18:07:32Z","created_by":"seanb4t","updated_at":"2026-02-02T19:17:55Z","closed_at":"2026-02-02T19:17:55Z","dependencies":[{"issue_id":"holomush-j6qe5","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-j94b","title":"MigrationName() returns empty string for both errors and not-found","description":"## Problem\n`MigrationName()` in `internal/store/migrate.go:206-223` returns empty string for two different scenarios:\n1. Version not found in embedded migrations\n2. `ReadDir` fails on embedded filesystem\n\nCallers cannot distinguish between these states.\n\n## Current Behavior\n```go\nfunc MigrationName(version uint) string {\n    entries, err := migrationsFS.ReadDir(\"migrations\")\n    if err \\!= nil {\n        slog.Warn(\"failed to read embedded migrations directory\", \"error\", err)\n        return \"\"  // Same as version not found\n    }\n    // ... lookup ...\n    return \"\"  // Version not found\n}\n```\n\n## Acceptance Criteria\n- [ ] Document why the current behavior is acceptable (embedded FS is immutable in valid binary)\n- [ ] OR change signature to `(string, error)` if distinguishing is important\n- [ ] Add test case verifying the warning log is emitted on ReadDir failure\n\n## Notes\nThe comment acknowledges this shouldn't happen with a valid binary. This is a code clarity issue, not a functional bug.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T21:20:33Z","created_by":"seanb4t","updated_at":"2026-01-25T21:29:32Z","closed_at":"2026-01-25T21:29:32Z","work_type":"mutex"}
{"id":"holomush-jfim","title":"Spec: Specify async audit writes via buffered channel","description":"**Review Finding: S2 (Suggestion)**\n\nThe spec doesn't specify whether audit log inserts are synchronous or async. Decision: async via buffered channel — Evaluate() enqueues audit entry, background goroutine writes to DB.\n\n**Decision:** Async via buffered channel (decided during PR review).\n\n**Location:** Main spec, audit logging sections\n\n**Acceptance Criteria:**\n- Spec documents async audit write architecture: Evaluate() enqueues to buffered channel\n- Background goroutine batch-writes to PostgreSQL\n- Channel buffer size specified (or 'configurable' with default)\n- Document behavior when channel is full (drop with counter metric vs block)\n- Consistent with I6 (audit is best-effort)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T14:05:36Z","created_by":"seanb4t","updated_at":"2026-02-06T14:20:52Z","closed_at":"2026-02-06T14:20:52Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-jfim","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-jfzf","title":"Clarify PolicyCompiler rejects unregistered action.* attributes at compile time","description":"The spec says action bag only contains 'name' and references to other action.* attributes evaluate to false (fail-safe). But PolicyCompiler MUST reject policies referencing unregistered attributes. These two mechanisms interact — the compile-time rejection prevents the runtime fail-safe from ever being reached for action attributes. The spec should clarify this interaction.\n\n**Acceptance Criteria:**\n- [ ] Explicit statement that PolicyCompiler rejects action.type, action.scope etc.\n- [ ] 'Future attributes' note clarified to mean when they are added to schema registry\n\n**Files:** docs/specs/2026-02-05-full-abac-design.md","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T22:37:35Z","created_by":"seanb4t","updated_at":"2026-02-07T00:22:06Z","closed_at":"2026-02-07T00:22:06Z","labels":["review-finding"],"work_type":"mutex"}
{"id":"holomush-jho46","title":"[E6.1] Command registry implementation","description":"Implement the unified command registry with register, get, and all operations.\n\nAcceptance Criteria:\n- Registry stores commands by name\n- Register() adds commands, logs warning on conflict\n- Get() retrieves command by name\n- All() returns all registered commands\n- Thread-safe with RWMutex\n- \u003e90% test coverage\n\nFiles: internal/command/registry.go, internal/command/registry_test.go\nDepends on: Task 1.1 (types and interfaces)","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T18:07:23Z","created_by":"seanb4t","updated_at":"2026-02-02T18:40:54Z","closed_at":"2026-02-02T18:40:54Z","dependencies":[{"issue_id":"holomush-jho46","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-jho46","depends_on_id":"holomush-y31o8","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-jua6n","title":"[E6.refactor] Add constructors for CommandEntry and CommandExecution","description":"## Problem\nCommandEntry and CommandExecution are data transfer objects with all public fields but no constructors. Zero values are invalid but compile fine.\n\n**Locations:**\n- `internal/command/types.go:75-83` (CommandEntry)\n- `internal/command/types.go:88-102` (CommandExecution)\n\n## Type Design Ratings\n- CommandEntry: Encapsulation 4/10, Overall 5.25/10\n- CommandExecution: Encapsulation 3/10, Overall 5.25/10\n\n## Acceptance Criteria\n- [ ] Add `NewCommandEntry` constructor with validation:\n  - Name non-empty\n  - Handler non-nil\n- [ ] Add `NewCommandExecution` constructor with validation:\n  - CharacterID non-zero\n  - Services non-nil\n  - Output non-nil\n- [ ] Document that Output must be non-nil\n- [ ] Update Registry.Register to use NewCommandEntry (optional)","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T03:06:06Z","created_by":"seanb4t","updated_at":"2026-02-04T06:06:39Z","closed_at":"2026-02-04T06:06:39Z","dependencies":[{"issue_id":"holomush-jua6n","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-jze","title":"Add --dry-run flag to migration commands","status":"closed","priority":3,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T16:40:15Z","created_by":"seanb4t","updated_at":"2026-01-25T17:34:18Z","closed_at":"2026-01-25T17:34:18Z","work_type":"mutex"}
{"id":"holomush-k4yu0","title":"[E6.feat] Add CreateExit to WorldService interface for Go handler parity","description":"## Problem\nThe WorldService interface in types.go is missing CreateExit method. Lua plugins can create exits via host functions (hostfunc/world_write.go:64), but Go command handlers cannot.\n\n**Location:** `internal/command/types.go:24-51`\n\n## Rationale\nGo handlers MUST have at least parity with Lua plugins in capabilities. Building commands being Lua-only is acceptable, but the WorldService interface should expose all world operations for consistency.\n\n## Acceptance Criteria\n- [ ] Add `CreateExit(ctx context.Context, subjectID string, exit *world.Exit) error` to WorldService\n- [ ] world.Service already implements this method - verify interface satisfaction\n- [ ] Add compile-time interface check\n- [ ] Update any documentation referencing WorldService capabilities","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T03:05:10Z","created_by":"seanb4t","updated_at":"2026-02-04T03:16:16Z","closed_at":"2026-02-04T03:16:16Z","dependencies":[{"issue_id":"holomush-k4yu0","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-k5c3","title":"[C5] Remove admin bypass of cache staleness and degraded mode","description":"PR #65 review finding (Architecture + Security). Admin subjects bypass cache staleness threshold (line 1875) and degraded mode checks (lines 1387-1392). Security review: compromised admin operates with zero constraints during degraded mode. Also creates asymmetric window where admins use new policies while non-admins use stale cache. Decision: remove admin bypass entirely. All subjects fail-closed. Admins use policy reload command for manual cache refresh. Acceptance Criteria: (1) Spec removes admin exception from staleness check (2) Spec removes admin exception from degraded mode (3) Spec adds policy reload command for manual refresh (4) Documents that admins need CLI access during outages. Dependencies: related to I8, overlaps with C6.","status":"closed","priority":0,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T20:22:09Z","created_by":"seanb4t","updated_at":"2026-02-06T20:45:07Z","closed_at":"2026-02-06T20:45:07Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-k5c3","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-k5qb","title":"[E7] Metrics query and alerting documentation","description":"Add query examples and alerting documentation for the 4 ABAC metrics (engine failures, policy evaluations, etc.) to internal/observability/. Discovered from PR #88 review finding #17.","status":"open","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-16T00:47:15Z","created_by":"seanb4t","updated_at":"2026-02-16T00:47:15Z"}
{"id":"holomush-k5x7","title":"Add observable metric tests for RecordEngineFailure","description":"Review finding I17: RecordEngineFailure called in 3 places but no test verifies metric increment. Add test in internal/observability/. From PR #88 9-agent review.","status":"open","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-16T03:21:05Z","created_by":"seanb4t","updated_at":"2026-02-16T03:23:43Z","external_ref":"https://github.com/holomush/holomush/pull/88","labels":["deferred-work","review-finding"],"dependencies":[{"issue_id":"holomush-k5x7","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-15T22:23:43Z","created_by":"seanb4t","metadata":"{}"}]}
{"id":"holomush-k6ot","title":"Clarify DI wiring acceptance criteria in Phase 7.6 plan","description":"Review finding I21: Deferred items (holomush-ur6c) lack clarity on what was actually wired vs deferred in docs/plans/2026-02-06-full-abac-phase-7.6.md. From PR #88 9-agent review.","status":"open","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-16T03:21:13Z","created_by":"seanb4t","updated_at":"2026-02-16T03:23:46Z","external_ref":"https://github.com/holomush/holomush/pull/88","labels":["deferred-work","review-finding"],"dependencies":[{"issue_id":"holomush-k6ot","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-15T22:23:45Z","created_by":"seanb4t","metadata":"{}"}]}
{"id":"holomush-kanj","title":"ABAC Review C5: Add ownership check to lock-generated policies","description":"Issue: Lock policies survive ownership transfer, creating backdoor permits. Decision: Lock-generated DSL MUST include resource.owner == principal.id. Ensure level, role, faction are non-writable system attributes. AC: (1) Lock compilation spec updated (2) Non-writable attributes documented (3) Example generated policy shown. Ref: docs/specs/2026-02-05-full-abac-design.md:2091-2100.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:09Z","created_by":"seanb4t","updated_at":"2026-02-06T17:19:00Z","closed_at":"2026-02-06T17:19:00Z","dependencies":[{"issue_id":"holomush-kanj","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-kgfm","title":"Add Force() version validation at API level","description":"## Problem\n\nThe `Migrator.Force(version int)` method accepts negative values at the Go API level, even though -1 represents NilVersion in golang-migrate which would DELETE version tracking.\n\n**File:** `internal/store/migrate.go:120`\n\nThe CLI validates this (`cmd/holomush/migrate.go:405-407`), but callers using the Go API directly can bypass this check.\n\n## Risk\n\nA caller using `migrator.Force(-1)` would erase the migration history from `schema_migrations`.\n\n## Acceptance Criteria\n\n- [ ] Add validation in `Migrator.Force()` to reject negative versions\n- [ ] Return `oops.Code(\"INVALID_VERSION\")` error for negative values\n- [ ] Add unit test for negative version rejection at API level\n- [ ] Update Force() doc comment to clarify non-negative requirement","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T19:00:20Z","created_by":"seanb4t","updated_at":"2026-01-25T19:18:20Z","closed_at":"2026-01-25T19:18:20Z","work_type":"mutex"}
{"id":"holomush-kh41","title":"[C2] Add seed_version column to access_policies DDL","description":"PR #65 review finding (Documentation). Seed policy upgrade mechanism (line 2747) references seed_version integer field but access_policies CREATE TABLE DDL (lines 1716-1731) does not include it. Implementer has no way to store or query seed version. Acceptance Criteria: (1) DDL includes seed_version INTEGER DEFAULT NULL (2) Comment documents NULL for non-seed, integer for seed policies. Dependencies: same DDL section as C3.","status":"closed","priority":0,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T20:21:40Z","created_by":"seanb4t","updated_at":"2026-02-06T20:38:54Z","closed_at":"2026-02-06T20:38:54Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-kh41","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-l4s2","title":"Add concurrent access tests for world.Service.checkAccess","description":"PR #88 review suggested adding tests that verify thread-safe behavior of checkAccess under concurrent load.","notes":"External ref: https://github.com/holomush/holomush/pull/88#issuecomment-3904727321","status":"open","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-15T23:10:34Z","created_by":"seanb4t","updated_at":"2026-02-15T23:19:30Z","labels":["deferred-work","review-finding"],"dependencies":[{"issue_id":"holomush-l4s2","depends_on_id":"holomush-5k1.8","type":"parent-child","created_at":"2026-02-15T18:19:21Z","created_by":"seanb4t","metadata":"{}"}]}
{"id":"holomush-l82","title":"Remove stale blank import in deps.go","description":"## Problem\ninternal/deps.go may have outdated blank import after Extism migration.\n\n## Acceptance Criteria\n- [ ] Review deps.go for stale imports\n- [ ] Remove any unnecessary blank imports\n- [ ] Verify build still succeeds\n- [ ] Independent code review before closing","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T15:36:21Z","created_by":"seanb4t","updated_at":"2026-01-18T15:58:28Z","closed_at":"2026-01-18T15:58:28Z","work_type":"mutex"}
{"id":"holomush-lb8l","title":"Seed policy missing for property owner write access","description":"## Issue\n\nThe seed policy set in the Full ABAC design spec (docs/specs/2026-02-05-full-abac-design.md) defines read-oriented seed policies for properties (seed:property-public-read, seed:property-private-read, seed:property-admin-read) but does not include a seed policy granting property owners write access to their own properties.\n\nWithout a `seed:property-owner-write` policy, the default-deny posture means property owners would be denied writes, breaking the Layer 1 metadata configuration workflow entirely. Commands like `set me/wounds.visibility = private` would fail because no permit policy matches.\n\n## Expected\n\nA seed policy should exist that permits property owners to write and delete their own properties:\n\n```text\n// seed:property-owner-write\npermit(principal is character, action in [\"write\", \"delete\"], resource is property)\nwhen { resource.owner == principal.id };\n```\n\n## Context\n\n- `seed:player-self-access` grants read/write on the character entity itself, but NOT on property resources\n- The spec's property model relies on owners being able to set visibility, visible_to, and excluded_from via Layer 1 commands\n- The lock system (Layer 2) also requires write access verification before creating lock policies\n\n## Acceptance Criteria\n\n- [ ] Seed policy `seed:property-owner-write` is defined in the spec's Seed Policies section\n- [ ] Policy permits `write` and `delete` actions on `resource is property` when `resource.owner == principal.id`\n- [ ] Policy is included in the bootstrap sequence documentation","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T00:09:36Z","created_by":"seanb4t","updated_at":"2026-02-08T23:22:23Z","closed_at":"2026-02-08T23:22:23Z","labels":["review-finding"],"work_type":"mutex"}
{"id":"holomush-lf8h","title":"ABAC Review S13: Add per-character lock policy rate limit","description":"Issue: Characters can create unlimited lock policies on owned resources. AC: (1) max_lock_policies_per_character (default 50) (2) Error message documented. Ref: docs/specs/2026-02-05-full-abac-design.md:2028-2122.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:13Z","created_by":"seanb4t","updated_at":"2026-02-06T17:41:21Z","closed_at":"2026-02-06T17:41:21Z","dependencies":[{"issue_id":"holomush-lf8h","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-lj1","title":"Add test for embedded migration files verification","description":"Add unit test verifying embedded migration files are correctly accessible via migrationsFS. Test should verify migrationsFS.ReadDir(\"migrations\") returns expected migration files and catches build-time changes if embed directive path changes.\n\n## Acceptance Criteria\n- [ ] Unit test added to internal/store/migrate_test.go\n- [ ] Test verifies migrationsFS.ReadDir(\"migrations\") succeeds\n- [ ] Test checks for presence of expected migration files (001_initial_schema.sql, etc.)\n- [ ] Test validates file count matches expected migrations\n- [ ] Test provides early detection if embed directive path changes\n- [ ] Test passes with task test","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T16:40:22Z","created_by":"seanb4t","updated_at":"2026-01-25T17:19:35Z","closed_at":"2026-01-25T17:19:35Z","work_type":"mutex"}
{"id":"holomush-lk1o","title":"Fix incomplete rate limiting documentation in auth docs","description":"## Problem\n\nThe rate limiting documentation in both contributor and operator docs shows incomplete progressive delay information, which could mislead readers about the actual behavior.\n\n### Current Documentation (Inaccurate)\n```markdown\n| Failures | Action                         |\n| -------- | ------------------------------ |\n| 1-3      | Progressive delay (1s, 2s, 4s) |\n```\n\n### Actual Implementation (internal/auth/ratelimit.go:49-55)\n```go\n// Progressive delay: 2^(failures-1) seconds, max 32s before lockout\nresult.Delay = time.Duration(1\u003c\u003c(failures-1)) * time.Second\n```\n\nThis produces: 1=1s, 2=2s, 3=4s, 4=8s, 5=16s, 6=32s\n\nThe documentation implies delays stop at 4s and CAPTCHA kicks in separately, but delays continue exponentially AND CAPTCHA is required for failures 4-6.\n\n## Files to Update\n- site/docs/contributors/authentication.md:103-111\n- site/docs/operators/authentication.md:54-62\n\n## Acceptance Criteria\n- [ ] Update rate limiting table in contributor docs to show full delay range (1s-32s)\n- [ ] Update rate limiting table in operator docs to match\n- [ ] Clarify that delays 4-6 have BOTH delay AND CAPTCHA requirement\n- [ ] Verify tables match ratelimit.go implementation\n- [ ] Documentation passes `task lint`","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T16:02:53Z","created_by":"seanb4t","updated_at":"2026-02-02T16:07:45Z","closed_at":"2026-02-02T16:07:45Z","dependencies":[{"issue_id":"holomush-lk1o","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-lt4k","title":"Auth: Add structured logging for security events","description":"CLAUDE.md requires structured logging with slog. Security events not logged: failed login attempts, account lockouts, session creation/destruction, password resets, hash upgrades. Affected files: auth_service.go, reset_service.go, auth_handler.go.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T01:28:59Z","created_by":"seanb4t","updated_at":"2026-02-02T01:43:51Z","closed_at":"2026-02-02T01:43:51Z","dependencies":[{"issue_id":"holomush-lt4k","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-lvc5","title":"[E4-Post] Add test for examine event when character has no location","description":"**Source:** PR Review - Test Analyzer (Criticality 5/10)\n\n**Problem:**\nThe ExamineLocation, ExamineObject, and ExamineCharacter service methods emit events to LocationStream(charLocID). If a character has LocationID == nil, what happens? MoveCharacter has a test for first-time placement, but Examine operations don't have equivalent coverage.\n\n**Acceptance Criteria:**\n- [ ] Test verifies ExamineLocation behavior when examiner has nil LocationID\n- [ ] Test verifies ExamineObject behavior when examiner has nil LocationID\n- [ ] Test verifies ExamineCharacter behavior when examiner has nil LocationID\n- [ ] Tests document expected behavior (error vs skip vs panic)\n\n**Files:**\n- Modify: `internal/world/service_test.go`","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T19:50:27Z","created_by":"seanb4t","updated_at":"2026-01-25T20:02:51Z","closed_at":"2026-01-25T20:02:51Z","work_type":"mutex"}
{"id":"holomush-lvel","title":"Decisions: Clarify backslash escape handling in Decision #29 (like patterns)","description":"**Review Finding: S6 (Suggestion)**\n\nDecision #29 restricts like patterns to * and ? wildcards but doesn't address backslash escapes. Since the spec says 'no escape mechanism,' the behavior of backslash in patterns should be explicitly specified.\n\n**Location:** Decisions doc, Decision #29\n\n**Acceptance Criteria:**\n- Validate actual behavior of gobwas/glob with backslash escapes during implementation\n- Update #29 to either reject backslash at parse time or document it as literal","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T14:05:50Z","created_by":"seanb4t","updated_at":"2026-02-06T14:34:19Z","closed_at":"2026-02-06T14:34:19Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-lvel","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-ly15","title":"Document ADR format evolution in docs/adr/README.md","description":"New ADRs (0009-0016) use a different section structure than existing ADRs (0001-0008). Old format: Context \u003e Options Considered \u003e Decision \u003e Consequences \u003e References. New format: Context \u003e Decision \u003e Rationale \u003e Consequences \u003e References (with Options embedded in Context).\n\nAlso: ADR 0010 has a unique Testing Requirements section that breaks the pattern of all other ADRs.\n\n**Decision:** This is intentional evolution. Document the new format. Move ADR 0010 Testing Requirements into Consequences or main spec.\n\n**Acceptance Criteria:**\n- [ ] docs/adr/README.md created documenting the ADR format\n- [ ] ADR 0010 Testing Requirements section relocated to Consequences or main spec\n- [ ] Both old and new formats acknowledged as valid\n\n**Files:** docs/adr/README.md (new), docs/adr/0010-cedar-aligned-fail-safe-type-semantics.md","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T22:37:23Z","created_by":"seanb4t","updated_at":"2026-02-06T23:41:29Z","closed_at":"2026-02-06T23:41:29Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-ly15","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-m732p","title":"[E6.test] Add parseWallArgs empty message edge case test","description":"## Problem\nThe parseWallArgs function is missing a test case where urgency is specified with trailing space but no message body (e.g., \"critical \").\n\n**Location:** `internal/command/handlers/wall.go:91-113`\n\n## Acceptance Criteria\n- [ ] Add test case: `{\"urgency with only spaces\", \"warning   \", WallUrgencyWarning, \"\"}`\n- [ ] Document that handler already validates empty message returns ErrInvalidArgs","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T03:05:47Z","created_by":"seanb4t","updated_at":"2026-02-04T06:06:39Z","closed_at":"2026-02-04T06:06:39Z","dependencies":[{"issue_id":"holomush-m732p","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-m96","title":"Wire up 'holomush core' command to start gRPC server","description":"The Phase 1.5 infrastructure was built but the CLI commands were left as stubs.\n\n**Current state:** `holomush core` prints 'not implemented yet'\n\n**Required:** Wire up the existing components:\n- Start gRPC server with TLS (internal/grpc)\n- Start control socket (internal/control)\n- Initialize Engine, SessionManager, Broadcaster (internal/core)\n- Generate/load TLS certificates (internal/tls)\n- Handle graceful shutdown on SIGINT/SIGTERM\n\n**Acceptance criteria:**\n- `holomush core` starts and listens on gRPC port\n- Control socket accepts /health and /stop requests\n- Graceful shutdown works\n- Tests cover the startup/shutdown sequence","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T22:23:21Z","created_by":"seanb4t","updated_at":"2026-01-17T22:36:26Z","closed_at":"2026-01-17T22:36:26Z","dependencies":[{"issue_id":"holomush-m96","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-ma2n","title":"Add role column to characters table","description":"CharacterProvider currently hardcodes role='player'. Need to add a role column to the characters table and update the provider to read from DB. Discovered during T23b seed policy smoke testing — seed policies reference principal.character.role for builder/admin checks.","status":"open","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-13T22:06:47Z","created_by":"seanb4t","updated_at":"2026-02-13T22:06:47Z"}
{"id":"holomush-mbut","title":"[E4-Post] Add test comment clarifying query_object nil containment test","description":"**Source:** PR Review - Test Analyzer (Criticality 5/10)\n\n**Problem:**\nThe TestQueryObject_NilOptionalFields test creates an object with no containment set, bypassing constructor invariants. In production, objects are always created with containment via NewObjectWithID(). The test should clarify this is testing host function nil-handling, not a valid production state.\n\n**Acceptance Criteria:**\n- [ ] Add comment to TestQueryObject_NilOptionalFields explaining test purpose\n- [ ] Comment clarifies this tests defensive handling, not production scenarios\n- [ ] Consider adding separate test using properly constructed object\n\n**Files:**\n- Modify: `internal/plugin/hostfunc/world_test.go`","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T19:50:28Z","created_by":"seanb4t","updated_at":"2026-01-25T21:26:50Z","closed_at":"2026-01-25T21:26:50Z","work_type":"mutex"}
{"id":"holomush-mi6er","title":"[E6.fix] Add logging for non-table plugin returns","description":"## Problem\nWhen a Lua plugin's `on_event` or `on_command` handler returns a non-table value (e.g., string, number, boolean), the return value is silently discarded with no logging.\n\n**Location:** `internal/plugin/lua/host.go:250-252`\n\n```go\ntable, ok := ret.(*lua.LTable)\nif \\!ok {\n    return nil // Non-table return is ignored\n}\n```\n\n## Impact\nPlugin developers have no feedback that their return value was ignored. Events they intended to emit silently disappear, leading to confusing debugging sessions.\n\n## Acceptance Criteria\n- [ ] When a non-nil, non-table value is returned, log a warning with:\n  - Return type received\n  - Plugin name (if available)\n- [ ] LNil returns should NOT log (expected for \"no events\")\n- [ ] Add test verifying the warning is logged","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T03:04:43Z","created_by":"seanb4t","updated_at":"2026-02-04T03:21:15Z","closed_at":"2026-02-04T03:21:15Z","dependencies":[{"issue_id":"holomush-mi6er","depends_on_id":"holomush-0ef9x","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-mi6er","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-mklr","title":"[E4-Post] Add validated setters for Character Name and Description","description":"**Source:** PR review - type design analysis\n\n**Problem:**\nCharacter type in `internal/world/character.go` has encapsulation rated 5/10. While `SetLocationID` provides validated mutation, other mutable fields (Name, Description) remain public and can be modified without re-validation.\n\n**Issue:**\nAfter construction, `c.Name = \"\"` or `c.Description = strings.Repeat(\"x\", 10000)` is valid Go code that violates invariants.\n\nThe Object type's Containment fields demonstrate the better pattern - private fields with validated setters.\n\n**Acceptance Criteria:**\n- [ ] Add `SetName(name string) error` with validation\n- [ ] Add `SetDescription(desc string) error` with validation  \n- [ ] Consider making ID, PlayerID, CreatedAt private with getter-only access (immutable after construction)\n- [ ] Tests verify invalid mutations are rejected\n- [ ] Document that direct field access is for repository hydration only","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T21:44:14Z","created_by":"seanb4t","updated_at":"2026-01-25T22:29:39Z","closed_at":"2026-01-25T22:29:39Z","work_type":"mutex"}
{"id":"holomush-moi","title":"Remove unnecessary double context check in HandleEvent","description":"## Problem\nextism_subscriber.go:66-69 has redundant context check that adds no value - context was already checked at line 54.\n\n## Acceptance Criteria\n- [ ] Remove lines 66-69\n- [ ] Verify all tests still pass\n- [ ] Independent code review before closing","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T16:10:01Z","created_by":"seanb4t","updated_at":"2026-01-18T16:40:34Z","closed_at":"2026-01-18T16:40:34Z","work_type":"mutex"}
{"id":"holomush-mry","title":"Add debug logging for plugin FunctionExists check","description":"## Problem\nextism_host.go:134 returns nil, nil when plugin lacks handle_event export. This could mask configuration issues (e.g., typo in function name like handl_event).\n\n## Source\nPR Review Round 7 - silent-failure-hunter agent (LOW severity)\n\n## Acceptance Criteria\n- [ ] Test proves current behavior makes debugging difficult\n- [ ] Add slog.Debug logging when plugin lacks handle_event\n- [ ] Include plugin name in log message\n- [ ] Document expected behavior\n- [ ] Independent subagent review before closing","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T18:36:44Z","created_by":"seanb4t","updated_at":"2026-01-18T20:30:19Z","closed_at":"2026-01-18T20:30:19Z","work_type":"mutex"}
{"id":"holomush-muzr","title":"Add warning log for MigrationName ReadDir failure","description":"## Problem\n\nThe `MigrationName()` function silently returns empty string when `ReadDir` fails, making debugging difficult if the embedded FS has issues.\n\n**File:** `internal/store/migrate.go:191-206`\n\n## Current Behavior\n\n```go\nfunc MigrationName(version uint) string {\n    entries, err := migrationsFS.ReadDir(\"migrations\")\n    if err \\!= nil {\n        return \"\"  // Silent failure\n    }\n    // ...\n}\n```\n\n## Recommendation\n\nAdd a warning log since embedded FS errors should never happen with a properly built binary:\n\n```go\nif err \\!= nil {\n    slog.Warn(\"failed to read embedded migrations directory\", \"error\", err)\n    return \"\"\n}\n```\n\n## Acceptance Criteria\n\n- [ ] Add `slog.Warn` when ReadDir fails\n- [ ] Include error in log context\n- [ ] Add comment explaining this should never happen with valid binary","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T19:00:21Z","created_by":"seanb4t","updated_at":"2026-01-25T19:36:40Z","closed_at":"2026-01-25T19:36:40Z","work_type":"mutex"}
{"id":"holomush-mvkb","title":"E5.7.4 Add session state machine transition tests","description":"Missing tests for session state transitions (anonymous-\u003eauthenticated-\u003echaracter-selected). Should test SelectCharacter on session with/without existing character.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T02:41:29Z","created_by":"seanb4t","updated_at":"2026-02-02T02:52:21Z","closed_at":"2026-02-02T02:52:21Z","dependencies":[{"issue_id":"holomush-mvkb","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-mzyz","title":"ABAC Review I10: Clarify circuit breaker skip does not consume timeout budget","description":"Issue: Spec unclear on whether skipping circuit-opened provider consumes evaluation time. Decision: Skip is immediate, no I/O, no timeout. Fair-share recalculated excluding circuit-opened providers. AC: (1) Skip behavior documented (2) Recalculation formula shown. Ref: docs/specs/2026-02-05-full-abac-design.md:1241-1248.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:11Z","created_by":"seanb4t","updated_at":"2026-02-06T17:33:09Z","closed_at":"2026-02-06T17:33:09Z","dependencies":[{"issue_id":"holomush-mzyz","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-mzyz","depends_on_id":"holomush-61to","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-n0k5","title":"Document property location resolution transaction consistency limitation","description":"At READ COMMITTED isolation, PropertyProvider's recursive CTE and subject attribute resolution run in separate transactions, creating potential for inconsistent snapshots during movement. A character moving while holding an object could have authorization check see character in new room but object still in old containment hierarchy.\n\n**Decision:** Document as a known limitation. MUSH movement is low-frequency enough that practical impact is negligible. The 100ms timeout and circuit breaker handle the operational concerns, though they treat symptoms not causes.\n\n**Acceptance Criteria:**\n- [ ] Known Limitations section added or updated in main spec\n- [ ] Property location resolution consistency noted as eventual-consistency\n- [ ] Rationale explains why this is acceptable at MUSH scale\n- [ ] No false claims about point-in-time snapshot consistency\n\n**Files:** docs/specs/2026-02-05-full-abac-design.md","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T22:36:23Z","created_by":"seanb4t","updated_at":"2026-02-06T23:02:50Z","closed_at":"2026-02-06T23:02:50Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-n0k5","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-n1o","title":"Review WASM plugin framework - evaluate Extism as alternative","description":"Evaluate Extism (https://extism.org) as a potential replacement/improvement for the current wazero-based WASM plugin framework. Consider: 1) Developer experience and plugin authoring simplicity, 2) Runtime performance, 3) Language support for plugin authors, 4) Memory management and sandboxing, 5) FFI complexity reduction. Goal: Determine if Extism would simplify the plugin architecture while maintaining required functionality.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T03:58:13Z","created_by":"seanb4t","updated_at":"2026-01-18T12:56:24Z","closed_at":"2026-01-18T12:56:24Z","work_type":"mutex"}
{"id":"holomush-n4m","title":"Add tests to reach 80% coverage threshold","description":"## Problem\nPer CLAUDE.md, packages MUST maintain \u003e80% coverage. Current coverage for `internal/store`: 72.6%\n\n## Source\nPR Review: code-reviewer, pr-test-analyzer agents\n\n## Missing Tests\n1. **CLI `getDatabaseURL()`** - missing env var handling\n2. **`Force()` method** - integration test for dirty state recovery\n3. **`Down()` method** - integration test for full rollback\n4. **Error codes** - verification with `errutil.AssertErrorCode`\n\n## Files\n- `internal/store/migrate_test.go` - unit tests\n- `internal/store/migrate_integration_test.go` - integration tests\n- `cmd/holomush/migrate.go` - CLI (untested)\n\n## Acceptance Criteria\n- [ ] Add test for `getDatabaseURL()` missing env var\n- [ ] Add integration test for `Force()` method\n- [ ] Add integration test for `Down()` method\n- [ ] Add error code verification tests using `errutil.AssertErrorCode`\n- [ ] Coverage \u003e= 80%: `task test:coverage`\n- [ ] All tests pass: `task test`","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T04:13:50Z","created_by":"seanb4t","updated_at":"2026-01-25T13:37:38Z","closed_at":"2026-01-25T13:37:38Z","work_type":"mutex"}
{"id":"holomush-n93q","title":"Auth: Use mockery-generated mocks for tests","description":"Test files contain hand-written mock implementations (mockPlayerRepository, mockWebSessionRepository). CLAUDE.md recommends using mockery-generated mocks. Add interfaces to .mockery.yaml for consistency.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T01:29:16Z","created_by":"seanb4t","updated_at":"2026-02-02T02:19:47Z","closed_at":"2026-02-02T02:19:47Z","dependencies":[{"issue_id":"holomush-n93q","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-ndk7","title":"E5.7.8 Remove obvious comments that restate code","description":"Several comments violate CLAUDE.md 'MUST NOT add obvious comments' - e.g. 'Look up player by username' before GetByUsername(). Locations: auth_service.go:78,158,166 and reset_service.go:81,93,109,157,163,171.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T02:41:39Z","created_by":"seanb4t","updated_at":"2026-02-02T02:54:48Z","closed_at":"2026-02-02T02:54:48Z","dependencies":[{"issue_id":"holomush-ndk7","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-npmk","title":"Document MUST NOT for cross-goroutine re-entrance in provider contract","description":"The context-based re-entrance sentinel only prevents synchronous re-entrance on the same goroutine. A buggy plugin spawning a goroutine that calls Evaluate() bypasses the guard entirely.\n\n**Decision:** Add explicit MUST NOT prohibition in the provider contract. Detection remains convention-based (no runtime goroutine ID tracking).\n\n**Acceptance Criteria:**\n- [ ] Provider contract section includes explicit MUST NOT spawn goroutines that call Evaluate()\n- [ ] Re-entrance guard section acknowledges the goroutine limitation\n- [ ] Integration test requirement noted for goroutine-based re-entry scenario\n\n**Files:** docs/specs/2026-02-05-full-abac-design.md","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T22:36:45Z","created_by":"seanb4t","updated_at":"2026-02-06T23:27:43Z","closed_at":"2026-02-06T23:27:43Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-npmk","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-nqw","title":"Replace time.Sleep with proper synchronization in tests","description":"## Problem\nMultiple tests in extism_subscriber_test.go use time.Sleep for synchronization:\n- Lines 82, 118, 152, 194, 332, 428, 598, 645\n\nThis makes tests slow and flaky. The tests collectively add ~30+ seconds of sleep time.\n\n## Source\nPR Review Round 7 - code-reviewer agent (Confidence: 81)\n\n## Acceptance Criteria\n- [ ] Identify all time.Sleep uses in test file\n- [ ] Replace with channel-based synchronization\n- [ ] Test total execution time reduced by at least 50%\n- [ ] Tests remain deterministic (no flakiness)\n- [ ] Independent subagent review before closing","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T18:36:23Z","created_by":"seanb4t","updated_at":"2026-01-18T19:30:34Z","closed_at":"2026-01-18T19:30:34Z","work_type":"mutex"}
{"id":"holomush-ntm","title":"Add unit tests for migrate force version parsing","description":"## Problem\nThe \\`migrate force\\` command's version parsing has no unit tests.\n\n## Source\nPR Review: pr-test-analyzer agent\n\n## Location\n`cmd/holomush/migrate.go:203-208`\n\n## Current Code\n```go\nvar version int\nif _, scanErr := fmt.Sscanf(args[0], \"%d\", \u0026version); scanErr \\!= nil {\n    return oops.With(\"command\", \"migrate force\").\n        Code(\"INVALID_VERSION\").\n        Errorf(\"invalid version: %s\", args[0])\n}\n```\n\n## Edge Cases to Test\n- Valid integer: \"3\" → ok\n- Zero: \"0\" → ok\n- Non-numeric: \"abc\" → error\n- Trailing chars: \"3abc\" → currently parses as 3 (potential bug)\n- Negative: \"-1\" → behavior unclear\n- Float: \"1.5\" → error\n\n## Suggested Tests\n```go\nfunc TestMigrateForceCmd_VersionParsing(t *testing.T) {\n    tests := []struct {\n        name    string\n        input   string\n        wantErr bool\n    }{\n        {\"valid integer\", \"3\", false},\n        {\"zero\", \"0\", false},\n        {\"non-numeric\", \"abc\", true},\n        {\"negative\", \"-1\", false}, // document actual behavior\n        {\"float\", \"1.5\", true},\n        {\"trailing chars\", \"3abc\", false}, // document Sscanf behavior\n    }\n    // ...\n}\n```\n\n## Acceptance Criteria\n- [ ] Add table-driven tests for version parsing\n- [ ] Document edge case behaviors\n- [ ] Verify INVALID_VERSION error code\n- [ ] Tests pass: `task test`","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T13:52:18Z","created_by":"seanb4t","updated_at":"2026-01-25T13:59:07Z","closed_at":"2026-01-25T13:59:07Z","work_type":"mutex"}
{"id":"holomush-nvm","title":"Investigate/Decide on if/how plugins should provide their manifest","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T17:28:54Z","created_by":"seanb4t","updated_at":"2026-01-18T22:21:20Z","closed_at":"2026-01-18T22:21:20Z","work_type":"mutex"}
{"id":"holomush-nw5","title":"Validate dependencies in NewExtismHost and NewExtismSubscriber","description":"## Problem\n1. NewExtismHost(nil) creates a host that panics on first method call\n2. NewExtismSubscriber with nil host or emitter causes delayed panics\n3. var h ExtismHost followed by method calls panics due to nil map\n\n## Source\nPR Review Round 7 - type-design-analyzer agent\n\n## Acceptance Criteria\n- [ ] Test proves issue exists (nil tracer causes panic)\n- [ ] NewExtismHost: use noop tracer if nil passed\n- [ ] NewExtismSubscriber: return error if host or emitter is nil\n- [ ] Update callers to handle potential error\n- [ ] Document that zero-value is not usable\n- [ ] Independent subagent review before closing","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T18:36:23Z","created_by":"seanb4t","updated_at":"2026-01-18T19:30:34Z","closed_at":"2026-01-18T19:30:34Z","work_type":"mutex"}
{"id":"holomush-nzu","title":"Update README and CLAUDE.md to reflect plugin system design","description":"Update top-level README.md and CLAUDE.md to align with the plugin system design document. The current CLAUDE.md references 'WASM plugin system via Extism' which is being replaced by Lua + go-plugin per the new design spec.","status":"open","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T03:18:43Z","created_by":"seanb4t","updated_at":"2026-01-19T03:18:43Z","dependencies":[{"issue_id":"holomush-nzu","depends_on_id":"holomush-1hq.2","type":"depends-on","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-o1jt","title":"Add integration tests for transactional cascade deletion","description":"Spec §05-storage-audit.md:146-148 requires integration tests for each entity delete path verifying same-transaction child cleanup. Current coverage is unit/mocked service tests.\n\nDiscovered during PR #84 review round 6.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-12T13:16:49Z","created_by":"seanb4t","updated_at":"2026-02-12T13:49:16Z","closed_at":"2026-02-12T13:49:16Z","close_reason":"Completed: Added integration tests for transactional cascade deletion covering all 3 entity types (location, object, character) with both success and rollback scenarios.","dependencies":[{"issue_id":"holomush-o1jt","depends_on_id":"holomush-5k1.3","type":"parent-child","created_at":"2026-02-12T08:33:01Z","created_by":"seanb4t","metadata":"{}"}]}
{"id":"holomush-o4lt","title":"[C3] Fix audit log queries to match DDL schema","description":"PR #65 review finding (Documentation). Example audit queries (lines 2055-2077) reference columns not in DDL: matched_policies (should be policy_id singular TEXT), latency_ms (should be duration_us \u003e 10000), reason (should be error_message). Acceptance Criteria: (1) All example queries use only columns defined in access_audit_log DDL (2) Units consistent (microseconds throughout) (3) Array operations removed. Dependencies: same DDL section as C2, subsumes M4.","status":"closed","priority":0,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T20:21:49Z","created_by":"seanb4t","updated_at":"2026-02-06T20:41:07Z","closed_at":"2026-02-06T20:41:07Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-o4lt","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-o6l","title":"Add HTTP observability port for metrics and health probes","description":"Add a plain HTTP port for Prometheus and Kubernetes integration.\n\n**Endpoints:**\n- `/metrics` - Prometheus metrics (connection counts, request latency, etc.)\n- `/healthz/liveness` - Kubernetes liveness probe (process is running)\n- `/healthz/readiness` - Kubernetes readiness probe (ready to accept connections)\n\n**Requirements:**\n- Add `--http-addr` flag (e.g., `--http-addr=:9090`)\n- Plain HTTP (no TLS) - these endpoints don't need auth\n- Both core and gateway processes\n- Standard Prometheus exposition format\n\n**Why plain HTTP:**\n- Prometheus doesn't typically use mTLS for scraping\n- Kubernetes probes work better with plain HTTP\n- No secrets exposed on these endpoints","status":"closed","priority":2,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T00:09:11Z","created_by":"seanb4t","updated_at":"2026-01-18T00:20:21Z","closed_at":"2026-01-18T00:20:21Z","work_type":"mutex"}
{"id":"holomush-oad2","title":"System visibility properties lack explicit forbid seed policy for audit clarity","description":"## Issue\n\nThe spec defines a `system` visibility level for properties and states: \"only accessible by system subject (handled by system bypass)\". While this is functionally correct (system subjects bypass via step 1, non-system subjects hit default-deny), the lack of an explicit forbid policy means:\n\n1. Audit logs show `default_deny` (no policy matched) rather than an explicit `deny` from a named policy\n2. Operators investigating \"why was this denied?\" see no policy name, making triage harder\n3. The intent (\"system properties are system-only\") is not codified in a policy — it's an emergent behavior of having no permit\n\n## Suggestion\n\nAdd an explicit forbid seed policy for system visibility that provides clear audit attribution:\n\n```text\n// seed:property-system-forbid\nforbid(principal is character, action, resource is property)\nwhen { resource.visibility == \"system\" };\n```\n\nThis makes the denial explicit, names the responsible policy in audit logs, and documents the design intent as a policy rather than relying on default-deny.\n\n## Impact\n\nLow — system works correctly without this. The improvement is purely for operational visibility and audit trail clarity.\n\n## Acceptance Criteria\n\n- [ ] Decision documented on whether to add explicit forbid or rely on default-deny for system visibility\n- [ ] If forbid is added, it is included in the seed policy set with appropriate naming","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T00:10:14Z","created_by":"seanb4t","updated_at":"2026-02-08T23:32:12Z","closed_at":"2026-02-08T23:32:12Z","labels":["review-finding"],"work_type":"mutex"}
{"id":"holomush-od4i","title":"[E4-Post] Improve Exit type encapsulation for lock state","description":"**Source:** PR review - type design analysis\n\n**Problem:**\nExit type in `internal/world/exit.go` has weak encapsulation (rated 3/10). Complex inter-field relationships (Locked/LockType/LockData, Visibility/VisibleTo) can be violated after construction with direct field access.\n\n**State machine violations possible:**\n```go\nexit.Locked = true  // Without setting LockType - invalid state\n```\n\n**Concerns:**\n1. `exit.Locked = true` without setting LockType leaves Exit in invalid state\n2. Mutable slices/maps: VisibleTo and LockData are public; callers can mutate them directly bypassing validation\n3. ReverseExit() returns exit with zero ID that will fail validation\n\n**Acceptance Criteria:**\n- [ ] Add `SetLocked(locked bool, lockType LockType, lockData map[string]any) error` that validates the combination\n- [ ] Consider builder pattern for Exit given complexity of optional fields\n- [ ] Document that callers must assign ID to ReverseExit() result, OR generate ID in ReverseExit\n- [ ] Tests verify invalid lock state transitions are rejected","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T21:44:14Z","created_by":"seanb4t","updated_at":"2026-01-25T22:31:28Z","closed_at":"2026-01-25T22:31:28Z","work_type":"mutex"}
{"id":"holomush-odos","title":"[E5.8.1] Align auth spec with implementation","description":"## Current State\n\nThe auth spec (`docs/specs/2026-01-25-auth-identity-design.md`) was written as a design document before implementation. Implementation diverged in several areas (appropriately), but the spec was not updated.\n\n## Gaps Found\n\n**1. Web Session Schema (lines 73-89):**\n- Spec: `character_id NOT NULL` → Implementation: nullable (character selected after login)\n- Spec: `token_signature` column → Implementation: `token_hash`\n- Spec: `last_active_at` column → Implementation: `last_seen_at`\n- Missing: `user_agent` and `ip_address` columns added in implementation\n\n**2. Session Expiry (line 154):**\n- Spec: \"30-day expiry, refresh on activity\"\n- Implementation: 24-hour expiry (`SessionTokenExpiry = 24 * time.Hour`)\n\n**3. Migration Numbers:**\n- Spec references: 000009, 000010, 000011\n- Actual migrations: 000012, 000013\n\n**Note:** The HMAC token design discrepancy (lines 146-155) is tracked separately in E5.8.2.\n\n## Acceptance Criteria\n\n- [ ] Web session schema in spec matches `internal/auth/session.go:WebSession` struct\n- [ ] Session expiry duration corrected to 24 hours\n- [ ] Migration numbers updated to actual values (000012, 000013)\n- [ ] Column names match implementation (token_hash, last_seen_at)\n- [ ] Spec passes review for accuracy against current codebase","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T15:10:39Z","created_by":"seanb4t","updated_at":"2026-02-02T15:30:55Z","closed_at":"2026-02-02T15:30:55Z","dependencies":[{"issue_id":"holomush-odos","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-olp22","title":"[E6.5] Boot command handler","description":"Implement boot command to disconnect a player.\n\n**Acceptance Criteria:**\n- Requires admin.boot capability\n- Parses target player from args\n- Disconnects target session\n- Notifies target with reason\n- Logs admin action\n\n**Files:** internal/command/handlers/boot.go, internal/command/handlers/boot_test.go\n**Blocks:** holomush-wr9.8","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T18:08:40Z","created_by":"seanb4t","updated_at":"2026-02-03T14:19:14Z","closed_at":"2026-02-03T14:19:14Z","dependencies":[{"issue_id":"holomush-olp22","depends_on_id":"holomush-rgihb","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-olp22","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-out","title":"Plugin self-describing manifests for dynamic loading","description":"## Summary\nAllow plugins to declare their own metadata and subscriptions, enabling dynamic loading and reconfiguration without host code changes.\n\n## Motivation\nCurrently (Phase 1), plugin subscriptions are configured by the host at load time. This works but requires host code changes for each new plugin.\n\n## Future Capabilities\n- Plugins export get_manifest function returning JSON with:\n  - name, version, description, author\n  - subscriptions (stream patterns)\n  - required capabilities/permissions\n- Host discovers and loads plugins from a directory\n- Hot-reload plugins without restart\n- Admin API to load/unload/reconfigure plugins at runtime\n\n## Decision History\n- Phase 1 decision: Host config only (Option 4)\n- Documented in: docs/reference/plugin-authoring.md\n- Predecessor issue: holomush-nvm","status":"open","priority":4,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T22:21:03Z","created_by":"seanb4t","updated_at":"2026-01-18T22:21:14Z","work_type":"mutex"}
{"id":"holomush-ovls","title":"ADR 0009: Update line count estimate from ~2,000 to ~3,000-3,500","description":"**Review Finding: S10 (Suggestion)**\n\nADR 0009 estimates ~2,000 lines for parser and evaluator. Given the full scope (DSL parser, fail-safe type semantics, lock token registry, attribute providers, policy cache, audit logging), 2,000 lines is optimistic. Likely 3,000-3,500 total.\n\n**Location:** ADR 0009 (Custom Go-Native ABAC Engine), line 113\n\n**Acceptance Criteria:**\n- Update estimate to ~2,000 lines for core engine, ~1,000 additional for lock compilation, token registry, and audit infrastructure\n- Total estimate: 3,000-3,500 lines","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T14:06:11Z","created_by":"seanb4t","updated_at":"2026-02-06T14:34:19Z","closed_at":"2026-02-06T14:34:19Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-ovls","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-oxd","title":"Final verification and PR creation","description":"## Summary\nPerform full verification of the documentation site and create PR for merge.\n\n## Steps\n1. Full build test:\n   - Run: cd site \u0026\u0026 uv sync \u0026\u0026 uv run zensical build\n   - Run: uv run zensical serve\n   - Verify in browser at http://localhost:8000:\n     - Landing page loads with cards\n     - Navigation tabs work\n     - All pages render without errors\n     - Logo appears in header\n     - Dark theme applied\n     - Search works\n2. Run project tests: task test \u0026\u0026 task lint\n3. Push branch: git push -u origin feat/zensical-docs\n4. Create PR with summary of changes\n\n## Acceptance Criteria\n- [ ] zensical build succeeds\n- [ ] All pages render without errors\n- [ ] Navigation tabs functional\n- [ ] Logo displays in header\n- [ ] Dark slate theme applied\n- [ ] Search functionality works\n- [ ] task test passes\n- [ ] task lint passes\n- [ ] PR created with comprehensive summary\n\n## Post-PR Manual Steps (not blocking)\n- Cloudflare Pages project created\n- DNS configured for docs.holomush.dev\n- GitHub secrets added: CF_API_TOKEN, CF_ACCOUNT_ID\n\n## Reference\nSee docs/plans/2026-01-23-zensical-docs-design.md","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T14:05:27Z","created_by":"seanb4t","updated_at":"2026-01-24T16:57:33Z","closed_at":"2026-01-24T16:57:33Z","dependencies":[{"issue_id":"holomush-oxd","depends_on_id":"holomush-03z","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-oxd","depends_on_id":"holomush-9lx","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-oxd","depends_on_id":"holomush-aao","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-oxd","depends_on_id":"holomush-d07","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-oxd","depends_on_id":"holomush-dkw","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-oxd","depends_on_id":"holomush-h4t","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-oxd","depends_on_id":"holomush-srn","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-oyin","title":"[E5.9.2] ADR 0003: Player-Character Authentication Model","description":"## Context\n\nPR 61 implements a player-character authentication model that differs fundamentally from classic MUSH design. This architectural decision affects security model, UX, and future features like character rostering.\n\n## Current State\n\nImplementation across `internal/auth/`:\n- Players authenticate with username/password at account level\n- Characters are owned by players, selected post-authentication\n- One player can own multiple characters (default limit: 5)\n- Password changes affect the player account, not individual characters\n\n## Decision Points to Document\n\n1. **Why player-level authentication?**\n   - Classic MUSH: each character has own password\n   - Modern approach: single account, multiple characters\n   - Enables character switching in web client without re-auth\n   - Better audit trails (actions tied to player identity)\n\n2. **Character selection flow**\n   - Login returns character list\n   - SelectCharacter binds session to specific character\n   - Auto-select if only one character or default set\n\n3. **Security implications**\n   - Compromise of player password affects all characters\n   - But: stronger passwords possible (one to remember)\n   - Enables account-level security features (MFA, session management)\n\n4. **Future considerations**\n   - Character rostering (holomush-gloh) - characters can be unowned\n   - Character transfer between players\n   - `player_id` nullable on characters to support rostering\n\n## Acceptance Criteria\n\n- [ ] Create `docs/adr/0003-player-character-auth-model.md`\n- [ ] Document classic MUSH model as alternative\n- [ ] Explain security tradeoffs (single point vs distributed passwords)\n- [ ] Document character selection flow\n- [ ] Reference future rostering epic (holomush-gloh)\n- [ ] Include source file references (`player.go`, `character_service.go`, `auth_service.go`)\n- [ ] Follow ADR format from `docs/adr/0001-opaque-session-tokens.md`\n- [ ] Pass `task lint:markdown`","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T15:45:07Z","created_by":"seanb4t","updated_at":"2026-02-02T15:50:06Z","closed_at":"2026-02-02T15:50:06Z","dependencies":[{"issue_id":"holomush-oyin","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-p0fg","title":"ABAC Review I7: Define unlock command semantics","description":"Issue: unlock my-chest behavior undefined: remove all action locks or per-action? Decision: unlock resource removes ALL locks; unlock resource/action removes specific. AC: (1) Both forms documented (2) Query pattern for matching lock policies specified. Ref: docs/specs/2026-02-05-full-abac-design.md:2106-2108.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:10Z","created_by":"seanb4t","updated_at":"2026-02-06T17:33:09Z","closed_at":"2026-02-06T17:33:09Z","dependencies":[{"issue_id":"holomush-p0fg","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-p0fg","depends_on_id":"holomush-kanj","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-p4un","title":"[E7] Performance benchmark for AccessPolicyEngine vs AccessControl","description":"Add benchmark comparing p50/p99 latency of AccessPolicyEngine.Evaluate vs AccessControl.Check to detect performance regressions from the migration. Discovered from PR #88 review finding #18.","status":"open","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-16T00:47:17Z","created_by":"seanb4t","updated_at":"2026-02-16T00:47:17Z"}
{"id":"holomush-p56m","title":"ABAC Review I8: Reduce CTE depth limit and add query timeout","description":"Issue: 20-level nesting too deep, no per-query timeout. Builders could create deep nesting for resource exhaustion. Decision: Reduce to 10; add SET LOCAL statement_timeout = 100ms. AC: (1) Depth limit reduced (2) Query timeout documented (3) PropertyProvider circuit breaker. Ref: docs/specs/2026-02-05-full-abac-design.md:1122-1156.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:10Z","created_by":"seanb4t","updated_at":"2026-02-06T17:33:09Z","closed_at":"2026-02-06T17:33:09Z","dependencies":[{"issue_id":"holomush-p56m","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-p56m","depends_on_id":"holomush-tiki","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-p8aus","title":"Clarify command prefix wording (wr9.141)","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-05T02:16:23Z","created_by":"seanb4t","updated_at":"2026-02-05T02:16:46Z","closed_at":"2026-02-05T02:16:46Z","work_type":"mutex"}
{"id":"holomush-pbf","title":"Add OpenTelemetry integration note to architecture document","description":"## Problem\ndocs/plans/2026-01-17-holomush-architecture-design.md:209-213 describes Plugin System but does not mention the OpenTelemetry integration that is implemented.\n\n## Source\nPR Review Round 7 - comment-analyzer agent\n\n## Acceptance Criteria\n- [ ] Add brief observability note to Plugin System section\n- [ ] Mention all plugin operations are instrumented with OTel spans\n- [ ] Independent subagent review before closing","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T18:37:05Z","created_by":"seanb4t","updated_at":"2026-01-18T20:43:25Z","closed_at":"2026-01-18T20:43:25Z","work_type":"mutex"}
{"id":"holomush-pbvl","title":"E5.7.7 Document canonical type constructors in package docs","description":"Player, WebSession, PasswordReset have exported fields allowing invariant bypass. Add package docs stating NewPlayer/NewWebSession/etc are required construction methods.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T02:41:35Z","created_by":"seanb4t","updated_at":"2026-02-02T02:54:48Z","closed_at":"2026-02-02T02:54:48Z","dependencies":[{"issue_id":"holomush-pbvl","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-pd7j","title":"Auth: Add concurrency tests for token generation","description":"GenerateSessionToken relies on crypto/rand which is thread-safe, but tests don't verify uniqueness under concurrent generation. Add test that generates 100 tokens concurrently and verifies all are unique.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T01:29:28Z","created_by":"seanb4t","updated_at":"2026-02-02T02:15:04Z","closed_at":"2026-02-02T02:15:04Z","dependencies":[{"issue_id":"holomush-pd7j","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-pee","title":"Remove trivial TestExtismHost_New constructor test","description":"## Summary\nTestExtismHost_New only tests that NewExtismHost returns non-nil, which provides minimal value for a simple constructor with no conditional logic.\n\n## Location\n`internal/wasm/extism_host_test.go:25-32`\n\n## Acceptance Criteria\n- [ ] Verify test coverage remains \u003e80% after removal\n- [ ] Remove the trivial test\n- [ ] All other tests still pass\n- [ ] Independent review by subagent confirms removal is appropriate","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T17:13:24Z","created_by":"seanb4t","updated_at":"2026-01-18T17:23:59Z","closed_at":"2026-01-18T17:23:59Z","work_type":"mutex"}
{"id":"holomush-pfc","title":"Make bidirectional exit deletion transactional","description":"HIGH: Delete removes primary exit first, then attempts return exit cleanup. Process crash leaves orphaned data. Use single transaction for both deletions.","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T00:26:10Z","created_by":"seanb4t","updated_at":"2026-01-24T00:47:40Z","closed_at":"2026-01-24T00:47:40Z","work_type":"mutex"}
{"id":"holomush-phv6","title":"ABAC Review S5: Deduplicate seed policy definitions","description":"Issue: Seed policies defined in both Property Model and Replacing Static Roles sections with partial overlap. AC: (1) Single canonical section (2) Cross-references from other sections. Ref: docs/specs/2026-02-05-full-abac-design.md:1087-1107, 2303-2349.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:12Z","created_by":"seanb4t","updated_at":"2026-02-06T17:41:21Z","closed_at":"2026-02-06T17:41:21Z","dependencies":[{"issue_id":"holomush-phv6","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-q2r4f","title":"[E6.fix] Remove redundant capability checks from admin handlers","description":"## Problem\nShutdownHandler and WallHandler duplicate capability checks that the dispatcher already performs.\n\n**Locations:**\n- `internal/command/handlers/shutdown.go:25-30`\n- `internal/command/handlers/wall.go:50-56`\n\nCommands are registered with `Capabilities: []string{\"admin.shutdown\"}` and `Capabilities: []string{\"admin.wall\"}`, so the dispatcher (dispatcher.go:126-133) already performs these checks.\n\n## Impact\n- Code duplication\n- Inconsistent with other handlers (LookHandler, MoveHandler don't duplicate)\n- Maintenance burden\n\n## Acceptance Criteria\n- [ ] Remove capability check from ShutdownHandler\n- [ ] Remove capability check from WallHandler\n- [ ] Tests continue to pass (dispatcher handles authorization)\n- [ ] Document in handler comments that capabilities are checked by dispatcher","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T03:05:02Z","created_by":"seanb4t","updated_at":"2026-02-04T03:21:15Z","closed_at":"2026-02-04T03:21:15Z","dependencies":[{"issue_id":"holomush-q2r4f","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-q7mf","title":"[E4-Post] Return error from deepCopyLockData instead of silent nil","description":"**Source:** PR review - error handling audit\n\n**Problem:**\n`deepCopyLockData` in `internal/world/exit.go:225-246` logs errors but returns `nil` on failure, silently degrading data integrity. Callers receive `nil` instead of an error, which could cause:\n- Exit lock data to be silently lost during copy operations\n- Downstream logic to behave incorrectly when operating on exits without lock data\n\n**Hidden Errors:**\n- JSON marshal failures (non-JSON-serializable types in `map[string]any`)\n- Corrupted lock data structures that cannot round-trip through JSON\n\n**User Impact:**\n- Exit locks may silently disappear when exits are copied/cloned\n- Administrators will not know their lock configurations failed to persist\n\n**Acceptance Criteria:**\n- [ ] `deepCopyLockData` returns `(map[string]any, error)` instead of `map[string]any`\n- [ ] Callers (ReverseExit) handle the error appropriately\n- [ ] Test covers marshal failure case\n- [ ] No silent data loss on JSON round-trip failure","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T21:44:13Z","created_by":"seanb4t","updated_at":"2026-01-25T21:55:18Z","closed_at":"2026-01-25T21:55:18Z","work_type":"mutex"}
{"id":"holomush-q8p","title":"Fix actor_kind type in documentation","description":"## Problem\nplugin-authoring.md:104-108 documents actor_kind as 'int' but actual type is uint8 per pkg/plugin/event.go:17.\n\n## Acceptance Criteria\n- [ ] Update documentation to show uint8\n- [ ] Add validation test in doc_validation_test.go\n- [ ] Test must pass\n- [ ] Independent code review before closing","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T16:10:01Z","created_by":"seanb4t","updated_at":"2026-01-18T16:31:33Z","closed_at":"2026-01-18T16:31:33Z","work_type":"mutex"}
{"id":"holomush-qa389","title":"[E6.test] Add unit test for Services.BroadcastSystemMessage","description":"## Problem\nThe BroadcastSystemMessage method on Services is a public helper used by boot, shutdown, and wall handlers but has no direct unit test. It is only indirectly tested through handler tests.\n\n**Location:** `internal/command/types.go:166-193`\n\n## Acceptance Criteria\n- [ ] Add test verifying nil broadcaster handling (silent no-op)\n- [ ] Add test verifying correct event structure:\n  - Stream matches input\n  - Type is EventTypeSystem\n  - Actor.Kind is ActorSystem\n  - Payload contains message\n- [ ] Use mock broadcaster to capture event","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T03:05:34Z","created_by":"seanb4t","updated_at":"2026-02-04T06:11:13Z","closed_at":"2026-02-04T06:11:13Z","dependencies":[{"issue_id":"holomush-qa389","depends_on_id":"holomush-jua6n","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qa389","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-qc6","title":"Fix documentation: timestamp is int64 Unix millis, not ISO string","description":"## Summary\nPlugin authoring guide incorrectly documents timestamp field type.\n\n## Problem\nDocumentation states timestamp is `string` with ISO 8601 format, but implementation uses `int64` Unix milliseconds.\n\n- Doc says: `\"timestamp\": \"2026-01-18T10:30:00Z\"`\n- Actual: `\"timestamp\": 1737195000000`\n\n## Solution\nUpdate docs/reference/plugin-authoring.md:\n1. Change table entry for timestamp from `string` to `int64`\n2. Update description to \"Unix milliseconds timestamp\"\n3. Fix example JSON\n\n## Files\n- Modify: docs/reference/plugin-authoring.md\n\n## Acceptance Criteria\n- [ ] Documentation matches implementation in pkg/plugin/event.go\n- [ ] Example JSON shows int64 timestamp value\n- [ ] Test: Plugin authoring example code works with documented format\n- [ ] `task lint:markdown` passes","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T15:13:19Z","created_by":"seanb4t","updated_at":"2026-01-18T15:22:35Z","closed_at":"2026-01-18T15:22:35Z","work_type":"mutex"}
{"id":"holomush-qg9","title":"Evaluate TestExtismSubscriber_PatternMatching usefulness","description":"## Problem\nextism_subscriber_test.go:130-199 creates 14 host instances just to verify 'no panic' - may be over-engineered.\n\n## Acceptance Criteria\n- [ ] Evaluate if test provides value beyond other tests\n- [ ] Either refactor to test exported functions directly OR delete\n- [ ] Document decision rationale\n- [ ] Independent code review before closing","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T16:10:29Z","created_by":"seanb4t","updated_at":"2026-01-18T16:46:04Z","closed_at":"2026-01-18T16:46:04Z","dependencies":[{"issue_id":"holomush-qg9","depends_on_id":"holomush-anj","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-ql5","title":"Epic 3: Core Access Control","description":"Minimal permission system that everything can build against. Full ABAC comes later.\n\n**Goal:** Interface-first design allowing evolution from static roles to full ABAC.\n\n**Roles (MVP):**\n- admin: All actions\n- builder: World modification + player permissions\n- player: Basic interaction (say, pose, move, look)\n\n**Phases:**\n- 3.1: AccessControl interface\n- 3.2: Static role implementation\n- 3.3: Plugin capability enforcement\n- 3.4: Integration with event system\n\n**Acceptance Criteria:**\n- [ ] AccessControl interface defined with Check, Grant, Revoke\n- [ ] Admin/builder/player roles with hardcoded permissions work\n- [ ] Capabilities checked before host function calls\n- [ ] Event emission respects permissions","status":"closed","priority":1,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:27:15Z","created_by":"seanb4t","updated_at":"2026-01-22T02:09:23Z","closed_at":"2026-01-22T02:09:23Z","dependencies":[{"issue_id":"holomush-ql5","depends_on_id":"holomush-1hq","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-ql5.1","title":"[E3] Design: Core Access Control Architecture","description":"Design the core access control architecture for HoloMUSH.\n\n## Scope\n- Define the AccessControl interface and its contract\n- Design the permission model (subjects, actions, resources)\n- Plan static role hierarchy (admin, builder, player)\n- Design plugin capability system integration\n- Plan event system permission integration\n\n## Acceptance Criteria\n- [ ] AccessControl interface fully specified with Check(subject, action, resource) bool\n- [ ] Permission model documented with clear subject/action/resource taxonomy\n- [ ] Static role definitions and their permissions documented\n- [ ] Plugin capability model designed (what capabilities exist, how they're declared)\n- [ ] Event permission flow documented (how permissions affect event visibility)\n- [ ] Design reviewed and approved\n\n## Deliverables\n- docs/specs/access-control-design.md","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:30:17Z","created_by":"seanb4t","updated_at":"2026-01-22T01:17:55Z","closed_at":"2026-01-22T01:17:55Z","dependencies":[{"issue_id":"holomush-ql5.1","depends_on_id":"holomush-ql5","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-ql5.10","title":"[E3] Task 4: StaticAccessControl Core","description":"Implement the core StaticAccessControl struct with basic checks.\n\n## Work Required\n\n**Files to create:**\n- `internal/access/static.go` - StaticAccessControl implementation\n- `internal/access/static_test.go` - Core functionality tests\n\n**Implementation:**\n1. Define StaticAccessControl struct with roles, subjects, resolver, enforcer\n2. Implement NewStaticAccessControl constructor\n3. Implement Check method with system subject handling\n4. Implement checkPlugin for capability.Enforcer delegation\n5. Implement checkRole for role-based permission matching\n6. Use gobwas/glob for pattern matching\n\n## Reference Material\n- Design spec: `docs/specs/2026-01-21-access-control-design.md` (Implementation section)\n- Implementation plan: `docs/plans/2026-01-21-access-control-implementation.md` (Task 4)\n- Existing code: `internal/plugin/capability/enforcer.go` (pattern matching reference)\n\n## Acceptance Criteria\n- [ ] System subject always allowed\n- [ ] Unknown subjects denied by default\n- [ ] Plugin subjects delegate to capability.Enforcer\n- [ ] Role-based subjects check against compiled permission patterns\n- [ ] Thread-safe with RWMutex","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-22T01:25:44Z","created_by":"seanb4t","updated_at":"2026-01-22T01:54:12Z","closed_at":"2026-01-22T01:54:12Z","dependencies":[{"issue_id":"holomush-ql5.10","depends_on_id":"holomush-ql5","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-ql5.10","depends_on_id":"holomush-ql5.7","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-ql5.10","depends_on_id":"holomush-ql5.8","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-ql5.10","depends_on_id":"holomush-ql5.9","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-ql5.11","title":"[E3] Task 5: Role Assignment Methods","description":"Add role assignment, query, and revocation methods to StaticAccessControl.\n\n## Work Required\n\n**Files to modify:**\n- `internal/access/static.go` - Add methods\n- `internal/access/static_test.go` - Add tests\n\n**Implementation:**\n1. Implement AssignRole(subject, role string) error\n2. Implement GetRole(subject string) string\n3. Implement RevokeRole(subject string) error\n4. Validate subject/role are non-empty\n5. Validate role exists in roles map\n6. Use oops for structured error handling\n\n## Reference Material\n- Design spec: `docs/specs/2026-01-21-access-control-design.md` (Role Assignment section)\n- Implementation plan: `docs/plans/2026-01-21-access-control-implementation.md` (Task 5)\n\n## Acceptance Criteria\n- [ ] AssignRole validates subject and role\n- [ ] AssignRole returns error for unknown role\n- [ ] GetRole returns empty string for unknown subject\n- [ ] RevokeRole removes role assignment\n- [ ] All methods are thread-safe","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-22T01:26:06Z","created_by":"seanb4t","updated_at":"2026-01-22T01:58:38Z","closed_at":"2026-01-22T01:58:38Z","dependencies":[{"issue_id":"holomush-ql5.11","depends_on_id":"holomush-ql5","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-ql5.11","depends_on_id":"holomush-ql5.10","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-ql5.12","title":"[E3] Task 6: $self Token Resolution","description":"Implement $self token resolution for character-specific permissions.\n\n## Work Required\n\n**Files to modify:**\n- `internal/access/static.go` - Add token resolution\n- `internal/access/static_test.go` - Add tests\n\n**Implementation:**\n1. Modify checkRole to resolve $self before matching\n2. Implement resolveTokens helper\n3. Replace $self with subject's character ID\n4. Recompile permission pattern when tokens resolved\n5. Test read:character:$self resolves correctly\n\n## Reference Material\n- Design spec: `docs/specs/2026-01-21-access-control-design.md` (Dynamic Permission Tokens section)\n- Implementation plan: `docs/plans/2026-01-21-access-control-implementation.md` (Task 6)\n\n## Acceptance Criteria\n- [ ] $self resolves to subject's character ID (from prefix:id)\n- [ ] Player can read:character:$self (own character)\n- [ ] Player cannot read:character:other\n- [ ] Token resolution happens at check time","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-22T01:26:06Z","created_by":"seanb4t","updated_at":"2026-01-22T02:01:44Z","closed_at":"2026-01-22T02:01:44Z","dependencies":[{"issue_id":"holomush-ql5.12","depends_on_id":"holomush-ql5","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-ql5.12","depends_on_id":"holomush-ql5.11","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-ql5.13","title":"[E3] Task 7: $here Token Resolution","description":"Implement $here token resolution for location-based permissions.\n\n## Work Required\n\n**Files to modify:**\n- `internal/access/static.go` - Add $here resolution\n- `internal/access/static_test.go` - Add tests\n\n**Implementation:**\n1. Extend resolveTokens to handle $here\n2. Implement resolveCurrentLocation using LocationResolver\n3. Replace $here with character's current location ID\n4. Test read:location:$here and emit:stream:location:$here\n\n## Reference Material\n- Design spec: `docs/specs/2026-01-21-access-control-design.md` (Dynamic Permission Tokens section)\n- Implementation plan: `docs/plans/2026-01-21-access-control-implementation.md` (Task 7)\n\n## Acceptance Criteria\n- [ ] $here resolves via LocationResolver.CurrentLocation\n- [ ] Player can read:location:$here (current room)\n- [ ] Player cannot read:location:other_room\n- [ ] Player can emit:stream:location:$here (speak in room)\n- [ ] NullResolver returns empty location (no $here matching)","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-22T01:26:06Z","created_by":"seanb4t","updated_at":"2026-01-22T02:04:44Z","closed_at":"2026-01-22T02:04:44Z","dependencies":[{"issue_id":"holomush-ql5.13","depends_on_id":"holomush-ql5","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-ql5.13","depends_on_id":"holomush-ql5.12","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-ql5.14","title":"[E3] Task 8: Plugin Delegation Tests","description":"Add comprehensive tests for plugin capability delegation.\n\n## Work Required\n\n**Files to modify:**\n- `internal/access/static_test.go` - Add plugin tests\n\n**Implementation:**\n1. Test plugin subject delegates to capability.Enforcer\n2. Test action:resource converted to action.resource capability format\n3. Test unknown plugin denied\n4. Test nil enforcer returns false for all plugin checks\n\n## Reference Material\n- Design spec: `docs/specs/2026-01-21-access-control-design.md` (Plugin Integration section)\n- Implementation plan: `docs/plans/2026-01-21-access-control-implementation.md` (Task 8)\n- Existing code: `internal/plugin/capability/enforcer.go`\n\n## Acceptance Criteria\n- [ ] Plugin with capability can perform action\n- [ ] Plugin without capability is denied\n- [ ] Unknown plugin is denied\n- [ ] Nil enforcer denies all plugin checks\n- [ ] Capability format conversion is correct (: to .)","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-22T01:26:07Z","created_by":"seanb4t","updated_at":"2026-01-22T02:05:20Z","closed_at":"2026-01-22T02:05:20Z","dependencies":[{"issue_id":"holomush-ql5.14","depends_on_id":"holomush-ql5","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-ql5.14","depends_on_id":"holomush-ql5.10","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-ql5.15","title":"[E3] Task 9: Test Helpers Package","description":"Create accesstest package with test helpers for other packages.\n\n## Work Required\n\n**Files to create:**\n- `internal/access/accesstest/mock.go` - Test helpers\n\n**Implementation:**\n1. Implement AllowAll AccessControl (always returns true)\n2. Implement DenyAll AccessControl (always returns false)\n3. Implement MapResolver LocationResolver (map-backed)\n4. Add interface satisfaction compile-time checks\n\n## Reference Material\n- Implementation plan: `docs/plans/2026-01-21-access-control-implementation.md` (Task 9)\n- Pattern: `internal/plugin/capability/` package structure\n\n## Acceptance Criteria\n- [ ] AllowAll implements AccessControl\n- [ ] DenyAll implements AccessControl\n- [ ] MapResolver implements LocationResolver with map backing\n- [ ] Compile-time interface checks pass\n- [ ] Package can be imported by other test files","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-22T01:26:23Z","created_by":"seanb4t","updated_at":"2026-01-22T02:06:26Z","closed_at":"2026-01-22T02:06:26Z","dependencies":[{"issue_id":"holomush-ql5.15","depends_on_id":"holomush-ql5","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-ql5.15","depends_on_id":"holomush-ql5.7","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-ql5.15","depends_on_id":"holomush-ql5.8","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-ql5.16","title":"[E3] Task 10: Broadcaster Integration","description":"Integrate AccessControl with Broadcaster for event filtering.\n\n## Work Required\n\n**Files to modify:**\n- `internal/core/broadcaster.go` - Add access control\n- `internal/core/broadcaster_test.go` - Add tests\n\n**Implementation:**\n1. Add AccessControl field to Broadcaster\n2. Add NewBroadcasterWithAccessControl constructor\n3. Add SubscribeWithSubject method\n4. Modify Broadcast to filter based on read permission\n5. Silently skip unauthorized subscribers\n\n## Reference Material\n- Design spec: `docs/specs/2026-01-21-access-control-design.md` (Event System Integration section)\n- Implementation plan: `docs/plans/2026-01-21-access-control-implementation.md` (Task 10)\n- Existing code: `internal/core/broadcaster.go`\n\n## Acceptance Criteria\n- [ ] Broadcaster accepts optional AccessControl\n- [ ] Subscribers with subject can be added\n- [ ] Events filtered at delivery based on read permission\n- [ ] Unauthorized subscribers silently skipped\n- [ ] Backward compatible (existing API still works)","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-22T01:26:23Z","created_by":"seanb4t","updated_at":"2026-01-22T02:07:35Z","closed_at":"2026-01-22T02:07:35Z","dependencies":[{"issue_id":"holomush-ql5.16","depends_on_id":"holomush-ql5","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-ql5.16","depends_on_id":"holomush-ql5.13","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-ql5.17","title":"[E3] Task 11: Final Verification","description":"Run final verification and ensure all tests pass with good coverage.\n\n## Work Required\n\n**Verification steps:**\n1. Run full test suite\n2. Run linter\n3. Check coverage (\u003e80% for internal/access)\n4. Review all acceptance criteria\n\n**Commands:**\n\\`\\`\\`bash\ntask test\ntask lint\ntask test:coverage\n\\`\\`\\`\n\n## Reference Material\n- Implementation plan: `docs/plans/2026-01-21-access-control-implementation.md` (Task 11)\n\n## Acceptance Criteria\n- [ ] All tests pass\n- [ ] Linting passes\n- [ ] \u003e80% code coverage for internal/access\n- [ ] All previous task acceptance criteria met\n- [ ] Code follows existing patterns","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-22T01:26:23Z","created_by":"seanb4t","updated_at":"2026-01-22T02:09:17Z","closed_at":"2026-01-22T02:09:17Z","dependencies":[{"issue_id":"holomush-ql5.17","depends_on_id":"holomush-ql5","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-ql5.17","depends_on_id":"holomush-ql5.13","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-ql5.17","depends_on_id":"holomush-ql5.14","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-ql5.17","depends_on_id":"holomush-ql5.15","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-ql5.17","depends_on_id":"holomush-ql5.16","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-ql5.2","title":"[E3] Implementation Plan: Core Access Control","description":"Create detailed implementation plan for core access control based on approved design.\n\n## Scope\n- Break down design into implementable tasks\n- Define test strategy for each component\n- Identify integration points with existing code\n- Estimate effort and sequence work\n\n## Acceptance Criteria\n- [ ] Implementation plan covers all design components\n- [ ] Each phase has clear entry/exit criteria\n- [ ] Test strategy defined for unit, integration, and property-based tests\n- [ ] Dependencies on existing code identified (EventStore, Plugin system)\n- [ ] Plan reviewed and approved\n\n## Deliverables\n- docs/plans/access-control-implementation.md","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:30:22Z","created_by":"seanb4t","updated_at":"2026-01-22T01:21:28Z","closed_at":"2026-01-22T01:21:28Z","dependencies":[{"issue_id":"holomush-ql5.2","depends_on_id":"holomush-ql5","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-ql5.2","depends_on_id":"holomush-ql5.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-ql5.3","title":"[E3] Phase 3.1: AccessControl Interface","description":"Implement the core AccessControl interface: Check(subject, action, resource) bool\n\n## Scope\n- Define Subject, Action, Resource types\n- Implement AccessControl interface\n- Create mock implementation for testing\n- Write comprehensive unit tests\n\n## Acceptance Criteria\n- [ ] AccessControl interface defined in internal/core/access.go\n- [ ] Check(subject, action, resource) bool method implemented\n- [ ] Subject type supports user IDs and system identifiers\n- [ ] Action type supports CRUD and domain-specific actions\n- [ ] Resource type supports objects, rooms, plugins, system resources\n- [ ] Mock implementation available for testing other components\n- [ ] \u003e90% test coverage for access package\n- [ ] All tests pass\n\n## Exit Gate\nAccessControl interface is usable by other components (static roles, plugins, events)","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:30:28Z","created_by":"seanb4t","updated_at":"2026-01-22T01:26:49Z","closed_at":"2026-01-22T01:26:49Z","dependencies":[{"issue_id":"holomush-ql5.3","depends_on_id":"holomush-ql5","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-ql5.3","depends_on_id":"holomush-ql5.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-ql5.3","depends_on_id":"holomush-ql5.2","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-ql5.4","title":"[E3] Phase 3.2: Static Role Implementation","description":"Implement static role-based permissions: Admin/builder/player roles with hardcoded permissions.\n\n## Scope\n- Define Role type and role hierarchy\n- Implement role-to-permission mapping\n- Create RoleBasedAccessControl implementing AccessControl interface\n- Integrate with session/user system\n\n## Acceptance Criteria\n- [ ] Role type defined with Admin, Builder, Player values\n- [ ] Role hierarchy implemented (Admin \u003e Builder \u003e Player)\n- [ ] Permission mapping hardcoded for each role:\n  - Admin: all permissions\n  - Builder: create/modify objects, rooms; cannot admin users\n  - Player: interact with objects, move, communicate\n- [ ] RoleBasedAccessControl passes all AccessControl interface tests\n- [ ] Integration with Session to retrieve user role\n- [ ] \u003e90% test coverage\n- [ ] All tests pass\n\n## Exit Gate\nUsers can be assigned roles and permissions are enforced via AccessControl interface","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:30:34Z","created_by":"seanb4t","updated_at":"2026-01-22T01:26:49Z","closed_at":"2026-01-22T01:26:49Z","dependencies":[{"issue_id":"holomush-ql5.4","depends_on_id":"holomush-ql5","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-ql5.4","depends_on_id":"holomush-ql5.3","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-ql5.5","title":"[E3] Phase 3.3: Plugin Capability Enforcement","description":"Implement plugin capability enforcement: Capabilities checked before host function calls.\n\n## Scope\n- Define Capability type for plugin permissions\n- Implement capability checking in ExtismHost\n- Enforce capabilities before host function execution\n- Create capability manifest for plugins\n\n## Acceptance Criteria\n- [ ] Capability type defined (e.g., ReadWorld, WriteWorld, Network, Database)\n- [ ] Plugin manifest includes declared capabilities\n- [ ] Host functions check capabilities before execution\n- [ ] Capability violations return clear errors (not panics)\n- [ ] Capability checking is performant (no significant overhead)\n- [ ] Tests verify capability enforcement for all host functions\n- [ ] \u003e90% test coverage for capability code\n- [ ] All tests pass\n\n## Exit Gate\nPlugins cannot execute host functions without declared capabilities","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:30:40Z","created_by":"seanb4t","updated_at":"2026-01-22T01:26:49Z","closed_at":"2026-01-22T01:26:49Z","dependencies":[{"issue_id":"holomush-ql5.5","depends_on_id":"holomush-ql5","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-ql5.5","depends_on_id":"holomush-ql5.4","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-ql5.6","title":"[E3] Phase 3.4: Event System Integration","description":"Integrate access control with event system: Event emission respects permissions.\n\n## Scope\n- Add permission checks to event subscription\n- Filter events based on subscriber permissions\n- Integrate with EventStore for permission-aware replay\n- Ensure event emission respects access control\n\n## Acceptance Criteria\n- [ ] Event subscription checks subscriber permissions\n- [ ] Events filtered before delivery based on permissions\n- [ ] EventStore replay respects permissions\n- [ ] Permission checks are efficient (minimal overhead per event)\n- [ ] Audit logging for permission denials\n- [ ] Integration tests verify permission filtering end-to-end\n- [ ] \u003e90% test coverage for integration code\n- [ ] All tests pass\n\n## Exit Gate\nEvents are only visible to authorized subscribers; unauthorized access is logged","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:30:48Z","created_by":"seanb4t","updated_at":"2026-01-22T01:26:49Z","closed_at":"2026-01-22T01:26:49Z","dependencies":[{"issue_id":"holomush-ql5.6","depends_on_id":"holomush-ql5","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-ql5.6","depends_on_id":"holomush-ql5.5","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-ql5.7","title":"[E3] Task 1: AccessControl Interface","description":"Create the core AccessControl interface and ParseSubject helper.\n\n## Work Required\n\n**Files to create:**\n- `internal/access/access.go` - Interface definition\n- `internal/access/access_test.go` - Interface tests\n\n**Implementation:**\n1. Define AccessControl interface with Check method\n2. Implement ParseSubject for prefix:id format parsing\n3. Add comprehensive tests for subject parsing\n\n## Reference Material\n- Design spec: `docs/specs/2026-01-21-access-control-design.md` (Core Interface section)\n- Implementation plan: `docs/plans/2026-01-21-access-control-implementation.md` (Task 1)\n\n## Acceptance Criteria\n- [ ] AccessControl interface defined with `Check(ctx, subject, action, resource) bool`\n- [ ] ParseSubject correctly parses char:, session:, plugin:, system prefixes\n- [ ] Tests cover all subject format cases\n- [ ] Package documentation describes format conventions","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-22T01:25:27Z","created_by":"seanb4t","updated_at":"2026-01-22T01:38:49Z","closed_at":"2026-01-22T01:38:49Z","dependencies":[{"issue_id":"holomush-ql5.7","depends_on_id":"holomush-ql5","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-ql5.8","title":"[E3] Task 2: LocationResolver Interface","description":"Create the LocationResolver interface for dynamic token resolution.\n\n## Work Required\n\n**Files to create:**\n- `internal/access/resolver.go` - Interface definition\n- `internal/access/resolver_test.go` - Interface tests\n\n**Implementation:**\n1. Define LocationResolver interface with CurrentLocation and CharactersAt methods\n2. Implement NullResolver for when location permissions not needed\n3. Add interface satisfaction tests\n\n## Reference Material\n- Design spec: `docs/specs/2026-01-21-access-control-design.md` (Dynamic Permission Tokens section)\n- Implementation plan: `docs/plans/2026-01-21-access-control-implementation.md` (Task 2)\n\n## Acceptance Criteria\n- [ ] LocationResolver interface defined with CurrentLocation and CharactersAt\n- [ ] NullResolver implementation provided\n- [ ] Interface can be mocked for testing","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-22T01:25:44Z","created_by":"seanb4t","updated_at":"2026-01-22T01:46:03Z","closed_at":"2026-01-22T01:46:03Z","dependencies":[{"issue_id":"holomush-ql5.8","depends_on_id":"holomush-ql5","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-ql5.8","depends_on_id":"holomush-ql5.7","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-ql5.9","title":"[E3] Task 3: Permission Groups","description":"Define default permission groups and role definitions.\n\n## Work Required\n\n**Files to create:**\n- `internal/access/permissions.go` - Permission and role definitions\n- `internal/access/permissions_test.go` - Role composition tests\n\n**Implementation:**\n1. Define playerPowers, builderPowers, adminPowers permission slices\n2. Implement DefaultRoles() returning composed roles\n3. Implement compose() helper for explicit role composition\n4. Test role composition (builder includes player, admin includes all)\n\n## Reference Material\n- Design spec: `docs/specs/2026-01-21-access-control-design.md` (Role Composition Model section)\n- Implementation plan: `docs/plans/2026-01-21-access-control-implementation.md` (Task 3)\n\n## Acceptance Criteria\n- [ ] player, builder, admin roles defined with correct permissions\n- [ ] Roles use composition, not inheritance\n- [ ] DefaultRoles() returns map[string][]string\n- [ ] Tests verify role composition includes expected permissions","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-22T01:25:44Z","created_by":"seanb4t","updated_at":"2026-01-22T01:49:00Z","closed_at":"2026-01-22T01:49:00Z","dependencies":[{"issue_id":"holomush-ql5.9","depends_on_id":"holomush-ql5","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-ql5.9","depends_on_id":"holomush-ql5.7","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-qmt","title":"Phase 1.6: Extism Plugin Framework","description":"Implement Extism-based plugin framework per design in docs/plans/2026-01-18-extism-plugin-framework-design.md\n\n## Summary\n\nReplace wazero with Extism to dramatically simplify plugin authoring and establish a plugin-first architecture where all game commands and behaviors are plugins.\n\n## Key Deliverables\n\n**Phase 1: Core Extism Integration**\n- Replace wazero with Extism Go SDK\n- Basic DeliverEvent with OTel tracing\n- Port echo plugin to Python (proof of concept)\n\n**Phase 2: Host Functions**\n- Game query functions (query_location, query_character, etc.)\n- emit_event host function\n- Capability model and manifest parsing\n\n**Phase 3: External Access**\n- HTTP functions with domain allowlist\n- KV storage for plugin state\n- Rate limiting\n\n**Phase 4: Schema \u0026 Commands**\n- Schema contributions (attributes, tables)\n- Migration system\n- Command registration\n- Load order resolution\n\n**Phase 5: Bundled Plugins**\n- Extract core commands to replaceable plugins\n- holomush-communication, holomush-navigation, etc.\n\n## Architecture Decisions\n\n- Micro-core: events, sessions, auth, plugin host, DB, object model only\n- All commands/behaviors as plugins\n- Explicit load order with priority-based conflict resolution\n- OTel tracing for all plugin calls\n\n## References\n\n- Design: docs/plans/2026-01-18-extism-plugin-framework-design.md\n- Evaluation: holomush-n1o (closed)","status":"closed","priority":0,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T12:56:35Z","created_by":"seanb4t","updated_at":"2026-01-19T00:24:48Z","closed_at":"2026-01-19T00:24:48Z","dependencies":[{"issue_id":"holomush-qmt","depends_on_id":"holomush-nvm","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-qmt.1","title":"Add Extism SDK Dependency","description":"## Summary\nAdd the Extism Go SDK dependency to the project.\n\n## Implementation\n- Run `go get github.com/extism/go-sdk@v1.7.1`\n- Run `go mod tidy`\n- Verify dependency appears in go.mod\n\n## Files\n- Modify: `go.mod`\n- Modify: `go.sum`\n\n## Acceptance Criteria\n- [ ] `go get github.com/extism/go-sdk@v1.7.1` succeeds\n- [ ] `grep extism go.mod` shows version v1.7.1\n- [ ] `go mod tidy` completes without errors\n- [ ] Independent code review by separate subagent confirms work is complete","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T13:07:50Z","created_by":"seanb4t","updated_at":"2026-01-18T13:37:10Z","closed_at":"2026-01-18T13:37:10Z","dependencies":[{"issue_id":"holomush-qmt.1","depends_on_id":"holomush-qmt","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-qmt.10","title":"Final Integration Test","description":"## Summary\nCreate end-to-end integration test verifying the complete Extism plugin flow.\n\n## Implementation\n- Create `internal/wasm/integration_test.go` with build tag\n- Test: load plugin → subscribe → deliver event → verify emitted response\n- Use echo plugin to verify \"Echo:\" prefix in response\n- Verify payload contains expected message\n\n## Files\n- Create: `internal/wasm/integration_test.go`\n\n## Acceptance Criteria\n- [ ] `go test -v -tags=integration ./internal/wasm/... -run TestExtism_Integration` passes\n- [ ] Test loads echo plugin successfully\n- [ ] Test delivers say event to plugin\n- [ ] Test verifies emitted event contains \"Echo:\" prefix\n- [ ] Test verifies correct event type (say)\n- [ ] Independent code review by separate subagent confirms work is complete","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T13:10:16Z","created_by":"seanb4t","updated_at":"2026-01-18T15:04:17Z","closed_at":"2026-01-18T15:04:17Z","dependencies":[{"issue_id":"holomush-qmt.10","depends_on_id":"holomush-qmt","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.10","depends_on_id":"holomush-qmt.9","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-qmt.11","title":"Update Documentation for Extism Plugin Framework","description":"## Summary\nUpdate documentation to reflect the Extism plugin framework and ensure overall system documentation alignment.\n\n## Implementation\n\n### System Documentation Updates\n- Review and update `docs/plans/2026-01-17-holomush-architecture-design.md` for Extism changes\n- Ensure all architecture docs reflect current state\n- Verify README and getting started guides are accurate\n\n### New Documentation\n- Create `docs/reference/plugin-authoring.md` with:\n  - Quick start guide for Python plugins\n  - Event structure documentation\n  - Response format documentation\n  - Testing plugins locally\n- Follow `docs/CLAUDE.md` guidelines for all markdown\n\n### Documentation Guidelines\n- Reference `docs/CLAUDE.md` for markdown standards\n- All code fences MUST have language identifiers\n- Use spaces, not tabs\n- Blank lines around lists and code blocks\n\n## Files\n- Modify: `docs/plans/2026-01-17-holomush-architecture-design.md`\n- Create: `docs/reference/plugin-authoring.md`\n- Reference: `docs/CLAUDE.md` (documentation guidelines)\n\n## Acceptance Criteria\n- [ ] Architecture doc reflects Extism instead of raw wazero\n- [ ] Plugin authoring guide exists with Python example\n- [ ] Event JSON structure documented\n- [ ] Testing workflow documented\n- [ ] All markdown passes `task lint:markdown`\n- [ ] All code examples are valid and tested\n- [ ] Independent code review by separate subagent confirms work is complete","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T13:10:28Z","created_by":"seanb4t","updated_at":"2026-01-18T15:05:41Z","closed_at":"2026-01-18T15:05:41Z","dependencies":[{"issue_id":"holomush-qmt.11","depends_on_id":"holomush-qmt","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.11","depends_on_id":"holomush-qmt.10","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-qmt.12","title":"PR Review: Extism Phase 1 Implementation","description":"## Summary\nComprehensive PR review of all Phase 1 Extism implementation changes.\n\n## Implementation\nUse the `/pr-review-toolkit:review-pr` skill with the following prompt:\n\n---\n/pr-review-toolkit:review-pr review all changes for the commits (inclusive) between e29fadd6bd371fcf2e878386086caa8babe2aaef..\u003cCOMMIT-AT-END\u003e. Ensure that we do a full and comprehensive review including looking for ways to aggressively simplify. Cover all documentation and ensure that it's current and reflects reality, as well as verify that we are reaching required test targets.\n---\n\nNote: Replace \u003cCOMMIT-AT-END\u003e with the actual commit hash after implementation is complete.\n\n## Acceptance Criteria\n- [ ] All code reviewed by specialized agents (code-reviewer, silent-failure-hunter, etc.)\n- [ ] Documentation accuracy verified\n- [ ] Test coverage meets \u003e80% target\n- [ ] All review findings addressed or documented\n- [ ] No critical issues remaining\n- [ ] Independent code review by separate subagent confirms work is complete\n\n## Review Findings\nIf there are review findings, STOP and present them to the user for direction.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T13:10:49Z","created_by":"seanb4t","updated_at":"2026-01-18T15:22:55Z","closed_at":"2026-01-18T15:22:55Z","dependencies":[{"issue_id":"holomush-qmt.12","depends_on_id":"holomush-4ga","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.12","depends_on_id":"holomush-qc6","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.12","depends_on_id":"holomush-qmt","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.12","depends_on_id":"holomush-qmt.11","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.12","depends_on_id":"holomush-v0s","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.12","depends_on_id":"holomush-xpu","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-qmt.13","title":"Final User Approval: Extism Phase 1","description":"## Summary\nFinal user approval checkpoint for Extism Phase 1 implementation.\n\n## Implementation\nThis task requires explicit user approval before closing. Present the following to the user:\n\n1. Summary of all completed work\n2. PR review findings and resolutions\n3. Test coverage report\n4. Any remaining concerns or trade-offs\n\n## Acceptance Criteria\n- [ ] All implementation tasks (holomush-qmt.1 through holomush-qmt.11) completed\n- [ ] PR review (holomush-qmt.12) completed with all findings addressed\n- [ ] User explicitly approves the implementation\n- [ ] User confirms ready to close this epic milestone\n\n## Blocking Dependencies\nThis task is blocked by all other tasks in Phase 1.6.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T13:11:06Z","created_by":"seanb4t","updated_at":"2026-01-19T00:24:48Z","closed_at":"2026-01-19T00:24:48Z","dependencies":[{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-02y","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-0iw","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-0pe","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-19z","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-1dp","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-1xk","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-1xw","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-3hj","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-3wy","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-4m1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-4r4","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-4w0","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-52s","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-66t","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-6eh","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-6r0","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-7ep","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-82p","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-8rr","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-a0u","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-aem","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-anj","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-ci8","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-cmr","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-cyj","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-d1w","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-d62","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-d8k","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-dix","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-dtb","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-dxl","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-dzs","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-fd9","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-fvs","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-fwp","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-hri","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-itp","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-j59","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-l82","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-moi","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-mry","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-nqw","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-nw5","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-pbf","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-pee","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-q8p","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-qg9","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-qmt","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-qmt.12","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-rhq","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-tev","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-v1r","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-vq5","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-wse","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-xcz","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-zhe","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.13","depends_on_id":"holomush-zm7","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-qmt.2","title":"Create ExtismHost Type","description":"## Summary\nCreate the ExtismHost struct that manages Extism-based WASM plugins with OpenTelemetry tracing.\n\n## Implementation\n- Create `internal/wasm/extism_host.go` with ExtismHost struct\n- Add NewExtismHost constructor accepting trace.Tracer\n- Implement Close method for plugin cleanup\n- Write tests in `internal/wasm/extism_host_test.go`\n\n## Files\n- Create: `internal/wasm/extism_host.go`\n- Create: `internal/wasm/extism_host_test.go`\n\n## Acceptance Criteria\n- [ ] `go test -v ./internal/wasm/... -run TestExtismHost_New` passes\n- [ ] `go test -v ./internal/wasm/... -run TestExtismHost_Close` passes\n- [ ] ExtismHost stores tracer and plugin map\n- [ ] Close method releases plugins and prevents further operations\n- [ ] Independent code review by separate subagent confirms work is complete","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T13:08:03Z","created_by":"seanb4t","updated_at":"2026-01-18T13:41:05Z","closed_at":"2026-01-18T13:41:05Z","dependencies":[{"issue_id":"holomush-qmt.2","depends_on_id":"holomush-qmt","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.2","depends_on_id":"holomush-qmt.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-qmt.3","title":"Implement LoadPlugin Method","description":"## Summary\nAdd LoadPlugin method to ExtismHost for loading WASM plugins with OTel tracing.\n\n## Implementation\n- Add LoadPlugin(ctx, name, wasmBytes) method\n- Add HasPlugin(name) method\n- Wrap in OTel span with plugin.name attribute\n- Handle ErrHostClosed and invalid WASM errors\n- Write comprehensive tests\n\n## Files\n- Modify: `internal/wasm/extism_host.go`\n- Modify: `internal/wasm/extism_host_test.go`\n\n## Acceptance Criteria\n- [ ] `go test -v ./internal/wasm/... -run TestExtismHost_LoadPlugin` passes\n- [ ] `go test -v ./internal/wasm/... -run TestExtismHost_LoadPlugin_InvalidWASM` passes\n- [ ] `go test -v ./internal/wasm/... -run TestExtismHost_LoadPlugin_AfterClose` passes\n- [ ] LoadPlugin creates OTel span with plugin.name attribute\n- [ ] HasPlugin returns true for loaded plugins\n- [ ] Independent code review by separate subagent confirms work is complete","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T13:08:22Z","created_by":"seanb4t","updated_at":"2026-01-18T13:46:33Z","closed_at":"2026-01-18T13:46:33Z","dependencies":[{"issue_id":"holomush-qmt.3","depends_on_id":"holomush-qmt","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.3","depends_on_id":"holomush-qmt.2","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-qmt.4","title":"Implement DeliverEvent Method","description":"## Summary\nAdd DeliverEvent method to ExtismHost for sending events to plugins and collecting responses.\n\n## Implementation\n- Add DeliverEvent(ctx, pluginName, event) method\n- Convert core.Event to plugin.Event JSON\n- Call plugin's handle_event function\n- Parse plugin.Response from output\n- Wrap in OTel span with event.type, event.stream, plugin.name attributes\n- Handle ErrPluginNotFound\n\n## Files\n- Modify: `internal/wasm/extism_host.go`\n- Modify: `internal/wasm/extism_host_test.go`\n\n## Acceptance Criteria\n- [ ] `go test -v ./internal/wasm/... -run TestExtismHost_DeliverEvent` passes\n- [ ] `go test -v ./internal/wasm/... -run TestExtismHost_DeliverEvent_PluginNotFound` passes\n- [ ] DeliverEvent creates OTel span with event.type, event.stream, plugin.name attributes\n- [ ] Empty plugin output returns nil events (not error)\n- [ ] Independent code review by separate subagent confirms work is complete","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T13:08:38Z","created_by":"seanb4t","updated_at":"2026-01-18T14:20:16Z","closed_at":"2026-01-18T14:20:16Z","dependencies":[{"issue_id":"holomush-qmt.4","depends_on_id":"holomush-qmt","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.4","depends_on_id":"holomush-qmt.3","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-qmt.5","title":"Create Python Echo Plugin","description":"## Summary\nCreate a Python-based echo plugin using the Extism PDK to prove multi-language support.\n\n## Implementation\n- Create `plugins/echo-python/plugin.py` with handle_event function\n- Use @extism.plugin_fn decorator\n- Listen for \"say\" events, ignore plugin-originated events\n- Emit echo response with \"Echo: \u003cmessage\u003e\"\n- Create Makefile for building with extism-py\n- Create README documenting usage\n\n## Files\n- Create: `plugins/echo-python/plugin.py`\n- Create: `plugins/echo-python/Makefile`\n- Create: `plugins/echo-python/README.md`\n\n## Acceptance Criteria\n- [ ] `plugins/echo-python/plugin.py` exists with handle_event function\n- [ ] Plugin uses @extism.plugin_fn decorator\n- [ ] Plugin ignores events where actor_kind == 2 (plugin)\n- [ ] Plugin emits response with \"Echo: \" prefix\n- [ ] Makefile can build echo.wasm (when extism-py available)\n- [ ] README explains building and behavior\n- [ ] Independent code review by separate subagent confirms work is complete","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T13:08:56Z","created_by":"seanb4t","updated_at":"2026-01-18T13:41:05Z","closed_at":"2026-01-18T13:41:05Z","dependencies":[{"issue_id":"holomush-qmt.5","depends_on_id":"holomush-qmt","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.5","depends_on_id":"holomush-qmt.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-qmt.6","title":"Create Test WASM Fixtures","description":"## Summary\nCreate WASM test fixtures for unit and integration tests.\n\n## Implementation\n- Create `internal/wasm/testdata/minimal.wat` - minimal valid Extism plugin\n- Convert WAT to WASM using wat2wasm\n- Build echo.wasm from Python plugin\n- Update tests to use go:embed for fixtures\n- Ensure tests can run without external tools\n\n## Files\n- Create: `internal/wasm/testdata/minimal.wat`\n- Create: `internal/wasm/testdata/minimal.wasm`\n- Create: `internal/wasm/testdata/echo.wasm`\n- Modify: `internal/wasm/extism_host_test.go`\n\n## Acceptance Criteria\n- [ ] `internal/wasm/testdata/minimal.wasm` exists and is valid Extism plugin\n- [ ] `internal/wasm/testdata/echo.wasm` exists and implements echo behavior\n- [ ] Tests use `//go:embed` directives for fixtures\n- [ ] `go test ./internal/wasm/...` passes without external tools\n- [ ] Independent code review by separate subagent confirms work is complete","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T13:09:11Z","created_by":"seanb4t","updated_at":"2026-01-18T14:41:50Z","closed_at":"2026-01-18T14:41:50Z","dependencies":[{"issue_id":"holomush-qmt.6","depends_on_id":"holomush-qmt","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.6","depends_on_id":"holomush-qmt.4","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.6","depends_on_id":"holomush-qmt.5","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"comments":[{"id":6,"issue_id":"holomush-qmt.6","author":"seanb4t","text":"BLOCKED: Requires extism-py to build echo.wasm from Python plugin. Install with: pip install extism-cli","created_at":"2026-01-18T14:22:34Z"}],"work_type":"mutex"}
{"id":"holomush-qmt.7","title":"Add ExtismSubscriber for Event Integration","description":"## Summary\nCreate ExtismSubscriber to route events from the core event system to Extism plugins.\n\n## Implementation\n- Create `internal/wasm/extism_subscriber.go` with ExtismSubscriber struct\n- Accept ExtismHost and Emitter interface\n- Subscribe(pluginName, streamPattern) for registering subscriptions\n- HandleEvent(ctx, event) for delivering events to matching plugins\n- Implement stream pattern matching (glob: \"location:*\")\n- 5-second timeout for plugin calls\n- Emit plugin-generated events via Emitter\n\n## Files\n- Create: `internal/wasm/extism_subscriber.go`\n- Create: `internal/wasm/extism_subscriber_test.go`\n\n## Acceptance Criteria\n- [ ] `go test -v ./internal/wasm/... -run TestExtismSubscriber_HandleEvent` passes\n- [ ] Stream pattern \"location:*\" matches \"location:room1\"\n- [ ] Plugin events are emitted via Emitter interface\n- [ ] 5-second timeout enforced on plugin calls\n- [ ] Errors logged but don't propagate to caller\n- [ ] Independent code review by separate subagent confirms work is complete","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T13:09:29Z","created_by":"seanb4t","updated_at":"2026-01-18T15:01:06Z","closed_at":"2026-01-18T15:01:06Z","dependencies":[{"issue_id":"holomush-qmt.7","depends_on_id":"holomush-qmt","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.7","depends_on_id":"holomush-qmt.6","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-qmt.8","title":"Run Lint and Test Coverage","description":"## Summary\nVerify all code passes lint checks and meets coverage requirements.\n\n## Implementation\n- Run `task lint` and fix any issues\n- Run `task test` and verify all tests pass\n- Run `task test:coverage` and verify \u003e80% coverage\n- Fix any lint or test failures before proceeding\n\n## Files\n- May modify any files with lint/test issues\n\n## Acceptance Criteria\n- [ ] `task lint` passes with no errors\n- [ ] `task test` passes with all tests green\n- [ ] `task test:coverage` shows \u003e80% coverage on internal/wasm package\n- [ ] No new lint ignore directives added\n- [ ] Independent code review by separate subagent confirms work is complete","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T13:09:44Z","created_by":"seanb4t","updated_at":"2026-01-18T15:03:18Z","closed_at":"2026-01-18T15:03:18Z","dependencies":[{"issue_id":"holomush-qmt.8","depends_on_id":"holomush-qmt","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.8","depends_on_id":"holomush-qmt.7","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-qmt.9","title":"Update Dependencies File","description":"## Summary\nEnsure cmd/holomush/deps.go includes Extism import for build tags if needed.\n\n## Implementation\n- Check if deps.go manages explicit imports\n- Add Extism import if needed for build constraints\n- Run `go mod tidy` to clean up\n\n## Files\n- Modify: `cmd/holomush/deps.go`\n- Modify: `go.mod` (via go mod tidy)\n- Modify: `go.sum` (via go mod tidy)\n\n## Acceptance Criteria\n- [ ] `go mod tidy` completes without errors\n- [ ] `go build ./...` succeeds\n- [ ] No orphaned dependencies in go.mod\n- [ ] Independent code review by separate subagent confirms work is complete","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T13:10:01Z","created_by":"seanb4t","updated_at":"2026-01-18T15:03:42Z","closed_at":"2026-01-18T15:03:42Z","dependencies":[{"issue_id":"holomush-qmt.9","depends_on_id":"holomush-qmt","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qmt.9","depends_on_id":"holomush-qmt.8","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-qnp3","title":"Fix recursive CTE join direction in PropertyProvider","description":"The recursive CTE for resolving parent_location walks the wrong direction. The join condition 'JOIN chain c ON o.id = c.contained_in_object_id' walks DOWNWARD into children, but the stated purpose is to walk UPWARD to find an ancestor with a non-NULL location_id.\n\n**Fix:** Change join to 'JOIN chain c ON c.contained_in_object_id = o.id'\n\n**Acceptance Criteria:**\n- [ ] CTE in decision #44 (decisions.md ~line 1046) fixed\n- [ ] CTE in main spec (~line 1211) fixed\n- [ ] Both CTEs are consistent with each other\n- [ ] Comment describes upward traversal correctly\n\n**Files:** docs/specs/2026-02-05-full-abac-design.md, docs/specs/2026-02-05-full-abac-design-decisions.md","status":"closed","priority":0,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T22:36:08Z","created_by":"seanb4t","updated_at":"2026-02-06T22:58:05Z","closed_at":"2026-02-06T22:58:05Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-qnp3","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-qnr3","title":"ABAC Review I6: Add seed policy update mechanism","description":"Issue: Spec says use migration for seed fixes but no mechanism defined. Decision: PolicyStore.UpdateSeed() bypasses collision check. Skips admin-customized seeds with warning. AC: (1) Seed Policy Migrations subsection added (2) UpdateSeed behavior documented (3) Customization detection specified. Ref: docs/specs/2026-02-05-full-abac-design.md:2390-2419.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:10Z","created_by":"seanb4t","updated_at":"2026-02-06T17:26:00Z","closed_at":"2026-02-06T17:26:00Z","dependencies":[{"issue_id":"holomush-qnr3","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-qr25","title":"[E5.9.1] ADR 0002: Argon2id Password Hashing","description":"## Context\n\nPR 61 implements password hashing using argon2id with specific OWASP-recommended parameters. This is a significant security decision that affects breach severity and requires documentation.\n\n## Current State\n\nImplementation in `internal/auth/hasher.go`:\n- Algorithm: argon2id (winner of Password Hashing Competition 2015)\n- Parameters: t=1 iteration, m=64MB memory, p=4 threads\n- Salt: 16 random bytes\n- Output: 32 bytes\n- Includes auto-upgrade mechanism for legacy bcrypt hashes\n\n## Decision Points to Document\n\n1. **Why argon2id over bcrypt?**\n   - Memory-hardness makes GPU/ASIC attacks expensive\n   - bcrypt is memory-light (~4KB), vulnerable to parallel attacks\n   - argon2id combines argon2i (side-channel resistant) and argon2d (GPU resistant)\n\n2. **Why these specific parameters?**\n   - OWASP 2024 recommendations for server-side hashing\n   - 64MB memory cost balances security vs server resource usage\n   - Single iteration sufficient with high memory cost\n\n3. **Auto-upgrade mechanism**\n   - Legacy bcrypt hashes upgraded on successful login\n   - Transparent migration without password reset\n\n4. **Dummy hash synchronization**\n   - Timing attack prevention requires dummy hash with same parameters\n   - See ADR 0004 for full timing attack discussion\n\n## Acceptance Criteria\n\n- [ ] Create `docs/adr/0002-argon2id-password-hashing.md`\n- [ ] Document alternatives considered (bcrypt, scrypt, PBKDF2)\n- [ ] Explain parameter choices with OWASP references\n- [ ] Document auto-upgrade mechanism rationale\n- [ ] Reference dummy hash requirement (link to ADR 0004)\n- [ ] Include source file references (`hasher.go`, `auth_service.go`)\n- [ ] Follow ADR format from `docs/adr/0001-opaque-session-tokens.md`\n- [ ] Pass `task lint:markdown`","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T15:44:44Z","created_by":"seanb4t","updated_at":"2026-02-02T15:52:36Z","closed_at":"2026-02-02T15:52:36Z","dependencies":[{"issue_id":"holomush-qr25","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-qrm2u","title":"[E6.1b] Integrate alias resolution into dispatcher","description":"Update dispatcher to resolve aliases before command lookup.\n\n**Acceptance Criteria:**\n- Dispatcher has optional AliasResolver\n- SetAliasResolver method to configure\n- Dispatch resolves aliases before parsing\n- Tests verify alias expansion works end-to-end\n\n**Files:** internal/command/dispatcher.go (modify), internal/command/dispatcher_test.go (modify)","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T18:07:35Z","created_by":"seanb4t","updated_at":"2026-02-02T19:29:11Z","closed_at":"2026-02-02T19:29:11Z","dependencies":[{"issue_id":"holomush-qrm2u","depends_on_id":"holomush-j6qe5","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qrm2u","depends_on_id":"holomush-rgihb","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qrm2u","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-qsoi","title":"E5.7.2 Silent hash upgrade failure in auth service","description":"auth_service.go:140-145 silently ignores hash upgrade errors (bcrypt to argon2id). Should log at WARN level for observability.","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T02:40:30Z","created_by":"seanb4t","updated_at":"2026-02-02T02:50:02Z","closed_at":"2026-02-02T02:50:02Z","dependencies":[{"issue_id":"holomush-qsoi","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-qt1g","title":"Spec: Specify audit log insert failure behavior (best-effort, non-blocking)","description":"**Review Finding: I6 (Important)**\n\nThe spec describes partition creation failures but doesn't specify the audit logger's behavior when inserts fail (missing partition, disk full, connection error). Does Evaluate() fail or does audit fail silently?\n\n**Location:** Main spec, Audit Log Retention (~line 1791)\n\n**Acceptance Criteria:**\n- Spec states: audit logging is best-effort, MUST NOT propagate errors to caller\n- Evaluate() decision is returned successfully regardless of audit insert outcome\n- Audit failures logged at ERROR level\n- Counter metric abac_audit_failures_total{reason} SHOULD be incremented\n- Consistent with S2 decision: async audit writes via buffered channel","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T14:05:07Z","created_by":"seanb4t","updated_at":"2026-02-06T14:25:48Z","closed_at":"2026-02-06T14:25:48Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-qt1g","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qt1g","depends_on_id":"holomush-jfim","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-qve","title":"Epic 8: Web Client","description":"SvelteKit PWA with terminal, offline support, and portal features.\n\n**Goal:** Modern web client with offline-first design.\n\n**Offline Behavior:**\n- Online: Real-time WebSocket events\n- Offline: Commands queued, cached content available\n- Reconnect: Queue flushed, missed events replayed\n\n**Phases:**\n- 8.1: Project scaffold\n- 8.2: WebSocket transport\n- 8.3: Terminal UI\n- 8.4: Auth flows\n- 8.5: Offline support\n- 8.6: Portal: Wiki\n- 8.7: Portal: Characters\n- 8.8: Portal: Admin\n\n**Acceptance Criteria:**\n- [ ] SvelteKit + PWA setup works\n- [ ] WebSocket connects and receives events\n- [ ] Terminal with input, scrollback, ANSI rendering\n- [ ] Login and character select flows work\n- [ ] Command queue, event cache, reconnect sync work\n- [ ] Wiki/help pages available\n- [ ] Public character profiles/sheets work\n- [ ] Admin stats and player management work","status":"open","priority":2,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:27:44Z","created_by":"seanb4t","updated_at":"2026-01-19T01:27:44Z","dependencies":[{"issue_id":"holomush-qve","depends_on_id":"holomush-5k1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-qve.1","title":"[E8] Design: Web Client Architecture","description":"Design the architecture for the HoloMUSH web client (SvelteKit PWA).\n\n## Scope\n- SvelteKit project structure and routing\n- WebSocket transport layer design\n- State management approach (stores, event sourcing)\n- Terminal emulation strategy (ANSI rendering, input handling)\n- PWA configuration (service worker, offline support)\n- Portal features architecture (wiki, characters, admin)\n\n## Acceptance Criteria\n- [ ] Document component hierarchy and data flow\n- [ ] Define WebSocket message protocol\n- [ ] Specify state management patterns\n- [ ] Design terminal rendering approach\n- [ ] Plan PWA caching strategy\n- [ ] Define auth flow (login, character select)\n- [ ] Outline portal page structures\n- [ ] Review with stakeholders","status":"open","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:32:14Z","created_by":"seanb4t","updated_at":"2026-01-19T01:32:14Z","dependencies":[{"issue_id":"holomush-qve.1","depends_on_id":"holomush-qve","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-qve.10","title":"[E8.8] Portal: Admin - Server stats, player management","description":"Build the admin portal section.\n\n## Scope\n- Server statistics dashboard\n- Player management (list, search, actions)\n- Character management\n- Ban/mute management\n- Audit log viewer\n- System configuration UI\n- Plugin management interface\n\n## Acceptance Criteria\n- [ ] Dashboard with server stats (players, uptime, etc.)\n- [ ] Real-time connection count\n- [ ] Player list with search/filter\n- [ ] Player detail view with history\n- [ ] Ban/mute/warn actions\n- [ ] Character list with search\n- [ ] Character edit/delete for admins\n- [ ] Audit log with filters\n- [ ] System config editor\n- [ ] Plugin enable/disable UI\n- [ ] Role-based access to admin sections\n- [ ] Mobile-friendly admin layout\n- [ ] Unit tests for admin components\n- [ ] E2E tests for admin actions","status":"open","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:33:14Z","created_by":"seanb4t","updated_at":"2026-01-19T01:33:14Z","dependencies":[{"issue_id":"holomush-qve.10","depends_on_id":"holomush-qve","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qve.10","depends_on_id":"holomush-qve.9","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-qve.2","title":"[E8] Implementation Plan: Web Client","description":"Create detailed implementation plan for Epic 8 Web Client.\n\n## Scope\n- Break down phases into concrete tasks\n- Identify dependencies between phases\n- Estimate effort for each phase\n- Define testing strategy for each component\n- Plan integration points with Go backend\n\n## Acceptance Criteria\n- [ ] Detailed task breakdown for all 8 phases\n- [ ] Effort estimates per phase\n- [ ] Testing approach defined (unit, integration, e2e)\n- [ ] Backend integration requirements documented\n- [ ] Risk assessment and mitigation strategies\n- [ ] Review and approval","status":"open","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:32:20Z","created_by":"seanb4t","updated_at":"2026-01-19T01:32:20Z","dependencies":[{"issue_id":"holomush-qve.2","depends_on_id":"holomush-qve","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qve.2","depends_on_id":"holomush-qve.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-qve.3","title":"[E8.1] Project scaffold - SvelteKit + PWA setup","description":"Set up the foundational SvelteKit project with PWA capabilities.\n\n## Scope\n- Initialize SvelteKit project with TypeScript\n- Configure Vite for development and production builds\n- Set up PWA manifest and service worker\n- Configure TailwindCSS for styling\n- Set up ESLint, Prettier, and testing framework\n- Create base layout and routing structure\n\n## Acceptance Criteria\n- [ ] SvelteKit project initialized with TypeScript\n- [ ] PWA manifest configured with app metadata\n- [ ] Service worker registered (basic caching)\n- [ ] TailwindCSS integrated and configured\n- [ ] ESLint + Prettier configured\n- [ ] Vitest or Playwright configured for testing\n- [ ] Base layout with header/footer\n- [ ] Route structure for terminal and portal sections\n- [ ] Development server runs successfully\n- [ ] Production build generates valid PWA","status":"open","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:32:26Z","created_by":"seanb4t","updated_at":"2026-01-19T01:32:26Z","dependencies":[{"issue_id":"holomush-qve.3","depends_on_id":"holomush-qve","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qve.3","depends_on_id":"holomush-qve.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qve.3","depends_on_id":"holomush-qve.2","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-qve.4","title":"[E8.2] WebSocket transport - Connect to server, receive events","description":"Implement WebSocket transport layer for server communication.\n\n## Scope\n- WebSocket connection management (connect, reconnect, heartbeat)\n- Message serialization/deserialization (JSON or protobuf)\n- Event stream handling from server\n- Command sending to server\n- Connection state management (connected, disconnected, reconnecting)\n- Error handling and logging\n\n## Acceptance Criteria\n- [ ] WebSocket client connects to HoloMUSH server\n- [ ] Automatic reconnection with exponential backoff\n- [ ] Heartbeat/ping-pong to detect dead connections\n- [ ] Events received and parsed correctly\n- [ ] Commands sent to server successfully\n- [ ] Connection state exposed via Svelte store\n- [ ] Error handling with user-friendly messages\n- [ ] Unit tests for transport layer\n- [ ] Integration test with running server","status":"open","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:32:32Z","created_by":"seanb4t","updated_at":"2026-01-19T01:32:32Z","dependencies":[{"issue_id":"holomush-qve.4","depends_on_id":"holomush-qve","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qve.4","depends_on_id":"holomush-qve.3","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-qve.5","title":"[E8.3] Terminal UI - Input, scrollback, ANSI rendering","description":"Build the terminal interface for MUSH gameplay.\n\n## Scope\n- Terminal display component with scrollback buffer\n- ANSI escape code rendering (colors, styles)\n- Command input with history (up/down arrows)\n- Auto-scroll with pause-on-scroll-up\n- Copy/paste support\n- Mobile-friendly input handling\n- Keyboard shortcuts\n\n## Acceptance Criteria\n- [ ] Terminal displays server output correctly\n- [ ] ANSI colors rendered (16 basic + 256 extended)\n- [ ] ANSI styles rendered (bold, italic, underline)\n- [ ] Scrollback buffer with configurable size\n- [ ] Auto-scroll when at bottom, pause when scrolled up\n- [ ] Command input with line editing\n- [ ] Command history (up/down arrows)\n- [ ] Copy text from terminal works\n- [ ] Paste into input works\n- [ ] Mobile keyboard support\n- [ ] Unit tests for ANSI parser\n- [ ] Visual regression tests for terminal","status":"open","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:32:41Z","created_by":"seanb4t","updated_at":"2026-01-19T01:32:41Z","dependencies":[{"issue_id":"holomush-qve.5","depends_on_id":"holomush-qve","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qve.5","depends_on_id":"holomush-qve.4","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-qve.6","title":"[E8.4] Auth flows - Login, character select","description":"Implement authentication and character selection flows.\n\n## Scope\n- Login page with username/password\n- Account creation flow\n- Character selection screen\n- Character creation flow\n- Session management (tokens, refresh)\n- Logout functionality\n- Password reset flow\n\n## Acceptance Criteria\n- [ ] Login form with validation\n- [ ] Account creation with email verification\n- [ ] Character list displayed after login\n- [ ] Character selection works\n- [ ] New character creation flow\n- [ ] JWT/session token stored securely\n- [ ] Token refresh before expiry\n- [ ] Logout clears session\n- [ ] Password reset via email\n- [ ] Error handling for auth failures\n- [ ] Remember me functionality\n- [ ] Unit tests for auth logic\n- [ ] E2E tests for auth flows","status":"open","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:32:47Z","created_by":"seanb4t","updated_at":"2026-01-19T01:32:47Z","dependencies":[{"issue_id":"holomush-qve.6","depends_on_id":"holomush-qve","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qve.6","depends_on_id":"holomush-qve.5","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-qve.7","title":"[E8.5] Offline support - Command queue, event cache, reconnect sync","description":"Implement offline-first PWA capabilities.\n\n## Scope\n- Command queue for offline input\n- Event cache in IndexedDB\n- Reconnection sync (replay missed events)\n- Optimistic UI updates\n- Conflict resolution strategy\n- Background sync when online\n- Cache management (size limits, eviction)\n\n## Acceptance Criteria\n- [ ] Commands queued when offline\n- [ ] Queued commands sent on reconnect\n- [ ] Events cached in IndexedDB\n- [ ] Event cache survives page reload\n- [ ] Reconnect replays missed events correctly\n- [ ] No duplicate events on reconnect\n- [ ] Optimistic updates for user commands\n- [ ] Cache size limits enforced\n- [ ] Old events evicted properly\n- [ ] Background sync works\n- [ ] Offline indicator in UI\n- [ ] Unit tests for queue logic\n- [ ] Integration tests for sync","status":"open","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:32:55Z","created_by":"seanb4t","updated_at":"2026-01-19T01:32:55Z","dependencies":[{"issue_id":"holomush-qve.7","depends_on_id":"holomush-qve","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qve.7","depends_on_id":"holomush-qve.6","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-qve.8","title":"[E8.6] Portal: Wiki - Help pages, lore, documentation","description":"Build the wiki/documentation portal section.\n\n## Scope\n- Wiki page rendering (Markdown support)\n- Help command documentation\n- Lore/world documentation\n- Search functionality\n- Navigation and categorization\n- Edit interface for staff\n- Version history\n\n## Acceptance Criteria\n- [ ] Wiki pages render from Markdown\n- [ ] Help topics indexed and searchable\n- [ ] Lore pages with rich formatting\n- [ ] Full-text search across wiki\n- [ ] Category/tag navigation\n- [ ] Breadcrumb navigation\n- [ ] Staff edit interface\n- [ ] Version history viewable\n- [ ] Diff between versions\n- [ ] Mobile-friendly wiki layout\n- [ ] SEO-friendly URLs\n- [ ] Unit tests for Markdown rendering\n- [ ] E2E tests for wiki navigation","status":"open","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:33:01Z","created_by":"seanb4t","updated_at":"2026-01-19T01:33:01Z","dependencies":[{"issue_id":"holomush-qve.8","depends_on_id":"holomush-qve","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qve.8","depends_on_id":"holomush-qve.7","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-qve.9","title":"[E8.7] Portal: Characters - Public profiles, character sheets","description":"Build the character portal section.\n\n## Scope\n- Public character profiles\n- Character sheet display\n- Avatar/image support\n- Character search and browsing\n- Relationship/connection display\n- Activity/RP log summary\n- Privacy controls\n\n## Acceptance Criteria\n- [ ] Character profile page with bio\n- [ ] Character sheet stats displayed\n- [ ] Avatar upload and display\n- [ ] Character search by name/attributes\n- [ ] Browse characters by faction/type\n- [ ] Relationship web visualization\n- [ ] Recent activity summary\n- [ ] Privacy settings per field\n- [ ] Owner can edit profile\n- [ ] Public vs private profile toggle\n- [ ] Mobile-friendly profile layout\n- [ ] Unit tests for profile components\n- [ ] E2E tests for profile editing","status":"open","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:33:08Z","created_by":"seanb4t","updated_at":"2026-01-19T01:33:08Z","dependencies":[{"issue_id":"holomush-qve.9","depends_on_id":"holomush-qve","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-qve.9","depends_on_id":"holomush-qve.8","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-r36c0","title":"wr9.133: WorldError should use user-facing message","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-05T03:01:06Z","created_by":"seanb4t","updated_at":"2026-02-05T03:02:12Z","closed_at":"2026-02-05T03:02:12Z","work_type":"mutex"}
{"id":"holomush-r88a","title":"Auth: Add test for password reset token collision","description":"Integration tests for PasswordResetRepository.Create() don't test duplicate token_hash insertion. Add test that verifies unique constraint violation is properly detected for duplicate token hashes.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T01:29:29Z","created_by":"seanb4t","updated_at":"2026-02-02T02:10:11Z","closed_at":"2026-02-02T02:10:11Z","dependencies":[{"issue_id":"holomush-r88a","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-rbpd","title":"ABAC Review C7: Add session integrity circuit breaker","description":"Issue: Systematic SESSION_CHARACTER_INTEGRITY errors could generate 7200 CRITICAL logs/minute. Decision: Per-session circuit breaker: 3 failures in 60s auto-invalidates session. Log once, suppress subsequent. AC: (1) Circuit breaker params documented (2) Prometheus counter metric (3) Auto-invalidation behavior specified. Ref: docs/specs/2026-02-05-full-abac-design.md:336-338.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:09Z","created_by":"seanb4t","updated_at":"2026-02-06T17:19:00Z","closed_at":"2026-02-06T17:19:00Z","dependencies":[{"issue_id":"holomush-rbpd","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-rgihb","title":"[E6.1] Command dispatcher with capability checks","description":"Implement dispatcher that parses input, checks capabilities, and executes handler.\n\nAcceptance Criteria:\n- Dispatcher has registry and access control dependencies\n- Dispatch() parses input, looks up command, checks capabilities, executes\n- Creates OTel trace span for each command\n- Returns appropriate errors for unknown command, permission denied\n- \u003e90% test coverage\n\nFiles: internal/command/dispatcher.go, internal/command/dispatcher_test.go\nDepends on: Tasks 1.1-1.5 (types, registry, validation, parser, errors)","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T18:07:29Z","created_by":"seanb4t","updated_at":"2026-02-02T19:02:24Z","closed_at":"2026-02-02T19:02:24Z","dependencies":[{"issue_id":"holomush-rgihb","depends_on_id":"holomush-3epww","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-rgihb","depends_on_id":"holomush-jho46","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-rgihb","depends_on_id":"holomush-sbne4","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-rgihb","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-rgihb","depends_on_id":"holomush-y31o8","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-rgihb","depends_on_id":"holomush-zd2hs","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-rhq","title":"Remove nonexistent EventTypePage from architecture doc","description":"## Problem\narchitecture-design.md:99 lists EventTypePage constant that doesn't exist in internal/core/event.go.\n\n## Acceptance Criteria\n- [ ] Remove EventTypePage from documentation\n- [ ] Add validation test ensuring documented types match code\n- [ ] Test must pass\n- [ ] Independent code review before closing","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T16:10:01Z","created_by":"seanb4t","updated_at":"2026-01-18T16:31:33Z","closed_at":"2026-01-18T16:31:33Z","work_type":"mutex"}
{"id":"holomush-ro0d","title":"[C1] Switch per-provider timeout to fair-share algorithm","description":"PR #65 review finding (Architecture + Documentation). Main spec lines 1534-1538 describe equal-share timeout (total_budget/provider_count, unused time NOT redistributed) but operational limits table at line 1596 says fair-share (remaining_budget/remaining). These are fundamentally different algorithms. Decision: switch to fair-share everywhere. Acceptance Criteria: (1) Both spec locations describe identical fair-share algorithm (2) No remaining equal-share references in spec (3) Tradeoff analysis updated for fair-share. Dependencies: overlaps with C4 (performance section), related to I11 (circuit breakers).","status":"closed","priority":0,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T20:21:17Z","created_by":"seanb4t","updated_at":"2026-02-06T20:37:09Z","closed_at":"2026-02-06T20:37:09Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-ro0d","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-rsl","title":"Goreleaser + Docker Compose Integration","description":"Epic for completing goreleaser Taskfile integration and docker-compose local development.\n\n**Plan:** docs/plans/2026-01-17-goreleaser-docker-compose-plan.md\n**Design:** docs/plans/2026-01-17-goreleaser-docker-compose-design.md\n\n**Deliverables:**\n1. Taskfile tasks for goreleaser testing (release:check, release:snapshot)\n2. docker-compose.yaml for local development with PostgreSQL\n3. Code review approval\n4. Human review approval","status":"closed","priority":2,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T01:42:55Z","created_by":"seanb4t","updated_at":"2026-01-18T12:34:03Z","closed_at":"2026-01-18T12:34:03Z","work_type":"mutex"}
{"id":"holomush-rsl.1","title":"Human review: goreleaser + docker-compose","description":"Final human review of goreleaser Taskfile integration and docker-compose configuration.\n\n**Review Checklist:**\n- [ ] `task release:check` validates goreleaser config\n- [ ] `task release:snapshot` builds successfully\n- [ ] `docker compose config` parses correctly\n- [ ] docker-compose services start in correct order\n- [ ] TLS cert sharing works between core and gateway\n- [ ] All code review findings addressed\n\n**Blocked by:** 6me, hju (must complete first)","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T01:43:27Z","created_by":"seanb4t","updated_at":"2026-01-18T12:33:45Z","closed_at":"2026-01-18T12:33:45Z","dependencies":[{"issue_id":"holomush-rsl.1","depends_on_id":"holomush-6me","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-rsl.1","depends_on_id":"holomush-hju","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-rsl.1","depends_on_id":"holomush-rsl","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-s0u","title":"Reduce scan helper duplication in repositories","description":"LOW: Get() methods duplicate scanning logic from scanLocations/scanObjects. Extract singular scanLocation/scanObject helpers.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T00:26:12Z","created_by":"seanb4t","updated_at":"2026-01-24T01:10:05Z","closed_at":"2026-01-24T01:10:05Z","work_type":"mutex"}
{"id":"holomush-s0v2","title":"ABAC Review C2: Add cache staleness threshold for LISTEN/NOTIFY reconnection","description":"Issue: During LISTEN/NOTIFY reconnection (up to 30s), Evaluate() uses stale cache with no compensating controls. Decision: cache_staleness_threshold config (default 5s); exceed threshold triggers fail-closed for non-admin subjects. AC: (1) Threshold behavior documented (2) policy_cache_last_update Prometheus gauge (3) Alerting requirement documented. Ref: docs/specs/2026-02-05-full-abac-design.md:1359-1368, ADR 0016.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:09Z","created_by":"seanb4t","updated_at":"2026-02-06T17:19:00Z","closed_at":"2026-02-06T17:19:00Z","dependencies":[{"issue_id":"holomush-s0v2","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-s0v2","depends_on_id":"holomush-xd0q","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-s7zi","title":"Add integration tests for transactional cascade deletion","description":"Spec (05-storage-audit.md:146) requires integration tests for each entity deletion path verifying same-transaction behavior. Current coverage is unit/mocked only (service_test.go). Need DB-backed integration tests for DeleteLocation, DeleteObject, DeleteCharacter that verify parent+property deletion occurs atomically.","status":"open","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-12T01:53:25Z","created_by":"seanb4t","updated_at":"2026-02-12T01:53:25Z"}
{"id":"holomush-s8d","title":"Fix Down() method comment to match behavior","description":"## Problem\nComment incorrectly describes `Down()` behavior:\n\n```go\n// Down rolls back one migration.  // ← INCORRECT\nfunc (m *Migrator) Down() error {\n```\n\nThe comment says 'one migration' but `m.m.Down()` rolls back **all** migrations to version 0. Single rollback uses `Steps(-1)`.\n\n## Source\nPR Review: comment-analyzer agent\n\n## Locations\n- `internal/store/migrate.go:49` - code comment\n- `docs/plans/2026-01-24-database-migrations-design.md:109` - design doc\n\n## Acceptance Criteria\n- [ ] Update comment to: `// Down rolls back all migrations to version 0.`\n- [ ] Update design doc API description to match\n- [ ] Comment accurately describes actual behavior","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T04:13:50Z","created_by":"seanb4t","updated_at":"2026-01-25T13:33:33Z","closed_at":"2026-01-25T13:33:33Z","work_type":"mutex"}
{"id":"holomush-s9pb","title":"ABAC Review I9: Add WAL fallback for audit write failures","description":"Issue: Async audit writes are best-effort; channel saturation drops entries silently. Decision: On insert failure, write to WAL file for later replay. AC: (1) WAL path and format documented (2) Replay mechanism specified (3) Recovery procedure. Ref: docs/specs/2026-02-05-full-abac-design.md:1786-1800.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:11Z","created_by":"seanb4t","updated_at":"2026-02-06T17:26:00Z","closed_at":"2026-02-06T17:26:00Z","dependencies":[{"issue_id":"holomush-s9pb","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-sbne4","title":"[E6.1] Command parser implementation","description":"Implement parser that splits input into command name and arguments.\n\nAcceptance Criteria:\n- Parse() returns ParsedCommand with Name, Args, Raw\n- Handles leading/trailing whitespace\n- Preserves internal argument whitespace\n- Returns error for empty input\n- \u003e90% test coverage with table-driven tests\n\nFiles: internal/command/parser.go, internal/command/parser_test.go","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T18:07:26Z","created_by":"seanb4t","updated_at":"2026-02-02T18:51:34Z","closed_at":"2026-02-02T18:51:34Z","dependencies":[{"issue_id":"holomush-sbne4","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-sew8","title":"Consolidate CLI output error suppression pattern","description":"## Problem\nThe `//nolint:errcheck // CLI output errors are intentionally ignored - no recovery possible` pattern repeats 7 times in `cmd/holomush/migrate.go`.\n\n## Current State\nEach function has:\n```go\n//nolint:errcheck // CLI output errors are intentionally ignored - no recovery possible\nfunc runMigrateUpDryRun(out io.Writer, migrator migrator) error {\n```\n\n## Acceptance Criteria\n- [ ] Add a single package-level comment explaining the pattern\n- [ ] Simplify each individual nolint to just `//nolint:errcheck // CLI output`\n\n## Suggested Package-Level Comment\n```go\n// CLI output functions below use //nolint:errcheck because stdout/stderr\n// write errors cannot be meaningfully recovered - the user won't see the error message anyway.\n```\n\n## Files to Modify\n- `cmd/holomush/migrate.go`","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T21:20:34Z","created_by":"seanb4t","updated_at":"2026-01-25T21:33:10Z","closed_at":"2026-01-25T21:33:10Z","work_type":"mutex"}
{"id":"holomush-sg7","title":"Database Migrations System","description":"Implement golang-migrate based migration system per docs/plans/2026-01-24-database-migrations-design.md","status":"closed","priority":1,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T03:31:56Z","created_by":"seanb4t","updated_at":"2026-01-25T04:08:12Z","closed_at":"2026-01-25T04:08:12Z","work_type":"mutex"}
{"id":"holomush-sg7.1","title":"Add golang-migrate dependency","description":"Add golang-migrate/migrate as a Go dependency. This is the foundation for the new migration system.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T03:35:35Z","created_by":"seanb4t","updated_at":"2026-01-25T03:49:56Z","closed_at":"2026-01-25T03:49:56Z","dependencies":[{"issue_id":"holomush-sg7.1","depends_on_id":"holomush-sg7","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-sg7.10","title":"Update CLI migrate command for golang-migrate","description":"Modify cmd/holomush/migrate.go to use new Migrator type. Add subcommands: up, down, version, force, create.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T03:35:38Z","created_by":"seanb4t","updated_at":"2026-01-25T03:59:04Z","closed_at":"2026-01-25T03:59:04Z","dependencies":[{"issue_id":"holomush-sg7.10","depends_on_id":"holomush-sg7","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-sg7.10","depends_on_id":"holomush-sg7.9","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-sg7.11","title":"Add Taskfile migration tasks","description":"Add db:migrate:up, db:migrate:down, db:migrate:version, db:migrate:create tasks to Taskfile.yml.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T03:35:38Z","created_by":"seanb4t","updated_at":"2026-01-25T04:00:53Z","closed_at":"2026-01-25T04:00:53Z","dependencies":[{"issue_id":"holomush-sg7.11","depends_on_id":"holomush-sg7","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-sg7.11","depends_on_id":"holomush-sg7.10","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-sg7.12","title":"Remove old migration code","description":"Delete internal/store/migrations.go and internal/store/migrations_test.go. Remove embed directive for old SQL files.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T03:35:38Z","created_by":"seanb4t","updated_at":"2026-01-25T04:06:04Z","closed_at":"2026-01-25T04:06:04Z","dependencies":[{"issue_id":"holomush-sg7.12","depends_on_id":"holomush-sg7","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-sg7.12","depends_on_id":"holomush-sg7.9","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-sg7.13","title":"Delete old migration files","description":"Remove internal/store/sql/migrations/*.sql after converting to golang-migrate format.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T03:35:39Z","created_by":"seanb4t","updated_at":"2026-01-25T04:06:04Z","closed_at":"2026-01-25T04:06:04Z","dependencies":[{"issue_id":"holomush-sg7.13","depends_on_id":"holomush-sg7","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-sg7.13","depends_on_id":"holomush-sg7.12","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-sg7.14","title":"Add bootstrap script for new deployments","description":"Create scripts/bootstrap-db.sh to initialize a fresh database with all migrations.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T03:35:39Z","created_by":"seanb4t","updated_at":"2026-01-25T04:07:45Z","closed_at":"2026-01-25T04:07:45Z","dependencies":[{"issue_id":"holomush-sg7.14","depends_on_id":"holomush-sg7","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-sg7.15","title":"Integration test for migration system","description":"Add test/integration/migrations/ with tests for up/down migrations using testcontainers.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T03:35:39Z","created_by":"seanb4t","updated_at":"2026-01-25T04:07:45Z","closed_at":"2026-01-25T04:07:45Z","dependencies":[{"issue_id":"holomush-sg7.15","depends_on_id":"holomush-sg7","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-sg7.15","depends_on_id":"holomush-sg7.9","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-sg7.16","title":"Update documentation for new migration system","description":"Update site/docs/contributors/ with new migration workflow. Document how to create and run migrations.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T03:35:40Z","created_by":"seanb4t","updated_at":"2026-01-25T04:07:45Z","closed_at":"2026-01-25T04:07:45Z","dependencies":[{"issue_id":"holomush-sg7.16","depends_on_id":"holomush-sg7","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-sg7.17","title":"Final cleanup and PR for migration system","description":"Final review, cleanup, and create PR for the complete migration system overhaul.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T03:35:40Z","created_by":"seanb4t","updated_at":"2026-01-25T04:08:12Z","closed_at":"2026-01-25T04:08:12Z","dependencies":[{"issue_id":"holomush-sg7.17","depends_on_id":"holomush-sg7","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-sg7.17","depends_on_id":"holomush-sg7.10","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-sg7.17","depends_on_id":"holomush-sg7.11","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-sg7.17","depends_on_id":"holomush-sg7.13","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-sg7.17","depends_on_id":"holomush-sg7.14","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-sg7.17","depends_on_id":"holomush-sg7.15","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-sg7.17","depends_on_id":"holomush-sg7.16","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-sg7.2","title":"Convert migration 001 to golang-migrate format","description":"Convert 001_create_events_table.sql to golang-migrate format with separate up/down files.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T03:35:35Z","created_by":"seanb4t","updated_at":"2026-01-25T03:49:56Z","closed_at":"2026-01-25T03:49:56Z","dependencies":[{"issue_id":"holomush-sg7.2","depends_on_id":"holomush-sg7","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-sg7.2","depends_on_id":"holomush-sg7.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-sg7.3","title":"Convert migration 002 to golang-migrate format","description":"Convert 002_create_abac_tables.sql to golang-migrate format with separate up/down files.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T03:35:35Z","created_by":"seanb4t","updated_at":"2026-01-25T03:49:56Z","closed_at":"2026-01-25T03:49:56Z","dependencies":[{"issue_id":"holomush-sg7.3","depends_on_id":"holomush-sg7","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-sg7.3","depends_on_id":"holomush-sg7.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-sg7.4","title":"Convert migration 003 to golang-migrate format","description":"Convert 003_create_sessions_table.sql to golang-migrate format with separate up/down files.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T03:35:36Z","created_by":"seanb4t","updated_at":"2026-01-25T03:49:56Z","closed_at":"2026-01-25T03:49:56Z","dependencies":[{"issue_id":"holomush-sg7.4","depends_on_id":"holomush-sg7","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-sg7.4","depends_on_id":"holomush-sg7.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-sg7.5","title":"Convert migration 004 to golang-migrate format","description":"Convert 004_create_tls_certificates_table.sql to golang-migrate format with separate up/down files.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T03:35:36Z","created_by":"seanb4t","updated_at":"2026-01-25T03:49:56Z","closed_at":"2026-01-25T03:49:56Z","dependencies":[{"issue_id":"holomush-sg7.5","depends_on_id":"holomush-sg7","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-sg7.5","depends_on_id":"holomush-sg7.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-sg7.6","title":"Convert migration 005 to golang-migrate format","description":"Convert 005_create_accounts_table.sql to golang-migrate format with separate up/down files.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T03:35:36Z","created_by":"seanb4t","updated_at":"2026-01-25T03:49:56Z","closed_at":"2026-01-25T03:49:56Z","dependencies":[{"issue_id":"holomush-sg7.6","depends_on_id":"holomush-sg7","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-sg7.6","depends_on_id":"holomush-sg7.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-sg7.7","title":"Convert migration 006 to golang-migrate format","description":"Convert 006_create_player_characters_table.sql to golang-migrate format with separate up/down files.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T03:35:37Z","created_by":"seanb4t","updated_at":"2026-01-25T03:49:56Z","closed_at":"2026-01-25T03:49:56Z","dependencies":[{"issue_id":"holomush-sg7.7","depends_on_id":"holomush-sg7","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-sg7.7","depends_on_id":"holomush-sg7.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-sg7.8","title":"Convert migration 007 to golang-migrate format","description":"Convert 007_create_world_tables.sql to golang-migrate format with separate up/down files.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T03:35:37Z","created_by":"seanb4t","updated_at":"2026-01-25T03:49:56Z","closed_at":"2026-01-25T03:49:56Z","dependencies":[{"issue_id":"holomush-sg7.8","depends_on_id":"holomush-sg7","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-sg7.8","depends_on_id":"holomush-sg7.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-sg7.9","title":"Implement Migrator type with golang-migrate","description":"Create internal/store/migrations/migrator.go with Migrator struct that wraps golang-migrate. Include Up(), Down(), Version(), and Force() methods.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T03:35:37Z","created_by":"seanb4t","updated_at":"2026-01-25T03:51:50Z","closed_at":"2026-01-25T03:51:50Z","dependencies":[{"issue_id":"holomush-sg7.9","depends_on_id":"holomush-sg7","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-sg7.9","depends_on_id":"holomush-sg7.2","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-sg7.9","depends_on_id":"holomush-sg7.3","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-sg7.9","depends_on_id":"holomush-sg7.4","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-sg7.9","depends_on_id":"holomush-sg7.5","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-sg7.9","depends_on_id":"holomush-sg7.6","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-sg7.9","depends_on_id":"holomush-sg7.7","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-sg7.9","depends_on_id":"holomush-sg7.8","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-shg","title":"Test dirty state recovery workflow in Force()","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T16:40:08Z","created_by":"seanb4t","updated_at":"2026-01-25T16:53:25Z","closed_at":"2026-01-25T16:53:25Z","work_type":"mutex"}
{"id":"holomush-sled","title":"Fix source cleanup on NewMigrator failure","description":"## Problem\n\nWhen `migrate.NewWithSourceInstance` fails in `NewMigrator()`, the `source` created by `iofs.New` is never closed.\n\n**File:** `internal/store/migrate.go:54-71`\n\n## Root Cause\n\nThe error path after source creation doesn't clean up the source:\n\n```go\nsource, err := iofs.New(migrationsFS, \"migrations\")\nif err \\!= nil {\n    return nil, oops.Code(\"MIGRATION_SOURCE_FAILED\").Wrap(err)\n}\n\nm, err := migrate.NewWithSourceInstance(\"iofs\", source, migrateURL)\nif err \\!= nil {\n    // BUG: source is not closed here\n    return nil, oops.Code(\"MIGRATION_INIT_FAILED\").Wrap(err)\n}\n```\n\n## Acceptance Criteria\n\n- [ ] Add `source.Close()` before returning error when `migrate.NewWithSourceInstance` fails\n- [ ] Add unit test verifying source cleanup on init failure\n- [ ] All existing tests pass","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T19:00:20Z","created_by":"seanb4t","updated_at":"2026-01-25T19:21:02Z","closed_at":"2026-01-25T19:21:02Z","work_type":"mutex"}
{"id":"holomush-slq0","title":"[E4-Post] Add error code to move event emission wrapper","description":"**Source:** PR review - error handling audit\n\n**Problem:**\nWhen `MoveObject` and `MoveCharacter` wrap the event emission error at `internal/world/service.go:437-439` and `service.go:608-610`, they add context (move_succeeded=true) but do NOT preserve or add a top-level oops error code.\n\n```go\nreturn oops.With(\"object_id\", id.String()).\n    With(\"move_succeeded\", true).\n    Wrapf(err, \"move completed but event emission failed\")\n    // Missing: .Code(\"OBJECT_MOVE_EVENT_FAILED\")\n```\n\n**Impact:**\n- Error code extraction at API boundaries may fail to find a code\n- Logging/metrics systems may not categorize this error correctly\n- Plugin consumers expecting error codes get unexpected behavior\n\n**Acceptance Criteria:**\n- [ ] MoveObject wrapper includes `.Code(\"OBJECT_MOVE_EVENT_FAILED\")`\n- [ ] MoveCharacter wrapper includes `.Code(\"CHARACTER_MOVE_EVENT_FAILED\")`\n- [ ] Tests verify error codes are present on event emission failures\n- [ ] Error codes documented in service method godocs","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T21:44:13Z","created_by":"seanb4t","updated_at":"2026-01-25T22:08:43Z","closed_at":"2026-01-25T22:08:43Z","work_type":"mutex"}
{"id":"holomush-smv","title":"Epic 14: Database Migrations Polish","description":"Address code review findings from PR #43 (feat/migrations) before merge.\n\n## Context\nPR #43 implements golang-migrate for database schema management. Code review identified issues that should be addressed:\n\n- 1 Critical issue (error handling)\n- 6 Important issues (error handling, testing gaps)\n- 3 Documentation issues\n- 6 Suggestions (polish)\n\n## Acceptance Criteria\n- All critical issues resolved\n- All important issues resolved or documented as won't-fix\n- Documentation accurate and complete\n- Tests pass with adequate coverage\n\n## Related\n- PR: https://github.com/holomush/holomush/pull/43\n- Design: docs/plans/2026-01-24-database-migrations-design.md\n- Implementation: docs/plans/2026-01-24-database-migrations-implementation.md","status":"closed","priority":1,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T16:39:10Z","created_by":"seanb4t","updated_at":"2026-01-25T17:36:19Z","closed_at":"2026-01-25T17:36:19Z","dependencies":[{"issue_id":"holomush-smv","depends_on_id":"holomush-1g8","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-smv","depends_on_id":"holomush-2uu","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-smv","depends_on_id":"holomush-7cb","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-smv","depends_on_id":"holomush-b1t","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-smv","depends_on_id":"holomush-jze","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-smv","depends_on_id":"holomush-lj1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-smv","depends_on_id":"holomush-shg","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-smv","depends_on_id":"holomush-smv.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-smv","depends_on_id":"holomush-smv.2","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-smv","depends_on_id":"holomush-smv.3","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-smv","depends_on_id":"holomush-smv.5","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-smv","depends_on_id":"holomush-smv.6","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-smv","depends_on_id":"holomush-smv.7","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-smv","depends_on_id":"holomush-uzc","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-smv","depends_on_id":"holomush-yc2","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-smv.1","title":"Log connection close errors for diagnostics","description":"Connection close errors in internal/store/postgres.go:241, 251 use //nolint:errcheck without logging. If a close operation fails, there's no diagnostic information available for debugging potential connection leaks.\n\nAdd debug-level logging for close errors to aid troubleshooting without polluting production logs.","acceptance_criteria":"- Debug logging added for connection close errors in Close() and Stop() methods\n- Logs include error details and context\n- Tests verify logging behavior\n- No production impact or noise in normal operation","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T16:40:13Z","created_by":"seanb4t","updated_at":"2026-01-25T17:12:23Z","closed_at":"2026-01-25T17:12:23Z","work_type":"mutex"}
{"id":"holomush-smv.2","title":"docs: clarify Down() method vs CLI down command behavior","description":"Design doc shows Down() as 'Rollback all to version 0' but CLI 'migrate down' default is 'Rollback one' (uses Steps(-1)). Add clarifying note to docs/plans/2026-01-24-database-migrations-design.md that Down() method differs from CLI 'down' command default behavior.\n\nAcceptance Criteria:\n- Clarifying note added to Down() method documentation\n- Note explains CLI uses Steps(-1) by default\n- Note clarifies Down() rolls back all pending migrations\n- Difference between method and CLI behavior is clear to readers","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T16:40:14Z","created_by":"seanb4t","updated_at":"2026-01-25T17:13:00Z","closed_at":"2026-01-25T17:13:00Z","work_type":"mutex"}
{"id":"holomush-smv.3","title":"Document error codes for operators in database.md","description":"Add 'Error Codes Reference' section to site/docs/operators/database.md documenting all migration error codes (MIGRATION_UP_FAILED, MIGRATION_VERSION_FAILED, etc.) with code name, meaning, common causes, and remediation steps to help operators diagnose issues.","acceptance_criteria":"- Error codes reference section added to database.md\n- All migration error codes documented (MIGRATION_UP_FAILED, MIGRATION_VERSION_FAILED, MIGRATION_DOWN_FAILED, MIGRATION_FORCE_FAILED, DB_CONNECTION_FAILED, etc.)\n- Each error includes: code name, meaning, common causes, and remediation steps\n- Documentation follows site/docs style guide\n- PR reviewed and merged","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T16:40:16Z","created_by":"seanb4t","updated_at":"2026-01-25T17:13:57Z","closed_at":"2026-01-25T17:13:57Z","work_type":"mutex"}
{"id":"holomush-smv.4","title":"fix(migrate): return error on version check failure","status":"closed","priority":0,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T16:40:16Z","created_by":"seanb4t","updated_at":"2026-01-25T16:47:28Z","closed_at":"2026-01-25T16:47:28Z","dependencies":[{"issue_id":"holomush-smv.4","depends_on_id":"holomush-smv","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-smv.5","title":"fix(migrate): use strict parsing for force version","description":"parseForceVersion in cmd/holomush/migrate.go uses fmt.Sscanf which stops parsing at the first non-digit character. This means invalid input like '3abc' silently parses as '3' instead of returning an error, masking user typos and potentially leading to unexpected behavior.\n\nSolution: Replace fmt.Sscanf with strconv.Atoi for strict integer parsing.\n\nAcceptance Criteria:\n- Replace fmt.Sscanf with strconv.Atoi in parseForceVersion\n- Verify error handling for invalid input (non-integer strings)\n- Add test cases covering edge cases (3abc, abc, empty string, etc.)\n- Verify existing tests still pass\n- Update parseForceVersion implementation in cmd/holomush/migrate.go:282-290","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T16:40:18Z","created_by":"seanb4t","updated_at":"2026-01-25T17:03:01Z","closed_at":"2026-01-25T17:03:01Z","work_type":"mutex"}
{"id":"holomush-smv.6","title":"parseForceVersion accepts negative versions without documentation","description":"The parseForceVersion function in cmd/holomush/migrate.go:284-290 accepts negative versions (e.g., -1) which has special meaning in golang-migrate (NilVersion) but is undocumented in CLI help. Users could accidentally clear version tracking.\n\nAcceptance Criteria:\n- Either reject negative versions with a clear, user-friendly error message\n- OR document the behavior in command help text explaining what negative versions do\n- Either solution must be validated with tests","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T16:40:20Z","created_by":"seanb4t","updated_at":"2026-01-25T17:08:33Z","closed_at":"2026-01-25T17:08:33Z","work_type":"mutex"}
{"id":"holomush-smv.7","title":"Add test for concurrent migration attempts","description":"Verify database migration locking behavior when two processes attempt migrations simultaneously\n\n## Problem\nNo test validates concurrent migration behavior. golang-migrate uses advisory locks but this is not tested, creating a critical gap: if lock handling breaks, both migrations could run (corruption), cause deadlock, or produce unhelpful errors.\n\n## Location\ninternal/store/migrate_integration_test.go\n\n## Solution\nAdd integration test that:\n1. Creates two migrators pointing to same database\n2. Starts Up() on both concurrently  \n3. Verifies one succeeds, one waits or gets lock error\n4. Verifies final database state is consistent\n\n## Acceptance Criteria\n- Test implementation uses testcontainers PostgreSQL\n- Test verifies lock semantics (one succeeds, one handles contention)\n- Test validates final schema state is consistent\n- Test passes consistently (no race conditions)\n- Coverage maintained above 80%","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T16:40:22Z","created_by":"seanb4t","updated_at":"2026-01-25T17:10:35Z","closed_at":"2026-01-25T17:10:35Z","work_type":"mutex"}
{"id":"holomush-snq5","title":"E5.7.1 Telnet connect observability gap","description":"auth_handler.go:119-130 swallows errors without logging when character listing fails after successful login.","notes":"Location: internal/telnet/auth_handler.go:119-130. When login succeeds but character listing fails, the error is swallowed without logging. Fix: Add h.logger.Warn with event=character_list_failed, player_id, session_id, operation, error fields.","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T02:40:14Z","created_by":"seanb4t","updated_at":"2026-02-02T02:50:02Z","closed_at":"2026-02-02T02:50:02Z","dependencies":[{"issue_id":"holomush-snq5","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-soor","title":"Add context.Canceled/DeadlineExceeded tests for dispatcher access evaluation","description":"PR #88 review noted the dispatcher cannot distinguish context timeouts from policy store failures. Add tests verifying behavior when context is canceled or deadline exceeded during access evaluation.","notes":"External ref: https://github.com/holomush/holomush/pull/88#issuecomment-3904727321","status":"open","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-15T23:10:33Z","created_by":"seanb4t","updated_at":"2026-02-15T23:19:29Z","labels":["deferred-work","review-finding"],"dependencies":[{"issue_id":"holomush-soor","depends_on_id":"holomush-5k1.8","type":"parent-child","created_at":"2026-02-15T18:19:20Z","created_by":"seanb4t","metadata":"{}"}]}
{"id":"holomush-srn","title":"Migrate plugin guide","description":"## Summary\nCreate a clean plugin guide focused on current plugin systems (Lua and binary), removing deprecated WASM/Extism content.\n\n## Files\n- Create: site/docs/developers/plugin-guide.md\n- Reference: docs/reference/plugin-authoring.md\n\n## Steps\n1. Read docs/reference/plugin-authoring.md for content\n2. Create site/docs/developers/plugin-guide.md - clean version focused on current systems\n3. Remove deprecated WASM/Extism content, focus on Lua and binary plugins\n4. Run: cd site \u0026\u0026 uv run zensical build - verify build succeeds\n5. Commit: docs(developers): add plugin guide\n\n## Acceptance Criteria\n- [ ] Plugin guide covers Lua plugin development\n- [ ] Plugin guide covers binary plugin development\n- [ ] No deprecated WASM/Extism content included\n- [ ] Code examples render with syntax highlighting\n- [ ] zensical build succeeds\n\n## Reference\nSee docs/plans/2026-01-23-zensical-docs-design.md","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T14:05:26Z","created_by":"seanb4t","updated_at":"2026-01-24T16:56:05Z","closed_at":"2026-01-24T16:56:05Z","dependencies":[{"issue_id":"holomush-srn","depends_on_id":"holomush-3h6","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-sxwb","title":"Add documentation for replay_policy column format","description":"## Problem\nThe `replay_policy` column in `internal/store/migrations/000003_world_model.up.sql:8` has no comment explaining its format or valid values.\n\n## Current State\n```sql\nALTER TABLE locations ADD COLUMN IF NOT EXISTS replay_policy TEXT NOT NULL DEFAULT 'last:0';\n```\n\n## Acceptance Criteria\n- [ ] Add SQL comment explaining the policy format\n- [ ] Document valid strategies and count values\n\n## Suggested Comment\n```sql\n-- replay_policy: Controls event replay behavior. Format: 'strategy:count' (e.g., 'last:10', 'none:0')\nALTER TABLE locations ADD COLUMN IF NOT EXISTS replay_policy TEXT NOT NULL DEFAULT 'last:0';\n```\n\n## Files to Modify\n- `internal/store/migrations/000003_world_model.up.sql`","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T21:20:33Z","created_by":"seanb4t","updated_at":"2026-01-25T21:34:05Z","closed_at":"2026-01-25T21:34:05Z","work_type":"mutex"}
{"id":"holomush-sy0d","title":"[E4-Post] Consider typed Event interface for EventEmitter","description":"**Source:** PR Review - Type Design Analyzer (Enforcement 2/5)\n\n**Problem:**\nEventEmitter uses raw `[]byte` payload with no type safety. Stream and eventType are strings with no validation. The EmitX helper functions partially solve this but callers can bypass them.\n\n**Current:**\n```go\nEmit(ctx context.Context, stream string, eventType string, payload []byte) error\n```\n\n**Proposed:**\n```go\ntype Event interface {\n    Stream() string\n    Type() string  \n    Payload() []byte\n}\nEmit(ctx context.Context, event Event) error\n```\n\n**Acceptance Criteria:**\n- [ ] Evaluate typed event approach vs current design\n- [ ] Document tradeoffs (type safety vs flexibility)\n- [ ] If adopting: create Event interface and implementations\n- [ ] If not adopting: document rationale in events.go godoc\n\n**Files:**\n- Modify: `internal/world/events.go`","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T19:50:29Z","created_by":"seanb4t","updated_at":"2026-01-25T21:32:48Z","closed_at":"2026-01-25T21:32:48Z","work_type":"mutex"}
{"id":"holomush-szolh","title":"[E6.fix] Add DEBUG logging when plugin handler is not defined","description":"## Problem\nWhen a plugin is loaded but defines neither `on_command` nor `on_event`, events are delivered \"successfully\" (no error) but nothing happens. This can mask plugin configuration errors (e.g., typo like `on_events` instead of `on_event`).\n\n**Location:** `internal/plugin/lua/host.go:150-152`\n\n## Acceptance Criteria\n- [ ] Add DEBUG-level logging when no handler is found\n- [ ] Include plugin name in log message\n- [ ] Consider adding manifest field to declare expected handler types (future enhancement)\n- [ ] Add test verifying debug log is emitted","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T03:05:17Z","created_by":"seanb4t","updated_at":"2026-02-04T06:00:48Z","closed_at":"2026-02-04T06:00:48Z","dependencies":[{"issue_id":"holomush-szolh","depends_on_id":"holomush-mi6er","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-szolh","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-t4e","title":"Add unit tests for getDatabaseURL()","description":"## Problem\nThe \\`getDatabaseURL()\\` function has no unit tests.\n\n## Source\nPR Review: pr-test-analyzer agent\n\n## Location\n`cmd/holomush/migrate.go:33-39`\n\n## Function\n```go\nfunc getDatabaseURL() (string, error) {\n    url := os.Getenv(\"DATABASE_URL\")\n    if url == \"\" {\n        return \"\", oops.Code(\"CONFIG_INVALID\").Errorf(\"DATABASE_URL environment variable is required\")\n    }\n    return url, nil\n}\n```\n\n## What it would catch\n- Typo in environment variable name\n- Changes to error handling\n- Error code changes\n\n## Suggested Tests\n```go\nfunc TestGetDatabaseURL(t *testing.T) {\n    t.Run(\"returns error when not set\", func(t *testing.T) {\n        t.Setenv(\"DATABASE_URL\", \"\")\n        _, err := getDatabaseURL()\n        require.Error(t, err)\n        errutil.AssertErrorCode(t, err, \"CONFIG_INVALID\")\n    })\n    t.Run(\"returns URL when set\", func(t *testing.T) {\n        t.Setenv(\"DATABASE_URL\", \"postgres://localhost/test\")\n        url, err := getDatabaseURL()\n        require.NoError(t, err)\n        assert.Equal(t, \"postgres://localhost/test\", url)\n    })\n}\n```\n\n## Acceptance Criteria\n- [ ] Add tests for getDatabaseURL()\n- [ ] Test both success and error cases\n- [ ] Verify error code is correct\n- [ ] Tests pass: `task test`","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T13:52:17Z","created_by":"seanb4t","updated_at":"2026-01-25T13:57:17Z","closed_at":"2026-01-25T13:57:17Z","work_type":"mutex"}
{"id":"holomush-t6tz","title":"Spec: Document system context bypass for bootstrap PolicyStore operations","description":"**Review Finding: I7 (Important)**\n\nThe spec says system subject bypasses evaluation so no bootstrap chicken-and-egg exists. But PolicyStore.Create() might itself have authorization checks. Need to specify that policy store CRUD methods check for system context and bypass authorization.\n\n**Location:** Main spec, Bootstrap Sequence (~line 2314)\n\n**Acceptance Criteria:**\n- Spec documents: bootstrap uses ctx := access.WithSystemSubject(context.Background())\n- PolicyStore CRUD methods MUST check for system context marker and bypass authorization\n- PolicyStore MUST NOT call Evaluate() when system context is present\n- This pattern is explicit, not implicit","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T14:05:11Z","created_by":"seanb4t","updated_at":"2026-02-06T14:25:48Z","closed_at":"2026-02-06T14:25:48Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-t6tz","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-t70y","title":"Extract shared access evaluation helper from checkAccess/dispatcher/hostfunc","description":"The comprehensive review for PR #88 identified ~60 lines of duplicated access evaluation pattern across world.Service.checkAccess, command.Dispatcher, and hostfunc.Commands. Each has slightly different error handling but shares the core pattern of: build request, evaluate, handle deny/error. Consider extracting a shared helper that handles the common flow while allowing per-site customization of error codes and metrics.","notes":"External ref: https://github.com/holomush/holomush/pull/88#issuecomment-3904727321","status":"open","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-15T23:10:32Z","created_by":"seanb4t","updated_at":"2026-02-15T23:19:29Z","labels":["deferred-work","review-finding"],"dependencies":[{"issue_id":"holomush-t70y","depends_on_id":"holomush-5k1.8","type":"parent-child","created_at":"2026-02-15T18:19:20Z","created_by":"seanb4t","metadata":"{}"}]}
{"id":"holomush-tawva","title":"[E6.0] ADR 0008: Command Conflict Resolution","description":"Document the decision for handling command name conflicts between plugins.\n\n**Acceptance Criteria:**\n- ADR explains context (plugins may register same command)\n- ADR documents decision: alphabetical load order, last wins with warning\n- ADR explains consequences (deterministic, warnings in logs)\n\n**Files:** docs/adr/0008-command-conflict-resolution.md","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T18:07:08Z","created_by":"seanb4t","updated_at":"2026-02-02T18:27:11Z","closed_at":"2026-02-02T18:27:11Z","dependencies":[{"issue_id":"holomush-tawva","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-tbh4","title":"Consolidate resource helper panic pattern","description":"PR #88 review suggestion S7: All 9 resource helpers in prefix.go:1650-1717 follow identical panic-if-empty pattern. Could extract to single formatResource helper.","status":"open","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-16T01:26:55Z","created_by":"seanb4t","updated_at":"2026-02-16T01:44:01Z","external_ref":"https://github.com/holomush/holomush/pull/88#issuecomment-RC_IC_kwDOQ7tZvM7o0CyA","labels":["deferred-work","review-finding"],"dependencies":[{"issue_id":"holomush-tbh4","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-15T21:19:56Z","created_by":"seanb4t","metadata":"{}"}]}
{"id":"holomush-tev","title":"Add test for exact pattern matching in ExtismSubscriber","description":"## Summary\nThe matchPattern function supports exact string matching, but tests only use glob patterns.\n\n## Location\n`internal/wasm/extism_subscriber.go:95-101`\n\n## Coverage Gap\nTests only use glob patterns like `location:*`. No test verifies:\n- Exact match: `\"location:room1\"` matches `\"location:room1\"`\n- Exact mismatch: `\"location:room1\"` does NOT match `\"location:room123\"`\n- Edge cases: empty pattern, single `*`\n\n## Acceptance Criteria\n- [ ] Add table-driven tests for matchPattern covering all cases\n- [ ] Tests demonstrate exact match vs glob behavior\n- [ ] All tests pass\n- [ ] Independent review by subagent confirms coverage","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T17:13:47Z","created_by":"seanb4t","updated_at":"2026-01-18T17:35:01Z","closed_at":"2026-01-18T17:35:01Z","dependencies":[{"issue_id":"holomush-tev","depends_on_id":"holomush-zhe","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-tiki","title":"ABAC Review I4: Clarify property parent_location is resolved dynamically","description":"Issue: Unclear if parent_location resolved at evaluation time or frozen at creation. Decision: Dynamic resolution from parent current state. AC: (1) Spec clarifies dynamic resolution (2) PropertyProvider behavior documented. Ref: docs/specs/2026-02-05-full-abac-design.md:1055-1062.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:10Z","created_by":"seanb4t","updated_at":"2026-02-06T17:26:00Z","closed_at":"2026-02-06T17:26:00Z","dependencies":[{"issue_id":"holomush-tiki","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-tiwyu","title":"Align command and alias name validation patterns","description":"## Context\n\nArchitecture review identified inconsistent validation patterns:\n\n- Command names: ^[a-zA-Z][a-zA-Z0-9_\\!?@#$%^+-]{0,19}$ (MUST start with letter)\n- Player/system aliases: ^[a-zA-Z0-9][a-zA-Z0-9_\\!?@#$%^+-]{0,19}$ (MAY start with digit)\n\nThis creates cognitive friction: user can create alias 1l → look but cannot create command 1look.\n\n## Options\n\nOption A (Recommended): Align both patterns to require letter start\n- Consistency across the system\n- Simpler mental model for users\n\nOption B: Document rationale for divergence\n- Numeric aliases enable keypad shortcuts (e.g., 1=north, 2=south)\n- Keep divergence but explain why\n\n## Acceptance Criteria\n\n- [ ] Decision documented in spec or ADR\n- [ ] If Option A: Update alias validation pattern in spec to match commands\n- [ ] If Option B: Add rationale section explaining why aliases allow leading digits\n- [ ] Validation regex constants defined in internal/command/validation.go\n- [ ] Unit tests cover edge cases (leading digits, special chars, max length)","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T17:28:24Z","created_by":"seanb4t","updated_at":"2026-02-02T17:34:13Z","closed_at":"2026-02-02T17:34:13Z","dependencies":[{"issue_id":"holomush-tiwyu","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-tkyu","title":"Lock ownership check contradicts location lock semantics","description":"## Issue\n\nThe Full ABAC design spec contains a contradiction between two MUST requirements for lock-generated policies:\n\n1. **Ownership check requirement** (Lock Compilation section): \"All lock-generated policies MUST include `resource.owner == principal.id` in the condition block\"\n2. **Location lock behavior** (Access Control Layers section): \"Builders can lock locations they have write access to (no ownership concept for locations — write access is sufficient)\"\n\nLocationProvider's attribute schema does NOT define an `owner` attribute. When a builder creates a location lock (e.g., `lock here/enter = level:\u003e=5`), the generated policy would include `resource.owner == principal.id`, but since `resource.owner` is missing, the fail-safe semantics (ADR 0010) cause this condition to evaluate to `false`. The lock policy would NEVER match, making location locks silently broken.\n\n## Resolution Options\n\n**Option A:** Make the ownership check conditional on resource type — omit it for locations (which use role-based write access instead of ownership).\n\n**Option B:** Add an `owner` attribute to LocationProvider, but this changes the world model semantics (locations currently have no ownership concept).\n\n**Option C:** Restrict lockable resources to objects and properties only (exclude locations from lock syntax).\n\n## Affected Spec Sections\n\n- Lock Compilation section (ownership check MUST requirement)\n- Lock Syntax section (location examples: `lock here/enter`)\n- LocationProvider attribute schema (no `owner` field)\n\n## Acceptance Criteria\n\n- [ ] Spec resolves the contradiction between ownership MUST and location lock semantics\n- [ ] Lock-generated policies for locations are either explicitly supported with correct conditions, or locations are excluded from lockable resources with documentation\n- [ ] LocationProvider attribute schema is updated if Option B is chosen","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T00:09:47Z","created_by":"seanb4t","updated_at":"2026-02-08T23:22:23Z","closed_at":"2026-02-08T23:22:23Z","labels":["review-finding"],"work_type":"mutex"}
{"id":"holomush-tmqf","title":"[E7] Integration equivalence test for StaticAccessControl and AccessPolicyEngine","description":"Add integration test verifying that StaticAccessControl and AccessPolicyEngine produce equivalent results across all migrated call sites. Per migration plan Task 28.5. Discovered from PR #88 review finding #11.","status":"open","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-16T00:47:13Z","created_by":"seanb4t","updated_at":"2026-02-16T00:47:13Z"}
{"id":"holomush-tojw","title":"Encapsulate Decision exported fields (Reason, PolicyID, Policies, Attributes)","description":"Review finding I10: Decision struct has split trust boundary — allowed/effect are protected but Reason, PolicyID, Policies, Attributes remain exported and mutable. Consider adding accessors or documenting as engine-only fields. From PR #88 9-agent review.","status":"open","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-16T03:21:01Z","created_by":"seanb4t","updated_at":"2026-02-16T03:23:41Z","external_ref":"https://github.com/holomush/holomush/pull/88","labels":["deferred-work","review-finding"],"dependencies":[{"issue_id":"holomush-tojw","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-15T22:23:41Z","created_by":"seanb4t","metadata":"{}"}]}
{"id":"holomush-txnz","title":"Fix misleading example in MigrationName comment","description":"## Problem\nThe comment at `internal/store/migrate.go:205` contains a specific example:\n```go\n// Example: MigrationName(3) returns \"000003_world_model\"\n```\n\nThis creates implicit coupling to specific migration file names that may not remain accurate if migration 3's name changes.\n\n## Acceptance Criteria\n- [ ] Remove the specific example OR\n- [ ] Use a more generic format description: `Example: MigrationName(1) returns \"000001_initial\" for the first migration`\n- [ ] OR state format as `NNNNNN_name` without concrete example\n\n## Files to Modify\n- `internal/store/migrate.go:205`","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T21:20:33Z","created_by":"seanb4t","updated_at":"2026-01-25T21:35:02Z","closed_at":"2026-01-25T21:35:02Z","work_type":"mutex"}
{"id":"holomush-u2da","title":"Spec: Classify session-character-integrity error as exceptional/bug condition","description":"**Review Finding: I1 (Important)**\n\nThe spec treats session-character-integrity errors as a normal error path, but also says sessions MUST be invalidated transactionally on character deletion. If the MUST is honored, this error should never occur except due to bugs or data corruption.\n\n**Decision:** Treat as exceptional/bug condition with CRITICAL-level alerting.\n\n**Location:** Main spec, Session Subject Resolution (~line 334)\n\n**Acceptance Criteria:**\n- Spec clarifies that session-character-integrity errors indicate a bug (failed cascade deletion)\n- Error logged at CRITICAL level, not just deny\n- Spec recommends alerting and investigation when this error occurs\n- Transactional MUST for session cleanup remains unchanged","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T14:04:39Z","created_by":"seanb4t","updated_at":"2026-02-06T14:25:48Z","closed_at":"2026-02-06T14:25:48Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-u2da","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-umat","title":"ABAC Review S3: Fix glossary seed policy circular reference","description":"Issue: Glossary seed policy entry says See Seed Policies instead of defining the term inline. AC: (1) Glossary entry expanded with complete definition. Ref: docs/specs/2026-02-05-full-abac-design.md:51.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:11Z","created_by":"seanb4t","updated_at":"2026-02-06T17:41:21Z","closed_at":"2026-02-06T17:41:21Z","dependencies":[{"issue_id":"holomush-umat","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-unis","title":"ABAC Review S4: Standardize resource pinning terminology","description":"Issue: Inconsistent terms: resource_exact vs resource pinning vs target-level pinning. AC: (1) Single term used consistently (2) JSON schema annotated. Ref: docs/specs/2026-02-05-full-abac-design.md:223, 804-810.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:11Z","created_by":"seanb4t","updated_at":"2026-02-06T17:41:21Z","closed_at":"2026-02-06T17:41:21Z","dependencies":[{"issue_id":"holomush-unis","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-unxp","title":"Strengthen Force() method warning with practical consequences","description":"File: internal/store/migrate.go:104-106\n\n## Current\nThe warning could be improved by explaining what 'corrupt database state tracking' means practically.\n\n## Problem\nWarning is vague about practical consequences.\n\n## Acceptance Criteria\n- Expand warning to explain practical consequences\n- Mention both 'too high' and 'too low' scenarios\n\n## Suggested Fix\nExpand warning to explain:\n- If version set too high: migrator skips needed migrations (potential data loss)\n- If version set too low: migrator re-runs already-applied migrations (potential duplicate data)","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T18:09:07Z","created_by":"seanb4t","updated_at":"2026-01-25T18:36:37Z","closed_at":"2026-01-25T18:36:37Z","work_type":"mutex"}
{"id":"holomush-ur6c","title":"DI wiring for PolicyCache, AttributeResolver, SessionResolver, AuditLogger","description":"Phase 7.6 migration wired AccessPolicyEngine into all call sites but deferred full DI wiring for PolicyCache, AttributeResolver, SessionResolver, and AuditLogger components. These are needed for the engine to use real attribute data and audit logging in production. Currently the engine uses in-memory cache and no audit logger. Tracked from PR #88 review finding #10.","notes":"External ref: https://github.com/holomush/holomush/pull/88#issuecomment-3905220710 (round 12 comprehensive review, finding #10)","status":"open","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-15T21:43:07Z","created_by":"seanb4t","updated_at":"2026-02-15T22:46:45Z","labels":["deferred-work","review-finding"],"dependencies":[{"issue_id":"holomush-ur6c","depends_on_id":"holomush-5k1.8","type":"parent-child","created_at":"2026-02-15T17:46:46Z","created_by":"seanb4t","metadata":"{}"}]}
{"id":"holomush-uux8e","title":"Add test for validatePropertyArgs rejecting mismatched entity type","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-05T02:05:33Z","created_by":"seanb4t","updated_at":"2026-02-05T02:07:08Z","closed_at":"2026-02-05T02:07:08Z","work_type":"mutex"}
{"id":"holomush-uyd","title":"Signed builds and SBOM","status":"closed","priority":2,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T21:32:15Z","created_by":"seanb4t","updated_at":"2026-01-19T21:35:31Z","closed_at":"2026-01-19T21:35:31Z","work_type":"mutex"}
{"id":"holomush-uyd.1","title":"Add SPDX license headers to all source files","description":"Add SPDX-License-Identifier and copyright headers to all .go files in cmd/, internal/, pkg/, and scripts/. Create LICENSE_HEADER template file.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T21:32:25Z","created_by":"seanb4t","updated_at":"2026-01-19T21:35:31Z","closed_at":"2026-01-19T21:35:31Z","dependencies":[{"issue_id":"holomush-uyd.1","depends_on_id":"holomush-uyd","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-uyd.2","title":"Add license header check to CI","description":"Add google/addlicense check to ci.yaml workflow. Add license:check and license:add tasks to Taskfile.yaml.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T21:32:26Z","created_by":"seanb4t","updated_at":"2026-01-19T21:35:31Z","closed_at":"2026-01-19T21:35:31Z","dependencies":[{"issue_id":"holomush-uyd.2","depends_on_id":"holomush-uyd","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-uyd.2","depends_on_id":"holomush-uyd.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-uyd.3","title":"Update GoReleaser for SBOM generation","description":"Add sboms section to .goreleaser.yaml to generate CycloneDX and SPDX SBOMs for binary archives and source.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T21:32:26Z","created_by":"seanb4t","updated_at":"2026-01-19T21:35:31Z","closed_at":"2026-01-19T21:35:31Z","dependencies":[{"issue_id":"holomush-uyd.3","depends_on_id":"holomush-uyd","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-uyd.4","title":"Update release workflow for signing and attestations","description":"Add Cosign signing for binaries and containers, SLSA provenance attestations via actions/attest-build-provenance, and SBOM attestations for containers.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T21:32:26Z","created_by":"seanb4t","updated_at":"2026-01-19T21:35:31Z","closed_at":"2026-01-19T21:35:31Z","dependencies":[{"issue_id":"holomush-uyd.4","depends_on_id":"holomush-uyd","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-uyd.5","title":"Add user verification documentation","description":"Create docs/reference/verifying-releases.md with instructions for verifying binary signatures, container signatures, and using SBOMs for vulnerability scanning.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T21:32:26Z","created_by":"seanb4t","updated_at":"2026-01-19T21:35:31Z","closed_at":"2026-01-19T21:35:31Z","dependencies":[{"issue_id":"holomush-uyd.5","depends_on_id":"holomush-uyd","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-uzc","title":"Add test for Force(-1) behavior to document NilVersion handling","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T16:40:21Z","created_by":"seanb4t","updated_at":"2026-01-25T17:20:23Z","closed_at":"2026-01-25T17:20:23Z","work_type":"mutex"}
{"id":"holomush-v0s","title":"Add goroutine lifecycle management to ExtismSubscriber","description":"## Summary\nExtismSubscriber spawns goroutines without lifecycle management, risking goroutine leaks on shutdown.\n\n## Problem\nHandleEvent spawns goroutines for each plugin but has no:\n- WaitGroup to track in-flight deliveries\n- Stop() method to wait for goroutines\n- Context propagation for cancellation\n\nCompare to wazero PluginSubscriber which has proper Start()/Stop() lifecycle.\n\n## Solution\nAdd lifecycle management:\n```go\ntype ExtismSubscriber struct {\n    // ... existing fields\n    wg     sync.WaitGroup\n    ctx    context.Context\n    cancel context.CancelFunc\n}\n\nfunc (s *ExtismSubscriber) Stop() {\n    s.cancel()\n    s.wg.Wait()\n}\n```\n\n## Files\n- Modify: internal/wasm/extism_subscriber.go\n- Modify: internal/wasm/extism_subscriber_test.go\n\n## Acceptance Criteria\n- [ ] ExtismSubscriber has Stop() method that waits for in-flight deliveries\n- [ ] Test: `TestExtismSubscriber_Stop_WaitsForInFlight` verifies clean shutdown\n- [ ] No goroutine leaks verified with `goleak` or similar","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T15:13:20Z","created_by":"seanb4t","updated_at":"2026-01-18T15:22:35Z","closed_at":"2026-01-18T15:22:35Z","work_type":"mutex"}
{"id":"holomush-v1r","title":"Make plugin delivery timeout configurable","description":"## Problem\nextism_subscriber.go:108 hardcodes a 5-second timeout for plugin calls. This may be too short for plugins performing complex operations (database queries, external API calls, AI inference).\n\n## Source\nPR Review Round 7 - code-reviewer agent (Confidence: 82)\n\n## Acceptance Criteria\n- [ ] Test proves issue exists (timeout is not configurable)\n- [ ] Add deliveryTimeout field to ExtismSubscriber struct\n- [ ] Add functional option for timeout configuration\n- [ ] Default to 5 seconds for backward compatibility\n- [ ] Update tests and documentation\n- [ ] Independent subagent review before closing","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T18:36:23Z","created_by":"seanb4t","updated_at":"2026-01-18T19:30:34Z","closed_at":"2026-01-18T19:30:34Z","work_type":"mutex"}
{"id":"holomush-v1sbe","title":"[E6.2] Move command handler","description":"Implement move command to navigate through exits.\n\n**Acceptance Criteria:**\n- Move parses direction from args\n- Looks up exit in current location\n- Moves character to destination\n- Emits movement event\n- Shows new room description\n- Returns error for invalid exit\n\n**Files:** internal/command/handlers/move.go, internal/command/handlers/move_test.go\n**Blocks:** holomush-wr9.5","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T18:08:36Z","created_by":"seanb4t","updated_at":"2026-02-02T20:41:16Z","closed_at":"2026-02-02T20:41:16Z","dependencies":[{"issue_id":"holomush-v1sbe","depends_on_id":"holomush-rgihb","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-v1sbe","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-v7jup","title":"Add command rate limiting specification","description":"## Context\n\nArchitecture review identified missing rate limiting specification for command execution:\n- No protection against command flooding (DoS)\n- No per-player, per-session, or per-capability limits defined\n- Security concern for production deployments\n\n## Scope\n\nDefine rate limiting strategy in the commands spec:\n\n1. Limiting Dimensions:\n   - Per-player (across all sessions)\n   - Per-session (single connection)\n   - Per-capability (e.g., admin commands stricter)\n\n2. Algorithm Options:\n   - Token bucket (burst-friendly)\n   - Sliding window (smoother)\n   - Leaky bucket (strict rate)\n\n3. Configuration:\n   - Default limits (e.g., 10 commands/second burst, 2/second sustained)\n   - Per-capability overrides\n   - Admin bypass capability\n\n4. Feedback:\n   - Error message: Too many commands. Please slow down.\n   - Retry-After header equivalent for programmatic clients\n\n## Acceptance Criteria\n\n- [ ] Rate limiting section added to commands spec\n- [ ] Algorithm choice documented with rationale\n- [ ] Default limits specified with configuration mechanism\n- [ ] Per-capability overrides supported\n- [ ] Admin bypass documented\n- [ ] Error handling for rate-limited commands specified\n- [ ] Metrics export: holomush.command.rate_limited counter","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T17:28:53Z","created_by":"seanb4t","updated_at":"2026-02-02T17:34:13Z","closed_at":"2026-02-02T17:34:13Z","dependencies":[{"issue_id":"holomush-v7jup","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-vatz","title":"Consider caching allMigrationVersions() result","description":"File: internal/store/migrate.go:121-145\n\nThe allMigrationVersions() function reads the embedded filesystem on every call. Since migrations are embedded and immutable, this could be computed once at package init time.\n\n## Current Behavior\nFunction reads embedded FS on every call to PendingMigrations() or AppliedMigrations().\n\n## Suggested Improvement\nImplement sync.Once-based caching:\n- Cache migration versions using sync.Once\n- Ensure thread-safety\n- Add benchmark test to measure improvement\n- Document caching behavior in function comment\n\n## Impact\n- Minor performance improvement for status/dry-run operations\n- Current overhead is minimal since function is only called for status operations\n\n## Acceptance Criteria\n- [ ] Cache migration versions using sync.Once\n- [ ] Ensure thread-safety\n- [ ] Add benchmark test to measure improvement\n- [ ] Document caching behavior in function comment","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T18:09:08Z","created_by":"seanb4t","updated_at":"2026-01-25T18:43:38Z","closed_at":"2026-01-25T18:43:38Z","work_type":"mutex"}
{"id":"holomush-vcd6","title":"Return copy from allMigrationVersions to prevent cache mutation","description":"## Problem\n\n`allMigrationVersions()` returns the cached slice directly, allowing callers to mutate it and corrupt the cache.\n\n**File:** `internal/store/migrate.go:152`\n\n## Risk\n\nA caller could do:\n```go\nversions, _ := allMigrationVersions()\nversions[0] = 999  // Corrupts cache\n```\n\n## Option A: Return Copy\n\n```go\nfunc allMigrationVersions() ([]uint, error) {\n    cachedVersionsOnce.Do(func() {\n        cachedVersions, cachedVersionsErr = loadMigrationVersions()\n    })\n    if cachedVersionsErr \\!= nil {\n        return nil, cachedVersionsErr\n    }\n    result := make([]uint, len(cachedVersions))\n    copy(result, cachedVersions)\n    return result, nil\n}\n```\n\n## Option B: Document Immutability\n\nAdd comment: \"The returned slice must not be modified.\"\n\n## Acceptance Criteria\n\n- [ ] Choose Option A (copy) or Option B (document)\n- [ ] If Option A: add test verifying mutations don't affect cache\n- [ ] If Option B: add doc comment warning callers","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T19:00:22Z","created_by":"seanb4t","updated_at":"2026-01-25T19:46:42Z","closed_at":"2026-01-25T19:46:42Z","work_type":"mutex"}
{"id":"holomush-vgv1q","title":"[E6.6] Command host functions for help plugin","description":"Add ListCommands and GetCommandHelp host functions for Lua.\n\n**Acceptance Criteria:**\n- ListCommands RPC returns available commands (filtered by capabilities)\n- GetCommandHelp RPC returns detailed help for a command\n- Proto definitions in hostfunc.proto\n- Go implementation in hostfunc package\n\n**Files:** api/proto/plugin/v1/hostfunc.proto (modify), internal/plugin/hostfunc/commands.go\n**Blocks:** holomush-wr9.9","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T18:08:43Z","created_by":"seanb4t","updated_at":"2026-02-03T16:25:20Z","closed_at":"2026-02-03T16:25:20Z","dependencies":[{"issue_id":"holomush-vgv1q","depends_on_id":"holomush-rgihb","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-vgv1q","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-vh1p","title":"TMP TEST DELETE","description":"tmp","status":"tombstone","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-11T21:07:46Z","created_by":"seanb4t","updated_at":"2026-02-11T21:07:46Z","work_type":"mutex"}
{"id":"holomush-voc","title":"Extract CTE recursion depth constant","description":"BACKLOG: Hardcoded 100 in recursive CTEs. Extract to named constant maxCTERecursionDepth for clarity.","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T00:26:13Z","created_by":"seanb4t","updated_at":"2026-01-24T01:48:01Z","closed_at":"2026-01-24T01:48:01Z","work_type":"mutex"}
{"id":"holomush-vok6","title":"Spec: Plugin attribute collision should reject plugin, not brick server","description":"**Review Finding: C1 (Critical)**\n\nWhen a plugin registers an attribute that collides with a core attribute (e.g., faction), the spec currently says 'MUST be a fatal startup error.' This means a single misconfigured plugin prevents the server from starting entirely.\n\n**Decision:** Reject the offending plugin's provider registration and continue startup without that plugin. Log at ERROR level with plugin ID and colliding attribute.\n\n**Location:** Main spec, AttributeBags merge semantics (~line 426)\n\n**Acceptance Criteria:**\n- Spec updated to replace fatal startup error with plugin rejection + continue\n- ERROR-level log message specified with plugin ID and colliding attribute name\n- Server remains operational with other plugins when one plugin has attribute collisions\n- Document that the disabled plugin's attributes are unavailable (fail-safe: missing attributes → false)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T14:04:10Z","created_by":"seanb4t","updated_at":"2026-02-06T14:20:52Z","closed_at":"2026-02-06T14:20:52Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-vok6","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-vq5","title":"Add validation for plugin-emitted stream names","description":"## Problem\nextism_subscriber.go:124-137 passes plugin-emitted events directly to the emitter without validation. A malicious or buggy plugin could:\n1. Emit events to arbitrary streams (potential privilege escalation)\n2. Emit with empty stream names\n3. Emit with malformed event types\n\n## Source\nPR Review Round 7 - code-reviewer agent (Confidence: 83)\n\n## Acceptance Criteria\n- [ ] Test proves vulnerability exists (emit to unauthorized stream succeeds)\n- [ ] Add stream validation before emit\n- [ ] Reject empty stream names\n- [ ] Log unauthorized emit attempts at WARN level\n- [ ] Test that validation works\n- [ ] Independent subagent review before closing","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T18:36:23Z","created_by":"seanb4t","updated_at":"2026-01-18T18:56:49Z","closed_at":"2026-01-18T18:56:49Z","work_type":"mutex"}
{"id":"holomush-vsdk","title":"Restricted visibility property seed policies missing from bootstrap set","description":"## Issue\n\nThe spec defines `restricted` visibility as a property visibility level that uses `visible_to` and `excluded_from` lists. Example policies for these lists exist in the Example Policies section:\n\n```text\n// Properties with visible_to lists: only listed characters can read\npermit(principal is character, action in [\"read\"], resource is property)\nwhen { resource has visible_to \u0026\u0026 principal.id in resource.visible_to };\n\n// Exclude specific characters from seeing a property\nforbid(principal is character, action in [\"read\"], resource is property)\nwhen { resource has excluded_from \u0026\u0026 principal.id in resource.excluded_from };\n```\n\nHowever, these are NOT included in the named seed policy set in the \"Seed Policies\" section. The Visibility Seed Policies section says for restricted: \"already defined in Example Policies section\" — but those examples lack `seed:` prefixed names and are not part of the bootstrap sequence.\n\nWithout named seed policies, the bootstrap process will not create these policies automatically, and restricted visibility will be non-functional at first startup.\n\n## Expected\n\nAdd named seed policies for restricted visibility:\n\n```text\n// seed:property-restricted-visible-to\npermit(principal is character, action in [\"read\"], resource is property)\nwhen { resource.visibility == \"restricted\" \u0026\u0026 resource has visible_to \u0026\u0026 principal.id in resource.visible_to };\n\n// seed:property-restricted-excluded\nforbid(principal is character, action in [\"read\"], resource is property)\nwhen { resource.visibility == \"restricted\" \u0026\u0026 resource has excluded_from \u0026\u0026 principal.id in resource.excluded_from };\n```\n\nNote: these also need a `resource.visibility == \"restricted\"` condition to scope them correctly — the example policies in the spec lack this scoping.\n\n## Acceptance Criteria\n\n- [ ] Seed policies for restricted visibility are named with `seed:` prefix\n- [ ] Policies include `resource.visibility == \"restricted\"` scoping condition\n- [ ] Policies are listed in the Seed Policies section for bootstrap\n- [ ] Both permit (visible_to) and forbid (excluded_from) are defined","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-07T00:10:06Z","created_by":"seanb4t","updated_at":"2026-02-08T23:22:23Z","closed_at":"2026-02-08T23:22:23Z","labels":["review-finding"],"work_type":"mutex"}
{"id":"holomush-vw13","title":"Specify LRU cache capacity for provider error rate limiter","description":"Provider error logging is rate-limited per (namespace, error_hash) tuple using an LRU cache, but the cache size is not specified. An unbounded cache could become a memory issue with many distinct error types.\n\n**Acceptance Criteria:**\n- [ ] LRU cache capacity specified (e.g., 100 entries per namespace or 1000 total)\n- [ ] Scope clarified as per-engine-instance (in-memory)\n\n**Files:** docs/specs/2026-02-05-full-abac-design.md","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T22:37:42Z","created_by":"seanb4t","updated_at":"2026-02-07T00:28:58Z","closed_at":"2026-02-07T00:28:58Z","labels":["review-finding"],"work_type":"mutex"}
{"id":"holomush-w4n","title":"Wire up 'holomush gateway' command to start telnet server","description":"The Phase 1.5 infrastructure was built but the CLI commands were left as stubs.\n\n**Current state:** `holomush gateway` prints 'not implemented yet'\n\n**Required:** Wire up the existing components:\n- Start gRPC client with TLS (internal/grpc)\n- Start telnet server (internal/telnet)\n- Start control socket (internal/control)\n- Load TLS certificates (internal/tls)\n- Handle graceful shutdown on SIGINT/SIGTERM\n- Auto-reconnect to core on disconnect\n\n**Acceptance criteria:**\n- `holomush gateway` starts and connects to core\n- Telnet server accepts connections\n- Control socket accepts /health and /stop requests\n- Graceful shutdown works\n- Tests cover the startup/shutdown sequence","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-17T22:23:26Z","created_by":"seanb4t","updated_at":"2026-01-17T22:40:07Z","closed_at":"2026-01-17T22:40:07Z","dependencies":[{"issue_id":"holomush-w4n","depends_on_id":"holomush-e55","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-w4n","depends_on_id":"holomush-m96","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wb1rr","title":"[E6.5] Wall command handler","description":"Implement wall command to broadcast to all players.\n\n**Acceptance Criteria:**\n- Requires admin.wall capability\n- Broadcasts message to all sessions\n- Prefixes with admin announcement format\n- Logs admin action\n\n**Files:** internal/command/handlers/wall.go, internal/command/handlers/wall_test.go\n**Blocks:** holomush-wr9.8","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T18:08:41Z","created_by":"seanb4t","updated_at":"2026-02-03T15:05:12Z","closed_at":"2026-02-03T15:05:12Z","dependencies":[{"issue_id":"holomush-wb1rr","depends_on_id":"holomush-rgihb","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wb1rr","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wd0yy","title":"[E6.0] ADR 0007: Command Security Model","description":"Document the decision to use capability-based fine-grained security for commands.\n\n**Acceptance Criteria:**\n- ADR explains context (commands need authorization)\n- ADR lists options (role-based vs capability-based)\n- ADR documents decision: capability-based with ABAC integration\n- ADR explains consequences (capabilities declared per command, default grants)\n\n**Files:** docs/adr/0007-command-security-model.md","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T18:07:07Z","created_by":"seanb4t","updated_at":"2026-02-02T18:24:31Z","closed_at":"2026-02-02T18:24:31Z","dependencies":[{"issue_id":"holomush-wd0yy","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wheb","title":"Spec: Tighten CI benchmark regression threshold","description":"**Review Finding: S4 (Suggestion)**\n\nThe spec defines p99 latency targets (\u003c5ms cold, \u003c3ms warm) but allows 20% regression before CI fails. A 20% regression on 5ms = 6ms, already exceeding the target.\n\n**Location:** Main spec, Performance Targets (~line 1350)\n\n**Acceptance Criteria:**\n- Consider tightening CI regression threshold from \u003e20% to \u003e10%\n- Or: document separate thresholds for CI (strict) vs staging/production alerts","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T14:05:43Z","created_by":"seanb4t","updated_at":"2026-02-06T14:34:19Z","closed_at":"2026-02-06T14:34:19Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-wheb","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wn9s","title":"Align Request Flow and Evaluation Algorithm step numbering","description":"Request Flow section lists 7 steps while Evaluation Algorithm section lists 6 steps with different numbering. Request Flow omits system bypass check; Algorithm omits session resolution as a numbered step. An implementer reading only one section builds an incomplete mental model.\n\n**Acceptance Criteria:**\n- [ ] Request Flow references Evaluation Algorithm as authoritative\n- [ ] System bypass check and session resolution appear in both sections\n- [ ] Step numbering is consistent or cross-referenced\n\n**Files:** docs/specs/2026-02-05-full-abac-design.md","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T22:37:14Z","created_by":"seanb4t","updated_at":"2026-02-06T23:45:45Z","closed_at":"2026-02-06T23:45:45Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-wn9s","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9","title":"Epic 6: Commands \u0026 Behaviors","description":"Core commands implemented, with some as Lua scripts to prove the plugin model.\n\n**Goal:** Full command system with Go core + Lua extensions.\n\n**Command Implementation Types:**\n- Go: look, move, quit, who, boot, shutdown, wall\n- Lua: say, pose, emit, dig, create, describe, link, help\n\n**Alias System:**\n- System level: All players, set by admin\n- Player level: Per-player, self-configured\n- Resolution: Exact match → Player alias → System alias\n\n**Phases:**\n- 6.1: Command parser\n- 6.1b: Alias system\n- 6.2: Core commands (Go)\n- 6.3: Communication (Lua)\n- 6.4: Building commands (Lua)\n- 6.5: Admin commands (Go)\n- 6.6: Help system (Lua)\n\n**Acceptance Criteria:**\n- [ ] Input → command + args parsing works\n- [ ] System + player-level aliases work\n- [ ] look, move, quit, who commands work\n- [ ] say, pose, emit Lua commands work\n- [ ] dig, create, describe, link Lua commands work\n- [ ] boot, shutdown, wall admin commands work\n- [ ] help with plugin-contributed entries works","status":"closed","priority":1,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:27:44Z","created_by":"seanb4t","updated_at":"2026-02-06T05:15:59Z","closed_at":"2026-02-05T16:21:06Z","dependencies":[{"issue_id":"holomush-wr9","depends_on_id":"holomush-dwk","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.1","title":"[E6] Design: Commands \u0026 Behaviors Architecture","description":"Design the Commands \u0026 Behaviors system architecture for HoloMUSH.\n\n## Scope\n- Command registration and dispatch mechanisms\n- Parser design for input → command + args transformation\n- Alias system architecture (system + player-level)\n- Go vs Lua command partitioning strategy\n- Help system integration points\n\n## Acceptance Criteria\n- [ ] Document command lifecycle (input → parse → dispatch → execute → output)\n- [ ] Define command registration API for both Go and Lua\n- [ ] Specify alias resolution order and conflict handling\n- [ ] Design help system contribution mechanism for plugins\n- [ ] Define security boundaries between Go and Lua commands\n- [ ] Document error handling and user feedback patterns\n- [ ] Create sequence diagrams for common command flows","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:30:17Z","created_by":"seanb4t","updated_at":"2026-02-02T18:06:48Z","closed_at":"2026-02-02T18:06:48Z","dependencies":[{"issue_id":"holomush-wr9.1","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.10","title":"[E6.stdlib.1] Formatting primitives (pkg/holo/fmt)","description":"Implement Go formatting primitives for the plugin stdlib.\n\n## Scope\n- Text styling: Bold, Italic, Color, Dim\n- Structure: List, Pairs, Table, Separator, Header\n- MU* format codes: %x color codes, %r/%b/%t whitespace\n\n## TDD Requirement\nTests MUST be written before implementation. All acceptance criteria verified via tests.\n\n## Acceptance Criteria\n- [ ] Fmt.Bold(), Fmt.Italic(), Fmt.Dim() return styled intermediate representation\n- [ ] Fmt.Color(name, text) supports named colors (red, green, blue, cyan, magenta, yellow, white, black)\n- [ ] Fmt.List() formats array as bulleted list\n- [ ] Fmt.Pairs() formats key-value map\n- [ ] Fmt.Table() formats headers + rows with column alignment\n- [ ] Fmt.Separator() and Fmt.Header() create visual breaks\n- [ ] Fmt.Parse() converts %x codes to intermediate representation\n- [ ] All %x codes documented in design are supported\n- [ ] Intermediate representation can render to ANSI (telnet)\n- [ ] \u003e90% test coverage","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T00:43:23Z","created_by":"seanb4t","updated_at":"2026-02-03T01:13:01Z","closed_at":"2026-02-03T01:13:01Z","dependencies":[{"issue_id":"holomush-wr9.10","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.100","title":"[E6.fix] Validate circularity in bulk alias loading","description":"## Summary\nThe `LoadSystemAliases` and `LoadPlayerAliases` methods in `AliasCache` don't check for circular references in bulk-loaded data, unlike the individual `Set*` methods.\n\n## Current State\n```go\n// LoadSystemAliases bulk loads system aliases - NO CIRCULARITY CHECK\nfunc (c *AliasCache) LoadSystemAliases(aliases map[string]string) {\n    c.mu.Lock()\n    defer c.mu.Unlock()\n    c.systemAliases = aliases  // Direct assignment, no validation\n}\n\n// But SetSystemAlias DOES check for circularity\nfunc (c *AliasCache) SetSystemAlias(alias, command string) error {\n    // ... circularity check via wouldBeCircularLocked\n}\n```\n\n## Risk\nIf the database contains circular aliases (from a bug, migration, or manual edit), loading them would create infinite loops during resolution.\n\n## Options\n1. Add circularity validation during bulk load\n2. Document that bulk-loaded aliases are trusted (from database, already validated)\n3. Add migration/startup check that scans for circular aliases\n\n## Acceptance Criteria\n- [ ] Choose an approach and document decision\n- [ ] If validating: add circularity check to `LoadSystemAliases` and `LoadPlayerAliases`\n- [ ] If trusting: add clear documentation that bulk load assumes valid data\n- [ ] Add test for chosen approach\n- [ ] Consider adding a `ValidateAliases` helper for startup checks\n\n## Files\n- `internal/command/alias.go`\n- `internal/command/alias_test.go`","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T18:42:23Z","created_by":"seanb4t","updated_at":"2026-02-04T19:34:21Z","closed_at":"2026-02-04T19:34:21Z","dependencies":[{"issue_id":"holomush-wr9.100","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.100","depends_on_id":"holomush-wr9.95","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.101","title":"Fix communication plugin silent return for empty input","description":"## Problem\nWhen a player types `say`, `pose`, or `emit` without any message, the communication plugin returns `nil` silently. The player receives no feedback that their command was received or why nothing happened.\n\n## Location\n- plugins/communication/main.lua:19-21 (handle_say)\n- plugins/communication/main.lua:32-34 (handle_pose)\n- plugins/communication/main.lua:62-64 (handle_emit)\n\n## Acceptance Criteria\n- [ ] Empty input to `say` returns error message: \"What do you want to say?\"\n- [ ] Empty input to `pose` returns error message: \"What do you want to do?\"\n- [ ] Empty input to `emit` returns error message: \"What do you want to emit?\"\n- [ ] Error messages use `holo.emit.character()` with \"error\" event type\n- [ ] Unit tests verify empty input behavior","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T20:48:34Z","created_by":"seanb4t","updated_at":"2026-02-04T21:04:33Z","closed_at":"2026-02-04T21:04:33Z","dependencies":[{"issue_id":"holomush-wr9.101","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.102","title":"Improve alias rollback error handling and alerting","description":"## Problem\nIf alias cache update fails AND database rollback also fails, the user only sees the cache error. The database and cache are left in an inconsistent state with no admin alerting.\n\n## Location\n- internal/command/handlers/alias.go:88-95\n\n## Acceptance Criteria\n- [ ] Log level elevated to CRITICAL when both cache update and rollback fail\n- [ ] Log message indicates database-cache inconsistency\n- [ ] Consider adding a metric `holomush_alias_rollback_failures_total`\n- [ ] Document recovery procedure in operator guide\n- [ ] Unit test covers double-failure scenario","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T20:48:36Z","created_by":"seanb4t","updated_at":"2026-02-04T21:11:07Z","closed_at":"2026-02-04T21:11:07Z","dependencies":[{"issue_id":"holomush-wr9.102","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.103","title":"Sanitize KV operation error messages for plugins","description":"## Problem\nUnlike world queries (which use `sanitizeErrorForPlugin`), KV operations expose raw error messages to Lua plugins. These errors could contain internal database details, connection strings, or other sensitive information.\n\n## Location\n- internal/plugin/hostfunc/functions.go:234-241\n\n## Acceptance Criteria\n- [ ] Create `sanitizeKVErrorForPlugin()` function following world.go pattern\n- [ ] KV Get errors return sanitized message with correlation ID\n- [ ] KV Set errors return sanitized message with correlation ID\n- [ ] KV Delete errors return sanitized message with correlation ID\n- [ ] Full error context logged for operators\n- [ ] Unit tests verify error sanitization","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T20:48:38Z","created_by":"seanb4t","updated_at":"2026-02-04T22:06:44Z","closed_at":"2026-02-04T22:06:44Z","dependencies":[{"issue_id":"holomush-wr9.103","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.103","depends_on_id":"holomush-wr9.125","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.104","title":"Add optional validation mode for AliasCache bulk loading","description":"## Problem\n`LoadSystemAliases` and `LoadPlayerAliases` trust input without validation. While documented as a design choice with `ValidateAliasSet` helper, a malformed database could introduce circular aliases that bypass the normal circular detection.\n\n## Location\n- internal/command/alias.go:42-46 (LoadSystemAliases)\n- internal/command/alias.go:50-56 (LoadPlayerAliases)\n\n## Acceptance Criteria\n- [ ] Add `LoadSystemAliasesValidated()` that checks for circular references\n- [ ] Add `LoadPlayerAliasesValidated()` that checks for circular references\n- [ ] Validation returns detailed error listing all circular chains found\n- [ ] Document when to use validated vs non-validated loading\n- [ ] Integration test with malformed database input","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T20:48:40Z","created_by":"seanb4t","updated_at":"2026-02-04T21:44:28Z","closed_at":"2026-02-04T21:44:28Z","dependencies":[{"issue_id":"holomush-wr9.104","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.104","depends_on_id":"holomush-wr9.119","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.105","title":"Improve Emitter JSON error handling visibility","description":"## Problem\n`Emitter.emit()` silently converts JSON marshaling errors to empty payload. While documented, this could mask bugs in plugin code where incorrect types are passed.\n\n## Location\n- pkg/holo/emit.go:69-79\n\n## Acceptance Criteria\n- [ ] Emitter tracks JSON encoding errors internally\n- [ ] `Flush()` returns accumulated errors (or error count) alongside events\n- [ ] Alternative: Log JSON errors by default with optional logger\n- [ ] Document the error handling behavior in pkg/holo/doc.go\n- [ ] Unit test verifies error accumulation and reporting","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T20:48:42Z","created_by":"seanb4t","updated_at":"2026-02-04T21:19:05Z","closed_at":"2026-02-04T21:19:05Z","dependencies":[{"issue_id":"holomush-wr9.105","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.106","title":"Add test for session termination alias cache invalidation","description":"## Problem\nThe spec (line 314) requires: \"Session termination: Remove player's entry from `playerAliases`\". While `ClearPlayer` is unit tested, there is no integration test verifying that session termination actually triggers cache invalidation.\n\n## Location\n- internal/command/alias_test.go\n- test/integration/command/\n\n## Acceptance Criteria\n- [ ] Integration test simulates session establishment with aliases\n- [ ] Test verifies aliases work during active session\n- [ ] Test simulates session termination\n- [ ] Test verifies player aliases are cleared from cache\n- [ ] Test verifies subsequent session loads fresh aliases from DB","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T20:48:57Z","created_by":"seanb4t","updated_at":"2026-02-04T21:52:24Z","closed_at":"2026-02-04T21:52:24Z","dependencies":[{"issue_id":"holomush-wr9.106","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.106","depends_on_id":"holomush-wr9.104","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.107","title":"Add test for alias cache startup loading from database","description":"## Problem\nThe spec (lines 291-294) states: \"System aliases MUST be loaded into memory at server startup\". While `LoadSystemAliases` is unit tested, there is no test verifying the actual server startup flow loads aliases correctly.\n\n## Location\n- internal/command/alias_test.go\n- test/integration/command/\n\n## Acceptance Criteria\n- [ ] Integration test seeds database with system aliases\n- [ ] Test starts server/dispatcher with database connection\n- [ ] Test verifies system aliases are resolved correctly\n- [ ] Test verifies player session loads player aliases\n- [ ] Test covers restart scenario (aliases persisted and reloaded)","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T20:48:59Z","created_by":"seanb4t","updated_at":"2026-02-04T21:52:24Z","closed_at":"2026-02-04T21:52:24Z","dependencies":[{"issue_id":"holomush-wr9.107","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.107","depends_on_id":"holomush-wr9.104","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.108","title":"Add test for alias double-failure rollback scenario","description":"## Problem\nThe rollback tests verify the happy path (rollback succeeds), but do not test what happens when both the cache update AND the rollback fail. This double-failure scenario could leave inconsistent state.\n\n## Location\n- internal/command/handlers/alias_test.go\n\n## Acceptance Criteria\n- [ ] Mock cache that fails on Set operation\n- [ ] Mock repo that fails on Delete (rollback) operation\n- [ ] Test verifies both errors are logged with CRITICAL level\n- [ ] Test verifies user receives appropriate error message\n- [ ] Test documents expected inconsistent state","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T20:49:00Z","created_by":"seanb4t","updated_at":"2026-02-04T21:23:23Z","closed_at":"2026-02-04T21:23:23Z","dependencies":[{"issue_id":"holomush-wr9.108","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.108","depends_on_id":"holomush-wr9.102","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.109","title":"Add test for helpText vs helpFile mutual exclusivity","description":"## Problem\nThe spec (line 183) states: \"Manifest validation MUST reject commands with both `helpText` AND `helpFile` set.\" No test verifies this mutual exclusivity validation in plugin manifest parsing.\n\n## Location\n- internal/plugin/manifest.go\n- internal/plugin/manifest_test.go\n\n## Acceptance Criteria\n- [ ] Unit test with manifest containing both helpText and helpFile\n- [ ] Test verifies validation error is returned\n- [ ] Error message clearly states mutual exclusivity requirement\n- [ ] Test with helpText only passes validation\n- [ ] Test with helpFile only passes validation\n- [ ] Test with neither passes validation (uses default help)","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T20:49:02Z","created_by":"seanb4t","updated_at":"2026-02-04T21:22:35Z","closed_at":"2026-02-04T21:22:35Z","dependencies":[{"issue_id":"holomush-wr9.109","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.11","title":"[E6.stdlib.2] Event emitter (pkg/holo/emit)","description":"Implement Go event emitter for the plugin stdlib.\n\n## Scope\n- Emitter struct with accumulate + flush pattern\n- Stream-specific methods: Location, Character, Global\n- Payload JSON encoding\n\n## TDD Requirement\nTests MUST be written before implementation. All acceptance criteria verified via tests.\n\n## Acceptance Criteria\n- [ ] NewEmitter() creates fresh emitter\n- [ ] Emitter.Location(id, type, payload) builds \"location:\u003cid\u003e\" stream event\n- [ ] Emitter.Character(id, type, payload) builds \"char:\u003cid\u003e\" stream event\n- [ ] Emitter.Global(type, payload) builds \"global\" stream event\n- [ ] Payload map is JSON-encoded with proper escaping\n- [ ] Emitter.Flush() returns accumulated events and clears buffer\n- [ ] Multiple emits accumulate correctly\n- [ ] Empty flush returns nil/empty slice\n- [ ] \u003e90% test coverage","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T00:43:36Z","created_by":"seanb4t","updated_at":"2026-02-03T01:13:01Z","closed_at":"2026-02-03T01:13:01Z","dependencies":[{"issue_id":"holomush-wr9.11","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.110","title":"Add concurrency test for RateLimiter.Close during Allow","description":"## Problem\nWhile there is a concurrency test for `Allow`, there is no test for the race condition between `Close()` and concurrent `Allow()` calls. The `sync.Once` protection added recently should be verified.\n\n## Location\n- internal/command/ratelimit_test.go\n\n## Acceptance Criteria\n- [ ] Test spawns multiple goroutines calling Allow()\n- [ ] Test calls Close() while Allow() goroutines are running\n- [ ] Test verifies no panics or data races\n- [ ] Test verifies Allow() returns false after Close()\n- [ ] Run with -race flag","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T20:49:04Z","created_by":"seanb4t","updated_at":"2026-02-04T21:24:55Z","closed_at":"2026-02-04T21:24:55Z","dependencies":[{"issue_id":"holomush-wr9.110","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.111","title":"Add assertion for alias resolution performance target","description":"## Problem\nThe spec (line 306) states: \"Alias resolution from cache MUST complete in \u003c1μs\". While there is a benchmark, there is no test that asserts this performance target is met.\n\n## Location\n- internal/command/alias_test.go\n\n## Acceptance Criteria\n- [ ] Benchmark test with assertion on p99 latency\n- [ ] Test fails if resolution exceeds 1μs threshold\n- [ ] Consider marking as skip-in-CI if too flaky\n- [ ] Document hardware assumptions in test comment","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T20:49:06Z","created_by":"seanb4t","updated_at":"2026-02-04T21:27:41Z","closed_at":"2026-02-04T21:27:41Z","dependencies":[{"issue_id":"holomush-wr9.111","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.112","title":"Add tests for prefix alias edge cases","description":"## Problem\nThe test \"prefix only returns pose only\" tests one case, but it would be valuable to test both `:` and `;` prefix aliases with just the prefix character and no following text.\n\n## Location\n- internal/command/alias_test.go\n\n## Acceptance Criteria\n- [ ] Test `:` alone (colon with no text) resolves to `pose`\n- [ ] Test `;` alone (semicolon with no text) resolves to `pose;`\n- [ ] Test `\\` alone (backslash with no text) resolves correctly\n- [ ] Document expected behavior for empty prefix aliases","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T20:49:08Z","created_by":"seanb4t","updated_at":"2026-02-04T21:27:41Z","closed_at":"2026-02-04T21:27:41Z","dependencies":[{"issue_id":"holomush-wr9.112","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.113","title":"Fix alias handler usage comments to match command names","description":"## Problem\nThe usage comments in alias handlers say things like `Usage: alias add \u003calias\u003e=\u003ccommand\u003e` but the actual command is `alias \u003calias\u003e=\u003ccommand\u003e` without subcommands. Comments are out of sync with register.go.\n\n## Location\n- internal/command/handlers/alias.go:27 - says \"alias add\" should be \"alias\"\n- internal/command/handlers/alias.go:110 - says \"alias remove\" should be \"unalias\"\n- internal/command/handlers/alias.go:152 - says \"alias list\" should be \"aliases\"\n- internal/command/handlers/alias.go:191 - needs verification\n- internal/command/handlers/alias.go:266 - says \"sysalias remove\" should be \"sysunsalias\"\n- internal/command/handlers/alias.go:308 - says \"sysalias list\" should be \"sysaliases\"\n\n## Acceptance Criteria\n- [ ] Line 27: Change to `Usage: alias \u003calias\u003e=\u003ccommand\u003e`\n- [ ] Line 110: Change to `Usage: unalias \u003calias\u003e`\n- [ ] Line 152: Change to `Usage: aliases`\n- [ ] Line 266: Change to `Usage: sysunsalias \u003calias\u003e`\n- [ ] Line 308: Change to `Usage: sysaliases`\n- [ ] Verify all usage comments match register.go registrations","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T20:49:17Z","created_by":"seanb4t","updated_at":"2026-02-04T21:20:58Z","closed_at":"2026-02-04T21:20:58Z","dependencies":[{"issue_id":"holomush-wr9.113","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.114","title":"Clarify BootHandler self-boot capability bypass in comment","description":"## Problem\nThe comment says self-boot is \"allowed for all users\" but the command is registered with `admin.boot` capability. The handler performs its own secondary check that bypasses the admin requirement for self-boot, which should be clarified.\n\n## Location\n- internal/command/handlers/boot.go:20-23\n\n## Acceptance Criteria\n- [ ] Update comment to explain capability bypass for self-boot\n- [ ] Clarify that dispatcher checks admin.boot first\n- [ ] Explain that handler has secondary self-boot logic\n- [ ] Example wording: \"Self-boot bypasses admin.boot capability check (implemented in handler)\"","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T20:49:18Z","created_by":"seanb4t","updated_at":"2026-02-04T21:28:46Z","closed_at":"2026-02-04T21:28:46Z","dependencies":[{"issue_id":"holomush-wr9.114","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.115","title":"Use godoc link instead of file path in WorldMutator comment","description":"## Problem\nThe WorldMutator type alias comment references a file path which could become stale if files are moved.\n\n## Location\n- internal/plugin/hostfunc/world_write.go:19-21\n\n## Current\n`// The interface is defined in internal/world/mutator.go.`\n\n## Acceptance Criteria\n- [ ] Change to godoc link: `// WorldMutator is an alias for [world.Mutator] used for type assertions.`\n- [ ] Remove file path reference\n- [ ] Verify godoc renders correctly","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T20:49:20Z","created_by":"seanb4t","updated_at":"2026-02-04T21:28:46Z","closed_at":"2026-02-04T21:28:46Z","dependencies":[{"issue_id":"holomush-wr9.115","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.116","title":"Add migration example to WithWorldQuerier deprecation notice","description":"## Problem\nThe deprecation notice for WithWorldQuerier lacks a migration example to help users upgrade.\n\n## Location\n- internal/plugin/hostfunc/functions.go:60-62\n\n## Acceptance Criteria\n- [ ] Add code example showing before/after migration\n- [ ] Explain benefits of WithWorldService (ABAC authorization)\n- [ ] Example format:\n  ```\n  // Before: WithWorldQuerier(querier)\n  // After:  WithWorldService(worldService)\n  ```","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T20:49:22Z","created_by":"seanb4t","updated_at":"2026-02-04T21:28:46Z","closed_at":"2026-02-04T21:28:46Z","dependencies":[{"issue_id":"holomush-wr9.116","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.117","title":"Mention Fmt.Parse in pkg/holo doc.go for %x codes","description":"## Problem\nThe package doc mentions %x codes but doesn't mention the `Fmt.Parse()` function that handles them.\n\n## Location\n- pkg/holo/doc.go:10\n\n## Acceptance Criteria\n- [ ] Update line 10 to mention Fmt.Parse\n- [ ] Suggested: \"// - Formatting primitives with MU*-compatible %x codes (via Fmt.Parse)\"","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T20:49:23Z","created_by":"seanb4t","updated_at":"2026-02-04T21:28:46Z","closed_at":"2026-02-04T21:28:46Z","dependencies":[{"issue_id":"holomush-wr9.117","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.118","title":"Make CommandEntry.Capabilities private with getter-only access","description":"## Problem\nCommandEntry.Capabilities is public despite documented immutability contract. Callers CAN mutate the slice directly, bypassing GetCapabilities() defensive copy.\n\n## Location\n- internal/command/types.go:129\n\n## Acceptance Criteria\n- [ ] Rename Capabilities to capabilities (lowercase)\n- [ ] Ensure GetCapabilities() is the only access path\n- [ ] Update all call sites to use GetCapabilities()\n- [ ] Verify tests still pass","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T20:49:32Z","created_by":"seanb4t","updated_at":"2026-02-04T21:41:11Z","closed_at":"2026-02-04T21:41:11Z","dependencies":[{"issue_id":"holomush-wr9.118","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.119","title":"Add constructor for AliasResult to ensure consistency","description":"## Problem\nAliasResult has no constructor - callers can create inconsistent states (e.g., WasAlias=true but AliasUsed=\"\").\n\n## Location\n- internal/command/alias.go:269-274\n\n## Acceptance Criteria\n- [ ] Add NewAliasResult(resolved, aliasUsed string) constructor\n- [ ] Constructor sets WasAlias=true when aliasUsed is non-empty\n- [ ] Add NoAliasResult(input string) for non-alias case\n- [ ] Update all AliasResult{} literal usages to use constructors\n- [ ] Consider making fields private if feasible","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T20:49:34Z","created_by":"seanb4t","updated_at":"2026-02-04T21:41:11Z","closed_at":"2026-02-04T21:41:11Z","dependencies":[{"issue_id":"holomush-wr9.119","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.12","title":"[E6.stdlib.3] Lua bindings (hostfunc/stdlib)","description":"Expose Go stdlib to Lua plugins via host functions.\n\n## Scope\n- Register holo.fmt.* functions as Lua globals\n- Register holo.emit.* functions as Lua globals\n- Lua table ↔ Go type conversion\n\n## TDD Requirement\nTests MUST be written before implementation. All acceptance criteria verified via tests.\n\n## Acceptance Criteria\n- [ ] holo.fmt.bold(), holo.fmt.italic(), holo.fmt.color() available in Lua\n- [ ] holo.fmt.list(), holo.fmt.pairs(), holo.fmt.table() available in Lua\n- [ ] holo.fmt.separator(), holo.fmt.header() available in Lua\n- [ ] holo.fmt.parse() converts %x codes in Lua strings\n- [ ] holo.emit.location(), holo.emit.character(), holo.emit.global() available\n- [ ] holo.emit.flush() returns Lua table of events\n- [ ] Lua tables correctly convert to Go maps for payloads\n- [ ] Nested tables supported (for table rows)\n- [ ] Integration test: Lua plugin uses stdlib functions end-to-end\n- [ ] \u003e85% test coverage","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T00:43:45Z","created_by":"seanb4t","updated_at":"2026-02-03T01:41:27Z","closed_at":"2026-02-03T01:41:27Z","dependencies":[{"issue_id":"holomush-wr9.12","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.12","depends_on_id":"holomush-wr9.10","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.12","depends_on_id":"holomush-wr9.11","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.120","title":"Add explicit thread-safety documentation to Registry type","description":"## Problem\nRegistry thread-safety is evident from implementation but not explicitly documented in the type comment.\n\n## Location\n- internal/command/registry.go:12-16\n\n## Acceptance Criteria\n- [ ] Add to type comment: \"Registry is safe for concurrent use.\"\n- [ ] Document that Register() and Get() are thread-safe\n- [ ] Mention that All() returns a defensive copy","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T20:49:36Z","created_by":"seanb4t","updated_at":"2026-02-04T21:41:11Z","closed_at":"2026-02-04T21:41:11Z","dependencies":[{"issue_id":"holomush-wr9.120","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.121","title":"Add ULID format validation to ParseCommandPayload","description":"## Problem\nParseCommandPayload returns zero-value CommandContext on error. No validation of ULID format means invalid payloads result in empty strings without indication of error.\n\n## Location\n- pkg/holo/context.go:60-71\n\n## Acceptance Criteria\n- [ ] Add option to validate ULID format in ParseCommandPayload\n- [ ] Return error for invalid ULID format (or document behavior)\n- [ ] Alternative: Add ValidateULIDs() method on CommandContext\n- [ ] Document that invalid payloads result in empty strings","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T20:49:37Z","created_by":"seanb4t","updated_at":"2026-02-04T22:00:37Z","closed_at":"2026-02-04T22:00:37Z","dependencies":[{"issue_id":"holomush-wr9.121","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.122","title":"Make Property.AppliesTo private with getter-only access","description":"## Problem\nProperty.AppliesTo is public and could be mutated directly despite GetAppliesTo() providing defensive copy.\n\n## Location\n- pkg/holo/property.go:76\n\n## Acceptance Criteria\n- [ ] Rename AppliesTo to appliesTo (lowercase)\n- [ ] Ensure GetAppliesTo() is the only access path\n- [ ] Update all call sites\n- [ ] Verify tests still pass","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T20:49:39Z","created_by":"seanb4t","updated_at":"2026-02-04T22:00:37Z","closed_at":"2026-02-04T22:00:37Z","dependencies":[{"issue_id":"holomush-wr9.122","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.122","depends_on_id":"holomush-wr9.118","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.123","title":"Add defensive copy to StyledText.Append for true immutability","description":"## Problem\nStyledText.Append() uses `append(st.segments, other.segments...)` which could share underlying array in edge cases, violating intended immutability.\n\n## Location\n- pkg/holo/fmt.go:332-335\n\n## Acceptance Criteria\n- [ ] Create new slice with explicit capacity in Append()\n- [ ] Copy segments to new slice before appending\n- [ ] Document immutability guarantee in type comment\n- [ ] Add test that verifies no shared state between original and appended","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T20:49:40Z","created_by":"seanb4t","updated_at":"2026-02-04T22:00:37Z","closed_at":"2026-02-04T22:00:37Z","dependencies":[{"issue_id":"holomush-wr9.123","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.124","title":"Distinguish service unavailability from empty command list in help plugin","description":"## Problem\nThe help plugin conflates \"zero commands registered\" (unusual but valid) with potential service issues when checking `#commands == 0`.\n\n## Location\n- plugins/help/main.lua:42-47\n\n## Acceptance Criteria\n- [ ] Check for nil commands separately from empty commands\n- [ ] Nil commands = \"Help service temporarily unavailable\"\n- [ ] Empty commands = \"No commands available\" (unlikely but valid)\n- [ ] Document the distinction in code comment","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T20:49:44Z","created_by":"seanb4t","updated_at":"2026-02-04T22:00:37Z","closed_at":"2026-02-04T22:00:37Z","dependencies":[{"issue_id":"holomush-wr9.124","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.125","title":"Improve WorldError logging for nil cause cases","description":"## Problem\nWorldError creates errors without logging. Some callers log before calling (good), but `findCharacterByName` calls `WorldError(..., nil)` without logging the underlying issue.\n\n## Location\n- internal/command/errors.go:72-78\n- Caller example: errors.go:147 (findCharacterByName)\n\n## Acceptance Criteria\n- [ ] Audit all WorldError(msg, nil) calls\n- [ ] Ensure each has appropriate logging before the call\n- [ ] Consider adding optional logger parameter to WorldError\n- [ ] Document logging expectations in WorldError godoc","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T20:49:46Z","created_by":"seanb4t","updated_at":"2026-02-04T22:00:37Z","closed_at":"2026-02-04T22:00:37Z","dependencies":[{"issue_id":"holomush-wr9.125","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.126","title":"Log warning when command has no source in help plugin","description":"## Problem\nIf a command has no source set, it falls into \"other\" category silently. This defensive coding could mask registration bugs.\n\n## Location\n- plugins/help/main.lua:52\n\n## Acceptance Criteria\n- [ ] Log warning when cmd.source is nil/empty\n- [ ] Include command name in warning\n- [ ] Continue displaying in \"other\" category (don't fail)\n- [ ] Document that all commands should have source set","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T20:49:47Z","created_by":"seanb4t","updated_at":"2026-02-04T22:06:44Z","closed_at":"2026-02-04T22:06:44Z","dependencies":[{"issue_id":"holomush-wr9.126","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.126","depends_on_id":"holomush-wr9.124","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.127","title":"-","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T23:56:06Z","created_by":"seanb4t","updated_at":"2026-02-06T05:15:59Z","closed_at":"2026-02-05T03:58:01Z","dependencies":[{"issue_id":"holomush-wr9.127","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.128","title":"[E6.arch] Make CommandEntry.Handler private with getter-only access","description":"Make CommandEntry.Handler private (handler) and add Handler() getter method. Update all references from entry.Handler to entry.Handler(). Add constructor for CommandEntry. Affects: internal/command/types.go, all handlers, dispatcher, registry. See PR #63 review findings.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T23:56:09Z","created_by":"seanb4t","updated_at":"2026-02-05T00:06:04Z","closed_at":"2026-02-05T00:06:04Z","dependencies":[{"issue_id":"holomush-wr9.128","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.128","depends_on_id":"holomush-wr9.133","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.129","title":"[E6.arch] Unify PropertyRegistry as injectable dependency","description":"Replace multiple PropertyRegistry singleton instances with a single injected dependency. Currently: hostfunc/world_write.go:24 creates var propertyRegistry = holo.DefaultRegistry(), and handlers/objects.go:133 also creates registry := holo.DefaultRegistry(). Multiple instances could lead to inconsistency. Solution: Inject registry via constructor or use a true singleton pattern with sync.Once.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T23:56:13Z","created_by":"seanb4t","updated_at":"2026-02-06T05:15:59Z","closed_at":"2026-02-05T02:51:18Z","dependencies":[{"issue_id":"holomush-wr9.129","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.129","depends_on_id":"holomush-wr9.132","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.13","title":"[E6.stdlib.4] Typed CommandContext","description":"Implement typed command context for Lua plugins.\n\n## Scope\n- CommandContext struct in Go\n- on_command(ctx) handler support in Lua host\n- Pre-parsing command event payloads into context\n\n## TDD Requirement\nTests MUST be written before implementation. All acceptance criteria verified via tests.\n\n## Acceptance Criteria\n- [ ] CommandContext has fields: Name, Args, InvokedAs, CharacterName, CharacterID, LocationID, PlayerID\n- [ ] Lua host detects on_command function in plugin\n- [ ] Command events call on_command(ctx) if defined\n- [ ] Command events fall back to on_event(event) for backwards compatibility\n- [ ] ctx table in Lua has all CommandContext fields\n- [ ] Non-command events still use on_event(event)\n- [ ] Empty args handled gracefully (ctx.args = \"\")\n- [ ] Integration test: plugin receives typed context\n- [ ] \u003e85% test coverage","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T00:43:52Z","created_by":"seanb4t","updated_at":"2026-02-03T01:41:27Z","closed_at":"2026-02-03T01:41:27Z","dependencies":[{"issue_id":"holomush-wr9.13","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.13","depends_on_id":"holomush-wr9.12","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.130","title":"[E6.arch] Enforce WorldMutator interface at construction time","description":"Replace runtime type assertion in hostfunc/world_write.go:209-215 with compile-time interface enforcement. Currently: mutator, ok := f.worldService.(WorldMutator) does runtime check that could fail silently. Solution: Change host function factory to require WorldMutator interface in constructor, failing fast at startup if world service does not implement it.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T23:56:14Z","created_by":"seanb4t","updated_at":"2026-02-06T05:16:00Z","closed_at":"2026-02-05T01:08:23Z","dependencies":[{"issue_id":"holomush-wr9.130","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.130","depends_on_id":"holomush-wr9.137","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.131","title":"[E6.complexity] Refactor alias resolution to split prefix alias logic","description":"The AliasCache.Resolve() method at internal/command/alias.go:365-400 is 35+ lines and handles too many concerns: exact matches, player aliases, system aliases, prefix aliases, and recursive expansion. Split into smaller methods: resolveExact(), resolvePlayerAlias(), resolveSystemAlias(), resolvePrefix(). Maintain same behavior but improve readability and testability.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T23:56:15Z","created_by":"seanb4t","updated_at":"2026-02-06T05:16:00Z","closed_at":"2026-02-05T03:58:01Z","dependencies":[{"issue_id":"holomush-wr9.131","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.131","depends_on_id":"holomush-wr9.134","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.132","title":"[E6.complexity] Create registration-based property system","description":"Replace hardcoded switch statements in hostfunc/world_write.go:286-349 with a registration-based property system. Currently adding new properties requires editing multiple switch statements. Solution: Create PropertyDefinition interface with Validate(), Get(), Set() methods. Properties register themselves at init time. Host functions look up property by name and delegate to registered handlers.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T23:56:16Z","created_by":"seanb4t","updated_at":"2026-02-06T05:16:00Z","closed_at":"2026-02-05T02:19:46Z","dependencies":[{"issue_id":"holomush-wr9.132","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.132","depends_on_id":"holomush-wr9.129","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.132","depends_on_id":"holomush-wr9.139","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.133","title":"[E6.refactor] Consolidate handler output patterns into shared helpers","description":"Handlers use repetitive output patterns: writeOutputf(ctx, exec, look, ...) and error handling: writeOutput(ctx, exec, create, Failed...) + return command.WorldError(...). Create standardized helpers: writeSuccess(), writeError(), writeOutputWithError() that combine output writing and error return. Affects: handlers/look.go, handlers/objects.go, handlers/move.go, and others.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T23:56:20Z","created_by":"seanb4t","updated_at":"2026-02-06T05:16:00Z","closed_at":"2026-02-05T03:10:53Z","dependencies":[{"issue_id":"holomush-wr9.133","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.133","depends_on_id":"holomush-wr9.128","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.133","depends_on_id":"holomush-wr9.138","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.133","depends_on_id":"holomush-wr9.140","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.134","title":"[E6.refactor] Extract shared alias shadowing logic","description":"Alias handlers have duplicated shadowing checks: AliasAddHandler and SysaliasAddHandler both check for command shadows (lines 56-64) and system alias shadows (lines 66-73). Extract into shared helper functions: checkCommandShadows(), checkSystemAliasShadows() in a shared utility file. Affects: handlers/alias.go, handlers/sysalias.go.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T23:56:22Z","created_by":"seanb4t","updated_at":"2026-02-06T05:16:00Z","closed_at":"2026-02-05T03:20:46Z","dependencies":[{"issue_id":"holomush-wr9.134","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.134","depends_on_id":"holomush-wr9.131","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.135","title":"[E6.arch] Refactor dispatcher to extract metrics and rate limiting","description":"Dispatcher at internal/command/dispatcher.go has 201 lines with multiple responsibilities: parsing (95-99, 116-119), alias resolution (102-113), rate limiting (147-162), capability checking (177-183), metrics (74-82, 140-144). Solution: Extract MetricsRecorder and RateLimitMiddleware into separate types that wrap or compose with the dispatcher. Keep dispatcher focused on command dispatching only.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T23:56:25Z","created_by":"seanb4t","updated_at":"2026-02-06T05:16:00Z","closed_at":"2026-02-05T03:20:46Z","dependencies":[{"issue_id":"holomush-wr9.135","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.135","depends_on_id":"holomush-wr9.136","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.136","title":"[E6.fix] Add missing CapabilityRateLimitBypass constant","description":"Dispatcher at internal/command/dispatcher.go:149-162 references CapabilityRateLimitBypass but the constant is not defined. Currently uses: hasBypass := d.access.Check(ctx, subject, execute, CapabilityRateLimitBypass). Need to define this capability constant alongside other capability constants in the codebase. Check where other capability constants are defined (likely in auth/capability package or similar).","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T23:56:26Z","created_by":"seanb4t","updated_at":"2026-02-06T05:16:00Z","closed_at":"2026-02-05T00:21:00Z","dependencies":[{"issue_id":"holomush-wr9.136","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.136","depends_on_id":"holomush-wr9.135","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.137","title":"[E6.arch] Extract host function entity type switch into registration system","description":"Host functions at internal/plugin/hostfunc/world_write.go:286-349 use hardcoded switch statements for entity types (location, object). Violates open/closed principle. Solution: Create EntityMutator registry where each entity type registers its Create, Set, Get operations. Host functions delegate to registered mutators. Should be done after WorldMutator interface enforcement.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T23:56:31Z","created_by":"seanb4t","updated_at":"2026-02-06T05:16:00Z","closed_at":"2026-02-05T03:39:10Z","dependencies":[{"issue_id":"holomush-wr9.137","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.137","depends_on_id":"holomush-wr9.130","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.138","title":"[E6.test] Create table-driven test fixtures for handler tests","description":"Handler test files show significant duplication in mock setup. Each handler test creates similar mock structures for WorldService, Services, Executor. Solution: Create shared test fixtures in handlers/testutil/ package with: MockWorldService builder, Services builder with defaults, Common test contexts (admin player, regular player, room with exits). Convert existing tests to use table-driven patterns with these fixtures.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T23:56:32Z","created_by":"seanb4t","updated_at":"2026-02-06T05:16:00Z","closed_at":"2026-02-05T03:56:15Z","dependencies":[{"issue_id":"holomush-wr9.138","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.138","depends_on_id":"holomush-wr9.133","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.139","title":"[E6.refactor] Unify property application functions with interface-based approach","description":"Handlers/objects.go has nearly identical functions applyPropertyToLocation (lines 229-258) and applyPropertyToObject (lines 261-291). Only difference is entity type string and method calls. Solution: Define PropertyApplier interface with Apply(entityID, property, value) method. Implement for LocationApplier and ObjectApplier. Handler uses the appropriate applier based on entity type. Depends on property system refactoring (registration-based property system) for consistent property handling.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T23:56:51Z","created_by":"seanb4t","updated_at":"2026-02-06T05:16:00Z","closed_at":"2026-02-05T03:57:26Z","dependencies":[{"issue_id":"holomush-wr9.139","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.139","depends_on_id":"holomush-wr9.132","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.14","title":"[E6.stdlib.5] Migrate communication plugin to stdlib","description":"Migrate communication plugin from manual JSON handling to stdlib.\n\n## Scope\n- Rewrite communication plugin using on_command(ctx)\n- Use holo.emit.* for event emission\n- Update integration tests\n- Validate backwards compatibility\n\n## TDD Requirement\nTests MUST be written/updated before implementation. All acceptance criteria verified via tests.\n\n## Acceptance Criteria\n- [ ] Communication plugin uses on_command(ctx) handler\n- [ ] No manual JSON parsing in plugin code\n- [ ] Uses holo.emit.location() for all event emission\n- [ ] Uses holo.emit.flush() to return events\n- [ ] say command works with typed context\n- [ ] pose command works with : and ; variants via ctx.invoked_as\n- [ ] emit command works with typed context\n- [ ] All existing integration tests pass\n- [ ] Plugin reduced from ~180 lines to ~30 lines\n- [ ] \u003e85% test coverage maintained","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T00:44:00Z","created_by":"seanb4t","updated_at":"2026-02-03T01:41:27Z","closed_at":"2026-02-03T01:41:27Z","dependencies":[{"issue_id":"holomush-wr9.14","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.14","depends_on_id":"holomush-wr9.13","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.140","title":"[E6.refactor] Create shared error wrapping helper for handlers","description":"Multiple handlers repeat the same error pattern: writeOutput(ctx, exec, cmdName, userMessage) + return command.WorldError(internalMessage, err). This is duplicated across handlers/objects.go, handlers/admin.go, and others. Solution: Create handleError(ctx, exec, cmdName, userMessage, internalMessage, err) helper that writes output AND returns the appropriate error. Reduces duplication and ensures consistent error handling.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T23:56:53Z","created_by":"seanb4t","updated_at":"2026-02-06T05:16:00Z","closed_at":"2026-02-05T03:40:20Z","dependencies":[{"issue_id":"holomush-wr9.140","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.140","depends_on_id":"holomush-wr9.133","type":"relates-to","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.141","title":"[E6.docs] Update spec: replace 'describe' with 'set' and clarify command implementations","description":"The spec at docs/specs/2026-02-02-commands-behaviors-design.md still lists 'describe' as a Lua command, but the implementation uses Go 'set' command for setting properties (name, description). Also 'create' is implemented as a Go handler, not Lua. Update the spec to match implementation:\n\n1. Remove 'describe' from Lua commands list\n2. Remove 'build.describe' from capabilities table\n3. Add 'create' and 'set' to Go commands list\n4. Update capability table to reflect correct implementation\n5. Verify all command implementation types match actual code\n\nFiles to update:\n- docs/specs/2026-02-02-commands-behaviors-design.md (lines 352, 624)\n- Any other docs referencing these commands","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-05T01:41:05Z","created_by":"seanb4t","updated_at":"2026-02-05T02:19:46Z","closed_at":"2026-02-05T02:19:46Z","dependencies":[{"issue_id":"holomush-wr9.141","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.15","title":"[E6.4.1] World write host functions","description":"Extend internal/plugin/hostfunc with world mutation functions for Lua plugins.\n\n**Files:**\n- Create: `internal/plugin/hostfunc/world_write.go`\n- Create: `internal/plugin/hostfunc/world_write_test.go`\n- Modify: `internal/plugin/hostfunc/functions.go` (add registrations)\n\n**Host Functions:**\n- `create_location(name, description, type)` -\u003e `{id, name}` or `nil, error`\n- `create_exit(from_id, to_id, name, opts)` -\u003e `{id, name}` or `nil, error`\n- `find_location(name)` -\u003e `{id, name}` or `nil, error`\n- `set_property(entity_type, entity_id, property, value)` -\u003e `true` or `nil, error`\n- `get_property(entity_type, entity_id, property)` -\u003e `value` or `nil, error`\n\n**Acceptance Criteria:**\n- [ ] All functions check capabilities via wrap() pattern\n- [ ] Functions use WorldMutator interface for write operations\n- [ ] Error messages sanitized for plugins (no internal details)\n- [ ] \u003e85% test coverage\n- [ ] TDD: tests written before implementation\n\n**Dependencies:** None\n\n**Implementation:** Follow TDD approach per design docs/plans/2026-02-02-building-objects-implementation.md Task 1\n\n**Review Required:** Code review + alignment check with design","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T02:42:26Z","created_by":"seanb4t","updated_at":"2026-02-03T02:59:31Z","closed_at":"2026-02-03T02:59:31Z","dependencies":[{"issue_id":"holomush-wr9.15","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.16","title":"[E6.4.2] Property registry with prefix matching","description":"Implement property registry for the set command with prefix-based property name matching.\n\n**Files:**\n- Create: `pkg/holo/property.go`\n- Create: `pkg/holo/property_test.go`\n\n**Features:**\n- Property struct with Name, Type, Capability, AppliesTo fields\n- PropertyRegistry with Register() and Resolve() methods\n- Prefix matching: \"desc\" -\u003e \"description\" if unique\n- AmbiguousPropertyError with list of matching properties\n- DefaultRegistry() with standard properties (description, name)\n\n**Acceptance Criteria:**\n- [ ] Exact name match works\n- [ ] Unique prefix match works (desc, descr, descrip -\u003e description)\n- [ ] Ambiguous prefix returns AmbiguousPropertyError with matches\n- [ ] Unknown prefix returns ErrPropertyNotFound\n- [ ] \u003e85% test coverage\n- [ ] TDD: tests written before implementation\n\n**Dependencies:** None\n\n**Implementation:** Follow TDD approach per design docs/plans/2026-02-02-building-objects-implementation.md Task 2\n\n**Review Required:** Code review + alignment check with design","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T02:42:34Z","created_by":"seanb4t","updated_at":"2026-02-03T02:59:31Z","closed_at":"2026-02-03T02:59:31Z","dependencies":[{"issue_id":"holomush-wr9.16","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.17","title":"[E6.4.3] Building plugin manifest","description":"Create the Lua plugin manifest for building commands (dig, link).\n\n**Files:**\n- Create: `plugins/building/plugin.yaml`\n\n**Content:**\n- name: building, version: 1.0.0, type: lua\n- events: [command]\n- capabilities: build.location, build.exit, world.write.*, world.read.location\n- Commands:\n  - dig: capabilities [build.location, build.exit], help text, usage\n  - link: capabilities [build.exit], help text, usage\n- lua-plugin.entry: main.lua\n\n**Acceptance Criteria:**\n- [ ] Valid YAML syntax (passes yaml.safe_load)\n- [ ] Commands declare required capabilities\n- [ ] Help text includes syntax and examples\n- [ ] Follows existing plugin manifest patterns (communication plugin)\n\n**Dependencies:** None\n\n**Implementation:** See docs/plans/2026-02-02-building-objects-implementation.md Task 3\n\n**Review Required:** Manifest review for completeness","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T02:42:42Z","created_by":"seanb4t","updated_at":"2026-02-03T02:59:31Z","closed_at":"2026-02-03T02:59:31Z","dependencies":[{"issue_id":"holomush-wr9.17","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.18","title":"[E6.4.4] Building plugin Lua handlers (dig, link)","description":"Implement dig and link command handlers in Lua using holo stdlib and holomush.* host functions.\n\n**Files:**\n- Create: `plugins/building/main.lua`\n\n**Commands:**\n- dig \u003cexit\u003e to \"\u003clocation\u003e\" [return \u003cexit\u003e]\n  - Creates new location with persistent type\n  - Creates exit from current location to new location\n  - Optional bidirectional exit with return clause\n- link \u003cexit\u003e to \u003ctarget\u003e\n  - Target can be #\u003cid\u003e or location name\n  - Uses find_location for name lookup\n  - Creates one-way exit\n\n**Acceptance Criteria:**\n- [ ] on_command(ctx) dispatcher routes to handlers\n- [ ] dig creates location and exit(s)\n- [ ] dig with return creates bidirectional exits\n- [ ] link resolves target by ID (#...) or name\n- [ ] Error messages emitted to character\n- [ ] Success messages emitted to character\n- [ ] Passes luacheck lint\n- [ ] Uses holo.emit.* for messages\n- [ ] Uses holomush.create_* for world mutations\n\n**Dependencies:** \n- holomush-wr9.15 (host functions)\n- holomush-wr9.17 (manifest)\n\n**Implementation:** Follow docs/plans/2026-02-02-building-objects-implementation.md Task 4\n\n**Review Required:** Code review + alignment check with design","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T02:42:52Z","created_by":"seanb4t","updated_at":"2026-02-03T03:06:59Z","closed_at":"2026-02-03T03:06:59Z","dependencies":[{"issue_id":"holomush-wr9.18","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.18","depends_on_id":"holomush-wr9.15","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.18","depends_on_id":"holomush-wr9.17","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.19","title":"[E6.4.5] Objects plugin Go handlers (create, set)","description":"Implement create and set commands as Go handlers in internal/command/handlers.\n\n**Files:**\n- Create: `internal/command/handlers/objects.go`\n- Create: `internal/command/handlers/objects_test.go`\n- Modify: command registration (add handlers)\n\n**Commands:**\n- create \u003ctype\u003e \"\u003cname\u003e\"\n  - Types: object, location\n  - Creates entity with generated ID\n  - Objects placed in current location\n- set \u003cproperty\u003e of \u003ctarget\u003e to \u003cvalue\u003e\n  - Uses property registry for prefix matching\n  - Targets: here, me, #\u003cid\u003e, or object name\n  - Applies to location, object, character\n\n**Acceptance Criteria:**\n- [ ] create object \"\u003cname\u003e\" creates object in current location\n- [ ] create location \"\u003cname\u003e\" creates persistent location\n- [ ] set description of here to ... updates location\n- [ ] set desc of here to ... works (prefix matching)\n- [ ] set d of here to ... returns ambiguous error if multiple matches\n- [ ] Target resolution: here, me, #\u003cid\u003e\n- [ ] \u003e85% test coverage\n- [ ] TDD: tests written before implementation\n\n**Dependencies:**\n- holomush-wr9.16 (property registry)\n\n**Implementation:** Follow TDD approach per docs/plans/2026-02-02-building-objects-implementation.md Task 5\n\n**Review Required:** Code review + alignment check with design","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T02:43:00Z","created_by":"seanb4t","updated_at":"2026-02-03T03:06:59Z","closed_at":"2026-02-03T03:06:59Z","dependencies":[{"issue_id":"holomush-wr9.19","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.19","depends_on_id":"holomush-wr9.16","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.2","title":"[E6] Implementation Plan: Commands \u0026 Behaviors","description":"Create detailed implementation plan for Commands \u0026 Behaviors system.\n\n## Scope\n- Break down design into implementable tasks\n- Define package structure and dependencies\n- Specify test strategy for command parsing and execution\n- Plan migration path for existing event-based actions\n\n## Acceptance Criteria\n- [ ] Phase breakdown with clear deliverables per phase\n- [ ] Package/file structure defined\n- [ ] Interface definitions for command system\n- [ ] Test coverage requirements per component\n- [ ] Integration points with event system documented\n- [ ] Performance considerations for command dispatch","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:30:23Z","created_by":"seanb4t","updated_at":"2026-02-02T18:10:42Z","closed_at":"2026-02-02T18:10:42Z","dependencies":[{"issue_id":"holomush-wr9.2","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.2","depends_on_id":"holomush-wr9.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.20","title":"[E6.4.6] Building \u0026 objects integration tests","description":"Write integration tests verifying the full command flow for building and objects commands.\n\n**Files:**\n- Create: `test/integration/building/building_test.go`\n\n**Test Cases:**\n- dig creates location and exit\n- dig with return creates bidirectional exits\n- link to location by name\n- link to location by ID\n- create object in current location\n- set description with prefix matching\n- set with ambiguous prefix returns error\n\n**Acceptance Criteria:**\n- [ ] Ginkgo/Gomega BDD-style tests\n- [ ] //go:build integration tag\n- [ ] Tests cover happy path for each command\n- [ ] Tests cover error cases\n\n**Dependencies:**\n- holomush-wr9.18 (building handlers)\n- holomush-wr9.19 (objects handlers)\n\n**Implementation:** See docs/plans/2026-02-02-building-objects-implementation.md Task 6\n\n**Review Required:** Test coverage review","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T02:43:06Z","created_by":"seanb4t","updated_at":"2026-02-03T03:13:42Z","closed_at":"2026-02-03T03:13:42Z","dependencies":[{"issue_id":"holomush-wr9.20","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.20","depends_on_id":"holomush-wr9.18","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.20","depends_on_id":"holomush-wr9.19","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.21","title":"[E6.4] Refactor WorldMutator: separate Lua bindings from core interfaces","description":"Refactor world_write.go to properly separate core abstractions from Lua bindings.\n\n## Problem\n\n`internal/plugin/hostfunc/world_write.go` mixes:\n1. `WorldMutator` interface - a core domain abstraction\n2. `validProperties` map - domain configuration\n3. `isValidProperty()` - domain utility\n4. Lua host functions - binding layer\n\nThe Lua binding layer should be thin wrappers over Go services, not define core interfaces.\n\n## Proposed Changes\n\n1. **Move `WorldMutator` to `internal/world/`**\n   - Either merge into `Service` interface or create `world/mutator.go`\n   - This is a domain interface, not a Lua concern\n\n2. **Move `validProperties` to `pkg/holo/property.go`**\n   - We already have `PropertyRegistry` there\n   - Add entity type validation to the registry\n\n3. **Simplify `world_write.go`**\n   - Keep only Lua argument parsing and result formatting\n   - Call `world.Service` methods directly\n   - Remove duplicated interface definitions\n\n## Acceptance Criteria\n\n- [ ] `WorldMutator` interface lives in `internal/world/` package\n- [ ] `validProperties` integrated with `PropertyRegistry`\n- [ ] `world_write.go` contains only Lua binding code\n- [ ] No functional changes to behavior\n- [ ] All existing tests pass\n- [ ] Go handlers and Lua bindings share the same service interface\n\n## Dependencies\n\nNone - this is a refactoring task that can be done after current implementation stabilizes.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T12:44:05Z","created_by":"seanb4t","updated_at":"2026-02-03T13:05:02Z","closed_at":"2026-02-03T13:05:02Z","dependencies":[{"issue_id":"holomush-wr9.21","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.22","title":"[E6.fix] Add opts validation to createObjectFn","description":"## Problem\n\nThe `createObjectFn` in world_write.go calls `L.ToTable(2)` without checking if argument 2 exists. If a Lua plugin calls `create_object(\"name\")` without the opts table, subsequent `opts.RawGetString()` calls will panic.\n\n## Location\n\n`internal/plugin/hostfunc/world_write.go:210-211`\n\n## Acceptance Criteria\n\n- [ ] Add validation that opts is provided and is a table before accessing\n- [ ] Return appropriate error to Lua if missing: `(nil, \"second argument must be an options table\")`\n- [ ] Add test for missing opts parameter\n- [ ] No panics when create_object called with only name argument","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T19:15:15Z","created_by":"seanb4t","updated_at":"2026-02-03T19:39:30Z","closed_at":"2026-02-03T19:39:30Z","dependencies":[{"issue_id":"holomush-wr9.22","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.23","title":"[E6.fix] Refactor AliasCache.Resolve locking pattern","description":"## Problem\n\nThe `Resolve` method releases RLock mid-function when handling prefix aliases (lines 212, 223) but has multiple return paths. While correct, this pattern is fragile and error-prone for future modifications.\n\n## Location\n\n`internal/command/alias.go:200-231`\n\n## Current Behavior\n\nMultiple early `c.mu.RUnlock()` calls followed by returns, with a final unlock at line 231 for non-prefix paths.\n\n## Acceptance Criteria\n\n- [ ] Restructure to use helper function or defer pattern\n- [ ] Guarantee exactly one unlock per call path\n- [ ] Maintain existing behavior (prefix alias resolution)\n- [ ] All existing alias tests pass\n- [ ] Add comment documenting the locking strategy","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T19:15:21Z","created_by":"seanb4t","updated_at":"2026-02-03T19:56:17Z","closed_at":"2026-02-03T19:56:17Z","dependencies":[{"issue_id":"holomush-wr9.23","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.24","title":"[E6.fix] Fix shutdown command help text mismatch","description":"## Problem\n\nThe shutdown command's HelpText shows features not implemented:\n- `shutdown \u003cseconds\u003e \u003creason\u003e` - reason parameter not supported\n- `shutdown cancel` - cancel subcommand not implemented\n\nBut ShutdownHandler only parses an integer delay.\n\n## Location\n\n`internal/command/handlers/register.go:143-144`\n`internal/command/handlers/shutdown.go`\n\n## Options\n\n1. Update help text to match implementation\n2. Implement reason and cancel features\n\n## Acceptance Criteria\n\n- [ ] Help text matches actual implementation\n- [ ] If implementing features: add tests for reason and cancel\n- [ ] No misleading documentation","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T19:15:25Z","created_by":"seanb4t","updated_at":"2026-02-03T19:57:20Z","closed_at":"2026-02-03T19:57:20Z","dependencies":[{"issue_id":"holomush-wr9.24","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.25","title":"[E6.fix] Add error logging to findCharacterByName","description":"## Problem\n\nThe `findCharacterByName` function silently skips characters when GetCharacter fails, without logging or distinguishing error types. Database failures, timeouts, and real errors are silently swallowed.\n\n## Location\n\n`internal/command/handlers/boot.go:140-145`\n\n## Impact\n\nAdmins trying to boot a user will get \"player not found\" when the player exists but lookup failed. No visibility into system issues.\n\n## Acceptance Criteria\n\n- [ ] Distinguish expected errors (not found, access denied) from unexpected\n- [ ] Log unexpected errors with context (target_name, session_char_id)\n- [ ] Continue skipping on expected errors (current behavior)\n- [ ] Add test verifying logging behavior on unexpected errors","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T19:15:30Z","created_by":"seanb4t","updated_at":"2026-02-03T19:44:09Z","closed_at":"2026-02-03T19:44:09Z","dependencies":[{"issue_id":"holomush-wr9.25","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.26","title":"[E6.fix] Add error logging to WhoHandler","description":"## Problem\n\nWhoHandler silently skips characters on GetCharacter errors. Database failures, timeouts, internal errors all ignored. Users see incomplete list with no indication.\n\n## Location\n\n`internal/command/handlers/who.go:36-42`\n\n## Impact\n\n\"who\" command might show fewer players than actually connected during database issues. No indication list is incomplete.\n\n## Acceptance Criteria\n\n- [ ] Log unexpected errors (not ErrNotFound, not ErrPermissionDenied)\n- [ ] Optionally add note to output if errors occurred\n- [ ] Continue skipping on expected errors (current behavior)\n- [ ] Add test verifying logging on unexpected errors","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T19:15:34Z","created_by":"seanb4t","updated_at":"2026-02-03T19:47:06Z","closed_at":"2026-02-03T19:47:06Z","dependencies":[{"issue_id":"holomush-wr9.26","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.27","title":"[E6.test] Add MoveHandler failure path tests","description":"## Problem\n\nMoveHandler tests cover exit lookup but not:\n1. MoveCharacter() failure after finding valid exit\n2. GetLocation() failure after successful move\n\n## Location\n\n`internal/command/handlers/move_test.go`\n\n## Missing Tests\n\n1. `TestMoveHandler_MoveCharacterFailure` - concurrent modification, access denied during move\n2. `TestMoveHandler_GetLocationFailureAfterMove` - location deleted between move and lookup\n\n## Acceptance Criteria\n\n- [ ] Add test for MoveCharacter() returning error\n- [ ] Verify player-facing message (\"Something prevents you from going that way\")\n- [ ] Add test for GetLocation() failure after move\n- [ ] Verify graceful handling (\"You arrive somewhere strange...\")","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T19:15:39Z","created_by":"seanb4t","updated_at":"2026-02-03T20:08:33Z","closed_at":"2026-02-03T20:08:33Z","dependencies":[{"issue_id":"holomush-wr9.27","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.28","title":"[E6.test] Add CreateHandler/SetHandler service error tests","description":"## Problem\n\nCreateHandler and SetHandler tests verify success and syntax errors but not:\n- WorldService.CreateObject() failure\n- WorldService.CreateLocation() failure  \n- UpdateLocation()/UpdateObject() failure\n\n## Location\n\n`internal/command/handlers/objects_test.go`\n\n## Missing Tests\n\n1. `TestCreateHandler_ObjectServiceError` - database unavailable\n2. `TestCreateHandler_LocationServiceError` - creation failure\n3. `TestSetHandler_UpdateFailure` - optimistic locking, access control changes\n\n## Acceptance Criteria\n\n- [ ] Add test for CreateObject/CreateLocation service errors\n- [ ] Verify error message displayed to user\n- [ ] Add test for UpdateLocation/UpdateObject failures\n- [ ] Document expected behavior (swallow vs propagate)","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T19:15:43Z","created_by":"seanb4t","updated_at":"2026-02-03T20:21:08Z","closed_at":"2026-02-03T20:21:08Z","dependencies":[{"issue_id":"holomush-wr9.28","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.28","depends_on_id":"holomush-wr9.31","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.29","title":"[E6.fix] Add thread safety to PropertyRegistry","description":"## Problem\n\nPropertyRegistry has no thread safety. Concurrent reads/writes would cause data races. This type is in `pkg/holo` and may be used concurrently.\n\n## Location\n\n`pkg/holo/property.go`\n\n## Acceptance Criteria\n\n- [ ] Add RWMutex to PropertyRegistry\n- [ ] Protect Register(), Resolve(), Get(), ValidFor() with appropriate locks\n- [ ] Add concurrent access test\n- [ ] No data races under go test -race","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T19:15:47Z","created_by":"seanb4t","updated_at":"2026-02-03T19:49:35Z","closed_at":"2026-02-03T19:49:35Z","dependencies":[{"issue_id":"holomush-wr9.29","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.29","depends_on_id":"holomush-wr9.37","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.3","title":"[E6.1] Command parser - Input → command + args","description":"Implement the core command parser that transforms raw input into structured command data.\n\n## Scope\n- Tokenize input into command name and arguments\n- Handle quoted strings and escape sequences\n- Support command prefixes (e.g., @, +, \\!)\n- Normalize whitespace and case handling\n\n## Acceptance Criteria\n- [ ] Parser handles single-word commands\n- [ ] Parser handles commands with positional arguments\n- [ ] Parser handles commands with quoted string arguments\n- [ ] Parser handles escape sequences within quotes\n- [ ] Parser handles command prefixes correctly\n- [ ] Parser returns structured Command{Name, Args, Raw} type\n- [ ] Edge cases handled: empty input, whitespace-only, malformed quotes\n- [ ] \u003e90% test coverage with table-driven tests","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:30:29Z","created_by":"seanb4t","updated_at":"2026-02-02T19:34:02Z","closed_at":"2026-02-02T19:34:02Z","dependencies":[{"issue_id":"holomush-wr9.3","depends_on_id":"holomush-3epww","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.3","depends_on_id":"holomush-extfl","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.3","depends_on_id":"holomush-jho46","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.3","depends_on_id":"holomush-rgihb","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.3","depends_on_id":"holomush-sbne4","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.3","depends_on_id":"holomush-tawva","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.3","depends_on_id":"holomush-wd0yy","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.3","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.3","depends_on_id":"holomush-wr9.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.3","depends_on_id":"holomush-wr9.2","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.3","depends_on_id":"holomush-y31o8","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.3","depends_on_id":"holomush-zd2hs","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.30","title":"[E6.fix] Add nil validation to Dispatcher constructor","description":"## Problem\n\n`NewDispatcher()` does not validate that registry and access control are non-nil. A nil registry or access would cause panics on dispatch. Also `SetAliasCache()` allows mutation after construction without synchronization.\n\n## Location\n\n`internal/command/dispatcher.go`\n\n## Acceptance Criteria\n\n- [ ] Add nil validation in NewDispatcher() for registry and access\n- [ ] Return error (or panic) for nil required dependencies\n- [ ] Consider making aliasCache immutable (set at construction) OR protect with mutex\n- [ ] Add test for nil registry/access handling","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T19:15:59Z","created_by":"seanb4t","updated_at":"2026-02-03T19:54:49Z","closed_at":"2026-02-03T19:54:49Z","dependencies":[{"issue_id":"holomush-wr9.30","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.30","depends_on_id":"holomush-wr9.36","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.31","title":"[E6.fix] Add server-side logging to CreateHandler/SetHandler","description":"## Problem\n\nCreateHandler and SetHandler return nil after printing errors to user, but don't log errors server-side. This prevents error tracking/metrics and makes debugging harder.\n\n## Location\n\n`internal/command/handlers/objects.go:27-66, 97-137`\n\n## Current Behavior\n\nError displayed to user via fmt.Fprintf, then return nil.\n\n## Acceptance Criteria\n\n- [ ] Add slog.Error before displaying error to user\n- [ ] Include context: character_id, object_name/property\n- [ ] Keep current behavior (display to user, return nil)\n- [ ] Pattern: log first, then display, then return nil","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T19:16:04Z","created_by":"seanb4t","updated_at":"2026-02-03T20:11:05Z","closed_at":"2026-02-03T20:11:05Z","dependencies":[{"issue_id":"holomush-wr9.31","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.32","title":"[E6.fix] Check affected rows in alias delete operations","description":"## Problem\n\nDeleteSystemAlias and DeletePlayerAlias don't check if any rows were actually deleted. Attempting to delete non-existent alias returns success silently.\n\n## Location\n\n`internal/store/alias.go:80-86, 131-141`\n\n## Acceptance Criteria\n\n- [ ] Check RowsAffected() after DELETE\n- [ ] Log at debug level when nothing deleted\n- [ ] Optionally return ErrNotFound (design decision)\n- [ ] Add test for deleting non-existent alias","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T19:16:08Z","created_by":"seanb4t","updated_at":"2026-02-03T20:13:14Z","closed_at":"2026-02-03T20:13:14Z","dependencies":[{"issue_id":"holomush-wr9.32","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.33","title":"[E6.fix] Log when Broadcaster is nil in handlers","description":"## Problem\n\nMultiple handlers skip broadcasting silently when Broadcaster is nil. If misconfigured in production, critical system messages (shutdown warnings, boot notifications, wall) won't be sent with no indication.\n\n## Location\n\n- `internal/command/handlers/boot.go:59-62`\n- `internal/command/handlers/shutdown.go:52-55`\n- `internal/command/handlers/wall.go:79-84`\n\n## Acceptance Criteria\n\n- [ ] Add slog.Warn when broadcast skipped due to nil Broadcaster\n- [ ] Include operation type and target in log\n- [ ] Consider startup validation (fail fast if Broadcaster nil)\n- [ ] Document expected Broadcaster configuration","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T19:16:13Z","created_by":"seanb4t","updated_at":"2026-02-03T20:14:28Z","closed_at":"2026-02-03T20:14:28Z","dependencies":[{"issue_id":"holomush-wr9.33","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.34","title":"[E6.test] Add chained alias expansion test with arguments","description":"## Problem\n\nAlias tests cover basic resolution and circular detection, but don't verify chained expansion preserves arguments through multiple levels.\n\n## Location\n\n`internal/command/alias_test.go`\n\n## Missing Test\n\nIf alias 'a' expands to 'b extra' and 'b' expands to 'final', then 'a myarg' should become 'final extra myarg'.\n\n## Acceptance Criteria\n\n- [ ] Add TestAliasCache_ChainedExpansionPreservesArgs\n- [ ] Test 2-level chain with arguments at each level\n- [ ] Test 3-level chain\n- [ ] Verify argument ordering is correct","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T19:16:17Z","created_by":"seanb4t","updated_at":"2026-02-03T20:16:03Z","closed_at":"2026-02-03T20:16:03Z","dependencies":[{"issue_id":"holomush-wr9.34","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.34","depends_on_id":"holomush-wr9.23","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.35","title":"[E6.test] Add Dispatcher context cancellation test","description":"## Problem\n\nNo tests verify behavior when context is cancelled during command dispatch (e.g., client disconnects mid-command).\n\n## Location\n\n`internal/command/dispatcher_test.go`\n\n## Missing Test\n\n`TestDispatcher_ContextCancellation` - verify handlers respect context cancellation, no goroutine leaks, proper cleanup.\n\n## Acceptance Criteria\n\n- [ ] Add test with cancelled context\n- [ ] Verify handler receives cancellation\n- [ ] Check no goroutine leaks (goleak or manual)\n- [ ] Document expected cancellation behavior","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T19:16:20Z","created_by":"seanb4t","updated_at":"2026-02-03T20:18:16Z","closed_at":"2026-02-03T20:18:16Z","dependencies":[{"issue_id":"holomush-wr9.35","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.35","depends_on_id":"holomush-wr9.30","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.36","title":"[E6.fix] Add constructor validation to Services type","description":"## Problem\n\nServices struct has no constructor or validation. Nil services would cause runtime panics in handlers. Type design score: 3.5/10.\n\n## Location\n\n`internal/command/types.go`\n\n## Acceptance Criteria\n\n- [ ] Add NewServices() constructor\n- [ ] Validate World, Session, Access, Events, Broadcaster are non-nil\n- [ ] Return error for missing required services\n- [ ] Update callers to use constructor\n- [ ] Add test for nil validation","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T19:16:24Z","created_by":"seanb4t","updated_at":"2026-02-03T19:37:14Z","closed_at":"2026-02-03T19:37:14Z","dependencies":[{"issue_id":"holomush-wr9.36","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.37","title":"[E6.fix] Add validation to Property type","description":"## Problem\n\nProperty struct has no validation. Any value can be set for Type field (should be 'string', 'text', 'number', 'bool'). Name could be empty. Type design score: 3.0/10.\n\n## Location\n\n`pkg/holo/property.go`\n\n## Acceptance Criteria\n\n- [ ] Add NewProperty() constructor with validation\n- [ ] Validate Name is non-empty\n- [ ] Validate Type is one of: string, text, number, bool\n- [ ] Consider defining property types as constants\n- [ ] Add test for validation\n- [ ] PropertyRegistry.Register() should also warn/error on duplicate registration","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T19:16:28Z","created_by":"seanb4t","updated_at":"2026-02-03T19:32:46Z","closed_at":"2026-02-03T19:32:46Z","dependencies":[{"issue_id":"holomush-wr9.37","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.38","title":"[E6.fix] Fix validation tests for special character prefixes","description":"## Problem\n\nThe validation tests in `internal/command/validation_test.go` expect `@create` and `+who` to be **valid** command names, but the design spec clearly states they should be **invalid**.\n\n**Design spec (line 209):**\n\u003e Command names MUST match: `^[a-zA-Z][a-zA-Z0-9_\\!?@#$%^+-]{0,19}$`\n\nThis regex requires names to START with a letter `[a-zA-Z]`. Test cases like `@create` and `+who` start with special characters, so they should fail validation.\n\n## Current Test Cases (WRONG)\n\n```go\n{\"with at prefix\", \"@create\", false},  // wantErr=false means VALID\n{\"with plus prefix\", \"+who\", false},   // wantErr=false means VALID\n```\n\n## Expected Test Cases (CORRECT)\n\n```go\n{\"with at prefix\", \"@create\", true},   // wantErr=true means INVALID\n{\"with plus prefix\", \"+who\", true},    // wantErr=true means INVALID\n```\n\n## Files\n- `internal/command/validation_test.go`\n\n## Acceptance Criteria\n- [ ] Test `@create` expects validation to fail (wantErr=true)\n- [ ] Test `+who` expects validation to fail (wantErr=true)\n- [ ] All validation tests pass\n- [ ] Tests align with design spec pattern","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T21:02:11Z","created_by":"seanb4t","updated_at":"2026-02-03T21:31:12Z","closed_at":"2026-02-03T21:31:12Z","dependencies":[{"issue_id":"holomush-wr9.38","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.39","title":"[E6.fix] Return errors from CreateHandler and SetHandler instead of nil","description":"## Problem\n\nThe `CreateHandler` and `SetHandler` functions in `internal/command/handlers/objects.go` log errors and display messages to users, but then **return nil instead of returning the error**. This masks failures from the dispatcher.\n\n## Current Code (lines 71-78)\n\n```go\nif err := exec.Services.World.CreateObject(ctx, subjectID, obj); err \\!= nil {\n    slog.ErrorContext(ctx, \"create object: CreateObject failed\",\n        \"character_id\", exec.CharacterID,\n        \"object_name\", name,\n        \"error\", err)\n    _, _ = fmt.Fprintf(exec.Output, \"Failed to create object: %v\\n\", err)\n    return nil  // \u003c-- ERROR: Should return the error\n}\n```\n\n## Impact\n- Metrics/monitoring will not track command failures\n- Observability traces will show success when operation failed\n- Error tracking systems will not be notified\n- Downstream systems cannot distinguish success from failure\n\n## Expected Behavior\n\nReturn a wrapped error using the existing `command.WorldError()` function:\n\n```go\nif err := exec.Services.World.CreateObject(ctx, subjectID, obj); err \\!= nil {\n    slog.ErrorContext(ctx, \"create object: CreateObject failed\", ...)\n    return command.WorldError(\"Failed to create object.\", err)\n}\n```\n\n## Files\n- `internal/command/handlers/objects.go` (lines 67-68, 75-77, 91-93, 99-101, 141-143, 148-154, 158-166)\n- `internal/command/handlers/objects_test.go`\n\n## Acceptance Criteria\n- [ ] CreateHandler returns wrapped errors instead of nil on failures\n- [ ] SetHandler returns wrapped errors instead of nil on failures  \n- [ ] Tests verify error return values\n- [ ] Error codes are preserved through the chain","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T21:02:20Z","created_by":"seanb4t","updated_at":"2026-02-03T21:38:30Z","closed_at":"2026-02-03T21:38:30Z","dependencies":[{"issue_id":"holomush-wr9.39","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.4","title":"[E6.1b] Alias system - System + player-level aliases","description":"Implement alias resolution system with system and player-level aliases.\n\n## Scope\n- System-wide alias definitions (admin-managed)\n- Player-level alias definitions (per-player)\n- Alias resolution order (player → system → literal)\n- Alias expansion with argument substitution\n\n## Acceptance Criteria\n- [ ] System aliases defined in configuration\n- [ ] Player aliases stored and retrieved from database\n- [ ] Alias resolution follows correct precedence order\n- [ ] Alias expansion supports $1, $2, $* argument substitution\n- [ ] Recursive alias expansion with cycle detection\n- [ ] CRUD operations for player aliases (@alias command)\n- [ ] Admin operations for system aliases\n- [ ] \u003e90% test coverage","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:30:36Z","created_by":"seanb4t","updated_at":"2026-02-02T19:34:02Z","closed_at":"2026-02-02T19:34:02Z","dependencies":[{"issue_id":"holomush-wr9.4","depends_on_id":"holomush-8qn17","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.4","depends_on_id":"holomush-g3o2u","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.4","depends_on_id":"holomush-j6qe5","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.4","depends_on_id":"holomush-qrm2u","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.4","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.4","depends_on_id":"holomush-wr9.3","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.40","title":"[E6.fix] Add user warning when WhoHandler encounters errors","description":"## Problem\n\nWhen `WhoHandler` in `internal/command/handlers/who.go` encounters unexpected errors looking up characters, it logs the error and continues processing. Users receive an incomplete who list with no indication that data is missing.\n\n## Current Code (lines 41-53)\n\n```go\nchar, err := exec.Services.World.GetCharacter(ctx, subjectID, session.CharacterID)\nif err \\!= nil {\n    if errors.Is(err, world.ErrNotFound) || errors.Is(err, world.ErrPermissionDenied) {\n        continue  // Expected - skip silently\n    }\n    slog.Error(\"unexpected error looking up character in who list\",\n        \"session_char_id\", session.CharacterID.String(),\n        \"error\", err,\n    )\n    continue  // User never knows the list may be incomplete\n}\n```\n\n## Impact\nUsers may see a who list missing players due to database timeouts or other errors, with no way to know the list is incomplete.\n\n## Expected Behavior\n\nTrack error count and display a warning if errors occurred:\n\n```go\nvar errorCount int\n// ... in loop:\n    errorCount++\n    continue\n// ... after loop:\nif errorCount \u003e 0 {\n    fmt.Fprintf(exec.Output, \"(Note: %d players could not be displayed due to errors)\\n\", errorCount)\n}\n```\n\n## Files\n- `internal/command/handlers/who.go`\n- `internal/command/handlers/who_test.go`\n\n## Acceptance Criteria\n- [ ] WhoHandler tracks count of unexpected errors\n- [ ] Warning message displayed to user when errors occur\n- [ ] Message format is user-friendly\n- [ ] Test verifies warning is shown when errors occur","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T21:02:27Z","created_by":"seanb4t","updated_at":"2026-02-03T21:41:38Z","closed_at":"2026-02-03T21:41:38Z","dependencies":[{"issue_id":"holomush-wr9.40","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.41","title":"[E6.fix] Add command execution error logging to Dispatcher","description":"## Problem\n\nWhen a command handler returns an error in `internal/command/dispatcher.go`, the dispatcher records it in the trace span but does not log it. This means command failures only appear in distributed tracing, not in standard logs.\n\n## Current Code (lines 132-133)\n\n```go\nexec.Args = parsed.Args\nexec.InvokedAs = invokedAs\nerr = entry.Handler(ctx, exec)\nreturn err  // Error is returned but not logged\n```\n\n## Impact\nOperations teams monitoring logs (rather than tracing) may miss command execution failures.\n\n## Expected Behavior\n\nAdd logging before returning:\n\n```go\nerr = entry.Handler(ctx, exec)\nif err \\!= nil {\n    slog.WarnContext(ctx, \"command execution failed\",\n        \"command\", parsed.Name,\n        \"character_id\", exec.CharacterID.String(),\n        \"error\", err,\n    )\n}\nreturn err\n```\n\n## Files\n- `internal/command/dispatcher.go`\n- `internal/command/dispatcher_test.go`\n\n## Acceptance Criteria\n- [ ] Command execution errors are logged at warn level\n- [ ] Log includes command name and character ID\n- [ ] Log includes error details\n- [ ] Test verifies log output on handler error","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T21:02:32Z","created_by":"seanb4t","updated_at":"2026-02-03T21:44:17Z","closed_at":"2026-02-03T21:44:17Z","dependencies":[{"issue_id":"holomush-wr9.41","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.42","title":"[E6.fix] Sanitize error messages in objects handlers","description":"## Problem\n\nThe error messages in `internal/command/handlers/objects.go` printed to users include raw error details via `%v` formatting. This may expose internal implementation details, stack traces, or database error messages.\n\n## Current Code\n\n```go\n_, _ = fmt.Fprintf(exec.Output, \"Failed to create object: %v\\n\", err)\n_, _ = fmt.Fprintf(exec.Output, \"Failed to create location: %v\\n\", err)\n_, _ = fmt.Fprintf(exec.Output, \"Failed to set property: %v\\n\", err)\n```\n\n## Impact\nUsers may see confusing internal details like:\n- Database connection errors\n- SQL constraint violation messages\n- Stack traces\n- Internal service names\n\n## Expected Behavior\n\nUse sanitized, user-friendly messages:\n\n```go\n_, _ = fmt.Fprintf(exec.Output, \"Failed to create object. Please try again.\\n\")\n// Or use existing PlayerMessage function:\n_, _ = fmt.Fprintf(exec.Output, \"%s\\n\", command.PlayerMessage(command.WorldError(\"Failed to create object.\", err)))\n```\n\n## Files\n- `internal/command/handlers/objects.go` (lines 67, 76, 92, 101, 142, 149, 159)\n\n## Acceptance Criteria\n- [ ] Error messages to users do not contain raw error details\n- [ ] Messages are user-friendly and actionable\n- [ ] Full error details are still logged server-side\n- [ ] Test verifies user-facing messages are sanitized","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T21:02:37Z","created_by":"seanb4t","updated_at":"2026-02-03T21:53:48Z","closed_at":"2026-02-03T21:53:48Z","dependencies":[{"issue_id":"holomush-wr9.42","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.42","depends_on_id":"holomush-wr9.39","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.43","title":"[E6.docs] Update design spec to reflect Services struct changes","description":"## Problem\n\nThe implementation of `Services` struct in `internal/command/types.go` differs from the design spec in several ways:\n\n**Design spec (lines 92-97):**\n```go\ntype Services struct {\n    World   world.Service\n    Session core.SessionManager\n    Access  access.Evaluator\n    Events  core.EventStore\n}\n```\n\n**Implementation (lines 73-79):**\n```go\ntype Services struct {\n    World       *world.Service\n    Session     core.SessionService\n    Access      access.AccessControl\n    Events      core.EventStore\n    Broadcaster *core.Broadcaster  // Not in spec\n}\n```\n\n## Differences\n1. `World` is pointer type vs value/interface\n2. `Session` uses `SessionService` vs `SessionManager`\n3. `Access` uses `AccessControl` vs `Evaluator`\n4. `Broadcaster` field added (used by boot, shutdown, wall)\n\n## Files\n- `docs/specs/2026-02-02-commands-behaviors-design.md`\n\n## Acceptance Criteria\n- [ ] Design spec updated to match actual interface names\n- [ ] Broadcaster field documented with rationale\n- [ ] Spec notes this is intentional deviation from original design","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T21:02:44Z","created_by":"seanb4t","updated_at":"2026-02-03T21:45:57Z","closed_at":"2026-02-03T21:45:57Z","dependencies":[{"issue_id":"holomush-wr9.43","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.44","title":"[E6.docs] Document capability decision for core commands","description":"## Problem\n\nThe design spec indicates core commands should have explicit capabilities:\n- `look` → `world.look`\n- `move` → `world.move`\n- `quit` → `player.quit`\n- `who` → `player.who`\n\nHowever, the implementation in `internal/command/handlers/register.go` registers these commands WITHOUT capability requirements:\n\n```go\nmustRegister(command.CommandEntry{\n    Name:    \"look\",\n    Handler: LookHandler,\n    // Note: No Capabilities field\n    Help:    \"Look at your surroundings or a target\",\n})\n```\n\nThis may be intentional (default grants cover these), but it differs from the spec.\n\n## Options\n1. **Add capabilities** - Match the spec, require explicit grants\n2. **Document decision** - Update spec to note core commands are unrestricted by design\n\n## Files\n- `docs/specs/2026-02-02-commands-behaviors-design.md`\n- OR `internal/command/handlers/register.go` (if adding capabilities)\n\n## Acceptance Criteria\n- [ ] Decision documented in spec OR capabilities added to code\n- [ ] Rationale for decision is clear\n- [ ] ADR updated if this represents an architectural decision","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T21:02:50Z","created_by":"seanb4t","updated_at":"2026-02-03T21:45:57Z","closed_at":"2026-02-03T21:45:57Z","dependencies":[{"issue_id":"holomush-wr9.44","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.45","title":"[E6.test] Add locked exit behavior test for MoveHandler","description":"## Problem\n\nThe `MoveHandler` tests in `internal/command/handlers/move_test.go` do not include a test case for attempting to use a locked exit.\n\n## Missing Test Case\n\n```go\n{\n    name: \"locked exit shows error\",\n    input: \"go north\",\n    setupMock: func(m *mocks.MockWorldService) {\n        m.EXPECT().GetLocation(...).Return(location, nil)\n        m.EXPECT().GetExit(...).Return(lockedExit, nil)\n        m.EXPECT().CanUseExit(...).Return(false, nil)  // Lock check fails\n    },\n    wantOutput: \"The north exit is locked\",\n    wantErr: false,\n}\n```\n\n## Files\n- `internal/command/handlers/move_test.go`\n\n## Acceptance Criteria\n- [ ] Test case for locked exit attempt\n- [ ] Verifies appropriate error message shown to user\n- [ ] Test passes","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T21:02:54Z","created_by":"seanb4t","updated_at":"2026-02-03T21:48:28Z","closed_at":"2026-02-03T21:48:28Z","dependencies":[{"issue_id":"holomush-wr9.45","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.46","title":"[E6.test] Add registry conflict warning log verification","description":"## Problem\n\nThe registry tests in `internal/command/registry_test.go` verify that command overwrite works correctly, but do not capture/verify that a warning is logged when commands conflict.\n\n## Current Test\n\n```go\nfunc TestRegistry_Register_OverwriteExisting(t *testing.T) {\n    r := command.NewRegistry()\n    r.Register(command.CommandEntry{Name: \"test\", Handler: handler1})\n    r.Register(command.CommandEntry{Name: \"test\", Handler: handler2})\n    // Verifies handler2 is used, but not that warning was logged\n}\n```\n\n## Expected Addition\n\nUse slog test handler to capture and verify warning:\n\n```go\nfunc TestRegistry_Register_LogsWarningOnConflict(t *testing.T) {\n    var buf bytes.Buffer\n    handler := slog.NewTextHandler(\u0026buf, nil)\n    logger := slog.New(handler)\n    slog.SetDefault(logger)\n    \n    r := command.NewRegistry()\n    r.Register(command.CommandEntry{Name: \"test\", Handler: handler1})\n    r.Register(command.CommandEntry{Name: \"test\", Handler: handler2})\n    \n    assert.Contains(t, buf.String(), \"overwriting existing command\")\n}\n```\n\n## Files\n- `internal/command/registry_test.go`\n\n## Acceptance Criteria\n- [ ] Test captures slog output\n- [ ] Verifies warning message contains command name\n- [ ] Test passes","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T21:03:00Z","created_by":"seanb4t","updated_at":"2026-02-03T21:48:28Z","closed_at":"2026-02-03T21:48:28Z","dependencies":[{"issue_id":"holomush-wr9.46","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.47","title":"[E6.test] Add error sanitization assertion for host functions","description":"## Problem\n\nThe test `TestCreateLocationFn_ServiceError` in `internal/plugin/hostfunc/world_write_test.go` verifies the error contains \"internal error\" but does not verify the original database error is NOT leaked.\n\n## Current Test\n\n```go\nfunc TestCreateLocationFn_ServiceError(t *testing.T) {\n    // ... setup ...\n    mockWorld.EXPECT().CreateLocation(...).Return(nil, errors.New(\"database connection failed\"))\n    \n    // Runs function\n    \n    // Verifies error message\n    assert.Contains(t, errStr, \"internal error\")\n    // Missing: assert.NotContains(t, errStr, \"database\")\n}\n```\n\n## Expected Addition\n\n```go\nassert.NotContains(t, errStr, \"database\", \"error should not leak internal details\")\nassert.NotContains(t, errStr, \"connection\", \"error should not leak internal details\")\n```\n\n## Files\n- `internal/plugin/hostfunc/world_write_test.go`\n- Similar tests in `world_test.go`\n\n## Acceptance Criteria\n- [ ] Tests assert internal error details are NOT in user-facing message\n- [ ] Pattern applied to all host function error tests\n- [ ] Tests pass","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T21:03:05Z","created_by":"seanb4t","updated_at":"2026-02-03T21:59:20Z","closed_at":"2026-02-03T21:59:20Z","dependencies":[{"issue_id":"holomush-wr9.47","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.47","depends_on_id":"holomush-wr9.42","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.48","title":"[E6.arch] Refactor Services struct to use interfaces","description":"**Context:** PR review identified that the Services struct in command package uses concrete types instead of interfaces, violating the Go idiom \"accept interfaces, return structs.\"\n\n**Current State:**\n```go\ntype Services struct {\n    World       *world.Service       // ← Concrete type\n    Session     core.SessionService  // ✓ Interface\n    Access      access.AccessControl // ✓ Interface\n    Events      core.EventStore      // ✓ Interface\n    Broadcaster *core.Broadcaster    // ← Concrete type\n}\n```\n\n**Problem:**\n- Harder to test handlers in isolation (need full world.Service)\n- Violates dependency inversion principle\n- Tightly couples command handlers to implementation details\n\n**Solution:**\nDefine minimal interfaces for what handlers actually need:\n```go\ntype WorldService interface {\n    GetLocation(ctx context.Context, subjectID string, id ulid.ULID) (*world.Location, error)\n    GetCharacter(ctx context.Context, subjectID string, id ulid.ULID) (*world.Character, error)\n    // ... other methods handlers use\n}\n\ntype EventBroadcaster interface {\n    Broadcast(event core.Event)\n}\n```\n\n**Files:**\n- `internal/command/types.go` - Define interfaces, update Services struct\n- `internal/command/handlers/*_test.go` - Update tests to use mock interfaces\n\n**Acceptance Criteria:**\n- [ ] WorldService interface defined in command package with methods used by handlers\n- [ ] EventBroadcaster interface defined in command package\n- [ ] Services struct uses interfaces instead of concrete types\n- [ ] All existing tests continue to pass\n- [ ] New tests can mock WorldService without full world.Service setup","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T23:37:15Z","created_by":"seanb4t","updated_at":"2026-02-04T00:45:00Z","closed_at":"2026-02-04T00:45:00Z","dependencies":[{"issue_id":"holomush-wr9.48","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.49","title":"[E6.arch] Extract host function boilerplate helpers","description":"**Context:** PR review identified significant boilerplate duplication across host functions in `internal/plugin/hostfunc/world.go` and `world_write.go`.\n\n**Current State:**\nEvery host function repeats ~50-60 lines of:\n1. Check if worldService is nil\n2. Parse ULID from string\n3. Create context with timeout\n4. Create adapter\n5. Call service method\n6. Handle errors with sanitizeErrorForPlugin\n7. Build Lua table result\n\n**Problem:**\n- Adding new host functions requires copying 50+ lines of boilerplate\n- Bug fixes must be applied in multiple places\n- Code is harder to read due to noise\n\n**Solution:**\nExtract common patterns into helper methods:\n```go\nfunc (f *Functions) withWorldContext(L *lua.LState, pluginName string, fn func(ctx context.Context, adapter *WorldQuerierAdapter) int) int {\n    if f.worldService == nil {\n        return f.pushServiceUnavailable(L, pluginName)\n    }\n    parentCtx := L.Context()\n    if parentCtx == nil {\n        parentCtx = context.Background()\n    }\n    ctx, cancel := context.WithTimeout(parentCtx, defaultPluginQueryTimeout)\n    defer cancel()\n    adapter := NewWorldQuerierAdapter(f.worldService, pluginName)\n    return fn(ctx, adapter)\n}\n\nfunc (f *Functions) requireWorldService(L *lua.LState, pluginName, operation string) bool {\n    // ... nil check with logging\n}\n```\n\n**Files:**\n- `internal/plugin/hostfunc/helpers.go` - New file with helper functions\n- `internal/plugin/hostfunc/world.go` - Refactor to use helpers\n- `internal/plugin/hostfunc/world_write.go` - Refactor to use helpers\n\n**Acceptance Criteria:**\n- [ ] Helper functions extracted to reduce per-function boilerplate by 15-20 lines\n- [ ] All existing host function tests pass\n- [ ] worldService nil check consolidated to single helper\n- [ ] Context creation pattern consolidated\n- [ ] Adding a new host function requires minimal boilerplate","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T23:37:24Z","created_by":"seanb4t","updated_at":"2026-02-04T01:32:31Z","closed_at":"2026-02-04T01:32:31Z","dependencies":[{"issue_id":"holomush-wr9.49","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.49","depends_on_id":"holomush-wr9.56","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.5","title":"[E6.2] Core commands (Go) - look, move, quit, who","description":"Implement core game commands in Go for performance-critical operations.\n\n## Scope\n- look: Examine rooms, objects, players\n- move: Navigate between rooms via exits\n- quit: Graceful session termination\n- who: List connected players\n\n## Acceptance Criteria\n- [ ] look displays room description, contents, exits\n- [ ] look \u003ctarget\u003e examines specific object/player\n- [ ] move handles exit names and aliases\n- [ ] move emits appropriate events for room population\n- [ ] quit saves player state and closes connection gracefully\n- [ ] who shows connected players with idle times\n- [ ] who respects visibility rules (dark players, etc.)\n- [ ] All commands emit appropriate events\n- [ ] All commands provide helpful error messages\n- [ ] \u003e90% test coverage","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:30:42Z","created_by":"seanb4t","updated_at":"2026-02-02T21:07:10Z","closed_at":"2026-02-02T21:07:10Z","dependencies":[{"issue_id":"holomush-wr9.5","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.5","depends_on_id":"holomush-wr9.4","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.50","title":"[E6.error] Use structured errors in resolveTarget","description":"**Context:** PR review identified that `resolveTarget` function uses `fmt.Errorf` instead of structured `oops` errors, losing error codes and context.\n\n**Current State (objects.go:180-202):**\n```go\nfunc resolveTarget(...) (string, ulid.ULID, error) {\n    if strings.HasPrefix(target, \"#\") {\n        id, err := ulid.Parse(target[1:])\n        if err \\!= nil {\n            return \"\", ulid.ULID{}, fmt.Errorf(\"invalid ID: %s\", target)  // No error code\n        }\n    }\n    return \"\", ulid.ULID{}, fmt.Errorf(\"target not found: %s\", target)  // No error code\n}\n```\n\n**Problem:**\n- No error codes for programmatic handling\n- No structured context that could be logged/traced\n- Upstream handlers cannot distinguish ID parse failure vs search failure\n- Missing debug logging for troubleshooting\n\n**Solution:**\nUse `oops` with appropriate codes and add debug logging:\n```go\nif err \\!= nil {\n    slog.Debug(\"resolveTarget: invalid ID format\",\n        \"target\", target,\n        \"error\", err)\n    return \"\", ulid.ULID{}, oops.Code(command.CodeInvalidArgs).\n        With(\"target\", target).\n        Wrap(err, \"invalid target ID format\")\n}\n```\n\n**Files:**\n- `internal/command/handlers/objects.go` - Update resolveTarget function\n\n**Acceptance Criteria:**\n- [ ] resolveTarget uses oops.Code() for all error returns\n- [ ] Error codes distinguish ID parse errors from not-found errors\n- [ ] Debug logging added for failed target lookups\n- [ ] Existing tests continue to pass\n- [ ] Error context includes target value","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T23:37:32Z","created_by":"seanb4t","updated_at":"2026-02-04T00:45:00Z","closed_at":"2026-02-04T00:45:00Z","dependencies":[{"issue_id":"holomush-wr9.50","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.51","title":"[E6.error] Use structured errors in applyProperty functions","description":"**Context:** PR review identified that `applyPropertyToLocation` and `applyPropertyToObject` functions use simple `fmt.Errorf` wrapping, losing error semantics.\n\n**Current State (objects.go:219-255):**\n```go\nfunc applyPropertyToLocation(...) error {\n    loc, err := exec.Services.World.GetLocation(ctx, subjectID, entityID)\n    if err \\!= nil {\n        return fmt.Errorf(\"location not found: %w\", err)  // Loses original error type\n    }\n    if err := exec.Services.World.UpdateLocation(ctx, subjectID, loc); err \\!= nil {\n        return fmt.Errorf(\"update location failed: %w\", err)  // Same issue\n    }\n}\n```\n\n**Problem:**\n- Cannot distinguish not-found from permission-denied errors\n- Cannot distinguish update failures from validation failures\n- All failures get same generic message in SetHandler\n- Harder to debug production issues\n\n**Solution:**\nUse `oops` with proper error codes to preserve error semantics:\n```go\nloc, err := exec.Services.World.GetLocation(ctx, subjectID, entityID)\nif err \\!= nil {\n    return oops.Code(command.CodeWorldError).\n        With(\"entity_type\", \"location\").\n        With(\"entity_id\", entityID.String()).\n        Wrapf(err, \"get location failed\")\n}\n```\n\n**Files:**\n- `internal/command/handlers/objects.go` - Update applyPropertyToLocation and applyPropertyToObject\n\n**Acceptance Criteria:**\n- [ ] Both applyProperty* functions use oops.Code() for errors\n- [ ] Error codes distinguish get failures from update failures\n- [ ] Error context includes entity type and ID\n- [ ] SetHandler can provide more specific error messages based on error code\n- [ ] Existing tests continue to pass","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T23:37:38Z","created_by":"seanb4t","updated_at":"2026-02-04T01:19:39Z","closed_at":"2026-02-04T01:19:39Z","dependencies":[{"issue_id":"holomush-wr9.51","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.51","depends_on_id":"holomush-wr9.50","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.52","title":"[E6.refactor] Extract broadcast event creation helper","description":"**Context:** PR review identified that three admin command handlers create nearly identical `core.Event` structures for broadcasting.\n\n**Current State:**\n```go\n// In boot.go:127-139, wall.go:128-147, shutdown.go:93-110\nevent := core.Event{\n    ID:        ulid.Make(),\n    Stream:    \"...\",\n    Type:      core.EventTypeSystem,\n    Timestamp: time.Now(),\n    Actor: core.Actor{\n        Kind: core.ActorSystem,\n        ID:   \"system\",\n    },\n    Payload: payload,\n}\nexec.Services.Broadcaster.Broadcast(event)\n```\n\n**Problem:**\n- 15+ lines of identical event construction in each handler\n- Changes to event structure must be applied in multiple places\n- Risk of inconsistency between handlers\n\n**Solution:**\nCreate a helper in the command package or on Services:\n```go\nfunc (s *Services) BroadcastSystemMessage(stream, message string) {\n    event := core.Event{\n        ID:        ulid.Make(),\n        Stream:    stream,\n        Type:      core.EventTypeSystem,\n        Timestamp: time.Now(),\n        Actor: core.Actor{\n            Kind: core.ActorSystem,\n            ID:   \"system\",\n        },\n        Payload: map[string]any{\"message\": message},\n    }\n    s.Broadcaster.Broadcast(event)\n}\n```\n\n**Files:**\n- `internal/command/types.go` - Add BroadcastSystemMessage helper\n- `internal/command/handlers/boot.go` - Use helper\n- `internal/command/handlers/wall.go` - Use helper\n- `internal/command/handlers/shutdown.go` - Use helper\n\n**Acceptance Criteria:**\n- [ ] BroadcastSystemMessage helper added to Services\n- [ ] All three admin handlers refactored to use helper\n- [ ] Event structure is consistent across handlers\n- [ ] Existing tests continue to pass","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T23:37:48Z","created_by":"seanb4t","updated_at":"2026-02-04T01:26:21Z","closed_at":"2026-02-04T01:26:21Z","dependencies":[{"issue_id":"holomush-wr9.52","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.52","depends_on_id":"holomush-wr9.48","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.53","title":"[E6.refactor] Simplify alias resolution string building","description":"**Context:** PR review suggested that the string building logic in alias resolution could be simplified.\n\n**Current State (alias.go:222-236):**\n```go\nif lookup.isPrefix {\n    resolved := lookup.resolvedCmd + \" \" + lookup.rest\n    if args \\!= \"\" {\n        resolved = lookup.resolvedCmd + \" \" + lookup.rest + \" \" + args\n    }\n    ...\n}\n// Regular alias: reassemble with original args\nresolved := lookup.resolvedCmd\nif args \\!= \"\" {\n    resolved = lookup.resolvedCmd + \" \" + args\n}\n```\n\n**Problem:**\n- Multiple conditional string concatenations\n- Slightly harder to read and verify correctness\n\n**Solution:**\nUse strings.Join with a slice:\n```go\nparts := []string{lookup.resolvedCmd}\nif lookup.isPrefix {\n    parts = append(parts, lookup.rest)\n}\nif args \\!= \"\" {\n    parts = append(parts, args)\n}\nresolved := strings.Join(parts, \" \")\n```\n\n**Files:**\n- `internal/command/alias.go` - Refactor Resolve method\n\n**Acceptance Criteria:**\n- [ ] String building uses strings.Join pattern\n- [ ] Code is easier to understand at a glance\n- [ ] All existing alias resolution tests pass\n- [ ] Behavior is identical (no functional changes)","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T23:37:54Z","created_by":"seanb4t","updated_at":"2026-02-04T01:21:48Z","closed_at":"2026-02-04T01:21:48Z","dependencies":[{"issue_id":"holomush-wr9.53","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.54","title":"[E6.logging] Change ERROR to DEBUG for user-input validation","description":"**Context:** PR review identified that user-input validation failures are logged at ERROR level, which is inconsistent with their nature.\n\n**Current State (objects.go:51-56):**\n```go\ndefault:\n    slog.ErrorContext(ctx, \"create: unknown entity type\",\n        \"character_id\", exec.CharacterID,\n        \"entity_type\", entityType)\n    _, _ = fmt.Fprintf(exec.Output, \"Unknown type: %s. Use: object, location\\n\", entityType)\n    return nil  // Returns nil - user error, not system error\n```\n\n**Problem:**\n- User input errors are not system errors\n- ERROR level clutters logs with non-actionable entries\n- Operators see false alarms when players make typos\n- Inconsistent with other user-error handling\n\n**Solution:**\nChange log level from ERROR to DEBUG or INFO:\n```go\nslog.DebugContext(ctx, \"create: unknown entity type\",\n    \"character_id\", exec.CharacterID,\n    \"entity_type\", entityType)\n```\n\n**Files:**\n- `internal/command/handlers/objects.go` - Change log level in CreateHandler and SetHandler\n\n**Acceptance Criteria:**\n- [ ] User-input validation failures logged at DEBUG or INFO level\n- [ ] System errors remain at ERROR level\n- [ ] Log filtering can exclude normal user errors\n- [ ] Tests updated if they verify log levels","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T23:38:00Z","created_by":"seanb4t","updated_at":"2026-02-04T01:21:49Z","closed_at":"2026-02-04T01:21:49Z","dependencies":[{"issue_id":"holomush-wr9.54","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.54","depends_on_id":"holomush-wr9.50","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.55","title":"[E6.logging] Add warning for unhandled error codes in PlayerMessage","description":"**Context:** PR review identified that the `PlayerMessage` function has a silent default case for unrecognized error codes.\n\n**Current State (errors.go:102-140):**\n```go\nfunc PlayerMessage(err error) string {\n    // ... switch on error codes ...\n    default:\n        return \"Something went wrong. Try again.\"\n}\n```\n\n**Problem:**\n- New error codes may be added without corresponding user messages\n- Silent default makes it hard to identify missing messages\n- Operators cannot see when this fallback is hit\n\n**Solution:**\nAdd a warning log when the default case is reached:\n```go\ndefault:\n    slog.Warn(\"unhandled error code in PlayerMessage\",\n        \"code\", oopsErr.Code(),\n        \"error\", err)\n    return \"Something went wrong. Try again.\"\n```\n\n**Files:**\n- `internal/command/errors.go` - Add warning in PlayerMessage default case\n\n**Acceptance Criteria:**\n- [ ] Warning logged when unrecognized error code encountered\n- [ ] Log includes error code and original error\n- [ ] Operators can identify when new error codes need messages\n- [ ] Existing functionality unchanged","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T23:38:05Z","created_by":"seanb4t","updated_at":"2026-02-04T01:21:49Z","closed_at":"2026-02-04T01:21:49Z","dependencies":[{"issue_id":"holomush-wr9.55","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.56","title":"[E6.arch] Define explicit WorldMutator interface in hostfunc","description":"**Context:** PR review identified that `world_write.go` uses type assertions to check for WorldMutator capability, creating an implicit dependency on `internal/world.Mutator`.\n\n**Current State (world_write.go:39-45):**\n```go\nmutator, ok := f.worldService.(WorldMutator)\nif \\!ok {\n    slog.Warn(\"create_location called but world service does not support mutations\",\n        \"plugin\", pluginName)\n    L.Push(lua.LNil)\n    L.Push(lua.LString(\"world service does not support mutations\"))\n    return 2\n}\n```\n\n**Problem:**\n- Implicit dependency on internal/world.Mutator type\n- Pattern could be clearer with explicit interface definition\n- Type assertion pattern not documented\n\n**Solution:**\nOption 1: Define explicit interface in hostfunc:\n```go\n// In hostfunc/adapter.go or a new file\ntype WorldMutator interface {\n    CreateLocation(ctx context.Context, subjectID string, loc *world.Location) error\n    CreateExit(ctx context.Context, subjectID string, exit *world.Exit) error\n    CreateObject(ctx context.Context, subjectID string, obj *world.Object) error\n    UpdateLocation(ctx context.Context, subjectID string, loc *world.Location) error\n    UpdateObject(ctx context.Context, subjectID string, obj *world.Object) error\n}\n```\n\nOption 2: Separate fields in Functions struct:\n```go\ntype Functions struct {\n    worldQuerier WorldQuerier  // Always set for read ops\n    worldMutator WorldMutator  // Optional, only for write ops\n}\n```\n\n**Files:**\n- `internal/plugin/hostfunc/adapter.go` - Add WorldMutator interface\n- `internal/plugin/hostfunc/world_write.go` - Update type assertions if needed\n\n**Acceptance Criteria:**\n- [ ] WorldMutator interface explicitly defined in hostfunc package\n- [ ] Dependency on internal/world reduced\n- [ ] Pattern documented with comments\n- [ ] All existing tests pass","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T23:38:13Z","created_by":"seanb4t","updated_at":"2026-02-04T01:26:21Z","closed_at":"2026-02-04T01:26:21Z","dependencies":[{"issue_id":"holomush-wr9.56","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.57","title":"[E6.test] Add dispatcher nil Services test","description":"**Context:** PR review identified a critical test gap - no test verifies behavior when `exec.Services` is nil or when specific services are nil.\n\n**Problem:**\nSeveral handlers (look, move, who, shutdown) access `exec.Services.World` or `exec.Services.Access` without nil checks. A nil Services field would cause a panic.\n\n**Current Coverage Gap:**\n- No test for Dispatcher executing command when exec.Services is nil\n- No test for handler behavior when specific services (World, Access, Session) are nil\n\n**Solution:**\nAdd defensive tests:\n```go\nfunc TestDispatcher_NilServicesField(t *testing.T) {\n    // Test that appropriate error is returned when Services is nil\n    registry := command.NewRegistry()\n    registry.Register(command.CommandEntry{\n        Name:    \"test\",\n        Handler: func(ctx context.Context, exec *command.CommandExecution) error {\n            // Should never reach here\n            return nil\n        },\n    })\n    \n    dispatcher := command.NewDispatcher(registry, mockAccess)\n    exec := \u0026command.CommandExecution{\n        CharacterID: ulid.Make(),\n        Services:    nil,  // nil Services\n        Output:      \u0026bytes.Buffer{},\n    }\n    \n    err := dispatcher.Dispatch(ctx, \"test\", exec)\n    // Verify appropriate error, not panic\n}\n```\n\n**Files:**\n- `internal/command/dispatcher_test.go` - Add nil Services tests\n- `internal/command/dispatcher.go` - Add nil check if needed\n\n**Acceptance Criteria:**\n- [ ] Test verifies dispatcher handles nil Services gracefully (no panic)\n- [ ] Test verifies appropriate error message returned\n- [ ] Dispatcher validates Services before handler execution\n- [ ] Similar tests for individual handlers accessing specific services","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T23:55:59Z","created_by":"seanb4t","updated_at":"2026-02-04T01:19:39Z","closed_at":"2026-02-04T01:19:39Z","dependencies":[{"issue_id":"holomush-wr9.57","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.57","depends_on_id":"holomush-wr9.48","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.58","title":"[E6.test] Add SetHandler 'me' target test","description":"**Context:** PR review identified that the SetHandler's handling of \"me\" target (for character properties) is not tested.\n\n**Current State (objects.go:210-213):**\n```go\ncase \"character\":\n    // Character property setting will be supported in future\n    _, _ = fmt.Fprintln(exec.Output, \"Setting properties on characters is not yet supported.\")\n    return nil\n```\n\n**Problem:**\n- This code path exists but has no test coverage\n- No verification that the user-facing message is appropriate\n- Future changes might accidentally break this behavior\n\n**Solution:**\nAdd a test that verifies the \"me\" target returns the appropriate message:\n```go\nfunc TestSetHandler_CharacterTarget_NotSupported(t *testing.T) {\n    // Setup\n    output := \u0026bytes.Buffer{}\n    exec := \u0026command.CommandExecution{\n        Args:   \"me name NewName\",\n        Output: output,\n        // ... other fields\n    }\n    \n    // Execute\n    err := handlers.SetHandler(ctx, exec)\n    \n    // Verify\n    assert.NoError(t, err)\n    assert.Contains(t, output.String(), \"not yet supported\")\n}\n```\n\n**Files:**\n- `internal/command/handlers/objects_test.go` - Add test for \"me\" target\n\n**Acceptance Criteria:**\n- [ ] Test covers SetHandler when target is \"me\"\n- [ ] Test verifies \"not yet supported\" message is output\n- [ ] Test verifies no error is returned (user-facing error, not system error)\n- [ ] Future implementation changes will have regression protection","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T23:56:19Z","created_by":"seanb4t","updated_at":"2026-02-04T01:21:48Z","closed_at":"2026-02-04T01:21:48Z","dependencies":[{"issue_id":"holomush-wr9.58","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.58","depends_on_id":"holomush-wr9.51","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.59","title":"[E6.test] Add CreateHandler invalid object name test","description":"**Context:** PR review identified that CreateHandler's handling of `world.NewObject` failure due to invalid name is not tested.\n\n**Current State (objects.go:60-70):**\nThe `createObject` function handles NewObject failure but there is no test for this path. This could occur with specially crafted names that pass initial validation but fail deeper validation.\n\n**Problem:**\n- No test for object creation with invalid name\n- Edge case validation not covered\n- Possible to have names that pass regex but fail other constraints\n\n**Solution:**\nAdd test for invalid object name scenario:\n```go\nfunc TestCreateHandler_Object_InvalidName(t *testing.T) {\n    // Setup mock that makes NewObject fail\n    mockWorld := \u0026mockWorldService{}\n    // Configure mock to return validation error from NewObject\n    \n    output := \u0026bytes.Buffer{}\n    exec := \u0026command.CommandExecution{\n        Args:   \"object InvalidName\",  // Name that triggers validation error\n        Output: output,\n        Services: \u0026command.Services{World: mockWorld},\n    }\n    \n    err := handlers.CreateHandler(ctx, exec)\n    \n    // Verify appropriate error handling\n    assert.Error(t, err)  // Or verify user-facing message\n}\n```\n\n**Files:**\n- `internal/command/handlers/objects_test.go` - Add invalid name test\n\n**Acceptance Criteria:**\n- [ ] Test covers CreateHandler when NewObject returns validation error\n- [ ] Test verifies appropriate error/message returned to user\n- [ ] Edge case protection for future refactoring","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-03T23:56:19Z","created_by":"seanb4t","updated_at":"2026-02-04T01:26:21Z","closed_at":"2026-02-04T01:26:21Z","dependencies":[{"issue_id":"holomush-wr9.59","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.6","title":"[E6.3] Communication commands (Lua) - say, pose, emit","description":"Implement communication commands as Lua plugins demonstrating plugin command system.\n\n## Scope\n- say: Speak to room with \"You say\" / \"X says\" formatting\n- pose: Action/emote with player name prefix\n- emit: Admin/narrator text without prefix\n\n## Acceptance Criteria\n- [x] say formats output correctly for speaker and listeners\n- [~] ~~say supports various quote styles (' \" \\`)~~ REMOVED: Simplified to double quotes only\n- [x] pose prepends player name correctly\n- [x] pose supports : and ; variants for different spacing\n- [x] emit works for privileged users only\n- [x] emit broadcasts to room without attribution\n- [x] All commands emit communication events\n- [x] Plugin demonstrates command registration from Lua\n- [x] \u003e85% test coverage","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:30:50Z","created_by":"seanb4t","updated_at":"2026-02-02T21:30:44Z","closed_at":"2026-02-02T21:29:12Z","dependencies":[{"issue_id":"holomush-wr9.6","depends_on_id":"holomush-h76xh","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.6","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.6","depends_on_id":"holomush-wr9.5","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.60","title":"Add capability filtering to list_commands host function","description":"## Problem\n\nThe `list_commands` host function in `internal/plugin/hostfunc/commands.go:29-56` returns ALL registered commands without checking if the character has the required capabilities to execute them.\n\nThe design spec (docs/specs/2026-02-02-commands-behaviors-design.md, lines 554-562) explicitly states:\n\u003e Help MUST only show commands the player can execute\n\n## Current Behavior\n```go\ncommands := f.commandRegistry.All()  // Returns ALL commands, no filtering\n```\n\n## Expected Behavior\nFilter commands by checking if the character has all required capabilities before returning to Lua.\n\n## Acceptance Criteria\n- [ ] `listCommandsFn` accepts character ID from Lua context\n- [ ] `listCommandsFn` checks each command's capabilities against the character\n- [ ] Only commands where character has ALL required capabilities are returned\n- [ ] Unit tests verify capability filtering works correctly\n- [ ] Help plugin shows filtered command list\n\n## Files\n- `internal/plugin/hostfunc/commands.go`\n- `internal/plugin/hostfunc/commands_test.go`\n- `plugins/help/main.lua` (may need to pass character context)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T12:35:58Z","created_by":"seanb4t","updated_at":"2026-02-04T12:47:49Z","closed_at":"2026-02-04T12:47:49Z","dependencies":[{"issue_id":"holomush-wr9.60","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.61","title":"Fix create command help text to match actual syntax","description":"## Problem\n\nThe `create` command's registered help/usage documentation doesn't match the actual command syntax.\n\n**Registered (register.go:191-192):**\n```\nUsage: create \u003cname\u003e\n```\n\n**Actual (objects.go:22-23):**\n```go\n// createPattern matches: create \u003ctype\u003e \"\u003cname\u003e\"\nvar createPattern = regexp.MustCompile(`^(\\w+)\\s+\"([^\"]+)\"$`)\n```\n\nPlayers will see incorrect usage instructions when running `help create`.\n\n## Acceptance Criteria\n- [ ] Update Usage in register.go to: `create \u003ctype\u003e \"\u003cname\u003e\"`\n- [ ] Update HelpText to explain the quoted name requirement\n- [ ] Add examples showing valid usage (e.g., `create location \"The Library\"`)\n- [ ] Verify help output matches actual command behavior\n\n## Files\n- `internal/command/handlers/register.go:191-207`","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T12:36:03Z","created_by":"seanb4t","updated_at":"2026-02-04T12:51:22Z","closed_at":"2026-02-04T12:51:22Z","dependencies":[{"issue_id":"holomush-wr9.61","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.62","title":"Fix set command help text to match actual syntax","description":"## Problem\n\nThe `set` command's registered help/usage documentation doesn't match the actual command syntax.\n\n**Registered (register.go:215):**\n```\nUsage: set \u003cobject\u003e=\u003cproperty\u003e:\u003cvalue\u003e\n```\n\n**Actual (objects.go:114-115):**\n```go\n// setPattern matches: set \u003cproperty\u003e of \u003ctarget\u003e to \u003cvalue\u003e\nvar setPattern = regexp.MustCompile(`^(\\w+)\\s+of\\s+(\\S+)\\s+to\\s+(.+)$`)\n```\n\nPlayers will see incorrect usage instructions when running `help set`.\n\n## Acceptance Criteria\n- [ ] Update Usage in register.go to: `set \u003cproperty\u003e of \u003ctarget\u003e to \u003cvalue\u003e`\n- [ ] Update HelpText to explain the syntax with examples\n- [ ] Add examples showing valid usage (e.g., `set description of here to \"A dusty room\"`)\n- [ ] Verify help output matches actual command behavior\n\n## Files\n- `internal/command/handlers/register.go:215-233`","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T12:36:06Z","created_by":"seanb4t","updated_at":"2026-02-04T12:57:06Z","closed_at":"2026-02-04T12:57:06Z","dependencies":[{"issue_id":"holomush-wr9.62","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.62","depends_on_id":"holomush-wr9.61","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.63","title":"Make Session.UpdateActivity return error instead of silent no-op","description":"## Problem\n\n`SessionManager.UpdateActivity` in `internal/core/session.go:170-182` logs a debug message and returns silently when the session doesn't exist. This silent failure can hide legitimate issues.\n\n**Current behavior:**\n```go\nfunc (sm *SessionManager) UpdateActivity(charID ulid.ULID) {\n    // ...\n    session, exists := sm.sessions[charID]\n    if \\!exists {\n        slog.Debug(\"UpdateActivity: session not found\", ...)\n        return  // Silent no-op\n    }\n    session.LastActivity = time.Now()\n}\n```\n\n**Hidden errors:**\n- Race conditions where session is deleted between command dispatch and activity update\n- Logic errors where UpdateActivity is called with wrong character ID\n- Timing issues in connection/session lifecycle\n\n**User impact:** Incorrect idle time calculations, premature session timeouts, inaccurate who lists.\n\n## Acceptance Criteria\n- [ ] `UpdateActivity` returns `error` when session not found\n- [ ] Error uses oops with code `SESSION_NOT_FOUND`\n- [ ] Callers updated to handle or log the error appropriately\n- [ ] Unit tests verify error is returned for missing session\n- [ ] Document that callers may ignore error for best-effort activity tracking\n\n## Files\n- `internal/core/session.go:170-182`\n- `internal/core/session_test.go`\n- Callers of UpdateActivity (search codebase)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T12:36:13Z","created_by":"seanb4t","updated_at":"2026-02-04T12:51:23Z","closed_at":"2026-02-04T12:51:23Z","dependencies":[{"issue_id":"holomush-wr9.63","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.64","title":"Return validation errors from parseEmitEvents instead of silent skip","description":"## Problem\n\nIn `internal/plugin/lua/host.go:248-259`, when parsing emit events from Lua, invalid entries are logged and silently skipped. Plugins could have events silently dropped due to malformed data.\n\n**Current behavior:**\n```go\ntable.ForEach(func(_, v lua.LValue) {\n    // ...\n    if stream == \"nil\" || stream == \"\" {\n        slog.Warn(\"skipping emit entry\", ...)\n        return  // Silently skip\n    }\n})\n```\n\n**Hidden errors:**\n- Plugin bugs that produce malformed emit tables\n- Typos in field names (e.g., \"streem\" instead of \"stream\")\n- Type confusion (returning wrong data type)\n\n**User impact:** Commands appear to execute but produce no output. User receives no feedback.\n\n## Acceptance Criteria\n- [ ] `parseEmitEvents` returns `([]pluginpkg.EmitEvent, error)`\n- [ ] Validation errors collected and returned with context\n- [ ] Error includes which entries failed and why\n- [ ] Caller handles error by logging and returning error to user\n- [ ] Unit tests verify validation errors are surfaced\n- [ ] Consider: return partial results + error, or fail fast?\n\n## Files\n- `internal/plugin/lua/host.go:248-259`\n- `internal/plugin/lua/host_test.go`","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T12:36:20Z","created_by":"seanb4t","updated_at":"2026-02-04T12:57:06Z","closed_at":"2026-02-04T12:57:06Z","dependencies":[{"issue_id":"holomush-wr9.64","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.64","depends_on_id":"holomush-wr9.63","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.65","title":"Reconcile Services struct documentation between spec and implementation","description":"## Problem\n\nThe design spec and implementation have contradictory documentation about the Services struct type strategy.\n\n**Spec (docs/specs/2026-02-02-commands-behaviors-design.md:100-104):**\n\u003e NOTE: The Services struct uses concrete types rather than interfaces for World and Broadcaster. This is intentional:\n\u003e - World uses pointer type (*world.Service) because the service is stateful\n\n**Implementation (internal/command/types.go:218-224):**\n```go\ntype Services struct {\n    World       WorldService         // Interface, not concrete\n    Session     core.SessionService  // Interface\n    Access      access.AccessControl // Interface\n    Events      core.EventStore      // Interface\n    Broadcaster EventBroadcaster     // Interface\n}\n```\n\nThe spec claims concrete types are \"intentional\" but the implementation uses interfaces throughout.\n\n## Acceptance Criteria\n- [ ] Decide: Keep interfaces (current) or switch to concrete types (spec)\n- [ ] If keeping interfaces: Update spec to document why interfaces were chosen\n- [ ] If switching to concrete: Update types.go and ensure tests still work\n- [ ] Ensure spec and code are consistent\n\n## Files\n- `docs/specs/2026-02-02-commands-behaviors-design.md:100-104`\n- `internal/command/types.go:218-224`","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T12:36:27Z","created_by":"seanb4t","updated_at":"2026-02-04T12:57:06Z","closed_at":"2026-02-04T12:57:06Z","dependencies":[{"issue_id":"holomush-wr9.65","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.66","title":"Add test coverage for ErrTargetNotFound usage in boot handler","description":"## Problem\n\n`ErrTargetNotFound()` in `internal/command/errors.go:98` has 0% test coverage. The function is defined but its usage in `boot.go:138` is not exercised by tests.\n\n**Why it matters:** If the \"target player not found\" path fails, boot commands could crash or return incorrect errors, causing confusion for admins trying to disconnect problem users.\n\n## Acceptance Criteria\n- [ ] Add test case in `boot_test.go` for target not found scenario\n- [ ] Test verifies `ErrTargetNotFound` is returned with correct error code\n- [ ] Test verifies `PlayerMessage()` returns appropriate user-facing message\n- [ ] Coverage for `ErrTargetNotFound` reaches 100%\n\n## Test Case Outline\n```go\nfunc TestBootHandler_TargetNotFound(t *testing.T) {\n    // Setup: no active sessions or character not found\n    // When: boot \u003cnonexistent-player\u003e\n    // Then: should return ErrTargetNotFound with correct error code\n    err := BootHandler(ctx, exec)\n    require.Error(t, err)\n    oopsErr, _ := oops.AsOops(err)\n    assert.Equal(t, command.CodeTargetNotFound, oopsErr.Code())\n}\n```\n\n## Files\n- `internal/command/errors.go:98`\n- `internal/command/handlers/boot.go:138`\n- `internal/command/handlers/boot_test.go`","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T12:36:34Z","created_by":"seanb4t","updated_at":"2026-02-04T12:51:23Z","closed_at":"2026-02-04T12:51:23Z","dependencies":[{"issue_id":"holomush-wr9.66","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.67","title":"Improve type encapsulation for CommandEntry, CommandExecution, Services","description":"## Problem\n\nCore command types have all fields exported and mutable after construction. Constructor validation is good, but post-construction invariants aren't enforced.\n\n**Current state:**\n- `CommandEntry`: All fields public, can be mutated after registration\n- `CommandExecution`: All fields public, handlers could accidentally clear required fields\n- `Services`: All fields public, handlers can swap out services\n\n**Risks:**\n- Registry can't trust entries remain valid after registration\n- Capabilities slice can be modified externally\n- \"Do not store Services\" constraint is documentation-only\n\n## Acceptance Criteria\n- [ ] Evaluate trade-offs: immutability vs API convenience\n- [ ] Option A: Make fields private with getters\n- [ ] Option B: Document immutability contract and rely on code review\n- [ ] If Option A: Update all handlers to use getters\n- [ ] For CommandEntry: Return defensive copy of Capabilities slice\n- [ ] Add compile-time checks where possible\n\n## Example Improvement\n```go\ntype CommandEntry struct {\n    name         string\n    handler      CommandHandler\n    capabilities []string  // Store copy, return copy\n    // ...\n}\n\nfunc (e *CommandEntry) Capabilities() []string {\n    return append([]string(nil), e.capabilities...)  // Defensive copy\n}\n```\n\n## Files\n- `internal/command/types.go`\n- All command handlers (if switching to getters)","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T12:36:42Z","created_by":"seanb4t","updated_at":"2026-02-04T13:05:25Z","closed_at":"2026-02-04T13:05:25Z","dependencies":[{"issue_id":"holomush-wr9.67","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.67","depends_on_id":"holomush-wr9.65","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.68","title":"Clarify circular alias detection logic and improve comments","description":"## Problem\n\nThe `wouldBeCircularLocked` function in `internal/command/alias.go:121-155` has misleading comments about the actual detection logic.\n\n**Current comment (line 126):**\n\u003e If we expanded at all and hit the depth limit, it's circular\n\n**Actual behavior:** The function uses a shallow check by following the alias chain up to MaxExpansionDepth. The comment doesn't accurately describe the algorithm.\n\n**Concerns:**\n- Legitimate deep alias chains could be rejected as \"circular\"\n- Actual circular references might pass if they don't hit depth limit\n- Error from non-existent alias in chain is indistinguishable from circularity\n\n## Acceptance Criteria\n- [ ] Clarify comment to accurately describe the algorithm\n- [ ] Consider implementing proper cycle detection with visited set\n- [ ] Add observability (metrics/logging) for circular detection triggers\n- [ ] Document the difference between circular references and deep chains\n- [ ] Unit tests for edge cases: deep-but-valid chains, actual cycles\n\n## Improved Algorithm (Optional)\n```go\nfunc (c *AliasCache) wouldBeCircularLocked(playerID ulid.ULID, alias string) bool {\n    visited := make(map[string]bool)\n    cmd := alias\n    \n    for depth := 0; depth \u003c MaxExpansionDepth; depth++ {\n        if visited[cmd] {\n            // Found a cycle\n            return true\n        }\n        visited[cmd] = true\n        // ... follow chain ...\n    }\n    return false  // Hit depth limit without finding cycle\n}\n```\n\n## Files\n- `internal/command/alias.go:121-155`\n- `internal/command/alias_test.go`","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T12:36:50Z","created_by":"seanb4t","updated_at":"2026-02-04T13:16:09Z","closed_at":"2026-02-04T13:16:09Z","dependencies":[{"issue_id":"holomush-wr9.68","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.68","depends_on_id":"holomush-wr9.67","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.69","title":"Log output write failures in command handlers","description":"## Problem\n\nMultiple command handlers ignore output write errors with `//nolint:errcheck` comments claiming \"output write error is acceptable; player display is best-effort\".\n\n**Affected files:**\n- `internal/command/handlers/look.go:28`\n- `internal/command/handlers/move.go:65`\n- And others\n\n**Why write failures matter:**\n- Connection closed (player disconnected)\n- Buffer full (network congestion)\n- I/O errors indicating broader problems\n\n**User impact:** Commands execute successfully internally but user sees no output. System appears hung or broken.\n\n## Acceptance Criteria\n- [ ] Log write failures at warn level (don't fail the command)\n- [ ] Include character ID, command name, bytes written, error in log\n- [ ] Consider notifying connection manager about repeated failures\n- [ ] Update nolint comments to explain the logging strategy\n- [ ] Add observability metric for output write failures\n\n## Example Fix\n```go\nn, err := fmt.Fprintf(exec.Output, \"%s\\n%s\\n\", loc.Name, loc.Description)\nif err \\!= nil {\n    slog.Warn(\"failed to write command output\",\n        \"character_id\", exec.CharacterID.String(),\n        \"command\", \"look\",\n        \"bytes_written\", n,\n        \"error\", err)\n    // Still return nil - command succeeded even if output failed\n}\nreturn nil\n```\n\n## Files\n- `internal/command/handlers/look.go`\n- `internal/command/handlers/move.go`\n- Other handlers with output writes","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T12:36:58Z","created_by":"seanb4t","updated_at":"2026-02-04T13:16:09Z","closed_at":"2026-02-04T13:16:09Z","dependencies":[{"issue_id":"holomush-wr9.69","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.69","depends_on_id":"holomush-wr9.67","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.7","title":"[E6.4] Building commands (Lua) - dig, create, describe, link","description":"Implement world-building commands as Lua plugins.\n\n## Scope\n- dig: Create rooms with exits\n- create: Create objects and things\n- describe: Set descriptions on objects\n- link: Create exits between rooms\n\n## Acceptance Criteria\n- [ ] dig creates room and bidirectional exits\n- [ ] dig supports exit name specification\n- [ ] create handles object types (thing, exit, room)\n- [ ] create assigns ownership correctly\n- [ ] describe sets description on owned objects\n- [ ] describe supports multi-line input\n- [ ] link creates unidirectional exit\n- [ ] link validates room references\n- [ ] All commands respect builder permissions\n- [ ] All commands emit appropriate events\n- [ ] \u003e85% test coverage","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:30:56Z","created_by":"seanb4t","updated_at":"2026-02-03T13:38:44Z","closed_at":"2026-02-03T13:38:44Z","dependencies":[{"issue_id":"holomush-wr9.7","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.7","depends_on_id":"holomush-wr9.10","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.7","depends_on_id":"holomush-wr9.11","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.7","depends_on_id":"holomush-wr9.12","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.7","depends_on_id":"holomush-wr9.13","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.7","depends_on_id":"holomush-wr9.14","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.7","depends_on_id":"holomush-wr9.15","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.7","depends_on_id":"holomush-wr9.16","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.7","depends_on_id":"holomush-wr9.17","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.7","depends_on_id":"holomush-wr9.18","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.7","depends_on_id":"holomush-wr9.19","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.7","depends_on_id":"holomush-wr9.20","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.7","depends_on_id":"holomush-wr9.6","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.70","title":"[E6.feat] Implement command rate limiting","description":"**Context:** PR review identified that rate limiting is specified but not implemented.\n\n**Spec Reference:** docs/specs/2026-02-02-commands-behaviors-design.md lines 389-425\n\n**Requirements from spec:**\n- Token bucket algorithm with per-session tracking\n- Default: 10 command burst capacity, 2 commands/second sustained rate\n- Per-session rate limiting as primary dimension\n- Bypass capability: `admin.ratelimit.bypass`\n- Error: `ErrRateLimited(cooldownMs)` with cooldown duration in context\n- Metric: `holomush.command.rate_limited` counter with command label\n\n**Acceptance Criteria:**\n- [ ] Token bucket rate limiter implemented in internal/command/ratelimit.go\n- [ ] Rate limiting integrated into Dispatcher.Dispatch()\n- [ ] Default limits configurable via server settings\n- [ ] admin.ratelimit.bypass capability exempts from limiting\n- [ ] ErrRateLimited error type with cooldown context\n- [ ] Prometheus counter for rate-limited commands\n- [ ] Unit tests for rate limiter\n- [ ] Integration test verifying rate limiting works end-to-end\n\n**Files:**\n- Create: internal/command/ratelimit.go\n- Create: internal/command/ratelimit_test.go\n- Modify: internal/command/dispatcher.go\n- Modify: internal/command/errors.go","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T13:38:13Z","created_by":"seanb4t","updated_at":"2026-02-04T15:13:28Z","closed_at":"2026-02-04T15:13:28Z","dependencies":[{"issue_id":"holomush-wr9.70","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.71","title":"[E6.feat] Implement alias management commands","description":"**Context:** PR review identified that alias management commands are specified but not implemented.\n\n**Spec Reference:** docs/specs/2026-02-02-commands-behaviors-design.md lines 255-276\n\n**Required Commands:**\n| Command | Capability | Description |\n|---------|------------|-------------|\n| alias add \u003calias\u003e=\u003ccommand\u003e | player.alias | Add player alias |\n| alias remove \u003calias\u003e | player.alias | Remove player alias |\n| alias list | player.alias | List player aliases |\n| sysalias add \u003calias\u003e=\u003ccommand\u003e | admin.alias | Add system alias |\n| sysalias remove \u003calias\u003e | admin.alias | Remove system alias |\n| sysalias list | admin.alias | List system aliases |\n\n**Shadow Warnings (spec lines 268-276):**\n- Warn if alias shadows existing command\n- Warn if player alias shadows system alias\n- Warn if replacing own existing alias\n- System alias creation MUST block if shadowing another system alias\n\n**Acceptance Criteria:**\n- [ ] alias add/remove/list commands implemented as Go handlers\n- [ ] sysalias add/remove/list commands implemented as Go handlers\n- [ ] Shadow warnings displayed to user on creation\n- [ ] System alias shadowing blocked (must remove first)\n- [ ] Unit tests for all 6 commands\n- [ ] Integration test for alias management workflow\n\n**Files:**\n- Create: internal/command/handlers/alias.go\n- Create: internal/command/handlers/alias_test.go\n- Modify: internal/command/handlers/register.go\n- Modify: internal/command/alias.go (add shadow detection methods)","status":"closed","priority":1,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T13:38:19Z","created_by":"seanb4t","updated_at":"2026-02-04T15:28:17Z","closed_at":"2026-02-04T15:28:17Z","dependencies":[{"issue_id":"holomush-wr9.71","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.71","depends_on_id":"holomush-wr9.74","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.72","title":"[E6.fix] Boot handler should distinguish 'not found' from 'system error'","description":"**Context:** PR review (silent-failure-hunter) identified that when database errors occur during character search, the user gets \"player not found\" instead of a system error indication.\n\n**Location:** internal/command/handlers/boot.go:121-131\n\n**Current Behavior:**\nWhen findCharacterByName encounters unexpected errors (database failures, timeouts), it:\n1. Logs the error at ERROR level\n2. Continues searching other sessions\n3. If all fail with errors, returns ErrTargetNotFound\n\n**Problem:**\nUser receives \"player not found\" when the real issue is database connectivity. This hides transient failures and misleads users.\n\n**Expected Behavior:**\nTrack error count during search. If unexpected errors occurred and no matches found, return a different error indicating system failure:\n```go\nif errorCount \u003e 0 \u0026\u0026 len(foundChars) == 0 {\n    return ulid.ULID{}, \"\", WorldError(\"Unable to search for player due to system error. Try again.\", lastErr)\n}\n```\n\n**Acceptance Criteria:**\n- [ ] findCharacterByName tracks error count\n- [ ] Returns WorldError when errors occurred but no matches found\n- [ ] User sees \"system error\" message instead of \"not found\" in error scenario\n- [ ] Unit test verifies error aggregation behavior\n- [ ] Original \"not found\" behavior preserved when no errors occur\n\n**Files:**\n- Modify: internal/command/handlers/boot.go\n- Modify: internal/command/handlers/boot_test.go","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T13:38:28Z","created_by":"seanb4t","updated_at":"2026-02-04T14:12:44Z","closed_at":"2026-02-04T14:12:44Z","dependencies":[{"issue_id":"holomush-wr9.72","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.72","depends_on_id":"holomush-wr9.74","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.73","title":"[E6.fix] Help search should include usage field","description":"**Context:** PR review identified that help search doesn't search the usage field as specified.\n\n**Spec Reference:** docs/specs/2026-02-02-commands-behaviors-design.md lines 547-548\n\u003e help search \u003cterm\u003e → Search command name, help, and usage fields\n\n**Location:** plugins/help/main.lua:150-157\n\n**Current Code:**\n```lua\nlocal name_match = cmd.name and cmd.name:lower():find(lower_term, 1, true)\nlocal help_match = cmd.help and cmd.help:lower():find(lower_term, 1, true)\n```\n\n**Missing:**\n```lua\nlocal usage_match = cmd.usage and cmd.usage:lower():find(lower_term, 1, true)\n```\n\n**Impact:**\nUsers cannot find commands by searching for argument patterns like \"message\" (would match \"say \u003cmessage\u003e\" usage).\n\n**Acceptance Criteria:**\n- [ ] Add usage field to search matching\n- [ ] User can find \"say\" command by searching \"message\"\n- [ ] Unit test verifies usage field is searched\n- [ ] Integration test for help search with usage match\n\n**Files:**\n- Modify: plugins/help/main.lua\n- Modify: internal/plugin/help_integration_test.go","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T13:38:34Z","created_by":"seanb4t","updated_at":"2026-02-04T13:48:45Z","closed_at":"2026-02-04T13:48:45Z","dependencies":[{"issue_id":"holomush-wr9.73","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.74","title":"[E6.refactor] Extract output error-handling helper in handlers","description":"**Context:** PR review (architecture) identified duplicated output error-handling pattern across handlers.\n\n**Location:** internal/command/handlers/objects.go (15+ occurrences)\n\n**Current Pattern (repeated 15+ times):**\n```go\nif n, err := fmt.Fprintln(exec.Output, \"message\"); err \\!= nil {\n    logOutputError(ctx, \"cmd\", charID, n, err)\n}\n```\n\n**Proposed Helper:**\n```go\n// writeOutput writes a message to the command output and logs any errors.\nfunc writeOutput(ctx context.Context, exec *CommandExecution, cmd, msg string) {\n    if n, err := fmt.Fprintln(exec.Output, msg); err \\!= nil {\n        logOutputError(ctx, cmd, exec.CharacterID.String(), n, err)\n    }\n}\n\n// writeOutputf writes a formatted message to the command output.\nfunc writeOutputf(ctx context.Context, exec *CommandExecution, cmd, format string, args ...any) {\n    if n, err := fmt.Fprintf(exec.Output, format+\"\\n\", args...); err \\!= nil {\n        logOutputError(ctx, cmd, exec.CharacterID.String(), n, err)\n    }\n}\n```\n\n**Benefits:**\n- Reduces code duplication\n- Ensures consistent error handling\n- Makes handlers more readable\n- Single point of change for output behavior\n\n**Acceptance Criteria:**\n- [ ] Helper functions added to output.go\n- [ ] objects.go refactored to use helpers\n- [ ] Other handlers (boot, wall, who, etc.) refactored\n- [ ] No change in behavior (tests still pass)\n- [ ] Code coverage maintained\n\n**Files:**\n- Modify: internal/command/handlers/output.go\n- Modify: internal/command/handlers/objects.go\n- Modify: internal/command/handlers/boot.go\n- Modify: internal/command/handlers/wall.go\n- Modify: internal/command/handlers/who.go","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T13:38:42Z","created_by":"seanb4t","updated_at":"2026-02-04T13:55:22Z","closed_at":"2026-02-04T13:55:22Z","dependencies":[{"issue_id":"holomush-wr9.74","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.75","title":"[E6.refactor] Deduplicate property getter/setter switch statements","description":"**Context:** PR review (architecture) identified duplicated switch statements in property host functions.\n\n**Location:** internal/plugin/hostfunc/world_write.go\n\n**Current Code:**\n- setPropertyFn (lines 243-308): 65 lines with switch for location/object\n- getPropertyFn (lines 314-371): 57 lines with similar switch\n\nBoth functions have nearly identical switch structures:\n```go\nswitch opts.EntityType {\ncase \"location\":\n    // location-specific logic\ncase \"object\":\n    // object-specific logic (mirrors location logic)\ndefault:\n    // error\n}\n```\n\n**Proposed Refactor:**\nExtract common property operations into a helper that accepts the entity type and property info:\n```go\ntype propertyTarget struct {\n    entityType string\n    entityID   ulid.ULID\n    property   *holo.Property\n    value      any\n}\n\nfunc (f *Functions) setPropertyOnTarget(ctx context.Context, target propertyTarget) error {\n    // Unified implementation\n}\n```\n\n**Acceptance Criteria:**\n- [ ] Common property logic extracted to helper\n- [ ] setPropertyFn and getPropertyFn simplified\n- [ ] No change in behavior (tests still pass)\n- [ ] Code coverage maintained\n- [ ] Easier to add new entity types in future\n\n**Files:**\n- Modify: internal/plugin/hostfunc/world_write.go\n- Add: internal/plugin/hostfunc/property_helpers.go (optional)","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T13:38:49Z","created_by":"seanb4t","updated_at":"2026-02-04T14:19:30Z","closed_at":"2026-02-04T14:19:30Z","dependencies":[{"issue_id":"holomush-wr9.75","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.75","depends_on_id":"holomush-wr9.78","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.76","title":"[E6.test] Add unicode input tests for command parser","description":"**Context:** PR review (test coverage) identified that parser tests don't cover unicode input.\n\n**Location:** internal/command/parser_test.go\n\n**Missing Test Cases:**\n- Command with unicode arguments: `say 你好世界`\n- Command with emoji arguments: `say Hello\\! 👋`\n- Unicode in quotes: `say \"café résumé\"`\n- Mixed ASCII and unicode: `say Hello 世界`\n\n**Why It Matters:**\nPlayers from different locales may type non-ASCII characters. The parser should handle these gracefully.\n\n**Acceptance Criteria:**\n- [ ] Add table-driven tests for unicode input\n- [ ] Parser correctly extracts command name with unicode args\n- [ ] Unicode characters preserved in Args field\n- [ ] Emoji handled correctly\n- [ ] Document any unicode limitations\n\n**Files:**\n- Modify: internal/command/parser_test.go","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T13:38:53Z","created_by":"seanb4t","updated_at":"2026-02-04T13:59:01Z","closed_at":"2026-02-04T13:59:01Z","dependencies":[{"issue_id":"holomush-wr9.76","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.77","title":"[E6.feat] Export OpenTelemetry metrics for commands","description":"**Context:** PR review identified that OTel tracing is implemented but metrics are not.\n\n**Spec Reference:** docs/specs/2026-02-02-commands-behaviors-design.md lines 524-530\n\n**Required Metrics:**\n- holomush.command.executions (counter) - by command name, source, status\n- holomush.command.duration (histogram) - execution latency by command\n- holomush.alias.expansions (counter) - alias usage patterns\n\n**Current State:**\n- Tracing spans are created (dispatcher.go:96-108)\n- No metrics exported\n\n**Implementation Notes:**\n- Use existing OTel infrastructure from Epic 1\n- Register meters in observability package\n- Record metrics in Dispatcher.Dispatch()\n- Record alias expansion in AliasCache.Resolve()\n\n**Acceptance Criteria:**\n- [ ] holomush.command.executions counter registered and recorded\n- [ ] holomush.command.duration histogram registered and recorded\n- [ ] holomush.alias.expansions counter registered and recorded\n- [ ] Metrics have appropriate labels (command, source, status)\n- [ ] Unit tests verify metrics are recorded\n- [ ] Metrics visible in /metrics endpoint\n\n**Files:**\n- Create: internal/command/metrics.go\n- Modify: internal/command/dispatcher.go\n- Modify: internal/command/alias.go\n- Modify: internal/observability/server.go (if needed)","status":"closed","priority":2,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T13:38:59Z","created_by":"seanb4t","updated_at":"2026-02-04T15:57:51Z","closed_at":"2026-02-04T15:57:51Z","dependencies":[{"issue_id":"holomush-wr9.77","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.77","depends_on_id":"holomush-wr9.70","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.78","title":"[E6.type] Make Property.AppliesTo defensively copied","description":"**Context:** PR review (type-design-analyzer) identified that Property.AppliesTo slice could be mutated after construction.\n\n**Location:** pkg/holo/property.go:70-75\n\n**Problem:**\n```go\ntype Property struct {\n    AppliesTo []string  // Mutable reference type\n}\n```\n\nNo defensive copy is made in NewProperty() or when returning from Resolve(). A caller could modify the slice after registration, affecting all subsequent lookups.\n\n**Fix:**\nIn NewProperty(), copy the AppliesTo slice:\n```go\nfunc NewProperty(name string, propType PropertyType, appliesTo ...string) (*Property, error) {\n    // ... validation ...\n    appliesCopy := make([]string, len(appliesTo))\n    copy(appliesCopy, appliesTo)\n    return \u0026Property{\n        AppliesTo: appliesCopy,\n        // ...\n    }, nil\n}\n```\n\nAlso consider making AppliesTo private with a getter that returns a copy.\n\n**Acceptance Criteria:**\n- [ ] NewProperty makes defensive copy of appliesTo\n- [ ] Callers cannot mutate Property.AppliesTo after construction\n- [ ] Unit test verifies mutation protection\n- [ ] No behavior change for existing code\n\n**Files:**\n- Modify: pkg/holo/property.go\n- Modify: pkg/holo/property_test.go","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T13:39:06Z","created_by":"seanb4t","updated_at":"2026-02-04T14:02:22Z","closed_at":"2026-02-04T14:02:22Z","dependencies":[{"issue_id":"holomush-wr9.78","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.79","title":"[E6.type] Make Services struct fields private","description":"**Context:** PR review (type-design-analyzer) suggested enforcing Services immutability at compile time.\n\n**Location:** internal/command/types.go:257-263\n\n**Current State:**\n```go\ntype Services struct {\n    World       WorldService\n    Session     core.SessionManager\n    Access      access.AccessControl\n    Events      core.EventStore\n    Broadcaster EventBroadcaster\n}\n```\n\nFields are public but spec says handlers MUST NOT modify Services. Currently enforced by documentation only.\n\n**Proposed Change:**\nMake fields private with getters:\n```go\ntype Services struct {\n    world       WorldService\n    session     core.SessionManager\n    access      access.AccessControl\n    events      core.EventStore\n    broadcaster EventBroadcaster\n}\n\nfunc (s *Services) World() WorldService { return s.world }\nfunc (s *Services) Session() core.SessionManager { return s.session }\n// ... etc\n```\n\n**Trade-offs:**\n- Pro: Compile-time enforcement of immutability\n- Pro: Clearer API contract\n- Con: More verbose for callers (exec.Services.World() vs exec.Services.World)\n- Con: Significant refactor across all handlers\n\n**Acceptance Criteria:**\n- [ ] Services fields made private\n- [ ] Getter methods added for each field\n- [ ] All handlers updated to use getters\n- [ ] Tests updated\n- [ ] Documentation updated\n\n**Files:**\n- Modify: internal/command/types.go\n- Modify: internal/command/handlers/*.go (all handlers)\n- Modify: internal/command/*_test.go","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T13:39:13Z","created_by":"seanb4t","updated_at":"2026-02-04T16:08:39Z","closed_at":"2026-02-04T16:08:39Z","dependencies":[{"issue_id":"holomush-wr9.79","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.79","depends_on_id":"holomush-wr9.71","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.79","depends_on_id":"holomush-wr9.74","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.8","title":"[E6.5] Admin commands (Go) - boot, shutdown, wall","description":"Implement administrative commands in Go for privileged operations.\n\n## Scope\n- boot: Disconnect a player with optional message\n- shutdown: Graceful server shutdown with countdown\n- wall: Broadcast message to all connected players\n\n## Acceptance Criteria\n- [ ] boot disconnects specified player\n- [ ] boot sends disconnect reason to booted player\n- [ ] boot logs admin action with actor details\n- [ ] shutdown initiates graceful shutdown sequence\n- [ ] shutdown broadcasts countdown warnings\n- [ ] shutdown saves all player state before exit\n- [ ] wall broadcasts to all connected sessions\n- [ ] wall supports different urgency levels\n- [ ] All commands require admin privileges\n- [ ] All commands are logged for audit\n- [ ] \u003e90% test coverage","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:31:01Z","created_by":"seanb4t","updated_at":"2026-02-03T15:08:26Z","closed_at":"2026-02-03T15:08:26Z","dependencies":[{"issue_id":"holomush-wr9.8","depends_on_id":"holomush-olp22","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.8","depends_on_id":"holomush-wb1rr","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.8","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.8","depends_on_id":"holomush-wr9.7","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.8","depends_on_id":"holomush-y0l02","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.80","title":"[E6.fix] Fail instead of fallback when emitter not found","description":"**Context:** PR review (silent-failure-hunter) identified that getEmitter creates a fallback emitter when not found, masking initialization bugs.\n\n**Location:** internal/plugin/hostfunc/stdlib.go:273-282\n\n**Current Behavior:**\n```go\n// Create a new emitter if not found - this indicates RegisterStdlib was not called\nslog.Error(\"emitter not found in Lua state registry, creating fallback emitter\",\n    \"registry_key\", emitterRegistryKey)\nemitter := holo.NewEmitter()\n```\n\n**Problem:**\nThis masks a programming error (missing RegisterStdlib call). Events may be lost or delivered to the wrong destination without any indication to the caller.\n\n**Proposed Fix:**\nReturn nil and have calling code handle appropriately, or panic during initialization:\n\nOption A (return nil):\n```go\nif err \\!= nil {\n    slog.Error(\"critical: emitter not found - events will be lost\",\n        \"hint\", \"RegisterStdlib must be called before emit functions\")\n    return nil\n}\n```\n\nOption B (panic - preferred for init bugs):\n```go\nif err \\!= nil {\n    panic(\"emitter not found: RegisterStdlib was not called\")\n}\n```\n\n**Note:** Related to holomush-29rua which added logging. This bead proposes changing behavior from \"log and continue\" to \"fail fast\".\n\n**Acceptance Criteria:**\n- [ ] getEmitter fails instead of creating fallback\n- [ ] Clear error message indicates RegisterStdlib must be called\n- [ ] Callers handle nil emitter appropriately\n- [ ] Unit test verifies failure behavior\n- [ ] Documentation updated\n\n**Files:**\n- Modify: internal/plugin/hostfunc/stdlib.go\n- Modify: internal/plugin/hostfunc/stdlib_test.go","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T13:39:22Z","created_by":"seanb4t","updated_at":"2026-02-04T14:08:12Z","closed_at":"2026-02-04T14:08:12Z","dependencies":[{"issue_id":"holomush-wr9.80","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.81","title":"fix: persist alias changes to PostgreSQL database","description":"## Problem\n\nAlias handlers (`AliasAddHandler`, `AliasRemoveHandler`, `SysaliasAddHandler`, `SysaliasRemoveHandler`) only update the in-memory `AliasCache` but NEVER call `PostgresAliasRepository` to persist changes.\n\n**Files affected:**\n- `internal/command/handlers/alias.go:77-78, 116, 202-203, 241`\n\n**Impact:**\n- Alias changes are lost on server restart\n- Database and cache become desynchronized\n- No audit trail of alias modifications\n\n## Root Cause\n\nThe handlers call `cache.SetPlayerAlias()` and `cache.SetSystemAlias()` directly without a corresponding database write.\n\n## Acceptance Criteria\n\n- [ ] Add `AliasRepository` interface to `Services` struct\n- [ ] Update `AliasAddHandler` to persist to database before updating cache\n- [ ] Update `AliasRemoveHandler` to persist to database before updating cache  \n- [ ] Update `SysaliasAddHandler` to persist to database before updating cache\n- [ ] Update `SysaliasRemoveHandler` to persist to database before updating cache\n- [ ] Handle rollback if cache update fails after database write\n- [ ] Add integration test verifying aliases survive server restart\n- [ ] Verify existing alias tests still pass","status":"closed","priority":0,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T17:36:04Z","created_by":"seanb4t","updated_at":"2026-02-04T18:09:10Z","closed_at":"2026-02-04T18:09:10Z","dependencies":[{"issue_id":"holomush-wr9.81","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.82","title":"fix: return ErrInvalidArgs from CreateHandler and SetHandler","description":"## Problem\n\n`CreateHandler` and `SetHandler` in `handlers/objects.go` write usage messages directly to output and return `nil` instead of returning structured `ErrInvalidArgs` errors. This breaks the error handling contract.\n\n**Files affected:**\n- `internal/command/handlers/objects.go:28-37, 52-54, 117-119, 123-125`\n\n**Impact:**\n- Metrics tracking (`metricsStatus`) never gets set for these failures\n- Commands appear successful in telemetry when they did nothing useful\n- Error handling patterns inconsistent between handlers\n\n## Acceptance Criteria\n\n- [ ] Update `CreateHandler` to return `command.ErrInvalidArgs(\"create\", \"create \u003ctype\u003e \\\"\u003cname\u003e\\\"\")` for empty args\n- [ ] Update `CreateHandler` to return `command.ErrInvalidArgs` for invalid pattern matches\n- [ ] Update `CreateHandler` to return `command.ErrInvalidArgs` for unknown entity types\n- [ ] Update `SetHandler` to return `command.ErrInvalidArgs` for empty args\n- [ ] Update `SetHandler` to return `command.ErrInvalidArgs` for invalid pattern matches\n- [ ] Verify metrics correctly record `invalid_args` status for these cases\n- [ ] Update or add tests verifying error returns","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T17:36:10Z","created_by":"seanb4t","updated_at":"2026-02-04T18:12:56Z","closed_at":"2026-02-04T18:12:56Z","dependencies":[{"issue_id":"holomush-wr9.82","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.83","title":"fix: add character_id to ListCommandsRequest proto","description":"## Problem\n\nThe proto definition for `ListCommandsRequest` is empty, but the spec and Go implementation require a `character_id` parameter to filter commands by capabilities.\n\n**Files affected:**\n- `api/proto/holomush/plugin/v1/hostfunc.proto:192-193`\n\n**Spec reference (lines 563-572):**\n```go\nfunc AvailableCommands(ctx context.Context, charID ulid.ULID) []CommandEntry {\n    var available []CommandEntry\n    for _, entry := range registry.All() {\n        if hasAllCapabilities(ctx, charID, entry.Capabilities) {\n            available = append(available, entry)\n        }\n    }\n    return available\n}\n```\n\n**Current proto:**\n```protobuf\nmessage ListCommandsRequest {}\n```\n\n**Impact:**\n- Proto definition inconsistent with spec and implementation\n- Would affect gRPC binary plugins (not Lua which uses host function directly)\n\n## Acceptance Criteria\n\n- [ ] Add `character_id` field to `ListCommandsRequest` in proto\n- [ ] Regenerate Go code from proto\n- [ ] Verify Lua host function still works correctly\n- [ ] Update any documentation referencing the proto","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T17:36:16Z","created_by":"seanb4t","updated_at":"2026-02-04T18:15:29Z","closed_at":"2026-02-04T18:15:29Z","dependencies":[{"issue_id":"holomush-wr9.83","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.84","title":"fix: add debug logging for nil broadcaster in BroadcastSystemMessage","description":"## Problem\n\n`BroadcastSystemMessage` silently returns without any logging when the broadcaster is nil, masking configuration issues.\n\n**File affected:**\n- `internal/command/types.go:333-336`\n\n**Current code:**\n```go\nfunc (s *Services) BroadcastSystemMessage(stream, message string) {\n    if s.broadcaster == nil {\n        return  // Silent return - no logging\n    }\n    // ...\n}\n```\n\n**Impact:**\n- Configuration errors where broadcaster was never set up go undetected\n- Admin broadcasts during shutdown may fail silently\n- Events silently disappear without debugging information\n\n## Acceptance Criteria\n\n- [ ] Add `slog.Debug` logging when broadcaster is nil\n- [ ] Log should include stream name and message length for debugging\n- [ ] Verify existing tests still pass\n- [ ] Consider adding metric for dropped broadcasts (optional)","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T17:36:20Z","created_by":"seanb4t","updated_at":"2026-02-04T18:22:44Z","closed_at":"2026-02-04T18:22:44Z","dependencies":[{"issue_id":"holomush-wr9.84","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.85","title":"fix: return validation errors from plugin emit parsing","description":"## Problem\n\nWhen plugins return malformed emit events, validation errors are logged but the function returns `nil` for the error, allowing execution to continue with partial results.\n\n**Files affected:**\n- `internal/plugin/lua/host.go:176-184, 228-234`\n\n**Current code:**\n```go\nemits, validationErrs := h.parseEmitEvents(ret)\nif len(validationErrs) \u003e 0 {\n    slog.Warn(\"plugin emit validation errors\",\n        \"plugin\", name,\n        \"error_count\", len(validationErrs),\n        \"errors\", validationErrs)\n}\nreturn emits, nil  // Returns nil error even with validation failures\n```\n\n**Impact:**\n- Plugin bugs that produce invalid emit events go undetected\n- Events may be silently dropped\n- Plugin developers don't get immediate feedback about errors\n\n## Acceptance Criteria\n\n- [ ] Add Prometheus metric for plugin emit validation errors\n- [ ] Consider returning multi-error when validation fails (design decision)\n- [ ] Document the current behavior if intentional partial-success is desired\n- [ ] Add test verifying validation error behavior","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T17:36:26Z","created_by":"seanb4t","updated_at":"2026-02-04T18:29:19Z","closed_at":"2026-02-04T18:29:19Z","dependencies":[{"issue_id":"holomush-wr9.85","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.85","depends_on_id":"holomush-wr9.83","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.86","title":"fix: schedule periodic RateLimiter cleanup to prevent memory leak","description":"## Problem\n\n`RateLimiter.Cleanup` method exists but there's no mechanism to schedule its periodic execution. The docstring says it \"Should be called periodically to prevent memory leaks\" but this is never enforced.\n\n**File affected:**\n- `internal/command/ratelimit.go:146-156`\n\n**Current code:**\n```go\n// Cleanup removes sessions that haven't been seen since maxAge ago.\n// Should be called periodically to prevent memory leaks from disconnected\n// sessions.\nfunc (rl *RateLimiter) Cleanup(maxAge time.Duration) {\n    // ...\n}\n```\n\n**Impact:**\n- Memory leaks from accumulating stale session buckets\n- Gradual performance degradation on long-running servers\n- No errors occur - silent resource exhaustion\n\n## Acceptance Criteria\n\n- [ ] Option A: Add background goroutine in `NewRateLimiter` that periodically calls `Cleanup`\n- [ ] Option B: Hook cleanup into session termination events\n- [ ] Option C: Document that callers MUST schedule cleanup and add test to verify\n- [ ] Add metric tracking number of rate limiter sessions\n- [ ] Add integration test verifying cleanup removes stale sessions","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T17:36:32Z","created_by":"seanb4t","updated_at":"2026-02-04T18:21:50Z","closed_at":"2026-02-04T18:21:50Z","dependencies":[{"issue_id":"holomush-wr9.86","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.87","title":"test: add MinSustainedRate enforcement test for RateLimiter","description":"## Problem\n\nThe `RateLimiter` validates that `SustainedRate` is at least `MinSustainedRate` (0.1), but this enforcement is never tested. Tests only check zero/negative values use defaults, not the minimum bound.\n\n**File affected:**\n- `internal/command/ratelimit_test.go`\n\n**Code path not tested (ratelimit.go:73-81):**\n```go\nsustainedRate := cfg.SustainedRate\nif sustainedRate \u003c= 0 {\n    sustainedRate = DefaultSustainedRate\n}\n// This branch is not tested:\nif sustainedRate \u003c MinSustainedRate {\n    sustainedRate = MinSustainedRate\n}\n```\n\n**Impact:**\nIf code changes to allow values between 0 and MinSustainedRate, the system could become unstable with extremely slow token refill rates.\n\n## Acceptance Criteria\n\n- [ ] Add test case for sustained rate between 0 and MinSustainedRate (e.g., 0.05)\n- [ ] Verify it gets clamped to MinSustainedRate (0.1)\n- [ ] Add test case for exactly MinSustainedRate to ensure boundary behavior\n- [ ] Document the minimum rate requirement in test comment","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T17:36:42Z","created_by":"seanb4t","updated_at":"2026-02-04T18:25:40Z","closed_at":"2026-02-04T18:25:40Z","dependencies":[{"issue_id":"holomush-wr9.87","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.87","depends_on_id":"holomush-wr9.86","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.88","title":"test: add parseAliasDefinition whitespace edge case tests","description":"## Problem\n\nThe `parseAliasDefinition` function trims whitespace from both alias and command. Tests exist for empty alias and empty command, but not for edge cases with whitespace.\n\n**File affected:**\n- `internal/command/handlers/alias_test.go`\n\n**Missing test cases:**\n- `=` (both alias and command empty after trim)\n- `  l = look  ` (leading/trailing whitespace around both parts)\n- `l=  ` (whitespace-only command after equals)\n- `  =look` (whitespace-only alias before equals)\n\n**Code path:**\n```go\nalias = strings.TrimSpace(args[:idx])\ncmd = strings.TrimSpace(args[idx+1:])\n```\n\n## Acceptance Criteria\n\n- [ ] Add test case for `=` returning error (both empty)\n- [ ] Add test case for `  l = look  ` parsing correctly to alias=\"l\", cmd=\"look\"\n- [ ] Add test case for `l=  ` returning error (empty command after trim)\n- [ ] Add test case for `  =look` returning error (empty alias after trim)\n- [ ] Verify existing whitespace handling tests still pass","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T17:36:47Z","created_by":"seanb4t","updated_at":"2026-02-04T18:27:20Z","closed_at":"2026-02-04T18:27:20Z","dependencies":[{"issue_id":"holomush-wr9.88","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.88","depends_on_id":"holomush-wr9.81","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.89","title":"test: add RemovePlayerAlias nil map path test","description":"## Problem\n\n`TestAliasCache_RemovePlayerAlias_NonExistent` tests removing a nonexistent alias from an existing player, but not from a player who has never had any aliases loaded. This is a different code path.\n\n**File affected:**\n- `internal/command/alias_test.go`\n\n**Code path not tested:**\n```go\nfunc (c *AliasCache) RemovePlayerAlias(playerID ulid.ULID, alias string) {\n    if c.playerAliases[playerID] \\!= nil {  // This nil check is not tested\n        delete(c.playerAliases[playerID], alias)\n    }\n}\n```\n\n**Missing test case:**\n- Call `RemovePlayerAlias` for a player ID that has never been added to the cache (no `LoadPlayerAliases` or `SetPlayerAlias` called for that ID)\n\n## Acceptance Criteria\n\n- [ ] Add test case creating fresh AliasCache with no player aliases\n- [ ] Call `RemovePlayerAlias` with a new ULID that was never seen\n- [ ] Verify no panic occurs (graceful no-op)\n- [ ] Verify cache state remains consistent","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T17:36:53Z","created_by":"seanb4t","updated_at":"2026-02-04T18:27:15Z","closed_at":"2026-02-04T18:27:15Z","dependencies":[{"issue_id":"holomush-wr9.89","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.89","depends_on_id":"holomush-wr9.81","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.9","title":"[E6.6] Help system (Lua) - help with plugin-contributed entries","description":"Implement help system with plugin-contributed help entries.\n\n## Scope\n- help command with topic lookup\n- Plugin help contribution mechanism\n- Help topic categories and indexing\n- Search functionality for help topics\n\n## Acceptance Criteria\n- [ ] help without args shows available categories\n- [ ] help \u003ctopic\u003e displays specific help entry\n- [ ] help \u003cpartial\u003e finds matching topics\n- [ ] Plugins can register help entries via API\n- [ ] Help entries support markdown-like formatting\n- [ ] Help topics are categorized (commands, building, admin, etc.)\n- [ ] Search finds topics by keyword in title and content\n- [ ] Core commands have help entries\n- [ ] Plugin commands include help entries\n- [ ] \u003e85% test coverage","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:31:06Z","created_by":"seanb4t","updated_at":"2026-02-03T16:32:05Z","closed_at":"2026-02-03T16:32:05Z","dependencies":[{"issue_id":"holomush-wr9.9","depends_on_id":"holomush-hu36m","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.9","depends_on_id":"holomush-vgv1q","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.9","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.9","depends_on_id":"holomush-wr9.8","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.90","title":"docs: fix validation regex comment to match escaped hyphen in code","description":"## Problem\n\nThe comment shows the pattern as `^[a-zA-Z][a-zA-Z0-9_\\!?@#$%^+-]{0,19}$` but the actual regex uses `\\-` (escaped hyphen).\n\n**File affected:**\n- `internal/command/validation.go:18-21`\n\n**Current:**\n```go\n// Pattern: ^[a-zA-Z][a-zA-Z0-9_\\!?@#$%^+-]{0,19}$\nvar commandNameRegex = regexp.MustCompile(`^[a-zA-Z][a-zA-Z0-9_\\!?@#$%^+\\-]{0,19}$`)\n```\n\nWhile functionally equivalent, the comment should match the actual code to avoid confusion during code review.\n\n## Acceptance Criteria\n\n- [ ] Update comment to show escaped hyphen: `^[a-zA-Z][a-zA-Z0-9_\\!?@#$%^+\\-]{0,19}$`\n- [ ] OR update code to use unescaped hyphen (at end of char class, escaping is optional)\n- [ ] Add comment explaining why hyphen escaping choice was made","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T17:36:58Z","created_by":"seanb4t","updated_at":"2026-02-04T18:23:39Z","closed_at":"2026-02-04T18:23:39Z","dependencies":[{"issue_id":"holomush-wr9.90","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.91","title":"docs: fix who command help text to say idle time not connection duration","description":"## Problem\n\nThe help text for the `who` command says \"Shows character names and how long they've been connected\" but the actual implementation shows **idle time** (time since last activity), not connection duration.\n\n**Files affected:**\n- `internal/command/handlers/register.go:92-96` (help text)\n- `internal/command/handlers/who.go:59` (implementation)\n\n**Implementation:**\n```go\nidleTime := now.Sub(session.LastActivity)\n```\n\n**Current help text:**\n\"Shows character names and how long they've been connected\"\n\n## Acceptance Criteria\n\n- [ ] Update help text to: \"Shows character names and their idle times (time since last activity)\"\n- [ ] Verify the detailed HelpText markdown is also accurate\n- [ ] Run `task lint` to ensure no markdown issues","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T17:37:02Z","created_by":"seanb4t","updated_at":"2026-02-04T18:23:14Z","closed_at":"2026-02-04T18:23:14Z","dependencies":[{"issue_id":"holomush-wr9.91","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.92","title":"docs: update Resolve godoc to document prefix alias semantics","description":"## Problem\n\nThe `Resolve` method's godoc comment lists resolution order but omits the crucial detail that prefix aliases only match single-character prefixes attached to text (e.g., `:waves`).\n\n**File affected:**\n- `internal/command/alias.go:273-280`\n\n**Current comment mentions:**\n1. Check if input matches a registered command name\n2. Check player aliases\n3. Check system aliases\n4. (Prefix aliases not clearly documented)\n5. No match -\u003e return original\n\n**Missing information:**\n- Prefix aliases only match when a single character is attached to text\n- Example: \":\" for \":waves\" -\u003e \"pose waves\"\n\n## Acceptance Criteria\n\n- [ ] Update godoc to explicitly document prefix alias matching semantics\n- [ ] Include example: \":\" prefix alias for \":waves\" -\u003e \"pose waves\"\n- [ ] Clarify that prefix aliases require single-char + attached text\n- [ ] Run `go doc` to verify rendered documentation is clear","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T17:37:08Z","created_by":"seanb4t","updated_at":"2026-02-04T18:30:06Z","closed_at":"2026-02-04T18:30:06Z","dependencies":[{"issue_id":"holomush-wr9.92","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-wr9.92","depends_on_id":"holomush-wr9.81","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.93","title":"[E6.fix] Add logging for silent JSON marshal failure in Emitter","description":"## Summary\nThe `emit` method in `pkg/holo/emit.go:56-60` silently swallows JSON encoding errors and substitutes an empty payload without any logging. This masks potentially serious issues.\n\n## Current Behavior\n```go\npayloadJSON, err := json.Marshal(payload)\nif err \\!= nil {\n    payloadJSON = []byte(\"{}\")  // SILENTLY FAILS - no logging\n}\n```\n\n## Problem\nThis could hide:\n- Plugin bugs passing invalid data structures (circular refs, functions, channels)\n- Memory corruption causing invalid data\n- Encoding errors from user-generated content\n- NaN/Inf float values in payloads\n\nPlayers might see incomplete messages or missing information with no indication to operators.\n\n## Acceptance Criteria\n- [ ] Add `slog.Error` call when JSON marshal fails with stream, event_type, and error context\n- [ ] Add unit test verifying logging occurs on marshal failure\n- [ ] Consider if we should return error instead of continuing with empty payload\n\n## Files\n- `pkg/holo/emit.go:56-60`\n- `pkg/holo/emit_test.go`","status":"closed","priority":0,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T18:41:36Z","created_by":"seanb4t","updated_at":"2026-02-04T18:54:01Z","closed_at":"2026-02-04T18:54:01Z","dependencies":[{"issue_id":"holomush-wr9.93","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.94","title":"[E6.fix] Add missing error codes to PlayerMessage","description":"## Summary\nThe `PlayerMessage` function in `internal/command/errors.go:119-170` doesn't handle `INVALID_NAME` or `NO_ALIAS_CACHE` error codes, causing users to see generic 'Something went wrong' messages instead of helpful validation feedback.\n\n## Missing Error Codes\n1. **INVALID_NAME** - Used by `ValidateAliasName` and `ValidateCommandName` in validation.go\n2. **NO_ALIAS_CACHE** - Used in alias.go when alias cache is nil\n\n## Current Behavior\nUsers attempting to create aliases with invalid names see:\n\u003e Something went wrong. Try again.\n\nInstead of helpful messages like:\n\u003e Alias name cannot be empty\n\n## Acceptance Criteria\n- [ ] Add case for `INVALID_NAME` that extracts the error message which contains helpful context\n- [ ] Add case for `NO_ALIAS_CACHE` with message: 'Alias system is not available. Contact the server administrator.'\n- [ ] Add unit tests for both new error code cases\n- [ ] Verify PlayerMessage handles all error codes defined in errors.go\n\n## Files\n- `internal/command/errors.go:119-170`\n- `internal/command/errors_test.go`\n- `internal/command/handlers/alias.go:18-25` (defines CodeNoAliasCache)","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T18:41:42Z","created_by":"seanb4t","updated_at":"2026-02-04T18:59:20Z","closed_at":"2026-02-04T18:59:20Z","dependencies":[{"issue_id":"holomush-wr9.94","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.95","title":"[E6.arch] Consolidate AliasRepository interface definitions","description":"## Summary\nTwo interfaces with the same name `AliasRepository` exist in different packages with different methods, creating maintenance confusion.\n\n## Current State\n```go\n// internal/command/types.go (lines 68-77) - narrower interface\ntype AliasRepository interface {\n    SetSystemAlias(ctx context.Context, alias, command, createdBy string) error\n    DeleteSystemAlias(ctx context.Context, alias string) error\n    SetPlayerAlias(ctx context.Context, playerID ulid.ULID, alias, command string) error\n    DeletePlayerAlias(ctx context.Context, playerID ulid.ULID, alias string) error\n}\n\n// internal/store/alias.go (lines 15-25) - fuller interface\ntype AliasRepository interface {\n    GetSystemAliases(ctx context.Context) (map[string]string, error)\n    SetSystemAlias(ctx context.Context, alias, command, createdBy string) error\n    DeleteSystemAlias(ctx context.Context, alias string) error\n    GetPlayerAliases(ctx context.Context, playerID ulid.ULID) (map[string]string, error)\n    SetPlayerAlias(ctx context.Context, playerID ulid.ULID, alias, command string) error\n    DeletePlayerAlias(ctx context.Context, playerID ulid.ULID, alias string) error\n}\n```\n\n## Impact\nHaving two interfaces with the same name creates confusion when navigating code.\n\n## Options\n1. Rename command package interface to `AliasWriter` (only write operations)\n2. Move single definition to a shared package\n3. Document the intentional narrowing with clear comments\n\n## Acceptance Criteria\n- [ ] Choose an approach and document decision\n- [ ] Either rename or consolidate interfaces\n- [ ] Update all usages if interface is renamed\n- [ ] Add comments explaining interface relationship if kept separate\n\n## Files\n- `internal/command/types.go:68-77`\n- `internal/store/alias.go:15-25`","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T18:41:50Z","created_by":"seanb4t","updated_at":"2026-02-04T19:04:37Z","closed_at":"2026-02-04T19:04:37Z","dependencies":[{"issue_id":"holomush-wr9.95","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.96","title":"[E6.docs] Sync alias command naming between spec and implementation","description":"## Summary\nThe design spec and implementation disagree on alias command naming.\n\n## Spec (docs/specs/2026-02-02-commands-behaviors-design.md lines 263-276)\n```\n| alias add \u003calias\u003e=\u003ccommand\u003e    | player.alias | Add player alias    |\n| alias remove \u003calias\u003e           | player.alias | Remove player alias |\n| alias list                     | player.alias | List player aliases |\n```\n\n## Implementation (internal/command/handlers/register.go:245-396)\n- `alias \u003calias\u003e=\u003ccommand\u003e` - Add player alias (no subcommand)\n- `unalias \u003calias\u003e` - Remove player alias\n- `aliases` - List player aliases\n\n## Analysis\nThe implementation uses separate, shorter commands which is likely intentional for better UX (MUSH tradition uses shorter commands).\n\n## Acceptance Criteria\n- [ ] Confirm the implementation approach is intentional\n- [ ] Update design spec to match implementation if intentional\n- [ ] OR update implementation to match spec if the spec is authoritative\n- [ ] Ensure help text matches whichever approach is chosen\n\n## Files\n- `docs/specs/2026-02-02-commands-behaviors-design.md:263-276`\n- `internal/command/handlers/register.go:245-396`\n- `internal/command/handlers/alias.go`","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T18:41:57Z","created_by":"seanb4t","updated_at":"2026-02-04T19:05:45Z","closed_at":"2026-02-04T19:05:45Z","dependencies":[{"issue_id":"holomush-wr9.96","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.97","title":"[E6.docs] Update spec metric names to Prometheus conventions","description":"## Summary\nThe design spec uses dot-notation for metrics, but the implementation correctly uses Prometheus underscore conventions.\n\n## Spec (lines 536-539)\n```\n- holomush.command.executions (counter)\n- holomush.command.duration (histogram)\n- holomush.alias.expansions (counter)\n```\n\n## Implementation (internal/command/metrics.go)\n```go\nName: \"holomush_command_executions_total\",\nName: \"holomush_command_duration_seconds\",\nName: \"holomush_alias_expansions_total\",\n```\n\n## Analysis\nThe implementation follows Prometheus naming conventions:\n- Underscores instead of dots\n- `_total` suffix for counters\n- `_seconds` suffix for histograms\n\nThis is correct. The spec should be updated to match.\n\n## Acceptance Criteria\n- [ ] Update spec metric names to use underscore notation\n- [ ] Add `_total` and `_seconds` suffixes per Prometheus conventions\n- [ ] Add brief note that this follows Prometheus best practices\n\n## Files\n- `docs/specs/2026-02-02-commands-behaviors-design.md:536-539`","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T18:42:02Z","created_by":"seanb4t","updated_at":"2026-02-04T19:09:17Z","closed_at":"2026-02-04T19:09:17Z","dependencies":[{"issue_id":"holomush-wr9.97","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.98","title":"[E6.fix] Protect RateLimiter.Close() with sync.Once","description":"## Summary\nThe `RateLimiter.Close()` method can panic if called twice because it closes an already-closed channel.\n\n## Current Implementation\n```go\nfunc (rl *RateLimiter) Close() {\n    close(rl.stopCh)  // PANIC if called twice\n    rl.wg.Wait()\n}\n```\n\n## Problem\nIf `Close()` is called multiple times (e.g., in cleanup code or during shutdown), the second call will panic with 'close of closed channel'.\n\n## Solution\nProtect with `sync.Once`:\n```go\ntype RateLimiter struct {\n    // ...\n    closeOnce sync.Once\n}\n\nfunc (rl *RateLimiter) Close() {\n    rl.closeOnce.Do(func() {\n        close(rl.stopCh)\n    })\n    rl.wg.Wait()\n}\n```\n\n## Acceptance Criteria\n- [ ] Add `closeOnce sync.Once` field to RateLimiter struct\n- [ ] Wrap channel close in `closeOnce.Do()`\n- [ ] Add test verifying double-close is safe\n- [ ] Ensure `wg.Wait()` still waits even on subsequent calls\n\n## Files\n- `internal/command/ratelimit.go`\n- `internal/command/ratelimit_test.go`","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T18:42:08Z","created_by":"seanb4t","updated_at":"2026-02-04T19:08:07Z","closed_at":"2026-02-04T19:08:07Z","dependencies":[{"issue_id":"holomush-wr9.98","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wr9.99","title":"[E6.type] Make CommandExecution critical fields private with getters","description":"## Summary\nThe `CommandExecution` struct has public fields that handlers should only read (`CharacterID`, `Services`, `Output`). Making these private with getters would prevent accidental modification.\n\n## Current State\nAll fields in `CommandExecution` are public:\n```go\ntype CommandExecution struct {\n    CharacterID   ulid.ULID    // Should be read-only for handlers\n    LocationID    ulid.ULID    // Should be read-only for handlers  \n    CharacterName string       // Should be read-only for handlers\n    PlayerID      ulid.ULID    // Should be read-only for handlers\n    SessionID     ulid.ULID    // Should be read-only for handlers\n    Args          string       // Intentionally mutable (set by dispatcher)\n    InvokedAs     string       // Intentionally mutable (set by dispatcher)\n    Output        io.Writer    // Should be read-only for handlers\n    Services      *Services    // Should be read-only for handlers\n}\n```\n\n## Problem\nA handler could accidentally nil out `Services` or modify `CharacterID`, causing bugs that are hard to trace.\n\n## Proposal\nMake read-only fields private with getters:\n- `CharacterID() ulid.ULID`\n- `LocationID() ulid.ULID`\n- `PlayerID() ulid.ULID`\n- `SessionID() ulid.ULID`\n- `Output() io.Writer`\n- `Services() *Services`\n\nKeep `Args` and `InvokedAs` as public since dispatcher sets them.\n\n## Acceptance Criteria\n- [ ] Make critical fields private with getters\n- [ ] Update all handlers to use getters\n- [ ] Update `NewCommandExecution` constructor\n- [ ] Keep `Args` and `InvokedAs` public\n- [ ] Add tests verifying constructor sets all fields\n\n## Files\n- `internal/command/types.go`\n- `internal/command/handlers/*.go` (all handlers)","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T18:42:15Z","created_by":"seanb4t","updated_at":"2026-02-04T19:30:49Z","closed_at":"2026-02-04T19:30:49Z","dependencies":[{"issue_id":"holomush-wr9.99","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wrzc","title":"Fix incomplete error propagation in Migrator.Close()","description":"When both source and database have close errors, only the source error is returned - the database error is lost.\n\n## Problem\nFile: internal/store/migrate.go:115-124\n\nCurrent implementation returns early on srcErr \\!= nil, meaning dbErr is never reported.\n\n## Impact\n- Database connection leaks could go unreported\n- Debugging close failures becomes harder when both components fail\n\n## Acceptance Criteria\n- [ ] When both srcErr and dbErr are non-nil, combine into single error\n- [ ] Include both error messages in the combined error\n- [ ] Add test case for dual-error scenario\n- [ ] Error code should indicate both components failed","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T18:09:07Z","created_by":"seanb4t","updated_at":"2026-01-25T18:30:03Z","closed_at":"2026-01-25T18:30:03Z","work_type":"mutex"}
{"id":"holomush-wsc9t","title":"[E6.feat] Add RenderPlain method to StyledText","description":"## Problem\nStyledText has RenderANSI for terminal output but no plain text rendering for non-ANSI clients (web, logs, etc.).\n\n**Location:** `pkg/holo/fmt.go:64-336`\n\n## Acceptance Criteria\n- [ ] Add `RenderPlain() string` method to StyledText\n- [ ] Strip all ANSI codes and styling\n- [ ] Preserve text content and structure (newlines, spacing)\n- [ ] Add tests comparing RenderPlain and RenderANSI output\n- [ ] Document when to use RenderPlain vs RenderANSI","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-04T03:05:58Z","created_by":"seanb4t","updated_at":"2026-02-04T06:00:48Z","closed_at":"2026-02-04T06:00:48Z","dependencies":[{"issue_id":"holomush-wsc9t","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wse","title":"Delete redundant TestAllEventTypesDocumented test","description":"## Problem\ndoc_validation_test.go:87-114 TestAllEventTypesDocumented doesn't verify anything useful - the count check is redundant.\n\n## Acceptance Criteria\n- [ ] Delete TestAllEventTypesDocumented function\n- [ ] Verify remaining tests still pass\n- [ ] Independent code review before closing","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T16:10:28Z","created_by":"seanb4t","updated_at":"2026-01-18T16:46:04Z","closed_at":"2026-01-18T16:46:04Z","dependencies":[{"issue_id":"holomush-wse","depends_on_id":"holomush-cmr","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-wypq","title":"Add ADR #76 regression test for GetCharactersByLocation","description":"PR #88 review suggestion S10: No test verifying the specific AccessRequest parameters for GetCharactersByLocation (action=list_characters, resource=location:\u003cid\u003e).","status":"open","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-16T01:27:00Z","created_by":"seanb4t","updated_at":"2026-02-16T01:44:04Z","external_ref":"https://github.com/holomush/holomush/pull/88#issuecomment-RC_IC_kwDOQ7tZvM7o0CyA","labels":["deferred-work","review-finding"],"dependencies":[{"issue_id":"holomush-wypq","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-15T21:19:56Z","created_by":"seanb4t","metadata":"{}"}]}
{"id":"holomush-x1pf","title":"Fix PolicyStore integration tests: error code assertion mismatch","description":"7 PolicyStore integration tests in internal/access/policy/store/postgres_integration_test.go fail because they assert error codes (POLICY_NOT_FOUND, POLICY_SOURCE_MISMATCH) appear in err.Error() string, but oops errors return human-readable messages from .Error(), not the structured code.\n\nFailing tests:\n- 'validates source naming (ADR 35)' (line 148) - expects 'POLICY_SOURCE_MISMATCH' in error string, gets 'policy named seed:* must have source seed'\n- 'returns POLICY_NOT_FOUND for missing name' (line 199)\n- 'returns POLICY_NOT_FOUND for missing ID' (GetByID)\n- 'returns POLICY_NOT_FOUND for missing policy' (Update)\n- 'removes a policy and its version history' (Delete)\n- 'returns POLICY_NOT_FOUND for missing policy' (Delete)\n- 'sends notification on delete' (pg_notify)\n\nFix: Use errutil.AssertErrorCode(t, err, code) or oops.GetCode(err) instead of checking err.Error() string contains the code.","notes":"label: broken-on-main","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-14T20:56:54Z","created_by":"seanb4t","updated_at":"2026-02-14T21:20:37Z","closed_at":"2026-02-14T21:20:37Z","close_reason":"Fixed in 93431ab on feat/abac-phase-7.6-migration","labels":["broken-on-main"]}
{"id":"holomush-x1rq","title":"ABAC Review I2: Session error codes SHOULD to MUST","description":"Issue: Session error codes are API contracts but spec says SHOULD. Decision: Change to MUST and specify access package as constant location. AC: (1) SHOULD changed to MUST (2) Package location documented (3) Constant names listed. Ref: docs/specs/2026-02-05-full-abac-design.md:347-353.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:10Z","created_by":"seanb4t","updated_at":"2026-02-06T17:33:09Z","closed_at":"2026-02-06T17:33:09Z","dependencies":[{"issue_id":"holomush-x1rq","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x1rq","depends_on_id":"holomush-rbpd","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x1tnm","title":"[BACKLOG] Command events without character_id should error","description":"**Context:** In communication plugin main.lua line 43:\n```lua\ncharacter_name = character_name or \"Someone\"\n```\n\nA command event without character context indicates a bug in the dispatcher, not a valid state. Falling back to 'Someone' masks the real issue.\n\n**Proposal:** \n1. Dispatcher MUST include character_id and character_name in command payloads\n2. Plugins SHOULD return an error if these are missing rather than silently degrading\n3. Consider making this a validation in the Lua host before delivery","status":"open","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T21:04:15Z","created_by":"seanb4t","updated_at":"2026-02-02T21:04:15Z","work_type":"mutex"}
{"id":"holomush-x2t","title":"Epic 4: World Model","description":"Locations, exits, objects, characters with proper schemas and plugin hooks.\n\n**Goal:** Core spatial model enabling navigation and inventory.\n\n**Schema Relationships:**\n- Location \u003c--1:N--\u003e Exit --\u003e Location\n- Location \u003c--1:N--\u003e Character \u003c--1:N--\u003e Object (inventory)\n- Location \u003c--1:N--\u003e Object (in room)\n\n**Phases:**\n- 4.1: Location schema + repository\n- 4.2: Exit schema + navigation\n- 4.3: Object schema + inventory\n- 4.4: Character-location binding\n- 4.5: Plugin events for world operations\n- 4.6: World seeding\n\n**Plugin Events:**\n- move: entity movement (covers enter/leave/pickup/drop)\n- object_examine: looking at locations/objects\n- object_create, object_destroy, object_give\n\n**Host Functions (deferred from Epic 2):**\n- query_room(id) - Read location data\n- query_character(id) - Read character data\n- query_object(id) - Read object data\n\n**Acceptance Criteria:**\n- [ ] CRUD operations for locations work\n- [ ] Bidirectional exits enable navigation\n- [ ] Objects exist and can be picked up/dropped\n- [ ] Characters have locations\n- [ ] World events emitted for movement (move) and examination (object_examine)\n- [ ] CLI/API can seed initial world\n- [ ] query_room/query_character/query_object host functions work","status":"closed","priority":1,"issue_type":"epic","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:27:15Z","created_by":"seanb4t","updated_at":"2026-01-25T22:41:45Z","closed_at":"2026-01-25T22:41:45Z","dependencies":[{"issue_id":"holomush-x2t","depends_on_id":"holomush-0k5m","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t","depends_on_id":"holomush-0zoc","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t","depends_on_id":"holomush-19lz","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t","depends_on_id":"holomush-1t80","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t","depends_on_id":"holomush-5viy","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t","depends_on_id":"holomush-eicb","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t","depends_on_id":"holomush-fsid","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t","depends_on_id":"holomush-i0wa","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t","depends_on_id":"holomush-lvc5","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t","depends_on_id":"holomush-mbut","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t","depends_on_id":"holomush-mklr","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t","depends_on_id":"holomush-od4i","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t","depends_on_id":"holomush-q7mf","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t","depends_on_id":"holomush-ql5","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t","depends_on_id":"holomush-slq0","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t","depends_on_id":"holomush-sy0d","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t","depends_on_id":"holomush-x2t.100","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t","depends_on_id":"holomush-x2t.101","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t","depends_on_id":"holomush-x2t.102","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t","depends_on_id":"holomush-x2t.103","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t","depends_on_id":"holomush-x2t.104","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t","depends_on_id":"holomush-x2t.95","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t","depends_on_id":"holomush-x2t.96","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t","depends_on_id":"holomush-x2t.97","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t","depends_on_id":"holomush-x2t.98","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t","depends_on_id":"holomush-x2t.99","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t","depends_on_id":"holomush-xhfv","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t","depends_on_id":"holomush-z8at","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.1","title":"[E4] Design: World Model Architecture","description":"Design the world model architecture for HoloMUSH.\n\n## Acceptance Criteria\n- [ ] Document location, exit, and object schemas\n- [ ] Define repository interfaces for each entity type\n- [ ] Specify event types for world state changes\n- [ ] Design ABAC policies for world objects\n- [ ] Document location streaming strategy\n- [ ] Define plugin hook points for world events\n- [ ] Output: docs/specs/epic-4-world-model-design.md","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:30:16Z","created_by":"seanb4t","updated_at":"2026-01-23T02:00:34Z","closed_at":"2026-01-23T02:00:34Z","dependencies":[{"issue_id":"holomush-x2t.1","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.10","title":"[E4-2.1] Location Domain Types","description":"Implement Location domain type with type enum, shadowing support, and replay policy helpers.\n\n## Files\n- Create: `internal/world/location.go`\n- Create: `internal/world/location_test.go`\n\n## Implementation (TDD)\n\n### Step 1: Write failing tests\nCreate tests for:\n- `TestLocationType_String` - LocationType constants return correct strings\n- `TestParseReplayPolicy` - Parses \"last:N\" format correctly\n- `TestDefaultReplayPolicy` - Returns correct defaults by type\n- `TestLocation_EffectiveDescription` - Shadow fallback behavior\n\nRun: `task test -- -run TestLocation ./internal/world/...`\nExpected: FAIL - package does not exist\n\n### Step 2: Write minimal implementation\nCreate Location struct with:\n- ID, Type, ShadowsID, Name, Description, OwnerID, ReplayPolicy, CreatedAt, ArchivedAt\n- LocationType constants (persistent, scene, instance)\n- EffectiveDescription/EffectiveName methods for shadow fallback\n- ParseReplayPolicy and DefaultReplayPolicy helpers\n\nRun: `task test -- -run TestLocation ./internal/world/...`\nExpected: PASS\n\n### Step 3: Commit\n`git commit -m \"feat(world): add Location domain type\"`\n\n## Development Approach\n- **TDD:** REQUIRED - Tests MUST be written first and fail before implementation\n- **Review:** REQUIRED - Agent must review code before commit\n\n## Acceptance Criteria\n- [ ] Tests written first and verified to fail\n- [ ] LocationType enum with String() method\n- [ ] Location struct with all fields from design spec\n- [ ] EffectiveDescription returns shadow parent description when own is empty\n- [ ] ParseReplayPolicy handles \"last:N\" format including -1\n- [ ] DefaultReplayPolicy returns last:-1 for scene, last:0 for others\n- [ ] All tests pass\n- [ ] Agent code review completed","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-23T02:14:43Z","created_by":"seanb4t","updated_at":"2026-01-23T02:38:16Z","closed_at":"2026-01-23T02:38:16Z","dependencies":[{"issue_id":"holomush-x2t.10","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.10","depends_on_id":"holomush-x2t.9","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.100","title":"[E4-PR] Add test for ExamineObject with ErrNoEventEmitter","description":"## Problem\n\n`ExamineLocation` has a test for `ErrNoEventEmitter`, but `ExamineObject` is missing this test.\n\n**Location:** `internal/world/service_test.go:~3906`\n\n**Reference:** `ExamineLocation` ErrNoEventEmitter test at line 3719-3750\n\n## Bug Prevented\n\nEnsures proper error handling when event emitter is not configured for ExamineObject.\n\n## Acceptance Criteria\n\n- [ ] Add test `returns ErrNoEventEmitter when emitter not configured` for ExamineObject\n- [ ] Test creates service without EventEmitter\n- [ ] Test verifies error wraps `ErrNoEventEmitter`\n- [ ] Test verifies error code is `EVENT_EMITTER_MISSING`","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T15:52:22Z","created_by":"seanb4t","updated_at":"2026-01-25T16:42:30Z","closed_at":"2026-01-25T16:42:30Z","work_type":"mutex"}
{"id":"holomush-x2t.101","title":"[E4-PR] Add test for ExamineCharacter with ErrNoEventEmitter","description":"## Problem\n\n`ExamineLocation` has a test for `ErrNoEventEmitter`, but `ExamineCharacter` is missing this test.\n\n**Location:** `internal/world/service_test.go:~4031`\n\n**Reference:** `ExamineLocation` ErrNoEventEmitter test at line 3719-3750\n\n## Bug Prevented\n\nEnsures proper error handling when event emitter is not configured for ExamineCharacter.\n\n## Acceptance Criteria\n\n- [ ] Add test `returns ErrNoEventEmitter when emitter not configured` for ExamineCharacter\n- [ ] Test creates service without EventEmitter\n- [ ] Test verifies error wraps `ErrNoEventEmitter`\n- [ ] Test verifies error code is `EVENT_EMITTER_MISSING`","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T15:52:22Z","created_by":"seanb4t","updated_at":"2026-01-25T16:43:36Z","closed_at":"2026-01-25T16:43:36Z","work_type":"mutex"}
{"id":"holomush-x2t.102","title":"[E4-PR] Document retry behavior in emit function godocs","description":"## Problem\n\nThe emit functions (`EmitMoveEvent`, `EmitObjectCreateEvent`, `EmitExamineEvent`, `EmitObjectGiveEvent`) do not document that they perform retries internally via `emitWithRetry`.\n\n**Location:** `internal/world/events.go:93-95, 125-127, 168-170, 201-203`\n\n**Current godoc (EmitMoveEvent):**\n```go\n// EmitMoveEvent emits a move event for character or object movement.\n// Returns ErrNoEventEmitter if emitter is nil (indicates misconfiguration).\n// Returns a validation error if the payload is invalid.\n```\n\n## Recommended Change\n\nAdd retry documentation to all emit function godocs:\n\n```go\n// EmitMoveEvent emits a move event for character or object movement.\n// Retries up to 3 times with exponential backoff (4 total attempts) before\n// returning EVENT_EMIT_FAILED.\n// Returns ErrNoEventEmitter if emitter is nil (indicates misconfiguration).\n// Returns a validation error if the payload is invalid.\n```\n\n## Acceptance Criteria\n\n- [ ] Update `EmitMoveEvent` godoc with retry behavior\n- [ ] Update `EmitObjectCreateEvent` godoc with retry behavior\n- [ ] Update `EmitExamineEvent` godoc with retry behavior\n- [ ] Update `EmitObjectGiveEvent` godoc with retry behavior\n- [ ] All godocs mention \"3 retries, 4 total attempts\" and \"exponential backoff\"","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T15:52:23Z","created_by":"seanb4t","updated_at":"2026-01-25T16:44:26Z","closed_at":"2026-01-25T16:44:26Z","work_type":"mutex"}
{"id":"holomush-x2t.103","title":"[E4-PR] Document error codes in WorldQuerierAdapter godocs","description":"## Problem\n\nThe godoc for `GetLocation` and similar methods says \"retrieves a location by ID with plugin authorization\" but does not document that it returns errors with code `PLUGIN_QUERY_FAILED`.\n\n**Location:** `internal/plugin/hostfunc/adapter.go:54-74`\n\n## Recommended Change\n\nAdd error code documentation to each method's godoc:\n\n```go\n// GetLocation retrieves a location by ID with plugin authorization.\n// Returns errors with code PLUGIN_QUERY_FAILED on failure.\n// If the service returns nil without error, treats as ErrNotFound.\nfunc (a *WorldQuerierAdapter) GetLocation(ctx context.Context, id ulid.ULID) (*world.Location, error) {\n```\n\n## Acceptance Criteria\n\n- [ ] Update `GetLocation` godoc with error code\n- [ ] Update `GetCharacter` godoc with error code\n- [ ] Update `GetCharactersByLocation` godoc with error code\n- [ ] Update `GetObject` godoc with error code\n- [ ] All godocs mention `PLUGIN_QUERY_FAILED` error code\n- [ ] All godocs document nil-without-error handling","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T15:52:23Z","created_by":"seanb4t","updated_at":"2026-01-25T16:45:13Z","closed_at":"2026-01-25T16:45:13Z","work_type":"mutex"}
{"id":"holomush-x2t.104","title":"[E4-PR] Specify retry count in service method documentation","description":"## Problem\n\nService method documentation says \"If event emission fails after all retries are exhausted\" but does not specify how many retries.\n\n**Location:** `internal/world/service.go:362`\n\n**Current text:**\n\u003e If event emission fails after all retries are exhausted\n\n## Recommended Change\n\nUpdate to be specific:\n\n\u003e If event emission fails after all retries (3 retries, 4 total attempts) are exhausted\n\n## Acceptance Criteria\n\n- [ ] Update `MoveObject` godoc to specify \"3 retries, 4 total attempts\"\n- [ ] Update `MoveCharacter` godoc to specify \"3 retries, 4 total attempts\"\n- [ ] Verify consistency with actual retry constants in events.go","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T15:52:23Z","created_by":"seanb4t","updated_at":"2026-01-25T16:46:04Z","closed_at":"2026-01-25T16:46:04Z","work_type":"mutex"}
{"id":"holomush-x2t.105","title":"[E4-PR] Fix spec terminology for adapter creation timing","description":"## Context\n\nPR review identified terminology inconsistency in the plugin system design spec.\n\n## Issue\n\nThe spec at `docs/specs/2026-01-18-plugin-system-design.md:627` states adapter is created \"per-query\" but the actual implementation creates it per-host-function-call.\n\n## Current Text\n\u003e The adapter is created per-query in the host function implementation.\n\n## Correct Text\n\u003e The adapter is created per-host-function-call in the host function implementation.\n\n## Acceptance Criteria\n\n- [ ] Update line 627 to use \"per-host-function-call\" terminology\n- [ ] Verify no other references to \"per-query\" adapter creation exist in the spec","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T17:00:44Z","created_by":"seanb4t","updated_at":"2026-01-25T17:07:37Z","closed_at":"2026-01-25T17:07:37Z","dependencies":[{"issue_id":"holomush-x2t.105","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.106","title":"[E4-PR] Add EVENT_EMITTER_MISSING to service method documentation","description":"## Context\n\nPR review identified incomplete error code documentation in service methods.\n\n## Issue\n\nThe `MoveObject` and `MoveCharacter` method comments in `internal/world/service.go:358-368` document `EVENT_EMIT_FAILED` but not `EVENT_EMITTER_MISSING` which can also be returned when the emitter is nil.\n\n## Current Documentation\n```go\n// - Returns EVENT_EMIT_FAILED error (from events.go, wrapped with move context) if emission fails\n```\n\n## Required Addition\n```go\n// - Returns EVENT_EMITTER_MISSING error if no emitter was configured (system misconfiguration)\n// - Returns EVENT_EMIT_FAILED error (from events.go, wrapped with move context) if emission fails\n```\n\n## Acceptance Criteria\n\n- [ ] Add `EVENT_EMITTER_MISSING` to MoveObject method documentation\n- [ ] Add `EVENT_EMITTER_MISSING` to MoveCharacter method documentation\n- [ ] Verify all methods that can return this error code have it documented","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T17:00:45Z","created_by":"seanb4t","updated_at":"2026-01-25T17:09:06Z","closed_at":"2026-01-25T17:09:06Z","dependencies":[{"issue_id":"holomush-x2t.106","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.107","title":"[E4-PR] Add test for FindByName with zero-length alias array","description":"## Context\n\nPR test coverage analysis identified edge case gap in exit repository tests.\n\n## Issue\n\n`internal/world/postgres/exit_repo_test.go` tests `FindByName` for exact name, case insensitivity, and alias matching, but does not test an exit created with an empty alias array (`Aliases: []string{}`).\n\n## Why This Matters\n\nThe SQL query concatenates name and aliases for matching. Testing empty alias array ensures:\n- No SQL parsing issues with empty PostgreSQL arrays\n- Behavior is consistent between nil aliases and empty slice\n\n## Acceptance Criteria\n\n- [ ] Add test case in `TestExitRepository_FindByName` for exit with `Aliases: []string{}`\n- [ ] Verify exit is found by name but not by non-existent alias\n- [ ] Confirm behavior matches exits with nil aliases","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T17:00:45Z","created_by":"seanb4t","updated_at":"2026-01-25T17:10:46Z","closed_at":"2026-01-25T17:10:46Z","dependencies":[{"issue_id":"holomush-x2t.107","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.108","title":"[E4-PR] Add test for ListHeldBy ordering with multiple objects","description":"## Context\n\nPR test coverage analysis identified ordering verification gap.\n\n## Issue\n\n`TestObjectRepository_ListHeldBy` in `internal/world/postgres/object_repo_test.go` tests that objects held by a character are returned, but only creates one object. The ordering behavior is not verified.\n\n## Why This Matters\n\nIf ordering changes (e.g., due to index changes), tests would not detect it. Consistent ordering is important for:\n- Predictable inventory display\n- Deterministic plugin behavior\n- Stable API responses\n\n## Acceptance Criteria\n\n- [ ] Add test case with multiple (3+) objects held by same character\n- [ ] Verify objects are returned in consistent order (by creation time or ID)\n- [ ] Document expected ordering in test comment","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T17:00:45Z","created_by":"seanb4t","updated_at":"2026-01-25T17:12:45Z","closed_at":"2026-01-25T17:12:45Z","dependencies":[{"issue_id":"holomush-x2t.108","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.109","title":"[E4-PR] Add test for MoveCharacter to non-existent location","description":"## Context\n\nPR test coverage analysis identified missing error path test.\n\n## Issue\n\n`TestWorldService_MoveCharacter` in `internal/world/service_test.go` verifies successful moves emit events but does not test:\n- Moving to a non-existent location (LocationRepo.Get fails)\n- Proper error handling when destination location does not exist\n\n## Why This Matters\n\nWithout this test, we cannot verify:\n- Error messages are clear when destination doesn't exist\n- The correct error code is returned\n- No partial state changes occur (character stays in original location)\n\n## Acceptance Criteria\n\n- [ ] Add test case where LocationRepo.Get returns ErrNotFound for destination\n- [ ] Verify appropriate error code is returned\n- [ ] Verify character location is not modified\n- [ ] Verify no move event is emitted","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T17:00:45Z","created_by":"seanb4t","updated_at":"2026-01-25T17:13:43Z","closed_at":"2026-01-25T17:13:43Z","dependencies":[{"issue_id":"holomush-x2t.109","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.11","title":"[E4-2.2] Exit Domain Types","description":"Implement Exit domain type with visibility, locking, and bidirectional support.\n\n## Files\n- Create: `internal/world/exit.go`\n- Create: `internal/world/exit_test.go`\n\n## Implementation (TDD)\n\n### Step 1: Write failing tests\nCreate tests for:\n- `TestExit_MatchesName` - Name and alias matching (case-insensitive)\n- `TestVisibility_String` - Visibility constants return correct strings\n- `TestExit_IsVisibleTo` - Visibility rules for all/owner/list modes\n- `TestExit_ReverseExit` - Creates return exit for bidirectional\n\nRun: `task test -- -run TestExit ./internal/world/...`\nExpected: FAIL - Exit type not defined\n\n### Step 2: Write minimal implementation\nCreate Exit struct with:\n- ID, FromLocationID, ToLocationID, Name, Aliases\n- Bidirectional, ReturnName\n- Visibility enum (all, owner, list) with VisibleTo slice\n- Locked, LockType enum (key, password, condition), LockData\n- CreatedAt\n\nCreate methods:\n- MatchesName(input) - case-insensitive name/alias match\n- IsVisibleTo(charID, locationOwnerID) - visibility check\n- ReverseExit() - create return exit for bidirectional\n\nRun: `task test -- -run TestExit ./internal/world/...`\nExpected: PASS\n\n### Step 3: Commit\n`git commit -m \"feat(world): add Exit domain type\"`\n\n## Development Approach\n- **TDD:** REQUIRED - Tests MUST be written first and fail before implementation\n- **Review:** REQUIRED - Agent must review code before commit\n\n## Acceptance Criteria\n- [ ] Tests written first and verified to fail\n- [ ] Exit struct with all fields from design spec\n- [ ] Visibility enum with all/owner/list options\n- [ ] LockType enum with key/password/condition options\n- [ ] MatchesName handles case-insensitive name and alias matching\n- [ ] IsVisibleTo correctly implements visibility rules\n- [ ] ReverseExit creates proper return exit for bidirectional\n- [ ] All tests pass\n- [ ] Agent code review completed","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-23T02:14:55Z","created_by":"seanb4t","updated_at":"2026-01-23T02:38:16Z","closed_at":"2026-01-23T02:38:16Z","dependencies":[{"issue_id":"holomush-x2t.11","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.11","depends_on_id":"holomush-x2t.9","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.110","title":"[E4-PR] Add test for bidirectional exit delete when return exit already deleted","description":"## Context\n\nPR test coverage analysis identified edge case gap in exit repository tests.\n\n## Issue\n\n`TestExitRepository_CRUD` in `internal/world/postgres/exit_repo_test.go` has `delete bidirectional` but does not test the scenario where someone deletes the return exit first (via direct DB manipulation or another operation), then tries to delete the forward exit.\n\n## Why This Matters\n\nIn production, exits could be partially cleaned up due to:\n- Manual database operations\n- Race conditions in concurrent delete operations\n- Bugs in other code paths\n\nThe cleanup logic should handle this gracefully without errors.\n\n## Acceptance Criteria\n\n- [ ] Add test case that creates bidirectional exit pair\n- [ ] Delete return exit directly (simulating external modification)\n- [ ] Call Delete on forward exit\n- [ ] Verify no error is returned (graceful handling)\n- [ ] Verify forward exit is deleted","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T17:00:46Z","created_by":"seanb4t","updated_at":"2026-01-25T17:17:35Z","closed_at":"2026-01-25T17:17:35Z","dependencies":[{"issue_id":"holomush-x2t.110","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.111","title":"[E4-PR] Document rationale for adapter nil-check defensive behavior","description":"## Context\n\nPR comment analysis identified missing rationale documentation.\n\n## Issue\n\n`internal/plugin/hostfunc/adapter.go` lines 54-76 has comments for `GetLocation`, `GetCharacter`, and `GetObject` that mention \"If the service returns nil without error, treats as ErrNotFound\" but do not explain WHY this defensive check exists.\n\n## Current Comment\n```go\n// If the service returns nil without error, treats as ErrNotFound.\n```\n\n## Improved Comment\n```go\n// If the service returns nil without error, treats as ErrNotFound.\n// This is a defensive check against buggy WorldService implementations;\n// a correctly implemented service should never return (nil, nil).\n```\n\n## Why This Matters\n\nFuture maintainers need to understand:\n- This is intentional defensive programming, not dead code\n- The check guards against contract violations\n- Removing it could cause nil pointer panics\n\n## Acceptance Criteria\n\n- [ ] Add rationale comment to GetLocation nil-check\n- [ ] Add rationale comment to GetCharacter nil-check  \n- [ ] Add rationale comment to GetObject nil-check\n- [ ] Verify consistency across all three methods","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T17:00:46Z","created_by":"seanb4t","updated_at":"2026-01-25T17:18:36Z","closed_at":"2026-01-25T17:18:36Z","dependencies":[{"issue_id":"holomush-x2t.111","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.112","title":"[E4-PR] Surface context.DeadlineExceeded to plugins as 'query timed out'","description":"## Problem\n\nHost functions in `internal/plugin/hostfunc/world.go` create a context timeout, but when `context.DeadlineExceeded` occurs, it's treated as a generic 'internal error' by `sanitizeErrorForPlugin()`. Plugin developers see 'internal error (ref: XXX)' instead of a helpful 'query timed out' message.\n\n**Files:** `internal/plugin/hostfunc/world.go:88-89, 142-143, 199-200, 257-258`\n\n## Acceptance Criteria\n\n- [ ] `sanitizeErrorForPlugin()` checks for `context.DeadlineExceeded`\n- [ ] When timeout occurs, plugins receive 'query timed out' message\n- [ ] WARN level log includes plugin name, entity type, and entity ID\n- [ ] Unit test verifies timeout error message to plugins\n\n## Implementation\n\nAdd check in `sanitizeErrorForPlugin()`:\n\n```go\nif errors.Is(err, context.DeadlineExceeded) {\n    slog.Warn(\"plugin query timed out\",\n        \"plugin\", pluginName,\n        \"entity_type\", entityType,\n        \"entity_id\", entityID)\n    return \"query timed out\"\n}\n```","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T17:29:49Z","created_by":"seanb4t","updated_at":"2026-01-25T17:33:33Z","closed_at":"2026-01-25T17:33:33Z","dependencies":[{"issue_id":"holomush-x2t.112","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.113","title":"[E4-PR] Rename kvTimeout to defaultPluginQueryTimeout","description":"## Problem\n\nThe constant `kvTimeout` in `internal/plugin/hostfunc/functions.go:21-22` is used for both KV operations AND world service queries. The name doesn't reflect this expanded usage, which could confuse future maintainers.\n\n**File:** `internal/plugin/hostfunc/functions.go:21-22`\n\n## Acceptance Criteria\n\n- [ ] Rename `kvTimeout` to `defaultPluginQueryTimeout` (or similar)\n- [ ] Update all references to use the new name\n- [ ] Add comment explaining the timeout applies to all plugin query operations\n- [ ] `task lint` passes\n\n## Alternative\n\nIf renaming is too disruptive, add a comment explaining that KV and world queries share the same timeout for consistency.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T17:29:50Z","created_by":"seanb4t","updated_at":"2026-01-25T17:37:11Z","closed_at":"2026-01-25T17:37:11Z","dependencies":[{"issue_id":"holomush-x2t.113","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.114","title":"[E4-PR] Add context cancellation test for MoveCharacter","description":"## Problem\n\nWhile `EmitMoveEvent` has context cancellation tests in `events_test.go`, there's no test verifying that `MoveCharacter` correctly propagates context cancellation errors when the event emitter times out.\n\n**File:** `internal/world/service_test.go` (TestWorldService_MoveCharacter)\n\n## Acceptance Criteria\n\n- [ ] Add test case: 'context cancellation during event emission propagates error'\n- [ ] Test uses a cancellable context\n- [ ] Verify error is propagated correctly with appropriate code\n- [ ] Test follows existing patterns in service_test.go\n\n## Implementation\n\nAdd test similar to `events_test.go:281-299` but specifically for `MoveCharacter`.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T17:29:50Z","created_by":"seanb4t","updated_at":"2026-01-25T17:39:40Z","closed_at":"2026-01-25T17:39:40Z","dependencies":[{"issue_id":"holomush-x2t.114","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.115","title":"[E4-PR] Add event emission failure tests for Examine methods","description":"## Problem\n\nTests verify that `ErrNoEventEmitter` is returned when emitter is nil, but there are no tests for when the emitter is configured but fails (returns an error).\n\n**Files:** `internal/world/service_test.go`\n- `TestWorldService_ExamineLocation` (line 3639)\n- `TestWorldService_ExamineObject` (line 3829)\n- `TestWorldService_ExamineCharacter` (line 4019)\n\n## Acceptance Criteria\n\n- [ ] Add test case for ExamineLocation when emitter fails\n- [ ] Add test case for ExamineObject when emitter fails\n- [ ] Add test case for ExamineCharacter when emitter fails\n- [ ] Tests verify error propagation with correct error codes\n- [ ] Tests use mock EventEmitter that returns an error\n\n## Implementation\n\n```go\nt.Run(\"returns error when event emitter fails\", func(t *testing.T) {\n    emitter := \u0026mockEventEmitter{err: errors.New(\"event bus unavailable\")}\n    // ... verify error propagation\n})\n```","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T17:29:50Z","created_by":"seanb4t","updated_at":"2026-01-25T17:42:45Z","closed_at":"2026-01-25T17:42:45Z","dependencies":[{"issue_id":"holomush-x2t.115","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.116","title":"[E4-PR] Verify retry count comment accuracy in events.go","description":"## Problem\n\nComment in `internal/world/events.go:47-48` states 'up to 3 retries (4 total attempts)'. This needs verification against `retry.WithMaxRetries(3, ...)` behavior from the go-retry library.\n\n**File:** `internal/world/events.go:47-48`\n\n## Acceptance Criteria\n\n- [ ] Verify go-retry library semantics for `WithMaxRetries(max, next)`\n- [ ] Confirm whether `max=3` means 3 total attempts or 3 retries after first attempt\n- [ ] Update comment if incorrect\n- [ ] Add unit test that explicitly verifies retry count behavior\n\n## Investigation\n\nPer go-retry documentation, `WithMaxRetries(max, next)` 'executes the backoff function up until the maximum attempts'. The parameter is named `max` and represents maximum attempts, not maximum retries. Verify actual behavior with a test.","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T17:29:50Z","created_by":"seanb4t","updated_at":"2026-01-25T17:43:31Z","closed_at":"2026-01-25T17:43:31Z","dependencies":[{"issue_id":"holomush-x2t.116","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.117","title":"[E4-PR] Clarify seed command idempotency description","description":"## Problem\n\nThe `Long` description in `cmd/holomush/seed.go:46-53` states the command is 'idempotent' but with `--no-strict` disabled (default), the command fails on re-run if attributes differ. This is conditional idempotency.\n\n**File:** `cmd/holomush/seed.go:46-53`\n\n## Acceptance Criteria\n\n- [ ] Update `Long` description to clarify behavior\n- [ ] Replace 'idempotent' with more accurate description\n- [ ] Document that re-runs verify existing data matches expected values\n- [ ] Explain --no-strict flag purpose in help text\n\n## Suggested Wording\n\n'This command supports safe re-runs - it will not create duplicates if run multiple times. When re-running, it verifies that existing seed data matches expected values.'","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T17:29:51Z","created_by":"seanb4t","updated_at":"2026-01-25T17:45:09Z","closed_at":"2026-01-25T17:45:09Z","dependencies":[{"issue_id":"holomush-x2t.117","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.118","title":"[E4-PR] Clarify adapter nil-check defensive comment","description":"## Problem\n\nComment in `internal/plugin/hostfunc/adapter.go:55-58` mentions defensive checks against 'buggy WorldService implementations'. This could be misread as implying the production service might have this bug.\n\n**File:** `internal/plugin/hostfunc/adapter.go:55-58`\n\n## Acceptance Criteria\n\n- [ ] Update comment to clarify the defensive check is for alternative/mock implementations\n- [ ] Explicitly state the production WorldService never returns (nil, nil)\n- [ ] Maintain the warning about violating the contract\n\n## Suggested Wording\n\n'This is a defensive check against implementations that might violate the contract (e.g., in testing); the production WorldService never returns (nil, nil).'","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T17:29:51Z","created_by":"seanb4t","updated_at":"2026-01-25T17:46:48Z","closed_at":"2026-01-25T17:46:48Z","dependencies":[{"issue_id":"holomush-x2t.118","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.119","title":"[E4-PR] Add constructor functions for domain types (Character, Object, Exit)","description":"## Summary\n\nType-design-analyzer identified that domain types use Go-idiomatic exported fields with opt-in validation, but nothing enforces calling `Validate()`. Adding constructor functions would enforce invariants at creation time.\n\n## Background\n\nCurrent pattern:\n```go\nchar := \u0026world.Character{Name: \"Test\"}  // Invalid - missing PlayerID, ID\nchar.Validate()  // Must remember to call this\n```\n\nSuggested pattern:\n```go\nchar, err := world.NewCharacter(id, playerID, name)  // Validates on creation\n```\n\n## Affected Types\n\n- `internal/world/character.go` - Character struct\n- `internal/world/object.go` - Object struct  \n- `internal/world/exit.go` - Exit struct\n\n## Acceptance Criteria\n\n- [ ] `NewCharacter(id, playerID ulid.ULID, name string) (*Character, error)` constructor exists\n- [ ] `NewObject(id ulid.ULID, name string, containment Containment) (*Object, error)` constructor exists\n- [ ] `NewExit(id ulid.ULID, fromID, toID ulid.ULID, name string) (*Exit, error)` constructor exists\n- [ ] All constructors call `Validate()` internally and return errors for invalid inputs\n- [ ] Tests verify constructors reject invalid inputs\n- [ ] Existing callers updated to use constructors where appropriate\n- [ ] Package-level godoc documents that constructors are preferred over direct struct initialization\n\n## Notes\n\nThis is an enhancement, not a bug fix. Current code works correctly when `Validate()` is called - this just makes the API more defensive.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T17:58:49Z","created_by":"seanb4t","updated_at":"2026-01-25T18:09:20Z","closed_at":"2026-01-25T18:09:20Z","dependencies":[{"issue_id":"holomush-x2t.119","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.12","title":"[E4-2.3] Object Domain Types","description":"Implement Object domain type with flexible containment model.\n\n## Files\n- Create: `internal/world/object.go`\n- Create: `internal/world/object_test.go`\n\n## Implementation (TDD)\n\n### Step 1: Write failing tests\nCreate tests for:\n- `TestContainment_Validate` - Exactly one containment field must be set\n- `TestContainment_Type` - Returns \"location\"/\"character\"/\"object\"/\"\"\n- `TestObject_Containment` - Returns current containment from object fields\n\nRun: `task test -- -run TestContainment ./internal/world/...`\nExpected: FAIL - Containment type not defined\n\n### Step 2: Write minimal implementation\nCreate Containment struct with:\n- LocationID, CharacterID, ObjectID (all *ulid.ULID)\n- Validate() error - ensures exactly one field set\n- Type() string - returns containment type\n- ID() *ulid.ULID - returns the container ID\n\nCreate Object struct with:\n- ID, Name, Description\n- LocationID, HeldByCharacterID, ContainedInObjectID\n- IsContainer, OwnerID, CreatedAt\n- Containment() - returns current containment\n- SetContainment(c Containment) - updates containment fields\n\nCreate ErrInvalidContainment error.\n\nRun: `task test -- -run TestContainment ./internal/world/... \u0026\u0026 task test -- -run TestObject ./internal/world/...`\nExpected: PASS\n\n### Step 3: Commit\n`git commit -m \"feat(world): add Object domain type with containment\"`\n\n## Development Approach\n- **TDD:** REQUIRED - Tests MUST be written first and fail before implementation\n- **Review:** REQUIRED - Agent must review code before commit\n\n## Acceptance Criteria\n- [ ] Tests written first and verified to fail\n- [ ] Containment struct with validation (exactly one field set)\n- [ ] Object struct with all fields from design spec\n- [ ] ErrInvalidContainment error defined\n- [ ] Containment.Validate() rejects zero or multiple fields\n- [ ] Object.Containment() returns current containment\n- [ ] Object.SetContainment() updates fields correctly\n- [ ] All tests pass\n- [ ] Agent code review completed","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-23T02:15:05Z","created_by":"seanb4t","updated_at":"2026-01-23T02:38:16Z","closed_at":"2026-01-23T02:38:16Z","dependencies":[{"issue_id":"holomush-x2t.12","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.12","depends_on_id":"holomush-x2t.9","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.120","title":"[E4-PR] Add service-level tests for GetExitsByLocation","description":"## Summary\n\nTest-analyzer identified that `GetExitsByLocation` service method lacks dedicated service-level tests. While the underlying `ListFromLocation` repository method is tested, the service wrapper should be tested to verify authorization handling and error wrapping.\n\n## Background\n\nThe service method at `internal/world/service.go` wraps the repository call with:\n- Authorization checks\n- Error code wrapping with oops\n\nCurrent test coverage relies on repository-level tests only.\n\n## Affected Files\n\n- `internal/world/service_test.go` - Add test cases\n\n## Acceptance Criteria\n\n- [ ] Test for successful retrieval with proper authorization\n- [ ] Test for permission denied when subject lacks access\n- [ ] Test for repository error propagation with correct error codes\n- [ ] Test for nil repository configuration error\n- [ ] Test verifies returned exits match repository results\n\n## Notes\n\nThis is a test coverage gap, not a functional issue. The method works correctly - we just want explicit service-level test coverage.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T17:58:49Z","created_by":"seanb4t","updated_at":"2026-01-25T18:23:59Z","closed_at":"2026-01-25T18:23:59Z","dependencies":[{"issue_id":"holomush-x2t.120","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.121","title":"[E4-PR] Improve containment field encapsulation in Object type","description":"## Summary\n\nType-design-analyzer identified that Object's containment is spread across three exported pointer fields (`LocationID`, `HeldByCharacterID`, `ContainedInObjectID`). Direct field assignment can bypass `SetContainment()` validation, potentially creating invalid states.\n\n## Background\n\nCurrent pattern allows:\n```go\nobj.LocationID = \u0026locA\nobj.HeldByCharacterID = \u0026charB  // Now in two places - invalid\\!\n```\n\nThe invariant \"exactly one containment field set\" can be violated by direct assignment.\n\n## Proposed Change\n\nMake containment fields unexported:\n```go\ntype Object struct {\n    // ... other fields ...\n    locationID          *ulid.ULID\n    heldByCharacterID   *ulid.ULID  \n    containedInObjectID *ulid.ULID\n}\n```\n\nRequire `SetContainment()` for all mutations and add accessor methods.\n\n## Affected Files\n\n- `internal/world/object.go` - Object struct and methods\n- `internal/world/object_test.go` - Update tests\n- `internal/world/postgres/object_repo.go` - Update to use accessors\n- Any other callers that access containment fields directly\n\n## Acceptance Criteria\n\n- [ ] Containment fields are unexported in Object struct\n- [ ] `SetContainment(c Containment) error` is the only way to modify containment\n- [ ] Accessor methods added: `GetLocationID()`, `GetHeldByCharacterID()`, `GetContainedInObjectID()`\n- [ ] `Containment()` method still works (returns aggregate view)\n- [ ] All callers updated to use accessors/SetContainment\n- [ ] Tests verify direct field access is no longer possible\n- [ ] Repository correctly uses accessors for scanning/inserting\n\n## Trade-offs\n\n**Pros:**\n- Enforces single-containment invariant at compile time (for mutations)\n- Prevents accidental invalid states\n\n**Cons:**\n- More verbose API for reading containment\n- Breaking change for any external consumers (if any)\n- Go idiom typically uses exported fields\n\n## Notes\n\nThis is an encapsulation improvement, not a bug fix. Consider whether the Go-idiomatic exported fields pattern is acceptable for this project.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T17:58:49Z","created_by":"seanb4t","updated_at":"2026-01-25T18:50:25Z","closed_at":"2026-01-25T18:50:25Z","dependencies":[{"issue_id":"holomush-x2t.121","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.122","title":"[E4-PR] Inherit parent context in plugin query functions","description":"## Problem\n\nAll plugin query functions in `internal/plugin/hostfunc/world.go` create contexts from `context.Background()` instead of inheriting a parent context:\n\n```go\nctx, cancel := context.WithTimeout(context.Background(), defaultPluginQueryTimeout)\n```\n\n**Locations:** Lines 95-96, 149-150, 206-207, 264-265\n\n## Impact\n\n- Server shutdown cannot cancel in-flight plugin queries\n- Observability context (trace IDs, request IDs) is lost\n- Long-running queries cannot be cancelled by callers\n- Database connections may be held open during shutdown\n\n## Acceptance Criteria\n\n- [ ] Plugin query functions accept context from plugin invocation\n- [ ] Context is wrapped with timeout (preserving parent cancellation)\n- [ ] Tests verify context cancellation propagates to queries\n- [ ] Server shutdown cancels in-flight plugin queries\n\n## Implementation Notes\n\nRequires changes to Lua function signature or capturing context from plugin invocation. Consider whether gopher-lua provides a mechanism to pass context through.","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T19:00:14Z","created_by":"seanb4t","updated_at":"2026-01-25T19:14:21Z","closed_at":"2026-01-25T19:14:21Z","dependencies":[{"issue_id":"holomush-x2t.122","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.123","title":"[E4-PR] Document correlation ID pattern for plugin developers","description":"## Problem\n\nThe `sanitizeErrorForPlugin` function (`internal/plugin/hostfunc/world.go:39-53`) generates ULID correlation IDs for internal errors, but plugins have no documented way to surface these meaningfully to users.\n\n## Impact\n\n- Plugin developers don't know the correlation ID exists\n- Users can report IDs but operators don't know to look for them\n- Debugging workflow is undocumented\n\n## Acceptance Criteria\n\n- [ ] Document correlation ID pattern in site/docs/developers/ plugin guide\n- [ ] Explain how plugins should surface error references to users\n- [ ] Document operator workflow for finding correlated log entries\n- [ ] Consider whether correlation ID should be a separate return value\n\n## Files to Update\n\n- site/docs/developers/plugin-authoring.md (or equivalent)\n- Potentially internal/plugin/hostfunc/world.go godocs","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T19:00:14Z","created_by":"seanb4t","updated_at":"2026-01-25T19:17:12Z","closed_at":"2026-01-25T19:17:12Z","dependencies":[{"issue_id":"holomush-x2t.123","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.124","title":"[E4-PR] Complete CreateExit/UpdateExit validation documentation","description":"## Problem\n\nThe godocs for CreateExit and UpdateExit in internal/world/service.go:176-177, 200-201 are incomplete.\n\n**Current:**\n\u003e Returns a ValidationError if the name, aliases, visibility, lock type, lock data, or visible_to are invalid.\n\n**Missing:**\n- ID validation (checked by Exit.Validate())\n- Self-referential exit check (ErrSelfReferentialExit)\n\n## Acceptance Criteria\n\n- [ ] CreateExit godoc lists all validated fields including ID\n- [ ] UpdateExit godoc lists all validated fields including ID\n- [ ] Both mention ErrSelfReferentialExit for same from/to locations\n- [ ] Documentation matches actual Exit.Validate() behavior\n\n## Suggested Fix\n\nUpdate to:\n\u003e Returns a ValidationError if any field is invalid (id, name, aliases, visibility, lock type, lock data, or visible_to). Returns ErrSelfReferentialExit if from and to locations are the same.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T19:00:14Z","created_by":"seanb4t","updated_at":"2026-01-25T19:18:17Z","closed_at":"2026-01-25T19:18:17Z","dependencies":[{"issue_id":"holomush-x2t.124","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.125","title":"[E4-PR] Add WithWorldQuerier migration guide","description":"## Problem\n\nThe deprecation notice in internal/plugin/hostfunc/functions.go:56-60 references v1.0.0 removal but no migration documentation exists.\n\n## Impact\n\n- Plugin developers have no guidance on switching to WithWorldService\n- v1.0.0 may be used in production deployment docs\n- Benefits of WithWorldService (per-plugin ABAC) are not documented\n\n## Acceptance Criteria\n\n- [ ] Add migration guide in site/docs/developers/ or CHANGELOG\n- [ ] Document the benefits of WithWorldService (per-plugin ABAC authorization)\n- [ ] Provide code examples showing before/after migration\n- [ ] Verify v1.0.0 is the intended removal version\n\n## Files to Update\n\n- site/docs/developers/plugin-authoring.md (or equivalent)\n- Consider adding DEPRECATION.md or section in CHANGELOG","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T19:00:14Z","created_by":"seanb4t","updated_at":"2026-01-25T19:21:19Z","closed_at":"2026-01-25T19:21:19Z","dependencies":[{"issue_id":"holomush-x2t.125","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.126","title":"[E4-PR] Consolidate defensive nil-check comments in adapter.go","description":"## Problem\n\nThe same defensive nil-check comment is duplicated three times in internal/plugin/hostfunc/adapter.go:\n- Lines 56-58 (GetLocation)\n- Lines 82-84 (GetCharacter)\n- Lines 131-133 (GetObject)\n\nAll three state the same rationale about production WorldService never returning (nil, nil).\n\n## Acceptance Criteria\n\n- [ ] Extract explanation to package-level godoc or type-level comment\n- [ ] Individual method comments reference the consolidated explanation\n- [ ] Rationale is documented once, referenced where needed\n- [ ] No duplication of multi-line defensive coding explanations\n\n## Suggested Approach\n\nAdd a package or type-level comment explaining the defensive nil-check pattern, then reference it in each method.","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T19:00:15Z","created_by":"seanb4t","updated_at":"2026-01-25T19:33:09Z","closed_at":"2026-01-25T19:33:09Z","dependencies":[{"issue_id":"holomush-x2t.126","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.127","title":"[E4-PR] Add constructor function for Location type","description":"## Problem\n\nUnlike Character, Object, and Exit which have NewX() and NewXWithID() constructor functions, the Location type in internal/world/location.go lacks constructors.\n\nThis inconsistency means:\n- Location can be constructed in invalid states\n- No validation at construction time\n- Pattern differs from other domain types\n\n## Acceptance Criteria\n\n- [ ] Add NewLocation(name, description string, locType LocationType) (*Location, error)\n- [ ] Add NewLocationWithID(id ulid.ULID, name, description string, locType LocationType) (*Location, error)\n- [ ] Constructors call Validate() before returning\n- [ ] Add ID validation to Location.Validate() if not present\n- [ ] Tests verify constructor validation behavior\n- [ ] Existing code updated to use constructors where appropriate\n\n## Consistency Reference\n\nFollow the pattern from internal/world/character.go:23-52 for NewCharacter/NewCharacterWithID.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T19:00:15Z","created_by":"seanb4t","updated_at":"2026-01-25T19:27:21Z","closed_at":"2026-01-25T19:27:21Z","dependencies":[{"issue_id":"holomush-x2t.127","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.128","title":"[E4-PR] Add constructor functions for payload types","description":"## Problem\n\nPayload types in internal/world/payloads.go require manual construction followed by explicit Validate() calls:\n- MovePayload\n- ExaminePayload\n- ObjectGivePayload\n\nThis differs from domain types which have constructors that validate on creation.\n\n## Acceptance Criteria\n\n- [ ] Add NewMovePayload(entityType, entityID, from, to Containment) (*MovePayload, error)\n- [ ] Add NewFirstPlacement(entityType, entityID, to Containment) (*MovePayload, error) for FromType=none\n- [ ] Add NewExaminePayload(characterID, targetType, targetID, locationID ulid.ULID) (*ExaminePayload, error)\n- [ ] Add NewObjectGivePayload(objectID, fromCharID, toCharID ulid.ULID, objectName string) (*ObjectGivePayload, error)\n- [ ] All constructors validate before returning\n- [ ] Tests verify constructor validation behavior\n- [ ] Update EmitMoveEvent, EmitExamineEvent to use constructors\n\n## Implementation Notes\n\nThe constructors ensure payloads are always valid at API boundaries, reducing the chance of emitting invalid events.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T19:00:15Z","created_by":"seanb4t","updated_at":"2026-01-25T19:31:08Z","closed_at":"2026-01-25T19:31:08Z","dependencies":[{"issue_id":"holomush-x2t.128","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.129","title":"[E4-PR] Consider sealed interface pattern for Containment","description":"## Problem\n\nThe Containment struct in internal/world/object.go:17-23 has public fields that can be directly set to invalid states like all-nil or multiple fields set.\n\n## Proposed Solution\n\nUse a sealed interface pattern to make invalid states unrepresentable at compile time.\n\n## Acceptance Criteria\n\n- [ ] Evaluate sealed interface pattern vs current struct approach\n- [ ] If adopted: Update Containment to interface with private method\n- [ ] If adopted: Update InLocation, HeldByCharacter, InContainer factories\n- [ ] If adopted: Update all callers to use interface methods\n- [ ] Document decision rationale either way\n\n## Trade-offs to Consider\n\n**Pros:**\n- Invalid states impossible at compile time\n- Factory functions are the only way to construct\n\n**Cons:**\n- More complex API\n- Breaking change for existing code\n- May be over-engineering for current needs","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T19:00:15Z","created_by":"seanb4t","updated_at":"2026-01-25T19:33:50Z","closed_at":"2026-01-25T19:33:50Z","dependencies":[{"issue_id":"holomush-x2t.129","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.13","title":"[E4-2.4] Repository Interfaces","description":"Define repository interfaces for all world model entities.\n\n## Files\n- Create: `internal/world/repository.go`\n\n## Implementation\n\n### Step 1: Write repository interfaces\nCreate interfaces:\n\n**LocationRepository:**\n- Get(ctx, id) (*Location, error)\n- Create(ctx, loc) error\n- Update(ctx, loc) error\n- Delete(ctx, id) error\n- ListByType(ctx, locType) ([]*Location, error)\n- GetShadowedBy(ctx, id) ([]*Location, error)\n\n**ExitRepository:**\n- Get(ctx, id) (*Exit, error)\n- Create(ctx, exit) error - handles bidirectional\n- Update(ctx, exit) error\n- Delete(ctx, id) error - handles bidirectional\n- ListFromLocation(ctx, locationID) ([]*Exit, error)\n- FindByName(ctx, locationID, name) (*Exit, error)\n\n**ObjectRepository:**\n- Get(ctx, id) (*Object, error)\n- Create(ctx, obj) error\n- Update(ctx, obj) error\n- Delete(ctx, id) error\n- ListAtLocation(ctx, locationID) ([]*Object, error)\n- ListHeldBy(ctx, characterID) ([]*Object, error)\n- ListContainedIn(ctx, objectID) ([]*Object, error)\n- Move(ctx, objectID, to Containment) error\n\n**SceneRepository:**\n- AddParticipant(ctx, sceneID, characterID, role) error\n- RemoveParticipant(ctx, sceneID, characterID) error\n- ListParticipants(ctx, sceneID) ([]SceneParticipant, error)\n- GetScenesFor(ctx, characterID) ([]*Location, error)\n\nCreate SceneParticipant struct with CharacterID, Role.\n\n### Step 2: Run lint to verify\nRun: `task lint`\nExpected: No errors\n\n### Step 3: Commit\n`git commit -m \"feat(world): add repository interfaces\"`\n\n## Development Approach\n- **TDD:** N/A for interfaces (no behavior to test)\n- **Review:** REQUIRED - Agent must review interfaces match design spec\n\n## Acceptance Criteria\n- [ ] LocationRepository interface with all CRUD + query methods\n- [ ] ExitRepository interface with bidirectional handling notes\n- [ ] ObjectRepository interface with containment queries\n- [ ] SceneRepository interface with participant management\n- [ ] SceneParticipant struct defined\n- [ ] All interfaces match design spec exactly\n- [ ] `task lint` passes\n- [ ] Agent code review completed","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-23T02:15:19Z","created_by":"seanb4t","updated_at":"2026-01-23T02:39:08Z","closed_at":"2026-01-23T02:39:08Z","dependencies":[{"issue_id":"holomush-x2t.13","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.13","depends_on_id":"holomush-x2t.10","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.13","depends_on_id":"holomush-x2t.11","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.13","depends_on_id":"holomush-x2t.12","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.130","title":"[E4-PR] Add test for Exit.ReverseExit() with nil ReverseExitID","description":"## Problem\n\nThe Exit.ReverseExit() method returns nil when ReverseExitID is nil. While this behavior is tested indirectly, there is no explicit test verifying it.\n\n**File:** internal/world/exit_test.go\n\n## Acceptance Criteria\n\n- [ ] Add explicit test case for ReverseExit() returning nil\n- [ ] Test verifies behavior is intentional, not accidental\n\n## Suggested Test\n\n```go\nt.Run(\"returns nil when ReverseExitID is nil\", func(t *testing.T) {\n    exit := \u0026Exit{\n        ID:             ulid.Make(),\n        FromLocationID: ulid.Make(),\n        ToLocationID:   ulid.Make(),\n        Name:           \"north\",\n        ReverseExitID:  nil,\n    }\n    reverse := exit.ReverseExit()\n    assert.Nil(t, reverse)\n})\n```","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T19:00:16Z","created_by":"seanb4t","updated_at":"2026-01-25T19:34:23Z","closed_at":"2026-01-25T19:34:23Z","dependencies":[{"issue_id":"holomush-x2t.130","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.131","title":"[E4-PR] Add test for MoveObject event emission failure","description":"## Problem\n\nTests exist for event emission failures in ExamineLocation, ExamineObject, and ExamineCharacter, but MoveObject event emission failure is not explicitly tested.\n\n**File:** internal/world/service_test.go\n\nThe MoveObject method has specific behavior when event emission fails:\n- Returns error with move_succeeded=true context\n- Logs at appropriate level\n- Does not retry the database operation\n\nThis behavior should be explicitly tested.\n\n## Acceptance Criteria\n\n- [ ] Add test TestService_MoveObject_EventEmissionFailure\n- [ ] Test verifies error is returned when event emission fails\n- [ ] Test verifies move_succeeded=true is in error context\n- [ ] Test verifies database move was successful despite event error\n- [ ] Test uses mock EventEmitter that returns error\n\n## Similar Tests to Reference\n\nSee TestService_ExamineLocation_EventEmitterError and similar tests in service_test.go for the pattern.","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T19:00:16Z","created_by":"seanb4t","updated_at":"2026-01-25T19:32:07Z","closed_at":"2026-01-25T19:32:07Z","dependencies":[{"issue_id":"holomush-x2t.131","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.14","title":"[E4-3.1] PostgreSQL Location Repository","description":"Implement PostgreSQL LocationRepository with CRUD operations.\n\n## Files\n- Create: `internal/world/postgres/location_repo.go`\n- Create: `internal/world/postgres/location_repo_test.go`\n- Create: `internal/world/postgres/postgres_test.go` (test setup)\n\n## Implementation (TDD)\n\n### Step 1: Write failing tests\nCreate `location_repo_test.go` with integration tests:\n- `TestLocationRepository_CRUD/create_and_get` - Create location, retrieve it\n- `TestLocationRepository_CRUD/update` - Modify and verify changes\n- `TestLocationRepository_CRUD/list_by_type` - Filter by location type\n- `TestLocationRepository_CRUD/get_not_found` - ErrNotFound for missing\n\nCreate `postgres_test.go` with TestMain for database setup.\n\nRun: `task test -- -run TestLocationRepository ./internal/world/postgres/...`\nExpected: FAIL - package does not exist\n\n### Step 2: Write minimal implementation\nCreate LocationRepository struct with:\n- pool *pgxpool.Pool\n- NewLocationRepository(pool) constructor\n\nImplement all interface methods:\n- Get - SELECT with ULID string conversion\n- Create - INSERT with nil handling for optional fields\n- Update - UPDATE with RowsAffected check\n- Delete - DELETE with RowsAffected check\n- ListByType - SELECT WHERE type = $1\n- GetShadowedBy - SELECT WHERE shadows_id = $1\n\nCreate ErrNotFound error and scanLocations helper.\n\nRun: `task test -- -run TestLocationRepository ./internal/world/postgres/...`\nExpected: PASS (or skip if no test database)\n\n### Step 3: Commit\n`git commit -m \"feat(world): add PostgreSQL LocationRepository\"`\n\n## Development Approach\n- **TDD:** REQUIRED - Tests MUST be written first and fail before implementation\n- **Review:** REQUIRED - Agent must review SQL queries and error handling\n\n## Acceptance Criteria\n- [ ] Tests written first and verified to fail\n- [ ] All LocationRepository interface methods implemented\n- [ ] ULID string conversion handled correctly\n- [ ] Optional fields (ShadowsID, OwnerID) handled with nil pointers\n- [ ] ErrNotFound returned for missing entities\n- [ ] RowsAffected checked for update/delete\n- [ ] Integration tests pass with real database\n- [ ] All tests pass (or skip if no database)\n- [ ] Agent code review completed","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-23T02:15:41Z","created_by":"seanb4t","updated_at":"2026-01-23T02:48:32Z","closed_at":"2026-01-23T02:48:32Z","dependencies":[{"issue_id":"holomush-x2t.14","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.14","depends_on_id":"holomush-x2t.10","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.14","depends_on_id":"holomush-x2t.13","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.14","depends_on_id":"holomush-x2t.9","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.15","title":"[E4-3.2] PostgreSQL Exit Repository","description":"Implement PostgreSQL ExitRepository with CRUD and bidirectional handling.\n\n## Files\n- Create: `internal/world/postgres/exit_repo.go`\n- Create: `internal/world/postgres/exit_repo_test.go`\n\n## Implementation (TDD)\n\n### Step 1: Write failing tests\nCreate tests for:\n- `TestExitRepository_CRUD/create_and_get` - Create exit, retrieve it\n- `TestExitRepository_CRUD/create_bidirectional` - Creates return exit automatically\n- `TestExitRepository_CRUD/delete_bidirectional` - Deletes both exits\n- `TestExitRepository_CRUD/list_from_location` - List exits from room\n- `TestExitRepository_CRUD/find_by_name` - Find by name or alias\n\nRun: `task test -- -run TestExitRepository ./internal/world/postgres/...`\nExpected: FAIL - ExitRepository not defined\n\n### Step 2: Write minimal implementation\nCreate ExitRepository struct with:\n- pool *pgxpool.Pool\n- NewExitRepository(pool) constructor\n\nImplement all interface methods:\n- Get - SELECT with JSONB lock_data handling\n- Create - INSERT; if bidirectional, also create reverse exit\n- Update - UPDATE with RowsAffected check\n- Delete - DELETE; if bidirectional, also delete reverse\n- ListFromLocation - SELECT WHERE from_location_id = $1\n- FindByName - SELECT WHERE name = $1 OR $1 = ANY(aliases)\n\nHandle:\n- TEXT[] for aliases using pgtype\n- JSONB for lock_data\n- Bidirectional exit pairs\n\nRun: `task test -- -run TestExitRepository ./internal/world/postgres/...`\nExpected: PASS\n\n### Step 3: Commit\n`git commit -m \"feat(world): add PostgreSQL ExitRepository\"`\n\n## Development Approach\n- **TDD:** REQUIRED - Tests MUST be written first and fail before implementation\n- **Review:** REQUIRED - Agent must review bidirectional logic\n\n## Acceptance Criteria\n- [ ] Tests written first and verified to fail\n- [ ] All ExitRepository interface methods implemented\n- [ ] Bidirectional exits created/deleted as pairs\n- [ ] FindByName matches both name and aliases\n- [ ] TEXT[] and JSONB types handled correctly\n- [ ] All tests pass\n- [ ] Agent code review completed","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-23T02:15:52Z","created_by":"seanb4t","updated_at":"2026-01-23T02:48:32Z","closed_at":"2026-01-23T02:48:32Z","dependencies":[{"issue_id":"holomush-x2t.15","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.15","depends_on_id":"holomush-x2t.11","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.15","depends_on_id":"holomush-x2t.13","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.15","depends_on_id":"holomush-x2t.9","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.16","title":"[E4-3.3] PostgreSQL Object Repository","description":"Implement PostgreSQL ObjectRepository with containment queries and Move operation.\n\n## Files\n- Create: `internal/world/postgres/object_repo.go`\n- Create: `internal/world/postgres/object_repo_test.go`\n\n## Implementation (TDD)\n\n### Step 1: Write failing tests\nCreate tests for:\n- `TestObjectRepository_CRUD/create_and_get` - Create object, retrieve it\n- `TestObjectRepository_CRUD/update` - Modify and verify changes\n- `TestObjectRepository_CRUD/list_at_location` - Objects in a room\n- `TestObjectRepository_CRUD/list_held_by` - Objects in inventory\n- `TestObjectRepository_CRUD/list_contained_in` - Objects in container\n- `TestObjectRepository_CRUD/move` - Change containment\n- `TestObjectRepository_CRUD/move_validates_containment` - Rejects invalid moves\n\nRun: `task test -- -run TestObjectRepository ./internal/world/postgres/...`\nExpected: FAIL - ObjectRepository not defined\n\n### Step 2: Write minimal implementation\nCreate ObjectRepository struct with:\n- pool *pgxpool.Pool\n- NewObjectRepository(pool) constructor\n\nImplement all interface methods:\n- Get - SELECT with nil handling for containment fields\n- Create - INSERT with containment validation\n- Update - UPDATE with RowsAffected check\n- Delete - DELETE with RowsAffected check\n- ListAtLocation - SELECT WHERE location_id = $1\n- ListHeldBy - SELECT WHERE held_by_character_id = $1\n- ListContainedIn - SELECT WHERE contained_in_object_id = $1\n- Move - Validate containment, UPDATE containment fields\n\nHandle:\n- Exactly one containment field must be set\n- Self-containment prevented (enforced by DB constraint too)\n\nRun: `task test -- -run TestObjectRepository ./internal/world/postgres/...`\nExpected: PASS\n\n### Step 3: Commit\n`git commit -m \"feat(world): add PostgreSQL ObjectRepository\"`\n\n## Development Approach\n- **TDD:** REQUIRED - Tests MUST be written first and fail before implementation\n- **Review:** REQUIRED - Agent must review containment validation\n\n## Acceptance Criteria\n- [ ] Tests written first and verified to fail\n- [ ] All ObjectRepository interface methods implemented\n- [ ] Move validates containment (exactly one field set)\n- [ ] Self-containment prevented\n- [ ] Containment queries filter correctly\n- [ ] All tests pass\n- [ ] Agent code review completed","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-23T02:16:03Z","created_by":"seanb4t","updated_at":"2026-01-23T02:48:32Z","closed_at":"2026-01-23T02:48:32Z","dependencies":[{"issue_id":"holomush-x2t.16","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.16","depends_on_id":"holomush-x2t.12","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.16","depends_on_id":"holomush-x2t.13","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.16","depends_on_id":"holomush-x2t.9","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.17","title":"[E4-3.4] PostgreSQL Scene Repository","description":"Implement PostgreSQL SceneRepository for participant management.\n\n## Files\n- Create: `internal/world/postgres/scene_repo.go`\n- Create: `internal/world/postgres/scene_repo_test.go`\n\n## Implementation (TDD)\n\n### Step 1: Write failing tests\nCreate tests for:\n- `TestSceneRepository/add_participant` - Add character to scene\n- `TestSceneRepository/remove_participant` - Remove character from scene\n- `TestSceneRepository/list_participants` - List all participants with roles\n- `TestSceneRepository/get_scenes_for` - List scenes for a character\n\nRun: `task test -- -run TestSceneRepository ./internal/world/postgres/...`\nExpected: FAIL - SceneRepository not defined\n\n### Step 2: Write minimal implementation\nCreate SceneRepository struct with:\n- pool *pgxpool.Pool\n- NewSceneRepository(pool) constructor\n\nImplement all interface methods:\n- AddParticipant - INSERT INTO scene_participants\n- RemoveParticipant - DELETE FROM scene_participants\n- ListParticipants - SELECT character_id, role WHERE scene_id = $1\n- GetScenesFor - SELECT locations.* JOIN scene_participants\n\nHandle:\n- Role validation (owner, member, invited)\n- Upsert for AddParticipant (ON CONFLICT UPDATE role)\n\nRun: `task test -- -run TestSceneRepository ./internal/world/postgres/...`\nExpected: PASS\n\n### Step 3: Commit\n`git commit -m \"feat(world): add PostgreSQL SceneRepository\"`\n\n## Development Approach\n- **TDD:** REQUIRED - Tests MUST be written first and fail before implementation\n- **Review:** REQUIRED - Agent must review JOIN queries\n\n## Acceptance Criteria\n- [ ] Tests written first and verified to fail\n- [ ] All SceneRepository interface methods implemented\n- [ ] AddParticipant uses upsert pattern\n- [ ] GetScenesFor returns full Location objects\n- [ ] All tests pass\n- [ ] Agent code review completed","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-23T02:16:12Z","created_by":"seanb4t","updated_at":"2026-01-23T02:48:32Z","closed_at":"2026-01-23T02:48:32Z","dependencies":[{"issue_id":"holomush-x2t.17","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.17","depends_on_id":"holomush-x2t.10","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.17","depends_on_id":"holomush-x2t.13","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.17","depends_on_id":"holomush-x2t.9","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.18","title":"[E4-4.1] World Event Types","description":"Add world model event types to the core event system.\n\n## Files\n- Modify: `internal/core/event.go`\n- Modify: `internal/core/event_test.go`\n\n## Implementation (TDD)\n\n### Step 1: Write failing tests\nAdd tests for new event types to verify they have correct string values:\n- EventTypeMove = \"move\"\n- EventTypeObjectCreate = \"object_create\"\n- EventTypeObjectDestroy = \"object_destroy\"\n- EventTypeObjectUse = \"object_use\"\n- EventTypeObjectExamine = \"object_examine\"\n- EventTypeObjectGive = \"object_give\"\n\nRun: `task test -- -run TestEventType ./internal/core/...`\nExpected: FAIL - new event types not defined\n\n### Step 2: Add new event type constants\nAdd to `internal/core/event.go`:\n\n```go\n// World event types\nconst (\n    EventTypeMove          EventType = \"move\"\n    EventTypeObjectCreate  EventType = \"object_create\"\n    EventTypeObjectDestroy EventType = \"object_destroy\"\n    EventTypeObjectUse     EventType = \"object_use\"\n    EventTypeObjectExamine EventType = \"object_examine\"\n    EventTypeObjectGive    EventType = \"object_give\"\n)\n```\n\nRun: `task test -- -run TestEventType ./internal/core/...`\nExpected: PASS\n\n### Step 3: Commit\n`git commit -m \"feat(core): add world model event types\"`\n\n## Development Approach\n- **TDD:** REQUIRED - Tests MUST be written first and fail before implementation\n- **Review:** REQUIRED - Agent must review event types match design spec\n\n## Acceptance Criteria\n- [ ] Tests written first and verified to fail\n- [ ] All 6 world event types added\n- [ ] Event type strings match design spec exactly\n- [ ] Tests verify String() returns correct values\n- [ ] All tests pass\n- [ ] Agent code review completed","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-23T02:16:36Z","created_by":"seanb4t","updated_at":"2026-01-23T02:50:33Z","closed_at":"2026-01-23T02:50:33Z","dependencies":[{"issue_id":"holomush-x2t.18","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.18","depends_on_id":"holomush-x2t.10","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.18","depends_on_id":"holomush-x2t.11","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.18","depends_on_id":"holomush-x2t.12","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.19","title":"[E4-4.2] Event Payloads","description":"Implement event payload types for world events.\n\n## Files\n- Create: `internal/world/payloads.go`\n- Create: `internal/world/payloads_test.go`\n\n## Implementation (TDD)\n\n### Step 1: Write failing tests\nCreate tests for JSON marshal/unmarshal:\n- `TestMovePayload_JSON` - Serialize and deserialize MovePayload\n- `TestObjectGivePayload_JSON` - Serialize and deserialize ObjectGivePayload\n\nRun: `task test -- -run TestPayload ./internal/world/...`\nExpected: FAIL - Payload types not defined\n\n### Step 2: Write minimal implementation\nCreate payload structs:\n\n```go\n// MovePayload for \"move\" events.\ntype MovePayload struct {\n    EntityType string `json:\"entity_type\"`  // \"character\" | \"object\"\n    EntityID   string `json:\"entity_id\"`\n    FromType   string `json:\"from_type\"`    // \"location\" | \"character\" | \"object\"\n    FromID     string `json:\"from_id\"`\n    ToType     string `json:\"to_type\"`\n    ToID       string `json:\"to_id\"`\n    ExitID     string `json:\"exit_id,omitempty\"`\n    ExitName   string `json:\"exit_name,omitempty\"`\n}\n\n// ObjectGivePayload for \"object_give\" events.\ntype ObjectGivePayload struct {\n    ObjectID        string `json:\"object_id\"`\n    ObjectName      string `json:\"object_name\"`\n    FromCharacterID string `json:\"from_character_id\"`\n    ToCharacterID   string `json:\"to_character_id\"`\n}\n```\n\nRun: `task test -- -run TestPayload ./internal/world/...`\nExpected: PASS\n\n### Step 3: Commit\n`git commit -m \"feat(world): add event payload types\"`\n\n## Development Approach\n- **TDD:** REQUIRED - Tests MUST be written first and fail before implementation\n- **Review:** REQUIRED - Agent must review JSON tags match design spec\n\n## Acceptance Criteria\n- [ ] Tests written first and verified to fail\n- [ ] MovePayload with unified entity/from/to fields\n- [ ] ObjectGivePayload with from/to character fields\n- [ ] JSON tags match design spec exactly\n- [ ] omitempty on optional fields (ExitID, ExitName)\n- [ ] JSON round-trip tests pass\n- [ ] All tests pass\n- [ ] Agent code review completed","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-23T02:16:47Z","created_by":"seanb4t","updated_at":"2026-01-23T02:50:33Z","closed_at":"2026-01-23T02:50:33Z","dependencies":[{"issue_id":"holomush-x2t.19","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.19","depends_on_id":"holomush-x2t.18","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.2","title":"[E4] Implementation Plan: World Model","description":"Create implementation plan for Epic 4 World Model.\n\n## Acceptance Criteria\n- [ ] Break down design into concrete implementation tasks\n- [ ] Define file structure and package organization\n- [ ] Specify test strategy for each phase\n- [ ] Document migration scripts needed\n- [ ] Output: docs/plans/epic-4-world-model-implementation.md","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:30:20Z","created_by":"seanb4t","updated_at":"2026-01-23T02:06:13Z","closed_at":"2026-01-23T02:06:13Z","dependencies":[{"issue_id":"holomush-x2t.2","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.2","depends_on_id":"holomush-x2t.1","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.20","title":"[E4-5.1] Generate Repository Mocks","description":"Generate mockery mocks for all world repository interfaces.\n\n## Files\n- Modify: `.mockery.yaml` (add world interfaces)\n- Create: `internal/world/worldtest/` directory with generated mocks\n\n## Implementation\n\n### Step 1: Update mockery configuration\nAdd to `.mockery.yaml`:\n\n```yaml\npackages:\n  github.com/holomush/holomush/internal/world:\n    interfaces:\n      LocationRepository:\n        config:\n          outpkg: worldtest\n          dir: internal/world/worldtest\n      ExitRepository:\n        config:\n          outpkg: worldtest\n          dir: internal/world/worldtest\n      ObjectRepository:\n        config:\n          outpkg: worldtest\n          dir: internal/world/worldtest\n      SceneRepository:\n        config:\n          outpkg: worldtest\n          dir: internal/world/worldtest\n```\n\n### Step 2: Generate mocks\nRun: `mockery`\nExpected: Mocks generated in internal/world/worldtest/\n\n### Step 3: Verify mocks compile\nRun: `go build ./internal/world/worldtest/...`\nExpected: Build succeeds\n\n### Step 4: Commit\n`git commit -m \"feat(world): add test mocks for repositories\"`\n\n## Development Approach\n- **TDD:** N/A for generated code\n- **Review:** REQUIRED - Agent must verify mocks match interfaces\n\n## Acceptance Criteria\n- [ ] .mockery.yaml updated with world interfaces\n- [ ] MockLocationRepository generated\n- [ ] MockExitRepository generated\n- [ ] MockObjectRepository generated\n- [ ] MockSceneRepository generated\n- [ ] All mocks in worldtest package\n- [ ] `go build ./internal/world/worldtest/...` succeeds\n- [ ] Agent code review completed","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-23T02:17:02Z","created_by":"seanb4t","updated_at":"2026-01-23T02:51:30Z","closed_at":"2026-01-23T02:51:30Z","dependencies":[{"issue_id":"holomush-x2t.20","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.20","depends_on_id":"holomush-x2t.13","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.21","title":"[E4] Add testcontainers to world model postgres tests","description":"Migrate internal/world/postgres tests to use testcontainers like internal/store does. Currently tests silently skip if no database available (os.Exit(0)), meaning CI may pass without actually running database tests.\n\n**Files:**\n- Modify: internal/world/postgres/postgres_test.go\n\n**Acceptance Criteria:**\n- [ ] Use testcontainers/testcontainers-go/modules/postgres\n- [ ] Match pattern from internal/store/postgres_integration_test.go\n- [ ] Tests actually run in CI with real PostgreSQL\n- [ ] Remove silent skip behavior","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-23T03:01:49Z","created_by":"seanb4t","updated_at":"2026-01-23T03:14:15Z","closed_at":"2026-01-23T03:14:15Z","dependencies":[{"issue_id":"holomush-x2t.21","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.22","title":"[E4] Add PostgreSQL LISTEN/NOTIFY for event streaming","description":"Implement PostgreSQL LISTEN/NOTIFY to replace polling for event subscriptions. This enables real-time event delivery without continuous database queries.\n\n**Scope:**\n- Event store Subscribe() method uses LISTEN/NOTIFY\n- Notifications on event Append() via NOTIFY\n- Channel per stream pattern (e.g., LISTEN location_123)\n\n**Files:**\n- Modify: internal/store/postgres.go\n- Create: internal/store/notify.go (optional)\n- Test: internal/store/postgres_integration_test.go\n\n**Acceptance Criteria:**\n- [ ] Subscribe() uses LISTEN instead of polling\n- [ ] Append() triggers NOTIFY after insert\n- [ ] Integration tests verify real-time delivery\n- [ ] Graceful fallback if connection drops","status":"closed","priority":2,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-23T03:01:49Z","created_by":"seanb4t","updated_at":"2026-01-23T03:24:17Z","closed_at":"2026-01-23T03:24:17Z","dependencies":[{"issue_id":"holomush-x2t.22","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.22","depends_on_id":"holomush-x2t.21","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.23","title":"[E4] Add pg_trgm extension for fuzzy name matching","description":"Add pg_trgm extension for fuzzy text search on exit names, aliases, and object names. Enables typo-tolerant matching for player commands.\n\n**Use cases:**\n- FindByName with typo tolerance (e.g., 'nroth' matches 'north')\n- Object search by partial/fuzzy name\n- Location search\n\n**Files:**\n- Create: internal/store/migrations/004_pg_trgm.sql\n- Modify: internal/world/postgres/exit_repo.go (add fuzzy FindByName)\n- Test with testcontainers\n\n**Acceptance Criteria:**\n- [ ] Migration enables pg_trgm extension\n- [ ] GIN/GIST index on exit names/aliases\n- [ ] FindByNameFuzzy method with similarity threshold\n- [ ] Integration tests with testcontainers","status":"closed","priority":3,"issue_type":"feature","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-23T03:01:50Z","created_by":"seanb4t","updated_at":"2026-01-23T03:30:26Z","closed_at":"2026-01-23T03:30:26Z","dependencies":[{"issue_id":"holomush-x2t.23","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.23","depends_on_id":"holomush-x2t.21","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.24","title":"[E4] Add pg_stat_statements for query monitoring","description":"Enable pg_stat_statements extension for production query performance monitoring.\n\n**Scope:**\n- Migration to enable extension\n- Document recommended monitoring queries\n- Consider exposing via observability endpoint\n\n**Files:**\n- Create: internal/store/migrations/005_pg_stat_statements.sql\n- Update: docs/reference/operations.md (or create)\n\n**Acceptance Criteria:**\n- [ ] Migration enables pg_stat_statements\n- [ ] Documentation for common monitoring queries\n- [ ] Works with testcontainers (shared_preload_libraries)","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-23T03:01:50Z","created_by":"seanb4t","updated_at":"2026-01-23T03:32:59Z","closed_at":"2026-01-23T03:32:59Z","dependencies":[{"issue_id":"holomush-x2t.24","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.25","title":"[E4] Update documentation for world model completion","description":"Update project documentation to reflect completed world model implementation.\n\n**Tasks:**\n- Mark spec acceptance criteria as complete (checkboxes)\n- Add world model section to architecture-overview.md\n- Update CLAUDE.md with world model patterns if needed\n\n**Files:**\n- Modify: docs/specs/2026-01-22-world-model-design.md\n- Modify: docs/reference/architecture-overview.md\n\n**Acceptance Criteria:**\n- [ ] Spec acceptance criteria marked complete\n- [ ] Architecture overview mentions world model packages\n- [ ] New patterns documented for team reference","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-23T03:01:50Z","created_by":"seanb4t","updated_at":"2026-01-23T03:24:21Z","closed_at":"2026-01-23T03:24:21Z","dependencies":[{"issue_id":"holomush-x2t.25","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.26","title":"Task 1.1: Create BDD Test Suite Setup","description":"## Overview\n\nCreate the BDD integration test suite setup for world model testing using Ginkgo/Gomega with testcontainers for PostgreSQL 18.\n\n## Files\n\n- **Create:** `test/integration/world/world_suite_test.go`\n\n## Work Required\n\n1. Create directory structure `test/integration/world/`\n2. Create `world_suite_test.go` with:\n   - Build tag `//go:build integration`\n   - `TestWorld` function registering Ginkgo fail handler\n   - `testEnv` struct holding: context, pgxpool, container, eventStore, and all repository instances (Locations, Exits, Objects, Scenes)\n   - `BeforeSuite` calling `setupWorldTestEnv()`\n   - `AfterSuite` calling `env.cleanup()`\n   - `setupWorldTestEnv()` that:\n     - Starts Postgres 18-alpine via testcontainers\n     - Waits for \"database system is ready to accept connections\" (2 occurrences)\n     - Creates PostgresEventStore and runs migrations\n     - Creates pgxpool connection\n     - Initializes all world repositories\n   - Helper functions:\n     - `createTestLocation(name, description string, locType world.LocationType) *world.Location`\n     - `createTestExit(fromID, toID ulid.ULID, name string) *world.Exit`\n     - `createTestObject(name, description string, containment world.Containment) *world.Object`\n     - `createTestCharacterID() ulid.ULID`\n     - `cleanupLocations(ctx context.Context, pool *pgxpool.Pool)`\n\n## References\n\n- Implementation plan: `docs/plans/2026-01-23-world-model-bdd-tests-implementation.md` (Task 1.1)\n- Design doc: `docs/plans/2026-01-23-world-model-bdd-tests-design.md`\n- Existing BDD example: `internal/store/postgres_integration_test.go`\n\n## Acceptance Criteria\n\n- [ ] Suite file created at `test/integration/world/world_suite_test.go`\n- [ ] Suite compiles and runs with 0 specs\n- [ ] Expected: `task test:integration -- -v ./test/integration/world/... -ginkgo.v` runs with 0 specs (no specs defined yet)\n- [ ] All helper functions present and usable\n- [ ] Independent code review agent has reviewed the implementation","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-23T21:22:32Z","created_by":"seanb4t","updated_at":"2026-01-23T21:40:43Z","closed_at":"2026-01-23T21:40:43Z","dependencies":[{"issue_id":"holomush-x2t.26","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.27","title":"Task 2.1: Location Repository BDD Specs","description":"## Overview\n\nImplement BDD specs for LocationRepository covering CRUD operations, type handling, and query methods.\n\n## Files\n\n- **Create:** `test/integration/world/location_repo_test.go`\n\n## Work Required\n\nCreate `location_repo_test.go` with Ginkgo/Gomega BDD specs covering:\n\n### Describe \"LocationRepository\"\n\n1. **Describe \"Create\"**\n   - It \"persists all location fields\"\n   - It \"handles nil optional fields (owner_id, shadows_id)\"\n   - It \"sets created_at timestamp\"\n\n2. **Describe \"Get\"**\n   - It \"retrieves location with all fields\"\n   - It \"returns ErrNotFound for missing ID\"\n\n3. **Describe \"Update\"**\n   - It \"updates mutable fields\"\n   - It \"returns ErrNotFound for missing ID\"\n\n4. **Describe \"Delete\"**\n   - It \"removes location from database\"\n   - It \"returns ErrNotFound for missing ID\"\n\n5. **Describe \"ListByType\"**\n   - It \"returns only locations of specified type\"\n   - It \"returns empty slice when no matches\"\n\n6. **Describe \"GetShadowedBy\"**\n   - It \"returns scenes that shadow the location\"\n   - It \"returns empty slice when no shadows\"\n\n## References\n\n- Implementation plan: `docs/plans/2026-01-23-world-model-bdd-tests-implementation.md` (Task 2.1)\n- Design doc: `docs/plans/2026-01-23-world-model-bdd-tests-design.md`\n- Repository implementation: `internal/world/postgres/location_repo.go`\n\n## Acceptance Criteria\n\n- [ ] Spec file created at `test/integration/world/location_repo_test.go`\n- [ ] All 10 specs implemented\n- [ ] Expected: `task test:integration -- -v ./test/integration/world/... -ginkgo.focus=\"LocationRepository\"` - All specs pass\n- [ ] BeforeEach calls `cleanupLocations` for test isolation\n- [ ] Independent code review agent has reviewed the implementation","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-23T21:22:32Z","created_by":"seanb4t","updated_at":"2026-01-23T21:44:12Z","closed_at":"2026-01-23T21:44:12Z","dependencies":[{"issue_id":"holomush-x2t.27","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.27","depends_on_id":"holomush-x2t.26","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.28","title":"Task 2.2: Exit Repository BDD Specs","description":"## Overview\n\nImplement BDD specs for ExitRepository covering CRUD operations, bidirectional exits, aliases, locks, visibility, and name matching.\n\n## Files\n\n- **Create:** `test/integration/world/exit_repo_test.go`\n\n## Work Required\n\nCreate `exit_repo_test.go` with Ginkgo/Gomega BDD specs covering:\n\n### Describe \"ExitRepository\"\n\n1. **Describe \"Create\"**\n   - It \"creates exit with all fields\"\n   - It \"auto-creates return exit when bidirectional\"\n   - It \"persists aliases as array\"\n   - It \"persists lock_data as JSONB\"\n   - It \"persists visible_to as array\"\n\n2. **Describe \"Delete\"**\n   - It \"removes exit from database\"\n   - It \"removes return exit when bidirectional\"\n   - It \"handles missing return exit gracefully\"\n\n3. **Describe \"FindByName\"**\n   - It \"matches exact name case-insensitively\"\n   - It \"matches aliases\"\n   - It \"returns ErrNotFound when no match\"\n\n4. **Describe \"FindByNameFuzzy\"**\n   - It \"returns matches above threshold\"\n   - It \"returns ErrNotFound when below threshold\"\n   - It \"validates threshold bounds (0.0-1.0)\"\n\n5. **Describe \"ListFromLocation\"**\n   - It \"returns all exits from location\"\n   - It \"orders by name\"\n\n## References\n\n- Implementation plan: `docs/plans/2026-01-23-world-model-bdd-tests-implementation.md` (Task 2.2)\n- Design doc: `docs/plans/2026-01-23-world-model-bdd-tests-design.md`\n- Repository implementation: `internal/world/postgres/exit_repo.go`\n\n## Acceptance Criteria\n\n- [ ] Spec file created at `test/integration/world/exit_repo_test.go`\n- [ ] All 16 specs implemented\n- [ ] Expected: `task test:integration -- -v ./test/integration/world/... -ginkgo.focus=\"ExitRepository\"` - All specs pass\n- [ ] BeforeEach creates room1, room2 fixtures for exit tests\n- [ ] Independent code review agent has reviewed the implementation","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-23T21:22:32Z","created_by":"seanb4t","updated_at":"2026-01-23T21:44:12Z","closed_at":"2026-01-23T21:44:12Z","dependencies":[{"issue_id":"holomush-x2t.28","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.28","depends_on_id":"holomush-x2t.26","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.29","title":"Task 2.3: Object Repository BDD Specs","description":"## Overview\n\nImplement BDD specs for ObjectRepository covering CRUD operations, containment validation, Move with depth/circular checks, and listing methods.\n\n## Files\n\n- **Create:** `test/integration/world/object_repo_test.go`\n\n## Work Required\n\nCreate `object_repo_test.go` with Ginkgo/Gomega BDD specs covering:\n\n### Describe \"ObjectRepository\"\n\n1. **Describe \"Create\"**\n   - It \"creates object with containment in location\"\n   - It \"creates object with containment held by character\"\n\n2. **Describe \"Move\"**\n   - It \"updates containment atomically\"\n   - It \"validates target is container when moving to object\"\n   - It \"allows moving to actual container\"\n   - It \"enforces max nesting depth\" (depth 3 limit)\n   - It \"prevents circular containment\"\n   - It \"prevents self-containment\"\n\n3. **Describe \"ListAtLocation\"**\n   - It \"returns objects at location\"\n   - It \"returns empty slice for empty location\"\n\n4. **Describe \"ListHeldBy\"**\n   - It \"returns objects held by character\"\n\n5. **Describe \"ListContainedIn\"**\n   - It \"returns objects inside container\"\n\n## References\n\n- Implementation plan: `docs/plans/2026-01-23-world-model-bdd-tests-implementation.md` (Task 2.3)\n- Design doc: `docs/plans/2026-01-23-world-model-bdd-tests-design.md`\n- Repository implementation: `internal/world/postgres/object_repo.go`\n\n## Acceptance Criteria\n\n- [ ] Spec file created at `test/integration/world/object_repo_test.go`\n- [ ] All 12 specs implemented\n- [ ] Expected: `task test:integration -- -v ./test/integration/world/... -ginkgo.focus=\"ObjectRepository\"` - All specs pass\n- [ ] BeforeEach creates room and charID fixtures\n- [ ] Independent code review agent has reviewed the implementation","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-23T21:22:32Z","created_by":"seanb4t","updated_at":"2026-01-23T21:44:12Z","closed_at":"2026-01-23T21:44:12Z","dependencies":[{"issue_id":"holomush-x2t.29","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.29","depends_on_id":"holomush-x2t.26","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.3","title":"[E4.1] Location schema + repository","description":"Implement location schema and repository with CRUD operations and location streams.\n\n## Acceptance Criteria\n- [ ] Location PostgreSQL schema with id, name, description, attributes\n- [ ] LocationRepository interface with Create, Get, Update, Delete, List\n- [ ] Location event types: LocationCreated, LocationUpdated, LocationDeleted\n- [ ] Location stream for event sourcing (location:{id})\n- [ ] \u003e80% test coverage for repository\n- [ ] Integration tests with PostgreSQL","status":"tombstone","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:30:24Z","created_by":"seanb4t","updated_at":"2026-01-23T02:13:47Z","work_type":"mutex"}
{"id":"holomush-x2t.30","title":"Task 2.4: Scene Repository BDD Specs","description":"## Overview\n\nImplement BDD specs for SceneRepository covering participant management (add, remove, list, update role) and scene queries.\n\n## Files\n\n- **Create:** `test/integration/world/scene_repo_test.go`\n\n## Work Required\n\nCreate `scene_repo_test.go` with Ginkgo/Gomega BDD specs covering:\n\n### Describe \"SceneRepository\"\n\n1. **Describe \"AddParticipant\"**\n   - It \"adds character to scene with role\"\n   - It \"updates role if already participant\"\n\n2. **Describe \"RemoveParticipant\"**\n   - It \"removes character from scene\"\n\n3. **Describe \"ListParticipants\"**\n   - It \"returns all participants with roles\"\n\n4. **Describe \"GetScenesFor\"**\n   - It \"returns scenes character participates in\"\n\n## References\n\n- Implementation plan: `docs/plans/2026-01-23-world-model-bdd-tests-implementation.md` (Task 2.4)\n- Design doc: `docs/plans/2026-01-23-world-model-bdd-tests-design.md`\n- Repository implementation: `internal/world/postgres/scene_repo.go`\n\n## Acceptance Criteria\n\n- [ ] Spec file created at `test/integration/world/scene_repo_test.go`\n- [ ] All 5 specs implemented\n- [ ] Expected: `task test:integration -- -v ./test/integration/world/... -ginkgo.focus=\"SceneRepository\"` - All specs pass\n- [ ] BeforeEach creates scene and charID1, charID2 fixtures\n- [ ] Independent code review agent has reviewed the implementation","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-23T21:22:33Z","created_by":"seanb4t","updated_at":"2026-01-23T21:44:12Z","closed_at":"2026-01-23T21:44:12Z","dependencies":[{"issue_id":"holomush-x2t.30","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.30","depends_on_id":"holomush-x2t.26","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.31","title":"Task 3.1: Location Management Feature Specs","description":"## Overview\n\nImplement feature-level BDD specs for Location Management covering location types, replay policies, and ownership semantics.\n\n## Files\n\n- **Create:** `test/integration/world/locations_test.go`\n\n## Work Required\n\nCreate `locations_test.go` with Ginkgo/Gomega BDD specs covering:\n\n### Describe \"Location Management\"\n\n1. **Describe \"Location types\"**\n   - It \"creates persistent locations (permanent world rooms)\"\n   - It \"creates scene locations (temporary RP rooms)\"\n   - It \"creates instance locations (future instanced content)\"\n\n2. **Describe \"Replay policy\"**\n   - Context \"persistent locations\"\n     - It \"defaults to 'last:0' (no replay)\"\n   - Context \"scene locations\"\n     - It \"defaults to 'last:-1' (full history)\"\n   - It \"parses 'last:N' format correctly\"\n   - It \"supports custom replay limits\"\n\n3. **Describe \"Location ownership\"**\n   - It \"tracks owner_id for builder permissions\"\n   - It \"allows nil owner for system-created locations\"\n\n## References\n\n- Implementation plan: `docs/plans/2026-01-23-world-model-bdd-tests-implementation.md` (Task 3.1)\n- Design doc: `docs/plans/2026-01-23-world-model-bdd-tests-design.md`\n- World model spec: `docs/specs/2026-01-22-world-model-design.md`\n\n## Acceptance Criteria\n\n- [ ] Spec file created at `test/integration/world/locations_test.go`\n- [ ] All 9 specs implemented\n- [ ] Expected: `task test:integration -- -v ./test/integration/world/... -ginkgo.focus=\"Location Management\"` - All specs pass\n- [ ] Tests exercise `world.ParseReplayPolicy` and `world.DefaultReplayPolicy`\n- [ ] Independent code review agent has reviewed the implementation","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-23T21:22:33Z","created_by":"seanb4t","updated_at":"2026-01-23T21:48:13Z","closed_at":"2026-01-23T21:48:13Z","dependencies":[{"issue_id":"holomush-x2t.31","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.31","depends_on_id":"holomush-x2t.26","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.31","depends_on_id":"holomush-x2t.27","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.32","title":"Task 3.2: Scene Management Feature Specs","description":"## Overview\n\nImplement feature-level BDD specs for Scene Management covering scene creation, shadowing (inheritance), and participant management.\n\n## Files\n\n- **Create:** `test/integration/world/scenes_test.go`\n\n## Work Required\n\nCreate `scenes_test.go` with Ginkgo/Gomega BDD specs covering:\n\n### Describe \"Scene Management\"\n\n1. **Describe \"Creating scenes\"**\n   - It \"creates scene with type 'scene'\"\n   - It \"sets default replay policy to 'last:-1' (full history)\"\n   - It \"assigns creator as scene owner\"\n\n2. **Describe \"Scene shadowing\"**\n   - Context \"when shadowing a persistent location\"\n     - It \"inherits name from parent when scene name is empty\"\n     - It \"inherits description from parent when empty\"\n     - It \"uses own name/description when provided (override)\"\n   - It \"lists all scenes shadowing a location via GetShadowedBy\"\n\n3. **Describe \"Scene participants\"**\n   - It \"adds participant with 'member' role by default\"\n   - It \"supports 'owner', 'member', 'invited' roles\"\n   - It \"removes participant from scene\"\n   - It \"lists all participants in a scene\"\n   - It \"lists all scenes a character participates in\"\n\n## References\n\n- Implementation plan: `docs/plans/2026-01-23-world-model-bdd-tests-implementation.md` (Task 3.2)\n- Design doc: `docs/plans/2026-01-23-world-model-bdd-tests-design.md`\n- World model spec: `docs/specs/2026-01-22-world-model-design.md`\n\n## Acceptance Criteria\n\n- [ ] Spec file created at `test/integration/world/scenes_test.go`\n- [ ] All 12 specs implemented\n- [ ] Expected: `task test:integration -- -v ./test/integration/world/... -ginkgo.focus=\"Scene Management\"` - All specs pass\n- [ ] Tests exercise `EffectiveName` and `EffectiveDescription` methods\n- [ ] Independent code review agent has reviewed the implementation","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-23T21:22:33Z","created_by":"seanb4t","updated_at":"2026-01-23T21:48:13Z","closed_at":"2026-01-23T21:48:13Z","dependencies":[{"issue_id":"holomush-x2t.32","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.32","depends_on_id":"holomush-x2t.26","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.32","depends_on_id":"holomush-x2t.30","type":"blocks","created_at":"2026-02-11T18:05:29Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.33","title":"Task 3.3: Exit and Movement Feature Specs","description":"## Overview\n\nImplement feature-level BDD specs for Character Movement covering bidirectional exits, visibility rules, locking, and name matching.\n\n## Files\n\n- **Create:** `test/integration/world/movement_test.go`\n\n## Work Required\n\nCreate `movement_test.go` with Ginkgo/Gomega BDD specs covering:\n\n### Describe \"Character Movement\"\n\n1. **Describe \"Bidirectional exits\"**\n   - It \"allows movement in both directions\"\n   - It \"uses return_name for the reverse direction\"\n\n2. **Describe \"Exit visibility\"**\n   - Context \"when visibility is 'all'\"\n     - It \"shows exit to any character\"\n   - Context \"when visibility is 'owner'\"\n     - It \"shows exit only to location owner\"\n     - It \"hides exit from non-owners\"\n   - Context \"when visibility is 'list'\"\n     - It \"shows exit only to characters in visible_to list\"\n\n3. **Describe \"Locked exits\"**\n   - Context \"with key lock\"\n     - It \"stores lock configuration\"\n   - Context \"with password lock\"\n     - It \"stores password hash in lock_data\"\n\n4. **Describe \"Exit name matching\"**\n   - It \"matches by exact name (case-insensitive)\"\n   - It \"matches by alias\"\n   - It \"matches by fuzzy search with threshold\"\n\n## References\n\n- Implementation plan: `docs/plans/2026-01-23-world-model-bdd-tests-implementation.md` (Task 3.3)\n- Design doc: `docs/plans/2026-01-23-world-model-bdd-tests-design.md`\n- World model spec: `docs/specs/2026-01-22-world-model-design.md`\n\n## Acceptance Criteria\n\n- [ ] Spec file created at `test/integration/world/movement_test.go`\n- [ ] All 13 specs implemented\n- [ ] Expected: `task test:integration -- -v ./test/integration/world/... -ginkgo.focus=\"Character Movement\"` - All specs pass\n- [ ] Tests exercise `IsVisibleTo` method on Exit\n- [ ] Independent code review agent has reviewed the implementation","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-23T21:22:33Z","created_by":"seanb4t","updated_at":"2026-01-23T21:48:13Z","closed_at":"2026-01-23T21:48:13Z","dependencies":[{"issue_id":"holomush-x2t.33","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.33","depends_on_id":"holomush-x2t.26","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.33","depends_on_id":"holomush-x2t.28","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.34","title":"Task 3.4: Object Handling Feature Specs","description":"## Overview\n\nImplement feature-level BDD specs for Object Handling covering pickup, drop, container operations, circular prevention, and containment invariants.\n\n## Files\n\n- **Create:** `test/integration/world/objects_test.go`\n\n## Work Required\n\nCreate `objects_test.go` with Ginkgo/Gomega BDD specs covering:\n\n### Describe \"Object Handling\"\n\n1. **Describe \"Picking up objects\"**\n   - It \"moves object from location to character inventory\"\n\n2. **Describe \"Dropping objects\"**\n   - It \"moves object from character inventory to location\"\n\n3. **Describe \"Container operations\"**\n   - Context \"putting objects in containers\"\n     - It \"moves object into container object\"\n     - It \"fails when target is not a container\"\n     - It \"fails when exceeding max nesting depth (3)\"\n   - Context \"taking objects from containers\"\n     - It \"moves object from container to character\"\n   - Context \"circular containment prevention\"\n     - It \"prevents putting container inside itself\"\n     - It \"prevents A-\u003eB-\u003eA circular chains\"\n     - It \"prevents deep circular chains A-\u003eB-\u003eC-\u003eA\"\n\n4. **Describe \"Containment invariants\"**\n   - It \"ensures object is in exactly one place\"\n   - It \"clears previous containment when moving\"\n\n## References\n\n- Implementation plan: `docs/plans/2026-01-23-world-model-bdd-tests-implementation.md` (Task 3.4)\n- Design doc: `docs/plans/2026-01-23-world-model-bdd-tests-design.md`\n- World model spec: `docs/specs/2026-01-22-world-model-design.md`\n\n## Acceptance Criteria\n\n- [ ] Spec file created at `test/integration/world/objects_test.go`\n- [ ] All 11 specs implemented\n- [ ] Expected: `task test:integration -- -v ./test/integration/world/... -ginkgo.focus=\"Object Handling\"` - All specs pass\n- [ ] Tests exercise container nesting depth enforcement (max 3)\n- [ ] Tests exercise circular containment prevention\n- [ ] Independent code review agent has reviewed the implementation","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-23T21:22:34Z","created_by":"seanb4t","updated_at":"2026-01-23T21:48:13Z","closed_at":"2026-01-23T21:48:13Z","dependencies":[{"issue_id":"holomush-x2t.34","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.34","depends_on_id":"holomush-x2t.26","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.34","depends_on_id":"holomush-x2t.29","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.35","title":"Task 4.1: Run Full BDD Test Suite and Verify","description":"## Overview\n\nRun the complete BDD test suite, verify no regressions, and mark the design document as implemented.\n\n## Work Required\n\n1. **Run all world model integration tests**\n   - Command: `task test:integration -- -v ./test/integration/world/... -ginkgo.v`\n   - Verify all ~80+ specs pass\n\n2. **Verify no regressions in existing tests**\n   - Command: `task test`\n   - All unit tests must pass\n\n3. **Update design document status**\n   - Update `docs/plans/2026-01-23-world-model-bdd-tests-design.md`\n   - Change status from \"Draft\" to \"Implemented\"\n   - Commit the change\n\n4. **Run linting**\n   - Command: `task lint`\n   - All linting must pass\n\n## References\n\n- Implementation plan: `docs/plans/2026-01-23-world-model-bdd-tests-implementation.md` (Task 4.1)\n- Design doc: `docs/plans/2026-01-23-world-model-bdd-tests-design.md`\n\n## Acceptance Criteria\n\n- [ ] Expected: `task test:integration -- -v ./test/integration/world/... -ginkgo.v` - All ~80+ specs pass\n- [ ] Expected: `task test` - All unit tests pass\n- [ ] Expected: `task lint` - Clean\n- [ ] Design document status updated to \"Implemented\"\n- [ ] Final commit pushed\n- [ ] Independent code review agent has reviewed the implementation","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-23T21:22:34Z","created_by":"seanb4t","updated_at":"2026-01-23T21:48:23Z","closed_at":"2026-01-23T21:48:23Z","dependencies":[{"issue_id":"holomush-x2t.35","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.35","depends_on_id":"holomush-x2t.31","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.35","depends_on_id":"holomush-x2t.32","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.35","depends_on_id":"holomush-x2t.33","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.35","depends_on_id":"holomush-x2t.34","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.36","title":"[E4-P2] Task 1: Character type and CharacterRepository interface","description":"## Overview\n\nDefine the Character domain type and CharacterRepository interface for character-location binding.\n\n## Files\n\n- Create: `internal/world/character.go`\n- Create: `internal/world/character_test.go`\n- Modify: `internal/world/repository.go`\n\n## Implementation\n\n### Step 1: Write failing test for Character type\n\nCreate `internal/world/character_test.go` with tests for:\n- Valid character with name and location\n- Empty name fails validation\n- Nil location is allowed (character not in world)\n\nRun: `task test -- -v ./internal/world/... -run TestCharacter`\nExpected: FAIL with \"undefined: world.Character\"\n\n### Step 2: Write Character type\n\nCreate `internal/world/character.go` with:\n- Character struct (ID, PlayerID, Name, LocationID, CreatedAt)\n- Validate() method using existing ValidateName\n\nRun: `task test -- -v ./internal/world/... -run TestCharacter`\nExpected: PASS\n\n### Step 3: Add CharacterRepository interface\n\nAdd to `internal/world/repository.go`:\n- Get(ctx, id) (*Character, error)\n- GetByLocation(ctx, locationID) ([]*Character, error)\n- UpdateLocation(ctx, characterID, locationID) error\n\n## Acceptance Criteria\n\n- [ ] Character struct defined with ID, PlayerID, Name, LocationID, CreatedAt fields\n- [ ] Character.Validate() validates name using existing ValidateName function\n- [ ] CharacterRepository interface defined with Get, GetByLocation, UpdateLocation\n- [ ] Tests pass: `task test -- -v ./internal/world/... -run TestCharacter`\n  - Expected: PASS (all character validation tests)\n- [ ] Linting passes: `task lint`\n  - Expected: 0 issues","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T20:25:51Z","created_by":"seanb4t","updated_at":"2026-01-24T20:39:55Z","closed_at":"2026-01-24T20:39:55Z","dependencies":[{"issue_id":"holomush-x2t.36","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.37","title":"[E4-P2] Task 2: PostgreSQL CharacterRepository implementation","description":"## Overview\n\nImplement CharacterRepository for PostgreSQL, enabling character-location queries.\n\n## Files\n\n- Create: `internal/world/postgres/character_repo.go`\n- Create: `internal/world/postgres/character_repo_test.go`\n\n## Implementation\n\n### Step 1: Write failing tests\n\nCreate `internal/world/postgres/character_repo_test.go` with tests for:\n- Get returns ErrNotFound for non-existent character\n- GetByLocation returns empty slice for location with no characters\n- UpdateLocation moves character to new location\n\nRun: `task test -- -v ./internal/world/postgres/... -run TestCharacterRepository`\nExpected: FAIL with \"undefined: postgres.NewCharacterRepository\"\n\n### Step 2: Write implementation\n\nCreate `internal/world/postgres/character_repo.go` with:\n- CharacterRepository struct with pool\n- NewCharacterRepository constructor\n- Get method querying characters table\n- GetByLocation method with location_id filter\n- UpdateLocation method updating location_id\n- Error codes: CHARACTER_NOT_FOUND\n\nRun: `task test -- -v ./internal/world/postgres/... -run TestCharacterRepository`\nExpected: PASS\n\n## File Overlap\n\n- Uses `internal/world/character.go` (Character type)\n- Uses `internal/world/repository.go` (CharacterRepository interface)\n- Follows patterns from `internal/world/postgres/location_repo.go`\n\n## Acceptance Criteria\n\n- [ ] CharacterRepository struct implements world.CharacterRepository\n- [ ] Get returns CHARACTER_NOT_FOUND error code for missing characters\n- [ ] GetByLocation returns empty slice (not error) for locations without characters\n- [ ] UpdateLocation returns CHARACTER_NOT_FOUND if character doesn't exist\n- [ ] Tests pass: `task test -- -v ./internal/world/postgres/... -run TestCharacterRepository`\n  - Expected: PASS (all repository tests)\n- [ ] Linting passes: `task lint`\n  - Expected: 0 issues","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T20:25:51Z","created_by":"seanb4t","updated_at":"2026-01-24T20:46:08Z","closed_at":"2026-01-24T20:46:08Z","dependencies":[{"issue_id":"holomush-x2t.37","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.37","depends_on_id":"holomush-x2t.36","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.38","title":"[E4-P2] Task 3: World query host functions for Lua plugins","description":"## Overview\n\nAdd world query host functions (query_room, query_character, query_room_characters) to the Lua plugin system.\n\n## Files\n\n- Create: `internal/plugin/hostfunc/world.go`\n- Create: `internal/plugin/hostfunc/world_test.go`\n- Modify: `internal/plugin/hostfunc/functions.go`\n\n## Implementation\n\n### Step 1: Define WorldQuerier interface\n\nCreate `internal/plugin/hostfunc/world.go` with:\n- WorldQuerier interface (GetLocation, GetCharacter, GetCharactersByLocation)\n- queryRoomFn returning room info as Lua table\n- queryCharacterFn returning character info as Lua table\n- queryRoomCharactersFn returning array of characters\n\n### Step 2: Update Functions struct\n\nModify `internal/plugin/hostfunc/functions.go`:\n- Add world field (WorldQuerier) to Functions struct\n- Add WithWorldQuerier option\n- Register query functions with capability checks (world.read.location, world.read.character)\n\n### Step 3: Write tests\n\nCreate `internal/plugin/hostfunc/world_test.go` with:\n- Mock WorldQuerier\n- Test query_room returns location data\n- Test query_character returns character data\n- Test query_room_characters returns array\n\nRun: `task test -- -v ./internal/plugin/hostfunc/... -run TestQuery`\nExpected: PASS\n\n## File Overlap\n\n- Uses `internal/world/location.go` (Location type)\n- Uses `internal/world/character.go` (Character type)\n- Extends `internal/plugin/hostfunc/functions.go` (host functions)\n\n## Conceptual Overlap\n\n- Bridges plugin system with world model\n- Enables plugins to read world state\n- Follows existing host function patterns (kv_get, kv_set)\n\n## Acceptance Criteria\n\n- [ ] WorldQuerier interface defined\n- [ ] query_room host function returns room info (id, name, description, type)\n- [ ] query_character host function returns character info (id, name, location_id)\n- [ ] query_room_characters host function returns array of characters\n- [ ] All functions require appropriate capabilities (world.read.*)\n- [ ] Tests pass: `task test -- -v ./internal/plugin/hostfunc/... -run TestQuery`\n  - Expected: PASS\n- [ ] Linting passes: `task lint`\n  - Expected: 0 issues","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T20:26:10Z","created_by":"seanb4t","updated_at":"2026-01-24T20:49:51Z","closed_at":"2026-01-24T20:49:51Z","dependencies":[{"issue_id":"holomush-x2t.38","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.38","depends_on_id":"holomush-x2t.36","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.38","depends_on_id":"holomush-x2t.37","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.39","title":"[E4-P2] Task 4: Generate CharacterRepository mock","description":"## Overview\n\nGenerate mock for CharacterRepository to enable unit testing of dependent code.\n\n## Files\n\n- Modify: `.mockery.yaml`\n- Generate: `internal/world/worldtest/mock_CharacterRepository.go`\n\n## Implementation\n\n### Step 1: Update mockery config\n\nAdd CharacterRepository to `.mockery.yaml` under the world package section:\n\n```yaml\nCharacterRepository:\n  config:\n    dir: \"{{.InterfaceDir}}/worldtest\"\n```\n\n### Step 2: Generate mock\n\nRun: `mockery`\nExpected: Creates `internal/world/worldtest/mock_CharacterRepository.go`\n\n### Step 3: Verify mock compiles\n\nRun: `go build ./internal/world/worldtest/...`\nExpected: Build succeeds\n\n## File Overlap\n\n- Uses `internal/world/repository.go` (CharacterRepository interface)\n- Follows pattern from existing mocks in `internal/world/worldtest/`\n\n## Acceptance Criteria\n\n- [ ] CharacterRepository added to .mockery.yaml\n- [ ] Mock generated at internal/world/worldtest/mock_CharacterRepository.go\n- [ ] Build passes: `go build ./internal/world/worldtest/...`\n  - Expected: Build succeeds with no errors\n- [ ] Mock can be used in tests with EXPECT() pattern","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T20:26:10Z","created_by":"seanb4t","updated_at":"2026-01-24T20:46:08Z","closed_at":"2026-01-24T20:46:08Z","dependencies":[{"issue_id":"holomush-x2t.39","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.39","depends_on_id":"holomush-x2t.36","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.4","title":"[E4.2] Exit schema + navigation","description":"Implement exit schema and navigation system with bidirectional exits.\n\n## Acceptance Criteria\n- [ ] Exit PostgreSQL schema with id, from_location, to_location, direction, reverse_direction\n- [ ] ExitRepository interface with Create, Get, Delete, ListByLocation\n- [ ] Bidirectional exit support (north/south, east/west, etc.)\n- [ ] Move command implementation\n- [ ] Exit event types: ExitCreated, ExitDeleted\n- [ ] \u003e80% test coverage\n- [ ] Integration tests verifying move works end-to-end","status":"tombstone","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:30:29Z","created_by":"seanb4t","updated_at":"2026-01-23T02:13:47Z","work_type":"mutex"}
{"id":"holomush-x2t.40","title":"[E4-P2] Task 5: World seeding CLI command","description":"## Overview\n\nAdd a CLI command to seed the initial world with a starting location.\n\n## Files\n\n- Create: `cmd/holomush/seed.go`\n\n## Implementation\n\n### Step 1: Write seed command\n\nCreate `cmd/holomush/seed.go` with:\n- seedCmd cobra command\n- init() to register with rootCmd\n- runSeed function that:\n  - Connects to database\n  - Runs migrations\n  - Creates LocationRepository\n  - Creates starting location (\"The Nexus\")\n  - Handles idempotency (doesn't fail if already exists)\n\n### Step 2: Test manually\n\nRun: `go build -o holomush ./cmd/holomush \u0026\u0026 ./holomush seed --help`\nExpected: Shows seed command help with usage information\n\nRun: `./holomush seed` (with valid DATABASE_URL)\nExpected: \"World seeding complete\\!\" message\n\nRun: `./holomush seed` (second time)\nExpected: Still succeeds (idempotent), logs \"Starting location may already exist\"\n\n## File Overlap\n\n- Uses `internal/store/postgres.go` (NewPool, Migrate)\n- Uses `internal/world/postgres/location_repo.go` (LocationRepository)\n- Uses `internal/world/location.go` (Location type)\n- Follows patterns from existing commands in `cmd/holomush/`\n\n## Conceptual Overlap\n\n- Provides initial world data for new deployments\n- Required for testing and development environments\n- Referenced in Epic 4 acceptance criteria: \"CLI/API can seed initial world\"\n\n## Acceptance Criteria\n\n- [ ] `holomush seed` command exists and shows help\n  - Run: `./holomush seed --help`\n  - Expected: Shows command description and usage\n- [ ] Command creates \"The Nexus\" starting location\n  - Run: `./holomush seed`\n  - Expected: \"World seeding complete\\!\" message\n- [ ] Command is idempotent (can run multiple times)\n  - Run: `./holomush seed` twice\n  - Expected: Both succeed without duplicate errors\n- [ ] Linting passes: `task lint`\n  - Expected: 0 issues","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T20:26:32Z","created_by":"seanb4t","updated_at":"2026-01-24T20:39:55Z","closed_at":"2026-01-24T20:39:55Z","dependencies":[{"issue_id":"holomush-x2t.40","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.41","title":"[E4-P2] Task 6: Plugin event emission on world operations","description":"## Overview\n\nWire the world service to emit events when world operations occur, enabling plugins to react to movement, object creation, etc.\n\n## Files\n\n- Create: `internal/world/events.go`\n- Modify: `internal/world/service.go`\n- Modify: `internal/world/service_test.go`\n\n## Implementation\n\n### Step 1: Define EventEmitter interface\n\nCreate `internal/world/events.go` with:\n- EventEmitter interface (Emit method)\n- EmitMoveEvent helper function\n- EmitObjectCreateEvent helper function\n- Stream naming convention: \"location:\u003cid\u003e\"\n\n### Step 2: Update Service to accept EventEmitter\n\nModify `internal/world/service.go`:\n- Add EventEmitter field to ServiceConfig\n- Store in Service struct\n\n### Step 3: Emit events in MoveObject\n\nUpdate MoveObject in `internal/world/service.go`:\n- After successful move, create MovePayload\n- Call EmitMoveEvent with the payload\n- Log warning (don't fail) if emit fails\n\n### Step 4: Write tests\n\nAdd to `internal/world/service_test.go`:\n- Mock EventEmitter\n- Test MoveObject emits move event with correct payload\n- Test event emission failure doesn't fail the operation\n\nRun: `task test -- -v ./internal/world/... -run TestService_MoveObject_EmitsEvent`\nExpected: PASS\n\n## File Overlap\n\n- Uses `internal/world/payloads.go` (MovePayload, EntityType*, ContainmentType*)\n- Modifies `internal/world/service.go` (Service, MoveObject)\n- Uses existing event patterns from `internal/core/event.go`\n\n## Conceptual Overlap\n\n- Bridges world operations with plugin system\n- Enables plugins to react to game events\n- Referenced in Epic 4 acceptance criteria: \"Plugin hooks fire for enter/leave/look/pickup/drop\"\n\n## Acceptance Criteria\n\n- [ ] EventEmitter interface defined in events.go\n- [ ] EmitMoveEvent and EmitObjectCreateEvent helpers work\n- [ ] Service accepts EventEmitter in config\n- [ ] MoveObject emits move event after successful move\n- [ ] Event emission failure logs warning but doesn't fail operation\n- [ ] Tests pass: `task test -- -v ./internal/world/... -run TestService_MoveObject`\n  - Expected: PASS\n- [ ] Linting passes: `task lint`\n  - Expected: 0 issues","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T20:26:33Z","created_by":"seanb4t","updated_at":"2026-01-24T20:46:08Z","closed_at":"2026-01-24T20:46:08Z","dependencies":[{"issue_id":"holomush-x2t.41","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.41","depends_on_id":"holomush-x2t.36","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.42","title":"Verify Epic 4 acceptance criteria","description":"## Summary\nFinal verification that all Epic 4 (World Model Foundation) acceptance criteria are met after completing all implementation tasks.\n\n## Work Required\n1. Review Epic 4 acceptance criteria from holomush-x2t\n2. Verify each criterion is satisfied with test evidence\n3. Run full test suite to confirm no regressions\n4. Update epic status if all criteria pass\n\n## Acceptance Criteria\n- [ ] Locations: CRUD operations work with full test coverage\n  - Expected: `task test` passes for internal/world/postgres/location_repo_test.go\n- [ ] Exits: Bidirectional exits with visibility work\n  - Expected: `task test` passes for internal/world/postgres/exit_repo_test.go\n- [ ] Objects: Containment model with nested containers works\n  - Expected: `task test` passes for internal/world/postgres/object_repo_test.go\n- [ ] Characters: Location binding via CharacterRepository works\n  - Expected: `task test` passes for internal/world/postgres/character_repo_test.go\n- [ ] Plugin hooks: Events emitted on world operations\n  - Expected: EventEmitter tests pass\n- [ ] World seeding: CLI seeds default world\n  - Expected: `go run ./cmd/holomush seed --help` shows usage\n- [ ] Host functions: Lua can query world state\n  - Expected: Host function tests pass with mock repository\n- [ ] Full test suite passes\n  - Expected: `task test` exits 0 with no failures\n\n## Files to Verify\n- internal/world/*.go (all domain types)\n- internal/world/postgres/*.go (all repositories)\n- internal/plugin/hostfunc/world.go (host functions)\n- cmd/holomush/seed.go (seeding command)\n\n## Dependencies\n- Depends on all other Epic 4 Phase 2 tasks completing first","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T20:27:42Z","created_by":"seanb4t","updated_at":"2026-01-24T21:00:57Z","closed_at":"2026-01-24T21:00:57Z","dependencies":[{"issue_id":"holomush-x2t.42","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.42","depends_on_id":"holomush-x2t.36","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.42","depends_on_id":"holomush-x2t.37","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.42","depends_on_id":"holomush-x2t.38","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.42","depends_on_id":"holomush-x2t.39","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.42","depends_on_id":"holomush-x2t.40","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.42","depends_on_id":"holomush-x2t.41","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.43","title":"Add debug logging when EventEmitter is nil","description":"## Problem\nThe emit functions (EmitMoveEvent, EmitObjectCreateEvent, EmitObjectGiveEvent) silently return nil when emitter is nil. Operators may not know events are being dropped.\n\n## Acceptance Criteria\n- [ ] Add slog.Debug log when emitter is nil in EmitMoveEvent\n- [ ] Add slog.Debug log when emitter is nil in EmitObjectCreateEvent  \n- [ ] Add slog.Debug log when emitter is nil in EmitObjectGiveEvent\n- [ ] Add slog.Warn in NewService when EventEmitter not configured\n- [ ] Tests verify logging occurs\n\n## Files\n- internal/world/events.go:42-44, 67-69, 101-103\n- internal/world/service.go (NewService)","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T02:11:34Z","created_by":"seanb4t","updated_at":"2026-01-25T02:25:24Z","closed_at":"2026-01-25T02:25:24Z","dependencies":[{"issue_id":"holomush-x2t.43","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.43","depends_on_id":"holomush-x2t.55","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.44","title":"Use OBJECT_MOVE_EVENT_FAILED error code for event emission failures","description":"## Problem\nMoveObject returns OBJECT_MOVE_FAILED both when the DB move fails and when event emission fails. Callers cannot distinguish between these cases.\n\n## Acceptance Criteria\n- [ ] Change error code to OBJECT_MOVE_EVENT_FAILED when EmitMoveEvent fails\n- [ ] Add move_succeeded=true context to the error\n- [ ] Update tests to verify new error code\n- [ ] Document eventual consistency behavior in MoveObject docstring\n\n## Files\n- internal/world/service.go:395-397","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T02:11:34Z","created_by":"seanb4t","updated_at":"2026-01-25T02:31:32Z","closed_at":"2026-01-25T02:31:32Z","dependencies":[{"issue_id":"holomush-x2t.44","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.44","depends_on_id":"holomush-x2t.43","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.45","title":"Add player_id field to query_character Lua response","description":"## Problem\nqueryCharacterFn returns character info but omits player_id field. Plugins may need this to determine character ownership.\n\n## Acceptance Criteria\n- [ ] Add L.SetField(character, \"player_id\", lua.LString(char.PlayerID.String()))\n- [ ] Add test verifying player_id is returned\n- [ ] Update plugin documentation if exists\n\n## Files\n- internal/plugin/hostfunc/world.go:131-139\n- internal/plugin/hostfunc/world_test.go","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T02:11:35Z","created_by":"seanb4t","updated_at":"2026-01-25T02:21:19Z","closed_at":"2026-01-25T02:21:19Z","dependencies":[{"issue_id":"holomush-x2t.45","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.46","title":"Validate inputs in NewWorldQuerierAdapter constructor","description":"## Problem\nNewWorldQuerierAdapter does not validate inputs. Nil service or empty pluginName would cause problems at runtime.\n\n## Acceptance Criteria\n- [ ] Add nil check for svc parameter, panic if nil (matching NewService pattern)\n- [ ] Add empty string check for pluginName, panic if empty\n- [ ] Add tests for constructor validation\n\n## Files\n- internal/plugin/hostfunc/adapter.go:33-38\n- internal/plugin/hostfunc/adapter_test.go","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T02:11:35Z","created_by":"seanb4t","updated_at":"2026-01-25T02:21:19Z","closed_at":"2026-01-25T02:21:19Z","dependencies":[{"issue_id":"holomush-x2t.46","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.47","title":"Improve world service not configured error messages","description":"## Problem\nWhen worldService is nil, error messages are not actionable. Plugin developers don't know how to fix.\n\n## Acceptance Criteria\n- [ ] Update slog.Error to mention WithWorldService option\n- [ ] Update Lua error string to say \"contact server administrator\"\n- [ ] Apply to queryRoomFn, queryCharacterFn, queryRoomCharactersFn\n\n## Files\n- internal/plugin/hostfunc/world.go:36-40, 92-96, 146-150","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T02:11:35Z","created_by":"seanb4t","updated_at":"2026-01-25T02:25:24Z","closed_at":"2026-01-25T02:25:24Z","dependencies":[{"issue_id":"holomush-x2t.47","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.47","depends_on_id":"holomush-x2t.46","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.48","title":"Make seed command timeout configurable","description":"## Problem\n30-second timeout is hardcoded in seed command. May be insufficient for slow connections.\n\n## Acceptance Criteria\n- [ ] Add --timeout flag to seed command (default 30s)\n- [ ] Update seed_test.go to test custom timeout\n- [ ] Document flag in command help\n\n## Files\n- cmd/holomush/seed.go:46","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T02:11:37Z","created_by":"seanb4t","updated_at":"2026-01-25T02:21:19Z","closed_at":"2026-01-25T02:21:19Z","dependencies":[{"issue_id":"holomush-x2t.48","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.49","title":"Document query_room_characters response format","description":"## Problem\nqueryRoomCharactersFn returns only id and name, while queryCharacterFn returns more fields. Inconsistency may surprise plugin authors.\n\n## Acceptance Criteria\n- [ ] Add comment documenting intentional difference (list vs detail view)\n- [ ] OR add optional parameter to include full details\n- [ ] Update plugin documentation\n\n## Files\n- internal/plugin/hostfunc/world.go:187-191","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T02:11:37Z","created_by":"seanb4t","updated_at":"2026-01-25T02:31:32Z","closed_at":"2026-01-25T02:31:32Z","dependencies":[{"issue_id":"holomush-x2t.49","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.5","title":"[E4.3] Object schema + inventory","description":"Implement object schema and inventory system.\n\n## Acceptance Criteria\n- [ ] Object PostgreSQL schema with id, name, description, location_id, owner_id, attributes\n- [ ] ObjectRepository interface with Create, Get, Update, Delete, ListByLocation, ListByOwner\n- [ ] Object can be in location OR owned by character (mutually exclusive)\n- [ ] Pick up and drop commands\n- [ ] Object event types: ObjectCreated, ObjectPickedUp, ObjectDropped\n- [ ] \u003e80% test coverage\n- [ ] Integration tests for pick up/drop flow","status":"tombstone","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:30:39Z","created_by":"seanb4t","updated_at":"2026-01-23T02:13:47Z","work_type":"mutex"}
{"id":"holomush-x2t.50","title":"Add generic error propagation test for GetCharacter","description":"## Problem\nMissing test for CHARACTER_GET_FAILED error code when repository fails with non-ErrNotFound error.\n\n## Acceptance Criteria\n- [ ] Add test \"returns error when repository fails with generic error\"\n- [ ] Mock repository to return generic database error\n- [ ] Assert CHARACTER_GET_FAILED error code\n\n## Files\n- internal/world/service_test.go","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T02:11:37Z","created_by":"seanb4t","updated_at":"2026-01-25T02:21:19Z","closed_at":"2026-01-25T02:21:19Z","dependencies":[{"issue_id":"holomush-x2t.50","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.51","title":"Add generic error propagation test for GetCharactersByLocation","description":"## Problem\nMissing test for CHARACTER_QUERY_FAILED error code when repository fails with generic error.\n\n## Acceptance Criteria\n- [ ] Add test \"returns error when repository fails\"\n- [ ] Mock repository to return generic database error\n- [ ] Assert CHARACTER_QUERY_FAILED error code\n\n## Files\n- internal/world/service_test.go","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T02:11:38Z","created_by":"seanb4t","updated_at":"2026-01-25T02:25:24Z","closed_at":"2026-01-25T02:25:24Z","dependencies":[{"issue_id":"holomush-x2t.51","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.51","depends_on_id":"holomush-x2t.50","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.52","title":"Verify existing location attributes on seed unique violation","description":"## Problem\nSeed command returns early on unique violation without verifying existing data matches expectations.\n\n## Acceptance Criteria\n- [ ] On unique violation, fetch existing location\n- [ ] Log warning if attributes don't match expected\n- [ ] Add test for attribute mismatch detection\n\n## Files\n- cmd/holomush/seed.go:81-87","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T02:11:38Z","created_by":"seanb4t","updated_at":"2026-01-25T02:25:24Z","closed_at":"2026-01-25T02:25:24Z","dependencies":[{"issue_id":"holomush-x2t.52","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.52","depends_on_id":"holomush-x2t.48","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.53","title":"Add debug logging for event emission retry attempts","description":"## Problem\nRetry logic doesn't log intermediate failures, making transient issues hard to diagnose.\n\n## Acceptance Criteria\n- [ ] Add slog.Debug log on each retry attempt\n- [ ] Include stream, event_type, attempt number, and error\n- [ ] Test verifies logging occurs on retry\n\n## Files\n- internal/world/events.go:23-35","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T02:11:38Z","created_by":"seanb4t","updated_at":"2026-01-25T02:31:32Z","closed_at":"2026-01-25T02:31:32Z","dependencies":[{"issue_id":"holomush-x2t.53","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.53","depends_on_id":"holomush-x2t.55","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.54","title":"Fix EmitMoveEvent comment accuracy","description":"## Problem\nComment says \"location stream\" but ToID can be location, character, or object container.\n\n## Acceptance Criteria\n- [ ] Change \"Emit to destination location stream\" to \"Emit to destination stream\"\n\n## Files\n- internal/world/events.go:55","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T02:11:38Z","created_by":"seanb4t","updated_at":"2026-01-25T02:31:32Z","closed_at":"2026-01-25T02:31:32Z","dependencies":[{"issue_id":"holomush-x2t.54","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.54","depends_on_id":"holomush-x2t.55","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.55","title":"Define typed constants for event types","description":"## Problem\nEvent types are raw strings, making typos possible.\n\n## Acceptance Criteria\n- [ ] Add const EventTypeMove = \"move\"\n- [ ] Add const EventTypeCreate = \"create\"\n- [ ] Add const EventTypeGive = \"give\"\n- [ ] Update emit functions to use constants\n- [ ] Consider adding stream construction helper functions\n\n## Files\n- internal/world/events.go","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T02:11:38Z","created_by":"seanb4t","updated_at":"2026-01-25T02:21:19Z","closed_at":"2026-01-25T02:21:19Z","dependencies":[{"issue_id":"holomush-x2t.55","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.56","title":"[E4-PR] Implement query_object host function","description":"**Context:** PR review identified that acceptance criteria states 'query_location/character/object host functions work' but query_object is not implemented.\n\n**Problem:** Only query_room, query_character, query_room_characters exist. The query_object function is completely missing from WorldQuerier interface and host function registration.\n\n**Acceptance Criteria:**\n- [ ] Add GetObject method to WorldQuerier interface in internal/plugin/hostfunc/world.go\n- [ ] Implement queryObjectFn in internal/plugin/hostfunc/world.go\n- [ ] Register query_object in functions.go with world.read.object capability\n- [ ] Add tests for query_object (success, not found, permission denied, invalid ID)\n- [ ] Update WorldQuerierAdapter to include GetObject delegation\n\n**Files:**\n- internal/plugin/hostfunc/world.go\n- internal/plugin/hostfunc/world_test.go\n- internal/plugin/hostfunc/adapter.go\n- internal/plugin/hostfunc/adapter_test.go\n- internal/plugin/hostfunc/functions.go","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T02:45:01Z","created_by":"seanb4t","updated_at":"2026-01-25T02:59:44Z","closed_at":"2026-01-25T02:59:44Z","dependencies":[{"issue_id":"holomush-x2t.56","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.57","title":"[E4-PR] Surface seed attribute mismatches to user","description":"**Context:** PR review identified silent failure pattern in seed command.\n\n**Problem:** When seed location already exists but has mismatched attributes (name, type, description), the code only logs warnings via slog and returns success. Users see 'World seeding complete\\!' even when seed data has drifted, potentially masking configuration issues.\n\n**Location:** cmd/holomush/seed.go:107-132\n\n**Acceptance Criteria:**\n- [ ] Output warnings to user via cmd.PrintErrln() so they appear in terminal\n- [ ] Consider adding --strict flag that fails on mismatches\n- [ ] Ensure users can see attribute drift without checking structured logs\n- [ ] Add test verifying user-visible output for mismatches\n\n**Files:**\n- cmd/holomush/seed.go\n- cmd/holomush/seed_test.go","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T02:45:01Z","created_by":"seanb4t","updated_at":"2026-01-25T03:07:17Z","closed_at":"2026-01-25T03:07:17Z","dependencies":[{"issue_id":"holomush-x2t.57","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.58","title":"[E4-PR] Clarify plugin hooks vs event emission in acceptance criteria","description":"**Context:** PR review identified ambiguity between acceptance criteria and implementation.\n\n**Problem:** Epic 4 acceptance criteria states 'Plugin hooks fire for enter/leave/look/pickup/drop' but implementation only emits events to streams. There is no explicit hook registration/invocation mechanism for plugins.\n\n**Options:**\n1. Clarify that 'hooks' means event emission (plugins subscribe via event bus)\n2. Implement actual hook registration (on_enter, on_leave, on_look handlers)\n\n**Acceptance Criteria:**\n- [ ] Update Epic 4 acceptance criteria wording to match implementation\n- [ ] OR implement proper hook registration mechanism\n- [ ] Document the chosen approach in plugin-system-design.md spec\n- [ ] Ensure spec and implementation align\n\n**Files:**\n- .beads/ (Epic 4 description)\n- docs/specs/2026-01-18-plugin-system-design.md","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T02:45:01Z","created_by":"seanb4t","updated_at":"2026-01-25T02:50:53Z","closed_at":"2026-01-25T02:50:53Z","dependencies":[{"issue_id":"holomush-x2t.58","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.59","title":"[E4-PR] Add ERROR logging when event emission retries exhausted","description":"**Context:** PR review identified logging gap in retry logic.\n\n**Problem:** The emitWithRetry function logs individual retry attempts at DEBUG level, but when all retries are exhausted, no ERROR-level log is emitted. With DEBUG disabled in production, operators lose context that 4 attempts were made.\n\n**Location:** internal/world/events.go:52-66\n\n**Acceptance Criteria:**\n- [ ] Add ERROR-level logging when retries are exhausted before returning error\n- [ ] Include stream, event_type, total attempts, and final error in log\n- [ ] Add test verifying ERROR log is emitted on retry exhaustion\n\n**Files:**\n- internal/world/events.go\n- internal/world/events_test.go","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T02:45:02Z","created_by":"seanb4t","updated_at":"2026-01-25T03:10:02Z","closed_at":"2026-01-25T03:10:02Z","dependencies":[{"issue_id":"holomush-x2t.59","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.6","title":"[E4.4] Character-location binding","description":"Bind characters to locations in the world model.\n\n## Acceptance Criteria\n- [ ] Character schema updated with location_id foreign key\n- [ ] CharacterRepository.SetLocation, GetLocation methods\n- [ ] Characters placed in starting location on creation\n- [ ] Look command shows characters in location\n- [ ] CharacterMoved event type\n- [ ] \u003e80% test coverage\n- [ ] Integration tests for character location updates","status":"tombstone","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:30:43Z","created_by":"seanb4t","updated_at":"2026-01-23T02:13:47Z","work_type":"mutex"}
{"id":"holomush-x2t.60","title":"[E4-PR] Update plugin-system-design spec to match implementation","description":"**Context:** PR review identified spec document drift.\n\n**Problem:** The plugin-system-design.md spec shows outdated types:\n- Shows WorldReader but implementation uses WorldQuerier\n- Shows worldStore field but implementation uses worldService\n- Shows old HostFunctions struct but implementation uses Functions struct\n\n**Location:** docs/specs/2026-01-18-plugin-system-design.md\n\n**Acceptance Criteria:**\n- [ ] Update HostFunctions example struct to match actual Functions struct\n- [ ] Replace WorldReader references with WorldQuerier\n- [ ] Replace worldStore references with worldService\n- [ ] Verify all code examples in spec compile/match implementation\n\n**Files:**\n- docs/specs/2026-01-18-plugin-system-design.md","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T02:45:02Z","created_by":"seanb4t","updated_at":"2026-01-25T03:15:19Z","closed_at":"2026-01-25T03:15:19Z","dependencies":[{"issue_id":"holomush-x2t.60","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.61","title":"[E4-PR] Fix retry comment to reflect actual attempt count","description":"**Context:** PR review identified comment inaccuracy.\n\n**Problem:** Comment says 'max 3 retries' but implementation uses retry.WithMaxRetries(3, ...) which means 4 total attempts (initial + 3 retries). Tests confirm 4 attempts.\n\n**Location:** internal/world/events.go:46-47\n\n**Current:** 'Uses exponential backoff starting at 50ms, max 3 retries.'\n**Should be:** 'Uses exponential backoff starting at 50ms, up to 3 retries (4 total attempts).'\n\n**Acceptance Criteria:**\n- [ ] Update comment to clarify total attempt count\n- [ ] Verify comment matches implementation behavior\n\n**Files:**\n- internal/world/events.go","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T02:45:32Z","created_by":"seanb4t","updated_at":"2026-01-25T03:15:55Z","closed_at":"2026-01-25T03:15:55Z","dependencies":[{"issue_id":"holomush-x2t.61","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.62","title":"[E4-PR] Add error codes to WorldQuerierAdapter for consistency","description":"**Context:** PR review identified consistency issue with error handling.\n\n**Problem:** WorldQuerierAdapter uses oops.Wrapf() but does not add error codes like other parts of the codebase. This makes programmatic error identification harder for monitoring/alerting.\n\n**Location:** internal/plugin/hostfunc/adapter.go:53-77\n\n**Current:**\n```go\nreturn nil, oops.Wrapf(err, \"get location for plugin %s\", a.pluginName)\n```\n\n**Suggested:**\n```go\nreturn nil, oops.Code(\"PLUGIN_QUERY_FAILED\").\n    With(\"plugin\", a.pluginName).\n    With(\"entity_type\", \"location\").\n    Wrapf(err, \"get location\")\n```\n\n**Acceptance Criteria:**\n- [ ] Add PLUGIN_QUERY_FAILED error code to adapter methods\n- [ ] Include plugin name and entity type in error context\n- [ ] Update tests to verify error codes\n\n**Files:**\n- internal/plugin/hostfunc/adapter.go\n- internal/plugin/hostfunc/adapter_test.go","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T02:45:33Z","created_by":"seanb4t","updated_at":"2026-01-25T03:19:54Z","closed_at":"2026-01-25T03:19:54Z","dependencies":[{"issue_id":"holomush-x2t.62","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.63","title":"[E4-PR] Sanitize error messages returned to Lua plugins","description":"**Context:** PR review identified potential information exposure.\n\n**Problem:** World query functions return err.Error() directly to Lua plugins. This exposes internal error messages that may include stack traces or sensitive context from oops errors.\n\n**Location:** internal/plugin/hostfunc/world.go:70-71, 129-130, 191-192\n\n**Suggested approach:**\n- Return user-friendly messages for known error types (not found, permission denied)\n- Return generic 'internal error' for unexpected errors\n- Log full error details server-side for operators\n\n**Acceptance Criteria:**\n- [ ] Sanitize errors before returning to Lua\n- [ ] Map ErrNotFound to 'not found' message\n- [ ] Map ErrPermissionDenied to 'access denied' message\n- [ ] Log internal errors at ERROR level with full context\n- [ ] Add tests verifying sanitized error messages\n\n**Files:**\n- internal/plugin/hostfunc/world.go\n- internal/plugin/hostfunc/world_test.go","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T02:45:33Z","created_by":"seanb4t","updated_at":"2026-01-25T03:24:59Z","closed_at":"2026-01-25T03:24:59Z","dependencies":[{"issue_id":"holomush-x2t.63","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.64","title":"[E4-PR] Add test for context cancellation during event retry","description":"**Context:** PR review identified test coverage gap.\n\n**Problem:** The emitWithRetry function respects context cancellation, but there is no test verifying that cancellation stops retries and returns the context error.\n\n**Location:** internal/world/events_test.go\n\n**Suggested test:**\n```go\nt.Run(\"respects context cancellation during retry\", func(t *testing.T) {\n    ctx, cancel := context.WithCancel(context.Background())\n    cancel() // Cancel immediately\n    \n    emitter := \u0026mockEventEmitter{err: errors.New(\"transient\")}\n    payload := world.MovePayload{...}\n    \n    err := world.EmitMoveEvent(ctx, emitter, payload)\n    require.Error(t, err)\n    assert.True(t, errors.Is(err, context.Canceled))\n})\n```\n\n**Acceptance Criteria:**\n- [ ] Add test that cancels context before/during retry\n- [ ] Verify context.Canceled error is returned\n- [ ] Verify retries stop on cancellation\n\n**Files:**\n- internal/world/events_test.go","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T02:45:33Z","created_by":"seanb4t","updated_at":"2026-01-25T03:25:52Z","closed_at":"2026-01-25T03:25:52Z","dependencies":[{"issue_id":"holomush-x2t.64","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.65","title":"[E4-PR] Add deprecation timeline to WithWorldQuerier","description":"**Context:** PR review identified documentation gap.\n\n**Problem:** WithWorldQuerier function is marked deprecated but lacks guidance on when it will be removed or why it still exists.\n\n**Location:** internal/plugin/hostfunc/functions.go:54-61\n\n**Current:**\n```go\n// WithWorldQuerier is deprecated. Use WithWorldService instead.\n// This adapter allows passing a WorldQuerier directly for backwards compatibility.\n```\n\n**Suggested:**\n```go\n// Deprecated: WithWorldQuerier will be removed in a future release.\n// Use WithWorldService instead, which enables per-plugin ABAC authorization.\n// This adapter exists for backwards compatibility during the transition period.\n```\n\n**Acceptance Criteria:**\n- [ ] Update deprecation comment with removal timeline or rationale\n- [ ] Use standard Go deprecation format (// Deprecated:)\n- [ ] Consider adding go vet deprecation support\n\n**Files:**\n- internal/plugin/hostfunc/functions.go","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T02:45:33Z","created_by":"seanb4t","updated_at":"2026-01-25T03:26:42Z","closed_at":"2026-01-25T03:26:42Z","dependencies":[{"issue_id":"holomush-x2t.65","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.66","title":"[E4-PR] Add test for adapter handling nil service returns","description":"**Context:** PR review identified test coverage gap.\n\n**Problem:** WorldQuerierAdapter tests cover error propagation and successful returns, but there's no explicit test verifying behavior when the underlying service returns (nil, nil).\n\n**Location:** internal/plugin/hostfunc/adapter_test.go\n\n**Suggested test:**\n```go\nt.Run(\"handles nil location without error\", func(t *testing.T) {\n    svc := \u0026mockWorldService{location: nil, err: nil}\n    adapter := hostfunc.NewWorldQuerierAdapter(svc, \"test\")\n    \n    loc, err := adapter.GetLocation(ctx, ulid.Make())\n    assert.NoError(t, err)\n    assert.Nil(t, loc)\n})\n```\n\n**Acceptance Criteria:**\n- [ ] Add test for nil return without error for GetLocation\n- [ ] Add test for nil return without error for GetCharacter\n- [ ] Document expected behavior in comments\n\n**Files:**\n- internal/plugin/hostfunc/adapter_test.go","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T02:45:34Z","created_by":"seanb4t","updated_at":"2026-01-25T03:28:05Z","closed_at":"2026-01-25T03:28:05Z","dependencies":[{"issue_id":"holomush-x2t.66","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.67","title":"[E4-PR] Upgrade nil emitter logging from DEBUG to WARN","description":"## Problem\n\nWhen EventEmitter is nil, all `Emit*Event` functions in `internal/world/events.go` log at DEBUG level and return success. This masks configuration problems where events are not being emitted when they should be.\n\n**Inconsistency:** Service construction logs at WARN (line 55), but actual emission logs at DEBUG.\n\n## Affected Code\n\n- `internal/world/events.go:80-87` (EmitMoveEvent)\n- `internal/world/events.go:111-119` (EmitObjectCreateEvent)\n- `internal/world/events.go:154-161` (EmitObjectGiveEvent)\n- `internal/world/events.go:185-192` (EmitExamineEvent)\n\n## User Impact\n\nUsers debugging \"why didn't my plugin receive an event?\" will have no error, no warning at INFO level, and must enable DEBUG logging to discover the emitter was nil.\n\n## Acceptance Criteria\n\n- [ ] All `Emit*Event` functions log at WARN level (not DEBUG) when emitter is nil\n- [ ] Log messages are consistent with service.go:54-56 pattern\n- [ ] Existing tests still pass\n- [ ] Add test verifying WARN-level logging for nil emitter case","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T03:33:25Z","created_by":"seanb4t","updated_at":"2026-01-25T03:38:02Z","closed_at":"2026-01-25T03:38:02Z","dependencies":[{"issue_id":"holomush-x2t.67","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.68","title":"[E4-PR] Upgrade seed verification failure logging to ERROR","description":"## Problem\n\nWhen the seed location already exists and verification fetch fails, the error is logged at WARN level but command returns success. This masks potential database connectivity issues or corruption.\n\n## Affected Code\n\n- `cmd/holomush/seed.go:117-124`\n\n```go\nexisting, getErr := locationRepo.Get(ctx, startingLocID)\nif getErr \\!= nil {\n    slog.Warn(\"Could not verify existing seed location\",  // WARN only\n        \"location_id\", startingLocID,\n        \"error\", getErr)\n    slog.Info(\"World already seeded\", \"location_id\", startingLocID)\n    return nil  // Returns success despite verification failure\\!\n}\n```\n\n## User Impact\n\nOperators running `holomush seed` see \"World already seeded\" and think everything is fine, when the database may be in a problematic state.\n\n## Acceptance Criteria\n\n- [ ] Log at ERROR level when verification fetch fails\n- [ ] Print warning to stderr so operators see it clearly\n- [ ] Existing tests still pass\n- [ ] Add test verifying ERROR-level logging for verification failure","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T03:33:25Z","created_by":"seanb4t","updated_at":"2026-01-25T03:42:51Z","closed_at":"2026-01-25T03:42:51Z","dependencies":[{"issue_id":"holomush-x2t.68","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.69","title":"[E4-PR] Distinguish context cancellation in retry log messages","description":"## Problem\n\nWhen retry exhaustion occurs due to context cancellation (timeout or cancel), the error log says \"event emission failed after all retries\" which is misleading. The real cause was context timeout/cancellation.\n\n## Affected Code\n\n- `internal/world/events.go:52-72`\n\n```go\nif err \\!= nil {\n    slog.Error(\"event emission failed after all retries\",  // Doesn't say \"or cancelled\"\n        \"stream\", stream,\n        \"event_type\", eventType,\n        \"attempts\", attempt,\n        \"error\", err)\n    return oops.Wrapf(err, \"emit event after retries\")\n}\n```\n\n## Suggested Fix\n\n```go\nif err \\!= nil {\n    if errors.Is(err, context.Canceled) || errors.Is(err, context.DeadlineExceeded) {\n        slog.Warn(\"event emission cancelled\",\n            \"stream\", stream,\n            \"event_type\", eventType,\n            \"attempts\", attempt,\n            \"reason\", err)\n    } else {\n        slog.Error(\"event emission failed after all retries\",\n            \"stream\", stream,\n            \"event_type\", eventType,\n            \"attempts\", attempt,\n            \"error\", err)\n    }\n    return oops.Wrapf(err, \"emit event after retries\")\n}\n```\n\n## Acceptance Criteria\n\n- [ ] Check for context.Canceled and context.DeadlineExceeded before logging\n- [ ] Log at WARN (not ERROR) for cancellation cases\n- [ ] Use distinct log message: \"event emission cancelled\"\n- [ ] Existing tests still pass\n- [ ] Add test verifying distinct log message for context cancellation","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T03:33:25Z","created_by":"seanb4t","updated_at":"2026-01-25T03:46:51Z","closed_at":"2026-01-25T03:46:51Z","dependencies":[{"issue_id":"holomush-x2t.69","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.7","title":"[E4.5] Plugin hooks for world events","description":"Implement plugin hooks for world model events.\n\n## Acceptance Criteria\n- [ ] on_enter hook triggered when character enters location\n- [ ] on_leave hook triggered when character leaves location\n- [ ] on_look hook triggered when character looks at location/object\n- [ ] Hook payload includes location, character, and context data\n- [ ] Hooks can modify event response (e.g., custom descriptions)\n- [ ] \u003e80% test coverage with mock plugins\n- [ ] Integration tests with actual WASM plugins","status":"tombstone","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:30:48Z","created_by":"seanb4t","updated_at":"2026-01-23T02:13:47Z","work_type":"mutex"}
{"id":"holomush-x2t.70","title":"[E4-PR] Add correlation ID for plugin internal errors","description":"## Problem\n\nWhen sanitizing errors for plugins, internal errors return \"internal error\" with no way for users to correlate their error with server logs.\n\n## Affected Code\n\n- `internal/plugin/hostfunc/world.go:28-37`\n\n```go\n// Log full error for operators, return generic message to plugin.\nslog.Error(\"internal error in plugin query\",\n    \"plugin\", pluginName,\n    \"entity_type\", entityType,\n    \"entity_id\", entityID,\n    \"error\", err)\nreturn \"internal error\"\n```\n\n## Suggested Fix\n\n```go\nerrorID := ulid.Make().String()\nslog.Error(\"internal error in plugin query\",\n    \"error_id\", errorID,\n    \"plugin\", pluginName,\n    \"entity_type\", entityType,\n    \"entity_id\", entityID,\n    \"error\", err)\nreturn fmt.Sprintf(\"internal error (ref: %s)\", errorID)\n```\n\nThis allows operators to correlate user reports (\"I got internal error ref: 01ABC...\") with log entries.\n\n## Acceptance Criteria\n\n- [ ] Generate ULID for each internal error\n- [ ] Include error_id in log entry\n- [ ] Return error message with reference ID: \"internal error (ref: \u003cid\u003e)\"\n- [ ] Update tests to verify reference ID format\n- [ ] Document correlation workflow in contributor docs","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T03:33:26Z","created_by":"seanb4t","updated_at":"2026-01-25T03:51:01Z","closed_at":"2026-01-25T03:51:01Z","dependencies":[{"issue_id":"holomush-x2t.70","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.71","title":"[E4-PR] Clarify MoveObject error message for event emission failure","description":"## Problem\n\nWhen MoveObject succeeds in the database but event emission fails, the error message \"emit move event\" doesn't clearly indicate the database move succeeded.\n\n## Affected Code\n\n- `internal/world/service.go:404-409`\n\n```go\nif err := EmitMoveEvent(ctx, s.eventEmitter, payload); err \\!= nil {\n    return oops.Code(\"OBJECT_MOVE_EVENT_FAILED\").\n        With(\"object_id\", id.String()).\n        With(\"move_succeeded\", true).  // Caller must check this\\!\n        Wrapf(err, \"emit move event\")  // Message doesn't explain state\n}\n```\n\n## Suggested Fix\n\n```go\nWrapf(err, \"move completed but event emission failed\")\n```\n\nThis makes the error message self-documenting without requiring callers to parse oops context.\n\n## Acceptance Criteria\n\n- [ ] Update error message to: \"move completed but event emission failed\"\n- [ ] Verify existing tests still pass\n- [ ] Update any tests that assert on error message content","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T03:33:26Z","created_by":"seanb4t","updated_at":"2026-01-25T03:52:46Z","closed_at":"2026-01-25T03:52:46Z","dependencies":[{"issue_id":"holomush-x2t.71","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.72","title":"[E4-PR] Add nil check to WorldQuerierAdapter to prevent panic","description":"**Problem:** WorldQuerierAdapter passes through (nil, nil) returns from the service. If the service returns (nil, nil), the Lua host functions at world.go:107-109 will panic on nil dereference when calling loc.ID.String().\n\n**File:** internal/plugin/hostfunc/adapter.go:54-63\n\n**Root Cause:** The adapter methods (GetLocation, GetCharacter, GetObject) don't check for nil results when err is also nil.\n\n**Acceptance Criteria:**\n- [ ] Add nil-result check in GetLocation that returns ErrNotFound\n- [ ] Add nil-result check in GetCharacter that returns ErrNotFound  \n- [ ] Add nil-result check in GetObject that returns ErrNotFound\n- [ ] Add tests verifying nil returns are converted to ErrNotFound\n- [ ] Update adapter_test.go nil-return test comments to reflect new behavior","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T04:02:27Z","created_by":"seanb4t","updated_at":"2026-01-25T04:12:34Z","closed_at":"2026-01-25T04:12:34Z","dependencies":[{"issue_id":"holomush-x2t.72","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.73","title":"[E4-PR] Clarify MoveObject event failure semantics in comment","description":"**Problem:** Comment at service.go:359-365 says callers should 'treat the operation as successful for the user' when event emission fails, but the code returns an error (failing the operation). This mismatch causes confusion.\n\n**File:** internal/world/service.go:359-365\n\n**Current behavior:** MoveObject returns OBJECT_MOVE_EVENT_FAILED error when event emission fails, even though the database move succeeded.\n\n**Comment says:** 'Callers should handle this case by treating the operation as successful for the user while logging the event failure.'\n\n**Acceptance Criteria:**\n- [ ] Update comment to accurately describe current behavior (operation returns error on event failure)\n- [ ] OR change code to match comment (log error, return nil)\n- [ ] Document the chosen semantic clearly for callers\n- [ ] Verify tests match the documented behavior","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T04:02:28Z","created_by":"seanb4t","updated_at":"2026-01-25T13:31:47Z","closed_at":"2026-01-25T13:31:47Z","dependencies":[{"issue_id":"holomush-x2t.73","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.74","title":"[E4-PR] Define nil EventEmitter semantics for EmitMoveEvent","description":"**Problem:** When EventEmitter is nil, EmitMoveEvent returns nil (success) after logging WARN. Callers cannot distinguish between 'event emitted successfully' and 'event skipped because no emitter'.\n\n**File:** internal/world/events.go:89-97\n\n**Current behavior:** Returns nil, logs WARN, operation appears successful.\n\n**Options:**\n1. Return sentinel error (ErrNoEventEmitter) so callers can handle explicitly\n2. Document that nil emitter is a valid 'no-op' configuration (current implicit behavior)\n3. Return a boolean along with error to indicate whether event was actually emitted\n\n**Acceptance Criteria:**\n- [ ] Choose and document the nil emitter semantic\n- [ ] If Option 1: Add ErrNoEventEmitter sentinel, update callers\n- [ ] If Option 2: Add explicit documentation in code comments\n- [ ] Add test verifying chosen behavior\n- [ ] Update service.go NewService warning if behavior changes","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T04:02:28Z","created_by":"seanb4t","updated_at":"2026-01-25T13:44:02Z","closed_at":"2026-01-25T13:44:02Z","dependencies":[{"issue_id":"holomush-x2t.74","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.75","title":"[E4-PR] Consider INFO level for event emission retry logging","description":"**Suggestion:** Event emission retry attempts are logged at DEBUG level (events.go:55). This makes transient network issues invisible in production logs by default.\n\n**File:** internal/world/events.go:55\n\n**Current behavior:** slog.Debug('event emission failed, will retry', ...)\n\n**Consideration:** Logging at INFO level would provide production visibility of transient failures, helping operations teams identify infrastructure degradation patterns.\n\n**Trade-off:** More log volume vs better observability.\n\n**Acceptance Criteria:**\n- [ ] Evaluate whether DEBUG or INFO is appropriate for retry attempts\n- [ ] If changing to INFO: Update log level and verify test expectations\n- [ ] If keeping DEBUG: Document rationale in code comment\n- [ ] Consider adding a metric for retry attempts as alternative","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T04:02:50Z","created_by":"seanb4t","updated_at":"2026-01-25T13:51:05Z","closed_at":"2026-01-25T13:51:05Z","dependencies":[{"issue_id":"holomush-x2t.75","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.76","title":"[E4-PR] Consider ERROR level for missing EventEmitter at startup","description":"**Suggestion:** When creating a Service without EventEmitter, only a WARN is logged (service.go:54-56). This makes it easy for operators to deploy with misconfigured system where event-driven features silently fail.\n\n**File:** internal/world/service.go:54-56\n\n**Current behavior:** slog.Warn('world.NewService: EventEmitter not configured, world events will not be emitted')\n\n**Consideration:** ERROR level would be more prominent, or require explicit opt-out for no-emitter mode.\n\n**Acceptance Criteria:**\n- [ ] Evaluate appropriate log level for missing emitter\n- [ ] If changing to ERROR: Update log level\n- [ ] If keeping WARN: Consider adding startup health check or metric\n- [ ] Document the decision rationale","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T04:02:50Z","created_by":"seanb4t","updated_at":"2026-01-25T13:51:37Z","closed_at":"2026-01-25T13:51:37Z","dependencies":[{"issue_id":"holomush-x2t.76","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.77","title":"[E4-PR] Add deprecation timeline to WithWorldQuerier","description":"**Suggestion:** The WithWorldQuerier deprecation notice at functions.go:54-58 doesn't specify when it will be removed.\n\n**File:** internal/plugin/hostfunc/functions.go:54-58\n\n**Current notice:**\n'Deprecated: WithWorldQuerier will be removed in a future release.'\n\n**Recommendation:** Add target version or date (e.g., 'will be removed in v1.0' or 'will be removed after Q2 2026') to give consumers a timeline for migration.\n\n**Acceptance Criteria:**\n- [ ] Determine appropriate deprecation timeline\n- [ ] Update deprecation notice with specific version or date\n- [ ] Consider adding compile-time deprecation warning if Go supports it","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T04:02:50Z","created_by":"seanb4t","updated_at":"2026-01-25T13:52:42Z","closed_at":"2026-01-25T13:52:42Z","dependencies":[{"issue_id":"holomush-x2t.77","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.78","title":"[E4-PR] Add GetObject nil return test to adapter_test.go","description":"**Gap:** The adapter tests include nil-return cases for GetLocation (lines 142-150) and GetCharacter (lines 199-207), but there is no equivalent test for GetObject returning (nil, nil).\n\n**File:** internal/plugin/hostfunc/adapter_test.go\n\n**Pattern to follow:**\n```go\nt.Run('handles nil object without error', func(t *testing.T) {\n    svc := \u0026mockWorldService{object: nil, err: nil}\n    adapter := hostfunc.NewWorldQuerierAdapter(svc, 'test-plugin')\n    obj, err := adapter.GetObject(ctx, objID)\n    assert.NoError(t, err)\n    assert.Nil(t, obj)\n})\n```\n\n**Note:** This test may become obsolete if holomush-x2t.72 changes nil returns to ErrNotFound.\n\n**Acceptance Criteria:**\n- [ ] Add test for GetObject nil return (or update based on x2t.72 outcome)\n- [ ] Ensure test pattern is consistent with other adapter methods","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T04:02:51Z","created_by":"seanb4t","updated_at":"2026-01-25T13:51:51Z","closed_at":"2026-01-25T13:51:51Z","dependencies":[{"issue_id":"holomush-x2t.78","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-x2t.78","depends_on_id":"holomush-x2t.72","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.79","title":"[E4-PR] Add test for MoveObject when object not found on Get","description":"**Test Gap:** MoveObject tests cover repository.Get failure for generic errors, but there is no explicit test for Get returning ErrNotFound before the move attempt.\n\n**File:** internal/world/service_test.go\n\n**Why it matters:** Would catch regressions if the not-found check before Move is accidentally removed.\n\n**Suggested test:**\n```go\nt.Run('returns not found when object does not exist', func(t *testing.T) {\n    mockAC := \u0026mockAccessControl{}\n    mockObjRepo := worldtest.NewMockObjectRepository(t)\n    svc := world.NewService(world.ServiceConfig{\n        ObjectRepo:    mockObjRepo,\n        AccessControl: mockAC,\n    })\n    mockAC.On('Check', ctx, subjectID, 'write', 'object:'+objID.String()).Return(true)\n    mockObjRepo.EXPECT().Get(ctx, objID).Return(nil, world.ErrNotFound)\n    err := svc.MoveObject(ctx, subjectID, objID, to)\n    assert.ErrorIs(t, err, world.ErrNotFound)\n    errutil.AssertErrorCode(t, err, 'OBJECT_NOT_FOUND')\n})\n```\n\n**Acceptance Criteria:**\n- [ ] Add test for MoveObject returning ErrNotFound when object doesn't exist\n- [ ] Verify error code is OBJECT_NOT_FOUND","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T04:03:12Z","created_by":"seanb4t","updated_at":"2026-01-25T13:52:04Z","closed_at":"2026-01-25T13:52:04Z","dependencies":[{"issue_id":"holomush-x2t.79","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.8","title":"[E4.6] World seeding","description":"Implement CLI and API for creating initial world state.\n\n## Acceptance Criteria\n- [ ] CLI command: holomush world seed --file=world.yaml\n- [ ] YAML format for defining locations, exits, objects\n- [ ] gRPC API for programmatic world seeding\n- [ ] Idempotent seeding (can re-run without duplicates)\n- [ ] Validation of world structure (no orphan exits, etc.)\n- [ ] \u003e80% test coverage\n- [ ] Integration tests with sample world file","status":"tombstone","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-19T01:30:52Z","created_by":"seanb4t","updated_at":"2026-01-23T02:13:47Z","work_type":"mutex"}
{"id":"holomush-x2t.80","title":"[E4-PR] Add test for MoveObject race condition (Move returns not found)","description":"**Test Gap:** No test for when objectRepo.Move() returns ErrNotFound after Get succeeds (race condition where object is deleted between Get and Move).\n\n**File:** internal/world/service_test.go\n\n**Why it matters:** This is a real-world edge case in concurrent systems where an object could be deleted between the Get and Move calls.\n\n**Suggested test:**\n```go\nt.Run('handles race condition when object deleted between get and move', func(t *testing.T) {\n    // Setup: Get succeeds, Move returns ErrNotFound\n    mockObjRepo.EXPECT().Get(ctx, objID).Return(existingObj, nil)\n    mockObjRepo.EXPECT().Move(ctx, objID, to).Return(world.ErrNotFound)\n    \n    err := svc.MoveObject(ctx, subjectID, objID, to)\n    assert.ErrorIs(t, err, world.ErrNotFound)\n})\n```\n\n**Acceptance Criteria:**\n- [ ] Add test for race condition scenario\n- [ ] Verify appropriate error is returned\n- [ ] Document this edge case in code comments if not already present","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T04:03:13Z","created_by":"seanb4t","updated_at":"2026-01-25T13:52:17Z","closed_at":"2026-01-25T13:52:17Z","dependencies":[{"issue_id":"holomush-x2t.80","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.81","title":"[E4-PR] Add ErrNotFound tests for Delete operations","description":"**Test Gap:** DeleteLocation, DeleteExit, and DeleteObject tests cover authorization and generic errors but not the ErrNotFound case when entity does not exist.\n\n**File:** internal/world/service_test.go\n\n**Methods missing ErrNotFound tests:**\n- DeleteLocation\n- DeleteExit  \n- DeleteObject\n\n**Why it matters:** The code has explicit ErrNotFound handling that is not verified by tests.\n\n**Acceptance Criteria:**\n- [ ] Add test for DeleteLocation returning ErrNotFound\n- [ ] Add test for DeleteExit returning ErrNotFound\n- [ ] Add test for DeleteObject returning ErrNotFound\n- [ ] Verify appropriate error codes are returned","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T04:03:13Z","created_by":"seanb4t","updated_at":"2026-01-25T13:52:29Z","closed_at":"2026-01-25T13:52:29Z","dependencies":[{"issue_id":"holomush-x2t.81","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.82","title":"[E4-PR] Add GetCharactersByLocation nil return test","description":"**Test Gap:** The adapter tests cover nil returns for GetLocation, GetCharacter, and GetObject, but not for GetCharactersByLocation returning nil slice without error.\n\n**File:** internal/plugin/hostfunc/adapter_test.go\n\n**Suggested test:**\n```go\nt.Run('handles nil characters slice without error', func(t *testing.T) {\n    svc := \u0026mockWorldService{characters: nil, err: nil}\n    adapter := hostfunc.NewWorldQuerierAdapter(svc, 'test-plugin')\n    chars, err := adapter.GetCharactersByLocation(ctx, locID)\n    assert.NoError(t, err)\n    assert.Nil(t, chars)\n})\n```\n\n**Note:** Nil slice vs empty slice may have different semantics. Verify which is expected.\n\n**Acceptance Criteria:**\n- [ ] Add test for GetCharactersByLocation nil/empty return\n- [ ] Document expected behavior (nil vs empty slice)","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T04:03:13Z","created_by":"seanb4t","updated_at":"2026-01-25T13:53:00Z","closed_at":"2026-01-25T13:53:00Z","dependencies":[{"issue_id":"holomush-x2t.82","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.83","title":"[E4-PR] Add MoveCharacter service method with event emission","description":"## Problem\n\nEpic 4 acceptance criteria states \"World events emitted for movement (move)\". While `MoveObject` emits move events correctly, there is no `MoveCharacter` service method that emits events when characters change locations.\n\nThe `CharacterRepository.UpdateLocation` method exists but isn't wired to event emission at the service layer.\n\n## Acceptance Criteria\n\n- [ ] Add `MoveCharacter(ctx, subjectID, characterID, toLocationID)` method to `Service`\n- [ ] Method calls `characterRepo.UpdateLocation()` for the database change\n- [ ] Method calls `EmitMoveEvent()` with `EntityTypeCharacter` on success\n- [ ] Method follows same eventual consistency pattern as `MoveObject`\n- [ ] Error handling includes `move_succeeded=true` context when only event emission fails\n- [ ] Unit tests verify event emission for character movement\n- [ ] Integration tests verify end-to-end character movement\n\n## Files to Modify\n\n- `internal/world/service.go` - Add MoveCharacter method\n- `internal/world/service_test.go` - Add tests\n\n## Notes\n\nAlternatively, if character movement events are intentionally deferred, document this decision explicitly in the Epic 4 completion plan.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T14:27:19Z","created_by":"seanb4t","updated_at":"2026-01-25T14:57:13Z","closed_at":"2026-01-25T14:57:13Z","dependencies":[{"issue_id":"holomush-x2t.83","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.84","title":"[E4-PR] Wire EmitExamineEvent to service layer","description":"## Problem\n\nEpic 4 acceptance criteria states \"World events emitted for... examination (object_examine)\". The `EmitExamineEvent` function is defined and tested in `internal/world/events.go`, but no service method calls it.\n\n## Acceptance Criteria\n\n- [ ] Add `ExamineLocation(ctx, subjectID, characterID, locationID)` method to `Service`\n- [ ] Add `ExamineObject(ctx, subjectID, characterID, objectID)` method to `Service`\n- [ ] Add `ExamineCharacter(ctx, subjectID, characterID, targetCharacterID)` method to `Service`\n- [ ] Each method calls `EmitExamineEvent()` with appropriate `TargetType`\n- [ ] Authorization checks verify examine permission\n- [ ] Unit tests verify event emission for each examine type\n- [ ] Integration tests verify end-to-end examine events\n\n## Files to Modify\n\n- `internal/world/service.go` - Add Examine* methods\n- `internal/world/service_test.go` - Add tests\n\n## Notes\n\nAlternatively, if examine events are intentionally deferred, document this decision explicitly in the Epic 4 completion plan and update acceptance criteria.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T14:27:20Z","created_by":"seanb4t","updated_at":"2026-01-25T15:05:50Z","closed_at":"2026-01-25T15:05:50Z","dependencies":[{"issue_id":"holomush-x2t.84","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.85","title":"[E4-PR] Fix seed integration test environment variable handling","description":"## Problem\n\nThe seed integration test for missing `DATABASE_URL` doesn't explicitly clear the environment. `exec.Command` inherits ALL environment variables from the parent process, so the test may pass or fail depending on whether `DATABASE_URL` is set in the test runner's environment.\n\n**Location:** `test/integration/cli/seed_test.go:120-134`\n\n**Current code:**\n\\`\\`\\`go\ncmd := exec.CommandContext(ctx, \"go\", \"run\", \".\", \"seed\")\ncmd.Dir = \"../../../cmd/holomush\"\n// Don't set DATABASE_URL - inherits PATH but not DATABASE_URL from parent\n\\`\\`\\`\n\nThe comment is incorrect - the command DOES inherit DATABASE_URL if set.\n\n## Acceptance Criteria\n\n- [ ] Test explicitly sets `cmd.Env` to exclude `DATABASE_URL`\n- [ ] Test passes regardless of test runner's environment\n- [ ] Comment accurately reflects the behavior\n\n## Fix\n\n\\`\\`\\`go\ncmd.Env = []string{\"PATH=\" + os.Getenv(\"PATH\")} // Explicitly exclude DATABASE_URL\n\\`\\`\\`\n\n## Files to Modify\n\n- `test/integration/cli/seed_test.go`","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T14:27:20Z","created_by":"seanb4t","updated_at":"2026-01-25T15:06:25Z","closed_at":"2026-01-25T15:06:25Z","dependencies":[{"issue_id":"holomush-x2t.85","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.86","title":"[E4-PR] Clarify NewService nil EventEmitter warning message","description":"## Problem\n\nThe warning message in `NewService` when `EventEmitter` is nil is misleading.\n\n**Location:** `internal/world/service.go:54-55`\n\n**Current message:**\n\\`\\`\\`\nworld.NewService: EventEmitter not configured, world events will not be emitted\n\\`\\`\\`\n\n**Actual behavior:** When `MoveObject` is called and `EmitMoveEvent` is invoked with nil emitter, it returns `ErrNoEventEmitter` and the operation **fails**. The message implies graceful no-op behavior, but operations actually fail with an error.\n\n## Acceptance Criteria\n\n- [ ] Warning message accurately describes the consequence\n- [ ] Message clarifies that operations will fail, not silently skip\n\n## Fix\n\nChange message to:\n\\`\\`\\`\nworld.NewService: EventEmitter not configured, operations requiring event emission will fail\n\\`\\`\\`\n\n## Files to Modify\n\n- `internal/world/service.go`","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T14:27:20Z","created_by":"seanb4t","updated_at":"2026-01-25T15:07:03Z","closed_at":"2026-01-25T15:07:03Z","dependencies":[{"issue_id":"holomush-x2t.86","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.87","title":"[E4-PR] Add containment_type field to query_object response","description":"## Problem\n\nThe `queryObjectFn` returns individual containment IDs (location_id, character_id, container_id) but doesn't indicate the containment **type**. Plugins would benefit from knowing whether an object is in a location, held by a character, or inside another object without checking which ID is non-nil.\n\n**Location:** `internal/plugin/hostfunc/world.go:254-298`\n\n## Acceptance Criteria\n\n- [ ] Add `containment_type` field to the returned Lua table\n- [ ] Value is one of: \"location\", \"character\", \"object\"\n- [ ] Update tests to verify the new field\n- [ ] Update plugin documentation if any\n\n## Suggested Implementation\n\n\\`\\`\\`go\nL.SetField(object, \"containment_type\", lua.LString(obj.Containment().Type()))\n\\`\\`\\`\n\n## Files to Modify\n\n- `internal/plugin/hostfunc/world.go`\n- `internal/plugin/hostfunc/world_test.go`","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T14:27:41Z","created_by":"seanb4t","updated_at":"2026-01-25T15:11:27Z","closed_at":"2026-01-25T15:11:27Z","dependencies":[{"issue_id":"holomush-x2t.87","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.88","title":"[E4-PR] Document FromType 'none' for first-time placements in MovePayload","description":"## Problem\n\nThe `MovePayload` type handles first-time placements well (FromType=\"none\", FromID=nil), but this isn't clearly documented on the struct field itself.\n\n**Location:** `internal/world/payloads.go:52-57`\n\n## Acceptance Criteria\n\n- [ ] Add doc comment clarifying the \"none\" case on `FromType` field\n- [ ] Example: `FromType ContainmentType // Source containment; \"none\" for first-time placements`\n\n## Files to Modify\n\n- `internal/world/payloads.go`","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T14:27:41Z","created_by":"seanb4t","updated_at":"2026-01-25T15:16:28Z","closed_at":"2026-01-25T15:16:28Z","dependencies":[{"issue_id":"holomush-x2t.88","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.89","title":"[E4-PR] Add target version to WithWorldQuerier deprecation notice","description":"## Problem\n\nThe deprecation notice on `WithWorldQuerier` doesn't specify when the function will be removed, making it harder for consumers to plan migration.\n\n**Location:** `internal/plugin/hostfunc/functions.go:54-58`\n\n**Current:**\n\\`\\`\\`go\n// Deprecated: WithWorldQuerier will be removed in a future release.\n\\`\\`\\`\n\n## Acceptance Criteria\n\n- [ ] Add target version to deprecation notice\n- [ ] Example: `// Deprecated: WithWorldQuerier will be removed in v1.0.0.`\n\n## Files to Modify\n\n- `internal/plugin/hostfunc/functions.go`","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T14:27:41Z","created_by":"seanb4t","updated_at":"2026-01-25T15:16:52Z","closed_at":"2026-01-25T15:16:52Z","dependencies":[{"issue_id":"holomush-x2t.89","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.9","title":"[E4-1.1] Database Migration for World Model","description":"Create the PostgreSQL migration for all world model tables.\n\n## Files\n- Create: `internal/store/migrations/003_world_model.sql`\n- Modify: `internal/store/postgres.go` (add migration embed and update Migrate function)\n\n## Implementation\n\n### Step 1: Write the migration SQL\nCreate migration with:\n- ALTER TABLE locations to add type, shadows_id, owner_id, replay_policy, archived_at\n- CREATE TABLE exits with visibility and lock support\n- CREATE TABLE objects with flexible containment\n- CREATE TABLE scene_participants\n\n### Step 2: Add migration embed to postgres.go\nAdd `//go:embed migrations/003_world_model.sql` and update Migrate() slice.\n\n### Step 3: Verify migration applies cleanly\nRun: `task test:integration`\nExpected: Migration applies without errors\n\n## Development Approach\n- **TDD:** N/A for migration (infrastructure)\n- **Review:** REQUIRED - Agent must review migration SQL against design spec before commit\n\n## Acceptance Criteria\n- [ ] Migration file created at `internal/store/migrations/003_world_model.sql`\n- [ ] All tables/columns from design spec present\n- [ ] Indexes created for foreign keys and common queries\n- [ ] postgres.go updated with embed and Migrate() updated\n- [ ] `task test:integration` passes\n- [ ] Agent code review completed","status":"closed","priority":0,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-23T02:14:29Z","created_by":"seanb4t","updated_at":"2026-01-23T02:33:55Z","closed_at":"2026-01-23T02:33:55Z","dependencies":[{"issue_id":"holomush-x2t.9","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.90","title":"[E4-PR] Include entity context in event emission retry debug logging","description":"## Problem\n\nThe retry debug logging in `emitWithRetry` includes stream, event_type, and attempt, but not entity-level context (object_id, character_id) that would make debugging easier.\n\n**Location:** `internal/world/events.go:19-27`\n\n**Current:**\n\\`\\`\\`go\nslog.Debug(\"event emission failed, will retry\",\n    \"stream\", stream,\n    \"event_type\", eventType,\n    \"attempt\", attempt,\n    \"error\", err)\n\\`\\`\\`\n\n## Acceptance Criteria\n\n- [ ] Add entity context to retry logging\n- [ ] Options: pass context to `emitWithRetry`, or use slog's `With()` at call sites\n- [ ] Update tests if logging format changes\n\n## Files to Modify\n\n- `internal/world/events.go`\n- `internal/world/events_test.go` (if needed)","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T14:27:42Z","created_by":"seanb4t","updated_at":"2026-01-25T15:13:26Z","closed_at":"2026-01-25T15:13:26Z","dependencies":[{"issue_id":"holomush-x2t.90","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.91","title":"[E4-PR] Add nil slice defensive check to GetCharactersByLocation","description":"## Problem\n\nThe `WorldQuerierAdapter.GetCharactersByLocation` method doesn't have a nil slice defensive check, unlike the other Get* methods which handle `(nil, nil)` returns from the service.\n\n**Location:** `internal/plugin/hostfunc/adapter.go:318-326`\n\nWhile a nil slice is a valid empty result, adding a defensive check would be consistent with the other methods and would catch potential service misbehavior.\n\n## Acceptance Criteria\n\n- [ ] Add nil check similar to other GetX methods\n- [ ] Return empty slice `[]*world.Character{}` instead of nil\n- [ ] Log warning if service returns nil slice (like other methods)\n- [ ] Add test case for nil slice scenario\n\n## Files to Modify\n\n- `internal/plugin/hostfunc/adapter.go`\n- `internal/plugin/hostfunc/adapter_test.go`","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T14:28:05Z","created_by":"seanb4t","updated_at":"2026-01-25T15:18:07Z","closed_at":"2026-01-25T15:18:07Z","dependencies":[{"issue_id":"holomush-x2t.91","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.92","title":"[E4-PR] Add self-examination test case for ExaminePayload","description":"## Problem\n\nNo test verifies what happens when a character examines themselves (TargetID == CharacterID). The behavior should be clarified and tested.\n\n**Location:** `internal/world/payloads_test.go`\n\n## Acceptance Criteria\n\n- [ ] Clarify whether self-examination is allowed (CharacterID == TargetID with TargetType=\"character\")\n- [ ] Add test case verifying expected behavior\n- [ ] Document decision in code comments if self-examination is explicitly allowed/disallowed\n\n## Questions to Answer\n\n- Should characters be able to examine themselves?\n- If not, should validation reject this case?\n\n## Files to Modify\n\n- `internal/world/payloads_test.go`\n- `internal/world/payloads.go` (if validation change needed)","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T14:28:05Z","created_by":"seanb4t","updated_at":"2026-01-25T15:22:20Z","closed_at":"2026-01-25T15:22:20Z","dependencies":[{"issue_id":"holomush-x2t.92","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.93","title":"[E4-PR] Add concurrent seed execution test for idempotency","description":"## Problem\n\nNo test verifies that two concurrent `seed` commands don't create duplicate locations. Race conditions could cause duplicate seed locations in production.\n\n**Location:** `test/integration/cli/seed_test.go`\n\n## Acceptance Criteria\n\n- [ ] Add test that runs multiple `holomush seed` commands concurrently\n- [ ] Verify only one \"The Nexus\" location is created\n- [ ] Verify no duplicate key errors cause test failure\n- [ ] Test should be deterministic (no flaky behavior)\n\n## Suggested Approach\n\n\\`\\`\\`go\nIt(\"handles concurrent seed commands\", func() {\n    var wg sync.WaitGroup\n    for i := 0; i \u003c 5; i++ {\n        wg.Add(1)\n        go func() {\n            defer wg.Done()\n            cmd := exec.CommandContext(ctx, \"go\", \"run\", \".\", \"seed\")\n            cmd.Dir = \"../../../cmd/holomush\"\n            cmd.Env = testEnv\n            _ = cmd.Run() // Ignore errors, some may fail with constraint violation\n        }()\n    }\n    wg.Wait()\n    \n    // Verify exactly one location exists\n    var count int\n    err := pool.QueryRow(ctx, \"SELECT COUNT(*) FROM locations WHERE name = 'The Nexus'\").Scan(\u0026count)\n    Expect(err).NotTo(HaveOccurred())\n    Expect(count).To(Equal(1))\n})\n\\`\\`\\`\n\n## Files to Modify\n\n- `test/integration/cli/seed_test.go`","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T14:28:06Z","created_by":"seanb4t","updated_at":"2026-01-25T15:14:57Z","closed_at":"2026-01-25T15:14:57Z","dependencies":[{"issue_id":"holomush-x2t.93","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.94","title":"[E4-PR] Add context timeout test for world queries","description":"## Problem\n\nNo test verifies graceful handling of context timeout during world queries in the host function layer.\n\n**Location:** `internal/plugin/hostfunc/world_test.go`\n\n## Acceptance Criteria\n\n- [ ] Add test with short context timeout for each query function\n- [ ] Verify timeout is handled gracefully (no panic)\n- [ ] Verify appropriate error message returned to Lua\n- [ ] Verify error is logged appropriately\n\n## Suggested Test Pattern\n\n\\`\\`\\`go\nfunc TestQueryRoom_ContextTimeout(t *testing.T) {\n    querier := \u0026mockWorldQuerier{\n        getLocationFn: func(ctx context.Context, id ulid.ULID) (*world.Location, error) {\n            select {\n            case \u003c-ctx.Done():\n                return nil, ctx.Err()\n            case \u003c-time.After(time.Second):\n                return \u0026world.Location{}, nil\n            }\n        },\n    }\n    // Create context that times out quickly\n    ctx, cancel := context.WithTimeout(context.Background(), time.Millisecond)\n    defer cancel()\n    // ... verify error handling\n}\n\\`\\`\\`\n\n## Files to Modify\n\n- `internal/plugin/hostfunc/world_test.go`","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T14:28:06Z","created_by":"seanb4t","updated_at":"2026-01-25T15:24:19Z","closed_at":"2026-01-25T15:24:19Z","dependencies":[{"issue_id":"holomush-x2t.94","depends_on_id":"holomush-x2t","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-x2t.95","title":"[E4-PR] Seed verification failure should return non-zero exit code","description":"## Problem\n\nWhen the seed location exists but attribute verification fails (e.g., database error during Get), the `seed` command logs an error and prints a warning but returns `nil` (success exit code). This could mislead automated deployment scripts.\n\n**Location:** `cmd/holomush/seed.go:121-128`\n\n**Current behavior:**\n```go\nexisting, getErr := locationRepo.Get(ctx, startingLocID)\nif getErr \\!= nil {\n    logVerificationFailure(cmd, startingLocID, getErr)\n    slog.Info(\"World already seeded\", \"location_id\", startingLocID)\n    return nil  // Returns success despite verification failure\n}\n```\n\n## Impact\n\nOperators running `holomush seed \u0026\u0026 deploy` would proceed with deployment even when seed verification failed, potentially deploying against a database with mismatched seed data.\n\n## Acceptance Criteria\n\n- [ ] Seed command returns non-zero exit code when verification fails\n- [ ] OR add `--skip-verify` flag with documented behavior\n- [ ] Update command help text to document verification behavior\n- [ ] Add test case for verification failure exit code","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T15:52:21Z","created_by":"seanb4t","updated_at":"2026-01-25T16:36:34Z","closed_at":"2026-01-25T16:36:34Z","work_type":"mutex"}
{"id":"holomush-x2t.96","title":"[E4-PR] Add test for MoveCharacter with generic Get error","description":"## Problem\n\nThe test covers `CHARACTER_NOT_FOUND` when `Get` returns `ErrNotFound`, but there is no test for when `Get` returns a generic database error.\n\n**Location:** `internal/world/service_test.go:~3380`\n\n**Code path:** `service.go:533-538`\n```go\nchar, err := s.characterRepo.Get(ctx, characterID)\nif err \\!= nil {\n    if errors.Is(err, ErrNotFound) {\n        return oops.Code(\"CHARACTER_NOT_FOUND\").Wrapf(err, \"move character %s\", characterID)\n    }\n    return oops.Code(\"CHARACTER_MOVE_FAILED\").Wrapf(err, \"get character %s\", characterID)\n}\n```\n\n## Bug Prevented\n\nEnsures proper error code differentiation between \"not found\" vs \"database failure\" - important for client error handling and debugging.\n\n## Acceptance Criteria\n\n- [ ] Add test `returns CHARACTER_MOVE_FAILED when Get fails with generic error`\n- [ ] Test verifies error code is `CHARACTER_MOVE_FAILED` (not `CHARACTER_NOT_FOUND`)\n- [ ] Test verifies error message contains context about the failure","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T15:52:21Z","created_by":"seanb4t","updated_at":"2026-01-25T16:38:00Z","closed_at":"2026-01-25T16:38:00Z","work_type":"mutex"}
{"id":"holomush-x2t.97","title":"[E4-PR] Add test for MoveCharacter location verification generic error","description":"## Problem\n\nThe test covers `LOCATION_NOT_FOUND` when destination location `Get` returns `ErrNotFound`, but there is no test for when destination location verification returns a generic database error.\n\n**Location:** `internal/world/service_test.go:~3410`\n\n**Code path:** `service.go:545-550`\n```go\nif _, err := s.locationRepo.Get(ctx, toLocationID); err \\!= nil {\n    if errors.Is(err, ErrNotFound) {\n        return oops.Code(\"LOCATION_NOT_FOUND\").Wrapf(err, \"move character to location %s\", toLocationID)\n    }\n    return oops.Code(\"CHARACTER_MOVE_FAILED\").Wrapf(err, \"verify destination location %s\", toLocationID)\n}\n```\n\n## Bug Prevented\n\nEnsures generic database errors during location verification are properly wrapped with error context.\n\n## Acceptance Criteria\n\n- [ ] Add test `returns CHARACTER_MOVE_FAILED when location verification fails with generic error`\n- [ ] Test sets up character found but location repo returns db error\n- [ ] Test verifies error code is `CHARACTER_MOVE_FAILED`","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T15:52:21Z","created_by":"seanb4t","updated_at":"2026-01-25T16:39:07Z","closed_at":"2026-01-25T16:39:07Z","work_type":"mutex"}
{"id":"holomush-x2t.98","title":"[E4-PR] Add test for ExamineCharacter when examiner not in world","description":"## Problem\n\nThere is a test for `ExamineLocation` when the examiner is not in the world, but the equivalent test for `ExamineCharacter` is missing.\n\n**Location:** `internal/world/service_test.go:~4031`\n\n**Code path:** `service.go:706-708`\n```go\nif char.LocationID == nil {\n    return oops.Code(\"EXAMINE_FAILED\").Errorf(\"character %s not in world\", characterID)\n}\n```\n\n## Bug Prevented\n\nEnsures consistent behavior validation across all Examine* methods.\n\n## Acceptance Criteria\n\n- [ ] Add test `returns error when examiner not in world` for ExamineCharacter\n- [ ] Test creates examiner with `LocationID: nil`\n- [ ] Test verifies error code is `EXAMINE_FAILED`\n- [ ] Test verifies error message contains \"not in world\"","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T15:52:22Z","created_by":"seanb4t","updated_at":"2026-01-25T16:40:17Z","closed_at":"2026-01-25T16:40:17Z","work_type":"mutex"}
{"id":"holomush-x2t.99","title":"[E4-PR] Add test for ExamineObject when examiner not in world","description":"## Problem\n\n`ExamineObject` is missing the \"examiner not in world\" test case that exists for `ExamineLocation`.\n\n**Location:** `internal/world/service_test.go:~3906`\n\n**Code path:** `service.go:657-659`\n```go\nif char.LocationID == nil {\n    return oops.Code(\"EXAMINE_FAILED\").Errorf(\"character %s not in world\", characterID)\n}\n```\n\n## Bug Prevented\n\nEnsures consistent behavior validation across all Examine* methods.\n\n## Acceptance Criteria\n\n- [ ] Add test `returns error when examiner not in world` for ExamineObject\n- [ ] Test creates examiner with `LocationID: nil`\n- [ ] Test verifies error code is `EXAMINE_FAILED`\n- [ ] Test verifies error message contains \"not in world\"","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T15:52:22Z","created_by":"seanb4t","updated_at":"2026-01-25T16:41:18Z","closed_at":"2026-01-25T16:41:18Z","work_type":"mutex"}
{"id":"holomush-x7kd","title":"Add documentation for visibility and lock_type columns","description":"## Problem\nThe `visibility` and `lock_type` columns in `internal/store/migrations/000003_world_model.up.sql:23-27` have no documentation for their valid values.\n\n## Current State\n```sql\nvisibility TEXT NOT NULL DEFAULT 'all',\nvisible_to TEXT[] DEFAULT '{}',\nlocked BOOLEAN NOT NULL DEFAULT FALSE,\nlock_type TEXT,\nlock_data JSONB,\n```\n\n## Acceptance Criteria\n- [ ] Add inline comments documenting valid values for `visibility`\n- [ ] Add inline comments documenting valid values for `lock_type`\n- [ ] Document the relationship between `visible_to` and `visibility='list'`\n\n## Suggested Comments\n```sql\nvisibility TEXT NOT NULL DEFAULT 'all',  -- 'all', 'owner', 'list' (controls who sees exit)\nvisible_to TEXT[] DEFAULT '{}',          -- character IDs when visibility='list'\nlocked BOOLEAN NOT NULL DEFAULT FALSE,\nlock_type TEXT,                          -- 'key', 'puzzle', 'attribute', etc.\nlock_data JSONB,                         -- type-specific lock configuration\n```\n\n## Files to Modify\n- `internal/store/migrations/000003_world_model.up.sql`","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T21:20:34Z","created_by":"seanb4t","updated_at":"2026-01-25T21:36:02Z","closed_at":"2026-01-25T21:36:02Z","work_type":"mutex"}
{"id":"holomush-xbmzr","title":"Update docs remove @ command prefixes","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-05T02:04:14Z","created_by":"seanb4t","updated_at":"2026-02-05T02:04:53Z","closed_at":"2026-02-05T02:04:53Z","work_type":"mutex"}
{"id":"holomush-xcz","title":"Consolidate duplicate test emitter types","description":"## Problem\nmockEmitter in extism_subscriber_test.go and collectingEmitter in integration_test.go have identical functionality.\n\n## Acceptance Criteria\n- [ ] Create single shared emitter type for tests\n- [ ] Remove duplicate implementations\n- [ ] All existing tests must pass\n- [ ] Independent code review before closing","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T15:36:21Z","created_by":"seanb4t","updated_at":"2026-01-18T15:58:28Z","closed_at":"2026-01-18T15:58:28Z","work_type":"mutex"}
{"id":"holomush-xd0q","title":"ABAC Review C1: Add degraded mode for corrupted forbid policies","description":"Issue: Corrupted forbid policy auto-disabled creates security gap until admin intervenes. Decision: Server enters degraded mode flag; non-admin subjects get EffectDefaultDeny; admin clears via policy clear-degraded-mode. AC: (1) Spec updated with degraded mode in corrupted policy section (2) Only forbid/deny effect policies trigger degraded mode (3) policy clear-degraded-mode command documented (4) Prometheus gauge abac_degraded_mode. Ref: docs/specs/2026-02-05-full-abac-design.md:1263-1295.","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:08Z","created_by":"seanb4t","updated_at":"2026-02-06T17:19:00Z","closed_at":"2026-02-06T17:19:00Z","dependencies":[{"issue_id":"holomush-xd0q","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-xd5i","title":"Verify auto-migrate documentation matches implementation","description":"## Summary\n\nThe operator documentation at `site/docs/operators/database.md:14-16` states:\n\n\u003e Migrations are embedded in the binary and run automatically on startup, or can be managed manually.\n\nThis claim needs verification against the actual implementation. The auto-migrate feature should either:\n1. Be confirmed as implemented and working\n2. Have the documentation updated to match current behavior\n\n## Acceptance Criteria\n\n- [ ] Verify auto-migrate is implemented in `cmd/holomush/core.go` or equivalent\n- [ ] Check `HOLOMUSH_AUTO_MIGRATE` environment variable handling\n- [ ] If implemented: add integration test for auto-migrate on startup\n- [ ] If NOT implemented: update docs to say \"can be managed via CLI commands\"\n- [ ] Ensure consistency between design doc and operator guide\n\n## References\n\n- Operator docs: `site/docs/operators/database.md:14-16`\n- Design plan auto-migrate section: `docs/plans/2026-01-24-database-migrations-design.md:174-191`\n- PR review finding: comment-analyzer agent","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T19:14:44Z","created_by":"seanb4t","updated_at":"2026-01-25T19:33:28Z","closed_at":"2026-01-25T19:33:28Z","work_type":"mutex"}
{"id":"holomush-xde","title":"Task 3.4: Object Handling Feature Specs","description":"## Overview\n\nImplement feature-level BDD specs for Object Handling covering pickup, drop, container operations, circular prevention, and containment invariants.\n\n## Files\n\n- **Create:** `test/integration/world/objects_test.go`\n\n## Work Required\n\nCreate `objects_test.go` with Ginkgo/Gomega BDD specs covering:\n\n### Describe \"Object Handling\"\n\n1. **Describe \"Picking up objects\"**\n   - It \"moves object from location to character inventory\"\n\n2. **Describe \"Dropping objects\"**\n   - It \"moves object from character inventory to location\"\n\n3. **Describe \"Container operations\"**\n   - Context \"putting objects in containers\"\n     - It \"moves object into container object\"\n     - It \"fails when target is not a container\"\n     - It \"fails when exceeding max nesting depth (3)\"\n   - Context \"taking objects from containers\"\n     - It \"moves object from container to character\"\n   - Context \"circular containment prevention\"\n     - It \"prevents putting container inside itself\"\n     - It \"prevents A-\u003eB-\u003eA circular chains\"\n     - It \"prevents deep circular chains A-\u003eB-\u003eC-\u003eA\"\n\n4. **Describe \"Containment invariants\"**\n   - It \"ensures object is in exactly one place\"\n   - It \"clears previous containment when moving\"\n\n## References\n\n- Implementation plan: `docs/plans/2026-01-23-world-model-bdd-tests-implementation.md` (Task 3.4)\n- Design doc: `docs/plans/2026-01-23-world-model-bdd-tests-design.md`\n- World model spec: `docs/specs/2026-01-22-world-model-design.md`\n\n## Acceptance Criteria\n\n- [ ] Spec file created at `test/integration/world/objects_test.go`\n- [ ] All 11 specs implemented\n- [ ] Expected: `task test:integration -- -v ./test/integration/world/... -ginkgo.focus=\"Object Handling\"` - All specs pass\n- [ ] Tests exercise container nesting depth enforcement (max 3)\n- [ ] Tests exercise circular containment prevention\n- [ ] Independent code review agent has reviewed the implementation","status":"tombstone","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-23T21:17:18Z","created_by":"seanb4t","updated_at":"2026-01-23T21:21:14Z","work_type":"mutex"}
{"id":"holomush-xhfv","title":"[E4-Post] Consider private Containment fields with factory-only construction","description":"**Source:** PR Review - Type Design Analyzer (Encapsulation 2/5)\n\n**Problem:**\nContainment type has public fields allowing direct construction that bypasses factory functions. The zero value `Containment{}` is invalid but compiles. The design decision document explains the tradeoff but stronger encapsulation is possible.\n\n**Options:**\n1. Make fields private with getters, force factory function use\n2. Add MustValidate() for contexts where invalid containment is a programming error\n3. Keep current design with enhanced documentation\n\n**Acceptance Criteria:**\n- [ ] Evaluate options considering Go idioms and codebase conventions\n- [ ] Document decision in object.go or design doc\n- [ ] If changing: update Containment type and all usages\n- [ ] If not changing: add godoc warning about direct construction\n\n**Files:**\n- Modify: `internal/world/object.go`","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T19:50:29Z","created_by":"seanb4t","updated_at":"2026-01-25T21:33:26Z","closed_at":"2026-01-25T21:33:26Z","work_type":"mutex"}
{"id":"holomush-xhiu","title":"[E6] Fix spec review findings","description":"Fix 10 issues identified in PR #62 design spec review for Commands \u0026 Behaviors Architecture.\n\n## File\n`docs/specs/2026-02-02-commands-behaviors-design.md`\n\n## Critical Issues\n\n### 1. ID type mismatch in SQL schema\n- **Location:** Lines 144-153 (alias tables)\n- **Problem:** SQL uses `UUID REFERENCES players(id)` but Go code uses `ulid.ULID`\n- **Fix:** Change to `TEXT` for ULID storage\n\n### 2. Alias query parameter inconsistency\n- **Location:** Sequence diagram\n- **Problem:** Diagram shows `PlayerAlias(charID, ...)` but table keyed on `player_id`\n- **Fix:** Update diagram to use `PlayerAlias(playerID, ...)`\n\n## Important Issues\n\n### 3. Missing RFC2119 keywords\n- **Problem:** Normative statements lack MUST/SHOULD/MAY per project conventions\n- **Fix:** Add RFC2119 keywords to all normative statements\n\n### 4. Command name validation ambiguity\n- **Problem:** Unclear if command names can start with special chars\n- **Fix:** Add explicit statement and examples\n\n### 5. Wildcard capability semantics undefined\n- **Problem:** `world.*` matching rules not explained\n- **Fix:** Add section explaining wildcard matching\n\n### 6. oops API usage incorrect\n- **Problem:** `oops.Define()` is not standard oops pattern\n- **Fix:** Update to use actual oops API from codebase\n\n### 7. Host function error handling unspecified\n- **Problem:** No error handling semantics for Lua host function failures\n- **Fix:** Add error handling specification\n\n### 8. Plugin load order unspecified\n- **Problem:** \"Last-loaded wins\" is non-deterministic without load order\n- **Fix:** Specify load order or change conflict strategy\n\n## Minor Issues\n\n### 9. Circular alias error message unspecified\n- **Fix:** Add specific error message and rejection behavior\n\n### 10. Aliases per-player rationale missing\n- **Fix:** Add rationale explaining why aliases are player-scoped\n\n## Acceptance Criteria\n- [ ] SQL schema uses TEXT for ULID storage\n- [ ] Sequence diagram uses playerID not charID for alias lookup\n- [ ] All normative statements have RFC2119 keywords\n- [ ] Command name validation rules explicit with examples\n- [ ] Wildcard capability matching semantics documented\n- [ ] oops error patterns match codebase usage\n- [ ] Host function error handling specified for Lua\n- [ ] Plugin load order specified or conflict strategy changed\n- [ ] Circular alias error message specified\n- [ ] Per-player alias rationale documented","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T17:10:31Z","created_by":"seanb4t","updated_at":"2026-02-02T17:19:07Z","closed_at":"2026-02-02T17:19:07Z","dependencies":[{"issue_id":"holomush-xhiu","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-xpu","title":"Fix thread safety: hold RLock during entire DeliverEvent call","description":"## Summary\nExtismHost.DeliverEvent releases the RLock before using the plugin pointer, creating a race condition if Close() is called concurrently.\n\n## Problem\n```go\nh.mu.RLock()\np, ok := h.plugins[pluginName]\nh.mu.RUnlock()  // Lock released before using p\n\nif \\!ok { ... }\nif \\!p.FunctionExists(\"handle_event\") { ... }  // p used outside lock\n```\n\nIf Close() is called after RUnlock() but before p.Call(), the plugin could be invalidated.\n\n## Solution\nHold the read lock for the entire DeliverEvent call, consistent with wazero PluginHost pattern.\n\n## Files\n- Modify: internal/wasm/extism_host.go\n\n## Acceptance Criteria\n- [ ] RLock held from plugin lookup through p.Call() completion\n- [ ] Test: `TestExtismHost_DeliverEvent_ConcurrentClose` demonstrates no race\n- [ ] Run with `go test -race` passes\n- [ ] Code review confirms fix","status":"closed","priority":1,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T15:13:19Z","created_by":"seanb4t","updated_at":"2026-01-18T15:22:35Z","closed_at":"2026-01-18T15:22:35Z","work_type":"mutex"}
{"id":"holomush-xzu","title":"Remove Unix domain control socket","description":"Remove Unix domain control socket and set port defaults.\n\n**Port changes:**\n\n| Flag | Type | Core Default | Gateway Default | Special Values |\n|------|------|--------------|-----------------|----------------|\n| `--control-port` | int | 9001 | 9002 | 0 = random |\n| `--metrics-port` | int | 9100 | 9101 | 0 = random, -1 = disabled |\n\n**Requirements:**\n1. Rename `--control-grpc-addr` to `--control-port` (int)\n2. Rename `--http-addr` to `--metrics-port` (int)\n3. Set defaults (not optional, flags not required)\n4. Remove Unix socket code:\n   - Delete: `internal/control/socket.go`\n   - Delete: `internal/control/socket_test.go`\n   - Update: `cmd/holomush/status.go` - use gRPC instead\n5. Update help text to document special values\n\n**Behavior:**\n- Control port is always enabled (can't disable)\n- Metrics port: -1 = disabled, 0 = random, N = specific port","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T00:11:42Z","created_by":"seanb4t","updated_at":"2026-01-18T01:04:35Z","closed_at":"2026-01-18T01:04:35Z","dependencies":[{"issue_id":"holomush-xzu","depends_on_id":"holomush-cjl","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-y0l02","title":"[E6.5] Shutdown command handler","description":"Implement shutdown command for graceful server shutdown.\n\n**Acceptance Criteria:**\n- Requires admin.shutdown capability\n- Optional delay parameter\n- Broadcasts warning to all players\n- Initiates graceful shutdown sequence\n- Logs admin action\n\n**Files:** internal/command/handlers/shutdown.go, internal/command/handlers/shutdown_test.go\n**Blocks:** holomush-wr9.8","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T18:08:42Z","created_by":"seanb4t","updated_at":"2026-02-03T15:05:12Z","closed_at":"2026-02-03T15:05:12Z","dependencies":[{"issue_id":"holomush-y0l02","depends_on_id":"holomush-rgihb","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-y0l02","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-y31o8","title":"[E6.1] Command types and interfaces","description":"Define CommandEntry, CommandExecution, CommandHandler, and Services types.\n\nAcceptance Criteria:\n- CommandEntry struct with Name, Handler, Capabilities, Help, Usage, HelpText, Source\n- CommandExecution struct with CharacterID, LocationID, PlayerID, SessionID, Args, Output, Services\n- Services struct with World, Session, Access, Events dependencies\n- Tests verify struct fields exist\n\nFiles: internal/command/types.go, internal/command/types_test.go","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T18:07:21Z","created_by":"seanb4t","updated_at":"2026-02-02T18:36:09Z","closed_at":"2026-02-02T18:36:09Z","dependencies":[{"issue_id":"holomush-y31o8","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-y65i","title":"Decisions: Add validation note to Decision #42 (sequential provider resolution)","description":"**Review Finding: I4 (Important)**\n\nDecision #42 claims parallel resolution saves less than 1ms total but provides no profiling data. With 4+ providers backed by PostgreSQL queries, sequential execution risks exceeding the 2ms budget from Decision #23.\n\n**Location:** Decisions doc, Decision #42\n\n**Acceptance Criteria:**\n- Add note: 'This decision assumes each provider completes in \u003c500μs'\n- Add: 'If profiling shows attribute resolution exceeding 2ms, parallel resolution can be added without API changes'\n- Acknowledge the \u003c1ms claim needs validation during implementation","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T14:04:52Z","created_by":"seanb4t","updated_at":"2026-02-06T14:25:48Z","closed_at":"2026-02-06T14:25:48Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-y65i","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-yc2","title":"Test Migrator behavior after Close()","description":"## Problem\nNo test verifies expected behavior when calling Up(), Down(), Status(), etc. after Close() on a Migrator instance.\n\n## Solution\nAdd test(s) documenting and verifying the expected behavior for post-Close() method calls.\n\n## Acceptance Criteria\n- [ ] Test added for Up() after Close()\n- [ ] Test added for Down() after Close()\n- [ ] Test added for Status() after Close()\n- [ ] Test added for Version() after Close()\n- [ ] Expected behavior is documented (error return, panic, or silent fail)\n- [ ] All tests pass with `task test`\n- [ ] Coverage maintained above 80%\n\n## Location\ninternal/store/migrate_test.go","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T16:40:31Z","created_by":"seanb4t","updated_at":"2026-01-25T17:36:10Z","closed_at":"2026-01-25T17:36:10Z","work_type":"mutex"}
{"id":"holomush-yc4d","title":"ADR: Use full 'character:' prefix for event streams","description":"**Context:** Phase 7.6 migration changed stream prefix from 'char:' to 'character:' for consistency with subject prefixes.\n\n**Decision:** No backward compatibility - only 'character:' prefix supported going forward.\n\n**Consequences:** Simpler code, no dual-prefix handling, but requires coordinated deployment if consumers exist.\n\n**Alternatives Considered:**\n- Support both 'char:' and 'character:' prefixes (rejected: adds complexity)\n- Maintain 'char:' prefix (rejected: inconsistent with subject naming)\n\n**Status:** Decided (2026-02-14)","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-14T18:27:00Z","created_by":"seanb4t","updated_at":"2026-02-14T18:27:04Z","closed_at":"2026-02-14T18:27:04Z","close_reason":"Decision documented"}
{"id":"holomush-yd8h","title":"Extract dispatcher capability check helper","description":"PR #88 review suggestion S6: 35-line inline access check in dispatcher.go:167-198 duplicates the checkAccess pattern. Extract a checkCapability helper to reduce boilerplate.","status":"open","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-16T01:26:53Z","created_by":"seanb4t","updated_at":"2026-02-16T01:44:00Z","external_ref":"https://github.com/holomush/holomush/pull/88#issuecomment-RC_IC_kwDOQ7tZvM7o0CyA","labels":["deferred-work","review-finding"],"dependencies":[{"issue_id":"holomush-yd8h","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-15T21:19:56Z","created_by":"seanb4t","metadata":"{}"}]}
{"id":"holomush-yhg6","title":"Spec: Specify CTE failure error handling for parent_location resolution","description":"**Review Finding: I5 (Important)**\n\nThe recursive CTE for parent_location resolution can fail (PostgreSQL timeout, resource exhaustion). The spec doesn't specify whether PropertyProvider should return (nil, error) (core provider failure → deny + error) or treat it as missing attribute.\n\n**Location:** Main spec, Property Model (~line 1102)\n\n**Acceptance Criteria:**\n- Spec states: CTE failure is a core provider error, PropertyProvider returns (nil, err)\n- This triggers EffectDefaultDeny with error propagation\n- Recommends operators monitor for CTE timeout errors\n- Document investigation steps for data model integrity issues","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T14:04:56Z","created_by":"seanb4t","updated_at":"2026-02-06T14:25:48Z","closed_at":"2026-02-06T14:25:48Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-yhg6","depends_on_id":"holomush-4vpj","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-yhg6","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-yjob","title":"[E5.9.3] ADR 0004: Timing-Attack Resistant Authentication","description":"## Context\n\nPR 61 implements timing-attack resistant authentication to prevent user enumeration. This is a subtle security pattern that spans multiple code locations and could easily regress without documentation.\n\n## Current State\n\nImplementation across `internal/auth/`:\n- Dummy hash verification for non-existent users (`auth_service.go:67-76`)\n- Lockout check AFTER password verification (`auth_service.go:132-141`)\n- Constant-time token comparison (`session.go:115-125`, `hasher.go:139`)\n\n## Decision Points to Document\n\n1. **The timing attack threat**\n   - Without mitigation: login for non-existent user returns faster\n   - Attacker can enumerate valid usernames by measuring response time\n   - Knowledge of valid usernames enables targeted attacks\n\n2. **Dummy hash mitigation**\n   - Pre-computed hash with same argon2id parameters as real hashes\n   - Always verify password even for non-existent users\n   - Ensures consistent response time regardless of user existence\n\n3. **Lockout timing**\n   - Naive: check lockout first, return early if locked\n   - Problem: locked accounts respond faster than unlocked\n   - Solution: verify password first, then check lockout\n   - Maintains timing consistency\n\n4. **Constant-time comparison**\n   - `crypto/subtle.ConstantTimeCompare` for all sensitive comparisons\n   - Token hashes, password verification results\n   - Prevents byte-by-byte timing analysis\n\n## Acceptance Criteria\n\n- [ ] Create `docs/adr/0004-timing-attack-resistant-auth.md`\n- [ ] Document timing attack threat model\n- [ ] Explain dummy hash approach and why parameters must match (link to ADR 0002)\n- [ ] Document lockout timing decision\n- [ ] Document constant-time comparison requirements\n- [ ] Include code locations that must maintain this pattern\n- [ ] Follow ADR format from `docs/adr/0001-opaque-session-tokens.md`\n- [ ] Pass `task lint:markdown`","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T15:45:16Z","created_by":"seanb4t","updated_at":"2026-02-02T15:52:40Z","closed_at":"2026-02-02T15:52:40Z","dependencies":[{"issue_id":"holomush-yjob","depends_on_id":"holomush-dwk","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"},{"issue_id":"holomush-yjob","depends_on_id":"holomush-qr25","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-ynw4","title":"findCharacterByName: preserve error context in WorldError","description":"boot handler's findCharacterByName wraps nil in WorldError() at line 199, losing the original ErrAccessEvaluationFailed in the error chain. The errors ARE logged by checkAccess, so diagnostic context is in logs — but not in the returned error. Consider whether WorldError should carry diagnostic context for operator tooling (e.g. structured error fields). Discovered in PR #88 review (finding #9).","status":"open","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-16T02:13:16Z","created_by":"seanb4t","updated_at":"2026-02-16T02:19:50Z","external_ref":"https://github.com/holomush/holomush/pull/88#issuecomment-3904727321","labels":["deferred-work","review-finding"],"dependencies":[{"issue_id":"holomush-ynw4","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-15T21:19:55Z","created_by":"seanb4t","metadata":"{}"}]}
{"id":"holomush-z42q","title":"ABAC Review I11: Align fuzz corpus directory with Go conventions","description":"Issue: Spec says testdata/fuzz_crashes/ but Go uses testdata/fuzz/FuzzTestName/. AC: (1) Directory path corrected (2) CI regression test requirement documented. Ref: docs/specs/2026-02-05-full-abac-design.md:2532-2550.","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T16:46:11Z","created_by":"seanb4t","updated_at":"2026-02-06T17:26:00Z","closed_at":"2026-02-06T17:26:00Z","dependencies":[{"issue_id":"holomush-z42q","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-z8at","title":"[E4-Post] Return error from ParseReplayPolicy instead of silent default","description":"**Source:** PR review - error handling audit\n\n**Problem:**\n`ParseReplayPolicy` in `internal/world/location.go:124-141` logs warnings for invalid input but returns a default value (0) without surfacing the error. This creates silent degradation where:\n- Invalid replay policies default to \"no replay\" without operator awareness\n- Typos like \"last:-\" or \"Last:10\" silently fail\n\n**Hidden Errors:**\n- Malformed policy strings (wrong prefix, non-numeric count)\n- Configuration mistakes that operators intended to catch\n\n**User Impact:**\n- Operators configuring replay policies incorrectly will see no errors\n- Scenes may not replay as expected, causing user confusion\n\n**Acceptance Criteria:**\n- [ ] `ParseReplayPolicy` returns `(int, error)` instead of just `int`\n- [ ] Callers handle invalid policy errors appropriately\n- [ ] Test covers malformed input cases\n- [ ] Invalid policies produce actionable error messages","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-25T21:44:13Z","created_by":"seanb4t","updated_at":"2026-01-25T21:57:51Z","closed_at":"2026-01-25T21:57:51Z","work_type":"mutex"}
{"id":"holomush-zcva","title":"Investigate participle *bool capture bug for false literal","description":"The T12 compiler agent found that participle's @('true'|'false') on *bool may always capture as true regardless of the actual token. The compiler works around this by testing unreachable conditions via direct AST construction. Need to verify the extent of this bug and whether it affects evaluation correctness. May need custom Capture implementation on a wrapper type.","status":"closed","priority":3,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-12T23:42:00Z","created_by":"seanb4t","updated_at":"2026-02-13T00:32:54Z","closed_at":"2026-02-13T00:32:54Z","close_reason":"Fixed: bool literals now captured as *string instead of *bool"}
{"id":"holomush-zd2hs","title":"[E6.1] Command and alias name validation","description":"Implement validation for command and alias names per spec pattern.\n\nAcceptance Criteria:\n- ValidateCommandName matches ^[a-zA-Z][a-zA-Z0-9_\\!?@#$%^+-]{0,19}$\n- ValidateAliasName uses same pattern\n- Max length 20 characters enforced\n- Error messages include context\n- Table-driven tests for valid/invalid cases\n\nFiles: internal/command/validation.go, internal/command/validation_test.go","status":"closed","priority":1,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-02T18:07:25Z","created_by":"seanb4t","updated_at":"2026-02-02T18:47:31Z","closed_at":"2026-02-02T18:47:31Z","dependencies":[{"issue_id":"holomush-zd2hs","depends_on_id":"holomush-wr9","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-zhe","title":"Simplify matchesAny helper using slices.ContainsFunc","description":"## Summary\nThe matchesAny helper function in extism_subscriber.go is trivial and can be eliminated using slices.ContainsFunc inline.\n\n## Location\n`internal/wasm/extism_subscriber.go:86-93`\n\n## Current\n```go\nfunc (s *ExtismSubscriber) matchesAny(stream string, patterns []string) bool {\n    for _, pattern := range patterns {\n        if s.matchPattern(stream, pattern) {\n            return true\n        }\n    }\n    return false\n}\n```\n\n## Proposed\n```go\nif \\!slices.ContainsFunc(patterns, func(p string) bool {\n    return s.matchPattern(event.Stream, p)\n}) {\n    continue\n}\n```\n\n## Acceptance Criteria\n- [ ] Tests pass before change (baseline)\n- [ ] Remove matchesAny and inline with slices.ContainsFunc\n- [ ] All existing tests still pass\n- [ ] Independent review by subagent confirms simplification maintains behavior","status":"closed","priority":3,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T17:13:23Z","created_by":"seanb4t","updated_at":"2026-01-18T17:28:35Z","closed_at":"2026-01-18T17:28:35Z","work_type":"mutex"}
{"id":"holomush-zm7","title":"Replace time.Sleep with sync primitive in ConcurrentClose test","description":"## Summary\nTestExtismHost_DeliverEvent_ConcurrentClose uses time.Sleep(10ms) which is a timing-based race condition that could cause flaky tests.\n\n## Location\n`internal/wasm/extism_host_test.go:333`\n\n## Current\n```go\ntime.Sleep(10 * time.Millisecond)\n```\n\n## Acceptance Criteria\n- [ ] Write a test that demonstrates the current timing fragility (if possible)\n- [ ] Replace time.Sleep with proper synchronization (channel or sync primitive)\n- [ ] Test passes reliably under -race flag\n- [ ] Independent review by subagent confirms fix","status":"closed","priority":2,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-18T17:13:24Z","created_by":"seanb4t","updated_at":"2026-01-18T17:36:14Z","closed_at":"2026-01-18T17:36:14Z","dependencies":[{"issue_id":"holomush-zm7","depends_on_id":"holomush-pee","type":"blocks","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-znbl","title":"ADR 0013: Document circular dependency being prevented by WorldService bypass","description":"**Review Finding: I9 (Important)**\n\nADR 0013 states PropertyProvider MUST bypass WorldService but doesn't explain why. The circular dependency chain is: Engine → PropertyProvider → WorldService → Engine.Evaluate(). Future maintainers might refactor to use WorldService and reintroduce the cycle.\n\n**Location:** ADR 0013 (Properties as First-Class Entities), lines 94-104\n\n**Acceptance Criteria:**\n- ADR explains the dependency cycle: Engine → PropertyProvider → WorldService → Engine.Evaluate()\n- Documents that WorldService methods check authorization, which is what creates the cycle\n- Shows the correct layering: Engine → PropertyProvider → PropertyRepository → PostgreSQL\n- Add to Negative consequences: PropertyProvider sees all properties regardless of visibility (intentional for deny-overrides)","status":"closed","priority":2,"issue_type":"bug","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-02-06T14:05:22Z","created_by":"seanb4t","updated_at":"2026-02-06T14:25:48Z","closed_at":"2026-02-06T14:25:48Z","labels":["review-finding"],"dependencies":[{"issue_id":"holomush-znbl","depends_on_id":"holomush-5k1","type":"parent-child","created_at":"2026-02-11T18:05:30Z","created_by":"import","metadata":"{}"}],"work_type":"mutex"}
{"id":"holomush-zy6","title":"Evaluate AccessControl interface error handling","description":"## Problem\n\n`AccessControl.Check` returns bool instead of error. This means:\n- Cannot distinguish between \"denied\" and \"error during check\"\n- If ABAC system has internal error, it appears as denial\n- Users receive \"permission denied\" instead of \"internal error\" for infrastructure issues\n\n**Location:** `internal/world/service.go:19-23`\n\n## Current Interface\n\n```go\ntype AccessControl interface {\n    Check(ctx context.Context, subject, action, resource string) bool\n}\n```\n\n## Acceptance Criteria\n\n- [ ] Evaluate whether interface change is needed for this PR or is out of scope\n- [ ] If in scope: change interface to return `(bool, error)`\n- [ ] If in scope: update all AccessControl implementations\n- [ ] If in scope: update all service methods to handle check errors\n- [ ] If out of scope: document decision and create future task\n\n## Implementation Notes\n\nThis may be out of scope for PR #35 if the interface is used elsewhere or if ABAC implementation is in a different epic.\n\nSuggested interface change:\n```go\ntype AccessControl interface {\n    Check(ctx context.Context, subject, action, resource string) (bool, error)\n}\n```","status":"closed","priority":4,"issue_type":"task","owner":"4678+seanb4t@users.noreply.github.com","created_at":"2026-01-24T19:52:26Z","created_by":"seanb4t","updated_at":"2026-01-24T20:05:57Z","closed_at":"2026-01-24T20:05:57Z","work_type":"mutex"}
